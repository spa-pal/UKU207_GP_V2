; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 -DWG12232A --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  kb_init PROC
;;;228    //-----------------------------------------------
;;;229    void kb_init(void)
000000  48ff              LDR      r0,|L1.1024|
;;;230    {
;;;231    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f06f013b          MVN      r1,#0x3b
000006  8800              LDRH     r0,[r0,#0]  ; TBAT
000008  ebc01000          RSB      r0,r0,r0,LSL #4
00000c  eb010080          ADD      r0,r1,r0,LSL #2
000010  49fc              LDR      r1,|L1.1028|
000012  84c8              STRH     r0,[r1,#0x26]
;;;232    }
000014  4770              BX       lr
;;;233    
                          ENDP

                  samokalibr_init PROC
;;;239    //-----------------------------------------------
;;;240    void samokalibr_init(void)
000016  49fb              LDR      r1,|L1.1028|
;;;241    {
;;;242    samokalibr_cnt=1785;
000018  f24060f9          MOV      r0,#0x6f9
00001c  8488              STRH     r0,[r1,#0x24]
;;;243    }
00001e  4770              BX       lr
;;;244    //-----------------------------------------------
                          ENDP

                  samokalibr_hndl PROC
;;;245    void samokalibr_hndl(void)
000020  b510              PUSH     {r4,lr}
;;;246    {
;;;247    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000022  4cf8              LDR      r4,|L1.1028|
000024  8ca0              LDRH     r0,[r4,#0x24]  ; samokalibr_cnt
000026  1c40              ADDS     r0,r0,#1
000028  b200              SXTH     r0,r0
00002a  84a0              STRH     r0,[r4,#0x24]
00002c  f5b06fe1          CMP      r0,#0x708
000030  db02              BLT      |L1.56|
000032  2000              MOVS     r0,#0
000034  84a0              STRH     r0,[r4,#0x24]
                  |L1.54|
;;;248    
;;;249    if(samokalibr_cnt>=1785U)
;;;250    	{
;;;251    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
;;;252    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
;;;253    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
;;;254    	} 
;;;255    
;;;256    if(samokalibr_cnt==1799U)
;;;257    	{
;;;258    	if(Kiload0!=ad7705_buff_[0]) lc640_write_int(EE_KILOAD0,ad7705_buff_[0]);
;;;259    	}	 	
;;;260    }
000036  bd10              POP      {r4,pc}
                  |L1.56|
000038  f5b06fdf          CMP      r0,#0x6f8             ;249
00003c  d911              BLS      |L1.98|
00003e  230f              MOVS     r3,#0xf               ;251
000040  2201              MOVS     r2,#1                 ;251
000042  2164              MOVS     r1,#0x64              ;251
000044  20d2              MOVS     r0,#0xd2              ;251
000046  f7fffffe          BL       mess_send
00004a  230f              MOVS     r3,#0xf               ;252
00004c  2200              MOVS     r2,#0                 ;252
00004e  21d8              MOVS     r1,#0xd8              ;252
000050  20d7              MOVS     r0,#0xd7              ;252
000052  f7fffffe          BL       mess_send
000056  230f              MOVS     r3,#0xf               ;253
000058  2200              MOVS     r2,#0                 ;253
00005a  21d8              MOVS     r1,#0xd8              ;253
00005c  20dc              MOVS     r0,#0xdc              ;253
00005e  f7fffffe          BL       mess_send
                  |L1.98|
000062  f9b40024          LDRSH    r0,[r4,#0x24]         ;256  ; samokalibr_cnt
000066  f5a061e0          SUB      r1,r0,#0x700          ;256
00006a  3907              SUBS     r1,#7                 ;256
00006c  d1e3              BNE      |L1.54|
00006e  48e6              LDR      r0,|L1.1032|
000070  4ae6              LDR      r2,|L1.1036|
000072  8801              LDRH     r1,[r0,#0]            ;258  ; ad7705_buff_
000074  6812              LDR      r2,[r2,#0]            ;258  ; Kiload0
000076  4291              CMP      r1,r2                 ;258
000078  d0dd              BEQ      |L1.54|
00007a  f9b01000          LDRSH    r1,[r0,#0]            ;258  ; ad7705_buff_
00007e  e8bd4010          POP      {r4,lr}               ;258
000082  2014              MOVS     r0,#0x14              ;258
000084  f7ffbffe          B.W      lc640_write_int
;;;261    
                          ENDP

                  unet_drv PROC
;;;274    //-----------------------------------------------
;;;275    void unet_drv(void)
000088  4ae1              LDR      r2,|L1.1040|
;;;276    {
00008a  b430              PUSH     {r4,r5}
;;;277    if((adc_buff_[5]>3500)||(adc_buff_[10]>3500))
;;;278    	{
;;;279    	if(unet_drv_cnt<20)unet_drv_cnt++;
00008c  49e1              LDR      r1,|L1.1044|
00008e  f9b2400a          LDRSH    r4,[r2,#0xa]          ;277  ; adc_buff_
000092  f64053ac          MOV      r3,#0xdac             ;277
000096  f9b10000          LDRSH    r0,[r1,#0]
00009a  429c              CMP      r4,r3                 ;277
00009c  dc03              BGT      |L1.166|
00009e  f9b22014          LDRSH    r2,[r2,#0x14]         ;277  ; adc_buff_
0000a2  429a              CMP      r2,r3                 ;277
0000a4  dd03              BLE      |L1.174|
                  |L1.166|
0000a6  2814              CMP      r0,#0x14
0000a8  da04              BGE      |L1.180|
0000aa  1c40              ADDS     r0,r0,#1
0000ac  e001              B        |L1.178|
                  |L1.174|
;;;280    	}
;;;281    else if(unet_drv_cnt)unet_drv_cnt--;
0000ae  b108              CBZ      r0,|L1.180|
0000b0  1e40              SUBS     r0,r0,#1
                  |L1.178|
0000b2  8008              STRH     r0,[r1,#0]
                  |L1.180|
;;;282    
;;;283    gran(&unet_drv_cnt,0,20);
0000b4  2214              MOVS     r2,#0x14
0000b6  bc30              POP      {r4,r5}
0000b8  2100              MOVS     r1,#0
0000ba  48d6              LDR      r0,|L1.1044|
0000bc  f7ffbffe          B.W      gran
;;;284    }
;;;285    
                          ENDP

                  matemat PROC
;;;286    //-----------------------------------------------
;;;287    void matemat(void)
0000c0  b5f0              PUSH     {r4-r7,lr}
;;;288    {
;;;289    //signed short temp_SS;
;;;290    signed long temp_SL/*,temp_SL_*/;
;;;291    char /*temp,*/i;
;;;292    
;;;293    
;;;294    temp_SL=(signed long)adc_buff_[0];
0000c2  48d3              LDR      r0,|L1.1040|
;;;295    temp_SL*=Kuload;
0000c4  49d4              LDR      r1,|L1.1048|
;;;296    temp_SL/=500L;
0000c6  f44f72fa          MOV      r2,#0x1f4
0000ca  f9b00000          LDRSH    r0,[r0,#0]            ;294  ; adc_buff_
0000ce  f9b11000          LDRSH    r1,[r1,#0]            ;295  ; Kuload
;;;297    load_U=(signed short)temp_SL;
0000d2  4bd2              LDR      r3,|L1.1052|
0000d4  4348              MULS     r0,r1,r0              ;295
0000d6  fb90f0f2          SDIV     r0,r0,r2              ;296
0000da  8018              STRH     r0,[r3,#0]
;;;298    
;;;299    temp_SL=(signed long)adc_buff__[0];
0000dc  48cc              LDR      r0,|L1.1040|
;;;300    temp_SL*=Kuload;
;;;301    temp_SL/=500L;
;;;302    load_U_=(signed short)temp_SL;
;;;303    
;;;304    
;;;305    temp_SL=(signed long)ad7705_buff_[0];
;;;306    temp_SL-=(signed long)Kiload0;
;;;307    temp_SL*=(signed long)Kiload1;
;;;308    temp_SL/=5000L;
0000de  f2413388          MOV      r3,#0x1388
0000e2  3020              ADDS     r0,r0,#0x20           ;299
;;;309    load_I=(signed short)temp_SL;
;;;310    
;;;311    //temp_SL=(signed long)ad7705_buff__[0];
;;;312    temp_SL-=(signed long)Kiload0;
;;;313    temp_SL*=(signed long)Kiload1;
;;;314    temp_SL/=5000L;
;;;315    load_I_=(signed short)temp_SL;
0000e4  4dd1              LDR      r5,|L1.1068|
0000e6  f9b00000          LDRSH    r0,[r0,#0]            ;299  ; adc_buff__
0000ea  4348              MULS     r0,r1,r0              ;300
0000ec  fb90f0f2          SDIV     r0,r0,r2              ;301
0000f0  49cb              LDR      r1,|L1.1056|
0000f2  4acd              LDR      r2,|L1.1064|
0000f4  8008              STRH     r0,[r1,#0]            ;302
0000f6  49c5              LDR      r1,|L1.1036|
0000f8  48c3              LDR      r0,|L1.1032|
0000fa  680c              LDR      r4,[r1,#0]            ;306  ; Kiload0
0000fc  49c9              LDR      r1,|L1.1060|
0000fe  8800              LDRH     r0,[r0,#0]            ;305  ; ad7705_buff_
000100  f9b11000          LDRSH    r1,[r1,#0]            ;307  ; Kiload1
000104  1b00              SUBS     r0,r0,r4              ;306
000106  4348              MULS     r0,r1,r0              ;307
000108  fb90f0f3          SDIV     r0,r0,r3              ;308
00010c  8010              STRH     r0,[r2,#0]            ;309
00010e  1b00              SUBS     r0,r0,r4              ;312
000110  4348              MULS     r0,r1,r0              ;313
000112  fb90f0f3          SDIV     r0,r0,r3              ;314
000116  8028              STRH     r0,[r5,#0]
;;;316    
;;;317    if(I_LOAD_MODE==0)
000118  48c5              LDR      r0,|L1.1072|
;;;318    	{
;;;319    	temp_SL=0;
;;;320    	for(i=0;i<NUMIST;i++)
;;;321    		{
;;;322    		temp_SL+=bps[i]._Ii;
00011a  4bc7              LDR      r3,|L1.1080|
00011c  8801              LDRH     r1,[r0,#0]            ;317  ; I_LOAD_MODE
00011e  48c5              LDR      r0,|L1.1076|
000120  f9b04000          LDRSH    r4,[r0,#0]            ;320
000124  b971              CBNZ     r1,|L1.324|
000126  2000              MOVS     r0,#0                 ;319
000128  4601              MOV      r1,r0                 ;320
00012a  e007              B        |L1.316|
                  |L1.300|
00012c  eb010641          ADD      r6,r1,r1,LSL #1
000130  eb031646          ADD      r6,r3,r6,LSL #5
000134  1c49              ADDS     r1,r1,#1              ;320
000136  6a36              LDR      r6,[r6,#0x20]
000138  b2c9              UXTB     r1,r1                 ;320
00013a  4430              ADD      r0,r0,r6
                  |L1.316|
00013c  42a1              CMP      r1,r4                 ;320
00013e  dbf5              BLT      |L1.300|
;;;323    		}
;;;324    	//temp_SL/=NUMIST;
;;;325    	
;;;326    	load_I=(signed short)temp_SL;
000140  8010              STRH     r0,[r2,#0]
;;;327    	load_I_=(signed short)temp_SL;
000142  8028              STRH     r0,[r5,#0]
                  |L1.324|
;;;328    	}
;;;329    
;;;330    if(load_I<0)load_I=0;
000144  f9b20000          LDRSH    r0,[r2,#0]  ; load_I
000148  2100              MOVS     r1,#0                 ;317
00014a  2800              CMP      r0,#0
00014c  da00              BGE      |L1.336|
00014e  8011              STRH     r1,[r2,#0]
                  |L1.336|
;;;331    //load_I=333;
;;;332    /*
;;;333    bps[0]._cnt=0;
;;;334    if(debug_cnt==0)
;;;335    	{
;;;336    	bps[0]._buff[6]=0x00;
;;;337    	}
;;;338    else if(debug_cnt==1)
;;;339    	{
;;;340    	bps[0]._buff[6]=0xf0;
;;;341    	}
;;;342    else if(debug_cnt==2)
;;;343    	{
;;;344    	bps[0]._buff[6]=0xff;
;;;345    	}
;;;346    else if(debug_cnt==3)
;;;347    	{
;;;348    	bps[0]._buff[6]=0x80;
;;;349    	}
;;;350    else if(debug_cnt==4)
;;;351    	{
;;;352    	bps[0]._buff[6]=0x0f;
;;;353    	}
;;;354    */
;;;355    for(i=0;i<32;i++)
000150  f05f0200          MOVS.W   r2,#0
                  |L1.340|
;;;356    	{
;;;357    	if(bps[i]._cnt<25)
000154  eb020042          ADD      r0,r2,r2,LSL #1
000158  eb031040          ADD      r0,r3,r0,LSL #5
00015c  78c5              LDRB     r5,[r0,#3]
00015e  2d19              CMP      r5,#0x19
000160  d21c              BCS      |L1.412|
;;;358    	     {
;;;359    	     bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
000162  7985              LDRB     r5,[r0,#6]
000164  79c6              LDRB     r6,[r0,#7]
000166  eb052606          ADD      r6,r5,r6,LSL #8
;;;360    	     bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
00016a  6206              STR      r6,[r0,#0x20]
00016c  7a06              LDRB     r6,[r0,#8]
00016e  7a47              LDRB     r7,[r0,#9]
000170  eb062607          ADD      r6,r6,r7,LSL #8
;;;361    	     bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
000174  61c6              STR      r6,[r0,#0x1c]
000176  7a86              LDRB     r6,[r0,#0xa]
000178  7ac7              LDRB     r7,[r0,#0xb]
00017a  eb062607          ADD      r6,r6,r7,LSL #8
;;;362    	     bps[i]._Ti=(signed)((signed char)bps[i]._buff[6]);
00017e  6186              STR      r6,[r0,#0x18]
000180  f990600c          LDRSB    r6,[r0,#0xc]
;;;363    	     bps[i]._adr_ee=bps[i]._buff[0];
000184  6246              STR      r6,[r0,#0x24]
000186  f880504e          STRB     r5,[r0,#0x4e]
;;;364    	     bps[i]._flags_tm=bps[i]._buff[8];
00018a  7b85              LDRB     r5,[r0,#0xe]
00018c  f880503e          STRB     r5,[r0,#0x3e]
;;;365    		bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
000190  7c05              LDRB     r5,[r0,#0x10]
000192  7c46              LDRB     r6,[r0,#0x11]
000194  eb052506          ADD      r5,r5,r6,LSL #8
000198  6485              STR      r5,[r0,#0x48]
00019a  e006              B        |L1.426|
                  |L1.412|
;;;366    	     } 
;;;367    	else 
;;;368    	     {
;;;369    	     bps[i]._Uii=0; 
;;;370    	     bps[i]._Ii=0;
00019c  6181              STR      r1,[r0,#0x18]
;;;371    	     bps[i]._Uin=0;
00019e  6201              STR      r1,[r0,#0x20]
;;;372    	     bps[i]._Ti=0;
0001a0  61c1              STR      r1,[r0,#0x1c]
;;;373    	     bps[i]._flags_tm=0; 
0001a2  6241              STR      r1,[r0,#0x24]
0001a4  f880103e          STRB     r1,[r0,#0x3e]
;;;374    		bps[i]._rotor=0;    
0001a8  6481              STR      r1,[r0,#0x48]
                  |L1.426|
0001aa  1c52              ADDS     r2,r2,#1              ;355
0001ac  b2d2              UXTB     r2,r2                 ;355
0001ae  2a20              CMP      r2,#0x20              ;355
0001b0  d3d0              BCC      |L1.340|
;;;375    	     }
;;;376    	}
;;;377    
;;;378    
;;;379    I_MAX_IPS=I_MAX*NUMIST;
0001b2  48a2              LDR      r0,|L1.1084|
0001b4  49a2              LDR      r1,|L1.1088|
0001b6  8800              LDRH     r0,[r0,#0]  ; I_MAX
0001b8  4360              MULS     r0,r4,r0
0001ba  8008              STRH     r0,[r1,#0]
;;;380    I_MIN_IPS=I_MIN*NUMIST;
0001bc  48a1              LDR      r0,|L1.1092|
0001be  49a2              LDR      r1,|L1.1096|
0001c0  8800              LDRH     r0,[r0,#0]  ; I_MIN
0001c2  4360              MULS     r0,r4,r0
0001c4  8008              STRH     r0,[r1,#0]
;;;381    }
0001c6  bdf0              POP      {r4-r7,pc}
;;;382    
                          ENDP

                  adc_init PROC
;;;385    //-----------------------------------------------
;;;386    void adc_init(void)
0001c8  48a0              LDR      r0,|L1.1100|
;;;387    {
;;;388    
;;;389    SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0001ca  6841              LDR      r1,[r0,#4]
0001cc  f4212140          BIC      r1,r1,#0xc0000
0001d0  f4412180          ORR      r1,r1,#0x40000
0001d4  6041              STR      r1,[r0,#4]
;;;390    SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0001d6  6841              LDR      r1,[r0,#4]
0001d8  f4213140          BIC      r1,r1,#0x30000
0001dc  f4413180          ORR      r1,r1,#0x10000
0001e0  6041              STR      r1,[r0,#4]
;;;391    SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0001e2  6841              LDR      r1,[r0,#4]
0001e4  f4214140          BIC      r1,r1,#0xc000
0001e8  f4414180          ORR      r1,r1,#0x4000
0001ec  6041              STR      r1,[r0,#4]
;;;392    
;;;393    
;;;394    SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0001ee  6c41              LDR      r1,[r0,#0x44]
0001f0  f4212140          BIC      r1,r1,#0xc0000
0001f4  f4412100          ORR      r1,r1,#0x80000
0001f8  6441              STR      r1,[r0,#0x44]
;;;395    SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
0001fa  6c41              LDR      r1,[r0,#0x44]
0001fc  f4213140          BIC      r1,r1,#0x30000
000200  f4413100          ORR      r1,r1,#0x20000
000204  6441              STR      r1,[r0,#0x44]
;;;396    SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
000206  6c41              LDR      r1,[r0,#0x44]
000208  f4214140          BIC      r1,r1,#0xc000
00020c  f4414100          ORR      r1,r1,#0x8000
000210  6441              STR      r1,[r0,#0x44]
;;;397    
;;;398    SET_REG(LPC_ADC->ADCR,0,24,3);
000212  488f              LDR      r0,|L1.1104|
000214  6801              LDR      r1,[r0,#0]
000216  f02161e0          BIC      r1,r1,#0x7000000
00021a  6001              STR      r1,[r0,#0]
;;;399    
;;;400    SET_REG(LPC_ADC->ADCR,1,21,1);
00021c  6801              LDR      r1,[r0,#0]
00021e  f4411100          ORR      r1,r1,#0x200000
000222  6001              STR      r1,[r0,#0]
;;;401    SET_REG(LPC_ADC->ADCR,0,16,1);
000224  6801              LDR      r1,[r0,#0]
000226  f4213180          BIC      r1,r1,#0x10000
00022a  6001              STR      r1,[r0,#0]
;;;402    SET_REG(LPC_ADC->ADCR,1,8,8);
00022c  6801              LDR      r1,[r0,#0]
00022e  f421417f          BIC      r1,r1,#0xff00
000232  f4417180          ORR      r1,r1,#0x100
000236  6001              STR      r1,[r0,#0]
;;;403    
;;;404    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;405    //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;406    	
;;;407    	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;408         /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;409         else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;410    
;;;411    LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
000238  1581              ASRS     r1,r0,#22
00023a  60c1              STR      r1,[r0,#0xc]
00023c  4885              LDR      r0,|L1.1108|
00023e  0389              LSLS     r1,r1,#14
000240  6001              STR      r1,[r0,#0]
;;;412    
;;;413    NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;414    
;;;415    
;;;416    }
000242  4770              BX       lr
;;;417    
                          ENDP

                  net_in_drv PROC
;;;418    //-----------------------------------------------
;;;419    void net_in_drv(void)
000244  b5f0              PUSH     {r4-r7,lr}
;;;420    {
;;;421    if(adc_buff_[10]<3500)
000246  4d72              LDR      r5,|L1.1040|
;;;422    	{
;;;423    	if(net_in_drv_cnt_B	< 20)
000248  486e              LDR      r0,|L1.1028|
;;;424    		{
;;;425    		net_in_drv_cnt_B++;
;;;426    		}
;;;427    	else if(net_in_drv_cnt_B>20)net_in_drv_cnt_B=0; 
;;;428    	}
;;;429    else
;;;430    	{
;;;431    	if(net_in_drv_cnt_B)
;;;432    		{
;;;433    		net_in_drv_cnt_B--;
;;;434    		}
;;;435    	}			 
;;;436    if(net_in_drv_cnt_B>=19) 
;;;437    	{
;;;438    	net_in_drv_stat_B=1;
;;;439    	gp_av_stat&=~0x00000001;
00024a  4983              LDR      r1,|L1.1112|
00024c  f9b57014          LDRSH    r7,[r5,#0x14]         ;421  ; adc_buff_
000250  f64056ac          MOV      r6,#0xdac             ;421
000254  f990200f          LDRSB    r2,[r0,#0xf]          ;423
000258  2300              MOVS     r3,#0                 ;427
00025a  680c              LDR      r4,[r1,#0]            ;421
00025c  f04f0c01          MOV      r12,#1                ;438
000260  42b7              CMP      r7,r6                 ;421
000262  da07              BGE      |L1.628|
000264  2a14              CMP      r2,#0x14              ;423
000266  da02              BGE      |L1.622|
000268  f1020201          ADD      r2,r2,#1              ;425
00026c  e004              B        |L1.632|
                  |L1.622|
00026e  dd04              BLE      |L1.634|
000270  73c3              STRB     r3,[r0,#0xf]          ;427
000272  e00d              B        |L1.656|
                  |L1.628|
000274  b162              CBZ      r2,|L1.656|
000276  1e52              SUBS     r2,r2,#1              ;433
                  |L1.632|
000278  73c2              STRB     r2,[r0,#0xf]          ;433
                  |L1.634|
00027a  f990200f          LDRSB    r2,[r0,#0xf]          ;436  ; net_in_drv_cnt_B
00027e  2a13              CMP      r2,#0x13              ;436
000280  db04              BLT      |L1.652|
000282  f880c011          STRB     r12,[r0,#0x11]        ;438
000286  f0240201          BIC      r2,r4,#1
00028a  e004              B        |L1.662|
                  |L1.652|
;;;440    	}
;;;441    else if(net_in_drv_cnt_B<=2) 
00028c  2a02              CMP      r2,#2
00028e  dc03              BGT      |L1.664|
                  |L1.656|
;;;442    	{
;;;443    	net_in_drv_stat_B=0;
000290  7443              STRB     r3,[r0,#0x11]
;;;444    	gp_av_stat|=0x00000001;
000292  f0440201          ORR      r2,r4,#1
                  |L1.662|
000296  600a              STR      r2,[r1,#0]  ; gp_av_stat
                  |L1.664|
000298  4a5a              LDR      r2,|L1.1028|
;;;445    		
;;;446    	}
;;;447    
;;;448    if(adc_buff_[5]<3500)
00029a  f9b5400a          LDRSH    r4,[r5,#0xa]  ; adc_buff_
;;;449    	{
;;;450    	if(net_in_drv_cnt_C	< 20)
00029e  f9922010          LDRSB    r2,[r2,#0x10]
0002a2  42b4              CMP      r4,r6                 ;448
0002a4  da07              BGE      |L1.694|
0002a6  2a14              CMP      r2,#0x14
0002a8  da02              BGE      |L1.688|
;;;451    		{
;;;452    		net_in_drv_cnt_C++;
0002aa  f1020201          ADD      r2,r2,#1
0002ae  e004              B        |L1.698|
                  |L1.688|
;;;453    		}
;;;454    	else if(net_in_drv_cnt_C>20)net_in_drv_cnt_C=0; 
0002b0  dd04              BLE      |L1.700|
0002b2  7403              STRB     r3,[r0,#0x10]
0002b4  e00e              B        |L1.724|
                  |L1.694|
;;;455    	}
;;;456    else
;;;457    	{
;;;458    	if(net_in_drv_cnt_C)
0002b6  b16a              CBZ      r2,|L1.724|
;;;459    		{
;;;460    		net_in_drv_cnt_C--;
0002b8  1e52              SUBS     r2,r2,#1
                  |L1.698|
0002ba  7402              STRB     r2,[r0,#0x10]
                  |L1.700|
;;;461    		}
;;;462    	}			 
;;;463    if(net_in_drv_cnt_C>=19) 
0002bc  f9902010          LDRSB    r2,[r0,#0x10]  ; net_in_drv_cnt_C
0002c0  2a13              CMP      r2,#0x13
0002c2  db05              BLT      |L1.720|
;;;464    	{
;;;465    	net_in_drv_stat_C=1;
0002c4  f880c012          STRB     r12,[r0,#0x12]
;;;466    	gp_av_stat&=~0x00000002;
0002c8  6808              LDR      r0,[r1,#0]  ; gp_av_stat
0002ca  f0200002          BIC      r0,r0,#2
0002ce  e005              B        |L1.732|
                  |L1.720|
;;;467    	}
;;;468    else if(net_in_drv_cnt_C<=2) 
0002d0  2a02              CMP      r2,#2
0002d2  dc04              BGT      |L1.734|
                  |L1.724|
;;;469    	{
;;;470    	net_in_drv_stat_C=0;
0002d4  7483              STRB     r3,[r0,#0x12]
;;;471    	gp_av_stat|=0x00000002;
0002d6  6808              LDR      r0,[r1,#0]  ; gp_av_stat
0002d8  f0400002          ORR      r0,r0,#2
                  |L1.732|
0002dc  6008              STR      r0,[r1,#0]            ;466  ; gp_av_stat
                  |L1.734|
;;;472    	}
;;;473    }	   
0002de  bdf0              POP      {r4-r7,pc}
;;;474    
                          ENDP

                  adc_drv7 PROC
;;;475    //-----------------------------------------------
;;;476    void adc_drv7(void) //(Uсети - постоянка)
0002e0  e92d41f0          PUSH     {r4-r8,lr}
;;;477    {
;;;478    //int temp_S;
;;;479    //char i;
;;;480    //signed short temp_SS;
;;;481    
;;;482    adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0002e4  4c47              LDR      r4,|L1.1028|
0002e6  3436              ADDS     r4,r4,#0x36
0002e8  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0002ea  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0002ec  1a40              SUBS     r0,r0,r1
0002ee  b200              SXTH     r0,r0
0002f0  f7fffffe          BL       abs_pal
0002f4  1da5              ADDS     r5,r4,#6
0002f6  8028              STRH     r0,[r5,#0]
;;;483    adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0002f8  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0002fa  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
0002fc  1a40              SUBS     r0,r0,r1
0002fe  b200              SXTH     r0,r0
000300  f7fffffe          BL       abs_pal
000304  8068              STRH     r0,[r5,#2]
;;;484    adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
000306  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000308  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00030a  1a40              SUBS     r0,r0,r1
00030c  b200              SXTH     r0,r0
00030e  f7fffffe          BL       abs_pal
;;;485    
;;;486    //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;487    //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;488    //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;489    
;;;490    
;;;491    if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
000312  f44f7296          MOV      r2,#0x12c
;;;492    	{
;;;493    	adc_result=adc_self_ch_buff[2];
000316  493b              LDR      r1,|L1.1028|
000318  80a8              STRH     r0,[r5,#4]            ;484
00031a  4290              CMP      r0,r2                 ;491
00031c  da01              BGE      |L1.802|
00031e  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000320  e00a              B        |L1.824|
                  |L1.802|
;;;494    	} 
;;;495    else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
000322  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
000326  4290              CMP      r0,r2
000328  da01              BGE      |L1.814|
;;;496    	{
;;;497    	adc_result=adc_self_ch_buff[1];
00032a  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00032c  e004              B        |L1.824|
                  |L1.814|
;;;498    	}
;;;499    else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
00032e  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
000332  4290              CMP      r0,r2
000334  da01              BGE      |L1.826|
;;;500    	{
;;;501    	adc_result=adc_self_ch_buff[0];
000336  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L1.824|
000338  8348              STRH     r0,[r1,#0x1a]
                  |L1.826|
;;;502    	}
;;;503        //adc_result=92;
;;;504    
;;;505    if(adc_ch_net)
00033a  784c              LDRB     r4,[r1,#1]  ; adc_ch_net
00033c  2300              MOVS     r3,#0
00033e  b31c              CBZ      r4,|L1.904|
;;;506    	{
;;;507    
;;;508    	main_power_buffer[0]+=(long)(adc_result);
000340  4833              LDR      r0,|L1.1040|
000342  f9b1201a          LDRSH    r2,[r1,#0x1a]  ; adc_result
000346  3040              ADDS     r0,r0,#0x40
000348  6805              LDR      r5,[r0,#0]  ; main_power_buffer
00034a  4415              ADD      r5,r5,r2
;;;509    	main_power_buffer[1]+=(long)(adc_result);
00034c  6005              STR      r5,[r0,#0]  ; main_power_buffer
00034e  6845              LDR      r5,[r0,#4]  ; main_power_buffer
000350  4415              ADD      r5,r5,r2
;;;510    	main_power_buffer[2]+=(long)(adc_result);
000352  6045              STR      r5,[r0,#4]  ; main_power_buffer
000354  6885              LDR      r5,[r0,#8]  ; main_power_buffer
000356  4415              ADD      r5,r5,r2
;;;511    	main_power_buffer[3]+=(long)(adc_result);
000358  6085              STR      r5,[r0,#8]  ; main_power_buffer
00035a  68c5              LDR      r5,[r0,#0xc]  ; main_power_buffer
00035c  442a              ADD      r2,r2,r5
;;;512    
;;;513    	adc_net_buff_cnt++;
00035e  60c2              STR      r2,[r0,#0xc]  ; main_power_buffer
000360  8c4a              LDRH     r2,[r1,#0x22]  ; adc_net_buff_cnt
000362  1c52              ADDS     r2,r2,#1
000364  b212              SXTH     r2,r2
000366  844a              STRH     r2,[r1,#0x22]
;;;514    	if(adc_net_buff_cnt>=0x1000)
000368  f5b25f80          CMP      r2,#0x1000
00036c  db00              BLT      |L1.880|
;;;515    		{
;;;516    		adc_net_buff_cnt=0;
00036e  844b              STRH     r3,[r1,#0x22]
                  |L1.880|
;;;517    		}
;;;518    	if((adc_net_buff_cnt&0x03ff)==0)
000370  f9b12022          LDRSH    r2,[r1,#0x22]  ; adc_net_buff_cnt
000374  0595              LSLS     r5,r2,#22
000376  d136              BNE      |L1.998|
;;;519    		{
;;;520    		#ifdef UKU_220
;;;521    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;522    		#else
;;;523    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
000378  1292              ASRS     r2,r2,#10
00037a  f8505022          LDR      r5,[r0,r2,LSL #2]
00037e  122d              ASRS     r5,r5,#8
000380  830d              STRH     r5,[r1,#0x18]
;;;524    		#endif
;;;525    		main_power_buffer[adc_net_buff_cnt>>10]=0;
000382  f8403022          STR      r3,[r0,r2,LSL #2]
000386  e02e              B        |L1.998|
                  |L1.904|
;;;526    		}
;;;527    
;;;528    
;;;529    	} 
;;;530    else if(!adc_ch_net)
;;;531    	{
;;;532    	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
000388  4f34              LDR      r7,|L1.1116|
00038a  7888              LDRB     r0,[r1,#2]  ; adc_ch
00038c  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
000390  eb0712c0          ADD      r2,r7,r0,LSL #7
000394  f9b1e01a          LDRSH    lr,[r1,#0x1a]  ; adc_result
000398  f842e02c          STR      lr,[r2,r12,LSL #2]
;;;533    	
;;;534    	if((adc_ch_cnt&0x03)==0)
00039c  ea5f728c          LSLS     r2,r12,#30
0003a0  d113              BNE      |L1.970|
;;;535    		{
;;;536    		long temp_L;
;;;537    		char i;
;;;538    		temp_L=0;
0003a2  2500              MOVS     r5,#0
;;;539    		for(i=0;i<32;i++)
0003a4  462a              MOV      r2,r5
;;;540    			{
;;;541    			temp_L+=adc_buff[adc_ch][i];
0003a6  eb0716c0          ADD      r6,r7,r0,LSL #7
0003aa  bf00              NOP      
                  |L1.940|
0003ac  f8567022          LDR      r7,[r6,r2,LSL #2]
0003b0  1c52              ADDS     r2,r2,#1              ;539
0003b2  b2d2              UXTB     r2,r2                 ;539
0003b4  443d              ADD      r5,r5,r7
0003b6  2a20              CMP      r2,#0x20              ;539
0003b8  d3f8              BCC      |L1.940|
;;;542    			}
;;;543    		adc_buff_[adc_ch]= (short)(temp_L>>5);
0003ba  116a              ASRS     r2,r5,#5
0003bc  4d14              LDR      r5,|L1.1040|
0003be  f8252010          STRH     r2,[r5,r0,LSL #1]
;;;544    		adc_buff__[adc_ch]= adc_buff[adc_ch][adc_ch_cnt];
0003c2  f1050220          ADD      r2,r5,#0x20
0003c6  f822e010          STRH     lr,[r2,r0,LSL #1]
                  |L1.970|
;;;545    		//adc_buff_[3]=346;
;;;546    		}
;;;547    	if(++adc_ch>=16) 
0003ca  1c40              ADDS     r0,r0,#1
0003cc  b2c0              UXTB     r0,r0
0003ce  7088              STRB     r0,[r1,#2]
0003d0  2810              CMP      r0,#0x10
0003d2  d308              BCC      |L1.998|
;;;548    		{
;;;549    		adc_ch=0;
;;;550    		adc_ch_cnt++;
0003d4  f10c0c01          ADD      r12,r12,#1
0003d8  f00c00ff          AND      r0,r12,#0xff
0003dc  708b              STRB     r3,[r1,#2]            ;549
0003de  70c8              STRB     r0,[r1,#3]
;;;551    		if(adc_ch_cnt>=32)adc_ch_cnt=0;
0003e0  2820              CMP      r0,#0x20
0003e2  d300              BCC      |L1.998|
0003e4  70cb              STRB     r3,[r1,#3]
                  |L1.998|
;;;552    		}
;;;553    	}
;;;554    
;;;555      
;;;556    
;;;557    adc_self_ch_cnt=0;
;;;558    
;;;559    adc_ch_net++;
0003e6  1c64              ADDS     r4,r4,#1
0003e8  700b              STRB     r3,[r1,#0]            ;557
;;;560    adc_ch_net&=1;
0003ea  f0140001          ANDS     r0,r4,#1
;;;561    
;;;562    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;563    //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;564    
;;;565    if(adc_ch_net)
;;;566    	{
;;;567    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;568    	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;569    	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0003ee  4a18              LDR      r2,|L1.1104|
0003f0  7048              STRB     r0,[r1,#1]            ;560
0003f2  d035              BEQ      |L1.1120|
0003f4  6810              LDR      r0,[r2,#0]
0003f6  f02000ff          BIC      r0,r0,#0xff
0003fa  1d00              ADDS     r0,r0,#4
0003fc  6010              STR      r0,[r2,#0]
0003fe  e064              B        |L1.1226|
                  |L1.1024|
                          DCD      TBAT
                  |L1.1028|
                          DCD      ||area_number.18||
                  |L1.1032|
                          DCD      ad7705_buff_
                  |L1.1036|
                          DCD      Kiload0
                  |L1.1040|
                          DCD      ||.bss||+0x800
                  |L1.1044|
                          DCD      unet_drv_cnt
                  |L1.1048|
                          DCD      Kuload
                  |L1.1052|
                          DCD      load_U
                  |L1.1056|
                          DCD      load_U_
                  |L1.1060|
                          DCD      Kiload1
                  |L1.1064|
                          DCD      load_I
                  |L1.1068|
                          DCD      load_I_
                  |L1.1072|
                          DCD      I_LOAD_MODE
                  |L1.1076|
                          DCD      NUMIST
                  |L1.1080|
                          DCD      bps
                  |L1.1084|
                          DCD      I_MAX
                  |L1.1088|
                          DCD      I_MAX_IPS
                  |L1.1092|
                          DCD      I_MIN
                  |L1.1096|
                          DCD      I_MIN_IPS
                  |L1.1100|
                          DCD      0x4002c000
                  |L1.1104|
                          DCD      0x40034000
                  |L1.1108|
                          DCD      0xe000e100
                  |L1.1112|
                          DCD      gp_av_stat
                  |L1.1116|
                          DCD      ||.bss||
                  |L1.1120|
;;;570    	}
;;;571    else
;;;572    	{
;;;573    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;574    	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;575    	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
000460  7889              LDRB     r1,[r1,#2]  ; adc_ch
000462  0708              LSLS     r0,r1,#28
000464  2800              CMP      r0,#0
;;;576    	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
000466  6810              LDR      r0,[r2,#0]
000468  f02000ff          BIC      r0,r0,#0xff
00046c  db02              BLT      |L1.1140|
00046e  f1000001          ADD      r0,r0,#1              ;575
000472  e001              B        |L1.1144|
                  |L1.1140|
000474  f1000002          ADD      r0,r0,#2
                  |L1.1144|
000478  6010              STR      r0,[r2,#0]
;;;577    
;;;578    
;;;579    	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
00047a  48ff              LDR      r0,|L1.2168|
00047c  6803              LDR      r3,[r0,#0]
00047e  f0435380          ORR      r3,r3,#0x10000000
000482  6003              STR      r3,[r0,#0]
;;;580    	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
000484  6a03              LDR      r3,[r0,#0x20]
000486  f0434380          ORR      r3,r3,#0x40000000
00048a  6203              STR      r3,[r0,#0x20]
;;;581    	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
00048c  6e03              LDR      r3,[r0,#0x60]
00048e  f0436380          ORR      r3,r3,#0x4000000
000492  6603              STR      r3,[r0,#0x60]
;;;582    
;;;583    	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
000494  07cb              LSLS     r3,r1,#31
;;;584    	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
000496  6943              LDR      r3,[r0,#0x14]
000498  d008              BEQ      |L1.1196|
00049a  f0435380          ORR      r3,r3,#0x10000000
                  |L1.1182|
00049e  6143              STR      r3,[r0,#0x14]
;;;585    
;;;586    	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0004a0  078b              LSLS     r3,r1,#30
;;;587    	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0004a2  6b43              LDR      r3,[r0,#0x34]
0004a4  d405              BMI      |L1.1202|
0004a6  f0234380          BIC      r3,r3,#0x40000000     ;586
0004aa  e004              B        |L1.1206|
                  |L1.1196|
0004ac  f0235380          BIC      r3,r3,#0x10000000     ;583
0004b0  e7f5              B        |L1.1182|
                  |L1.1202|
0004b2  f0434380          ORR      r3,r3,#0x40000000
                  |L1.1206|
0004b6  6343              STR      r3,[r0,#0x34]
;;;588    
;;;589    	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0004b8  0749              LSLS     r1,r1,#29
;;;590    	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
0004ba  6f41              LDR      r1,[r0,#0x74]
0004bc  d402              BMI      |L1.1220|
0004be  f0216180          BIC      r1,r1,#0x4000000      ;589
0004c2  e001              B        |L1.1224|
                  |L1.1220|
0004c4  f0416180          ORR      r1,r1,#0x4000000
                  |L1.1224|
0004c8  6741              STR      r1,[r0,#0x74]         ;589
                  |L1.1226|
;;;591    	}
;;;592    	
;;;593    
;;;594    
;;;595    
;;;596    LPC_ADC->ADCR |=  (1<<24);
0004ca  6810              LDR      r0,[r2,#0]
0004cc  f0407080          ORR      r0,r0,#0x1000000
0004d0  6010              STR      r0,[r2,#0]
                  |L1.1234|
;;;597    
;;;598    }
0004d2  e8bd81f0          POP      {r4-r8,pc}
;;;599    
                          ENDP

                  avg_hndl PROC
;;;600    //-----------------------------------------------
;;;601    void avg_hndl(void)
0004d6  e92d4ff0          PUSH     {r4-r11,lr}
;;;602    { 
;;;603    char i;
;;;604    
;;;605    
;;;606    
;;;607    #define AVGCNTMAX	5
;;;608    if(avg_main_cnt)
0004da  48e8              LDR      r0,|L1.2172|
0004dc  f9b01000          LDRSH    r1,[r0,#0]  ; avg_main_cnt
0004e0  b119              CBZ      r1,|L1.1258|
;;;609    	{
;;;610    	avg_main_cnt--;
0004e2  f1a10101          SUB      r1,r1,#1
0004e6  8001              STRH     r1,[r0,#0]
;;;611    	goto avg_hndl_end;
0004e8  e0a5              B        |L1.1590|
                  |L1.1258|
;;;612    	}                 
;;;613    
;;;614    avg_main_cnt=10;
0004ea  210a              MOVS     r1,#0xa
0004ec  8001              STRH     r1,[r0,#0]
;;;615    
;;;616    avg_num=0;
0004ee  49e4              LDR      r1,|L1.2176|
0004f0  2300              MOVS     r3,#0
;;;617    num_of_dumm_src=100;
0004f2  f8dfb390          LDR      r11,|L1.2180|
;;;618    num_of_max_src=100;
0004f6  f8df8390          LDR      r8,|L1.2184|
0004fa  700b              STRB     r3,[r1,#0]            ;616
0004fc  2064              MOVS     r0,#0x64              ;617
0004fe  f88b0000          STRB     r0,[r11,#0]           ;617
000502  f8880000          STRB     r0,[r8,#0]
;;;619    
;;;620    for(i=0;i<NUMIST;i++)
000506  48e1              LDR      r0,|L1.2188|
000508  461a              MOV      r2,r3
00050a  f9b04000          LDRSH    r4,[r0,#0]
;;;621    	{
;;;622    	if(/*(bps[i]._state==bsWRK)&&*/(bps[i]._cnt<20))avg_num++;
00050e  48e0              LDR      r0,|L1.2192|
000510  e00c              B        |L1.1324|
000512  bf00              NOP      
                  |L1.1300|
000514  eb020542          ADD      r5,r2,r2,LSL #1
000518  eb001545          ADD      r5,r0,r5,LSL #5
00051c  78ed              LDRB     r5,[r5,#3]
00051e  2d14              CMP      r5,#0x14
000520  d202              BCS      |L1.1320|
000522  780d              LDRB     r5,[r1,#0]  ; avg_num
000524  1c6d              ADDS     r5,r5,#1
000526  700d              STRB     r5,[r1,#0]
                  |L1.1320|
000528  1c52              ADDS     r2,r2,#1              ;620
00052a  b2d2              UXTB     r2,r2                 ;620
                  |L1.1324|
00052c  42a2              CMP      r2,r4                 ;620
00052e  dbf1              BLT      |L1.1300|
;;;623    	}
;;;624    
;;;625    /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;626    if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;627    if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;628    
;;;629    	
;;;630    if(avg_num<2)
000530  7809              LDRB     r1,[r1,#0]  ; avg_num
000532  468a              MOV      r10,r1
000534  2902              CMP      r1,#2
000536  d37e              BCC      |L1.1590|
;;;631    	{
;;;632    	goto avg_hndl_end;
;;;633    	
;;;634    	}
;;;635    	
;;;636    else if(bU_VALID_VALID)
000538  49d6              LDR      r1,|L1.2196|
00053a  7a89              LDRB     r1,[r1,#0xa]  ; bU_VALID_VALID
00053c  2900              CMP      r1,#0
00053e  d07a              BEQ      |L1.1590|
;;;637    	{
;;;638    	i_avg_min=5000;
000540  4ad5              LDR      r2,|L1.2200|
000542  f2413188          MOV      r1,#0x1388
;;;639    	i_avg_max=0;
000546  f8dfc354          LDR      r12,|L1.2204|
00054a  6011              STR      r1,[r2,#0]  ; i_avg_min
;;;640    	i_avg_summ=0;
00054c  4dd4              LDR      r5,|L1.2208|
00054e  f8cc3000          STR      r3,[r12,#0]  ; i_avg_max
;;;641    	for(i=0;i<NUMIST;i++)
000552  2100              MOVS     r1,#0
000554  602b              STR      r3,[r5,#0]  ; i_avg_summ
000556  e01d              B        |L1.1428|
                  |L1.1368|
;;;642    		{
;;;643    		if(bps[i]._state==bsWRK)
000558  eb010641          ADD      r6,r1,r1,LSL #1
00055c  eb001646          ADD      r6,r0,r6,LSL #5
000560  78b7              LDRB     r7,[r6,#2]
000562  2f01              CMP      r7,#1
000564  d114              BNE      |L1.1424|
;;;644    			{
;;;645    			if(bps[i]._Ii>i_avg_max)
000566  6a36              LDR      r6,[r6,#0x20]
000568  f8dc7000          LDR      r7,[r12,#0]  ; i_avg_max
00056c  46b1              MOV      r9,r6
00056e  42be              CMP      r6,r7
000570  dd03              BLE      |L1.1402|
;;;646    				{
;;;647    				i_avg_max=bps[i]._Ii;
;;;648    				num_of_max_src=i;
000572  f8cc9000          STR      r9,[r12,#0]  ; i_avg_max
000576  f8881000          STRB     r1,[r8,#0]
                  |L1.1402|
;;;649    				}
;;;650    			if(bps[i]._Ii<i_avg_min)
00057a  6817              LDR      r7,[r2,#0]  ; i_avg_min
00057c  45b9              CMP      r9,r7
00057e  da03              BGE      |L1.1416|
;;;651    				{
;;;652    				i_avg_min=bps[i]._Ii;
;;;653    				num_of_dumm_src=i;
000580  f8c29000          STR      r9,[r2,#0]  ; i_avg_min
000584  f88b1000          STRB     r1,[r11,#0]
                  |L1.1416|
;;;654    				}
;;;655    			
;;;656    			i_avg_summ+=bps[i]._Ii;
000588  682f              LDR      r7,[r5,#0]  ; i_avg_summ
00058a  eb090607          ADD      r6,r9,r7
00058e  602e              STR      r6,[r5,#0]  ; i_avg_summ
                  |L1.1424|
000590  1c49              ADDS     r1,r1,#1              ;641
000592  b2c9              UXTB     r1,r1                 ;641
                  |L1.1428|
000594  42a1              CMP      r1,r4                 ;641
000596  dbdf              BLT      |L1.1368|
;;;657    			}
;;;658    		}
;;;659    	i_avg=i_avg_summ/avg_num;	
000598  682e              LDR      r6,[r5,#0]  ; i_avg_summ
00059a  fb96f5fa          SDIV     r5,r6,r10
00059e  4ec1              LDR      r6,|L1.2212|
;;;660    	
;;;661    	if(i_avg_min==0)i_avg_min=1;
0005a0  6035              STR      r5,[r6,#0]  ; i_avg
0005a2  6816              LDR      r6,[r2,#0]  ; i_avg_min
0005a4  2501              MOVS     r5,#1                 ;643
0005a6  b906              CBNZ     r6,|L1.1450|
0005a8  6015              STR      r5,[r2,#0]  ; i_avg_min
                  |L1.1450|
;;;662    
;;;663    	
;;;664    
;;;665    	avg=i_avg_max;
0005aa  f8dc6000          LDR      r6,[r12,#0]  ; i_avg_max
;;;666    	avg*=100;
0005ae  2764              MOVS     r7,#0x64
;;;667    	avg/=i_avg_min;
0005b0  6812              LDR      r2,[r2,#0]  ; i_avg_min
0005b2  437e              MULS     r6,r7,r6              ;666
0005b4  fb96f2f2          SDIV     r2,r6,r2
0005b8  f8dfc2ec          LDR      r12,|L1.2216|
;;;668    	
;;;669    	if(avg>160) bAVG=1;
0005bc  4ebb              LDR      r6,|L1.2220|
0005be  2aa0              CMP      r2,#0xa0
0005c0  f8cc2000          STR      r2,[r12,#0]  ; avg
0005c4  dd00              BLE      |L1.1480|
0005c6  7035              STRB     r5,[r6,#0]
                  |L1.1480|
;;;670    	if(avg<120) bAVG=0;
0005c8  2a78              CMP      r2,#0x78
0005ca  da01              BGE      |L1.1488|
0005cc  7033              STRB     r3,[r6,#0]
0005ce  e032              B        |L1.1590|
                  |L1.1488|
;;;671    
;;;672    	if(bAVG==1)
0005d0  7832              LDRB     r2,[r6,#0]  ; bAVG
0005d2  2a01              CMP      r2,#1
0005d4  d12f              BNE      |L1.1590|
;;;673    		{
;;;674    		//for(i=0;i<NUMIST;i++)
;;;675    			//{
;;;676    		//	if(bps[i]._state==bsWRK)
;;;677    				//{
;;;678    				//if(bps[i]._Ii>i_avg)bps[i]._xu_--;
;;;679    				/*if(bps[i]._Ii<i_avg)*/
;;;680    				if(bAVG_CNT==0)
0005d6  4ab6              LDR      r2,|L1.2224|
0005d8  7816              LDRB     r6,[r2,#0]  ; bAVG_CNT
0005da  b1ce              CBZ      r6,|L1.1552|
;;;681    					{
;;;682    					bAVG_CNT=1;
;;;683    					if(num_of_dumm_src<NUMIST) bps[num_of_dumm_src]._xu_++;
;;;684    					}
;;;685    				else
;;;686    					{
;;;687    					bAVG_CNT=0;
0005dc  7013              STRB     r3,[r2,#0]
;;;688    					if(num_of_max_src<NUMIST) bps[num_of_max_src]._xu_--;
0005de  f8982000          LDRB     r2,[r8,#0]  ; num_of_max_src
0005e2  42a2              CMP      r2,r4
0005e4  da07              BGE      |L1.1526|
0005e6  eb020242          ADD      r2,r2,r2,LSL #1
0005ea  eb001242          ADD      r2,r0,r2,LSL #5
0005ee  f8323f50          LDRH     r3,[r2,#0x50]!
0005f2  1e5b              SUBS     r3,r3,#1
                  |L1.1524|
0005f4  8013              STRH     r3,[r2,#0]
                  |L1.1526|
;;;689    					}
;;;690    			
;;;691    				if(bps[i]._xu_<-50)bps[i]._xu_=-50;
0005f6  eb010141          ADD      r1,r1,r1,LSL #1
0005fa  eb001041          ADD      r0,r0,r1,LSL #5
0005fe  f06f0231          MVN      r2,#0x31
000602  f9b01050          LDRSH    r1,[r0,#0x50]
000606  4291              CMP      r1,r2
000608  da0f              BGE      |L1.1578|
00060a  f8a02050          STRH     r2,[r0,#0x50]
00060e  e012              B        |L1.1590|
                  |L1.1552|
000610  7015              STRB     r5,[r2,#0]            ;682
000612  f89b2000          LDRB     r2,[r11,#0]           ;683  ; num_of_dumm_src
000616  42a2              CMP      r2,r4                 ;683
000618  daed              BGE      |L1.1526|
00061a  eb020242          ADD      r2,r2,r2,LSL #1       ;683
00061e  eb001242          ADD      r2,r0,r2,LSL #5       ;683
000622  f8323f50          LDRH     r3,[r2,#0x50]!        ;683
000626  1c5b              ADDS     r3,r3,#1              ;683
000628  e7e4              B        |L1.1524|
                  |L1.1578|
;;;692    				if(bps[i]._xu_>50)bps[i]._xu_=50;	
00062a  2932              CMP      r1,#0x32
00062c  dd03              BLE      |L1.1590|
00062e  f04f0132          MOV      r1,#0x32
000632  f8a01050          STRH     r1,[r0,#0x50]
                  |L1.1590|
;;;693    			//	}
;;;694    			//}		
;;;695    		}			
;;;696    	}   	 
;;;697    
;;;698    
;;;699    avg_hndl_end:
;;;700    __nop();  
000636  bf00              NOP      
;;;701    }
000638  e8bd8ff0          POP      {r4-r11,pc}
;;;702    
                          ENDP

                  adc_drv6 PROC
;;;703    //-----------------------------------------------
;;;704    void adc_drv6(void) //(с попыткой измерять горбы)
00063c  e92d41f0          PUSH     {r4-r8,lr}
;;;705    {
;;;706    //int temp_S;
;;;707    //char i;
;;;708    //signed short temp_SS;
;;;709    
;;;710    adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
000640  4c94              LDR      r4,|L1.2196|
000642  3436              ADDS     r4,r4,#0x36
000644  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000646  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000648  1a40              SUBS     r0,r0,r1
00064a  b200              SXTH     r0,r0
00064c  f7fffffe          BL       abs_pal
000650  1da5              ADDS     r5,r4,#6
000652  8028              STRH     r0,[r5,#0]
;;;711    adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
000654  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000656  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
000658  1a40              SUBS     r0,r0,r1
00065a  b200              SXTH     r0,r0
00065c  f7fffffe          BL       abs_pal
000660  8068              STRH     r0,[r5,#2]
;;;712    adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
000662  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000664  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000666  1a40              SUBS     r0,r0,r1
000668  b200              SXTH     r0,r0
00066a  f7fffffe          BL       abs_pal
;;;713    
;;;714    //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;715    //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;716    //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;717    
;;;718    
;;;719    if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
00066e  f44f7296          MOV      r2,#0x12c
;;;720    	{
;;;721    	adc_result=adc_self_ch_buff[2];
000672  4988              LDR      r1,|L1.2196|
000674  80a8              STRH     r0,[r5,#4]            ;712
000676  4290              CMP      r0,r2                 ;719
000678  da01              BGE      |L1.1662|
00067a  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00067c  e00a              B        |L1.1684|
                  |L1.1662|
;;;722    	} 
;;;723    else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
00067e  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
000682  4290              CMP      r0,r2
000684  da01              BGE      |L1.1674|
;;;724    	{
;;;725    	adc_result=adc_self_ch_buff[1];
000686  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000688  e004              B        |L1.1684|
                  |L1.1674|
;;;726    	}
;;;727    else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
00068a  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
00068e  4290              CMP      r0,r2
000690  da01              BGE      |L1.1686|
;;;728    	{
;;;729    	adc_result=adc_self_ch_buff[0];
000692  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L1.1684|
000694  8348              STRH     r0,[r1,#0x1a]
                  |L1.1686|
;;;730    	}
;;;731        //adc_result=92;
;;;732    
;;;733    if(adc_ch_net)
000696  784e              LDRB     r6,[r1,#1]  ; adc_ch_net
000698  2000              MOVS     r0,#0
00069a  b3f6              CBZ      r6,|L1.1818|
;;;734    	{
;;;735    
;;;736    	if(adc_window_flag)
00069c  790c              LDRB     r4,[r1,#4]  ; adc_window_flag
;;;737    		{
;;;738    		main_power_buffer[0]+=(long)(adc_result>>2);
00069e  4a85              LDR      r2,|L1.2228|
0006a0  b18c              CBZ      r4,|L1.1734|
0006a2  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
0006a6  6815              LDR      r5,[r2,#0]  ; main_power_buffer
0006a8  eb0505a3          ADD      r5,r5,r3,ASR #2
;;;739    		main_power_buffer[1]+=(long)(adc_result>>2);
0006ac  6015              STR      r5,[r2,#0]  ; main_power_buffer
0006ae  6855              LDR      r5,[r2,#4]  ; main_power_buffer
0006b0  eb0505a3          ADD      r5,r5,r3,ASR #2
;;;740    		main_power_buffer[2]+=(long)(adc_result>>2);
0006b4  6055              STR      r5,[r2,#4]  ; main_power_buffer
0006b6  6895              LDR      r5,[r2,#8]  ; main_power_buffer
0006b8  eb0505a3          ADD      r5,r5,r3,ASR #2
;;;741    		main_power_buffer[3]+=(long)(adc_result>>2);
0006bc  6095              STR      r5,[r2,#8]  ; main_power_buffer
0006be  68d5              LDR      r5,[r2,#0xc]  ; main_power_buffer
0006c0  eb0503a3          ADD      r3,r5,r3,ASR #2
0006c4  60d3              STR      r3,[r2,#0xc]  ; main_power_buffer
                  |L1.1734|
;;;742    		}
;;;743    //	main_power_buffer[4]+=(long)(adc_result>>2);
;;;744    //	main_power_buffer[5]+=(long)(adc_result>>2);
;;;745    //	main_power_buffer[6]+=(long)(adc_result>>2);
;;;746    //	main_power_buffer[7]+=(long)(adc_result>>2);
;;;747    //	main_power_buffer_cnt++;
;;;748    
;;;749    
;;;750    	if(adc_result<100)
0006c6  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
0006ca  2b64              CMP      r3,#0x64
0006cc  da0e              BGE      |L1.1772|
;;;751    		{
;;;752    		adc_zero_cnt++;
0006ce  8bcb              LDRH     r3,[r1,#0x1e]  ; adc_zero_cnt
;;;753    		}
;;;754    	else adc_zero_cnt=0;
;;;755    
;;;756    	if(adc_zero_cnt>=2000)
0006d0  f44f65fa          MOV      r5,#0x7d0
0006d4  1c5b              ADDS     r3,r3,#1              ;752
0006d6  b21b              SXTH     r3,r3                 ;752
0006d8  83cb              STRH     r3,[r1,#0x1e]         ;752
0006da  42ab              CMP      r3,r5
0006dc  db08              BLT      |L1.1776|
;;;757    		{
;;;758    		adc_zero_cnt=2000;
0006de  83cd              STRH     r5,[r1,#0x1e]
;;;759    		main_power_buffer[0]=0;
;;;760    		main_power_buffer[1]=0;
0006e0  6010              STR      r0,[r2,#0]  ; main_power_buffer
;;;761    		main_power_buffer[2]=0;
0006e2  6050              STR      r0,[r2,#4]  ; main_power_buffer
;;;762    		main_power_buffer[3]=0;
0006e4  6090              STR      r0,[r2,#8]  ; main_power_buffer
;;;763    		net_buff_=0;
0006e6  60d0              STR      r0,[r2,#0xc]  ; main_power_buffer
0006e8  8308              STRH     r0,[r1,#0x18]
0006ea  e053              B        |L1.1940|
                  |L1.1772|
0006ec  83c8              STRH     r0,[r1,#0x1e]         ;754
0006ee  e051              B        |L1.1940|
                  |L1.1776|
;;;764    		}
;;;765    
;;;766    	if(adc_zero_cnt==5)
0006f0  2b05              CMP      r3,#5
0006f2  d14f              BNE      |L1.1940|
;;;767    		{
;;;768    		
;;;769    		if(adc_window_flag)
0006f4  b1a4              CBZ      r4,|L1.1824|
;;;770    			{
;;;771    			adc_gorb_cnt++;
0006f6  8b8b              LDRH     r3,[r1,#0x1c]  ; adc_gorb_cnt
0006f8  1c5b              ADDS     r3,r3,#1
0006fa  b21b              SXTH     r3,r3
0006fc  838b              STRH     r3,[r1,#0x1c]
;;;772    			if(adc_gorb_cnt>=512)
0006fe  f5b37f00          CMP      r3,#0x200
000702  db00              BLT      |L1.1798|
;;;773    				{
;;;774    				adc_gorb_cnt=0;
000704  8388              STRH     r0,[r1,#0x1c]
                  |L1.1798|
;;;775    				//net_buff_=main_power_buffer[0]>>8;
;;;776    				//main_power_buffer[0]=0;
;;;777    			   	}
;;;778    
;;;779    			if((adc_gorb_cnt&0x007f)==0)
000706  f9b1301c          LDRSH    r3,[r1,#0x1c]  ; adc_gorb_cnt
00070a  065d              LSLS     r5,r3,#25
00070c  d108              BNE      |L1.1824|
;;;780    				{
;;;781    				net_buff_=main_power_buffer[adc_gorb_cnt>>7]>>8;
00070e  11db              ASRS     r3,r3,#7
000710  f8525023          LDR      r5,[r2,r3,LSL #2]
000714  122d              ASRS     r5,r5,#8
000716  830d              STRH     r5,[r1,#0x18]
;;;782    				main_power_buffer[adc_gorb_cnt>>7]=0;
000718  e000              B        |L1.1820|
                  |L1.1818|
00071a  e00f              B        |L1.1852|
                  |L1.1820|
00071c  f8420023          STR      r0,[r2,r3,LSL #2]
                  |L1.1824|
;;;783    				}
;;;784    			}
;;;785    
;;;786    		//LPC_GPIO2->FIODIR|=(1<<8);
;;;787    		//LPC_GPIO2->FIOPIN^=(1<<8);
;;;788    
;;;789    		if((adc_window_cnt>150)&&(adc_window_flag))
000720  f9b12020          LDRSH    r2,[r1,#0x20]  ; adc_window_cnt
000724  2a96              CMP      r2,#0x96
000726  dd01              BLE      |L1.1836|
000728  b104              CBZ      r4,|L1.1836|
;;;790    			{
;;;791    			adc_window_flag=0;
00072a  7108              STRB     r0,[r1,#4]
                  |L1.1836|
;;;792    
;;;793    			
;;;794    			}
;;;795    		if((adc_window_cnt>30)&&(adc_window_cnt<70)&&(!adc_window_flag))
00072c  3a1f              SUBS     r2,r2,#0x1f
00072e  2a27              CMP      r2,#0x27
000730  d230              BCS      |L1.1940|
000732  790a              LDRB     r2,[r1,#4]  ; adc_window_flag
000734  bb72              CBNZ     r2,|L1.1940|
;;;796    			{
;;;797    			adc_window_flag=1;
000736  2201              MOVS     r2,#1
000738  710a              STRB     r2,[r1,#4]
00073a  e02b              B        |L1.1940|
                  |L1.1852|
;;;798    
;;;799    			//LPC_GPIO2->FIODIR|=(1<<8);
;;;800    			//LPC_GPIO2->FIOPIN|=(1<<8);
;;;801    			}
;;;802    		}
;;;803    	} 
;;;804    else if(!adc_ch_net)
;;;805    	{
;;;806    	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
00073c  4f5e              LDR      r7,|L1.2232|
00073e  788a              LDRB     r2,[r1,#2]  ; adc_ch
000740  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
000744  eb0714c2          ADD      r4,r7,r2,LSL #7
000748  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
00074c  f844302c          STR      r3,[r4,r12,LSL #2]
;;;807    	
;;;808    	if((adc_ch_cnt&0x03)==0)
000750  ea5f738c          LSLS     r3,r12,#30
000754  d110              BNE      |L1.1912|
;;;809    		{
;;;810    		long temp_L;
;;;811    		char i;
;;;812    		temp_L=0;
000756  2400              MOVS     r4,#0
;;;813    		for(i=0;i<16;i++)
000758  4623              MOV      r3,r4
;;;814    			{
;;;815    			temp_L+=adc_buff[adc_ch][i];
00075a  eb0715c2          ADD      r5,r7,r2,LSL #7
00075e  bf00              NOP      
                  |L1.1888|
000760  f8557023          LDR      r7,[r5,r3,LSL #2]
000764  1c5b              ADDS     r3,r3,#1              ;813
000766  b2db              UXTB     r3,r3                 ;813
000768  443c              ADD      r4,r4,r7
00076a  2b10              CMP      r3,#0x10              ;813
00076c  d3f8              BCC      |L1.1888|
;;;816    			}
;;;817    		adc_buff_[adc_ch]= (short)(temp_L>>4);
00076e  1123              ASRS     r3,r4,#4
000770  4c50              LDR      r4,|L1.2228|
000772  3c40              SUBS     r4,r4,#0x40
000774  f8243012          STRH     r3,[r4,r2,LSL #1]
                  |L1.1912|
;;;818    
;;;819    		//adc_buff_[3]=346;
;;;820    		}
;;;821    	if(++adc_ch>=16) 
000778  1c52              ADDS     r2,r2,#1
00077a  b2d2              UXTB     r2,r2
00077c  708a              STRB     r2,[r1,#2]
00077e  2a10              CMP      r2,#0x10
000780  d308              BCC      |L1.1940|
;;;822    		{
;;;823    		adc_ch=0;
;;;824    		adc_ch_cnt++;
000782  f10c0c01          ADD      r12,r12,#1
000786  f00c02ff          AND      r2,r12,#0xff
00078a  7088              STRB     r0,[r1,#2]            ;823
00078c  70ca              STRB     r2,[r1,#3]
;;;825    		if(adc_ch_cnt>=16)adc_ch_cnt=0;
00078e  2a10              CMP      r2,#0x10
000790  d300              BCC      |L1.1940|
000792  70c8              STRB     r0,[r1,#3]
                  |L1.1940|
;;;826    		}
;;;827    	}
;;;828    
;;;829    //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;830    
;;;831    //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;832    //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;833    /*
;;;834    	{
;;;835    	if((adc_cnt1&0x03)==0)
;;;836    		{
;;;837    		temp_S=0;
;;;838    		for(i=0;i<16;i++)
;;;839    			{
;;;840    			temp_S+=adc_buff[adc_ch][i];
;;;841    			} 
;;;842             	adc_buff_[adc_ch]=temp_S>>4;
;;;843              }
;;;844    	}*/
;;;845    
;;;846    
;;;847    		  
;;;848    
;;;849    adc_self_ch_cnt=0;
000794  7008              STRB     r0,[r1,#0]
;;;850    
;;;851    adc_ch_net++;
000796  1c76              ADDS     r6,r6,#1
;;;852    adc_ch_net&=1;
000798  f0160001          ANDS     r0,r6,#1
;;;853    
;;;854    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;855    //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;856    
;;;857    if(adc_ch_net)
;;;858    	{
;;;859    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;860    	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;861    	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
00079c  4a47              LDR      r2,|L1.2236|
00079e  7048              STRB     r0,[r1,#1]            ;852
0007a0  d005              BEQ      |L1.1966|
0007a2  6810              LDR      r0,[r2,#0]
0007a4  f02000ff          BIC      r0,r0,#0xff
0007a8  1d00              ADDS     r0,r0,#4
0007aa  6010              STR      r0,[r2,#0]
0007ac  e032              B        |L1.2068|
                  |L1.1966|
;;;862    	}
;;;863    else
;;;864    	{
;;;865    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;866    	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;867    	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
0007ae  7889              LDRB     r1,[r1,#2]  ; adc_ch
0007b0  0708              LSLS     r0,r1,#28
0007b2  2800              CMP      r0,#0
;;;868    	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0007b4  6810              LDR      r0,[r2,#0]
0007b6  f02000ff          BIC      r0,r0,#0xff
0007ba  db01              BLT      |L1.1984|
0007bc  1c40              ADDS     r0,r0,#1              ;867
0007be  e000              B        |L1.1986|
                  |L1.1984|
0007c0  1c80              ADDS     r0,r0,#2
                  |L1.1986|
0007c2  6010              STR      r0,[r2,#0]
;;;869    
;;;870    
;;;871    	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0007c4  482c              LDR      r0,|L1.2168|
0007c6  6803              LDR      r3,[r0,#0]
0007c8  f0435380          ORR      r3,r3,#0x10000000
0007cc  6003              STR      r3,[r0,#0]
;;;872    	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0007ce  6a03              LDR      r3,[r0,#0x20]
0007d0  f0434380          ORR      r3,r3,#0x40000000
0007d4  6203              STR      r3,[r0,#0x20]
;;;873    	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0007d6  6e03              LDR      r3,[r0,#0x60]
0007d8  f0436380          ORR      r3,r3,#0x4000000
0007dc  6603              STR      r3,[r0,#0x60]
;;;874    
;;;875    	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
0007de  07cb              LSLS     r3,r1,#31
;;;876    	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
0007e0  6943              LDR      r3,[r0,#0x14]
0007e2  d008              BEQ      |L1.2038|
0007e4  f0435380          ORR      r3,r3,#0x10000000
                  |L1.2024|
0007e8  6143              STR      r3,[r0,#0x14]
;;;877    
;;;878    	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0007ea  078b              LSLS     r3,r1,#30
;;;879    	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0007ec  6b43              LDR      r3,[r0,#0x34]
0007ee  d405              BMI      |L1.2044|
0007f0  f0234380          BIC      r3,r3,#0x40000000     ;878
0007f4  e004              B        |L1.2048|
                  |L1.2038|
0007f6  f0235380          BIC      r3,r3,#0x10000000     ;875
0007fa  e7f5              B        |L1.2024|
                  |L1.2044|
0007fc  f0434380          ORR      r3,r3,#0x40000000
                  |L1.2048|
000800  6343              STR      r3,[r0,#0x34]
;;;880    
;;;881    	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
000802  0749              LSLS     r1,r1,#29
;;;882    	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
000804  6f41              LDR      r1,[r0,#0x74]
000806  d402              BMI      |L1.2062|
000808  f0216180          BIC      r1,r1,#0x4000000      ;881
00080c  e001              B        |L1.2066|
                  |L1.2062|
00080e  f0416180          ORR      r1,r1,#0x4000000
                  |L1.2066|
000812  6741              STR      r1,[r0,#0x74]         ;881
                  |L1.2068|
;;;883    	}
;;;884    	
;;;885    
;;;886    
;;;887    
;;;888    LPC_ADC->ADCR |=  (1<<24);
000814  6810              LDR      r0,[r2,#0]
000816  f0407080          ORR      r0,r0,#0x1000000
00081a  6010              STR      r0,[r2,#0]
                  |L1.2076|
;;;889    
;;;890    }
00081c  e659              B        |L1.1234|
;;;891     /*
                          ENDP

                  restart_off PROC
;;;1218   //-----------------------------------------------
;;;1219   void restart_off(void)
00081e  b510              PUSH     {r4,lr}
;;;1220   {
;;;1221   lc640_write_long(EE_TIME_PROC_GS_RESTART,0);
000820  2100              MOVS     r1,#0
000822  20d0              MOVS     r0,#0xd0
000824  f7fffffe          BL       lc640_write_long
;;;1222   lc640_write_long(EE_TIME_PROC_PS_RESTART,0);
000828  2100              MOVS     r1,#0
00082a  e8bd4010          POP      {r4,lr}
00082e  20d4              MOVS     r0,#0xd4
000830  f7ffbffe          B.W      lc640_write_long
;;;1223   }
;;;1224   
                          ENDP

                  ach_off_hndl PROC
;;;974    //драйвер функции выключения по амперчасам
;;;975    void ach_off_hndl(void)
000834  b570              PUSH     {r4-r6,lr}
;;;976    {
;;;977    
;;;978    if((work_stat!=wsOFF)&&(ACH_OFF_EN))
000836  4c22              LDR      r4,|L1.2240|
;;;979    	{
;;;980    	milliAmperSecunda+=((long)load_I);
000838  4822              LDR      r0,|L1.2244|
00083a  2500              MOVS     r5,#0                 ;978
00083c  7821              LDRB     r1,[r4,#0]            ;978  ; work_stat
00083e  b1d1              CBZ      r1,|L1.2166|
000840  4921              LDR      r1,|L1.2248|
000842  8809              LDRH     r1,[r1,#0]            ;978  ; ACH_OFF_EN
000844  b1b9              CBZ      r1,|L1.2166|
000846  4a21              LDR      r2,|L1.2252|
000848  6801              LDR      r1,[r0,#0]  ; milliAmperSecunda
00084a  f9b22000          LDRSH    r2,[r2,#0]  ; load_I
00084e  4411              ADD      r1,r1,r2
;;;981    	if(milliAmperSecunda>=3600L)
000850  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
000852  f5b16f61          CMP      r1,#0xe10
000856  db51              BLT      |L1.2300|
;;;982    		{
;;;983    		milliAmperSecunda-=3600L;
;;;984    		AMPERCHAS+=1;
000858  4e1d              LDR      r6,|L1.2256|
00085a  f5a16161          SUB      r1,r1,#0xe10          ;983
00085e  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
000860  6831              LDR      r1,[r6,#0]  ; AMPERCHAS
;;;985    		lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000862  f640401c          MOV      r0,#0xc1c
000866  1c49              ADDS     r1,r1,#1              ;984
000868  6031              STR      r1,[r6,#0]  ; AMPERCHAS
00086a  f7fffffe          BL       lc640_write_long
;;;986    
;;;987    		if(AMPERCHAS>=ACH_OFF_LEVEL)
00086e  4919              LDR      r1,|L1.2260|
000870  f9b11000          LDRSH    r1,[r1,#0]  ; ACH_OFF_LEVEL
000874  e030              B        |L1.2264|
                  |L1.2166|
000876  e040              B        |L1.2298|
                  |L1.2168|
                          DCD      0x2009c000
                  |L1.2172|
                          DCD      avg_main_cnt
                  |L1.2176|
                          DCD      avg_num
                  |L1.2180|
                          DCD      num_of_dumm_src
                  |L1.2184|
                          DCD      num_of_max_src
                  |L1.2188|
                          DCD      NUMIST
                  |L1.2192|
                          DCD      bps
                  |L1.2196|
                          DCD      ||area_number.18||
                  |L1.2200|
                          DCD      i_avg_min
                  |L1.2204|
                          DCD      i_avg_max
                  |L1.2208|
                          DCD      i_avg_summ
                  |L1.2212|
                          DCD      i_avg
                  |L1.2216|
                          DCD      avg
                  |L1.2220|
                          DCD      bAVG
                  |L1.2224|
                          DCD      bAVG_CNT
                  |L1.2228|
                          DCD      ||.bss||+0x840
                  |L1.2232|
                          DCD      ||.bss||
                  |L1.2236|
                          DCD      0x40034000
                  |L1.2240|
                          DCD      work_stat
                  |L1.2244|
                          DCD      milliAmperSecunda
                  |L1.2248|
                          DCD      ACH_OFF_EN
                  |L1.2252|
                          DCD      load_I
                  |L1.2256|
                          DCD      AMPERCHAS
                  |L1.2260|
                          DCD      ACH_OFF_LEVEL
                  |L1.2264|
0008d8  6830              LDR      r0,[r6,#0]  ; AMPERCHAS
0008da  4288              CMP      r0,r1
0008dc  db0e              BLT      |L1.2300|
;;;988    			{
;;;989    			work_stat=wsOFF;
0008de  7025              STRB     r5,[r4,#0]
;;;990    			restart_off();
0008e0  f7fffffe          BL       restart_off
;;;991    			tree_up(iProcIsComplete,1,0,0);
0008e4  2300              MOVS     r3,#0
0008e6  461a              MOV      r2,r3
0008e8  2101              MOVS     r1,#1
0008ea  207a              MOVS     r0,#0x7a
0008ec  f7fffffe          BL       tree_up
;;;992    			ret(0);
0008f0  e8bd4070          POP      {r4-r6,lr}
0008f4  2000              MOVS     r0,#0
0008f6  f7ffbffe          B.W      ||ret||
                  |L1.2298|
;;;993    			}
;;;994    		}
;;;995    	}
;;;996    else 
;;;997    	{
;;;998    	milliAmperSecunda=0;
0008fa  6005              STR      r5,[r0,#0]  ; milliAmperSecunda
                  |L1.2300|
;;;999    	}
;;;1000   
;;;1001   }
0008fc  bd70              POP      {r4-r6,pc}
;;;1002    	
                          ENDP

                  curr_off_hndl PROC
;;;1004   //драйвер функции выключения по снижению тока
;;;1005   void curr_off_hndl(void)
0008fe  b570              PUSH     {r4-r6,lr}
;;;1006   {
;;;1007   
;;;1008   if((work_stat!=wsOFF)&&(CURR_OFF_EN))
000900  4cf7              LDR      r4,|L1.3296|
;;;1009   	{
;;;1010   	if(curr_off_start_cnt<CUR_OFF_T_OFF)curr_off_start_cnt++;
;;;1011   	else
;;;1012   		{
;;;1013   		signed int temp_I=0;
;;;1014   		if(work_stat==wsGS)
;;;1015   			{
;;;1016   			temp_I=(signed int)I_ug_temp;
;;;1017   			}
;;;1018   		else if(work_stat==wsPS)
;;;1019   			{
;;;1020   			temp_I=(signed int)I_maxp;
;;;1021   			}
;;;1022   		temp_I*=(signed int)CUR_OFF_LEVEL_RELATIV;
;;;1023   		temp_I/=100;
;;;1024   		curr_off_temp=(short)temp_I;
;;;1025   		if(load_I<curr_off_temp)
;;;1026   			{
;;;1027   			curr_off_stop_cnt++;
000902  4af8              LDR      r2,|L1.3300|
000904  48f8              LDR      r0,|L1.3304|
000906  7825              LDRB     r5,[r4,#0]            ;1008  ; work_stat
000908  2100              MOVS     r1,#0                 ;1008
00090a  b3f5              CBZ      r5,|L1.2442|
00090c  4bf7              LDR      r3,|L1.3308|
00090e  881b              LDRH     r3,[r3,#0]            ;1008  ; CURR_OFF_EN
000910  b3db              CBZ      r3,|L1.2442|
000912  4ef7              LDR      r6,|L1.3312|
000914  f9b03000          LDRSH    r3,[r0,#0]            ;1010  ; curr_off_start_cnt
000918  f9b66000          LDRSH    r6,[r6,#0]            ;1010  ; CUR_OFF_T_OFF
00091c  42b3              CMP      r3,r6                 ;1010
00091e  da02              BGE      |L1.2342|
000920  1c5b              ADDS     r3,r3,#1              ;1010
000922  8003              STRH     r3,[r0,#0]            ;1010
                  |L1.2340|
;;;1028   			if(curr_off_stop_cnt>=CUR_OFF_T_ON)
;;;1029   				{
;;;1030   				work_stat=wsOFF;
;;;1031   				restart_off();
;;;1032   				tree_up(iProcIsComplete,2,0,0);
;;;1033   				ret(0);
;;;1034   				}
;;;1035   			}
;;;1036   		else curr_off_stop_cnt=0;
;;;1037   		}
;;;1038   	}
;;;1039   else 
;;;1040   	{
;;;1041   	curr_off_start_cnt=0;
;;;1042   	curr_off_stop_cnt=0;
;;;1043   	}
;;;1044   }	
000924  bd70              POP      {r4-r6,pc}
                  |L1.2342|
000926  2000              MOVS     r0,#0                 ;1013
000928  2d01              CMP      r5,#1                 ;1014
00092a  d002              BEQ      |L1.2354|
00092c  2d02              CMP      r5,#2                 ;1018
00092e  d002              BEQ      |L1.2358|
000930  e004              B        |L1.2364|
                  |L1.2354|
000932  48f0              LDR      r0,|L1.3316|
000934  e000              B        |L1.2360|
                  |L1.2358|
000936  48f0              LDR      r0,|L1.3320|
                  |L1.2360|
000938  f9b00000          LDRSH    r0,[r0,#0]            ;1020  ; I_maxp
                  |L1.2364|
00093c  4bef              LDR      r3,|L1.3324|
00093e  f9b33000          LDRSH    r3,[r3,#0]            ;1022  ; CUR_OFF_LEVEL_RELATIV
000942  4358              MULS     r0,r3,r0              ;1022
000944  2364              MOVS     r3,#0x64              ;1023
000946  fb90f0f3          SDIV     r0,r0,r3              ;1023
00094a  4bed              LDR      r3,|L1.3328|
00094c  b200              SXTH     r0,r0                 ;1024
00094e  8018              STRH     r0,[r3,#0]            ;1024
000950  4bec              LDR      r3,|L1.3332|
000952  f9b33000          LDRSH    r3,[r3,#0]            ;1025  ; load_I
000956  4283              CMP      r3,r0                 ;1025
000958  da16              BGE      |L1.2440|
00095a  8810              LDRH     r0,[r2,#0]            ;1027  ; curr_off_stop_cnt
00095c  1c40              ADDS     r0,r0,#1              ;1027
00095e  b200              SXTH     r0,r0                 ;1027
000960  8010              STRH     r0,[r2,#0]            ;1027
000962  4ae9              LDR      r2,|L1.3336|
000964  f9b22000          LDRSH    r2,[r2,#0]            ;1028  ; CUR_OFF_T_ON
000968  4290              CMP      r0,r2                 ;1028
00096a  dbdb              BLT      |L1.2340|
00096c  7021              STRB     r1,[r4,#0]            ;1030
00096e  f7fffffe          BL       restart_off
000972  2300              MOVS     r3,#0                 ;1032
000974  461a              MOV      r2,r3                 ;1032
000976  2102              MOVS     r1,#2                 ;1032
000978  207a              MOVS     r0,#0x7a              ;1032
00097a  f7fffffe          BL       tree_up
00097e  e8bd4070          POP      {r4-r6,lr}            ;1033
000982  2000              MOVS     r0,#0                 ;1033
000984  f7ffbffe          B.W      ||ret||
                  |L1.2440|
000988  e000              B        |L1.2444|
                  |L1.2442|
00098a  e001              B        |L1.2448|
                  |L1.2444|
00098c  8011              STRH     r1,[r2,#0]            ;1036
00098e  bd70              POP      {r4-r6,pc}
                  |L1.2448|
000990  8001              STRH     r1,[r0,#0]            ;1041
000992  e7f9              B        |L1.2440|
;;;1045   
                          ENDP

                  time_hndl PROC
;;;1046   //-----------------------------------------------
;;;1047   void time_hndl(void) /*ГЦ раз в секунду*/
000994  e92d5ff0          PUSH     {r4-r12,lr}
;;;1048   {
;;;1049   if((REV_IS_ON)&&(AVT_REV_IS_ON))
;;;1050   	{
;;;1051   
;;;1052   	}
;;;1053   
;;;1054   
;;;1055   
;;;1056   
;;;1057   if(work_stat==wsGS)
000998  f8df8344          LDR      r8,|L1.3296|
;;;1058   	{
;;;1059   	time_proc++;
;;;1060   	if(((time_proc%600L)==0)&&(restart_enable==reON))
;;;1061   		{
;;;1062   		lc640_write_long(EE_TIME_PROC_GS_RESTART,time_proc);
;;;1063   		}
;;;1064   	if(time_proc_remain)
;;;1065   		{
;;;1066   		time_proc_remain--;
;;;1067   		}
;;;1068   	if((!time_proc_remain)&&(!T_PROC_GS_MODE))
;;;1069   		{
;;;1070   		work_stat=wsOFF;
;;;1071   		restart_off();
;;;1072   		tree_up(iProcIsComplete,0,0,0);
;;;1073   		ret(0);
;;;1074   		}
;;;1075   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
00099c  f8dfb36c          LDR      r11,|L1.3340|
;;;1076   		time_proc_phase++;
;;;1077   		
;;;1078   		if(proc_phase==ppFF) {
;;;1079   			REV_STAT=rsFF;
0009a0  4ddb              LDR      r5,|L1.3344|
0009a2  f8980000          LDRB     r0,[r8,#0]            ;1057  ; work_stat
0009a6  f8dfa36c          LDR      r10,|L1.3348|
0009aa  2601              MOVS     r6,#1                 ;1057
;;;1080   			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;1081   				proc_phase=ppFF_P_REW;	
;;;1082   				time_proc_phase=0;
;;;1083   			}
;;;1084   		} else if(proc_phase==ppFF_P_REW) {
;;;1085   			if(time_proc_phase<AVT_REV_TIME_PAUSE)REV_STAT=rsFF;
0009ac  4fda              LDR      r7,|L1.3352|
0009ae  2400              MOVS     r4,#0                 ;1064
0009b0  f44f7916          MOV      r9,#0x258             ;1060
0009b4  2801              CMP      r0,#1                 ;1057
0009b6  d162              BNE      |L1.2686|
0009b8  48d8              LDR      r0,|L1.3356|
0009ba  6801              LDR      r1,[r0,#0]            ;1059  ; time_proc
0009bc  1c49              ADDS     r1,r1,#1              ;1059
0009be  fb91f2f9          SDIV     r2,r1,r9              ;1060
0009c2  6001              STR      r1,[r0,#0]            ;1060  ; time_proc
0009c4  fb091012          MLS      r0,r9,r2,r1           ;1060
0009c8  b930              CBNZ     r0,|L1.2520|
0009ca  48d5              LDR      r0,|L1.3360|
0009cc  7800              LDRB     r0,[r0,#0]            ;1060  ; restart_enable
0009ce  2801              CMP      r0,#1                 ;1060
0009d0  d102              BNE      |L1.2520|
0009d2  20d0              MOVS     r0,#0xd0              ;1062
0009d4  f7fffffe          BL       lc640_write_long
                  |L1.2520|
0009d8  f8da1000          LDR      r1,[r10,#0]           ;1064  ; time_proc_remain
0009dc  4650              MOV      r0,r10                ;1064
0009de  b109              CBZ      r1,|L1.2532|
0009e0  1e49              SUBS     r1,r1,#1              ;1066
0009e2  6001              STR      r1,[r0,#0]            ;1066  ; time_proc_remain
                  |L1.2532|
0009e4  4608              MOV      r0,r1                 ;1068
0009e6  49cf              LDR      r1,|L1.3364|
0009e8  f9b11000          LDRSH    r1,[r1,#0]            ;1068  ; T_PROC_GS_MODE
0009ec  4308              ORRS     r0,r0,r1              ;1068
0009ee  d10c              BNE      |L1.2570|
0009f0  f8884000          STRB     r4,[r8,#0]            ;1070
0009f4  f7fffffe          BL       restart_off
0009f8  2300              MOVS     r3,#0                 ;1072
0009fa  461a              MOV      r2,r3                 ;1072
0009fc  4619              MOV      r1,r3                 ;1072
0009fe  207a              MOVS     r0,#0x7a              ;1072
000a00  f7fffffe          BL       tree_up
000a04  2000              MOVS     r0,#0                 ;1073
000a06  f7fffffe          BL       ||ret||
                  |L1.2570|
000a0a  48c7              LDR      r0,|L1.3368|
000a0c  8800              LDRH     r0,[r0,#0]            ;1075  ; REV_IS_ON
000a0e  b388              CBZ      r0,|L1.2676|
000a10  f8bb0000          LDRH     r0,[r11,#0]           ;1075  ; AVT_REV_IS_ON
000a14  b370              CBZ      r0,|L1.2676|
000a16  4bc5              LDR      r3,|L1.3372|
000a18  8818              LDRH     r0,[r3,#0]            ;1076  ; time_proc_phase
000a1a  1c40              ADDS     r0,r0,#1              ;1076
000a1c  b201              SXTH     r1,r0                 ;1076
000a1e  48c4              LDR      r0,|L1.3376|
000a20  8019              STRH     r1,[r3,#0]            ;1076
000a22  7802              LDRB     r2,[r0,#0]            ;1078  ; proc_phase
000a24  b132              CBZ      r2,|L1.2612|
000a26  2a01              CMP      r2,#1                 ;1084
000a28  d00b              BEQ      |L1.2626|
;;;1086   			else REV_STAT=rsREW;
;;;1087   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;1088   				proc_phase=ppREW;	
;;;1089   				time_proc_phase=0;
;;;1090   			}
;;;1091   		} else if(proc_phase==ppREW) {
000a2a  2a02              CMP      r2,#2
000a2c  d014              BEQ      |L1.2648|
;;;1092   			REV_STAT=rsREW;
;;;1093   			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;1094   				proc_phase=ppREW_P_FF;	
;;;1095   				time_proc_phase=0;
;;;1096   			}
;;;1097   		} else if(proc_phase==ppREW_P_FF) {
000a2e  2a03              CMP      r2,#3
000a30  d01a              BEQ      |L1.2664|
000a32  e024              B        |L1.2686|
                  |L1.2612|
000a34  4abf              LDR      r2,|L1.3380|
000a36  702e              STRB     r6,[r5,#0]            ;1079
000a38  8812              LDRH     r2,[r2,#0]            ;1080  ; AVT_REV_TIME_FF
000a3a  4291              CMP      r1,r2                 ;1080
000a3c  db1f              BLT      |L1.2686|
000a3e  7006              STRB     r6,[r0,#0]            ;1081
000a40  e01c              B        |L1.2684|
                  |L1.2626|
000a42  f9b72000          LDRSH    r2,[r7,#0]            ;1085  ; AVT_REV_TIME_PAUSE
000a46  4291              CMP      r1,r2                 ;1085
000a48  da01              BGE      |L1.2638|
000a4a  702e              STRB     r6,[r5,#0]            ;1085
000a4c  e000              B        |L1.2640|
                  |L1.2638|
000a4e  702c              STRB     r4,[r5,#0]            ;1086
                  |L1.2640|
000a50  db15              BLT      |L1.2686|
000a52  f04f0102          MOV      r1,#2                 ;1088
000a56  e005              B        |L1.2660|
                  |L1.2648|
000a58  4ab7              LDR      r2,|L1.3384|
000a5a  702c              STRB     r4,[r5,#0]            ;1092
000a5c  8812              LDRH     r2,[r2,#0]            ;1093  ; AVT_REV_TIME_REW
000a5e  4291              CMP      r1,r2                 ;1093
000a60  db0d              BLT      |L1.2686|
000a62  2103              MOVS     r1,#3                 ;1094
                  |L1.2660|
000a64  7001              STRB     r1,[r0,#0]            ;1088
000a66  e009              B        |L1.2684|
                  |L1.2664|
;;;1098   			if(time_proc_phase<AVT_REV_TIME_PAUSE)REV_STAT=rsREW;
000a68  f9b72000          LDRSH    r2,[r7,#0]  ; AVT_REV_TIME_PAUSE
000a6c  4291              CMP      r1,r2
000a6e  da02              BGE      |L1.2678|
000a70  702c              STRB     r4,[r5,#0]
000a72  e001              B        |L1.2680|
                  |L1.2676|
000a74  e003              B        |L1.2686|
                  |L1.2678|
;;;1099   			else REV_STAT=rsFF;
000a76  702e              STRB     r6,[r5,#0]
                  |L1.2680|
;;;1100   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
000a78  db01              BLT      |L1.2686|
;;;1101   				proc_phase=ppFF;	
000a7a  7004              STRB     r4,[r0,#0]
                  |L1.2684|
;;;1102   				time_proc_phase=0;
000a7c  801c              STRH     r4,[r3,#0]
                  |L1.2686|
;;;1103   			}
;;;1104   		}
;;;1105   	}
;;;1106   	}
;;;1107   
;;;1108   
;;;1109   if(work_stat==wsPS)
000a7e  f8980000          LDRB     r0,[r8,#0]  ; work_stat
000a82  2802              CMP      r0,#2
000a84  d157              BNE      |L1.2870|
;;;1110   	{
;;;1111   	time_proc++;
000a86  48a5              LDR      r0,|L1.3356|
000a88  6801              LDR      r1,[r0,#0]  ; time_proc
000a8a  1c49              ADDS     r1,r1,#1
;;;1112   	if(((time_proc%600L)==0)&&(restart_enable==reON))
000a8c  fb91f2f9          SDIV     r2,r1,r9
000a90  6001              STR      r1,[r0,#0]  ; time_proc
000a92  fb091012          MLS      r0,r9,r2,r1
000a96  b930              CBNZ     r0,|L1.2726|
000a98  48a1              LDR      r0,|L1.3360|
000a9a  7800              LDRB     r0,[r0,#0]  ; restart_enable
000a9c  2801              CMP      r0,#1
000a9e  d102              BNE      |L1.2726|
;;;1113   		{
;;;1114   		lc640_write_long(EE_TIME_PROC_PS_RESTART,time_proc);
000aa0  20d4              MOVS     r0,#0xd4
000aa2  f7fffffe          BL       lc640_write_long
                  |L1.2726|
;;;1115   		}
;;;1116   	if(time_proc_remain)
000aa6  f8da1000          LDR      r1,[r10,#0]  ; time_proc_remain
000aaa  4650              MOV      r0,r10
000aac  b109              CBZ      r1,|L1.2738|
;;;1117   		{
;;;1118   		time_proc_remain--;
000aae  1e49              SUBS     r1,r1,#1
000ab0  6001              STR      r1,[r0,#0]  ; time_proc_remain
                  |L1.2738|
;;;1119   		}
;;;1120   	if((!time_proc_remain)&&(!T_PROC_PS_MODE))
000ab2  4608              MOV      r0,r1
000ab4  49a1              LDR      r1,|L1.3388|
000ab6  f9b11000          LDRSH    r1,[r1,#0]  ; T_PROC_PS_MODE
000aba  4308              ORRS     r0,r0,r1
000abc  d10c              BNE      |L1.2776|
;;;1121   		{
;;;1122   		work_stat=wsOFF;
000abe  f8884000          STRB     r4,[r8,#0]
;;;1123   		restart_off();
000ac2  f7fffffe          BL       restart_off
;;;1124   		tree_up(iProcIsComplete,0,0,0);
000ac6  2300              MOVS     r3,#0
000ac8  461a              MOV      r2,r3
000aca  4619              MOV      r1,r3
000acc  207a              MOVS     r0,#0x7a
000ace  f7fffffe          BL       tree_up
;;;1125   		ret(0);
000ad2  2000              MOVS     r0,#0
000ad4  f7fffffe          BL       ||ret||
                  |L1.2776|
;;;1126   		}
;;;1127   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000ad8  4893              LDR      r0,|L1.3368|
000ada  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000adc  2800              CMP      r0,#0
000ade  d02a              BEQ      |L1.2870|
000ae0  f8bb0000          LDRH     r0,[r11,#0]  ; AVT_REV_IS_ON
000ae4  2800              CMP      r0,#0
000ae6  d026              BEQ      |L1.2870|
;;;1128   		time_proc_phase++;
000ae8  4890              LDR      r0,|L1.3372|
000aea  8801              LDRH     r1,[r0,#0]  ; time_proc_phase
000aec  1c49              ADDS     r1,r1,#1
000aee  b20a              SXTH     r2,r1
;;;1129   		
;;;1130   		if(proc_phase==ppFF) {
000af0  498f              LDR      r1,|L1.3376|
000af2  8002              STRH     r2,[r0,#0]            ;1128
000af4  780b              LDRB     r3,[r1,#0]  ; proc_phase
000af6  b15b              CBZ      r3,|L1.2832|
;;;1131   			REV_STAT=rsFF;
;;;1132   			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;1133   				proc_phase=ppFF_P_REW;	
;;;1134   				time_proc_phase=0;
;;;1135   			}
;;;1136   		} else if(proc_phase==ppFF_P_REW) {
000af8  2b01              CMP      r3,#1
000afa  d010              BEQ      |L1.2846|
;;;1137   			if(time_proc_phase<AVT_REV_TIME_PAUSE)REV_STAT=rsFF;
;;;1138   			else REV_STAT=rsREW;
;;;1139   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;1140   				proc_phase=ppREW;	
;;;1141   				time_proc_phase=0;
;;;1142   			}
;;;1143   		} else if(proc_phase==ppREW) {
000afc  2b02              CMP      r3,#2
000afe  d01c              BEQ      |L1.2874|
;;;1144   			REV_STAT=rsREW;
;;;1145   			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;1146   				proc_phase=ppREW_P_FF;	
;;;1147   				time_proc_phase=0;
;;;1148   			}
;;;1149   		} else if(proc_phase==ppREW_P_FF) {
000b00  2b03              CMP      r3,#3
000b02  d118              BNE      |L1.2870|
;;;1150   			if(time_proc_phase<AVT_REV_TIME_PAUSE)REV_STAT=rsREW;
000b04  f9b73000          LDRSH    r3,[r7,#0]  ; AVT_REV_TIME_PAUSE
000b08  429a              CMP      r2,r3
000b0a  da1e              BGE      |L1.2890|
000b0c  702c              STRB     r4,[r5,#0]
000b0e  e01d              B        |L1.2892|
                  |L1.2832|
000b10  4b88              LDR      r3,|L1.3380|
000b12  702e              STRB     r6,[r5,#0]            ;1131
000b14  881b              LDRH     r3,[r3,#0]            ;1132  ; AVT_REV_TIME_FF
000b16  429a              CMP      r2,r3                 ;1132
000b18  db0d              BLT      |L1.2870|
000b1a  700e              STRB     r6,[r1,#0]            ;1133
000b1c  e00a              B        |L1.2868|
                  |L1.2846|
000b1e  f9b73000          LDRSH    r3,[r7,#0]            ;1137  ; AVT_REV_TIME_PAUSE
000b22  429a              CMP      r2,r3                 ;1137
000b24  da01              BGE      |L1.2858|
000b26  702e              STRB     r6,[r5,#0]            ;1137
000b28  e000              B        |L1.2860|
                  |L1.2858|
000b2a  702c              STRB     r4,[r5,#0]            ;1138
                  |L1.2860|
000b2c  db03              BLT      |L1.2870|
000b2e  f04f0202          MOV      r2,#2                 ;1140
000b32  e008              B        |L1.2886|
                  |L1.2868|
000b34  8004              STRH     r4,[r0,#0]            ;1134
                  |L1.2870|
;;;1151   			else REV_STAT=rsFF;
;;;1152   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;1153   				proc_phase=ppFF;	
;;;1154   				time_proc_phase=0;
;;;1155   			}
;;;1156   		}
;;;1157   	}
;;;1158   	}
;;;1159   
;;;1160   
;;;1161   
;;;1162   }
000b36  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2874|
000b3a  4b7f              LDR      r3,|L1.3384|
000b3c  702c              STRB     r4,[r5,#0]            ;1144
000b3e  881b              LDRH     r3,[r3,#0]            ;1145  ; AVT_REV_TIME_REW
000b40  429a              CMP      r2,r3                 ;1145
000b42  dbf8              BLT      |L1.2870|
000b44  2203              MOVS     r2,#3                 ;1146
                  |L1.2886|
000b46  700a              STRB     r2,[r1,#0]            ;1146
000b48  e7f4              B        |L1.2868|
                  |L1.2890|
000b4a  702e              STRB     r6,[r5,#0]            ;1151
                  |L1.2892|
000b4c  dbf3              BLT      |L1.2870|
000b4e  700c              STRB     r4,[r1,#0]            ;1153
000b50  e7f0              B        |L1.2868|
;;;1163   
                          ENDP

                  cap_time_hndl PROC
;;;1164   //-----------------------------------------------
;;;1165   void cap_time_hndl(void) /*10 раз в секунду*/
000b52  b570              PUSH     {r4-r6,lr}
;;;1166   {
;;;1167   
;;;1168   if(work_stat==wsCAP)
000b54  4862              LDR      r0,|L1.3296|
000b56  7800              LDRB     r0,[r0,#0]  ; work_stat
000b58  2803              CMP      r0,#3
000b5a  d143              BNE      |L1.3044|
;;;1169   	{
;;;1170   	cap_time_proc++;
000b5c  4978              LDR      r1,|L1.3392|
;;;1171   	if(cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME+CAP_PAUSE2_TIME))
000b5e  4879              LDR      r0,|L1.3396|
000b60  680a              LDR      r2,[r1,#0]            ;1170  ; cap_time_proc
000b62  1c52              ADDS     r2,r2,#1              ;1170
000b64  600a              STR      r2,[r1,#0]  ; cap_time_proc
000b66  f9b05000          LDRSH    r5,[r0,#0]  ; CAP_ZAR_TIME
000b6a  4877              LDR      r0,|L1.3400|
000b6c  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
000b70  182b              ADDS     r3,r5,r0
000b72  4876              LDR      r0,|L1.3404|
000b74  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
000b78  181c              ADDS     r4,r3,r0
000b7a  4875              LDR      r0,|L1.3408|
000b7c  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
000b80  1826              ADDS     r6,r4,r0
;;;1172   		{
;;;1173   		cap_time_proc=0;
000b82  2000              MOVS     r0,#0
000b84  4296              CMP      r6,r2                 ;1171
000b86  dc04              BGT      |L1.2962|
;;;1174   		CAP_COUNTER++;
000b88  4e72              LDR      r6,|L1.3412|
000b8a  6008              STR      r0,[r1,#0]  ; cap_time_proc
000b8c  8832              LDRH     r2,[r6,#0]  ; CAP_COUNTER
000b8e  1c52              ADDS     r2,r2,#1
000b90  8032              STRH     r2,[r6,#0]
                  |L1.2962|
;;;1175   		}
;;;1176   
;;;1177   	if(cap_time_proc>=CAP_ZAR_TIME)bOFF=1;
000b92  6809              LDR      r1,[r1,#0]  ; cap_time_proc
000b94  4e70              LDR      r6,|L1.3416|
000b96  2201              MOVS     r2,#1
000b98  42a9              CMP      r1,r5
000b9a  db01              BLT      |L1.2976|
000b9c  7032              STRB     r2,[r6,#0]
000b9e  e000              B        |L1.2978|
                  |L1.2976|
;;;1178   	else bOFF=0;
000ba0  7030              STRB     r0,[r6,#0]
                  |L1.2978|
;;;1179   
;;;1180   	if((cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME))&&(cap_time_proc<(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME)))bRAZR=1;
000ba2  4d6e              LDR      r5,|L1.3420|
000ba4  428b              CMP      r3,r1
000ba6  dc03              BGT      |L1.2992|
000ba8  428c              CMP      r4,r1
000baa  dd01              BLE      |L1.2992|
000bac  702a              STRB     r2,[r5,#0]
000bae  e000              B        |L1.2994|
                  |L1.2992|
;;;1181   	else bRAZR=0;
000bb0  7028              STRB     r0,[r5,#0]
                  |L1.2994|
;;;1182   
;;;1183   
;;;1184   	CAP_TIME_SEC++;
000bb2  496b              LDR      r1,|L1.3424|
000bb4  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_SEC
000bb6  1c52              ADDS     r2,r2,#1
000bb8  b212              SXTH     r2,r2
000bba  800a              STRH     r2,[r1,#0]
;;;1185   	if(CAP_TIME_SEC>=600)
000bbc  f5b27f16          CMP      r2,#0x258
000bc0  db10              BLT      |L1.3044|
;;;1186   		{
;;;1187   		CAP_TIME_SEC=0;
000bc2  8008              STRH     r0,[r1,#0]
;;;1188   		
;;;1189   		CAP_TIME_MIN++;
000bc4  4967              LDR      r1,|L1.3428|
000bc6  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_MIN
000bc8  1c52              ADDS     r2,r2,#1
000bca  b212              SXTH     r2,r2
000bcc  800a              STRH     r2,[r1,#0]
;;;1190   		if(CAP_TIME_MIN>=60)
000bce  2a3c              CMP      r2,#0x3c
000bd0  db08              BLT      |L1.3044|
;;;1191   			{
;;;1192   			CAP_TIME_MIN=0;
000bd2  8008              STRH     r0,[r1,#0]
;;;1193   	
;;;1194   			CAP_TIME_HOUR++;
000bd4  4964              LDR      r1,|L1.3432|
000bd6  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_HOUR
000bd8  1c52              ADDS     r2,r2,#1
000bda  b212              SXTH     r2,r2
000bdc  800a              STRH     r2,[r1,#0]
;;;1195   			if(CAP_TIME_HOUR>=24)
000bde  2a18              CMP      r2,#0x18
000be0  db00              BLT      |L1.3044|
;;;1196   				{
;;;1197   				CAP_TIME_HOUR=0;
000be2  8008              STRH     r0,[r1,#0]
                  |L1.3044|
;;;1198   				}
;;;1199   			}
;;;1200   		}
;;;1201   	}
;;;1202   
;;;1203   }
000be4  bd70              POP      {r4-r6,pc}
;;;1204   
                          ENDP

                  restart_on_GS PROC
;;;1206   //-----------------------------------------------
;;;1207   void restart_on_GS(void)
000be6  2101              MOVS     r1,#1
;;;1208   {
;;;1209   lc640_write_long(EE_TIME_PROC_GS_RESTART,1);
000be8  20d0              MOVS     r0,#0xd0
000bea  f7ffbffe          B.W      lc640_write_long
;;;1210   }
;;;1211   
                          ENDP

                  restart_on_PS PROC
;;;1212   //-----------------------------------------------
;;;1213   void restart_on_PS(void)
000bee  2101              MOVS     r1,#1
;;;1214   {
;;;1215   lc640_write_long(EE_TIME_PROC_PS_RESTART,1);
000bf0  20d4              MOVS     r0,#0xd4
000bf2  f7ffbffe          B.W      lc640_write_long
;;;1216   }
;;;1217   
                          ENDP

                  start_GS PROC
;;;1225   //-----------------------------------------------
;;;1226   void start_GS(void) {
000bf6  b570              PUSH     {r4-r6,lr}
;;;1227   
;;;1228   	if(SK_START==2)
000bf8  485c              LDR      r0,|L1.3436|
000bfa  8800              LDRH     r0,[r0,#0]  ; SK_START
000bfc  2802              CMP      r0,#2
000bfe  d10a              BNE      |L1.3094|
;;;1229   		{
;;;1230   		if(SK_START_LEV)
000c00  485b              LDR      r0,|L1.3440|
000c02  8801              LDRH     r1,[r0,#0]  ; SK_START_LEV
;;;1231   			{
;;;1232   			if(sk_in_drv_stat==1)
000c04  485b              LDR      r0,|L1.3444|
000c06  f9b00000          LDRSH    r0,[r0,#0]
000c0a  b111              CBZ      r1,|L1.3090|
000c0c  2801              CMP      r0,#1
000c0e  d029              BEQ      |L1.3172|
000c10  e001              B        |L1.3094|
                  |L1.3090|
;;;1233   				{
;;;1234   				return;
;;;1235   				}
;;;1236   			}
;;;1237   		if(!SK_START_LEV)
;;;1238   			{
;;;1239   			if(sk_in_drv_stat==-1)
000c12  1c40              ADDS     r0,r0,#1
000c14  d026              BEQ      |L1.3172|
                  |L1.3094|
;;;1240   				{
;;;1241   				return;
;;;1242   				}
;;;1243   			}
;;;1244   		}
;;;1245   
;;;1246   	work_stat=wsGS;
000c16  4832              LDR      r0,|L1.3296|
000c18  2501              MOVS     r5,#1
;;;1247   	time_proc=0;
000c1a  2400              MOVS     r4,#0
000c1c  7005              STRB     r5,[r0,#0]            ;1246
000c1e  483f              LDR      r0,|L1.3356|
;;;1248   	time_proc_remain=T_PROC_GS;
000c20  493c              LDR      r1,|L1.3348|
000c22  6004              STR      r4,[r0,#0]  ; time_proc
000c24  4854              LDR      r0,|L1.3448|
000c26  6800              LDR      r0,[r0,#0]  ; T_PROC_GS
;;;1249   	//index_set=0;
;;;1250   	restart_on_GS();
000c28  6008              STR      r0,[r1,#0]  ; time_proc_remain
000c2a  f7fffffe          BL       restart_on_GS
;;;1251   	bFAST_REG=1;
000c2e  4853              LDR      r0,|L1.3452|
000c30  7205              STRB     r5,[r0,#8]
;;;1252   	bU_VALID=0;
000c32  7244              STRB     r4,[r0,#9]
;;;1253   	bU_VALID_VALID=0;
000c34  7284              STRB     r4,[r0,#0xa]
;;;1254   	
;;;1255   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000c36  483c              LDR      r0,|L1.3368|
000c38  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000c3a  b140              CBZ      r0,|L1.3150|
000c3c  4833              LDR      r0,|L1.3340|
000c3e  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
000c40  b128              CBZ      r0,|L1.3150|
;;;1256   		time_proc_phase=0;
000c42  483a              LDR      r0,|L1.3372|
000c44  8004              STRH     r4,[r0,#0]
;;;1257   		proc_phase=ppFF;
000c46  483a              LDR      r0,|L1.3376|
000c48  7004              STRB     r4,[r0,#0]
;;;1258   		REV_STAT=rsFF;	
000c4a  4831              LDR      r0,|L1.3344|
000c4c  7005              STRB     r5,[r0,#0]
                  |L1.3150|
;;;1259   	}
;;;1260   
;;;1261   	milliAmperSecunda=0L;
000c4e  484c              LDR      r0,|L1.3456|
000c50  4621              MOV      r1,r4
;;;1262   	AMPERCHAS=0L;
000c52  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
000c54  484b              LDR      r0,|L1.3460|
;;;1263   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000c56  6004              STR      r4,[r0,#0]  ; AMPERCHAS
000c58  e8bd4070          POP      {r4-r6,lr}
000c5c  f640401c          MOV      r0,#0xc1c
000c60  f7ffbffe          B.W      lc640_write_long
                  |L1.3172|
;;;1264   }
000c64  bd70              POP      {r4-r6,pc}
;;;1265   
                          ENDP

                  start_PS PROC
;;;1267   //-----------------------------------------------
;;;1268   void start_PS(void) {
000c66  4841              LDR      r0,|L1.3436|
000c68  b510              PUSH     {r4,lr}
;;;1269   
;;;1270   	if(SK_START==2)
000c6a  8800              LDRH     r0,[r0,#0]  ; SK_START
000c6c  2802              CMP      r0,#2
000c6e  d10a              BNE      |L1.3206|
;;;1271   		{
;;;1272   		if(SK_START_LEV)
000c70  483f              LDR      r0,|L1.3440|
000c72  8801              LDRH     r1,[r0,#0]  ; SK_START_LEV
;;;1273   			{
;;;1274   			if(sk_in_drv_stat==1)
000c74  483f              LDR      r0,|L1.3444|
000c76  f9b00000          LDRSH    r0,[r0,#0]
000c7a  b111              CBZ      r1,|L1.3202|
000c7c  2801              CMP      r0,#1
000c7e  d02a              BEQ      |L1.3286|
000c80  e001              B        |L1.3206|
                  |L1.3202|
;;;1275   				{
;;;1276   				return;
;;;1277   				}
;;;1278   			}
;;;1279   		if(!SK_START_LEV)
;;;1280   			{
;;;1281   			if(sk_in_drv_stat==-1)
000c82  1c40              ADDS     r0,r0,#1
000c84  d027              BEQ      |L1.3286|
                  |L1.3206|
;;;1282   				{
;;;1283   				return;
;;;1284   				}
;;;1285   			}
;;;1286   		}
;;;1287   
;;;1288   	work_stat=wsPS;
000c86  4916              LDR      r1,|L1.3296|
000c88  2002              MOVS     r0,#2
;;;1289   	time_proc=0;
000c8a  2400              MOVS     r4,#0
000c8c  7008              STRB     r0,[r1,#0]            ;1288
000c8e  4823              LDR      r0,|L1.3356|
;;;1290   	time_proc_remain=T_PROC_PS;
000c90  4920              LDR      r1,|L1.3348|
000c92  6004              STR      r4,[r0,#0]  ; time_proc
000c94  483c              LDR      r0,|L1.3464|
000c96  6800              LDR      r0,[r0,#0]  ; T_PROC_PS
;;;1291   	//index_set=0;
;;;1292   	restart_on_PS();
000c98  6008              STR      r0,[r1,#0]  ; time_proc_remain
000c9a  f7fffffe          BL       restart_on_PS
;;;1293   	bFAST_REG=1;
000c9e  4837              LDR      r0,|L1.3452|
000ca0  2101              MOVS     r1,#1
000ca2  7201              STRB     r1,[r0,#8]
;;;1294   	bU_VALID=0;
000ca4  7244              STRB     r4,[r0,#9]
;;;1295   	bU_VALID_VALID=0;
000ca6  7284              STRB     r4,[r0,#0xa]
;;;1296   	
;;;1297   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000ca8  481f              LDR      r0,|L1.3368|
000caa  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000cac  b140              CBZ      r0,|L1.3264|
000cae  4817              LDR      r0,|L1.3340|
000cb0  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
000cb2  b128              CBZ      r0,|L1.3264|
;;;1298   		time_proc_phase=0;
000cb4  481d              LDR      r0,|L1.3372|
000cb6  8004              STRH     r4,[r0,#0]
;;;1299   		proc_phase=ppFF;
000cb8  481d              LDR      r0,|L1.3376|
000cba  7004              STRB     r4,[r0,#0]
;;;1300   		REV_STAT=rsFF;	
000cbc  4814              LDR      r0,|L1.3344|
000cbe  7001              STRB     r1,[r0,#0]
                  |L1.3264|
;;;1301   	}
;;;1302   	milliAmperSecunda=0L;
000cc0  482f              LDR      r0,|L1.3456|
000cc2  4621              MOV      r1,r4
;;;1303   	AMPERCHAS=0L;
000cc4  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
000cc6  482f              LDR      r0,|L1.3460|
;;;1304   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000cc8  6004              STR      r4,[r0,#0]  ; AMPERCHAS
000cca  e8bd4010          POP      {r4,lr}
000cce  f640401c          MOV      r0,#0xc1c
000cd2  f7ffbffe          B.W      lc640_write_long
                  |L1.3286|
;;;1305   }
000cd6  bd10              POP      {r4,pc}
;;;1306   
                          ENDP

                  start_CAP PROC
;;;1307   //-----------------------------------------------
;;;1308   void start_CAP(void) {
000cd8  4901              LDR      r1,|L1.3296|
;;;1309   	work_stat=wsCAP;
000cda  2003              MOVS     r0,#3
000cdc  7008              STRB     r0,[r1,#0]
;;;1310   }
000cde  4770              BX       lr
                  |L1.3296|
                          DCD      work_stat
                  |L1.3300|
                          DCD      curr_off_stop_cnt
                  |L1.3304|
                          DCD      curr_off_start_cnt
                  |L1.3308|
                          DCD      CURR_OFF_EN
                  |L1.3312|
                          DCD      CUR_OFF_T_OFF
                  |L1.3316|
                          DCD      I_ug_temp
                  |L1.3320|
                          DCD      I_maxp
                  |L1.3324|
                          DCD      CUR_OFF_LEVEL_RELATIV
                  |L1.3328|
                          DCD      curr_off_temp
                  |L1.3332|
                          DCD      load_I
                  |L1.3336|
                          DCD      CUR_OFF_T_ON
                  |L1.3340|
                          DCD      AVT_REV_IS_ON
                  |L1.3344|
                          DCD      REV_STAT
                  |L1.3348|
                          DCD      time_proc_remain
                  |L1.3352|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.3356|
                          DCD      time_proc
                  |L1.3360|
                          DCD      restart_enable
                  |L1.3364|
                          DCD      T_PROC_GS_MODE
                  |L1.3368|
                          DCD      REV_IS_ON
                  |L1.3372|
                          DCD      time_proc_phase
                  |L1.3376|
                          DCD      proc_phase
                  |L1.3380|
                          DCD      AVT_REV_TIME_FF
                  |L1.3384|
                          DCD      AVT_REV_TIME_REW
                  |L1.3388|
                          DCD      T_PROC_PS_MODE
                  |L1.3392|
                          DCD      cap_time_proc
                  |L1.3396|
                          DCD      CAP_ZAR_TIME
                  |L1.3400|
                          DCD      CAP_PAUSE1_TIME
                  |L1.3404|
                          DCD      CAP_RAZR_TIME
                  |L1.3408|
                          DCD      CAP_PAUSE2_TIME
                  |L1.3412|
                          DCD      CAP_COUNTER
                  |L1.3416|
                          DCD      bOFF
                  |L1.3420|
                          DCD      bRAZR
                  |L1.3424|
                          DCD      CAP_TIME_SEC
                  |L1.3428|
                          DCD      CAP_TIME_MIN
                  |L1.3432|
                          DCD      CAP_TIME_HOUR
                  |L1.3436|
                          DCD      SK_START
                  |L1.3440|
                          DCD      SK_START_LEV
                  |L1.3444|
                          DCD      sk_in_drv_stat
                  |L1.3448|
                          DCD      T_PROC_GS
                  |L1.3452|
                          DCD      ||area_number.18||
                  |L1.3456|
                          DCD      milliAmperSecunda
                  |L1.3460|
                          DCD      AMPERCHAS
                  |L1.3464|
                          DCD      T_PROC_PS
                          ENDP

                  pause_CAP PROC
;;;1312   //-----------------------------------------------
;;;1313   void pause_CAP(void) {
000d8c  49fc              LDR      r1,|L1.4480|
;;;1314   	work_stat=wsOFF;
000d8e  2000              MOVS     r0,#0
000d90  7008              STRB     r0,[r1,#0]
;;;1315   }
000d92  4770              BX       lr
;;;1316   
                          ENDP

                  stop_CAP PROC
;;;1317   //-----------------------------------------------
;;;1318   void stop_CAP(void) {
000d94  49fa              LDR      r1,|L1.4480|
;;;1319   	work_stat=wsOFF;
000d96  2000              MOVS     r0,#0
000d98  7008              STRB     r0,[r1,#0]
;;;1320   
;;;1321   }
000d9a  4770              BX       lr
;;;1322   
                          ENDP

                  ramModbusCnt_hndl PROC
;;;1323   //-----------------------------------------------
;;;1324   void ramModbusCnt_hndl(void)  
000d9c  48f9              LDR      r0,|L1.4484|
;;;1325   {
;;;1326   if(ramModbusCnt) ramModbusCnt--;
000d9e  f9b01000          LDRSH    r1,[r0,#0]  ; ramModbusCnt
000da2  b111              CBZ      r1,|L1.3498|
000da4  1e49              SUBS     r1,r1,#1
000da6  8001              STRH     r1,[r0,#0]
;;;1327   else 
;;;1328   	{
;;;1329   	I_ug_ram=0;
;;;1330   	U_up_ram=0;
;;;1331   	}	
;;;1332   }
000da8  4770              BX       lr
                  |L1.3498|
000daa  49f7              LDR      r1,|L1.4488|
000dac  2000              MOVS     r0,#0                 ;1329
000dae  8008              STRH     r0,[r1,#0]            ;1329
000db0  49f6              LDR      r1,|L1.4492|
000db2  8008              STRH     r0,[r1,#0]            ;1330
000db4  4770              BX       lr
;;;1333   
                          ENDP

                  reset_CAP PROC
;;;1334   //-----------------------------------------------
;;;1335   void reset_CAP(void) {
000db6  49f2              LDR      r1,|L1.4480|
;;;1336   	work_stat=wsOFF;
000db8  2000              MOVS     r0,#0
000dba  7008              STRB     r0,[r1,#0]
;;;1337   	cap_time_proc=0;
000dbc  49f4              LDR      r1,|L1.4496|
;;;1338   	CAP_COUNTER=0;
000dbe  6008              STR      r0,[r1,#0]  ; cap_time_proc
000dc0  49f4              LDR      r1,|L1.4500|
000dc2  8008              STRH     r0,[r1,#0]
;;;1339   	CAP_TIME_SEC=0;
000dc4  49f4              LDR      r1,|L1.4504|
000dc6  8008              STRH     r0,[r1,#0]
;;;1340   	CAP_TIME_MIN=0;
000dc8  49f4              LDR      r1,|L1.4508|
000dca  8008              STRH     r0,[r1,#0]
;;;1341   	CAP_TIME_HOUR=0;
000dcc  49f4              LDR      r1,|L1.4512|
000dce  8008              STRH     r0,[r1,#0]
;;;1342   }
000dd0  4770              BX       lr
;;;1343   
                          ENDP

                  stop_proc PROC
;;;1344   //-----------------------------------------------
;;;1345   void stop_proc(void)
000dd2  49eb              LDR      r1,|L1.4480|
;;;1346   {
;;;1347   work_stat=wsOFF;
000dd4  2000              MOVS     r0,#0
000dd6  7008              STRB     r0,[r1,#0]
;;;1348   restart_off();
000dd8  e7fe              B        restart_off
;;;1349   }
;;;1350   
                          ENDP

                  find_U_curve PROC
;;;1351   //-----------------------------------------------
;;;1352   short find_U_curve(signed short in)
000dda  e92d41f0          PUSH     {r4-r8,lr}
;;;1353   {
;;;1354   short ii,i=0,out=0;
000dde  2400              MOVS     r4,#0
000de0  4606              MOV      r6,r0                 ;1353
;;;1355   
;;;1356   ii=0;
;;;1357   
;;;1358   if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) >= in)
000de2  f44f75fa          MOV      r5,#0x1f4
000de6  46a0              MOV      r8,r4                 ;1354
000de8  4627              MOV      r7,r4                 ;1356
000dea  4628              MOV      r0,r5
000dec  f7fffffe          BL       lc640_read_int
000df0  42b0              CMP      r0,r6
000df2  da28              BGE      |L1.3654|
                  |L1.3572|
;;;1359   	{
;;;1360   	out=0;
;;;1361   	}
;;;1362   else 
;;;1363   	{
;;;1364   	for (ii=0;ii<=200;ii+=10)
;;;1365   		{
;;;1366   		if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000df4  eb050047          ADD      r0,r5,r7,LSL #1
000df8  f7fffffe          BL       lc640_read_int
000dfc  42b0              CMP      r0,r6
000dfe  dc00              BGT      |L1.3586|
;;;1367   			{
;;;1368   			i=ii;
000e00  463c              MOV      r4,r7
                  |L1.3586|
000e02  370a              ADDS     r7,r7,#0xa            ;1364
000e04  b23f              SXTH     r7,r7                 ;1364
000e06  2fc8              CMP      r7,#0xc8              ;1364
000e08  ddf4              BLE      |L1.3572|
;;;1369   			}
;;;1370   		else continue;
;;;1371   		}
;;;1372   	if(i<200)
000e0a  2cc8              CMP      r4,#0xc8
000e0c  da0e              BGE      |L1.3628|
;;;1373   		{
;;;1374   		for (ii=i;ii<i+10;ii++)
000e0e  f104070a          ADD      r7,r4,#0xa
000e12  e008              B        |L1.3622|
                  |L1.3604|
;;;1375   			{
;;;1376   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000e14  eb050044          ADD      r0,r5,r4,LSL #1
000e18  f7fffffe          BL       lc640_read_int
000e1c  42b0              CMP      r0,r6
000e1e  dc00              BGT      |L1.3618|
;;;1377   				{
;;;1378   				out=ii;
000e20  46a0              MOV      r8,r4
                  |L1.3618|
000e22  1c64              ADDS     r4,r4,#1              ;1374
000e24  b224              SXTH     r4,r4                 ;1374
                  |L1.3622|
000e26  42bc              CMP      r4,r7                 ;1374
000e28  dbf4              BLT      |L1.3604|
000e2a  e00c              B        |L1.3654|
                  |L1.3628|
;;;1379   				}
;;;1380   			else continue;
;;;1381   			}
;;;1382   		}
;;;1383   	else 
;;;1384   		{
;;;1385   		for (ii=200;ii<=202;ii++)
000e2c  f05f04c8          MOVS.W   r4,#0xc8
                  |L1.3632|
;;;1386   			{
;;;1387   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000e30  eb050044          ADD      r0,r5,r4,LSL #1
000e34  f7fffffe          BL       lc640_read_int
000e38  42b0              CMP      r0,r6
000e3a  dc00              BGT      |L1.3646|
;;;1388   				{
;;;1389   				out=ii;
000e3c  46a0              MOV      r8,r4
                  |L1.3646|
000e3e  1c64              ADDS     r4,r4,#1              ;1385
000e40  b224              SXTH     r4,r4                 ;1385
000e42  2cca              CMP      r4,#0xca              ;1385
000e44  ddf4              BLE      |L1.3632|
                  |L1.3654|
;;;1390   				}
;;;1391   			else continue;
;;;1392   			}
;;;1393   	
;;;1394   	
;;;1395   		}
;;;1396   	}
;;;1397   
;;;1398   return out;
000e46  4640              MOV      r0,r8
;;;1399   }
000e48  e4e8              B        |L1.2076|
;;;1400   
                          ENDP

                  find_I_curve PROC
;;;1401   //-----------------------------------------------
;;;1402   short find_I_curve(signed short in)
000e4a  e92d41f0          PUSH     {r4-r8,lr}
;;;1403   {
;;;1404   short ii,i=0,out=0;
000e4e  2400              MOVS     r4,#0
000e50  4606              MOV      r6,r0                 ;1403
;;;1405   
;;;1406   ii=0;
;;;1407   
;;;1408   if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) >= in)
000e52  f44f757a          MOV      r5,#0x3e8
000e56  46a0              MOV      r8,r4                 ;1404
000e58  4627              MOV      r7,r4                 ;1406
000e5a  4628              MOV      r0,r5
000e5c  f7fffffe          BL       lc640_read_int
000e60  42b0              CMP      r0,r6
000e62  da28              BGE      |L1.3766|
                  |L1.3684|
;;;1409   	{
;;;1410   	out=0;
;;;1411   	}
;;;1412   else 
;;;1413   	{
;;;1414   	for (ii=0;ii<=200;ii+=10)
;;;1415   		{
;;;1416   		if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000e64  eb050047          ADD      r0,r5,r7,LSL #1
000e68  f7fffffe          BL       lc640_read_int
000e6c  42b0              CMP      r0,r6
000e6e  dc00              BGT      |L1.3698|
;;;1417   			{
;;;1418   			i=ii;
000e70  463c              MOV      r4,r7
                  |L1.3698|
000e72  370a              ADDS     r7,r7,#0xa            ;1414
000e74  b23f              SXTH     r7,r7                 ;1414
000e76  2fc8              CMP      r7,#0xc8              ;1414
000e78  ddf4              BLE      |L1.3684|
;;;1419   			}
;;;1420   		else continue;
;;;1421   		}
;;;1422   	
;;;1423   	if(i<200)
000e7a  2cc8              CMP      r4,#0xc8
000e7c  da0e              BGE      |L1.3740|
;;;1424   		{
;;;1425   		for (ii=i;ii<i+10;ii++)
000e7e  f104070a          ADD      r7,r4,#0xa
000e82  e008              B        |L1.3734|
                  |L1.3716|
;;;1426   			{
;;;1427   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000e84  eb050044          ADD      r0,r5,r4,LSL #1
000e88  f7fffffe          BL       lc640_read_int
000e8c  42b0              CMP      r0,r6
000e8e  dc00              BGT      |L1.3730|
;;;1428   				{
;;;1429   				out=ii;
000e90  46a0              MOV      r8,r4
                  |L1.3730|
000e92  1c64              ADDS     r4,r4,#1              ;1425
000e94  b224              SXTH     r4,r4                 ;1425
                  |L1.3734|
000e96  42bc              CMP      r4,r7                 ;1425
000e98  dbf4              BLT      |L1.3716|
000e9a  e00c              B        |L1.3766|
                  |L1.3740|
;;;1430   				}
;;;1431   			else continue;
;;;1432   			}
;;;1433   		}
;;;1434   	else 
;;;1435   		{
;;;1436   		for (ii=200;ii<=202;ii++)
000e9c  f05f04c8          MOVS.W   r4,#0xc8
                  |L1.3744|
;;;1437   			{
;;;1438   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000ea0  eb050044          ADD      r0,r5,r4,LSL #1
000ea4  f7fffffe          BL       lc640_read_int
000ea8  42b0              CMP      r0,r6
000eaa  dc00              BGT      |L1.3758|
;;;1439   				{
;;;1440   				out=ii;
000eac  46a0              MOV      r8,r4
                  |L1.3758|
000eae  1c64              ADDS     r4,r4,#1              ;1436
000eb0  b224              SXTH     r4,r4                 ;1436
000eb2  2cca              CMP      r4,#0xca              ;1436
000eb4  ddf4              BLE      |L1.3744|
                  |L1.3766|
;;;1441   				}
;;;1442   			else continue;
;;;1443   			}
;;;1444   		}
;;;1445   	}
;;;1446   return out;
000eb6  4640              MOV      r0,r8
;;;1447   }
000eb8  e4b0              B        |L1.2076|
;;;1448   
                          ENDP

                  viz_hndl PROC
;;;1450   //-----------------------------------------------
;;;1451   void viz_hndl(void)
000eba  e92d5ff0          PUSH     {r4-r12,lr}
;;;1452   {
;;;1453   if(ind==iK_viz_u)
000ebe  f8df92e4          LDR      r9,|L1.4516|
;;;1454   	{
;;;1455   	if(viz_stat==vsON)
;;;1456   		{
;;;1457   		viz_stat_cnt++;
;;;1458   		if(viz_stat_cnt>=10221)
;;;1459   			{
;;;1460   			viz_stat=vsOFF;
;;;1461   			lc640_write_int(EE_U_CURVE_IS_ON,0xabcd);
;;;1462   			//ind=iK_viz_sel;
;;;1463   			tree_down(0,0);
;;;1464   			}
;;;1465   		tst_pwm_i=1022;
;;;1466   		tst_pwm_u=(viz_stat_cnt/50)*5;
000ec2  4fb9              LDR      r7,|L1.4520|
000ec4  4eb9              LDR      r6,|L1.4524|
000ec6  f8990000          LDRB     r0,[r9,#0]            ;1453  ; a_ind
000eca  4cb9              LDR      r4,|L1.4528|
000ecc  2532              MOVS     r5,#0x32
000ece  f24278ed          MOV      r8,#0x27ed            ;1458
000ed2  f04f0a00          MOV      r10,#0                ;1460
000ed6  f2403bfe          MOV      r11,#0x3fe            ;1465
000eda  2846              CMP      r0,#0x46              ;1453
000edc  d12a              BNE      |L1.3892|
000ede  7830              LDRB     r0,[r6,#0]            ;1455  ; viz_stat
000ee0  2801              CMP      r0,#1                 ;1455
000ee2  d158              BNE      |L1.3990|
000ee4  8820              LDRH     r0,[r4,#0]            ;1457  ; viz_stat_cnt
000ee6  1c40              ADDS     r0,r0,#1              ;1457
000ee8  b200              SXTH     r0,r0                 ;1457
000eea  8020              STRH     r0,[r4,#0]            ;1457
000eec  4540              CMP      r0,r8                 ;1458
000eee  db09              BLT      |L1.3844|
000ef0  f886a000          STRB     r10,[r6,#0]           ;1460
000ef4  49af              LDR      r1,|L1.4532|
000ef6  20ac              MOVS     r0,#0xac              ;1461
000ef8  f7fffffe          BL       lc640_write_int
000efc  2100              MOVS     r1,#0                 ;1463
000efe  4608              MOV      r0,r1                 ;1463
000f00  f7fffffe          BL       tree_down
                  |L1.3844|
000f04  49ac              LDR      r1,|L1.4536|
000f06  f8a1b000          STRH     r11,[r1,#0]           ;1465
000f0a  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000f0e  fb91f0f5          SDIV     r0,r1,r5
;;;1467   		if(viz_stat_cnt%50==49)
000f12  fb051110          MLS      r1,r5,r0,r1
000f16  eb000280          ADD      r2,r0,r0,LSL #2       ;1466
000f1a  803a              STRH     r2,[r7,#0]            ;1466
000f1c  2931              CMP      r1,#0x31
000f1e  d109              BNE      |L1.3892|
;;;1468   			{
;;;1469   			lc640_write_int(SEKTOR_KURVE_U+((viz_stat_cnt/50)*2),load_U);
000f20  f44f71fa          MOV      r1,#0x1f4
000f24  eb010040          ADD      r0,r1,r0,LSL #1
000f28  49a4              LDR      r1,|L1.4540|
000f2a  b200              SXTH     r0,r0
000f2c  f9b11000          LDRSH    r1,[r1,#0]  ; load_U
000f30  f7fffffe          BL       lc640_write_int
                  |L1.3892|
;;;1470   			}
;;;1471   		}
;;;1472   	}
;;;1473   
;;;1474   if(ind==iK_viz_i)
000f34  f8990000          LDRB     r0,[r9,#0]  ; a_ind
000f38  2845              CMP      r0,#0x45
000f3a  d12c              BNE      |L1.3990|
;;;1475   	{
;;;1476   	if(viz_stat==vsON)
000f3c  7830              LDRB     r0,[r6,#0]  ; viz_stat
000f3e  2801              CMP      r0,#1
000f40  d129              BNE      |L1.3990|
;;;1477   		{
;;;1478   		viz_stat_cnt++;
000f42  8820              LDRH     r0,[r4,#0]  ; viz_stat_cnt
000f44  1c40              ADDS     r0,r0,#1
000f46  b200              SXTH     r0,r0
000f48  8020              STRH     r0,[r4,#0]
;;;1479   		if(viz_stat_cnt>=10221)
000f4a  4540              CMP      r0,r8
000f4c  db09              BLT      |L1.3938|
;;;1480   			{
;;;1481   			viz_stat=vsOFF;
000f4e  f886a000          STRB     r10,[r6,#0]
;;;1482   			lc640_write_int(EE_I_CURVE_IS_ON,0xabcd);
000f52  4998              LDR      r1,|L1.4532|
000f54  20ae              MOVS     r0,#0xae
000f56  f7fffffe          BL       lc640_write_int
;;;1483   			//ind=iK_viz_sel;
;;;1484   			tree_down(0,0);
000f5a  2100              MOVS     r1,#0
000f5c  4608              MOV      r0,r1
000f5e  f7fffffe          BL       tree_down
                  |L1.3938|
;;;1485   			}
;;;1486   		tst_pwm_u=1022;
000f62  f8a7b000          STRH     r11,[r7,#0]
;;;1487   		tst_pwm_i=(viz_stat_cnt/50)*5;
000f66  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000f6a  4b93              LDR      r3,|L1.4536|
000f6c  fb91f0f5          SDIV     r0,r1,r5
;;;1488   		if(viz_stat_cnt%50==49)
000f70  fb051110          MLS      r1,r5,r0,r1
000f74  eb000280          ADD      r2,r0,r0,LSL #2       ;1487
000f78  801a              STRH     r2,[r3,#0]            ;1487
000f7a  2931              CMP      r1,#0x31
000f7c  d10b              BNE      |L1.3990|
;;;1489   			{
;;;1490   			lc640_write_int(SEKTOR_KURVE_I+((viz_stat_cnt/50)*2),load_I);
000f7e  f44f717a          MOV      r1,#0x3e8
000f82  eb010040          ADD      r0,r1,r0,LSL #1
000f86  498e              LDR      r1,|L1.4544|
000f88  b200              SXTH     r0,r0
000f8a  f9b11000          LDRSH    r1,[r1,#0]  ; load_I
000f8e  e8bd5ff0          POP      {r4-r12,lr}
000f92  f7ffbffe          B.W      lc640_write_int
                  |L1.3990|
;;;1491   			}
;;;1492   		}
;;;1493   	}
;;;1494   }
000f96  e5ce              B        |L1.2870|
;;;1495   
                          ENDP

                  bps_hndl PROC
;;;1498   //-----------------------------------------------
;;;1499   void bps_hndl(void) /*ГЦ, 10 раз в секунду*/
000f98  e92d5ffc          PUSH     {r2-r12,lr}
;;;1500   {
;;;1501   char /*ptr__,*/i;
;;;1502   
;;;1503   if((REV_IS_ON)&&(AVT_REV_IS_ON)) {
000f9c  4889              LDR      r0,|L1.4548|
;;;1504   	if(work_stat==wsGS) {
000f9e  f8dfa1e0          LDR      r10,|L1.4480|
000fa2  8800              LDRH     r0,[r0,#0]            ;1503  ; REV_IS_ON
000fa4  b328              CBZ      r0,|L1.4082|
000fa6  4888              LDR      r0,|L1.4552|
000fa8  8800              LDRH     r0,[r0,#0]            ;1503  ; AVT_REV_IS_ON
000faa  b310              CBZ      r0,|L1.4082|
;;;1505   		if(REV_STAT==rsFF) 	I_ug_temp=AVT_REV_I_NOM_FF;
000fac  4887              LDR      r0,|L1.4556|
000fae  f89a3000          LDRB     r3,[r10,#0]           ;1504  ; work_stat
000fb2  f9b01000          LDRSH    r1,[r0,#0]
000fb6  4886              LDR      r0,|L1.4560|
000fb8  2b01              CMP      r3,#1                 ;1504
000fba  7800              LDRB     r0,[r0,#0]
000fbc  d007              BEQ      |L1.4046|
;;;1506   		else if (REV_STAT==rsREW) I_ug_temp=AVT_REV_I_NOM_REW;
;;;1507   	} else if (work_stat==wsPS) {
;;;1508   		if(REV_STAT==rsFF) 	U_up_temp=AVT_REV_U_NOM_FF;
000fbe  4a85              LDR      r2,|L1.4564|
000fc0  2b02              CMP      r3,#2                 ;1507
000fc2  f9b22000          LDRSH    r2,[r2,#0]
000fc6  d00b              BEQ      |L1.4064|
;;;1509   		else if (REV_STAT==rsREW) U_up_temp=AVT_REV_U_NOM_REW;
;;;1510   	} else {
;;;1511   		U_up_temp=AVT_REV_U_NOM_FF;
000fc8  4883              LDR      r0,|L1.4568|
000fca  8002              STRH     r2,[r0,#0]
;;;1512   		I_ug_temp=AVT_REV_I_NOM_FF;
000fcc  e003              B        |L1.4054|
                  |L1.4046|
000fce  2801              CMP      r0,#1                 ;1505
000fd0  d001              BEQ      |L1.4054|
000fd2  b110              CBZ      r0,|L1.4058|
000fd4  e023              B        |L1.4126|
                  |L1.4054|
000fd6  4881              LDR      r0,|L1.4572|
000fd8  e020              B        |L1.4124|
                  |L1.4058|
000fda  4881              LDR      r0,|L1.4576|
000fdc  8801              LDRH     r1,[r0,#0]            ;1506  ; AVT_REV_I_NOM_REW
000fde  e7fa              B        |L1.4054|
                  |L1.4064|
000fe0  2801              CMP      r0,#1                 ;1508
000fe2  d001              BEQ      |L1.4072|
000fe4  b118              CBZ      r0,|L1.4078|
000fe6  e01a              B        |L1.4126|
                  |L1.4072|
000fe8  487b              LDR      r0,|L1.4568|
000fea  8002              STRH     r2,[r0,#0]            ;1508
000fec  e017              B        |L1.4126|
                  |L1.4078|
000fee  487d              LDR      r0,|L1.4580|
000ff0  e012              B        |L1.4120|
                  |L1.4082|
;;;1513   	}
;;;1514   } else {
;;;1515   
;;;1516   if(fiks_stat_I==2)I_ug_temp=I_ug3;
000ff2  487d              LDR      r0,|L1.4584|
000ff4  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_I
000ff8  2802              CMP      r0,#2
000ffa  d068              BEQ      |L1.4302|
;;;1517   else if(fiks_stat_I==1)I_ug_temp=I_ug2;
000ffc  2801              CMP      r0,#1
000ffe  d068              BEQ      |L1.4306|
;;;1518   else I_ug_temp=I_ug;
001000  487a              LDR      r0,|L1.4588|
                  |L1.4098|
001002  8801              LDRH     r1,[r0,#0]            ;1517  ; I_ug2
001004  4875              LDR      r0,|L1.4572|
001006  8001              STRH     r1,[r0,#0]            ;1517
;;;1519   
;;;1520   if(fiks_stat_U==2)U_up_temp=U_up3;
001008  4879              LDR      r0,|L1.4592|
00100a  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_U
00100e  2802              CMP      r0,#2
001010  d061              BEQ      |L1.4310|
;;;1521   	else if(fiks_stat_U==1)U_up_temp=U_up2;
001012  2801              CMP      r0,#1
001014  d061              BEQ      |L1.4314|
;;;1522   	else U_up_temp=U_up;
001016  4877              LDR      r0,|L1.4596|
                  |L1.4120|
001018  8801              LDRH     r1,[r0,#0]            ;1521  ; U_up2
00101a  486f              LDR      r0,|L1.4568|
                  |L1.4124|
00101c  8001              STRH     r1,[r0,#0]            ;1521
                  |L1.4126|
;;;1523   
;;;1524   }
;;;1525   	
;;;1526   gran(&I_ug_temp,0/*I_MIN_IPS*/,I_MAX_IPS);
00101e  4876              LDR      r0,|L1.4600|
001020  2100              MOVS     r1,#0
001022  f9b02000          LDRSH    r2,[r0,#0]  ; I_MAX_IPS
001026  486d              LDR      r0,|L1.4572|
001028  f7fffffe          BL       gran
;;;1527   gran(&U_up_temp,0/*U_MIN*/,U_MAX);
00102c  4873              LDR      r0,|L1.4604|
00102e  2100              MOVS     r1,#0
001030  f9b02000          LDRSH    r2,[r0,#0]  ; U_MAX
001034  4868              LDR      r0,|L1.4568|
001036  f7fffffe          BL       gran
;;;1528   
;;;1529   if(sh_cnt0<10) {
00103a  4e71              LDR      r6,|L1.4608|
00103c  2500              MOVS     r5,#0                 ;1503
00103e  f04f0901          MOV      r9,#1                 ;1504
001042  7970              LDRB     r0,[r6,#5]  ; sh_cnt0
001044  280a              CMP      r0,#0xa
001046  d212              BCS      |L1.4206|
;;;1530   	sh_cnt0++;
001048  1c40              ADDS     r0,r0,#1
00104a  b2c0              UXTB     r0,r0
00104c  7170              STRB     r0,[r6,#5]
;;;1531   	if(sh_cnt0>=10) {
00104e  280a              CMP      r0,#0xa
001050  d30d              BCC      |L1.4206|
;;;1532   		sh_cnt0=0;
001052  7175              STRB     r5,[r6,#5]
;;;1533   		b1Hz_sh=1;
001054  f8869006          STRB     r9,[r6,#6]
;;;1534   		if(sh_cnt1<5) {
001058  79f1              LDRB     r1,[r6,#7]  ; sh_cnt1
00105a  4648              MOV      r0,r9                 ;1533
00105c  2905              CMP      r1,#5
00105e  d206              BCS      |L1.4206|
;;;1535   			sh_cnt1++;
001060  1c49              ADDS     r1,r1,#1
001062  b2c9              UXTB     r1,r1
001064  71f1              STRB     r1,[r6,#7]
;;;1536   			if(sh_cnt1>=5) {
001066  2905              CMP      r1,#5
001068  d301              BCC      |L1.4206|
;;;1537   			 	sh_cnt1=0;
00106a  71f5              STRB     r5,[r6,#7]
;;;1538   				bPRECESSION_REG=1;
00106c  72f0              STRB     r0,[r6,#0xb]
                  |L1.4206|
;;;1539   			}
;;;1540   		}
;;;1541   	}
;;;1542   }
;;;1543   
;;;1544   if(ind==iK_load)
00106e  484d              LDR      r0,|L1.4516|
;;;1545   	{
;;;1546   	if(sub_ind==0)		 
;;;1547   		{
;;;1548   		cntrl_stat_U=1022;
;;;1549   		cntrl_stat_I=1022;
;;;1550   		bps_stat=stON;
001070  4b64              LDR      r3,|L1.4612|
;;;1551   
;;;1552   		for(i=0;i<NUMIST;i++)
;;;1553   			{
;;;1554   			bps[i]._vol_u=1022;
;;;1555   			bps[i]._vol_i=1022;
;;;1556   			bps[i]._flags_tu=0;
;;;1557   			}
;;;1558   		}
;;;1559   	else if(sub_ind==1)
;;;1560   		{
;;;1561   		if(phase==0)
001072  4965              LDR      r1,|L1.4616|
001074  f890c000          LDRB     r12,[r0,#0]           ;1544  ; a_ind
001078  4c64              LDR      r4,|L1.4620|
00107a  4f65              LDR      r7,|L1.4624|
00107c  f24038fe          MOV      r8,#0x3fe             ;1548
001080  f1bc0f31          CMP      r12,#0x31             ;1544
001084  d02b              BEQ      |L1.4318|
;;;1562   			{
;;;1563     			cntrl_stat_U=0;
;;;1564   			cntrl_stat_I=0;
;;;1565   			bps_stat=stOFF;
;;;1566   
;;;1567   			for(i=0;i<NUMIST;i++)
;;;1568   				{
;;;1569   				bps[i]._vol_u=0;
;;;1570   				bps[i]._vol_i=0;
;;;1571   				bps[i]._flags_tu=1;
;;;1572   				}
;;;1573   			}
;;;1574   		else if(phase==1)
;;;1575   			{
;;;1576     			cntrl_stat_U=1022;
;;;1577   			cntrl_stat_I=1022;
;;;1578   			bps_stat=stON;
;;;1579   
;;;1580   			for(i=0;i<NUMIST;i++)
;;;1581   				{
;;;1582   				bps[i]._vol_u=1022;
;;;1583   				bps[i]._vol_i=1022;
;;;1584   				bps[i]._flags_tu=0;
;;;1585   				}
;;;1586   			}
;;;1587   		}
;;;1588   	else 
;;;1589   		{
;;;1590   		bps_stat=stOFF;
;;;1591   
;;;1592   		bps[0]._vol_u=0;
;;;1593   		bps[0]._vol_i=0;
;;;1594   		bps[0]._flags_tu=1;
;;;1595   		}
;;;1596   	}
;;;1597   else if((ind==iK_bps)||(ind==iK_bps_v2))
001086  f1bc0f2b          CMP      r12,#0x2b
00108a  d071              BEQ      |L1.4464|
00108c  f1bc0f2c          CMP      r12,#0x2c
001090  d06e              BEQ      |L1.4464|
;;;1598   	{
;;;1599   	if((sub_ind==0)||(sub_ind==3))
;;;1600   		{
;;;1601   		cntrl_stat_U=1022;
;;;1602   		cntrl_stat_I=1022;
;;;1603   		bps_stat=stON;
;;;1604   
;;;1605   		bps[0]._vol_u=0;
;;;1606   		bps[0]._vol_i=0;
;;;1607   		bps[0]._flags_tu=1;
;;;1608   
;;;1609   		bps[1]._vol_u=0;
;;;1610   		bps[1]._vol_i=0;
;;;1611   		bps[1]._flags_tu=1;
;;;1612   
;;;1613   		bps[1]._vol_u=0;
;;;1614   		bps[1]._vol_i=0;
;;;1615   		bps[1]._flags_tu=1;
;;;1616   
;;;1617   		bps[2]._vol_u=0;
;;;1618   		bps[2]._vol_i=0;
;;;1619   		bps[2]._flags_tu=1;
;;;1620   
;;;1621   		bps[3]._vol_u=0;
;;;1622   		bps[3]._vol_i=0;
;;;1623   		bps[3]._flags_tu=1;
;;;1624   
;;;1625   		bps[4]._vol_u=0;
;;;1626   		bps[4]._vol_i=0;
;;;1627   		bps[4]._flags_tu=1;
;;;1628   
;;;1629   		bps[5]._vol_u=0;
;;;1630   		bps[5]._vol_i=0;
;;;1631   		bps[5]._flags_tu=1;
;;;1632   
;;;1633   		bps[6]._vol_u=0;
;;;1634   		bps[6]._vol_i=0;
;;;1635   		bps[6]._flags_tu=1;
;;;1636   
;;;1637   		bps[7]._vol_u=0;
;;;1638   		bps[7]._vol_i=0;
;;;1639   		bps[7]._flags_tu=1;
;;;1640   
;;;1641   		bps[8]._vol_u=0;
;;;1642   		bps[8]._vol_i=0;
;;;1643   		bps[8]._flags_tu=1;
;;;1644   		
;;;1645   		bps[9]._vol_u=0;
;;;1646   		bps[9]._vol_i=0;
;;;1647   		bps[9]._flags_tu=1;
;;;1648   
;;;1649   		bps[10]._vol_u=0;
;;;1650   		bps[10]._vol_i=0;
;;;1651   		bps[10]._flags_tu=1;
;;;1652   
;;;1653   		bps[11]._vol_u=0;
;;;1654   		bps[11]._vol_i=0;
;;;1655   		bps[11]._flags_tu=1;
;;;1656    		
;;;1657   		bps[sub_ind1]._vol_u=1022;
;;;1658   		bps[sub_ind1]._vol_i=1022;
;;;1659   		bps[sub_ind1]._flags_tu=0;
;;;1660   		}
;;;1661   
;;;1662   	else if(sub_ind==6)
;;;1663   		{
;;;1664   		if(phase==0)
;;;1665   			{
;;;1666     			cntrl_stat_U=0;
;;;1667   			cntrl_stat_I=0;
;;;1668   			bps_stat=stOFF;
;;;1669   			bps[0]._vol_u=0;
;;;1670   			bps[0]._vol_i=0;
;;;1671   			bps[0]._flags_tu=1;
;;;1672   	
;;;1673   			bps[1]._vol_u=0;
;;;1674   			bps[1]._vol_i=0;
;;;1675   			bps[1]._flags_tu=1;
;;;1676   	
;;;1677   			bps[1]._vol_u=0;
;;;1678   			bps[1]._vol_i=0;
;;;1679   			bps[1]._flags_tu=1;
;;;1680   	
;;;1681   			bps[2]._vol_u=0;
;;;1682   			bps[2]._vol_i=0;
;;;1683   			bps[2]._flags_tu=1;
;;;1684   	
;;;1685   			bps[3]._vol_u=0;
;;;1686   			bps[3]._vol_i=0;
;;;1687   			bps[3]._flags_tu=1;
;;;1688   	
;;;1689   			bps[4]._vol_u=0;
;;;1690   			bps[4]._vol_i=0;
;;;1691   			bps[4]._flags_tu=1;
;;;1692   	
;;;1693   			bps[5]._vol_u=0;
;;;1694   			bps[5]._vol_i=0;
;;;1695   			bps[5]._flags_tu=1;
;;;1696   	
;;;1697   			bps[6]._vol_u=0;
;;;1698   			bps[6]._vol_i=0;
;;;1699   			bps[6]._flags_tu=1;
;;;1700   	
;;;1701   			bps[7]._vol_u=0;
;;;1702   			bps[7]._vol_i=0;
;;;1703   			bps[7]._flags_tu=1;
;;;1704   	
;;;1705   			bps[8]._vol_u=0;
;;;1706   			bps[8]._vol_i=0;
;;;1707   			bps[8]._flags_tu=1;
;;;1708   			
;;;1709   			bps[9]._vol_u=0;
;;;1710   			bps[9]._vol_i=0;
;;;1711   			bps[9]._flags_tu=1;
;;;1712   	
;;;1713   			bps[10]._vol_u=0;
;;;1714   			bps[10]._vol_i=0;
;;;1715   			bps[10]._flags_tu=1;
;;;1716   	
;;;1717   			bps[11]._vol_u=0;
;;;1718   			bps[11]._vol_i=0;
;;;1719   			bps[11]._flags_tu=1;
;;;1720   
;;;1721   			}
;;;1722   		else if(phase==1)
;;;1723   			{
;;;1724     			cntrl_stat_U=1022;
;;;1725   			cntrl_stat_I=1022;
;;;1726   			bps_stat=stON;
;;;1727   
;;;1728   			bps[0]._vol_u=0;
;;;1729   			bps[0]._vol_i=0;
;;;1730   			bps[0]._flags_tu=1;
;;;1731   	
;;;1732   			bps[1]._vol_u=0;
;;;1733   			bps[1]._vol_i=0;
;;;1734   			bps[1]._flags_tu=1;
;;;1735   	
;;;1736   			bps[1]._vol_u=0;
;;;1737   			bps[1]._vol_i=0;
;;;1738   			bps[1]._flags_tu=1;
;;;1739   	
;;;1740   			bps[2]._vol_u=0;
;;;1741   			bps[2]._vol_i=0;
;;;1742   			bps[2]._flags_tu=1;
;;;1743   	
;;;1744   			bps[3]._vol_u=0;
;;;1745   			bps[3]._vol_i=0;
;;;1746   			bps[3]._flags_tu=1;
;;;1747   	
;;;1748   			bps[4]._vol_u=0;
;;;1749   			bps[4]._vol_i=0;
;;;1750   			bps[4]._flags_tu=1;
;;;1751   	
;;;1752   			bps[5]._vol_u=0;
;;;1753   			bps[5]._vol_i=0;
;;;1754   			bps[5]._flags_tu=1;
;;;1755   	
;;;1756   			bps[6]._vol_u=0;
;;;1757   			bps[6]._vol_i=0;
;;;1758   			bps[6]._flags_tu=1;
;;;1759   	
;;;1760   			bps[7]._vol_u=0;
;;;1761   			bps[7]._vol_i=0;
;;;1762   			bps[7]._flags_tu=1;
;;;1763   	
;;;1764   			bps[8]._vol_u=0;
;;;1765   			bps[8]._vol_i=0;
;;;1766   			bps[8]._flags_tu=1;
;;;1767   			
;;;1768   			bps[9]._vol_u=0;
;;;1769   			bps[9]._vol_i=0;
;;;1770   			bps[9]._flags_tu=1;
;;;1771   	
;;;1772   			bps[10]._vol_u=0;
;;;1773   			bps[10]._vol_i=0;
;;;1774   			bps[10]._flags_tu=1;
;;;1775   	
;;;1776   			bps[11]._vol_u=0;
;;;1777   			bps[11]._vol_i=0;
;;;1778   			bps[11]._flags_tu=1;
;;;1779   
;;;1780   
;;;1781   
;;;1782   			bps[sub_ind1]._vol_u=1022;
;;;1783   			bps[sub_ind1]._vol_i=1022;
;;;1784   			bps[sub_ind1]._flags_tu=0;
;;;1785   			}
;;;1786   		}
;;;1787   	else 
;;;1788   		{
;;;1789   		bps_stat=stOFF;
;;;1790   
;;;1791   		bps[0]._vol_u=0;
;;;1792   		bps[0]._vol_i=0;
;;;1793   		bps[0]._flags_tu=1;
;;;1794   
;;;1795   		bps[1]._vol_u=0;
;;;1796   		bps[1]._vol_i=0;
;;;1797   		bps[1]._flags_tu=1;
;;;1798   
;;;1799   		bps[1]._vol_u=0;
;;;1800   		bps[1]._vol_i=0;
;;;1801   		bps[1]._flags_tu=1;
;;;1802   
;;;1803   		bps[2]._vol_u=0;
;;;1804   		bps[2]._vol_i=0;
;;;1805   		bps[2]._flags_tu=1;
;;;1806   
;;;1807   		bps[3]._vol_u=0;
;;;1808   		bps[3]._vol_i=0;
;;;1809   		bps[3]._flags_tu=1;
;;;1810   
;;;1811   		bps[4]._vol_u=0;
;;;1812   		bps[4]._vol_i=0;
;;;1813   		bps[4]._flags_tu=1;
;;;1814   
;;;1815   		bps[5]._vol_u=0;
;;;1816   		bps[5]._vol_i=0;
;;;1817   		bps[5]._flags_tu=1;
;;;1818   
;;;1819   		bps[6]._vol_u=0;
;;;1820   		bps[6]._vol_i=0;
;;;1821   		bps[6]._flags_tu=1;
;;;1822   
;;;1823   		bps[7]._vol_u=0;
;;;1824   		bps[7]._vol_i=0;
;;;1825   		bps[7]._flags_tu=1;
;;;1826   
;;;1827   		bps[8]._vol_u=0;
;;;1828   		bps[8]._vol_i=0;
;;;1829   		bps[8]._flags_tu=1;
;;;1830   		
;;;1831   		bps[9]._vol_u=0;
;;;1832   		bps[9]._vol_i=0;
;;;1833   		bps[9]._flags_tu=1;
;;;1834   
;;;1835   		bps[10]._vol_u=0;
;;;1836   		bps[10]._vol_i=0;
;;;1837   		bps[10]._flags_tu=1;
;;;1838   
;;;1839   		bps[11]._vol_u=0;
;;;1840   		bps[11]._vol_i=0;
;;;1841   		bps[11]._flags_tu=1;
;;;1842   
;;;1843   		}
;;;1844   	}
;;;1845   
;;;1846   else if(ind==iTst_pwm)
;;;1847   	{
;;;1848   	char i;
;;;1849   
;;;1850   	for(i=0;i<NUMIST;i++)
;;;1851   		{
;;;1852   		bps[i]._vol_u=tst_pwm_u;
001092  4a45              LDR      r2,|L1.4520|
;;;1853   		bps[i]._vol_i=tst_pwm_i;
001094  4948              LDR      r1,|L1.4536|
001096  f1bc0f34          CMP      r12,#0x34             ;1846
00109a  d06a              BEQ      |L1.4466|
;;;1854   		bps[i]._flags_tu=0;
;;;1855   		}
;;;1856   	}
;;;1857   
;;;1858   else if(ind==iK_viz_u)
;;;1859   	{
;;;1860   	char i;
;;;1861   
;;;1862   	if(viz_stat!=vsON)
00109c  4843              LDR      r0,|L1.4524|
00109e  f1bc0f46          CMP      r12,#0x46             ;1858
0010a2  d067              BEQ      |L1.4468|
;;;1863   		{
;;;1864   		for(i=0;i<NUMIST;i++)
;;;1865   			{
;;;1866   			bps[i]._vol_u=1022;
;;;1867   			bps[i]._vol_i=1022;
;;;1868   			bps[i]._flags_tu=0;
;;;1869   			}
;;;1870   		}
;;;1871   	else 
;;;1872   		{
;;;1873   		for(i=0;i<NUMIST;i++)
;;;1874   			{
;;;1875   			bps[i]._vol_u=tst_pwm_u;
;;;1876   			bps[i]._vol_i=tst_pwm_i;
;;;1877   			bps[i]._flags_tu=0;
;;;1878   			}
;;;1879   		}
;;;1880   	}
;;;1881   
;;;1882   else if(ind==iK_viz_i)
0010a4  f1bc0f45          CMP      r12,#0x45
0010a8  d065              BEQ      |L1.4470|
;;;1883   	{
;;;1884   	char i;
;;;1885   
;;;1886   	if(viz_stat!=vsON)
;;;1887   		{
;;;1888   		for(i=0;i<NUMIST;i++)
;;;1889   			{
;;;1890   			bps[i]._vol_u=1022;
;;;1891   			bps[i]._vol_i=1022;
;;;1892   			bps[i]._flags_tu=0;
;;;1893   			}
;;;1894   		}
;;;1895   	else 
;;;1896   		{
;;;1897   		for(i=0;i<NUMIST;i++)
;;;1898   			{
;;;1899   			bps[i]._vol_u=tst_pwm_u;
;;;1900   			bps[i]._vol_i=tst_pwm_i;
;;;1901   			bps[i]._flags_tu=0;
;;;1902   			}
;;;1903   		}
;;;1904   	}
;;;1905   
;;;1906   else if(work_stat==wsGS)
0010aa  f89a0000          LDRB     r0,[r10,#0]  ; work_stat
;;;1907   	{
;;;1908   	signed long temp_SL_U,temp_SL_I;
;;;1909   	
;;;1910   	if((CURR_FADE_IN) && (time_proc<CURR_FADE_IN))
;;;1911   		{
;;;1912   		signed long temp_SL_;
;;;1913   		
;;;1914   		temp_SL_=	(signed long)I_ug_temp;
;;;1915   		temp_SL_*= (signed long)time_proc;
;;;1916   		temp_SL_/= (signed long)CURR_FADE_IN;
;;;1917   
;;;1918   		//I_ug_temp= (signed short)((signed long)I_ug_temp*(signed long)time_proc)/(signed long)CURR_FADE_IN;
;;;1919   
;;;1920   		I_ug_temp= (signed short)temp_SL_;
;;;1921   		}	
;;;1922   	
;;;1923   	if(b1Hz_sh) {
;;;1924   
;;;1925   
;;;1926   
;;;1927   
;;;1928   		if(!((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF)))) {
;;;1929   	 		if(load_I<I_ug_temp)_x_++;
;;;1930      			else if(load_I>I_ug_temp)_x_--;
;;;1931   			//gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;1932   			gran(&_x_,-50,50); 
;;;1933   
;;;1934   	 		if(load_U<U_maxg)_xu_++;
0010ae  f8dfa164          LDR      r10,|L1.4628|
0010b2  f8dfb164          LDR      r11,|L1.4632|
0010b6  2801              CMP      r0,#1                 ;1906
0010b8  d05e              BEQ      |L1.4472|
;;;1935      			else if(load_U>U_maxg)_xu_--;
;;;1936   			//gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;1937   			gran(&_xu_,-50,50); 
;;;1938   		}
;;;1939   	}
;;;1940   
;;;1941   	temp_SL_U=1022;
;;;1942   	temp_SL_U*=(signed long)U_maxg;
;;;1943   	temp_SL_U/=(signed long)U_MAX;
;;;1944   
;;;1945   	temp_SL_I=1022;
;;;1946   	//temp_SL_I*=NUMIST;
;;;1947   	temp_SL_I*=(signed long)I_ug_temp;
;;;1948   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1949   
;;;1950   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1951   		{
;;;1952   		temp_SL_U=find_U_curve(U_maxg)*5;
;;;1953   		}
;;;1954   	 
;;;1955   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1956   		{
;;;1957   		temp_SL_I=find_I_curve(I_ug_temp)*5;
;;;1958   		}
;;;1959   
;;;1960   	for(i=0;i<NUMIST;i++)
;;;1961   		{
;;;1962   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;1963   		 	bps[i]._vol_u=0;
;;;1964   			bps[i]._vol_i=0;
;;;1965   			bps[i]._flags_tu=1;
;;;1966   		} else {
;;;1967   			bps[i]._vol_u=(short)temp_SL_U + _xu_/*+bps[i]._xu_*/;
;;;1968   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1969   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1970   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1971   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1972   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1973   			bps[i]._flags_tu=0;
;;;1974   		}
;;;1975   	}
;;;1976   
;;;1977   	}
;;;1978   else if(work_stat==wsPS)
0010ba  2802              CMP      r0,#2
0010bc  d05d              BEQ      |L1.4474|
;;;1979   	{
;;;1980   	signed long temp_SL_U,temp_SL_I;
;;;1981   	/*	U_up_d=U_up/100;
;;;1982   	if(U_up_d<5) U_up_d=5;
;;;1983   	*/
;;;1984   	if(load_U_>5)bU_VALID=1;
;;;1985   	else bU_VALID=0;
;;;1986   
;;;1987   	temp_SL_U=(long)U_up_temp/100L;
;;;1988   	if(temp_SL_U<=0)temp_SL_U=1;
;;;1989   	if((abs(load_U_-U_up_temp))<(signed short)temp_SL_U) bU_VALID_VALID=1;
;;;1990   	else bU_VALID_VALID=0;
;;;1991   /*	if( (load_U_>(U_up-U_up_d))&&(load_U_<(U_up+U_up_d)) )bFAST_REG=0;
;;;1992   	else bFAST_REG=1;*/
;;;1993   
;;;1994   	bFAST_REG=0;
;;;1995   
;;;1996   	if(bU_VALID_VALID)
;;;1997   		{
;;;1998   		if(bPRECESSION_REG)
;;;1999   			{
;;;2000   			bPRECESSION_REG=0;
;;;2001   			if(load_U_<U_up_temp)_xu_++;
;;;2002      			else if(load_U_>U_up_temp)_xu_--;
;;;2003   			gran(&_xu_,-50,50);
;;;2004   			}
;;;2005   		}
;;;2006   	else if((b1Hz_sh&&bU_VALID)||(bFAST_REG&&bU_VALID))
;;;2007   		{
;;;2008   	 	if(load_I<I_maxp)_x_++;
;;;2009      		else if(load_I>I_maxp)_x_--;
;;;2010   		gran(&_x_,-50,50); 
;;;2011   
;;;2012   	 	if(load_U_<U_up_temp)_xu_++;
;;;2013      		else if(load_U_>U_up_temp)_xu_--;
;;;2014   		gran(&_xu_,-50,50); 
;;;2015   
;;;2016   		}
;;;2017   
;;;2018   
;;;2019   	temp_SL_U=900;
;;;2020   	temp_SL_U*=(signed long)U_up_temp;
;;;2021   	temp_SL_U/=(signed long)U_MAX;
;;;2022   	temp_SL_U+=50;
;;;2023   
;;;2024   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;2025   		{	
;;;2026   		temp_SL_U=find_U_curve(U_up_temp)*5;
;;;2027   		}
;;;2028   	//temp_SL_U=lc640_read_int(SEKTOR_KURVE_U+(temp_SL_U*2));
;;;2029   	 
;;;2030   	temp_SL_I=1022;
;;;2031   	//temp_SL_I*=NUMIST;
;;;2032   	temp_SL_I*=(signed long)I_maxp;
;;;2033   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;2034   
;;;2035   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;2036   		{
;;;2037   		temp_SL_I=find_I_curve(I_maxp)*5;
;;;2038   		}
;;;2039   
;;;2040   	for(i=0;i<NUMIST;i++) {
;;;2041   
;;;2042   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;2043   		 	bps[i]._vol_u=0;
;;;2044   			bps[i]._vol_i=0;
;;;2045   			bps[i]._flags_tu=1;
;;;2046   		} else {
;;;2047   			bps[i]._vol_u=(short)temp_SL_U + _xu_+bps[i]._xu_;
;;;2048   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;2049   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;2050   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;2051   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;2052   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;2053   			bps[i]._flags_tu=0;
;;;2054   		}
;;;2055   	}
;;;2056   
;;;2057   
;;;2058   /*	for(i=0;i<NUMIST;i++)
;;;2059   		{
;;;2060   		bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;2061   	 	bps[i]._vol_i=((short)temp_SL_I+ _x_);//NUMIST;
;;;2062   		bps[i]._flags_tu=0;
;;;2063   		}*/
;;;2064   	//bps[0]._vol_i+= _x_;
;;;2065   	plazma_vol_u_0=temp_SL_U;
;;;2066   	plazma_vol_u_1=bps[0]._vol_u;
;;;2067   	}
;;;2068   
;;;2069   else if(work_stat==wsCAP)
0010be  2803              CMP      r0,#3
0010c0  d05c              BEQ      |L1.4476|
;;;2070   	{
;;;2071   	signed long temp_SL_U=0,temp_SL_I=0;
;;;2072   
;;;2073   
;;;2074   
;;;2075   
;;;2076   
;;;2077   
;;;2078   	if(b1Hz_sh) {
;;;2079   		if(!bOFF) {
;;;2080   	 		if(load_I<(CAP_WRK_CURR*10))_x_++;
;;;2081      			else if(load_I>(CAP_WRK_CURR*10))_x_--;
;;;2082   			gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;2083   			gran(&_x_,-50,50); 
;;;2084   
;;;2085   	 		if(load_U<(CAP_MAX_VOLT*10))_xu_++;
;;;2086      			else if(load_U>(CAP_MAX_VOLT*10))_xu_--;
;;;2087   			gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;2088   			gran(&_xu_,-50,50); 
;;;2089   		}
;;;2090   	}
;;;2091   
;;;2092   	temp_SL_U=10220L;
;;;2093   	temp_SL_U*=(signed long)CAP_MAX_VOLT;
;;;2094   	temp_SL_U/=(signed long)U_MAX;
;;;2095   
;;;2096   	temp_SL_I=10220L;
;;;2097   	//temp_SL_I*=NUMIST;
;;;2098   	temp_SL_I*=(signed long)CAP_WRK_CURR;
;;;2099   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;2100   
;;;2101   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;2102   		{
;;;2103   		temp_SL_U=find_U_curve(CAP_MAX_VOLT*10)*5;
;;;2104   		}
;;;2105   	 
;;;2106   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;2107   		{
;;;2108   		temp_SL_I=find_I_curve(CAP_WRK_CURR*10)*5;
;;;2109   		} 
;;;2110   
;;;2111   //temp_SL_U=1000;
;;;2112   
;;;2113   	for(i=0;i<NUMIST;i++)
;;;2114   		{
;;;2115   		if(bOFF) {
;;;2116   		 	bps[i]._vol_u=0;
;;;2117   			bps[i]._vol_i=0;
;;;2118   			bps[i]._flags_tu=1;
;;;2119   		} else {
;;;2120   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;2121   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;2122   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;2123   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;2124   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;2125   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;2126   			bps[i]._flags_tu=0;
;;;2127   		}
;;;2128   	}
;;;2129   
;;;2130   	}
;;;2131   else 
;;;2132   	{
;;;2133   	bps_stat=stOFF;
0010c2  701d              STRB     r5,[r3,#0]
;;;2134   
;;;2135   	for(i=0;i<NUMIST;i++)
0010c4  2000              MOVS     r0,#0
0010c6  464b              MOV      r3,r9                 ;1504
0010c8  f9b71000          LDRSH    r1,[r7,#0]            ;1552
0010cc  e3fc              B        |L1.6344|
                  |L1.4302|
0010ce  4853              LDR      r0,|L1.4636|
0010d0  e797              B        |L1.4098|
                  |L1.4306|
0010d2  4853              LDR      r0,|L1.4640|
0010d4  e795              B        |L1.4098|
                  |L1.4310|
0010d6  4853              LDR      r0,|L1.4644|
0010d8  e79e              B        |L1.4120|
                  |L1.4314|
0010da  4853              LDR      r0,|L1.4648|
0010dc  e79c              B        |L1.4120|
                  |L1.4318|
0010de  f9900001          LDRSB    r0,[r0,#1]            ;1546  ; a_ind
0010e2  b138              CBZ      r0,|L1.4340|
0010e4  2801              CMP      r0,#1                 ;1559
0010e6  d01e              BEQ      |L1.4390|
0010e8  701d              STRB     r5,[r3,#0]            ;1590
0010ea  62e5              STR      r5,[r4,#0x2c]         ;1593  ; bps
0010ec  6325              STR      r5,[r4,#0x30]         ;1594  ; bps
0010ee  f8849028          STRB     r9,[r4,#0x28]         ;1594
0010f2  e20b              B        |L1.5388|
                  |L1.4340|
0010f4  f8a68014          STRH     r8,[r6,#0x14]         ;1548
0010f8  f8a68016          STRH     r8,[r6,#0x16]         ;1549
0010fc  f8839000          STRB     r9,[r3,#0]            ;1550
001100  4640              MOV      r0,r8                 ;1548
001102  2100              MOVS     r1,#0                 ;1552
001104  f9b72000          LDRSH    r2,[r7,#0]            ;1552
001108  e00a              B        |L1.4384|
00110a  bf00              NOP                            ;1554
                  |L1.4364|
00110c  eb010341          ADD      r3,r1,r1,LSL #1       ;1554
001110  eb041343          ADD      r3,r4,r3,LSL #5       ;1554
001114  1c49              ADDS     r1,r1,#1              ;1552
001116  62d8              STR      r0,[r3,#0x2c]         ;1555
001118  6318              STR      r0,[r3,#0x30]         ;1556
00111a  f8835028          STRB     r5,[r3,#0x28]         ;1556
00111e  b2c9              UXTB     r1,r1                 ;1552
                  |L1.4384|
001120  4291              CMP      r1,r2                 ;1552
001122  dbf3              BLT      |L1.4364|
001124  e1f2              B        |L1.5388|
                  |L1.4390|
001126  7808              LDRB     r0,[r1,#0]            ;1561  ; phase
001128  b110              CBZ      r0,|L1.4400|
00112a  2801              CMP      r0,#1                 ;1574
00112c  d015              BEQ      |L1.4442|
00112e  e1ed              B        |L1.5388|
                  |L1.4400|
001130  82b5              STRH     r5,[r6,#0x14]         ;1563
001132  82f5              STRH     r5,[r6,#0x16]         ;1564
001134  701d              STRB     r5,[r3,#0]            ;1565
001136  2000              MOVS     r0,#0                 ;1567
001138  464b              MOV      r3,r9                 ;1504
00113a  f9b71000          LDRSH    r1,[r7,#0]            ;1552
00113e  e009              B        |L1.4436|
                  |L1.4416|
001140  eb000240          ADD      r2,r0,r0,LSL #1       ;1569
001144  eb041242          ADD      r2,r4,r2,LSL #5       ;1569
001148  1c40              ADDS     r0,r0,#1              ;1567
00114a  62d5              STR      r5,[r2,#0x2c]         ;1570
00114c  6315              STR      r5,[r2,#0x30]         ;1571
00114e  f8823028          STRB     r3,[r2,#0x28]         ;1571
001152  b2c0              UXTB     r0,r0                 ;1567
                  |L1.4436|
001154  4288              CMP      r0,r1                 ;1567
001156  dbf3              BLT      |L1.4416|
001158  e1d8              B        |L1.5388|
                  |L1.4442|
00115a  f8a68014          STRH     r8,[r6,#0x14]         ;1576
00115e  f8a68016          STRH     r8,[r6,#0x16]         ;1577
001162  f8839000          STRB     r9,[r3,#0]            ;1578
001166  4640              MOV      r0,r8                 ;1576
001168  2100              MOVS     r1,#0                 ;1580
00116a  f9b72000          LDRSH    r2,[r7,#0]            ;1552
00116e  e067              B        |L1.4672|
                  |L1.4464|
001170  e069              B        |L1.4678|
                  |L1.4466|
001172  e176              B        |L1.5218|
                  |L1.4468|
001174  e18b              B        |L1.5262|
                  |L1.4470|
001176  e1b4              B        |L1.5346|
                  |L1.4472|
001178  e1dd              B        |L1.5430|
                  |L1.4474|
00117a  e2a2              B        |L1.5826|
                  |L1.4476|
00117c  e38f              B        |L1.6302|
00117e  0000              DCW      0x0000
                  |L1.4480|
                          DCD      work_stat
                  |L1.4484|
                          DCD      ramModbusCnt
                  |L1.4488|
                          DCD      I_ug_ram
                  |L1.4492|
                          DCD      U_up_ram
                  |L1.4496|
                          DCD      cap_time_proc
                  |L1.4500|
                          DCD      CAP_COUNTER
                  |L1.4504|
                          DCD      CAP_TIME_SEC
                  |L1.4508|
                          DCD      CAP_TIME_MIN
                  |L1.4512|
                          DCD      CAP_TIME_HOUR
                  |L1.4516|
                          DCD      a_ind
                  |L1.4520|
                          DCD      tst_pwm_u
                  |L1.4524|
                          DCD      viz_stat
                  |L1.4528|
                          DCD      viz_stat_cnt
                  |L1.4532|
                          DCD      0xffffabcd
                  |L1.4536|
                          DCD      tst_pwm_i
                  |L1.4540|
                          DCD      load_U
                  |L1.4544|
                          DCD      load_I
                  |L1.4548|
                          DCD      REV_IS_ON
                  |L1.4552|
                          DCD      AVT_REV_IS_ON
                  |L1.4556|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.4560|
                          DCD      REV_STAT
                  |L1.4564|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.4568|
                          DCD      U_up_temp
                  |L1.4572|
                          DCD      I_ug_temp
                  |L1.4576|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.4580|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.4584|
                          DCD      fiks_stat_I
                  |L1.4588|
                          DCD      I_ug
                  |L1.4592|
                          DCD      fiks_stat_U
                  |L1.4596|
                          DCD      U_up
                  |L1.4600|
                          DCD      I_MAX_IPS
                  |L1.4604|
                          DCD      U_MAX
                  |L1.4608|
                          DCD      ||area_number.18||
                  |L1.4612|
                          DCD      bps_stat
                  |L1.4616|
                          DCD      phase
                  |L1.4620|
                          DCD      bps
                  |L1.4624|
                          DCD      NUMIST
                  |L1.4628|
                          DCD      _xu_
                  |L1.4632|
                          DCD      _x_
                  |L1.4636|
                          DCD      I_ug3
                  |L1.4640|
                          DCD      I_ug2
                  |L1.4644|
                          DCD      U_up3
                  |L1.4648|
                          DCD      U_up2
                  |L1.4652|
00122c  eb010341          ADD      r3,r1,r1,LSL #1       ;1582
001230  eb041343          ADD      r3,r4,r3,LSL #5       ;1582
001234  1c49              ADDS     r1,r1,#1              ;1580
001236  62d8              STR      r0,[r3,#0x2c]         ;1583
001238  6318              STR      r0,[r3,#0x30]         ;1584
00123a  f8835028          STRB     r5,[r3,#0x28]         ;1584
00123e  b2c9              UXTB     r1,r1                 ;1580
                  |L1.4672|
001240  4291              CMP      r1,r2                 ;1580
001242  dbf3              BLT      |L1.4652|
001244  e162              B        |L1.5388|
                  |L1.4678|
001246  f9902001          LDRSB    r2,[r0,#1]            ;1599  ; a_ind
00124a  b122              CBZ      r2,|L1.4694|
00124c  2a03              CMP      r2,#3                 ;1599
00124e  d002              BEQ      |L1.4694|
001250  2a06              CMP      r2,#6                 ;1662
001252  d059              BEQ      |L1.4872|
001254  e05f              B        |L1.4886|
                  |L1.4694|
001256  f8a68014          STRH     r8,[r6,#0x14]         ;1601
00125a  f8a68016          STRH     r8,[r6,#0x16]         ;1602
00125e  f1040428          ADD      r4,r4,#0x28           ;1603
001262  f8839000          STRB     r9,[r3,#0]            ;1603
001266  6065              STR      r5,[r4,#4]            ;1606  ; bps
001268  60a5              STR      r5,[r4,#8]            ;1607  ; bps
00126a  f8849000          STRB     r9,[r4,#0]            ;1607
00126e  6665              STR      r5,[r4,#0x64]         ;1610  ; bps
001270  66a5              STR      r5,[r4,#0x68]         ;1611  ; bps
001272  f8849060          STRB     r9,[r4,#0x60]         ;1611
001276  f8c450c4          STR      r5,[r4,#0xc4]         ;1618  ; bps
00127a  f8c450c8          STR      r5,[r4,#0xc8]         ;1619  ; bps
00127e  f88490c0          STRB     r9,[r4,#0xc0]         ;1619
001282  f8c45124          STR      r5,[r4,#0x124]        ;1622  ; bps
001286  f8c45128          STR      r5,[r4,#0x128]        ;1623  ; bps
00128a  f8849120          STRB     r9,[r4,#0x120]        ;1623
00128e  f8c45184          STR      r5,[r4,#0x184]        ;1626  ; bps
001292  4649              MOV      r1,r9                 ;1603
001294  f8c45188          STR      r5,[r4,#0x188]        ;1627  ; bps
001298  f8841180          STRB     r1,[r4,#0x180]        ;1627
00129c  f8c451e4          STR      r5,[r4,#0x1e4]        ;1630  ; bps
0012a0  f8c451e8          STR      r5,[r4,#0x1e8]        ;1631  ; bps
0012a4  f88411e0          STRB     r1,[r4,#0x1e0]        ;1631
0012a8  f8c45244          STR      r5,[r4,#0x244]        ;1634  ; bps
0012ac  f8c45248          STR      r5,[r4,#0x248]        ;1635  ; bps
0012b0  f8841240          STRB     r1,[r4,#0x240]        ;1635
0012b4  f8c452a4          STR      r5,[r4,#0x2a4]        ;1638  ; bps
0012b8  f8c452a8          STR      r5,[r4,#0x2a8]        ;1639  ; bps
0012bc  f88412a0          STRB     r1,[r4,#0x2a0]        ;1639
0012c0  f8c45304          STR      r5,[r4,#0x304]        ;1642  ; bps
0012c4  f8c45308          STR      r5,[r4,#0x308]        ;1643  ; bps
0012c8  f8841300          STRB     r1,[r4,#0x300]        ;1643
0012cc  f8c45364          STR      r5,[r4,#0x364]        ;1646  ; bps
0012d0  f8c45368          STR      r5,[r4,#0x368]        ;1647  ; bps
0012d4  f8841360          STRB     r1,[r4,#0x360]        ;1647
0012d8  f8c453c4          STR      r5,[r4,#0x3c4]        ;1650  ; bps
0012dc  f8c453c8          STR      r5,[r4,#0x3c8]        ;1651  ; bps
0012e0  f88413c0          STRB     r1,[r4,#0x3c0]        ;1651
0012e4  f8c45424          STR      r5,[r4,#0x424]        ;1654  ; bps
0012e8  f8c45428          STR      r5,[r4,#0x428]        ;1655  ; bps
0012ec  f8841420          STRB     r1,[r4,#0x420]        ;1655
0012f0  f9900002          LDRSB    r0,[r0,#2]            ;1657  ; a_ind
0012f4  f1a40428          SUB      r4,r4,#0x28           ;1655
0012f8  eb000040          ADD      r0,r0,r0,LSL #1       ;1657
0012fc  eb041040          ADD      r0,r4,r0,LSL #5       ;1657
001300  4642              MOV      r2,r8                 ;1601
001302  62c2              STR      r2,[r0,#0x2c]         ;1658
001304  6302              STR      r2,[r0,#0x30]         ;1659
001306  e0a9              B        |L1.5212|
                  |L1.4872|
001308  7809              LDRB     r1,[r1,#0]            ;1664  ; phase
00130a  b111              CBZ      r1,|L1.4882|
00130c  2901              CMP      r1,#1                 ;1722
00130e  d04d              BEQ      |L1.5036|
001310  e3be              B        |L1.6800|
                  |L1.4882|
001312  82b5              STRH     r5,[r6,#0x14]         ;1666
001314  82f5              STRH     r5,[r6,#0x16]         ;1667
                  |L1.4886|
001316  f1040428          ADD      r4,r4,#0x28           ;1789
00131a  701d              STRB     r5,[r3,#0]            ;1789
00131c  6065              STR      r5,[r4,#4]            ;1792  ; bps
00131e  60a5              STR      r5,[r4,#8]            ;1793  ; bps
001320  f8849000          STRB     r9,[r4,#0]            ;1793
001324  6665              STR      r5,[r4,#0x64]         ;1796  ; bps
001326  66a5              STR      r5,[r4,#0x68]         ;1797  ; bps
001328  f8849060          STRB     r9,[r4,#0x60]         ;1797
00132c  f8c450c4          STR      r5,[r4,#0xc4]         ;1804  ; bps
001330  f8c450c8          STR      r5,[r4,#0xc8]         ;1805  ; bps
001334  f88490c0          STRB     r9,[r4,#0xc0]         ;1805
001338  f8c45124          STR      r5,[r4,#0x124]        ;1808  ; bps
00133c  f8c45128          STR      r5,[r4,#0x128]        ;1809  ; bps
001340  f8849120          STRB     r9,[r4,#0x120]        ;1809
001344  f8c45184          STR      r5,[r4,#0x184]        ;1812  ; bps
001348  f8c45188          STR      r5,[r4,#0x188]        ;1813  ; bps
00134c  f8849180          STRB     r9,[r4,#0x180]        ;1813
001350  f8c451e4          STR      r5,[r4,#0x1e4]        ;1816  ; bps
001354  f8c451e8          STR      r5,[r4,#0x1e8]        ;1817  ; bps
001358  f88491e0          STRB     r9,[r4,#0x1e0]        ;1817
00135c  f8c45244          STR      r5,[r4,#0x244]        ;1820  ; bps
001360  4648              MOV      r0,r9                 ;1793
001362  f8c45248          STR      r5,[r4,#0x248]        ;1821  ; bps
001366  f8840240          STRB     r0,[r4,#0x240]        ;1821
00136a  f8c452a4          STR      r5,[r4,#0x2a4]        ;1824  ; bps
00136e  f8c452a8          STR      r5,[r4,#0x2a8]        ;1825  ; bps
001372  f88402a0          STRB     r0,[r4,#0x2a0]        ;1825
001376  f8c45304          STR      r5,[r4,#0x304]        ;1828  ; bps
00137a  f8c45308          STR      r5,[r4,#0x308]        ;1829  ; bps
00137e  f8840300          STRB     r0,[r4,#0x300]        ;1829
001382  f8c45364          STR      r5,[r4,#0x364]        ;1832  ; bps
001386  f8c45368          STR      r5,[r4,#0x368]        ;1833  ; bps
00138a  f8840360          STRB     r0,[r4,#0x360]        ;1833
00138e  f8c453c4          STR      r5,[r4,#0x3c4]        ;1836  ; bps
001392  f8c453c8          STR      r5,[r4,#0x3c8]        ;1837  ; bps
001396  f88403c0          STRB     r0,[r4,#0x3c0]        ;1837
00139a  f8c45424          STR      r5,[r4,#0x424]        ;1840  ; bps
00139e  f8c45428          STR      r5,[r4,#0x428]        ;1841  ; bps
0013a2  f8840420          STRB     r0,[r4,#0x420]        ;1841
0013a6  f1a40428          SUB      r4,r4,#0x28           ;1841
0013aa  e371              B        |L1.6800|
                  |L1.5036|
0013ac  f8a68014          STRH     r8,[r6,#0x14]         ;1724
0013b0  f8a68016          STRH     r8,[r6,#0x16]         ;1725
0013b4  f1040428          ADD      r4,r4,#0x28           ;1726
0013b8  f8839000          STRB     r9,[r3,#0]            ;1726
0013bc  6065              STR      r5,[r4,#4]            ;1729  ; bps
0013be  60a5              STR      r5,[r4,#8]            ;1730  ; bps
0013c0  f8849000          STRB     r9,[r4,#0]            ;1730
0013c4  6665              STR      r5,[r4,#0x64]         ;1733  ; bps
0013c6  66a5              STR      r5,[r4,#0x68]         ;1734  ; bps
0013c8  f8849060          STRB     r9,[r4,#0x60]         ;1734
0013cc  f8c450c4          STR      r5,[r4,#0xc4]         ;1741  ; bps
0013d0  f8c450c8          STR      r5,[r4,#0xc8]         ;1742  ; bps
0013d4  f88490c0          STRB     r9,[r4,#0xc0]         ;1742
0013d8  f8c45124          STR      r5,[r4,#0x124]        ;1745  ; bps
0013dc  f8c45128          STR      r5,[r4,#0x128]        ;1746  ; bps
0013e0  f8849120          STRB     r9,[r4,#0x120]        ;1746
0013e4  f8c45184          STR      r5,[r4,#0x184]        ;1749  ; bps
0013e8  464a              MOV      r2,r9                 ;1726
0013ea  f8c45188          STR      r5,[r4,#0x188]        ;1750  ; bps
0013ee  f8842180          STRB     r2,[r4,#0x180]        ;1750
0013f2  f8c451e4          STR      r5,[r4,#0x1e4]        ;1753  ; bps
0013f6  f8c451e8          STR      r5,[r4,#0x1e8]        ;1754  ; bps
0013fa  f88421e0          STRB     r2,[r4,#0x1e0]        ;1754
0013fe  f8c45244          STR      r5,[r4,#0x244]        ;1757  ; bps
001402  f8c45248          STR      r5,[r4,#0x248]        ;1758  ; bps
001406  f8842240          STRB     r2,[r4,#0x240]        ;1758
00140a  f8c452a4          STR      r5,[r4,#0x2a4]        ;1761  ; bps
00140e  f8c452a8          STR      r5,[r4,#0x2a8]        ;1762  ; bps
001412  f88422a0          STRB     r2,[r4,#0x2a0]        ;1762
001416  f8c45304          STR      r5,[r4,#0x304]        ;1765  ; bps
00141a  f8c45308          STR      r5,[r4,#0x308]        ;1766  ; bps
00141e  f8842300          STRB     r2,[r4,#0x300]        ;1766
001422  f8c45364          STR      r5,[r4,#0x364]        ;1769  ; bps
001426  f8c45368          STR      r5,[r4,#0x368]        ;1770  ; bps
00142a  f8842360          STRB     r2,[r4,#0x360]        ;1770
00142e  f8c453c4          STR      r5,[r4,#0x3c4]        ;1773  ; bps
001432  f8c453c8          STR      r5,[r4,#0x3c8]        ;1774  ; bps
001436  f88423c0          STRB     r2,[r4,#0x3c0]        ;1774
00143a  f8c45424          STR      r5,[r4,#0x424]        ;1777  ; bps
00143e  f8c45428          STR      r5,[r4,#0x428]        ;1778  ; bps
001442  f8842420          STRB     r2,[r4,#0x420]        ;1778
001446  f9900002          LDRSB    r0,[r0,#2]            ;1782  ; a_ind
00144a  f1a40428          SUB      r4,r4,#0x28           ;1778
00144e  eb000040          ADD      r0,r0,r0,LSL #1       ;1782
001452  eb041040          ADD      r0,r4,r0,LSL #5       ;1782
001456  4641              MOV      r1,r8                 ;1724
001458  62c1              STR      r1,[r0,#0x2c]         ;1783
00145a  6301              STR      r1,[r0,#0x30]         ;1783
                  |L1.5212|
00145c  f8805028          STRB     r5,[r0,#0x28]         ;1659
001460  e316              B        |L1.6800|
                  |L1.5218|
001462  f9b1c000          LDRSH    r12,[r1,#0]           ;1853
001466  2000              MOVS     r0,#0                 ;1850
001468  f9b22000          LDRSH    r2,[r2,#0]            ;1852
00146c  f9b71000          LDRSH    r1,[r7,#0]            ;1552
001470  e00a              B        |L1.5256|
001472  bf00              NOP                            ;1852
                  |L1.5236|
001474  eb000340          ADD      r3,r0,r0,LSL #1       ;1852
001478  eb041343          ADD      r3,r4,r3,LSL #5       ;1852
00147c  1c40              ADDS     r0,r0,#1              ;1850
00147e  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1852
001482  f8835028          STRB     r5,[r3,#0x28]         ;1854
001486  b2c0              UXTB     r0,r0                 ;1850
                  |L1.5256|
001488  4288              CMP      r0,r1                 ;1850
00148a  dbf3              BLT      |L1.5236|
00148c  e300              B        |L1.6800|
                  |L1.5262|
00148e  7800              LDRB     r0,[r0,#0]            ;1862  ; viz_stat
001490  2801              CMP      r0,#1                 ;1862
001492  f04f0000          MOV      r0,#0                 ;1873
001496  d010              BEQ      |L1.5306|
001498  4641              MOV      r1,r8                 ;1548
00149a  f9b72000          LDRSH    r2,[r7,#0]            ;1552
00149e  e009              B        |L1.5300|
                  |L1.5280|
0014a0  eb000340          ADD      r3,r0,r0,LSL #1       ;1866
0014a4  eb041343          ADD      r3,r4,r3,LSL #5       ;1866
0014a8  1c40              ADDS     r0,r0,#1              ;1864
0014aa  62d9              STR      r1,[r3,#0x2c]         ;1867
0014ac  6319              STR      r1,[r3,#0x30]         ;1868
0014ae  f8835028          STRB     r5,[r3,#0x28]         ;1868
0014b2  b2c0              UXTB     r0,r0                 ;1864
                  |L1.5300|
0014b4  4290              CMP      r0,r2                 ;1864
0014b6  dbf3              BLT      |L1.5280|
0014b8  e2ea              B        |L1.6800|
                  |L1.5306|
0014ba  f9b1c000          LDRSH    r12,[r1,#0]           ;1853
0014be  f9b22000          LDRSH    r2,[r2,#0]            ;1852
0014c2  f9b71000          LDRSH    r1,[r7,#0]            ;1552
0014c6  e009              B        |L1.5340|
                  |L1.5320|
0014c8  eb000340          ADD      r3,r0,r0,LSL #1       ;1875
0014cc  eb041343          ADD      r3,r4,r3,LSL #5       ;1875
0014d0  1c40              ADDS     r0,r0,#1              ;1873
0014d2  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1875
0014d6  f8835028          STRB     r5,[r3,#0x28]         ;1877
0014da  b2c0              UXTB     r0,r0                 ;1873
                  |L1.5340|
0014dc  4288              CMP      r0,r1                 ;1873
0014de  dbf3              BLT      |L1.5320|
0014e0  e2d6              B        |L1.6800|
                  |L1.5346|
0014e2  7800              LDRB     r0,[r0,#0]            ;1886  ; viz_stat
0014e4  2801              CMP      r0,#1                 ;1886
0014e6  f04f0000          MOV      r0,#0                 ;1897
0014ea  d010              BEQ      |L1.5390|
0014ec  4641              MOV      r1,r8                 ;1548
0014ee  f9b72000          LDRSH    r2,[r7,#0]            ;1552
0014f2  e009              B        |L1.5384|
                  |L1.5364|
0014f4  eb000340          ADD      r3,r0,r0,LSL #1       ;1890
0014f8  eb041343          ADD      r3,r4,r3,LSL #5       ;1890
0014fc  1c40              ADDS     r0,r0,#1              ;1888
0014fe  62d9              STR      r1,[r3,#0x2c]         ;1891
001500  6319              STR      r1,[r3,#0x30]         ;1892
001502  f8835028          STRB     r5,[r3,#0x28]         ;1892
001506  b2c0              UXTB     r0,r0                 ;1888
                  |L1.5384|
001508  4290              CMP      r0,r2                 ;1888
00150a  dbf3              BLT      |L1.5364|
                  |L1.5388|
00150c  e2c0              B        |L1.6800|
                  |L1.5390|
00150e  f9b1c000          LDRSH    r12,[r1,#0]           ;1853
001512  f9b22000          LDRSH    r2,[r2,#0]            ;1852
001516  f9b71000          LDRSH    r1,[r7,#0]            ;1552
00151a  e009              B        |L1.5424|
                  |L1.5404|
00151c  eb000340          ADD      r3,r0,r0,LSL #1       ;1899
001520  eb041343          ADD      r3,r4,r3,LSL #5       ;1899
001524  1c40              ADDS     r0,r0,#1              ;1897
001526  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1899
00152a  f8835028          STRB     r5,[r3,#0x28]         ;1901
00152e  b2c0              UXTB     r0,r0                 ;1897
                  |L1.5424|
001530  4288              CMP      r0,r1                 ;1897
001532  dbf3              BLT      |L1.5404|
001534  e2ac              B        |L1.6800|
                  |L1.5430|
001536  48f6              LDR      r0,|L1.6416|
001538  f9b00000          LDRSH    r0,[r0,#0]            ;1910  ; CURR_FADE_IN
00153c  b150              CBZ      r0,|L1.5460|
00153e  49f5              LDR      r1,|L1.6420|
001540  680b              LDR      r3,[r1,#0]            ;1910  ; time_proc
001542  4283              CMP      r3,r0                 ;1910
001544  da06              BGE      |L1.5460|
001546  49f4              LDR      r1,|L1.6424|
001548  f9b12000          LDRSH    r2,[r1,#0]            ;1914  ; I_ug_temp
00154c  435a              MULS     r2,r3,r2              ;1915
00154e  fb92f0f0          SDIV     r0,r2,r0              ;1916
001552  8008              STRH     r0,[r1,#0]            ;1920
                  |L1.5460|
001554  79b0              LDRB     r0,[r6,#6]            ;1923  ; b1Hz_sh
001556  b388              CBZ      r0,|L1.5564|
001558  48f0              LDR      r0,|L1.6428|
00155a  8800              LDRH     r0,[r0,#0]            ;1928  ; REV_IS_ON
00155c  b140              CBZ      r0,|L1.5488|
00155e  48f0              LDR      r0,|L1.6432|
001560  8800              LDRH     r0,[r0,#0]            ;1928  ; AVT_REV_IS_ON
001562  b128              CBZ      r0,|L1.5488|
001564  48ef              LDR      r0,|L1.6436|
001566  7800              LDRB     r0,[r0,#0]            ;1928  ; proc_phase
001568  2801              CMP      r0,#1                 ;1928
00156a  d034              BEQ      |L1.5590|
00156c  2803              CMP      r0,#3                 ;1928
00156e  d032              BEQ      |L1.5590|
                  |L1.5488|
001570  48ed              LDR      r0,|L1.6440|
001572  f9b01000          LDRSH    r1,[r0,#0]            ;1929  ; load_I
001576  48e8              LDR      r0,|L1.6424|
001578  f9b00000          LDRSH    r0,[r0,#0]            ;1929  ; I_ug_temp
00157c  4281              CMP      r1,r0                 ;1929
00157e  da04              BGE      |L1.5514|
001580  f8bb1000          LDRH     r1,[r11,#0]           ;1929  ; _x_
001584  f1010101          ADD      r1,r1,#1              ;1929
001588  e004              B        |L1.5524|
                  |L1.5514|
00158a  dd05              BLE      |L1.5528|
00158c  f8bb1000          LDRH     r1,[r11,#0]           ;1930  ; _x_
001590  f1a10101          SUB      r1,r1,#1              ;1930
                  |L1.5524|
001594  f8ab1000          STRH     r1,[r11,#0]           ;1930
                  |L1.5528|
001598  2232              MOVS     r2,#0x32              ;1932
00159a  4251              RSBS     r1,r2,#0              ;1932
00159c  48e3              LDR      r0,|L1.6444|
00159e  f7fffffe          BL       gran
0015a2  48e3              LDR      r0,|L1.6448|
0015a4  f9b01000          LDRSH    r1,[r0,#0]            ;1934  ; load_U
0015a8  48e2              LDR      r0,|L1.6452|
0015aa  f9b00000          LDRSH    r0,[r0,#0]            ;1934  ; U_maxg
0015ae  4281              CMP      r1,r0                 ;1934
0015b0  da05              BGE      |L1.5566|
0015b2  f8ba1000          LDRH     r1,[r10,#0]           ;1934  ; _xu_
0015b6  f1010101          ADD      r1,r1,#1              ;1934
0015ba  e005              B        |L1.5576|
                  |L1.5564|
0015bc  e00b              B        |L1.5590|
                  |L1.5566|
0015be  dd05              BLE      |L1.5580|
0015c0  f8ba1000          LDRH     r1,[r10,#0]           ;1935  ; _xu_
0015c4  f1a10101          SUB      r1,r1,#1              ;1935
                  |L1.5576|
0015c8  f8aa1000          STRH     r1,[r10,#0]           ;1935
                  |L1.5580|
0015cc  2232              MOVS     r2,#0x32              ;1937
0015ce  4251              RSBS     r1,r2,#0              ;1937
0015d0  48d9              LDR      r0,|L1.6456|
0015d2  f7fffffe          BL       gran
                  |L1.5590|
0015d6  48d7              LDR      r0,|L1.6452|
0015d8  49d8              LDR      r1,|L1.6460|
0015da  f9b00000          LDRSH    r0,[r0,#0]            ;1942  ; U_maxg
0015de  f9b11000          LDRSH    r1,[r1,#0]            ;1943  ; U_MAX
0015e2  ebc02040          RSB      r0,r0,r0,LSL #9       ;1942
0015e6  0040              LSLS     r0,r0,#1              ;1942
0015e8  fb90f0f1          SDIV     r0,r0,r1              ;1943
0015ec  9000              STR      r0,[sp,#0]            ;1947
0015ee  48ca              LDR      r0,|L1.6424|
0015f0  49d3              LDR      r1,|L1.6464|
0015f2  f9b00000          LDRSH    r0,[r0,#0]            ;1947  ; I_ug_temp
0015f6  f9b11000          LDRSH    r1,[r1,#0]            ;1948  ; I_MAX_IPS
0015fa  ebc02040          RSB      r0,r0,r0,LSL #9       ;1947
0015fe  0040              LSLS     r0,r0,#1              ;1947
001600  fb90f0f1          SDIV     r0,r0,r1              ;1948
001604  4680              MOV      r8,r0                 ;1948
001606  20ac              MOVS     r0,#0xac              ;1950
001608  f7fffffe          BL       lc640_read_int
00160c  f5a0412b          SUB      r1,r0,#0xab00         ;1950
001610  39cd              SUBS     r1,r1,#0xcd           ;1950
001612  d107              BNE      |L1.5668|
001614  48c7              LDR      r0,|L1.6452|
001616  f9b00000          LDRSH    r0,[r0,#0]            ;1952  ; U_maxg
00161a  f7fffffe          BL       find_U_curve
00161e  eb000080          ADD      r0,r0,r0,LSL #2       ;1952
001622  9000              STR      r0,[sp,#0]            ;1952
                  |L1.5668|
001624  20ae              MOVS     r0,#0xae              ;1955
001626  f7fffffe          BL       lc640_read_int
00162a  f5a0412b          SUB      r1,r0,#0xab00         ;1955
00162e  39cd              SUBS     r1,r1,#0xcd           ;1955
001630  d107              BNE      |L1.5698|
001632  48b9              LDR      r0,|L1.6424|
001634  f9b00000          LDRSH    r0,[r0,#0]            ;1957  ; I_ug_temp
001638  f7fffffe          BL       find_I_curve
00163c  eb000080          ADD      r0,r0,r0,LSL #2       ;1957
001640  4680              MOV      r8,r0                 ;1957
                  |L1.5698|
001642  2000              MOVS     r0,#0                 ;1960
001644  f9b7c000          LDRSH    r12,[r7,#0]           ;1552
001648  e038              B        |L1.5820|
                  |L1.5706|
00164a  49b4              LDR      r1,|L1.6428|
00164c  8809              LDRH     r1,[r1,#0]            ;1962  ; REV_IS_ON
00164e  b141              CBZ      r1,|L1.5730|
001650  49b3              LDR      r1,|L1.6432|
001652  8809              LDRH     r1,[r1,#0]            ;1962  ; AVT_REV_IS_ON
001654  b129              CBZ      r1,|L1.5730|
001656  49b3              LDR      r1,|L1.6436|
001658  7809              LDRB     r1,[r1,#0]            ;1962  ; proc_phase
00165a  2901              CMP      r1,#1                 ;1962
00165c  d00e              BEQ      |L1.5756|
00165e  2903              CMP      r1,#3                 ;1962
001660  d00c              BEQ      |L1.5756|
                  |L1.5730|
001662  9900              LDR      r1,[sp,#0]            ;1967
001664  b20a              SXTH     r2,r1                 ;1967
001666  f9ba1000          LDRSH    r1,[r10,#0]           ;1967  ; _xu_
00166a  1852              ADDS     r2,r2,r1              ;1967
00166c  eb000140          ADD      r1,r0,r0,LSL #1       ;1967
001670  eb041141          ADD      r1,r4,r1,LSL #5       ;1967
001674  62ca              STR      r2,[r1,#0x2c]         ;1968
001676  d50a              BPL      |L1.5774|
001678  62cd              STR      r5,[r1,#0x2c]         ;1968
00167a  e00d              B        |L1.5784|
                  |L1.5756|
00167c  eb000140          ADD      r1,r0,r0,LSL #1       ;1963
001680  eb041141          ADD      r1,r4,r1,LSL #5       ;1963
001684  62cd              STR      r5,[r1,#0x2c]         ;1964
001686  630d              STR      r5,[r1,#0x30]         ;1965
001688  f8819028          STRB     r9,[r1,#0x28]         ;1965
00168c  e014              B        |L1.5816|
                  |L1.5774|
00168e  f24033fe          MOV      r3,#0x3fe             ;1969
001692  429a              CMP      r2,r3                 ;1969
001694  dd00              BLE      |L1.5784|
001696  62cb              STR      r3,[r1,#0x2c]         ;1969
                  |L1.5784|
001698  f9bb2000          LDRSH    r2,[r11,#0]           ;1970  ; _x_
00169c  fa0ff388          SXTH     r3,r8                 ;1970
0016a0  189a              ADDS     r2,r3,r2              ;1970
0016a2  630a              STR      r2,[r1,#0x30]         ;1971
0016a4  d501              BPL      |L1.5802|
0016a6  630d              STR      r5,[r1,#0x30]         ;1971
0016a8  e004              B        |L1.5812|
                  |L1.5802|
0016aa  f24033fe          MOV      r3,#0x3fe             ;1972
0016ae  429a              CMP      r2,r3                 ;1972
0016b0  dd00              BLE      |L1.5812|
0016b2  630b              STR      r3,[r1,#0x30]         ;1972
                  |L1.5812|
0016b4  f8815028          STRB     r5,[r1,#0x28]         ;1973
                  |L1.5816|
0016b8  1c40              ADDS     r0,r0,#1              ;1960
0016ba  b2c0              UXTB     r0,r0                 ;1960
                  |L1.5820|
0016bc  4560              CMP      r0,r12                ;1960
0016be  dbc4              BLT      |L1.5706|
0016c0  e1e6              B        |L1.6800|
                  |L1.5826|
0016c2  4ba0              LDR      r3,|L1.6468|
0016c4  f9b30000          LDRSH    r0,[r3,#0]            ;1984  ; load_U_
0016c8  2805              CMP      r0,#5                 ;1984
0016ca  dd02              BLE      |L1.5842|
0016cc  f8869009          STRB     r9,[r6,#9]            ;1984
0016d0  e000              B        |L1.5844|
                  |L1.5842|
0016d2  7275              STRB     r5,[r6,#9]            ;1985
                  |L1.5844|
0016d4  f8dfc270          LDR      r12,|L1.6472|
0016d8  2264              MOVS     r2,#0x64              ;1987
0016da  f9bc1000          LDRSH    r1,[r12,#0]           ;1987  ; U_up_temp
0016de  fb91f2f2          SDIV     r2,r1,r2              ;1987
0016e2  9200              STR      r2,[sp,#0]            ;1988
0016e4  2a00              CMP      r2,#0                 ;1988
0016e6  dc01              BGT      |L1.5868|
0016e8  2201              MOVS     r2,#1                 ;1988
0016ea  9200              STR      r2,[sp,#0]            ;1988
                  |L1.5868|
0016ec  1a40              SUBS     r0,r0,r1              ;1989
0016ee  b200              SXTH     r0,r0                 ;1989
0016f0  f7fffffe          BL       abs
0016f4  9900              LDR      r1,[sp,#0]            ;1989
0016f6  b209              SXTH     r1,r1                 ;1989
0016f8  4288              CMP      r0,r1                 ;1989
0016fa  da02              BGE      |L1.5890|
0016fc  f886900a          STRB     r9,[r6,#0xa]          ;1989
001700  e000              B        |L1.5892|
                  |L1.5890|
001702  72b5              STRB     r5,[r6,#0xa]          ;1990
                  |L1.5892|
001704  7235              STRB     r5,[r6,#8]            ;1994
001706  7ab0              LDRB     r0,[r6,#0xa]          ;1996  ; bU_VALID_VALID
001708  b178              CBZ      r0,|L1.5930|
00170a  7af0              LDRB     r0,[r6,#0xb]          ;1998  ; bPRECESSION_REG
00170c  b3b0              CBZ      r0,|L1.6012|
00170e  488d              LDR      r0,|L1.6468|
001710  72f5              STRB     r5,[r6,#0xb]          ;2000
001712  f9b01000          LDRSH    r1,[r0,#0]            ;2001  ; load_U_
001716  488c              LDR      r0,|L1.6472|
001718  f9b00000          LDRSH    r0,[r0,#0]            ;2001  ; U_up_temp
00171c  4281              CMP      r1,r0                 ;2001
00171e  db29              BLT      |L1.6004|
001720  dc2e              BGT      |L1.6016|
001722  e031              B        |L1.6024|
                  |L1.5924|
001724  f8aa1000          STRH     r1,[r10,#0]           ;2002
001728  e02e              B        |L1.6024|
                  |L1.5930|
00172a  79b0              LDRB     r0,[r6,#6]            ;2006  ; b1Hz_sh
00172c  b330              CBZ      r0,|L1.6012|
00172e  7a70              LDRB     r0,[r6,#9]            ;2006  ; bU_VALID
001730  b320              CBZ      r0,|L1.6012|
001732  487d              LDR      r0,|L1.6440|
001734  f9b01000          LDRSH    r1,[r0,#0]            ;2008  ; load_I
001738  4884              LDR      r0,|L1.6476|
00173a  f9b00000          LDRSH    r0,[r0,#0]            ;2008  ; I_maxp
00173e  4281              CMP      r1,r0                 ;2008
001740  da04              BGE      |L1.5964|
001742  f8bb1000          LDRH     r1,[r11,#0]           ;2008  ; _x_
001746  f1010101          ADD      r1,r1,#1              ;2008
00174a  e004              B        |L1.5974|
                  |L1.5964|
00174c  dd05              BLE      |L1.5978|
00174e  f8bb1000          LDRH     r1,[r11,#0]           ;2009  ; _x_
001752  f1a10101          SUB      r1,r1,#1              ;2009
                  |L1.5974|
001756  f8ab1000          STRH     r1,[r11,#0]           ;2009
                  |L1.5978|
00175a  2232              MOVS     r2,#0x32              ;2010
00175c  4251              RSBS     r1,r2,#0              ;2010
00175e  4873              LDR      r0,|L1.6444|
001760  f7fffffe          BL       gran
001764  4877              LDR      r0,|L1.6468|
001766  f9b01000          LDRSH    r1,[r0,#0]            ;2012  ; load_U_
00176a  4877              LDR      r0,|L1.6472|
00176c  f9b00000          LDRSH    r0,[r0,#0]            ;2012  ; U_up_temp
001770  4281              CMP      r1,r0                 ;2012
001772  da04              BGE      |L1.6014|
                  |L1.6004|
001774  f8ba1000          LDRH     r1,[r10,#0]           ;2012  ; _xu_
001778  1c49              ADDS     r1,r1,#1              ;2012
00177a  e7d3              B        |L1.5924|
                  |L1.6012|
00177c  e009              B        |L1.6034|
                  |L1.6014|
00177e  dd03              BLE      |L1.6024|
                  |L1.6016|
001780  f8ba1000          LDRH     r1,[r10,#0]           ;2013  ; _xu_
001784  1e49              SUBS     r1,r1,#1              ;2013
001786  e7cd              B        |L1.5924|
                  |L1.6024|
001788  2232              MOVS     r2,#0x32              ;2014
00178a  4251              RSBS     r1,r2,#0              ;2014
00178c  486a              LDR      r0,|L1.6456|
00178e  f7fffffe          BL       gran
                  |L1.6034|
001792  486d              LDR      r0,|L1.6472|
001794  f44f7161          MOV      r1,#0x384             ;2020
001798  f9b00000          LDRSH    r0,[r0,#0]            ;2020  ; U_up_temp
00179c  4348              MULS     r0,r1,r0              ;2020
00179e  4967              LDR      r1,|L1.6460|
0017a0  f9b11000          LDRSH    r1,[r1,#0]            ;2021  ; U_MAX
0017a4  fb90f0f1          SDIV     r0,r0,r1              ;2021
0017a8  3032              ADDS     r0,r0,#0x32           ;2022
0017aa  9000              STR      r0,[sp,#0]            ;2024
0017ac  20ac              MOVS     r0,#0xac              ;2024
0017ae  f7fffffe          BL       lc640_read_int
0017b2  f5a0412b          SUB      r1,r0,#0xab00         ;2024
0017b6  39cd              SUBS     r1,r1,#0xcd           ;2024
0017b8  d107              BNE      |L1.6090|
0017ba  4863              LDR      r0,|L1.6472|
0017bc  f9b00000          LDRSH    r0,[r0,#0]            ;2026  ; U_up_temp
0017c0  f7fffffe          BL       find_U_curve
0017c4  eb000080          ADD      r0,r0,r0,LSL #2       ;2026
0017c8  9000              STR      r0,[sp,#0]            ;2026
                  |L1.6090|
0017ca  f8df8180          LDR      r8,|L1.6476|
0017ce  495c              LDR      r1,|L1.6464|
0017d0  f9b80000          LDRSH    r0,[r8,#0]            ;2032  ; I_maxp
0017d4  f9b11000          LDRSH    r1,[r1,#0]            ;2033  ; I_MAX_IPS
0017d8  ebc02040          RSB      r0,r0,r0,LSL #9       ;2032
0017dc  0040              LSLS     r0,r0,#1              ;2032
0017de  fb90f0f1          SDIV     r0,r0,r1              ;2033
0017e2  9001              STR      r0,[sp,#4]            ;2035
0017e4  20ae              MOVS     r0,#0xae              ;2035
0017e6  f7fffffe          BL       lc640_read_int
0017ea  f5a0412b          SUB      r1,r0,#0xab00         ;2035
0017ee  39cd              SUBS     r1,r1,#0xcd           ;2035
0017f0  d106              BNE      |L1.6144|
0017f2  f9b80000          LDRSH    r0,[r8,#0]            ;2037  ; I_maxp
0017f6  f7fffffe          BL       find_I_curve
0017fa  eb000080          ADD      r0,r0,r0,LSL #2       ;2037
0017fe  9001              STR      r0,[sp,#4]            ;2037
                  |L1.6144|
001800  2000              MOVS     r0,#0                 ;2040
001802  f9b78000          LDRSH    r8,[r7,#0]            ;1552
001806  e041              B        |L1.6284|
                  |L1.6152|
001808  4944              LDR      r1,|L1.6428|
00180a  8809              LDRH     r1,[r1,#0]            ;2042  ; REV_IS_ON
00180c  b141              CBZ      r1,|L1.6176|
00180e  4944              LDR      r1,|L1.6432|
001810  8809              LDRH     r1,[r1,#0]            ;2042  ; AVT_REV_IS_ON
001812  b129              CBZ      r1,|L1.6176|
001814  4943              LDR      r1,|L1.6436|
001816  7809              LDRB     r1,[r1,#0]            ;2042  ; proc_phase
001818  2901              CMP      r1,#1                 ;2042
00181a  d013              BEQ      |L1.6212|
00181c  2903              CMP      r1,#3                 ;2042
00181e  d011              BEQ      |L1.6212|
                  |L1.6176|
001820  eb000140          ADD      r1,r0,r0,LSL #1       ;2047
001824  eb041c41          ADD      r12,r4,r1,LSL #5      ;2047
001828  9900              LDR      r1,[sp,#0]            ;2047
00182a  f9bc2050          LDRSH    r2,[r12,#0x50]        ;2047
00182e  b20b              SXTH     r3,r1                 ;2047
001830  f9ba1000          LDRSH    r1,[r10,#0]           ;2047  ; _xu_
001834  4419              ADD      r1,r1,r3              ;2047
001836  1851              ADDS     r1,r2,r1              ;2047
001838  f8cc102c          STR      r1,[r12,#0x2c]        ;2048
00183c  d50b              BPL      |L1.6230|
00183e  f8cc502c          STR      r5,[r12,#0x2c]        ;2048
001842  e00e              B        |L1.6242|
                  |L1.6212|
001844  eb000140          ADD      r1,r0,r0,LSL #1       ;2043
001848  eb041141          ADD      r1,r4,r1,LSL #5       ;2043
00184c  62cd              STR      r5,[r1,#0x2c]         ;2044
00184e  630d              STR      r5,[r1,#0x30]         ;2045
001850  f8819028          STRB     r9,[r1,#0x28]         ;2045
001854  e018              B        |L1.6280|
                  |L1.6230|
001856  f24032fe          MOV      r2,#0x3fe             ;2049
00185a  4291              CMP      r1,r2                 ;2049
00185c  dd01              BLE      |L1.6242|
00185e  f8cc202c          STR      r2,[r12,#0x2c]        ;2049
                  |L1.6242|
001862  9901              LDR      r1,[sp,#4]            ;2050
001864  b20a              SXTH     r2,r1                 ;2050
001866  f9bb1000          LDRSH    r1,[r11,#0]           ;2050  ; _x_
00186a  1851              ADDS     r1,r2,r1              ;2050
00186c  f8cc1030          STR      r1,[r12,#0x30]        ;2051
001870  d502              BPL      |L1.6264|
001872  f8cc5030          STR      r5,[r12,#0x30]        ;2051
001876  e005              B        |L1.6276|
                  |L1.6264|
001878  f24032fe          MOV      r2,#0x3fe             ;2052
00187c  4291              CMP      r1,r2                 ;2052
00187e  dd01              BLE      |L1.6276|
001880  f8cc2030          STR      r2,[r12,#0x30]        ;2052
                  |L1.6276|
001884  f88c5028          STRB     r5,[r12,#0x28]        ;2053
                  |L1.6280|
001888  1c40              ADDS     r0,r0,#1              ;2040
00188a  b2c0              UXTB     r0,r0                 ;2040
                  |L1.6284|
00188c  4540              CMP      r0,r8                 ;2040
00188e  dbbb              BLT      |L1.6152|
001890  492f              LDR      r1,|L1.6480|
001892  9800              LDR      r0,[sp,#0]            ;2065
001894  8008              STRH     r0,[r1,#0]            ;2065
001896  492f              LDR      r1,|L1.6484|
001898  6ae0              LDR      r0,[r4,#0x2c]         ;2066  ; bps
00189a  8008              STRH     r0,[r1,#0]            ;2066
00189c  e0f8              B        |L1.6800|
                  |L1.6302|
00189e  79b0              LDRB     r0,[r6,#6]            ;2078  ; b1Hz_sh
0018a0  b3a0              CBZ      r0,|L1.6412|
0018a2  482d              LDR      r0,|L1.6488|
0018a4  7800              LDRB     r0,[r0,#0]            ;2079  ; bOFF
0018a6  bb88              CBNZ     r0,|L1.6412|
0018a8  482c              LDR      r0,|L1.6492|
0018aa  f9b00000          LDRSH    r0,[r0,#0]            ;2080  ; CAP_WRK_CURR
0018ae  eb000180          ADD      r1,r0,r0,LSL #2       ;2080
0018b2  481d              LDR      r0,|L1.6440|
0018b4  f9b00000          LDRSH    r0,[r0,#0]            ;2080  ; load_I
0018b8  ebb00f41          CMP      r0,r1,LSL #1          ;2080
0018bc  da05              BGE      |L1.6346|
0018be  f8bb1000          LDRH     r1,[r11,#0]           ;2080  ; _x_
0018c2  f1010101          ADD      r1,r1,#1              ;2080
0018c6  e005              B        |L1.6356|
                  |L1.6344|
0018c8  e0dc              B        |L1.6788|
                  |L1.6346|
0018ca  dd05              BLE      |L1.6360|
0018cc  f8bb1000          LDRH     r1,[r11,#0]           ;2081  ; _x_
0018d0  f1a10101          SUB      r1,r1,#1              ;2081
                  |L1.6356|
0018d4  f8ab1000          STRH     r1,[r11,#0]           ;2081
                  |L1.6360|
0018d8  4642              MOV      r2,r8                 ;2082
0018da  4629              MOV      r1,r5                 ;2082
0018dc  4813              LDR      r0,|L1.6444|
0018de  f7fffffe          BL       gran
0018e2  2232              MOVS     r2,#0x32              ;2083
0018e4  4251              RSBS     r1,r2,#0              ;2083
0018e6  4811              LDR      r0,|L1.6444|
0018e8  f7fffffe          BL       gran
0018ec  481c              LDR      r0,|L1.6496|
0018ee  f9b00000          LDRSH    r0,[r0,#0]            ;2085  ; CAP_MAX_VOLT
0018f2  eb000180          ADD      r1,r0,r0,LSL #2       ;2085
0018f6  480e              LDR      r0,|L1.6448|
0018f8  f9b00000          LDRSH    r0,[r0,#0]            ;2085  ; load_U
0018fc  ebb00f41          CMP      r0,r1,LSL #1          ;2085
001900  da30              BGE      |L1.6500|
001902  f8ba1000          LDRH     r1,[r10,#0]           ;2085  ; _xu_
001906  f1010101          ADD      r1,r1,#1              ;2085
00190a  e030              B        |L1.6510|
                  |L1.6412|
00190c  e03b              B        |L1.6534|
00190e  0000              DCW      0x0000
                  |L1.6416|
                          DCD      CURR_FADE_IN
                  |L1.6420|
                          DCD      time_proc
                  |L1.6424|
                          DCD      I_ug_temp
                  |L1.6428|
                          DCD      REV_IS_ON
                  |L1.6432|
                          DCD      AVT_REV_IS_ON
                  |L1.6436|
                          DCD      proc_phase
                  |L1.6440|
                          DCD      load_I
                  |L1.6444|
                          DCD      _x_
                  |L1.6448|
                          DCD      load_U
                  |L1.6452|
                          DCD      U_maxg
                  |L1.6456|
                          DCD      _xu_
                  |L1.6460|
                          DCD      U_MAX
                  |L1.6464|
                          DCD      I_MAX_IPS
                  |L1.6468|
                          DCD      load_U_
                  |L1.6472|
                          DCD      U_up_temp
                  |L1.6476|
                          DCD      I_maxp
                  |L1.6480|
                          DCD      plazma_vol_u_0
                  |L1.6484|
                          DCD      plazma_vol_u_1
                  |L1.6488|
                          DCD      bOFF
                  |L1.6492|
                          DCD      CAP_WRK_CURR
                  |L1.6496|
                          DCD      CAP_MAX_VOLT
                  |L1.6500|
001964  dd05              BLE      |L1.6514|
001966  f8ba1000          LDRH     r1,[r10,#0]           ;2086  ; _xu_
00196a  f1a10101          SUB      r1,r1,#1              ;2086
                  |L1.6510|
00196e  f8aa1000          STRH     r1,[r10,#0]           ;2086
                  |L1.6514|
001972  4642              MOV      r2,r8                 ;2087
001974  4629              MOV      r1,r5                 ;2087
001976  48ff              LDR      r0,|L1.7540|
001978  f7fffffe          BL       gran
00197c  2232              MOVS     r2,#0x32              ;2088
00197e  4251              RSBS     r1,r2,#0              ;2088
001980  48fd              LDR      r0,|L1.7544|
001982  f7fffffe          BL       gran
                  |L1.6534|
001986  48fd              LDR      r0,|L1.7548|
001988  f24271ec          MOV      r1,#0x27ec            ;2093
00198c  f9b00000          LDRSH    r0,[r0,#0]            ;2093  ; CAP_MAX_VOLT
001990  4348              MULS     r0,r1,r0              ;2093
001992  49fb              LDR      r1,|L1.7552|
001994  f9b11000          LDRSH    r1,[r1,#0]            ;2094  ; U_MAX
001998  fb90f0f1          SDIV     r0,r0,r1              ;2094
00199c  9000              STR      r0,[sp,#0]            ;2098
00199e  48f9              LDR      r0,|L1.7556|
0019a0  f24271ec          MOV      r1,#0x27ec            ;2098
0019a4  f9b00000          LDRSH    r0,[r0,#0]            ;2098  ; CAP_WRK_CURR
0019a8  4348              MULS     r0,r1,r0              ;2098
0019aa  49f7              LDR      r1,|L1.7560|
0019ac  f9b11000          LDRSH    r1,[r1,#0]            ;2099  ; I_MAX_IPS
0019b0  fb90f0f1          SDIV     r0,r0,r1              ;2099
0019b4  9001              STR      r0,[sp,#4]            ;2101
0019b6  20ac              MOVS     r0,#0xac              ;2101
0019b8  f7fffffe          BL       lc640_read_int
0019bc  f5a0412b          SUB      r1,r0,#0xab00         ;2101
0019c0  39cd              SUBS     r1,r1,#0xcd           ;2101
0019c2  d10a              BNE      |L1.6618|
0019c4  48ed              LDR      r0,|L1.7548|
0019c6  8800              LDRH     r0,[r0,#0]            ;2103  ; CAP_MAX_VOLT
0019c8  eb000080          ADD      r0,r0,r0,LSL #2       ;2103
0019cc  0040              LSLS     r0,r0,#1              ;2103
0019ce  b200              SXTH     r0,r0                 ;2103
0019d0  f7fffffe          BL       find_U_curve
0019d4  eb000080          ADD      r0,r0,r0,LSL #2       ;2103
0019d8  9000              STR      r0,[sp,#0]            ;2103
                  |L1.6618|
0019da  20ae              MOVS     r0,#0xae              ;2106
0019dc  f7fffffe          BL       lc640_read_int
0019e0  f5a0412b          SUB      r1,r0,#0xab00         ;2106
0019e4  39cd              SUBS     r1,r1,#0xcd           ;2106
0019e6  d10a              BNE      |L1.6654|
0019e8  48e6              LDR      r0,|L1.7556|
0019ea  8800              LDRH     r0,[r0,#0]            ;2108  ; CAP_WRK_CURR
0019ec  eb000080          ADD      r0,r0,r0,LSL #2       ;2108
0019f0  0040              LSLS     r0,r0,#1              ;2108
0019f2  b200              SXTH     r0,r0                 ;2108
0019f4  f7fffffe          BL       find_I_curve
0019f8  eb000080          ADD      r0,r0,r0,LSL #2       ;2108
0019fc  9001              STR      r0,[sp,#4]            ;2108
                  |L1.6654|
0019fe  2000              MOVS     r0,#0                 ;2113
001a00  f9b71000          LDRSH    r1,[r7,#0]            ;1552
001a04  e031              B        |L1.6762|
                  |L1.6662|
001a06  4ae1              LDR      r2,|L1.7564|
001a08  7812              LDRB     r2,[r2,#0]            ;2115  ; bOFF
001a0a  b142              CBZ      r2,|L1.6686|
001a0c  eb000240          ADD      r2,r0,r0,LSL #1       ;2116
001a10  eb041242          ADD      r2,r4,r2,LSL #5       ;2116
001a14  62d5              STR      r5,[r2,#0x2c]         ;2117
001a16  6315              STR      r5,[r2,#0x30]         ;2118
001a18  f8829028          STRB     r9,[r2,#0x28]         ;2118
001a1c  e023              B        |L1.6758|
                  |L1.6686|
001a1e  9a00              LDR      r2,[sp,#0]            ;2120
001a20  b213              SXTH     r3,r2                 ;2120
001a22  f9ba2000          LDRSH    r2,[r10,#0]           ;2120  ; _xu_
001a26  189a              ADDS     r2,r3,r2              ;2120
001a28  eb000340          ADD      r3,r0,r0,LSL #1       ;2120
001a2c  eb041c43          ADD      r12,r4,r3,LSL #5      ;2120
001a30  f8cc202c          STR      r2,[r12,#0x2c]        ;2121
001a34  d502              BPL      |L1.6716|
001a36  f8cc502c          STR      r5,[r12,#0x2c]        ;2121
001a3a  e003              B        |L1.6724|
                  |L1.6716|
001a3c  4542              CMP      r2,r8                 ;2122
001a3e  dd01              BLE      |L1.6724|
001a40  f8cc802c          STR      r8,[r12,#0x2c]        ;2122
                  |L1.6724|
001a44  9a01              LDR      r2,[sp,#4]            ;2123
001a46  b213              SXTH     r3,r2                 ;2123
001a48  f9bb2000          LDRSH    r2,[r11,#0]           ;2123  ; _x_
001a4c  189a              ADDS     r2,r3,r2              ;2123
001a4e  f8cc2030          STR      r2,[r12,#0x30]        ;2124
001a52  d502              BPL      |L1.6746|
001a54  f8cc5030          STR      r5,[r12,#0x30]        ;2124
001a58  e003              B        |L1.6754|
                  |L1.6746|
001a5a  4542              CMP      r2,r8                 ;2125
001a5c  dd01              BLE      |L1.6754|
001a5e  f8cc8030          STR      r8,[r12,#0x30]        ;2125
                  |L1.6754|
001a62  f88c5028          STRB     r5,[r12,#0x28]        ;2126
                  |L1.6758|
001a66  1c40              ADDS     r0,r0,#1              ;2113
001a68  b2c0              UXTB     r0,r0                 ;2113
                  |L1.6762|
001a6a  4288              CMP      r0,r1                 ;2113
001a6c  dbcb              BLT      |L1.6662|
001a6e  e00f              B        |L1.6800|
                  |L1.6768|
;;;2136   		{
;;;2137   		bps[i]._vol_u=0;
001a70  eb000240          ADD      r2,r0,r0,LSL #1
001a74  eb041242          ADD      r2,r4,r2,LSL #5
001a78  1c40              ADDS     r0,r0,#1              ;2135
;;;2138   		bps[i]._vol_i=0;
001a7a  62d5              STR      r5,[r2,#0x2c]
;;;2139   		bps[i]._flags_tu=1;
001a7c  6315              STR      r5,[r2,#0x30]
001a7e  f8823028          STRB     r3,[r2,#0x28]
001a82  b2c0              UXTB     r0,r0                 ;2135
                  |L1.6788|
001a84  4288              CMP      r0,r1                 ;2135
001a86  dbf3              BLT      |L1.6768|
;;;2140   		}
;;;2141   	_x_=0;
001a88  f8ab5000          STRH     r5,[r11,#0]
;;;2142   	_xu_=0;
001a8c  f8aa5000          STRH     r5,[r10,#0]
                  |L1.6800|
;;;2143   	}
;;;2144   
;;;2145   //gran(&bps[0]._vol_u,10,1010);
;;;2146   //gran(&bps[0]._vol_i,10,1010);
;;;2147   
;;;2148   if(pwm_t_reg)
001a90  49bf              LDR      r1,|L1.7568|
001a92  f9b10000          LDRSH    r0,[r1,#0]  ; pwm_t_reg
001a96  b1d8              CBZ      r0,|L1.6864|
;;;2149   	{
;;;2150   	if(--pwm_t_reg==0)
001a98  1e40              SUBS     r0,r0,#1
001a9a  b200              SXTH     r0,r0
001a9c  8008              STRH     r0,[r1,#0]
;;;2151   		{
;;;2152   		pwm_u_reg=0;
001a9e  4abd              LDR      r2,|L1.7572|
;;;2153   		pwm_i_reg=0;
001aa0  49bd              LDR      r1,|L1.7576|
001aa2  b908              CBNZ     r0,|L1.6824|
001aa4  8015              STRH     r5,[r2,#0]            ;2152
001aa6  800d              STRH     r5,[r1,#0]
                  |L1.6824|
;;;2154   		}
;;;2155   	for(i=0;i<NUMIST;i++) 
001aa8  f9b1c000          LDRSH    r12,[r1,#0]
001aac  2000              MOVS     r0,#0
001aae  f9b22000          LDRSH    r2,[r2,#0]
001ab2  f9b71000          LDRSH    r1,[r7,#0]            ;1552
001ab6  e009              B        |L1.6860|
                  |L1.6840|
;;;2156   		{
;;;2157   		bps[i]._vol_u=pwm_u_reg;
001ab8  eb000340          ADD      r3,r0,r0,LSL #1
001abc  eb041343          ADD      r3,r4,r3,LSL #5
001ac0  1c40              ADDS     r0,r0,#1              ;2155
001ac2  e9c32c0b          STRD     r2,r12,[r3,#0x2c]
;;;2158   		bps[i]._vol_i=pwm_i_reg;
;;;2159   		bps[i]._flags_tu=0;
001ac6  f8835028          STRB     r5,[r3,#0x28]
001aca  b2c0              UXTB     r0,r0                 ;2155
                  |L1.6860|
001acc  4288              CMP      r0,r1                 ;2155
001ace  dbf3              BLT      |L1.6840|
                  |L1.6864|
;;;2160   		}
;;;2161   	}
;;;2162   
;;;2163   
;;;2164   for(i=0;i<NUMIST;i++) 
001ad0  2000              MOVS     r0,#0
001ad2  464a              MOV      r2,r9                 ;1504
001ad4  f9b73000          LDRSH    r3,[r7,#0]            ;1552
001ad8  e00e              B        |L1.6904|
;;;2165   	{
;;;2166   	if(bps[i]._av&0x8f)
001ada  bf00              NOP      
                  |L1.6876|
001adc  eb000140          ADD      r1,r0,r0,LSL #1
001ae0  eb041141          ADD      r1,r4,r1,LSL #5
001ae4  784f              LDRB     r7,[r1,#1]
001ae6  f0170f8f          TST      r7,#0x8f
001aea  d003              BEQ      |L1.6900|
;;;2167   		{
;;;2168   		bps[i]._vol_u=0;
;;;2169   		bps[i]._vol_i=0;
001aec  62cd              STR      r5,[r1,#0x2c]
;;;2170   		bps[i]._flags_tu=1;
001aee  630d              STR      r5,[r1,#0x30]
001af0  f8812028          STRB     r2,[r1,#0x28]
                  |L1.6900|
001af4  1c40              ADDS     r0,r0,#1              ;2164
001af6  b2c0              UXTB     r0,r0                 ;2164
                  |L1.6904|
001af8  4298              CMP      r0,r3                 ;2164
001afa  dbef              BLT      |L1.6876|
;;;2171   		}
;;;2172   	}
;;;2173   
;;;2174   b1Hz_sh=0;
001afc  71b5              STRB     r5,[r6,#6]
;;;2175   }
001afe  e8bd9ffc          POP      {r2-r12,pc}
;;;2176   
                          ENDP

                  bps_drv PROC
;;;2185   //-----------------------------------------------
;;;2186   void bps_drv(char in)
001b02  eb000140          ADD      r1,r0,r0,LSL #1
;;;2187   {
;;;2188   char temp;
;;;2189   
;;;2190   if (bps[in]._device!=dSRC) return;
001b06  48a5              LDR      r0,|L1.7580|
001b08  b510              PUSH     {r4,lr}               ;2187
001b0a  eb001041          ADD      r0,r0,r1,LSL #5
001b0e  7801              LDRB     r1,[r0,#0]
001b10  2903              CMP      r1,#3
001b12  d17e              BNE      |L1.7186|
;;;2191   temp=bps[in]._flags_tm;
001b14  f890203e          LDRB     r2,[r0,#0x3e]
;;;2192   if(temp&(1<<AV_T))
;;;2193   	{
;;;2194   	if(bps[in]._temp_av_cnt<10) 
;;;2195   		{
;;;2196   		bps[in]._temp_av_cnt++;
;;;2197   		if(bps[in]._temp_av_cnt>=10)
;;;2198   			{
;;;2199   			bps[in]._temp_av_cnt=10;
001b18  f04f010a          MOV      r1,#0xa
001b1c  0793              LSLS     r3,r2,#30             ;2192
;;;2200   			bps[in]._av|=(1<<0);
;;;2201   		   	//if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
;;;2202   			}
;;;2203   		}
;;;2204   	}
;;;2205   
;;;2206   else if(!(temp&(1<<AV_T)))
;;;2207   	{
;;;2208   	if(bps[in]._temp_av_cnt) 
001b1e  f9b03042          LDRSH    r3,[r0,#0x42]
001b22  d50d              BPL      |L1.6976|
001b24  2b0a              CMP      r3,#0xa               ;2194
001b26  da16              BGE      |L1.6998|
001b28  1c5b              ADDS     r3,r3,#1              ;2196
001b2a  b21b              SXTH     r3,r3                 ;2196
001b2c  f8a03042          STRH     r3,[r0,#0x42]         ;2196
001b30  2b0a              CMP      r3,#0xa               ;2197
001b32  db10              BLT      |L1.6998|
001b34  f8a01042          STRH     r1,[r0,#0x42]         ;2199
001b38  7843              LDRB     r3,[r0,#1]            ;2200
001b3a  f0430301          ORR      r3,r3,#1              ;2200
001b3e  e009              B        |L1.6996|
                  |L1.6976|
001b40  b14b              CBZ      r3,|L1.6998|
;;;2209   		{
;;;2210   		bps[in]._temp_av_cnt--;
001b42  f1a30301          SUB      r3,r3,#1
001b46  b21b              SXTH     r3,r3
001b48  f8a03042          STRH     r3,[r0,#0x42]
;;;2211   		if(!bps[in]._temp_av_cnt)
001b4c  b91b              CBNZ     r3,|L1.6998|
;;;2212   			{
;;;2213   			bps[in]._av&=~(1<<0);
001b4e  7843              LDRB     r3,[r0,#1]
001b50  f0230301          BIC      r3,r3,#1
                  |L1.6996|
001b54  7043              STRB     r3,[r0,#1]
                  |L1.6998|
;;;2214   			//if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
;;;2215   			}
;;;2216   		} 	
;;;2217   
;;;2218   	}
;;;2219   
;;;2220   if((temp&(1<<AVUMAX)))
001b56  0713              LSLS     r3,r2,#28
;;;2221   	{
;;;2222   	if(bps[in]._umax_av_cnt<10) 
;;;2223   		{
;;;2224   		bps[in]._umax_av_cnt++;
;;;2225   		if(bps[in]._umax_av_cnt>=10)
;;;2226   			{ 
;;;2227   			bps[in]._umax_av_cnt=10;
;;;2228   			bps[in]._av|=(1<<1);
;;;2229   			//if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
;;;2230   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;2231   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2232   				{
;;;2233   				apv_cnt[in,0]=APV_INIT;
;;;2234   				apv_cnt[in,1]=APV_INIT;
;;;2235   				apv_cnt[in,2]=APV_INIT;
;;;2236   				apv_flags[in]=afOFF;
;;;2237   				}				*/
;;;2238   						
;;;2239   			}
;;;2240   		} 
;;;2241   	}		
;;;2242   else if(!(temp&(1<<AVUMAX)))
;;;2243   	{
;;;2244   	if(bps[in]._umax_av_cnt>0) 
001b58  f9b03044          LDRSH    r3,[r0,#0x44]
001b5c  f04f0400          MOV      r4,#0                 ;2194
001b60  d50d              BPL      |L1.7038|
001b62  2b0a              CMP      r3,#0xa               ;2222
001b64  da1b              BGE      |L1.7070|
001b66  1c5b              ADDS     r3,r3,#1              ;2224
001b68  b21b              SXTH     r3,r3                 ;2224
001b6a  f8a03044          STRH     r3,[r0,#0x44]         ;2224
001b6e  2b0a              CMP      r3,#0xa               ;2225
001b70  db15              BLT      |L1.7070|
001b72  f8a01044          STRH     r1,[r0,#0x44]         ;2227
001b76  7843              LDRB     r3,[r0,#1]            ;2228
001b78  f0430302          ORR      r3,r3,#2              ;2228
001b7c  e00a              B        |L1.7060|
                  |L1.7038|
001b7e  2b00              CMP      r3,#0
001b80  dd0a              BLE      |L1.7064|
;;;2245   		{
;;;2246   		bps[in]._umax_av_cnt--;
001b82  f1a30301          SUB      r3,r3,#1
001b86  b21b              SXTH     r3,r3
001b88  f8a03044          STRH     r3,[r0,#0x44]
;;;2247   		if(bps[in]._umax_av_cnt==0)
001b8c  b93b              CBNZ     r3,|L1.7070|
;;;2248   			{
;;;2249   			bps[in]._umax_av_cnt=0;
;;;2250   			bps[in]._av&=~(1<<1);
001b8e  7843              LDRB     r3,[r0,#1]
001b90  f0230302          BIC      r3,r3,#2
                  |L1.7060|
001b94  7043              STRB     r3,[r0,#1]
001b96  e002              B        |L1.7070|
                  |L1.7064|
;;;2251   			//avar_bps_hndl(in,1,0);
;;;2252   	 //		apv_cnt[in,0]=0;
;;;2253   	//		apv_cnt[in,1]=0;
;;;2254   	 //		apv_cnt[in,2]=0;			
;;;2255   			}
;;;2256   		}
;;;2257   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
001b98  da01              BGE      |L1.7070|
001b9a  f8a04044          STRH     r4,[r0,#0x44]
                  |L1.7070|
;;;2258   	}
;;;2259   
;;;2260   if(temp&(1<<AVUMIN))
001b9e  06d3              LSLS     r3,r2,#27
001ba0  d50f              BPL      |L1.7106|
;;;2261   	{
;;;2262   	if(bps[in]._umin_av_cnt<10) 
001ba2  f9b03046          LDRSH    r3,[r0,#0x46]
001ba6  2b0a              CMP      r3,#0xa
001ba8  da17              BGE      |L1.7130|
;;;2263   		{
;;;2264   		bps[in]._umin_av_cnt++;
001baa  1c5b              ADDS     r3,r3,#1
001bac  b21b              SXTH     r3,r3
001bae  f8a03046          STRH     r3,[r0,#0x46]
;;;2265   		if(bps[in]._umin_av_cnt>=10)
001bb2  2b0a              CMP      r3,#0xa
001bb4  db11              BLT      |L1.7130|
;;;2266   			{ 
;;;2267   			bps[in]._umin_av_cnt=10;
001bb6  f8a01046          STRH     r1,[r0,#0x46]
;;;2268   			bps[in]._av|=(1<<2);
001bba  7841              LDRB     r1,[r0,#1]
001bbc  f0410104          ORR      r1,r1,#4
001bc0  e00a              B        |L1.7128|
                  |L1.7106|
;;;2269   			//if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
;;;2270   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;2271   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2272   				{
;;;2273   				apv_cnt[in,0]=APV_INIT;
;;;2274   				apv_cnt[in,1]=APV_INIT;
;;;2275   				apv_cnt[in,2]=APV_INIT;
;;;2276   				apv_flags[in]=afOFF;
;;;2277   				}*/				
;;;2278   			}
;;;2279   		} 
;;;2280   	}	
;;;2281   	
;;;2282   else if(!(temp&(1<<AVUMIN)))
;;;2283   	{
;;;2284   	if(bps[in]._umin_av_cnt) 
001bc2  f9b01046          LDRSH    r1,[r0,#0x46]
001bc6  b141              CBZ      r1,|L1.7130|
;;;2285   		{
;;;2286   		bps[in]._umin_av_cnt--;
001bc8  1e49              SUBS     r1,r1,#1
001bca  b209              SXTH     r1,r1
001bcc  f8a01046          STRH     r1,[r0,#0x46]
;;;2287   		if(bps[in]._umin_av_cnt==0)
001bd0  b919              CBNZ     r1,|L1.7130|
;;;2288   			{
;;;2289   			bps[in]._umin_av_cnt=0;
;;;2290   			bps[in]._av&=~(1<<2);
001bd2  7841              LDRB     r1,[r0,#1]
001bd4  f0210104          BIC      r1,r1,#4
                  |L1.7128|
001bd8  7041              STRB     r1,[r0,#1]
                  |L1.7130|
;;;2291   		//	avar_bps_hndl(in,2,0);
;;;2292   		//	apv_cnt[in,0]=0;
;;;2293   		//	apv_cnt[in,1]=0;
;;;2294   		//	apv_cnt[in,2]=0;
;;;2295   			}
;;;2296   		}
;;;2297   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;2298   	}
;;;2299   
;;;2300   //bps[in]._state=bsOFF;
;;;2301   
;;;2302   
;;;2303   if(((work_stat==wsGS) || (work_stat==wsPS))&&(UOUT_OFF_EN))
001bda  4971              LDR      r1,|L1.7584|
001bdc  780b              LDRB     r3,[r1,#0]  ; work_stat
001bde  2b01              CMP      r3,#1
001be0  d001              BEQ      |L1.7142|
001be2  2b02              CMP      r3,#2
001be4  d134              BNE      |L1.7248|
                  |L1.7142|
001be6  496f              LDR      r1,|L1.7588|
001be8  8809              LDRH     r1,[r1,#0]  ; UOUT_OFF_EN
001bea  b361              CBZ      r1,|L1.7238|
;;;2304   	{
;;;2305   	short tempU;
;;;2306   	long tempL;
;;;2307   
;;;2308   	tempU= U_maxg;
001bec  496e              LDR      r1,|L1.7592|
;;;2309   	if(work_stat==wsPS)tempU= U_up_temp;
001bee  2b02              CMP      r3,#2
001bf0  f9b11000          LDRSH    r1,[r1,#0]            ;2308  ; U_maxg
001bf4  d102              BNE      |L1.7164|
001bf6  496d              LDR      r1,|L1.7596|
001bf8  f9b11000          LDRSH    r1,[r1,#0]  ; U_up_temp
                  |L1.7164|
;;;2310   
;;;2311   	tempL=((long)tempU)*((long)(100+UOUT_OFF_LEVEL));
001bfc  4b6c              LDR      r3,|L1.7600|
001bfe  f9b33000          LDRSH    r3,[r3,#0]  ; UOUT_OFF_LEVEL
001c02  3364              ADDS     r3,r3,#0x64
001c04  4359              MULS     r1,r3,r1
;;;2312   	tempL/=100L;
001c06  2364              MOVS     r3,#0x64
001c08  fb91f1f3          SDIV     r1,r1,r3
;;;2313   
;;;2314   	tempU=(short)tempL;
001c0c  b209              SXTH     r1,r1
;;;2315   	plazma_umax=tempU;
001c0e  4b69              LDR      r3,|L1.7604|
001c10  e000              B        |L1.7188|
                  |L1.7186|
001c12  e04e              B        |L1.7346|
                  |L1.7188|
001c14  8019              STRH     r1,[r3,#0]
;;;2316   
;;;2317   	if(bps[in]._Uii>tempU)
001c16  6983              LDR      r3,[r0,#0x18]
001c18  428b              CMP      r3,r1
;;;2318   		{
;;;2319   		if(bps[in]._uout_avar_cnt<(UOUT_OFF_DELAY*10))
;;;2320   			{
;;;2321   			bps[in]._uout_avar_cnt++;
;;;2322   			if(bps[in]._uout_avar_cnt>=(UOUT_OFF_DELAY*10))
;;;2323   				{
;;;2324   				bps[in]._av|=0x80;
;;;2325   				}
;;;2326   			}
;;;2327   		}
;;;2328   	else 
;;;2329   		{
;;;2330   		if(bps[in]._uout_avar_cnt) bps[in]._uout_avar_cnt--;
001c1a  f8901052          LDRB     r1,[r0,#0x52]
001c1e  dd13              BLE      |L1.7240|
001c20  4b65              LDR      r3,|L1.7608|
001c22  f9b33000          LDRSH    r3,[r3,#0]            ;2319  ; UOUT_OFF_DELAY
001c26  eb030383          ADD      r3,r3,r3,LSL #2       ;2319
001c2a  ebb10f43          CMP      r1,r3,LSL #1          ;2319
001c2e  da0f              BGE      |L1.7248|
001c30  1c49              ADDS     r1,r1,#1              ;2321
001c32  b2c9              UXTB     r1,r1                 ;2321
001c34  f8801052          STRB     r1,[r0,#0x52]         ;2321
001c38  ebb10f43          CMP      r1,r3,LSL #1          ;2322
001c3c  db08              BLT      |L1.7248|
001c3e  7841              LDRB     r1,[r0,#1]            ;2324
001c40  f0410180          ORR      r1,r1,#0x80           ;2324
001c44  7041              STRB     r1,[r0,#1]            ;2324
                  |L1.7238|
001c46  e003              B        |L1.7248|
                  |L1.7240|
001c48  b111              CBZ      r1,|L1.7248|
001c4a  1e49              SUBS     r1,r1,#1
001c4c  f8801052          STRB     r1,[r0,#0x52]
                  |L1.7248|
;;;2331   		}
;;;2332   
;;;2333   
;;;2334   
;;;2335   
;;;2336   
;;;2337   	}
;;;2338   
;;;2339   
;;;2340   
;;;2341   if (bps[in]._av&0x8f)					bps[in]._state=bsAV;
001c50  7841              LDRB     r1,[r0,#1]
001c52  f0110f8f          TST      r1,#0x8f
001c56  d001              BEQ      |L1.7260|
001c58  2204              MOVS     r2,#4
001c5a  e00f              B        |L1.7292|
                  |L1.7260|
;;;2342   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
001c5c  4b57              LDR      r3,|L1.7612|
001c5e  781b              LDRB     r3,[r3,#0]  ; net_av
001c60  b123              CBZ      r3,|L1.7276|
001c62  78c3              LDRB     r3,[r0,#3]
001c64  2b14              CMP      r3,#0x14
001c66  d901              BLS      |L1.7276|
;;;2343   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
001c68  2205              MOVS     r2,#5
001c6a  e007              B        |L1.7292|
                  |L1.7276|
;;;2344   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
001c6c  0692              LSLS     r2,r2,#26
001c6e  d501              BPL      |L1.7284|
001c70  2202              MOVS     r2,#2
001c72  e003              B        |L1.7292|
                  |L1.7284|
;;;2345   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
001c74  78c2              LDRB     r2,[r0,#3]
001c76  2a14              CMP      r2,#0x14
001c78  d201              BCS      |L1.7294|
001c7a  2201              MOVS     r2,#1
                  |L1.7292|
001c7c  7082              STRB     r2,[r0,#2]
                  |L1.7294|
;;;2346   
;;;2347   
;;;2348   
;;;2349   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;2350   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;2351   //else bps[0]._state=ssNOT;
;;;2352   
;;;2353   //bps[in]._is_ready=0;
;;;2354   //bps[in]._is_wrk=0;
;;;2355   //if(bps[in]._av_net) bps[in]._flags_bp='N';// не подключен
;;;2356   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// завышено напряжение(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;2357   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// занижено напряжение
;;;2358   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// температура
;;;2359   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;2360   //	{
;;;2361   //	bps[in]._flags_bp='B';// заблокирован
;;;2362   //	bps[in]._is_ready=1;
;;;2363   //	}
;;;2364   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;2365   //     {
;;;2366   //     bps[in]._flags_bp='W';// работает
;;;2367   //     bps[in]._is_ready=1;
;;;2368   //     bps[in]._is_wrk=1;
;;;2369        
;;;2370   //     }
;;;2371   //else bps[in]._is_ready=1;     
;;;2372   
;;;2373   
;;;2374   
;;;2375   
;;;2376   
;;;2377   /*
;;;2378   bps[in]._flags_tu&=BIN8(11111110);
;;;2379   if(bps[in]._ist_blok_cnt)
;;;2380   	{
;;;2381   	bps[in]._ist_blok_cnt--;
;;;2382   	bps[in]._flags_tu|=BIN8(1);
;;;2383   	}
;;;2384   
;;;2385   	   */ 
;;;2386   
;;;2387   //Пересброс БПСа при потере связи
;;;2388   if(bps[in]._cnt>=10) 
001c7e  78c2              LDRB     r2,[r0,#3]
001c80  2a0a              CMP      r2,#0xa
;;;2389   	{
;;;2390   	bps[in]._flags_tu|=BIN8(10000000);
;;;2391   	bps[in]._av|=(1<<3);
;;;2392   	}
;;;2393   else 
;;;2394   	{
;;;2395   	bps[in]._flags_tu&=BIN8(1111111);
001c82  f8902028          LDRB     r2,[r0,#0x28]
001c86  d306              BCC      |L1.7318|
001c88  f0420280          ORR      r2,r2,#0x80           ;2390
001c8c  f8802028          STRB     r2,[r0,#0x28]         ;2390
001c90  f0410108          ORR      r1,r1,#8              ;2391
001c94  e005              B        |L1.7330|
                  |L1.7318|
001c96  f002027f          AND      r2,r2,#0x7f
001c9a  f8802028          STRB     r2,[r0,#0x28]
;;;2396   	bps[in]._av&=~(1<<3);
001c9e  f0210108          BIC      r1,r1,#8
                  |L1.7330|
001ca2  7041              STRB     r1,[r0,#1]
;;;2397   	}
;;;2398   bps[in]._vol_u=cntrl_stat_U;	
001ca4  4946              LDR      r1,|L1.7616|
001ca6  f9b12014          LDRSH    r2,[r1,#0x14]  ; cntrl_stat_U
;;;2399   bps[in]._vol_i=cntrl_stat_I;
001caa  62c2              STR      r2,[r0,#0x2c]
001cac  f9b11016          LDRSH    r1,[r1,#0x16]  ; cntrl_stat_I
001cb0  6301              STR      r1,[r0,#0x30]
                  |L1.7346|
;;;2400    
;;;2401   }
001cb2  bd10              POP      {r4,pc}
;;;2402   
                          ENDP

                  zar_superviser_start PROC
;;;2405   //-----------------------------------------------
;;;2406   void zar_superviser_start(void)
001cb4  4943              LDR      r1,|L1.7620|
;;;2407   {
;;;2408   sign_U[0]=1;
;;;2409   sign_I[0]=1;
001cb6  4a44              LDR      r2,|L1.7624|
001cb8  2001              MOVS     r0,#1                 ;2408
001cba  7008              STRB     r0,[r1,#0]            ;2408
001cbc  7010              STRB     r0,[r2,#0]
;;;2410   sign_U[1]=1;
001cbe  7048              STRB     r0,[r1,#1]
;;;2411   sign_I[1]=1;
001cc0  7050              STRB     r0,[r2,#1]
;;;2412   
;;;2413   }
001cc2  4770              BX       lr
;;;2414   
                          ENDP

                  volt_contr_hndl PROC
;;;2415   //-----------------------------------------------
;;;2416   void volt_contr_hndl(void)
001cc4  e92d47f0          PUSH     {r4-r10,lr}
;;;2417   {
;;;2418   if(work_stat==wsOFF)
001cc8  4835              LDR      r0,|L1.7584|
;;;2419   	{
;;;2420   	cnt_volt_contr=0;
;;;2421   	}
;;;2422   else 
;;;2423   	{
;;;2424   	if(cnt_volt_contr<(T_DEL_REL_VOLT_START*10))
001cca  4e40              LDR      r6,|L1.7628|
001ccc  4c3c              LDR      r4,|L1.7616|
001cce  7800              LDRB     r0,[r0,#0]            ;2418  ; work_stat
001cd0  2500              MOVS     r5,#0                 ;2418
001cd2  b310              CBZ      r0,|L1.7450|
001cd4  f9b60000          LDRSH    r0,[r6,#0]  ; T_DEL_REL_VOLT_START
001cd8  eb000180          ADD      r1,r0,r0,LSL #2
001cdc  f9b40028          LDRSH    r0,[r4,#0x28]  ; cnt_volt_contr
001ce0  ebb00f41          CMP      r0,r1,LSL #1
001ce4  da01              BGE      |L1.7402|
;;;2425   		{
;;;2426   		cnt_volt_contr++;
001ce6  1c40              ADDS     r0,r0,#1
001ce8  8520              STRH     r0,[r4,#0x28]
                  |L1.7402|
;;;2427   		}
;;;2428   	}
;;;2429   
;;;2430   	
;;;2431   	if(load_U>REL_VOLT_UMIN*10)
001cea  4839              LDR      r0,|L1.7632|
001cec  f8df80e4          LDR      r8,|L1.7636|
;;;2432   		{
;;;2433   		cnt_rel_volt_umin++;
;;;2434   		gran(&cnt_rel_volt_umin,0,30000);
001cf0  f2475a30          MOV      r10,#0x7530
001cf4  f9b00000          LDRSH    r0,[r0,#0]            ;2431  ; REL_VOLT_UMIN
001cf8  eb000180          ADD      r1,r0,r0,LSL #2       ;2431
001cfc  f9b80000          LDRSH    r0,[r8,#0]            ;2431  ; load_U
001d00  ebb00f41          CMP      r0,r1,LSL #1          ;2431
001d04  dd0b              BLE      |L1.7454|
001d06  8d60              LDRH     r0,[r4,#0x2a]         ;2433  ; cnt_rel_volt_umin
001d08  4652              MOV      r2,r10
001d0a  1c40              ADDS     r0,r0,#1              ;2433
001d0c  8560              STRH     r0,[r4,#0x2a]         ;2433
001d0e  482c              LDR      r0,|L1.7616|
001d10  2100              MOVS     r1,#0
001d12  302a              ADDS     r0,r0,#0x2a
001d14  f7fffffe          BL       gran
001d18  e002              B        |L1.7456|
                  |L1.7450|
001d1a  8525              STRH     r5,[r4,#0x28]         ;2420
001d1c  e7e5              B        |L1.7402|
                  |L1.7454|
;;;2435   		}
;;;2436   	else cnt_rel_volt_umin=0;
001d1e  8565              STRH     r5,[r4,#0x2a]
                  |L1.7456|
;;;2437   	if((cnt_rel_volt_umin>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_DOWN=1;
001d20  f8df90b4          LDR      r9,|L1.7640|
001d24  2701              MOVS     r7,#1
001d26  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
001d2a  eb000180          ADD      r1,r0,r0,LSL #2
001d2e  f9b4002a          LDRSH    r0,[r4,#0x2a]  ; cnt_rel_volt_umin
001d32  ebb00f41          CMP      r0,r1,LSL #1
001d36  db0a              BLT      |L1.7502|
001d38  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
001d3c  f9b42028          LDRSH    r2,[r4,#0x28]  ; cnt_volt_contr
001d40  eb010181          ADD      r1,r1,r1,LSL #2
001d44  ebb20f41          CMP      r2,r1,LSL #1
001d48  db01              BLT      |L1.7502|
001d4a  7327              STRB     r7,[r4,#0xc]
001d4c  e001              B        |L1.7506|
                  |L1.7502|
;;;2438   	else if(cnt_rel_volt_umin==0)							  							bVOLT_IS_NOT_DOWN=0;
001d4e  b900              CBNZ     r0,|L1.7506|
001d50  7325              STRB     r5,[r4,#0xc]
                  |L1.7506|
;;;2439   
;;;2440   	if(load_U<REL_VOLT_UMAX*10)
001d52  4822              LDR      r0,|L1.7644|
001d54  f9b00000          LDRSH    r0,[r0,#0]  ; REL_VOLT_UMAX
001d58  eb000180          ADD      r1,r0,r0,LSL #2
001d5c  f9b80000          LDRSH    r0,[r8,#0]  ; load_U
001d60  ebb00f41          CMP      r0,r1,LSL #1
001d64  da40              BGE      |L1.7656|
;;;2441   		{
;;;2442   		cnt_rel_volt_umax++;
001d66  8da0              LDRH     r0,[r4,#0x2c]  ; cnt_rel_volt_umax
;;;2443   		gran(&cnt_rel_volt_umax,0,30000);
001d68  4652              MOV      r2,r10
001d6a  1c40              ADDS     r0,r0,#1              ;2442
001d6c  85a0              STRH     r0,[r4,#0x2c]         ;2442
001d6e  2100              MOVS     r1,#0
001d70  4813              LDR      r0,|L1.7616|
001d72  e035              B        |L1.7648|
                  |L1.7540|
                          DCD      _x_
                  |L1.7544|
                          DCD      _xu_
                  |L1.7548|
                          DCD      CAP_MAX_VOLT
                  |L1.7552|
                          DCD      U_MAX
                  |L1.7556|
                          DCD      CAP_WRK_CURR
                  |L1.7560|
                          DCD      I_MAX_IPS
                  |L1.7564|
                          DCD      bOFF
                  |L1.7568|
                          DCD      pwm_t_reg
                  |L1.7572|
                          DCD      pwm_u_reg
                  |L1.7576|
                          DCD      pwm_i_reg
                  |L1.7580|
                          DCD      bps
                  |L1.7584|
                          DCD      work_stat
                  |L1.7588|
                          DCD      UOUT_OFF_EN
                  |L1.7592|
                          DCD      U_maxg
                  |L1.7596|
                          DCD      U_up_temp
                  |L1.7600|
                          DCD      UOUT_OFF_LEVEL
                  |L1.7604|
                          DCD      plazma_umax
                  |L1.7608|
                          DCD      UOUT_OFF_DELAY
                  |L1.7612|
                          DCD      net_av
                  |L1.7616|
                          DCD      ||area_number.18||
                  |L1.7620|
                          DCD      sign_U
                  |L1.7624|
                          DCD      sign_I
                  |L1.7628|
                          DCD      T_DEL_REL_VOLT_START
                  |L1.7632|
                          DCD      REL_VOLT_UMIN
                  |L1.7636|
                          DCD      load_U
                  |L1.7640|
                          DCD      T_DEL_REL_VOLT_WRK
                  |L1.7644|
                          DCD      REL_VOLT_UMAX
                  |L1.7648|
001de0  302c              ADDS     r0,r0,#0x2c
001de2  f7fffffe          BL       gran
001de6  e000              B        |L1.7658|
                  |L1.7656|
;;;2444   		}
;;;2445   	else cnt_rel_volt_umax=0;
001de8  85a5              STRH     r5,[r4,#0x2c]
                  |L1.7658|
;;;2446   	if((cnt_rel_volt_umax>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_UP=1;
001dea  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
001dee  eb000180          ADD      r1,r0,r0,LSL #2
001df2  f9b4002c          LDRSH    r0,[r4,#0x2c]  ; cnt_rel_volt_umax
001df6  ebb00f41          CMP      r0,r1,LSL #1
001dfa  db0a              BLT      |L1.7698|
001dfc  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
001e00  f9b42028          LDRSH    r2,[r4,#0x28]  ; cnt_volt_contr
001e04  eb010181          ADD      r1,r1,r1,LSL #2
001e08  ebb20f41          CMP      r2,r1,LSL #1
001e0c  db01              BLT      |L1.7698|
001e0e  7367              STRB     r7,[r4,#0xd]
001e10  e002              B        |L1.7704|
                  |L1.7698|
;;;2447   	else if(cnt_rel_volt_umax==0)							  							bVOLT_IS_NOT_UP=0;
001e12  b130              CBZ      r0,|L1.7714|
;;;2448   	
;;;2449   	if(bVOLT_IS_NOT_UP && bVOLT_IS_NOT_DOWN) bVOLT_IS_NORM=1;
001e14  7b60              LDRB     r0,[r4,#0xd]  ; bVOLT_IS_NOT_UP
001e16  b128              CBZ      r0,|L1.7716|
                  |L1.7704|
001e18  7b20              LDRB     r0,[r4,#0xc]  ; bVOLT_IS_NOT_DOWN
001e1a  b118              CBZ      r0,|L1.7716|
001e1c  73a7              STRB     r7,[r4,#0xe]
                  |L1.7710|
;;;2450   	else bVOLT_IS_NORM=0;
;;;2451   
;;;2452   
;;;2453   }
001e1e  e8bd87f0          POP      {r4-r10,pc}
                  |L1.7714|
001e22  7365              STRB     r5,[r4,#0xd]          ;2447
                  |L1.7716|
001e24  73a5              STRB     r5,[r4,#0xe]          ;2450
001e26  e7fa              B        |L1.7710|
;;;2454   
                          ENDP

                  current_stab_hndl PROC
;;;2455   //-----------------------------------------------
;;;2456   void current_stab_hndl(void)
001e28  e92d5ff0          PUSH     {r4-r12,lr}
;;;2457   {
;;;2458   
;;;2459   if(work_stat==wsPS)
001e2c  48c6              LDR      r0,|L1.8520|
;;;2460   	{
;;;2461   	delta_U_abs=abs_pal(load_U-U_up);
001e2e  f8df8320          LDR      r8,|L1.8528|
;;;2462   	delta_U_rel=(delta_U_abs*100)/U_up;
;;;2463   
;;;2464   	delta_I_abs=abs_pal(load_I-I_maxp);
001e32  f8dfb320          LDR      r11,|L1.8532|
001e36  7801              LDRB     r1,[r0,#0]            ;2459  ; work_stat
001e38  48c4              LDR      r0,|L1.8524|
001e3a  f8dfa31c          LDR      r10,|L1.8536|
001e3e  4dc7              LDR      r5,|L1.8540|
001e40  f9b00000          LDRSH    r0,[r0,#0]            ;2461
;;;2465   	delta_I_rel=(delta_I_abs*100)/I_maxp;
001e44  4ec6              LDR      r6,|L1.8544|
;;;2466   	}
;;;2467   
;;;2468   else if(work_stat==wsGS)
;;;2469   	{
;;;2470   	delta_U_abs=abs_pal(load_U-U_maxg);
;;;2471   	delta_U_rel=(delta_U_abs*100)/U_maxg;
;;;2472   
;;;2473   	delta_I_abs=abs_pal(load_I-I_ug_temp);
;;;2474   	delta_I_rel=(delta_I_abs*100)/I_ug_temp;
;;;2475   	}
;;;2476   else 
;;;2477   	{
;;;2478   	cnt_del_rel=0;
001e46  2700              MOVS     r7,#0
001e48  4cc6              LDR      r4,|L1.8548|
001e4a  2902              CMP      r1,#2                 ;2459
001e4c  d011              BEQ      |L1.7794|
001e4e  2901              CMP      r1,#1                 ;2468
001e50  d025              BEQ      |L1.7838|
001e52  8027              STRH     r7,[r4,#0]
                  |L1.7764|
;;;2479   	}
;;;2480   
;;;2481   if((delta_U_rel>DELT_REL_CURR_U)&&(delta_I_rel<DELT_REL_CURR_I))
001e54  49c4              LDR      r1,|L1.8552|
001e56  6828              LDR      r0,[r5,#0]  ; delta_U_rel
001e58  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_U
001e5c  4288              CMP      r0,r1
001e5e  dd43              BLE      |L1.7912|
001e60  49c2              LDR      r1,|L1.8556|
001e62  6830              LDR      r0,[r6,#0]  ; delta_I_rel
001e64  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_I
001e68  4288              CMP      r0,r1
001e6a  da3d              BGE      |L1.7912|
;;;2482   	{
;;;2483   	cnt_del_rel++;
001e6c  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001e6e  1c40              ADDS     r0,r0,#1
001e70  e03c              B        |L1.7916|
                  |L1.7794|
001e72  f8df92fc          LDR      r9,|L1.8560|
001e76  f8b91000          LDRH     r1,[r9,#0]            ;2461  ; U_up
001e7a  1a40              SUBS     r0,r0,r1              ;2461
001e7c  b200              SXTH     r0,r0                 ;2461
001e7e  f7fffffe          BL       abs_pal
001e82  f8c80000          STR      r0,[r8,#0]            ;2462  ; delta_U_abs
001e86  2164              MOVS     r1,#0x64              ;2462
001e88  4348              MULS     r0,r1,r0              ;2462
001e8a  f9b91000          LDRSH    r1,[r9,#0]            ;2462  ; U_up
001e8e  f8df82e4          LDR      r8,|L1.8564|
001e92  fb90f0f1          SDIV     r0,r0,r1              ;2462
001e96  6028              STR      r0,[r5,#0]            ;2464  ; delta_U_rel
001e98  f8bb1000          LDRH     r1,[r11,#0]           ;2464  ; load_I
001e9c  e014              B        |L1.7880|
                  |L1.7838|
001e9e  f8df92d8          LDR      r9,|L1.8568|
001ea2  f8b91000          LDRH     r1,[r9,#0]            ;2470  ; U_maxg
001ea6  1a40              SUBS     r0,r0,r1              ;2470
001ea8  b200              SXTH     r0,r0                 ;2470
001eaa  f7fffffe          BL       abs_pal
001eae  f8c80000          STR      r0,[r8,#0]            ;2471  ; delta_U_abs
001eb2  2164              MOVS     r1,#0x64              ;2471
001eb4  4348              MULS     r0,r1,r0              ;2471
001eb6  f9b91000          LDRSH    r1,[r9,#0]            ;2471  ; U_maxg
001eba  f8df82c0          LDR      r8,|L1.8572|
001ebe  fb90f0f1          SDIV     r0,r0,r1              ;2471
001ec2  6028              STR      r0,[r5,#0]            ;2473  ; delta_U_rel
001ec4  f8bb1000          LDRH     r1,[r11,#0]           ;2473  ; load_I
                  |L1.7880|
001ec8  f8b80000          LDRH     r0,[r8,#0]            ;2473  ; I_ug_temp
001ecc  1a08              SUBS     r0,r1,r0              ;2473
001ece  b200              SXTH     r0,r0                 ;2473
001ed0  f7fffffe          BL       abs_pal
001ed4  2164              MOVS     r1,#0x64              ;2474
001ed6  f8ca0000          STR      r0,[r10,#0]           ;2474  ; delta_I_abs
001eda  4348              MULS     r0,r1,r0              ;2474
001edc  f9b81000          LDRSH    r1,[r8,#0]            ;2474  ; I_ug_temp
001ee0  fb90f0f1          SDIV     r0,r0,r1              ;2474
001ee4  6030              STR      r0,[r6,#0]            ;2474  ; delta_I_rel
001ee6  e7b5              B        |L1.7764|
                  |L1.7912|
;;;2484   	}
;;;2485   else
;;;2486   	{
;;;2487   	cnt_del_rel--;
001ee8  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001eea  1e40              SUBS     r0,r0,#1
                  |L1.7916|
;;;2488   	}
;;;2489   
;;;2490   gran(&cnt_del_rel,0,(T_DEL_REL_CURR_WRK*10)+10);
001eec  4da4              LDR      r5,|L1.8576|
001eee  8020              STRH     r0,[r4,#0]            ;2487
001ef0  210a              MOVS     r1,#0xa
001ef2  8828              LDRH     r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
001ef4  eb000080          ADD      r0,r0,r0,LSL #2
001ef8  eb010040          ADD      r0,r1,r0,LSL #1
001efc  b202              SXTH     r2,r0
001efe  2100              MOVS     r1,#0
001f00  4898              LDR      r0,|L1.8548|
001f02  f7fffffe          BL       gran
;;;2491   
;;;2492   if(work_stat==wsOFF) cnt_del_rel=0;
001f06  4890              LDR      r0,|L1.8520|
001f08  7800              LDRB     r0,[r0,#0]  ; work_stat
001f0a  b900              CBNZ     r0,|L1.7950|
001f0c  8027              STRH     r7,[r4,#0]
                  |L1.7950|
;;;2493   
;;;2494   
;;;2495   if ( (time_proc>=(T_DEL_REL_CURR_START)) &&
001f0e  489d              LDR      r0,|L1.8580|
001f10  499d              LDR      r1,|L1.8584|
;;;2496   	(cnt_del_rel>(T_DEL_REL_CURR_WRK*10)) )
;;;2497   	{
;;;2498   	bCURRENT_STAB=1;
001f12  4a9e              LDR      r2,|L1.8588|
001f14  6800              LDR      r0,[r0,#0]            ;2495  ; time_proc
001f16  f9b11000          LDRSH    r1,[r1,#0]            ;2495  ; T_DEL_REL_CURR_START
001f1a  4288              CMP      r0,r1                 ;2495
001f1c  db0a              BLT      |L1.7988|
001f1e  f9b53000          LDRSH    r3,[r5,#0]            ;2496  ; T_DEL_REL_CURR_WRK
001f22  f9b46000          LDRSH    r6,[r4,#0]            ;2496  ; cnt_del_rel
001f26  eb030383          ADD      r3,r3,r3,LSL #2       ;2496
001f2a  ebb60f43          CMP      r6,r3,LSL #1          ;2496
001f2e  dd01              BLE      |L1.7988|
001f30  2301              MOVS     r3,#1
001f32  7013              STRB     r3,[r2,#0]
                  |L1.7988|
;;;2499   	}
;;;2500   if ( (time_proc<(T_DEL_REL_CURR_START)) ||
001f34  4288              CMP      r0,r1
001f36  db08              BLT      |L1.8010|
;;;2501   	(cnt_del_rel<=(T_DEL_REL_CURR_WRK*10)) )
001f38  f9b50000          LDRSH    r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
001f3c  f9b41000          LDRSH    r1,[r4,#0]  ; cnt_del_rel
001f40  eb000080          ADD      r0,r0,r0,LSL #2
001f44  ebb10f40          CMP      r1,r0,LSL #1
001f48  dc00              BGT      |L1.8012|
                  |L1.8010|
;;;2502   	{
;;;2503   	bCURRENT_STAB=0;
001f4a  7017              STRB     r7,[r2,#0]
                  |L1.8012|
;;;2504   	}
;;;2505   
;;;2506   /*
;;;2507   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
;;;2508   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
;;;2509   //SET_REG(LPC_GPIO0->FIOSET,1,5,1);
;;;2510   
;;;2511   if(RELE_LOG_CURR==0)
;;;2512   	{
;;;2513   	SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2514   	}
;;;2515   else if(RELE_LOG_CURR==1)
;;;2516   	{
;;;2517   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2518   	else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2519   	}
;;;2520   else
;;;2521   	{
;;;2522   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2523   	else SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2524   	}*/
;;;2525   
;;;2526   }
001f4c  e8bd9ff0          POP      {r4-r12,pc}
;;;2527   
                          ENDP

                  revers_hndl PROC
;;;2528   //-----------------------------------------------
;;;2529   void revers_hndl(void)
001f50  488f              LDR      r0,|L1.8592|
;;;2530   {
;;;2531   SET_REG(LPC_PINCON->PINSEL0,0,4*2,2);
001f52  6801              LDR      r1,[r0,#0]
001f54  f4217140          BIC      r1,r1,#0x300
001f58  6001              STR      r1,[r0,#0]
;;;2532   SET_REG(LPC_GPIO0->FIODIR,1,4,1);
001f5a  488e              LDR      r0,|L1.8596|
001f5c  6801              LDR      r1,[r0,#0]
001f5e  f0410110          ORR      r1,r1,#0x10
001f62  6001              STR      r1,[r0,#0]
;;;2533   //SET_REG(LPC_GPIO0->FIOSET,1,5,1);
;;;2534   
;;;2535   if(work_stat==wsCAP) 
001f64  4978              LDR      r1,|L1.8520|
001f66  7809              LDRB     r1,[r1,#0]  ; work_stat
001f68  2903              CMP      r1,#3
001f6a  d003              BEQ      |L1.8052|
;;;2536   	{
;;;2537   	if(bRAZR) SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
;;;2538   	else SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2539   	} 
;;;2540   else 
;;;2541   	{
;;;2542   	if(REV_STAT==rsREW)
001f6c  498a              LDR      r1,|L1.8600|
001f6e  7809              LDRB     r1,[r1,#0]  ; REV_STAT
001f70  b119              CBZ      r1,|L1.8058|
001f72  e007              B        |L1.8068|
                  |L1.8052|
001f74  4989              LDR      r1,|L1.8604|
001f76  7809              LDRB     r1,[r1,#0]            ;2537  ; bRAZR
001f78  b121              CBZ      r1,|L1.8068|
                  |L1.8058|
;;;2543   		{
;;;2544   		SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
001f7a  6941              LDR      r1,[r0,#0x14]
001f7c  f0210110          BIC      r1,r1,#0x10
                  |L1.8064|
001f80  6141              STR      r1,[r0,#0x14]         ;2538
;;;2545   		}
;;;2546   	else 	
;;;2547   		{
;;;2548   		SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2549   		}
;;;2550   	}
;;;2551   }
001f82  4770              BX       lr
                  |L1.8068|
001f84  6941              LDR      r1,[r0,#0x14]         ;2548
001f86  f0410110          ORR      r1,r1,#0x10           ;2548
001f8a  e7f9              B        |L1.8064|
;;;2552   
                          ENDP

                  rele_hndl PROC
;;;2553   //-----------------------------------------------
;;;2554   void rele_hndl(void)
001f8c  e92d4ff0          PUSH     {r4-r11,lr}
;;;2555   {
;;;2556   //Реле1
;;;2557   if(RELE_FUNC[0]==0)rele_stat[0]=rsOFF; 		//Выключено
;;;2558   else if(RELE_FUNC[0]==1)					//Реверс
;;;2559   	{
;;;2560   	if(work_stat==wsCAP) 
001f90  486d              LDR      r0,|L1.8520|
001f92  f8dfe20c          LDR      lr,|L1.8608|
;;;2561   		{
;;;2562   		if(bRAZR) rele_stat[0]=rsOFF;
;;;2563   		else 	rele_stat[0]=rsON;
;;;2564   		} 
;;;2565   	else 
;;;2566   		{
;;;2567   		if(REV_STAT==rsREW)	rele_stat[0]=rsOFF;
;;;2568   		else 			rele_stat[0]=rsON;
;;;2569   		}
;;;2570   	}
;;;2571   else if(RELE_FUNC[0]==2)					//Токоограничение
;;;2572   	{
;;;2573   	if(RELE_LOG_CURR==0)
001f96  4b83              LDR      r3,|L1.8612|
001f98  f890c000          LDRB     r12,[r0,#0]           ;2560
001f9c  487f              LDR      r0,|L1.8604|
001f9e  f9b36000          LDRSH    r6,[r3,#0]
;;;2574   		{
;;;2575   		if(bCURRENT_STAB==0)	rele_stat[0]=rsON;
;;;2576   		else 				rele_stat[0]=rsOFF;
;;;2577   		}
;;;2578   	else if(RELE_LOG_CURR==1)
;;;2579   		{
;;;2580   		if(bCURRENT_STAB==0)	rele_stat[0]=rsOFF;
;;;2581   		else 				rele_stat[0]=rsON;
;;;2582   		}
;;;2583   	}									
;;;2584   else if(RELE_FUNC[0]==3)					//Напряжение в норме
;;;2585   	{
;;;2586   	if(RELE_LOG_VOLT==0)
001fa2  4b81              LDR      r3,|L1.8616|
001fa4  7800              LDRB     r0,[r0,#0]            ;2562
001fa6  f9be4000          LDRSH    r4,[lr,#0]            ;2557  ; RELE_FUNC
001faa  4682              MOV      r10,r0                ;2562
001fac  487a              LDR      r0,|L1.8600|
001fae  2201              MOVS     r2,#1                 ;2557
001fb0  f9b33000          LDRSH    r3,[r3,#0]
001fb4  7800              LDRB     r0,[r0,#0]            ;2567
001fb6  2100              MOVS     r1,#0                 ;2557
001fb8  4683              MOV      r11,r0                ;2567
001fba  4874              LDR      r0,|L1.8588|
001fbc  7805              LDRB     r5,[r0,#0]            ;2575
;;;2587   		{
;;;2588   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsON;
001fbe  f1ae0032          SUB      r0,lr,#0x32
001fc2  7b87              LDRB     r7,[r0,#0xe]
;;;2589   		else 				rele_stat[0]=rsOFF;
;;;2590   		}
;;;2591   	else if(RELE_LOG_VOLT==1)
;;;2592   		{
;;;2593   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsOFF;
;;;2594   		else 				rele_stat[0]=rsON;
;;;2595   		}
;;;2596   	}
;;;2597   else if(RELE_FUNC[0]==4)					//Напряжение не выше
;;;2598   	{
;;;2599   	if(RELE_LOG_VOLT==0)
;;;2600   		{
;;;2601   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsON;
001fc4  f890800d          LDRB     r8,[r0,#0xd]
;;;2602   		else 				rele_stat[0]=rsOFF;
;;;2603   		}
;;;2604   	else if(RELE_LOG_VOLT==1)
;;;2605   		{
;;;2606   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsOFF;
;;;2607   		else 				rele_stat[0]=rsON;
;;;2608   		}
;;;2609   	}
;;;2610   else if(RELE_FUNC[0]==5)					//Напряжение не ниже
;;;2611   	{
;;;2612   	if(RELE_LOG_VOLT==0)
;;;2613   		{
;;;2614   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsON;
001fc8  7b00              LDRB     r0,[r0,#0xc]
001fca  4681              MOV      r9,r0
001fcc  f1ae0004          SUB      r0,lr,#4              ;2557
001fd0  b324              CBZ      r4,|L1.8220|
001fd2  2c01              CMP      r4,#1                 ;2558
001fd4  d00a              BEQ      |L1.8172|
001fd6  2c02              CMP      r4,#2                 ;2571
001fd8  d013              BEQ      |L1.8194|
001fda  2c03              CMP      r4,#3                 ;2584
001fdc  d019              BEQ      |L1.8210|
001fde  2c04              CMP      r4,#4                 ;2597
001fe0  d01f              BEQ      |L1.8226|
001fe2  2c05              CMP      r4,#5                 ;2610
001fe4  d029              BEQ      |L1.8250|
;;;2615   		else 				rele_stat[0]=rsOFF;
;;;2616   		}
;;;2617   	else if(RELE_LOG_VOLT==1)
;;;2618   		{
;;;2619   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsOFF;
;;;2620   		else 				rele_stat[0]=rsON;
;;;2621   		}
;;;2622   	}
;;;2623   else if(RELE_FUNC[0]==6)					//Внешнее управление
001fe6  2c06              CMP      r4,#6
001fe8  d033              BEQ      |L1.8274|
001fea  e039              B        |L1.8288|
                  |L1.8172|
001fec  f1bc0f03          CMP      r12,#3                ;2560
001ff0  d003              BEQ      |L1.8186|
001ff2  f1bb0f00          CMP      r11,#0                ;2567
001ff6  d032              BEQ      |L1.8286|
001ff8  e02f              B        |L1.8282|
                  |L1.8186|
001ffa  f1ba0f00          CMP      r10,#0                ;2562
001ffe  d12e              BNE      |L1.8286|
002000  e02b              B        |L1.8282|
                  |L1.8194|
002002  b116              CBZ      r6,|L1.8202|
002004  2e01              CMP      r6,#1                 ;2578
002006  d002              BEQ      |L1.8206|
002008  e02a              B        |L1.8288|
                  |L1.8202|
00200a  b30d              CBZ      r5,|L1.8272|
00200c  e027              B        |L1.8286|
                  |L1.8206|
00200e  b12d              CBZ      r5,|L1.8220|
002010  e023              B        |L1.8282|
                  |L1.8210|
002012  b113              CBZ      r3,|L1.8218|
002014  2b01              CMP      r3,#1                 ;2591
002016  d002              BEQ      |L1.8222|
002018  e022              B        |L1.8288|
                  |L1.8218|
00201a  b1cf              CBZ      r7,|L1.8272|
                  |L1.8220|
00201c  e01f              B        |L1.8286|
                  |L1.8222|
00201e  b1f7              CBZ      r7,|L1.8286|
002020  e01b              B        |L1.8282|
                  |L1.8226|
002022  b113              CBZ      r3,|L1.8234|
002024  2b01              CMP      r3,#1                 ;2604
002026  d004              BEQ      |L1.8242|
002028  e01a              B        |L1.8288|
                  |L1.8234|
00202a  f1b80f00          CMP      r8,#0                 ;2601
00202e  d014              BEQ      |L1.8282|
002030  e015              B        |L1.8286|
                  |L1.8242|
002032  f1b80f00          CMP      r8,#0                 ;2606
002036  d012              BEQ      |L1.8286|
002038  e00f              B        |L1.8282|
                  |L1.8250|
00203a  b113              CBZ      r3,|L1.8258|
00203c  2b01              CMP      r3,#1                 ;2617
00203e  d004              BEQ      |L1.8266|
002040  e00e              B        |L1.8288|
                  |L1.8258|
002042  f1b90f00          CMP      r9,#0                 ;2614
002046  d008              BEQ      |L1.8282|
002048  e009              B        |L1.8286|
                  |L1.8266|
00204a  f1b90f00          CMP      r9,#0                 ;2619
00204e  d006              BEQ      |L1.8286|
                  |L1.8272|
002050  e003              B        |L1.8282|
                  |L1.8274|
;;;2624   	{
;;;2625   	if(rele_ext_cntrl[0])	rele_stat[0]=rsON;
002052  4c53              LDR      r4,|L1.8608|
002054  1ea4              SUBS     r4,r4,#2
002056  7824              LDRB     r4,[r4,#0]  ; rele_ext_cntrl
002058  b10c              CBZ      r4,|L1.8286|
                  |L1.8282|
00205a  7002              STRB     r2,[r0,#0]
00205c  e000              B        |L1.8288|
                  |L1.8286|
;;;2626   	else 				rele_stat[0]=rsOFF;
00205e  7001              STRB     r1,[r0,#0]
                  |L1.8288|
;;;2627   	}											
;;;2628   //Реле2
;;;2629   if(RELE_FUNC[1]==0)rele_stat[1]=rsOFF; 		//Выключено
002060  f9be4002          LDRSH    r4,[lr,#2]  ; RELE_FUNC
002064  b17c              CBZ      r4,|L1.8326|
;;;2630   else if(RELE_FUNC[1]==1)					//Реверс
002066  2c01              CMP      r4,#1
002068  d010              BEQ      |L1.8332|
;;;2631   	{
;;;2632   	if(work_stat==wsCAP) 
;;;2633   		{
;;;2634   		if(bRAZR) 		rele_stat[1]=rsOFF;
;;;2635   		else 			rele_stat[1]=rsON;
;;;2636   		} 
;;;2637   	else 
;;;2638   		{
;;;2639   		if(REV_STAT==rsREW)	rele_stat[1]=rsOFF;
;;;2640   		else 			rele_stat[1]=rsON;
;;;2641   		}
;;;2642   	}
;;;2643   else if(RELE_FUNC[1]==2)					//Токоограничение
00206a  2c02              CMP      r4,#2
00206c  d01a              BEQ      |L1.8356|
;;;2644   	{
;;;2645   	if(RELE_LOG_CURR==0)
;;;2646   		{
;;;2647   		if(bCURRENT_STAB==0)rele_stat[1]=rsON;
;;;2648   		else 			rele_stat[1]=rsOFF;
;;;2649   		}
;;;2650   	else if(RELE_LOG_CURR==1)
;;;2651   		{
;;;2652   		if(bCURRENT_STAB==0)rele_stat[1]=rsOFF;
;;;2653   		else 			rele_stat[1]=rsON;
;;;2654   		}
;;;2655   	}									
;;;2656   else if(RELE_FUNC[1]==3)					//Напряжение в норме
00206e  2c03              CMP      r4,#3
002070  d021              BEQ      |L1.8374|
;;;2657   	{
;;;2658   	if(RELE_LOG_VOLT==0)
;;;2659   		{
;;;2660   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsON;
;;;2661   		else 				rele_stat[1]=rsOFF;
;;;2662   		}
;;;2663   	else if(RELE_LOG_VOLT==1)
;;;2664   		{
;;;2665   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsOFF;
;;;2666   		else 				rele_stat[1]=rsON;
;;;2667   		}
;;;2668   	}
;;;2669   else if(RELE_FUNC[1]==4)					//Напряжение не выше
002072  2c04              CMP      r4,#4
002074  d028              BEQ      |L1.8392|
;;;2670   	{
;;;2671   	if(RELE_LOG_VOLT==0)
;;;2672   		{
;;;2673   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsON;
;;;2674   		else 				rele_stat[1]=rsOFF;
;;;2675   		}
;;;2676   	else if(RELE_LOG_VOLT==1)
;;;2677   		{
;;;2678   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsOFF;
;;;2679   		else 				rele_stat[1]=rsON;
;;;2680   		}
;;;2681   	}
;;;2682   else if(RELE_FUNC[1]==5)					//Напряжение не ниже
002076  2c05              CMP      r4,#5
002078  d031              BEQ      |L1.8414|
;;;2683   	{
;;;2684   	if(RELE_LOG_VOLT==0)
;;;2685   		{
;;;2686   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsON;
;;;2687   		else 				rele_stat[1]=rsOFF;
;;;2688   		}
;;;2689   	else if(RELE_LOG_VOLT==1)
;;;2690   		{
;;;2691   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsOFF;
;;;2692   		else 				rele_stat[1]=rsON;
;;;2693   		}
;;;2694   	}
;;;2695   else if(RELE_FUNC[1]==6)					//Внешнее управление
00207a  2c06              CMP      r4,#6
00207c  d104              BNE      |L1.8328|
;;;2696   	{
;;;2697   	if(rele_ext_cntrl[1])	rele_stat[1]=rsON;
00207e  4b48              LDR      r3,|L1.8608|
002080  1e9b              SUBS     r3,r3,#2
002082  785b              LDRB     r3,[r3,#1]  ; rele_ext_cntrl
002084  b943              CBNZ     r3,|L1.8344|
                  |L1.8326|
002086  7041              STRB     r1,[r0,#1]            ;2629
                  |L1.8328|
;;;2698   	else 				rele_stat[1]=rsOFF;
;;;2699   	}	
;;;2700   
;;;2701   //rele_stat[0]=rsON;
;;;2702   //rele_stat[1]=rsON;
;;;2703   										
;;;2704   }
002088  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.8332|
00208c  f1bc0f03          CMP      r12,#3                ;2632
002090  d004              BEQ      |L1.8348|
002092  f1bb0f00          CMP      r11,#0                ;2639
002096  d0f6              BEQ      |L1.8326|
                  |L1.8344|
002098  7042              STRB     r2,[r0,#1]            ;2640
00209a  e7f5              B        |L1.8328|
                  |L1.8348|
00209c  f1ba0f00          CMP      r10,#0                ;2634
0020a0  d1f1              BNE      |L1.8326|
0020a2  e7f9              B        |L1.8344|
                  |L1.8356|
0020a4  b126              CBZ      r6,|L1.8368|
0020a6  2e01              CMP      r6,#1                 ;2650
0020a8  d1ee              BNE      |L1.8328|
0020aa  2d00              CMP      r5,#0                 ;2652
0020ac  d1f4              BNE      |L1.8344|
0020ae  e7ea              B        |L1.8326|
                  |L1.8368|
0020b0  2d00              CMP      r5,#0                 ;2647
0020b2  d0f1              BEQ      |L1.8344|
0020b4  e7e7              B        |L1.8326|
                  |L1.8374|
0020b6  b123              CBZ      r3,|L1.8386|
0020b8  2b01              CMP      r3,#1                 ;2663
0020ba  d1e5              BNE      |L1.8328|
0020bc  2f00              CMP      r7,#0                 ;2665
0020be  d1eb              BNE      |L1.8344|
0020c0  e7e1              B        |L1.8326|
                  |L1.8386|
0020c2  2f00              CMP      r7,#0                 ;2660
0020c4  d0e8              BEQ      |L1.8344|
0020c6  e7de              B        |L1.8326|
                  |L1.8392|
0020c8  b12b              CBZ      r3,|L1.8406|
0020ca  2b01              CMP      r3,#1                 ;2676
0020cc  d1dc              BNE      |L1.8328|
0020ce  f1b80f00          CMP      r8,#0                 ;2678
0020d2  d1e1              BNE      |L1.8344|
0020d4  e7d7              B        |L1.8326|
                  |L1.8406|
0020d6  f1b80f00          CMP      r8,#0                 ;2673
0020da  d0dd              BEQ      |L1.8344|
0020dc  e7d3              B        |L1.8326|
                  |L1.8414|
0020de  b12b              CBZ      r3,|L1.8428|
0020e0  2b01              CMP      r3,#1                 ;2689
0020e2  d1d1              BNE      |L1.8328|
0020e4  f1b90f00          CMP      r9,#0                 ;2691
0020e8  d1d6              BNE      |L1.8344|
0020ea  e7cc              B        |L1.8326|
                  |L1.8428|
0020ec  f1b90f00          CMP      r9,#0                 ;2686
0020f0  d0d2              BEQ      |L1.8344|
0020f2  e7c8              B        |L1.8326|
;;;2705    
                          ENDP

                  rele_drv PROC
;;;2706   //-----------------------------------------------
;;;2707   void rele_drv(void)
0020f4  4926              LDR      r1,|L1.8592|
;;;2708   {
;;;2709   #ifdef EXT_BOARD_V_1
;;;2710   SET_REG(LPC_PINCON->PINSEL0,0,4*2,2);
;;;2711   SET_REG(LPC_GPIO0->FIODIR,1,4,1);
;;;2712   
;;;2713   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
;;;2714   else SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2715   #endif
;;;2716   
;;;2717   #ifdef EXT_BOARD_V_2
;;;2718   SET_REG(LPC_PINCON->PINSEL0,0,7*2,2);
0020f6  6808              LDR      r0,[r1,#0]
0020f8  f4204040          BIC      r0,r0,#0xc000
0020fc  6008              STR      r0,[r1,#0]
;;;2719   SET_REG(LPC_GPIO0->FIODIR,1,7,1);
0020fe  4825              LDR      r0,|L1.8596|
002100  6802              LDR      r2,[r0,#0]
002102  f0420280          ORR      r2,r2,#0x80
002106  6002              STR      r2,[r0,#0]
;;;2720   
;;;2721   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,7,1);
002108  4a25              LDR      r2,|L1.8608|
00210a  1f12              SUBS     r2,r2,#4
00210c  7813              LDRB     r3,[r2,#0]  ; rele_stat
00210e  2b01              CMP      r3,#1
;;;2722   else SET_REG(LPC_GPIO0->FIOPIN,1,7,1);
002110  6943              LDR      r3,[r0,#0x14]
002112  d012              BEQ      |L1.8506|
002114  f0430380          ORR      r3,r3,#0x80
                  |L1.8472|
002118  6143              STR      r3,[r0,#0x14]
;;;2723   #endif
;;;2724   
;;;2725   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
00211a  680b              LDR      r3,[r1,#0]
00211c  f4236340          BIC      r3,r3,#0xc00
002120  600b              STR      r3,[r1,#0]
;;;2726   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
002122  6801              LDR      r1,[r0,#0]
002124  f0410120          ORR      r1,r1,#0x20
002128  6001              STR      r1,[r0,#0]
;;;2727   
;;;2728   if(rele_stat[1]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
00212a  7851              LDRB     r1,[r2,#1]  ; rele_stat
00212c  2901              CMP      r1,#1
;;;2729   else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
00212e  6941              LDR      r1,[r0,#0x14]
002130  d006              BEQ      |L1.8512|
002132  f0410120          ORR      r1,r1,#0x20
                  |L1.8502|
002136  6141              STR      r1,[r0,#0x14]         ;2728
;;;2730   
;;;2731   
;;;2732   }
002138  4770              BX       lr
                  |L1.8506|
00213a  f0230380          BIC      r3,r3,#0x80           ;2721
00213e  e7eb              B        |L1.8472|
                  |L1.8512|
002140  f0210120          BIC      r1,r1,#0x20           ;2728
002144  e7f7              B        |L1.8502|
;;;2733   
                          ENDP

002146  0000              DCW      0x0000
                  |L1.8520|
                          DCD      work_stat
                  |L1.8524|
                          DCD      load_U
                  |L1.8528|
                          DCD      delta_U_abs
                  |L1.8532|
                          DCD      load_I
                  |L1.8536|
                          DCD      delta_I_abs
                  |L1.8540|
                          DCD      delta_U_rel
                  |L1.8544|
                          DCD      delta_I_rel
                  |L1.8548|
                          DCD      cnt_del_rel
                  |L1.8552|
                          DCD      DELT_REL_CURR_U
                  |L1.8556|
                          DCD      DELT_REL_CURR_I
                  |L1.8560|
                          DCD      U_up
                  |L1.8564|
                          DCD      I_maxp
                  |L1.8568|
                          DCD      U_maxg
                  |L1.8572|
                          DCD      I_ug_temp
                  |L1.8576|
                          DCD      T_DEL_REL_CURR_WRK
                  |L1.8580|
                          DCD      time_proc
                  |L1.8584|
                          DCD      T_DEL_REL_CURR_START
                  |L1.8588|
                          DCD      bCURRENT_STAB
                  |L1.8592|
                          DCD      0x4002c000
                  |L1.8596|
                          DCD      0x2009c000
                  |L1.8600|
                          DCD      REV_STAT
                  |L1.8604|
                          DCD      bRAZR
                  |L1.8608|
                          DCD      ||area_number.18||+0x32
                  |L1.8612|
                          DCD      RELE_LOG_CURR
                  |L1.8616|
                          DCD      RELE_LOG_VOLT

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        2048
                  adc_buff_
                          %        32
                  adc_buff__
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.4||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.4||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.5||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.5||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.8||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.8||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.9||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.10||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.10||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.14||, DATA, ALIGN=1

                          EXPORTAS ||area_number.14||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.15||, DATA, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.16||, DATA, ALIGN=1

                          EXPORTAS ||area_number.16||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.17||, DATA, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.data||
                  vent_stat
000000  00                DCB      0x00

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  adc_self_ch_cnt
000000  00                DCB      0x00
                  adc_ch_net
000001  00                DCB      0x00
                  adc_ch
000002  00                DCB      0x00
                  adc_ch_cnt
000003  00                DCB      0x00
                  adc_window_flag
000004  00                DCB      0x00
                  sh_cnt0
000005  00                DCB      0x00
                  b1Hz_sh
000006  00                DCB      0x00
                  sh_cnt1
000007  00                DCB      0x00
                  bFAST_REG
000008  00                DCB      0x00
                  bU_VALID
000009  00                DCB      0x00
                  bU_VALID_VALID
00000a  00                DCB      0x00
                  bPRECESSION_REG
00000b  00                DCB      0x00
                  bVOLT_IS_NOT_DOWN
00000c  00                DCB      0x00
                  bVOLT_IS_NOT_UP
00000d  00                DCB      0x00
                  bVOLT_IS_NORM
00000e  00                DCB      0x00
                  net_in_drv_cnt_B
00000f  00                DCB      0x00
                  net_in_drv_cnt_C
000010  00                DCB      0x00
                  net_in_drv_stat_B
000011  00                DCB      0x00
                  net_in_drv_stat_C
000012  0000              DCB      0x00,0x00
                  cntrl_stat_U
000014  03e8              DCW      0x03e8
                  cntrl_stat_I
000016  03e8              DCW      0x03e8
                  net_buff_
000018  0000              DCB      0x00,0x00
                  adc_result
00001a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00001c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00001e  0000              DCB      0x00,0x00
                  adc_window_cnt
000020  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000022  0000              DCB      0x00,0x00
                  samokalibr_cnt
000024  0000              DCB      0x00,0x00
                  main_kb_cnt
000026  0000              DCB      0x00,0x00
                  cnt_volt_contr
000028  0000              DCB      0x00,0x00
                  cnt_rel_volt_umin
00002a  0000              DCB      0x00,0x00
                  cnt_rel_volt_umax
00002c  0000              DCB      0x00,0x00
                  rele_stat
00002e  0000              DCB      0x00,0x00
                  rele_ext_cntrl
000030  0000              DCB      0x00,0x00
                  RELE_FUNC
000032  0000              DCB      0x00,0x00
000034  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000036  0000              DCB      0x00,0x00
                          DCDU     0x00000000
                  adc_self_ch_disp
                          DCDU     0x00000000
000040  0000              DCB      0x00,0x00

                          AREA ||area_number.19||, DATA, ALIGN=1

                          EXPORTAS ||area_number.19||, ||.data||
                  cntrl_stat_old
000000  0258              DCW      0x0258

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.21||, DATA, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.22||, DATA, ALIGN=0

                          EXPORTAS ||area_number.22||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.23||, DATA, ALIGN=1

                          EXPORTAS ||area_number.23||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=2

                          EXPORTAS ||area_number.29||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=1

                          EXPORTAS ||area_number.31||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  plazma_sk
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  cntrl_stat_new
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  Ibmax
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  ch_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  b1Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=0

                          EXPORTAS ||area_number.41||, ||.data||
                  i
000000  00                DCB      0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  iiii
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=1

                          EXPORTAS ||area_number.43||, ||.data||
                  IZMAX_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.44||, DATA, ALIGN=1

                          EXPORTAS ||area_number.44||, ||.data||
                  kb_cnt_1lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.45||, DATA, ALIGN=1

                          EXPORTAS ||area_number.45||, ||.data||
                  kb_cnt_2lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  kb_full_ver
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  kb_start
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  num_of_wrks_bps
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=0

                          EXPORTAS ||area_number.50||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.51||, DATA, ALIGN=0

                          EXPORTAS ||area_number.51||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.52||, DATA, ALIGN=0

                          EXPORTAS ||area_number.52||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.53||, DATA, ALIGN=1

                          EXPORTAS ||area_number.53||, ||.data||
                  bps_on_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.54||, DATA, ALIGN=1

                          EXPORTAS ||area_number.54||, ||.data||
                  bps_off_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.55||, DATA, ALIGN=0

                          EXPORTAS ||area_number.55||, ||.data||
                  num_necc_up
000000  00                DCB      0x00

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  num_necc_down
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=0

                          EXPORTAS ||area_number.57||, ||.data||
                  spc_stat
000000  00                DCB      0x00

                          AREA ||area_number.58||, DATA, ALIGN=0

                          EXPORTAS ||area_number.58||, ||.data||
                  spc_bat
000000  00                DCB      0x00

                          AREA ||area_number.59||, DATA, ALIGN=0

                          EXPORTAS ||area_number.59||, ||.data||
                  spc_phase
000000  00                DCB      0x00

                          AREA ||area_number.60||, DATA, ALIGN=1

                          EXPORTAS ||area_number.60||, ||.data||
                  vz_cnt_s
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.61||, DATA, ALIGN=1

                          EXPORTAS ||area_number.61||, ||.data||
                  vz_cnt_s_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.62||, DATA, ALIGN=1

                          EXPORTAS ||area_number.62||, ||.data||
                  vz_cnt_h
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.63||, DATA, ALIGN=1

                          EXPORTAS ||area_number.63||, ||.data||
                  vz_cnt_h_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.64||, DATA, ALIGN=0

                          EXPORTAS ||area_number.64||, ||.data||
                  bAVZ
000000  00                DCB      0x00

                          AREA ||area_number.65||, DATA, ALIGN=0

                          EXPORTAS ||area_number.65||, ||.data||
                  ke_start_stat
000000  00                DCB      0x00

                          AREA ||area_number.66||, DATA, ALIGN=1

                          EXPORTAS ||area_number.66||, ||.data||
                  cnt_end_ke
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.67||, DATA, ALIGN=2

                          EXPORTAS ||area_number.67||, ||.data||
                  ke_date
                          %        8

                          AREA ||area_number.68||, DATA, ALIGN=1

                          EXPORTAS ||area_number.68||, ||.data||
                  __ee_vz_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.69||, DATA, ALIGN=1

                          EXPORTAS ||area_number.69||, ||.data||
                  __ee_spc_stat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.70||, DATA, ALIGN=1

                          EXPORTAS ||area_number.70||, ||.data||
                  __ee_spc_bat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.71||, DATA, ALIGN=1

                          EXPORTAS ||area_number.71||, ||.data||
                  __ee_spc_phase
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.72||, DATA, ALIGN=1

                          EXPORTAS ||area_number.72||, ||.data||
                  cntrl_stat_blok_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.73||, DATA, ALIGN=1

                          EXPORTAS ||area_number.73||, ||.data||
                  cntrl_stat_blok_cnt_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.74||, DATA, ALIGN=1

                          EXPORTAS ||area_number.74||, ||.data||
                  cntrl_stat_blok_cnt_plus
                          DCDU     0x00000000

                          AREA ||area_number.75||, DATA, ALIGN=1

                          EXPORTAS ||area_number.75||, ||.data||
                  cntrl_stat_blok_cnt_minus
                          DCDU     0x00000000

                          AREA ||area_number.76||, DATA, ALIGN=0

                          EXPORTAS ||area_number.76||, ||.data||
                  plazma_inv
                          DCDU     0x00000000

                          AREA ||area_number.77||, DATA, ALIGN=0

                          EXPORTAS ||area_number.77||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.78||, DATA, ALIGN=2

                          EXPORTAS ||area_number.78||, ||.data||
                  temp_temp_SL
                          DCD      0x00000000

;*** Start embedded assembler ***

#line 1 "control.c"
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___9_control_c_9601dfb0____REV16|
#line 112 "C:\\Keil\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___9_control_c_9601dfb0____REV16| PROC
#line 113

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.emb_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___9_control_c_9601dfb0____REVSH|
#line 130
|__asm___9_control_c_9601dfb0____REVSH| PROC
#line 131

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
