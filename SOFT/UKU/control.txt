; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  kb_init PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  4805              LDR      r0,|L1.24|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f06f013b          MVN      r1,#0x3b
000006  8800              LDRH     r0,[r0,#0]  ; TBAT
000008  ebc01000          RSB      r0,r0,r0,LSL #4
00000c  eb010080          ADD      r0,r1,r0,LSL #2
000010  4902              LDR      r1,|L1.28|
000012  84c8              STRH     r0,[r1,#0x26]
;;;227    }
000014  4770              BX       lr
;;;228    
                          ENDP

000016  0000              DCW      0x0000
                  |L1.24|
                          DCD      TBAT
                  |L1.28|
                          DCD      ||area_number.25||

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  4902              LDR      r1,|L2.12|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f24060f9          MOV      r0,#0x6f9
000006  8488              STRH     r0,[r1,#0x24]
000008  4770              BX       lr
;;;227    }
;;;228    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.25||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  samokalibr_hndl PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  b510              PUSH     {r4,lr}
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  4c19              LDR      r4,|L3.104|
000004  8ca0              LDRH     r0,[r4,#0x24]  ; samokalibr_cnt
000006  1c40              ADDS     r0,r0,#1
000008  b200              SXTH     r0,r0
00000a  84a0              STRH     r0,[r4,#0x24]
00000c  f5b06fe1          CMP      r0,#0x708
000010  db02              BLT      |L3.24|
000012  2000              MOVS     r0,#0
;;;227    }
000014  84a0              STRH     r0,[r4,#0x24]
                  |L3.22|
000016  bd10              POP      {r4,pc}
                  |L3.24|
000018  f5b06fdf          CMP      r0,#0x6f8
00001c  d911              BLS      |L3.66|
00001e  230f              MOVS     r3,#0xf
000020  2201              MOVS     r2,#1
000022  2164              MOVS     r1,#0x64
000024  20d2              MOVS     r0,#0xd2
000026  f7fffffe          BL       mess_send
00002a  230f              MOVS     r3,#0xf
00002c  2200              MOVS     r2,#0
00002e  21d8              MOVS     r1,#0xd8
000030  20d7              MOVS     r0,#0xd7
000032  f7fffffe          BL       mess_send
000036  230f              MOVS     r3,#0xf
000038  2200              MOVS     r2,#0
00003a  21d8              MOVS     r1,#0xd8
00003c  20dc              MOVS     r0,#0xdc
00003e  f7fffffe          BL       mess_send
                  |L3.66|
000042  f9b40024          LDRSH    r0,[r4,#0x24]  ; samokalibr_cnt
000046  f5a061e0          SUB      r1,r0,#0x700
00004a  3907              SUBS     r1,#7
00004c  d1e3              BNE      |L3.22|
00004e  4807              LDR      r0,|L3.108|
000050  4a07              LDR      r2,|L3.112|
000052  8801              LDRH     r1,[r0,#0]  ; ad7705_buff_
000054  6812              LDR      r2,[r2,#0]  ; Kiload0
000056  4291              CMP      r1,r2
000058  d0dd              BEQ      |L3.22|
00005a  f9b01000          LDRSH    r1,[r0,#0]  ; ad7705_buff_
00005e  e8bd4010          POP      {r4,lr}
000062  2014              MOVS     r0,#0x14
000064  f7ffbffe          B.W      lc640_write_int
;;;228    
                          ENDP

                  |L3.104|
                          DCD      ||area_number.25||
                  |L3.108|
                          DCD      ad7705_buff_
                  |L3.112|
                          DCD      Kiload0

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  unet_drv PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  4a0d              LDR      r2,|L4.56|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  b430              PUSH     {r4,r5}
000004  490d              LDR      r1,|L4.60|
000006  f9b2400a          LDRSH    r4,[r2,#0xa]  ; adc_buff_
00000a  f64053ac          MOV      r3,#0xdac
00000e  f9b10000          LDRSH    r0,[r1,#0]
000012  429c              CMP      r4,r3
;;;227    }
000014  dc03              BGT      |L4.30|
000016  f9b22014          LDRSH    r2,[r2,#0x14]  ; adc_buff_
00001a  429a              CMP      r2,r3
00001c  dd03              BLE      |L4.38|
                  |L4.30|
00001e  2814              CMP      r0,#0x14
000020  da04              BGE      |L4.44|
000022  1c40              ADDS     r0,r0,#1
000024  e001              B        |L4.42|
                  |L4.38|
000026  b108              CBZ      r0,|L4.44|
000028  1e40              SUBS     r0,r0,#1
                  |L4.42|
00002a  8008              STRH     r0,[r1,#0]
                  |L4.44|
00002c  2214              MOVS     r2,#0x14
00002e  bc30              POP      {r4,r5}
000030  2100              MOVS     r1,#0
000032  4802              LDR      r0,|L4.60|
000034  f7ffbffe          B.W      gran
;;;228    
                          ENDP

                  |L4.56|
                          DCD      ||.bss||+0x800
                  |L4.60|
                          DCD      unet_drv_cnt

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  matemat PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  b570              PUSH     {r4-r6,lr}
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  48ff              LDR      r0,|L5.1024|
000004  49ff              LDR      r1,|L5.1028|
000006  f44f72fa          MOV      r2,#0x1f4
00000a  f9b00000          LDRSH    r0,[r0,#0]  ; adc_buff_
00000e  f9b11000          LDRSH    r1,[r1,#0]  ; Kuload
000012  4bfd              LDR      r3,|L5.1032|
;;;227    }
000014  4348              MULS     r0,r1,r0
000016  fb90f0f2          SDIV     r0,r0,r2
00001a  8018              STRH     r0,[r3,#0]
00001c  48f8              LDR      r0,|L5.1024|
00001e  f2413388          MOV      r3,#0x1388
000022  3020              ADDS     r0,r0,#0x20
000024  f9b00000          LDRSH    r0,[r0,#0]  ; adc_buff__
000028  4348              MULS     r0,r1,r0
00002a  fb90f0f2          SDIV     r0,r0,r2
00002e  49f7              LDR      r1,|L5.1036|
000030  8008              STRH     r0,[r1,#0]
000032  49f8              LDR      r1,|L5.1044|
000034  48f6              LDR      r0,|L5.1040|
000036  680d              LDR      r5,[r1,#0]  ; Kiload0
000038  49f7              LDR      r1,|L5.1048|
00003a  8800              LDRH     r0,[r0,#0]  ; ad7705_buff_
00003c  f9b14000          LDRSH    r4,[r1,#0]  ; Kiload1
000040  1b40              SUBS     r0,r0,r5
000042  4360              MULS     r0,r4,r0
000044  fb90f1f3          SDIV     r1,r0,r3
000048  b20a              SXTH     r2,r1
00004a  1b49              SUBS     r1,r1,r5
00004c  4361              MULS     r1,r4,r1
00004e  fb91f1f3          SDIV     r1,r1,r3
000052  48f2              LDR      r0,|L5.1052|
000054  4bf2              LDR      r3,|L5.1056|
000056  8002              STRH     r2,[r0,#0]
000058  8019              STRH     r1,[r3,#0]
00005a  2100              MOVS     r1,#0
00005c  2a00              CMP      r2,#0
00005e  da00              BGE      |L5.98|
000060  8001              STRH     r1,[r0,#0]
                  |L5.98|
000062  4bf0              LDR      r3,|L5.1060|
000064  2200              MOVS     r2,#0
000066  bf00              NOP      
                  |L5.104|
000068  ebc200c2          RSB      r0,r2,r2,LSL #3
00006c  eb000040          ADD      r0,r0,r0,LSL #1
000070  eb030080          ADD      r0,r3,r0,LSL #2
000074  78c4              LDRB     r4,[r0,#3]
000076  2c19              CMP      r4,#0x19
000078  d21b              BCS      |L5.178|
00007a  7984              LDRB     r4,[r0,#6]
00007c  79c5              LDRB     r5,[r0,#7]
00007e  eb042505          ADD      r5,r4,r5,LSL #8
000082  6205              STR      r5,[r0,#0x20]
000084  7a05              LDRB     r5,[r0,#8]
000086  7a46              LDRB     r6,[r0,#9]
000088  eb052506          ADD      r5,r5,r6,LSL #8
00008c  61c5              STR      r5,[r0,#0x1c]
00008e  7a85              LDRB     r5,[r0,#0xa]
000090  7ac6              LDRB     r6,[r0,#0xb]
000092  eb052506          ADD      r5,r5,r6,LSL #8
000096  6185              STR      r5,[r0,#0x18]
000098  7b05              LDRB     r5,[r0,#0xc]
00009a  6245              STR      r5,[r0,#0x24]
00009c  f880404e          STRB     r4,[r0,#0x4e]
0000a0  7b84              LDRB     r4,[r0,#0xe]
0000a2  f880403e          STRB     r4,[r0,#0x3e]
0000a6  7c04              LDRB     r4,[r0,#0x10]
0000a8  7c45              LDRB     r5,[r0,#0x11]
0000aa  eb042405          ADD      r4,r4,r5,LSL #8
0000ae  6484              STR      r4,[r0,#0x48]
0000b0  e006              B        |L5.192|
                  |L5.178|
0000b2  6181              STR      r1,[r0,#0x18]
0000b4  6201              STR      r1,[r0,#0x20]
0000b6  61c1              STR      r1,[r0,#0x1c]
0000b8  6241              STR      r1,[r0,#0x24]
0000ba  f880103e          STRB     r1,[r0,#0x3e]
0000be  6481              STR      r1,[r0,#0x48]
                  |L5.192|
0000c0  1c52              ADDS     r2,r2,#1
0000c2  b2d2              UXTB     r2,r2
0000c4  2a20              CMP      r2,#0x20
0000c6  d3cf              BCC      |L5.104|
0000c8  48d7              LDR      r0,|L5.1064|
0000ca  4ad9              LDR      r2,|L5.1072|
0000cc  8801              LDRH     r1,[r0,#0]  ; I_MAX
0000ce  48d7              LDR      r0,|L5.1068|
0000d0  8800              LDRH     r0,[r0,#0]  ; NUMIST
0000d2  4341              MULS     r1,r0,r1
0000d4  8011              STRH     r1,[r2,#0]
0000d6  49d7              LDR      r1,|L5.1076|
0000d8  8809              LDRH     r1,[r1,#0]  ; I_MIN
0000da  4341              MULS     r1,r0,r1
0000dc  48d6              LDR      r0,|L5.1080|
0000de  8001              STRH     r1,[r0,#0]
0000e0  bd70              POP      {r4-r6,pc}
;;;228    
                          ENDP

                  adc_init PROC
;;;345    //-----------------------------------------------
;;;346    void adc_init(void)
0000e2  48d6              LDR      r0,|L5.1084|
;;;347    {
;;;348    
;;;349    SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0000e4  6841              LDR      r1,[r0,#4]
0000e6  f4212140          BIC      r1,r1,#0xc0000
0000ea  f4412180          ORR      r1,r1,#0x40000
0000ee  6041              STR      r1,[r0,#4]
;;;350    SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0000f0  6841              LDR      r1,[r0,#4]
0000f2  f4213140          BIC      r1,r1,#0x30000
0000f6  f4413180          ORR      r1,r1,#0x10000
0000fa  6041              STR      r1,[r0,#4]
;;;351    SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0000fc  6841              LDR      r1,[r0,#4]
0000fe  f4214140          BIC      r1,r1,#0xc000
000102  f4414180          ORR      r1,r1,#0x4000
000106  6041              STR      r1,[r0,#4]
;;;352    
;;;353    
;;;354    SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
000108  6c41              LDR      r1,[r0,#0x44]
00010a  f4212140          BIC      r1,r1,#0xc0000
00010e  f4412100          ORR      r1,r1,#0x80000
000112  6441              STR      r1,[r0,#0x44]
;;;355    SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
000114  6c41              LDR      r1,[r0,#0x44]
000116  f4213140          BIC      r1,r1,#0x30000
00011a  f4413100          ORR      r1,r1,#0x20000
00011e  6441              STR      r1,[r0,#0x44]
;;;356    SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
000120  6c41              LDR      r1,[r0,#0x44]
000122  f4214140          BIC      r1,r1,#0xc000
000126  f4414100          ORR      r1,r1,#0x8000
00012a  6441              STR      r1,[r0,#0x44]
;;;357    
;;;358    SET_REG(LPC_ADC->ADCR,0,24,3);
00012c  48c4              LDR      r0,|L5.1088|
00012e  6801              LDR      r1,[r0,#0]
000130  f02161e0          BIC      r1,r1,#0x7000000
000134  6001              STR      r1,[r0,#0]
;;;359    
;;;360    SET_REG(LPC_ADC->ADCR,1,21,1);
000136  6801              LDR      r1,[r0,#0]
000138  f4411100          ORR      r1,r1,#0x200000
00013c  6001              STR      r1,[r0,#0]
;;;361    SET_REG(LPC_ADC->ADCR,0,16,1);
00013e  6801              LDR      r1,[r0,#0]
000140  f4213180          BIC      r1,r1,#0x10000
000144  6001              STR      r1,[r0,#0]
;;;362    SET_REG(LPC_ADC->ADCR,1,8,8);
000146  6801              LDR      r1,[r0,#0]
000148  f421417f          BIC      r1,r1,#0xff00
00014c  f4417180          ORR      r1,r1,#0x100
000150  6001              STR      r1,[r0,#0]
;;;363    
;;;364    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;365    //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;366    	
;;;367    	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;368         /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;369         else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;370    
;;;371    LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
000152  1581              ASRS     r1,r0,#22
000154  60c1              STR      r1,[r0,#0xc]
000156  48bb              LDR      r0,|L5.1092|
000158  0389              LSLS     r1,r1,#14
00015a  6001              STR      r1,[r0,#0]
;;;372    
;;;373    NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;374    
;;;375    
;;;376    }
00015c  4770              BX       lr
;;;377    
                          ENDP

                  net_in_drv PROC
;;;378    //-----------------------------------------------
;;;379    void net_in_drv(void)
00015e  b5f0              PUSH     {r4-r7,lr}
;;;380    {
;;;381    if(adc_buff_[10]<3500)
000160  4da7              LDR      r5,|L5.1024|
;;;382    	{
;;;383    	if(net_in_drv_cnt_B	< 20)
000162  48b9              LDR      r0,|L5.1096|
;;;384    		{
;;;385    		net_in_drv_cnt_B++;
;;;386    		}
;;;387    	else if(net_in_drv_cnt_B>20)net_in_drv_cnt_B=0; 
;;;388    	}
;;;389    else
;;;390    	{
;;;391    	if(net_in_drv_cnt_B)
;;;392    		{
;;;393    		net_in_drv_cnt_B--;
;;;394    		}
;;;395    	}			 
;;;396    if(net_in_drv_cnt_B>=19) 
;;;397    	{
;;;398    	net_in_drv_stat_B=1;
;;;399    	gp_av_stat&=~0x00000001;
000164  49b9              LDR      r1,|L5.1100|
000166  f9b57014          LDRSH    r7,[r5,#0x14]         ;381  ; adc_buff_
00016a  f64056ac          MOV      r6,#0xdac             ;381
00016e  f990200f          LDRSB    r2,[r0,#0xf]          ;383
000172  2300              MOVS     r3,#0                 ;387
000174  680c              LDR      r4,[r1,#0]            ;381
000176  f04f0c01          MOV      r12,#1                ;398
00017a  42b7              CMP      r7,r6                 ;381
00017c  da07              BGE      |L5.398|
00017e  2a14              CMP      r2,#0x14              ;383
000180  da02              BGE      |L5.392|
000182  f1020201          ADD      r2,r2,#1              ;385
000186  e004              B        |L5.402|
                  |L5.392|
000188  dd04              BLE      |L5.404|
00018a  73c3              STRB     r3,[r0,#0xf]          ;387
00018c  e00d              B        |L5.426|
                  |L5.398|
00018e  b162              CBZ      r2,|L5.426|
000190  1e52              SUBS     r2,r2,#1              ;393
                  |L5.402|
000192  73c2              STRB     r2,[r0,#0xf]          ;393
                  |L5.404|
000194  f990200f          LDRSB    r2,[r0,#0xf]          ;396  ; net_in_drv_cnt_B
000198  2a13              CMP      r2,#0x13              ;396
00019a  db04              BLT      |L5.422|
00019c  f880c011          STRB     r12,[r0,#0x11]        ;398
0001a0  f0240201          BIC      r2,r4,#1
0001a4  e004              B        |L5.432|
                  |L5.422|
;;;400    	}
;;;401    else if(net_in_drv_cnt_B<=2) 
0001a6  2a02              CMP      r2,#2
0001a8  dc03              BGT      |L5.434|
                  |L5.426|
;;;402    	{
;;;403    	net_in_drv_stat_B=0;
0001aa  7443              STRB     r3,[r0,#0x11]
;;;404    	gp_av_stat|=0x00000001;
0001ac  f0440201          ORR      r2,r4,#1
                  |L5.432|
0001b0  600a              STR      r2,[r1,#0]  ; gp_av_stat
                  |L5.434|
0001b2  4aa5              LDR      r2,|L5.1096|
;;;405    		
;;;406    	}
;;;407    
;;;408    if(adc_buff_[5]<3500)
0001b4  f9b5400a          LDRSH    r4,[r5,#0xa]  ; adc_buff_
;;;409    	{
;;;410    	if(net_in_drv_cnt_C	< 20)
0001b8  f9922010          LDRSB    r2,[r2,#0x10]
0001bc  42b4              CMP      r4,r6                 ;408
0001be  da07              BGE      |L5.464|
0001c0  2a14              CMP      r2,#0x14
0001c2  da02              BGE      |L5.458|
;;;411    		{
;;;412    		net_in_drv_cnt_C++;
0001c4  f1020201          ADD      r2,r2,#1
0001c8  e004              B        |L5.468|
                  |L5.458|
;;;413    		}
;;;414    	else if(net_in_drv_cnt_C>20)net_in_drv_cnt_C=0; 
0001ca  dd04              BLE      |L5.470|
0001cc  7403              STRB     r3,[r0,#0x10]
0001ce  e00e              B        |L5.494|
                  |L5.464|
;;;415    	}
;;;416    else
;;;417    	{
;;;418    	if(net_in_drv_cnt_C)
0001d0  b16a              CBZ      r2,|L5.494|
;;;419    		{
;;;420    		net_in_drv_cnt_C--;
0001d2  1e52              SUBS     r2,r2,#1
                  |L5.468|
0001d4  7402              STRB     r2,[r0,#0x10]
                  |L5.470|
;;;421    		}
;;;422    	}			 
;;;423    if(net_in_drv_cnt_C>=19) 
0001d6  f9902010          LDRSB    r2,[r0,#0x10]  ; net_in_drv_cnt_C
0001da  2a13              CMP      r2,#0x13
0001dc  db05              BLT      |L5.490|
;;;424    	{
;;;425    	net_in_drv_stat_C=1;
0001de  f880c012          STRB     r12,[r0,#0x12]
;;;426    	gp_av_stat&=~0x00000002;
0001e2  6808              LDR      r0,[r1,#0]  ; gp_av_stat
0001e4  f0200002          BIC      r0,r0,#2
0001e8  e005              B        |L5.502|
                  |L5.490|
;;;427    	}
;;;428    else if(net_in_drv_cnt_C<=2) 
0001ea  2a02              CMP      r2,#2
0001ec  dc04              BGT      |L5.504|
                  |L5.494|
;;;429    	{
;;;430    	net_in_drv_stat_C=0;
0001ee  7483              STRB     r3,[r0,#0x12]
;;;431    	gp_av_stat|=0x00000002;
0001f0  6808              LDR      r0,[r1,#0]  ; gp_av_stat
0001f2  f0400002          ORR      r0,r0,#2
                  |L5.502|
0001f6  6008              STR      r0,[r1,#0]            ;426  ; gp_av_stat
                  |L5.504|
;;;432    	}
;;;433    }	   
0001f8  bdf0              POP      {r4-r7,pc}
;;;434    
                          ENDP

                  adc_drv7 PROC
;;;435    //-----------------------------------------------
;;;436    void adc_drv7(void) //(Uсети - постоянка)
0001fa  e92d41f0          PUSH     {r4-r8,lr}
;;;437    {
;;;438    //int temp_S;
;;;439    //char i;
;;;440    //signed short temp_SS;
;;;441    
;;;442    adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0001fe  4c92              LDR      r4,|L5.1096|
000200  3430              ADDS     r4,r4,#0x30
000202  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000204  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000206  1a40              SUBS     r0,r0,r1
000208  b200              SXTH     r0,r0
00020a  f7fffffe          BL       abs_pal
00020e  1da5              ADDS     r5,r4,#6
000210  8028              STRH     r0,[r5,#0]
;;;443    adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
000212  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000214  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
000216  1a40              SUBS     r0,r0,r1
000218  b200              SXTH     r0,r0
00021a  f7fffffe          BL       abs_pal
00021e  8068              STRH     r0,[r5,#2]
;;;444    adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
000220  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000222  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000224  1a40              SUBS     r0,r0,r1
000226  b200              SXTH     r0,r0
000228  f7fffffe          BL       abs_pal
;;;445    
;;;446    //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;447    //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;448    //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;449    
;;;450    
;;;451    if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
00022c  f44f7296          MOV      r2,#0x12c
;;;452    	{
;;;453    	adc_result=adc_self_ch_buff[2];
000230  4985              LDR      r1,|L5.1096|
000232  80a8              STRH     r0,[r5,#4]            ;444
000234  4290              CMP      r0,r2                 ;451
000236  da01              BGE      |L5.572|
000238  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00023a  e00a              B        |L5.594|
                  |L5.572|
;;;454    	} 
;;;455    else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
00023c  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
000240  4290              CMP      r0,r2
000242  da01              BGE      |L5.584|
;;;456    	{
;;;457    	adc_result=adc_self_ch_buff[1];
000244  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000246  e004              B        |L5.594|
                  |L5.584|
;;;458    	}
;;;459    else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
000248  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
00024c  4290              CMP      r0,r2
00024e  da01              BGE      |L5.596|
;;;460    	{
;;;461    	adc_result=adc_self_ch_buff[0];
000250  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L5.594|
000252  8348              STRH     r0,[r1,#0x1a]
                  |L5.596|
;;;462    	}
;;;463        //adc_result=92;
;;;464    
;;;465    if(adc_ch_net)
000254  784c              LDRB     r4,[r1,#1]  ; adc_ch_net
000256  2300              MOVS     r3,#0
000258  b31c              CBZ      r4,|L5.674|
;;;466    	{
;;;467    
;;;468    	main_power_buffer[0]+=(long)(adc_result);
00025a  4869              LDR      r0,|L5.1024|
00025c  f9b1201a          LDRSH    r2,[r1,#0x1a]  ; adc_result
000260  3040              ADDS     r0,r0,#0x40
000262  6805              LDR      r5,[r0,#0]  ; main_power_buffer
000264  4415              ADD      r5,r5,r2
;;;469    	main_power_buffer[1]+=(long)(adc_result);
000266  6005              STR      r5,[r0,#0]  ; main_power_buffer
000268  6845              LDR      r5,[r0,#4]  ; main_power_buffer
00026a  4415              ADD      r5,r5,r2
;;;470    	main_power_buffer[2]+=(long)(adc_result);
00026c  6045              STR      r5,[r0,#4]  ; main_power_buffer
00026e  6885              LDR      r5,[r0,#8]  ; main_power_buffer
000270  4415              ADD      r5,r5,r2
;;;471    	main_power_buffer[3]+=(long)(adc_result);
000272  6085              STR      r5,[r0,#8]  ; main_power_buffer
000274  68c5              LDR      r5,[r0,#0xc]  ; main_power_buffer
000276  442a              ADD      r2,r2,r5
;;;472    
;;;473    	adc_net_buff_cnt++;
000278  60c2              STR      r2,[r0,#0xc]  ; main_power_buffer
00027a  8c4a              LDRH     r2,[r1,#0x22]  ; adc_net_buff_cnt
00027c  1c52              ADDS     r2,r2,#1
00027e  b212              SXTH     r2,r2
000280  844a              STRH     r2,[r1,#0x22]
;;;474    	if(adc_net_buff_cnt>=0x1000)
000282  f5b25f80          CMP      r2,#0x1000
000286  db00              BLT      |L5.650|
;;;475    		{
;;;476    		adc_net_buff_cnt=0;
000288  844b              STRH     r3,[r1,#0x22]
                  |L5.650|
;;;477    		}
;;;478    	if((adc_net_buff_cnt&0x03ff)==0)
00028a  f9b12022          LDRSH    r2,[r1,#0x22]  ; adc_net_buff_cnt
00028e  0595              LSLS     r5,r2,#22
000290  d135              BNE      |L5.766|
;;;479    		{
;;;480    		#ifdef UKU_220
;;;481    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;482    		#else
;;;483    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
000292  1292              ASRS     r2,r2,#10
000294  f8505022          LDR      r5,[r0,r2,LSL #2]
000298  122d              ASRS     r5,r5,#8
00029a  830d              STRH     r5,[r1,#0x18]
;;;484    		#endif
;;;485    		main_power_buffer[adc_net_buff_cnt>>10]=0;
00029c  f8403022          STR      r3,[r0,r2,LSL #2]
0002a0  e02d              B        |L5.766|
                  |L5.674|
;;;486    		}
;;;487    
;;;488    
;;;489    	} 
;;;490    else if(!adc_ch_net)
;;;491    	{
;;;492    	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0002a2  4f6b              LDR      r7,|L5.1104|
0002a4  7888              LDRB     r0,[r1,#2]  ; adc_ch
0002a6  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
0002aa  eb0712c0          ADD      r2,r7,r0,LSL #7
0002ae  f9b1e01a          LDRSH    lr,[r1,#0x1a]  ; adc_result
0002b2  f842e02c          STR      lr,[r2,r12,LSL #2]
;;;493    	
;;;494    	if((adc_ch_cnt&0x03)==0)
0002b6  ea5f728c          LSLS     r2,r12,#30
0002ba  d112              BNE      |L5.738|
;;;495    		{
;;;496    		long temp_L;
;;;497    		char i;
;;;498    		temp_L=0;
0002bc  2500              MOVS     r5,#0
;;;499    		for(i=0;i<32;i++)
0002be  462a              MOV      r2,r5
;;;500    			{
;;;501    			temp_L+=adc_buff[adc_ch][i];
0002c0  eb0716c0          ADD      r6,r7,r0,LSL #7
                  |L5.708|
0002c4  f8567022          LDR      r7,[r6,r2,LSL #2]
0002c8  1c52              ADDS     r2,r2,#1              ;499
0002ca  b2d2              UXTB     r2,r2                 ;499
0002cc  443d              ADD      r5,r5,r7
0002ce  2a20              CMP      r2,#0x20              ;499
0002d0  d3f8              BCC      |L5.708|
;;;502    			}
;;;503    		adc_buff_[adc_ch]= (short)(temp_L>>5);
0002d2  116a              ASRS     r2,r5,#5
0002d4  4d4a              LDR      r5,|L5.1024|
0002d6  f8252010          STRH     r2,[r5,r0,LSL #1]
;;;504    		adc_buff__[adc_ch]= adc_buff[adc_ch][adc_ch_cnt];
0002da  f1050220          ADD      r2,r5,#0x20
0002de  f822e010          STRH     lr,[r2,r0,LSL #1]
                  |L5.738|
;;;505    		//adc_buff_[3]=346;
;;;506    		}
;;;507    	if(++adc_ch>=16) 
0002e2  1c40              ADDS     r0,r0,#1
0002e4  b2c0              UXTB     r0,r0
0002e6  7088              STRB     r0,[r1,#2]
0002e8  2810              CMP      r0,#0x10
0002ea  d308              BCC      |L5.766|
;;;508    		{
;;;509    		adc_ch=0;
;;;510    		adc_ch_cnt++;
0002ec  f10c0c01          ADD      r12,r12,#1
0002f0  f00c00ff          AND      r0,r12,#0xff
0002f4  708b              STRB     r3,[r1,#2]            ;509
0002f6  70c8              STRB     r0,[r1,#3]
;;;511    		if(adc_ch_cnt>=32)adc_ch_cnt=0;
0002f8  2820              CMP      r0,#0x20
0002fa  d300              BCC      |L5.766|
0002fc  70cb              STRB     r3,[r1,#3]
                  |L5.766|
;;;512    		}
;;;513    	}
;;;514    
;;;515      
;;;516    
;;;517    adc_self_ch_cnt=0;
;;;518    
;;;519    adc_ch_net++;
0002fe  1c64              ADDS     r4,r4,#1
000300  700b              STRB     r3,[r1,#0]            ;517
;;;520    adc_ch_net&=1;
000302  f0140001          ANDS     r0,r4,#1
;;;521    
;;;522    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;523    //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;524    
;;;525    if(adc_ch_net)
;;;526    	{
;;;527    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;528    	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;529    	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
000306  4a4e              LDR      r2,|L5.1088|
000308  7048              STRB     r0,[r1,#1]            ;520
00030a  d005              BEQ      |L5.792|
00030c  6810              LDR      r0,[r2,#0]
00030e  f02000ff          BIC      r0,r0,#0xff
000312  1d00              ADDS     r0,r0,#4
000314  6010              STR      r0,[r2,#0]
000316  e034              B        |L5.898|
                  |L5.792|
;;;530    	}
;;;531    else
;;;532    	{
;;;533    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;534    	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;535    	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
000318  7889              LDRB     r1,[r1,#2]  ; adc_ch
00031a  0708              LSLS     r0,r1,#28
00031c  2800              CMP      r0,#0
;;;536    	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
00031e  6810              LDR      r0,[r2,#0]
000320  f02000ff          BIC      r0,r0,#0xff
000324  db02              BLT      |L5.812|
000326  f1000001          ADD      r0,r0,#1              ;535
00032a  e001              B        |L5.816|
                  |L5.812|
00032c  f1000002          ADD      r0,r0,#2
                  |L5.816|
000330  6010              STR      r0,[r2,#0]
;;;537    
;;;538    
;;;539    	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
000332  4848              LDR      r0,|L5.1108|
000334  6803              LDR      r3,[r0,#0]
000336  f0435380          ORR      r3,r3,#0x10000000
00033a  6003              STR      r3,[r0,#0]
;;;540    	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
00033c  6a03              LDR      r3,[r0,#0x20]
00033e  f0434380          ORR      r3,r3,#0x40000000
000342  6203              STR      r3,[r0,#0x20]
;;;541    	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
000344  6e03              LDR      r3,[r0,#0x60]
000346  f0436380          ORR      r3,r3,#0x4000000
00034a  6603              STR      r3,[r0,#0x60]
;;;542    
;;;543    	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
00034c  07cb              LSLS     r3,r1,#31
;;;544    	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
00034e  6943              LDR      r3,[r0,#0x14]
000350  d008              BEQ      |L5.868|
000352  f0435380          ORR      r3,r3,#0x10000000
                  |L5.854|
000356  6143              STR      r3,[r0,#0x14]
;;;545    
;;;546    	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
000358  078b              LSLS     r3,r1,#30
;;;547    	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
00035a  6b43              LDR      r3,[r0,#0x34]
00035c  d405              BMI      |L5.874|
00035e  f0234380          BIC      r3,r3,#0x40000000     ;546
000362  e004              B        |L5.878|
                  |L5.868|
000364  f0235380          BIC      r3,r3,#0x10000000     ;543
000368  e7f5              B        |L5.854|
                  |L5.874|
00036a  f0434380          ORR      r3,r3,#0x40000000
                  |L5.878|
00036e  6343              STR      r3,[r0,#0x34]
;;;548    
;;;549    	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
000370  0749              LSLS     r1,r1,#29
;;;550    	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
000372  6f41              LDR      r1,[r0,#0x74]
000374  d402              BMI      |L5.892|
000376  f0216180          BIC      r1,r1,#0x4000000      ;549
00037a  e001              B        |L5.896|
                  |L5.892|
00037c  f0416180          ORR      r1,r1,#0x4000000
                  |L5.896|
000380  6741              STR      r1,[r0,#0x74]         ;549
                  |L5.898|
;;;551    	}
;;;552    	
;;;553    
;;;554    
;;;555    
;;;556    LPC_ADC->ADCR |=  (1<<24);
000382  6810              LDR      r0,[r2,#0]
000384  f0407080          ORR      r0,r0,#0x1000000
000388  6010              STR      r0,[r2,#0]
                  |L5.906|
;;;557    
;;;558    }
00038a  e8bd81f0          POP      {r4-r8,pc}
;;;559    
                          ENDP

                  avg_hndl PROC
;;;560    //-----------------------------------------------
;;;561    void avg_hndl(void)
00038e  e92d4ff0          PUSH     {r4-r11,lr}
;;;562    { 
;;;563    char i;
;;;564    
;;;565    
;;;566    
;;;567    #define AVGCNTMAX	5
;;;568    if(avg_main_cnt)
000392  4931              LDR      r1,|L5.1112|
000394  f9b10000          LDRSH    r0,[r1,#0]  ; avg_main_cnt
000398  b118              CBZ      r0,|L5.930|
;;;569    	{
;;;570    	avg_main_cnt--;
00039a  f1a00001          SUB      r0,r0,#1
00039e  8008              STRH     r0,[r1,#0]
;;;571    	goto avg_hndl_end;
0003a0  e0e7              B        |L5.1394|
                  |L5.930|
;;;572    	}                 
;;;573    
;;;574    avg_main_cnt=10;
0003a2  200a              MOVS     r0,#0xa
0003a4  8008              STRH     r0,[r1,#0]
;;;575    
;;;576    avg_num=0;
0003a6  492d              LDR      r1,|L5.1116|
0003a8  2300              MOVS     r3,#0
;;;577    num_of_dumm_src=100;
0003aa  f8dfb0b4          LDR      r11,|L5.1120|
;;;578    num_of_max_src=100;
0003ae  f8df80b4          LDR      r8,|L5.1124|
0003b2  700b              STRB     r3,[r1,#0]            ;576
0003b4  2064              MOVS     r0,#0x64              ;577
0003b6  f88b0000          STRB     r0,[r11,#0]           ;577
0003ba  f8880000          STRB     r0,[r8,#0]
;;;579    
;;;580    for(i=0;i<NUMIST;i++)
0003be  481b              LDR      r0,|L5.1068|
0003c0  461a              MOV      r2,r3
0003c2  f9b04000          LDRSH    r4,[r0,#0]
;;;581    	{
;;;582    	if(/*(bps[i]._state==bsWRK)&&*/(bps[i]._cnt<20))avg_num++;
0003c6  4817              LDR      r0,|L5.1060|
0003c8  e00e              B        |L5.1000|
0003ca  bf00              NOP      
                  |L5.972|
0003cc  ebc205c2          RSB      r5,r2,r2,LSL #3
0003d0  eb050545          ADD      r5,r5,r5,LSL #1
0003d4  eb000585          ADD      r5,r0,r5,LSL #2
0003d8  78ed              LDRB     r5,[r5,#3]
0003da  2d14              CMP      r5,#0x14
0003dc  d202              BCS      |L5.996|
0003de  780d              LDRB     r5,[r1,#0]  ; avg_num
0003e0  1c6d              ADDS     r5,r5,#1
0003e2  700d              STRB     r5,[r1,#0]
                  |L5.996|
0003e4  1c52              ADDS     r2,r2,#1              ;580
0003e6  b2d2              UXTB     r2,r2                 ;580
                  |L5.1000|
0003e8  42a2              CMP      r2,r4                 ;580
0003ea  dbef              BLT      |L5.972|
;;;583    	}
;;;584    
;;;585    /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;586    if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;587    if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;588    
;;;589    	
;;;590    if(avg_num<2)
0003ec  7809              LDRB     r1,[r1,#0]  ; avg_num
0003ee  468a              MOV      r10,r1
0003f0  2902              CMP      r1,#2
0003f2  d37e              BCC      |L5.1266|
;;;591    	{
;;;592    	goto avg_hndl_end;
;;;593    	
;;;594    	}
;;;595    	
;;;596    else if(bU_VALID_VALID)
0003f4  4914              LDR      r1,|L5.1096|
0003f6  7a89              LDRB     r1,[r1,#0xa]  ; bU_VALID_VALID
0003f8  2900              CMP      r1,#0
0003fa  d07a              BEQ      |L5.1266|
;;;597    	{
;;;598    	i_avg_min=5000;
0003fc  e034              B        |L5.1128|
0003fe  0000              DCW      0x0000
                  |L5.1024|
                          DCD      ||.bss||+0x800
                  |L5.1028|
                          DCD      Kuload
                  |L5.1032|
                          DCD      load_U
                  |L5.1036|
                          DCD      load_U_
                  |L5.1040|
                          DCD      ad7705_buff_
                  |L5.1044|
                          DCD      Kiload0
                  |L5.1048|
                          DCD      Kiload1
                  |L5.1052|
                          DCD      load_I
                  |L5.1056|
                          DCD      load_I_
                  |L5.1060|
                          DCD      bps
                  |L5.1064|
                          DCD      I_MAX
                  |L5.1068|
                          DCD      NUMIST
                  |L5.1072|
                          DCD      I_MAX_IPS
                  |L5.1076|
                          DCD      I_MIN
                  |L5.1080|
                          DCD      I_MIN_IPS
                  |L5.1084|
                          DCD      0x4002c000
                  |L5.1088|
                          DCD      0x40034000
                  |L5.1092|
                          DCD      0xe000e100
                  |L5.1096|
                          DCD      ||area_number.25||
                  |L5.1100|
                          DCD      gp_av_stat
                  |L5.1104|
                          DCD      ||.bss||
                  |L5.1108|
                          DCD      0x2009c000
                  |L5.1112|
                          DCD      avg_main_cnt
                  |L5.1116|
                          DCD      avg_num
                  |L5.1120|
                          DCD      num_of_dumm_src
                  |L5.1124|
                          DCD      num_of_max_src
                  |L5.1128|
000468  4af9              LDR      r2,|L5.2128|
00046a  f2413188          MOV      r1,#0x1388
;;;599    	i_avg_max=0;
00046e  f8dfc3e4          LDR      r12,|L5.2132|
000472  6011              STR      r1,[r2,#0]  ; i_avg_min
;;;600    	i_avg_summ=0;
000474  4df8              LDR      r5,|L5.2136|
000476  f8cc3000          STR      r3,[r12,#0]  ; i_avg_max
;;;601    	for(i=0;i<NUMIST;i++)
00047a  2100              MOVS     r1,#0
00047c  602b              STR      r3,[r5,#0]  ; i_avg_summ
00047e  e01f              B        |L5.1216|
                  |L5.1152|
;;;602    		{
;;;603    		if(bps[i]._state==bsWRK)
000480  ebc106c1          RSB      r6,r1,r1,LSL #3
000484  eb060646          ADD      r6,r6,r6,LSL #1
000488  eb000686          ADD      r6,r0,r6,LSL #2
00048c  78b7              LDRB     r7,[r6,#2]
00048e  2f01              CMP      r7,#1
000490  d114              BNE      |L5.1212|
;;;604    			{
;;;605    			if(bps[i]._Ii>i_avg_max)
000492  6a36              LDR      r6,[r6,#0x20]
000494  f8dc7000          LDR      r7,[r12,#0]  ; i_avg_max
000498  46b1              MOV      r9,r6
00049a  42be              CMP      r6,r7
00049c  dd03              BLE      |L5.1190|
;;;606    				{
;;;607    				i_avg_max=bps[i]._Ii;
;;;608    				num_of_max_src=i;
00049e  f8cc9000          STR      r9,[r12,#0]  ; i_avg_max
0004a2  f8881000          STRB     r1,[r8,#0]
                  |L5.1190|
;;;609    				}
;;;610    			if(bps[i]._Ii<i_avg_min)
0004a6  6817              LDR      r7,[r2,#0]  ; i_avg_min
0004a8  45b9              CMP      r9,r7
0004aa  da03              BGE      |L5.1204|
;;;611    				{
;;;612    				i_avg_min=bps[i]._Ii;
;;;613    				num_of_dumm_src=i;
0004ac  f8c29000          STR      r9,[r2,#0]  ; i_avg_min
0004b0  f88b1000          STRB     r1,[r11,#0]
                  |L5.1204|
;;;614    				}
;;;615    			
;;;616    			i_avg_summ+=bps[i]._Ii;
0004b4  682f              LDR      r7,[r5,#0]  ; i_avg_summ
0004b6  eb090607          ADD      r6,r9,r7
0004ba  602e              STR      r6,[r5,#0]  ; i_avg_summ
                  |L5.1212|
0004bc  1c49              ADDS     r1,r1,#1              ;601
0004be  b2c9              UXTB     r1,r1                 ;601
                  |L5.1216|
0004c0  42a1              CMP      r1,r4                 ;601
0004c2  dbdd              BLT      |L5.1152|
;;;617    			}
;;;618    		}
;;;619    	i_avg=i_avg_summ/avg_num;	
0004c4  682e              LDR      r6,[r5,#0]  ; i_avg_summ
0004c6  fb96f5fa          SDIV     r5,r6,r10
0004ca  4ee4              LDR      r6,|L5.2140|
;;;620    	
;;;621    	if(i_avg_min==0)i_avg_min=1;
0004cc  6035              STR      r5,[r6,#0]  ; i_avg
0004ce  6816              LDR      r6,[r2,#0]  ; i_avg_min
0004d0  2501              MOVS     r5,#1                 ;603
0004d2  b906              CBNZ     r6,|L5.1238|
0004d4  6015              STR      r5,[r2,#0]  ; i_avg_min
                  |L5.1238|
;;;622    
;;;623    	
;;;624    
;;;625    	avg=i_avg_max;
0004d6  f8dc6000          LDR      r6,[r12,#0]  ; i_avg_max
;;;626    	avg*=100;
0004da  2764              MOVS     r7,#0x64
;;;627    	avg/=i_avg_min;
0004dc  6812              LDR      r2,[r2,#0]  ; i_avg_min
0004de  437e              MULS     r6,r7,r6              ;626
0004e0  fb96f2f2          SDIV     r2,r6,r2
0004e4  f8dfc378          LDR      r12,|L5.2144|
;;;628    	
;;;629    	if(avg>160) bAVG=1;
0004e8  4ede              LDR      r6,|L5.2148|
0004ea  2aa0              CMP      r2,#0xa0
0004ec  f8cc2000          STR      r2,[r12,#0]  ; avg
0004f0  e000              B        |L5.1268|
                  |L5.1266|
0004f2  e028              B        |L5.1350|
                  |L5.1268|
0004f4  dd00              BLE      |L5.1272|
0004f6  7035              STRB     r5,[r6,#0]
                  |L5.1272|
;;;630    	if(avg<120) bAVG=0;
0004f8  2a78              CMP      r2,#0x78
0004fa  da01              BGE      |L5.1280|
0004fc  7033              STRB     r3,[r6,#0]
0004fe  e038              B        |L5.1394|
                  |L5.1280|
;;;631    
;;;632    	if(bAVG==1)
000500  7832              LDRB     r2,[r6,#0]  ; bAVG
000502  2a01              CMP      r2,#1
000504  d135              BNE      |L5.1394|
;;;633    		{
;;;634    		//for(i=0;i<NUMIST;i++)
;;;635    			//{
;;;636    		//	if(bps[i]._state==bsWRK)
;;;637    				//{
;;;638    				//if(bps[i]._Ii>i_avg)bps[i]._xu_--;
;;;639    				/*if(bps[i]._Ii<i_avg)*/
;;;640    				if(bAVG_CNT==0)
000506  4ad8              LDR      r2,|L5.2152|
000508  7816              LDRB     r6,[r2,#0]  ; bAVG_CNT
00050a  b1ee              CBZ      r6,|L5.1352|
;;;641    					{
;;;642    					bAVG_CNT=1;
;;;643    					if(num_of_dumm_src<NUMIST) bps[num_of_dumm_src]._xu_++;
;;;644    					}
;;;645    				else
;;;646    					{
;;;647    					bAVG_CNT=0;
00050c  7013              STRB     r3,[r2,#0]
;;;648    					if(num_of_max_src<NUMIST) bps[num_of_max_src]._xu_--;
00050e  f8982000          LDRB     r2,[r8,#0]  ; num_of_max_src
000512  42a2              CMP      r2,r4
000514  da09              BGE      |L5.1322|
000516  ebc202c2          RSB      r2,r2,r2,LSL #3
00051a  eb020242          ADD      r2,r2,r2,LSL #1
00051e  eb000282          ADD      r2,r0,r2,LSL #2
000522  f8323f50          LDRH     r3,[r2,#0x50]!
000526  1e5b              SUBS     r3,r3,#1
                  |L5.1320|
000528  8013              STRH     r3,[r2,#0]
                  |L5.1322|
;;;649    					}
;;;650    			
;;;651    				if(bps[i]._xu_<-50)bps[i]._xu_=-50;
00052a  ebc101c1          RSB      r1,r1,r1,LSL #3
00052e  eb010141          ADD      r1,r1,r1,LSL #1
000532  eb000081          ADD      r0,r0,r1,LSL #2
000536  f06f0231          MVN      r2,#0x31
00053a  f9b01050          LDRSH    r1,[r0,#0x50]
00053e  4291              CMP      r1,r2
000540  da11              BGE      |L5.1382|
000542  f8a02050          STRH     r2,[r0,#0x50]
                  |L5.1350|
000546  e014              B        |L5.1394|
                  |L5.1352|
000548  7015              STRB     r5,[r2,#0]            ;642
00054a  f89b2000          LDRB     r2,[r11,#0]           ;643  ; num_of_dumm_src
00054e  42a2              CMP      r2,r4                 ;643
000550  daeb              BGE      |L5.1322|
000552  ebc202c2          RSB      r2,r2,r2,LSL #3       ;643
000556  eb020242          ADD      r2,r2,r2,LSL #1       ;643
00055a  eb000282          ADD      r2,r0,r2,LSL #2       ;643
00055e  f8323f50          LDRH     r3,[r2,#0x50]!        ;643
000562  1c5b              ADDS     r3,r3,#1              ;643
000564  e7e0              B        |L5.1320|
                  |L5.1382|
;;;652    				if(bps[i]._xu_>50)bps[i]._xu_=50;	
000566  2932              CMP      r1,#0x32
000568  dd03              BLE      |L5.1394|
00056a  f04f0132          MOV      r1,#0x32
00056e  f8a01050          STRH     r1,[r0,#0x50]
                  |L5.1394|
;;;653    			//	}
;;;654    			//}		
;;;655    		}			
;;;656    	}   	 
;;;657    
;;;658    
;;;659    avg_hndl_end:
;;;660    __nop();  
000572  bf00              NOP      
;;;661    }
000574  e8bd8ff0          POP      {r4-r11,pc}
;;;662    
                          ENDP

                  restart_off PROC
;;;1178   //-----------------------------------------------
;;;1179   void restart_off(void)
000578  b510              PUSH     {r4,lr}
;;;1180   {
;;;1181   lc640_write_long(EE_TIME_PROC_GS_RESTART,0);
00057a  2100              MOVS     r1,#0
00057c  20d0              MOVS     r0,#0xd0
00057e  f7fffffe          BL       lc640_write_long
;;;1182   lc640_write_long(EE_TIME_PROC_PS_RESTART,0);
000582  2100              MOVS     r1,#0
000584  e8bd4010          POP      {r4,lr}
000588  20d4              MOVS     r0,#0xd4
00058a  f7ffbffe          B.W      lc640_write_long
;;;1183   }
;;;1184   
                          ENDP

                  ach_off_hndl PROC
;;;934    //драйвер функции выключения по амперчасам
;;;935    void ach_off_hndl(void)
00058e  b570              PUSH     {r4-r6,lr}
;;;936    {
;;;937    
;;;938    if((work_stat!=wsOFF)&&(ACH_OFF_EN))
000590  4cb6              LDR      r4,|L5.2156|
;;;939    	{
;;;940    	milliAmperSecunda+=((long)load_I);
000592  48b7              LDR      r0,|L5.2160|
000594  2500              MOVS     r5,#0                 ;938
000596  7821              LDRB     r1,[r4,#0]            ;938  ; work_stat
000598  b351              CBZ      r1,|L5.1520|
00059a  49b6              LDR      r1,|L5.2164|
00059c  8809              LDRH     r1,[r1,#0]            ;938  ; ACH_OFF_EN
00059e  b339              CBZ      r1,|L5.1520|
0005a0  4ab5              LDR      r2,|L5.2168|
0005a2  6801              LDR      r1,[r0,#0]  ; milliAmperSecunda
0005a4  f9b22000          LDRSH    r2,[r2,#0]  ; load_I
0005a8  4411              ADD      r1,r1,r2
;;;941    	if(milliAmperSecunda>=3600L)
0005aa  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
0005ac  f5b16f61          CMP      r1,#0xe10
0005b0  db1f              BLT      |L5.1522|
;;;942    		{
;;;943    		milliAmperSecunda-=3600L;
;;;944    		AMPERCHAS+=1;
0005b2  4eb2              LDR      r6,|L5.2172|
0005b4  f5a16161          SUB      r1,r1,#0xe10          ;943
0005b8  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
0005ba  6831              LDR      r1,[r6,#0]  ; AMPERCHAS
;;;945    		lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
0005bc  f640401c          MOV      r0,#0xc1c
0005c0  1c49              ADDS     r1,r1,#1              ;944
0005c2  6031              STR      r1,[r6,#0]  ; AMPERCHAS
0005c4  f7fffffe          BL       lc640_write_long
;;;946    
;;;947    		if(AMPERCHAS>=ACH_OFF_LEVEL)
0005c8  49ad              LDR      r1,|L5.2176|
0005ca  6830              LDR      r0,[r6,#0]  ; AMPERCHAS
0005cc  f9b11000          LDRSH    r1,[r1,#0]  ; ACH_OFF_LEVEL
0005d0  4288              CMP      r0,r1
0005d2  db0e              BLT      |L5.1522|
;;;948    			{
;;;949    			work_stat=wsOFF;
0005d4  7025              STRB     r5,[r4,#0]
;;;950    			restart_off();
0005d6  f7fffffe          BL       restart_off
;;;951    			tree_up(iProcIsComplete,1,0,0);
0005da  2300              MOVS     r3,#0
0005dc  461a              MOV      r2,r3
0005de  2101              MOVS     r1,#1
0005e0  207a              MOVS     r0,#0x7a
0005e2  f7fffffe          BL       tree_up
;;;952    			ret(0);
0005e6  e8bd4070          POP      {r4-r6,lr}
0005ea  2000              MOVS     r0,#0
0005ec  f7ffbffe          B.W      ||ret||
                  |L5.1520|
;;;953    			}
;;;954    		}
;;;955    	}
;;;956    else 
;;;957    	{
;;;958    	milliAmperSecunda=0;
0005f0  6005              STR      r5,[r0,#0]  ; milliAmperSecunda
                  |L5.1522|
;;;959    	}
;;;960    
;;;961    }
0005f2  bd70              POP      {r4-r6,pc}
;;;962     	
                          ENDP

                  curr_off_hndl PROC
;;;964    //драйвер функции выключения по снижению тока
;;;965    void curr_off_hndl(void)
0005f4  b570              PUSH     {r4-r6,lr}
;;;966    {
;;;967    
;;;968    if((work_stat!=wsOFF)&&(CURR_OFF_EN))
0005f6  4c9d              LDR      r4,|L5.2156|
;;;969    	{
;;;970    	if(curr_off_start_cnt<CUR_OFF_T_OFF)curr_off_start_cnt++;
;;;971    	else
;;;972    		{
;;;973    		signed int temp_I=0;
;;;974    		if(work_stat==wsGS)
;;;975    			{
;;;976    			temp_I=(signed int)I_ug_temp;
;;;977    			}
;;;978    		else if(work_stat==wsPS)
;;;979    			{
;;;980    			temp_I=(signed int)I_maxp;
;;;981    			}
;;;982    		temp_I*=(signed int)CUR_OFF_LEVEL_RELATIV;
;;;983    		temp_I/=100;
;;;984    		curr_off_temp=(short)temp_I;
;;;985    		if(load_I<curr_off_temp)
;;;986    			{
;;;987    			curr_off_stop_cnt++;
0005f8  4aa2              LDR      r2,|L5.2180|
0005fa  48a3              LDR      r0,|L5.2184|
0005fc  7825              LDRB     r5,[r4,#0]            ;968  ; work_stat
0005fe  2100              MOVS     r1,#0                 ;968
000600  b3f5              CBZ      r5,|L5.1664|
000602  4ba2              LDR      r3,|L5.2188|
000604  881b              LDRH     r3,[r3,#0]            ;968  ; CURR_OFF_EN
000606  b3db              CBZ      r3,|L5.1664|
000608  4ea1              LDR      r6,|L5.2192|
00060a  f9b03000          LDRSH    r3,[r0,#0]            ;970  ; curr_off_start_cnt
00060e  f9b66000          LDRSH    r6,[r6,#0]            ;970  ; CUR_OFF_T_OFF
000612  42b3              CMP      r3,r6                 ;970
000614  da02              BGE      |L5.1564|
000616  1c5b              ADDS     r3,r3,#1              ;970
000618  8003              STRH     r3,[r0,#0]            ;970
                  |L5.1562|
;;;988    			if(curr_off_stop_cnt>=CUR_OFF_T_ON)
;;;989    				{
;;;990    				work_stat=wsOFF;
;;;991    				restart_off();
;;;992    				tree_up(iProcIsComplete,2,0,0);
;;;993    				ret(0);
;;;994    				}
;;;995    			}
;;;996    		else curr_off_stop_cnt=0;
;;;997    		}
;;;998    	}
;;;999    else 
;;;1000   	{
;;;1001   	curr_off_start_cnt=0;
;;;1002   	curr_off_stop_cnt=0;
;;;1003   	}
;;;1004   }	
00061a  bd70              POP      {r4-r6,pc}
                  |L5.1564|
00061c  2000              MOVS     r0,#0                 ;973
00061e  2d01              CMP      r5,#1                 ;974
000620  d002              BEQ      |L5.1576|
000622  2d02              CMP      r5,#2                 ;978
000624  d002              BEQ      |L5.1580|
000626  e004              B        |L5.1586|
                  |L5.1576|
000628  489a              LDR      r0,|L5.2196|
00062a  e000              B        |L5.1582|
                  |L5.1580|
00062c  489a              LDR      r0,|L5.2200|
                  |L5.1582|
00062e  f9b00000          LDRSH    r0,[r0,#0]            ;980  ; I_maxp
                  |L5.1586|
000632  4b9a              LDR      r3,|L5.2204|
000634  f9b33000          LDRSH    r3,[r3,#0]            ;982  ; CUR_OFF_LEVEL_RELATIV
000638  4358              MULS     r0,r3,r0              ;982
00063a  2364              MOVS     r3,#0x64              ;983
00063c  fb90f0f3          SDIV     r0,r0,r3              ;983
000640  4b97              LDR      r3,|L5.2208|
000642  b200              SXTH     r0,r0                 ;984
000644  8018              STRH     r0,[r3,#0]            ;984
000646  4b8c              LDR      r3,|L5.2168|
000648  f9b33000          LDRSH    r3,[r3,#0]            ;985  ; load_I
00064c  4283              CMP      r3,r0                 ;985
00064e  da16              BGE      |L5.1662|
000650  8810              LDRH     r0,[r2,#0]            ;987  ; curr_off_stop_cnt
000652  1c40              ADDS     r0,r0,#1              ;987
000654  b200              SXTH     r0,r0                 ;987
000656  8010              STRH     r0,[r2,#0]            ;987
000658  4a92              LDR      r2,|L5.2212|
00065a  f9b22000          LDRSH    r2,[r2,#0]            ;988  ; CUR_OFF_T_ON
00065e  4290              CMP      r0,r2                 ;988
000660  dbdb              BLT      |L5.1562|
000662  7021              STRB     r1,[r4,#0]            ;990
000664  f7fffffe          BL       restart_off
000668  2300              MOVS     r3,#0                 ;992
00066a  461a              MOV      r2,r3                 ;992
00066c  2102              MOVS     r1,#2                 ;992
00066e  207a              MOVS     r0,#0x7a              ;992
000670  f7fffffe          BL       tree_up
000674  e8bd4070          POP      {r4-r6,lr}            ;993
000678  2000              MOVS     r0,#0                 ;993
00067a  f7ffbffe          B.W      ||ret||
                  |L5.1662|
00067e  e000              B        |L5.1666|
                  |L5.1664|
000680  e001              B        |L5.1670|
                  |L5.1666|
000682  8011              STRH     r1,[r2,#0]            ;996
000684  bd70              POP      {r4-r6,pc}
                  |L5.1670|
000686  8001              STRH     r1,[r0,#0]            ;1001
000688  e7f9              B        |L5.1662|
;;;1005   
                          ENDP

                  time_hndl PROC
;;;1006   //-----------------------------------------------
;;;1007   void time_hndl(void) /*ГЦ раз в секунду*/
00068a  e92d5ff0          PUSH     {r4-r12,lr}
;;;1008   {
;;;1009   if((REV_IS_ON)&&(AVT_REV_IS_ON))
;;;1010   	{
;;;1011   
;;;1012   	}
;;;1013   
;;;1014   
;;;1015   
;;;1016   
;;;1017   if(work_stat==wsGS)
00068e  f8df81dc          LDR      r8,|L5.2156|
;;;1018   	{
;;;1019   	time_proc++;
;;;1020   	if(((time_proc%600L)==0)&&(restart_enable==reON))
;;;1021   		{
;;;1022   		lc640_write_long(EE_TIME_PROC_GS_RESTART,time_proc);
;;;1023   		}
;;;1024   	if(time_proc_remain)
;;;1025   		{
;;;1026   		time_proc_remain--;
;;;1027   		}
;;;1028   	if((!time_proc_remain)&&(!T_PROC_GS_MODE))
;;;1029   		{
;;;1030   		work_stat=wsOFF;
;;;1031   		restart_off();
;;;1032   		tree_up(iProcIsComplete,0,0,0);
;;;1033   		ret(0);
;;;1034   		}
;;;1035   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000692  f8dfb214          LDR      r11,|L5.2216|
;;;1036   		time_proc_phase++;
;;;1037   		
;;;1038   		if(proc_phase==ppFF) {
;;;1039   			REV_STAT=rsFF;
000696  4d85              LDR      r5,|L5.2220|
000698  f8980000          LDRB     r0,[r8,#0]            ;1017  ; work_stat
;;;1040   			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;1041   				proc_phase=ppFF_P_REW;	
;;;1042   				time_proc_phase=0;
;;;1043   			}
;;;1044   		} else if(proc_phase==ppFF_P_REW) {
;;;1045   			if(time_proc_phase==0)REV_STAT=rsFF;
;;;1046   			else REV_STAT=rsREW;
;;;1047   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
00069c  4f84              LDR      r7,|L5.2224|
00069e  f8df9214          LDR      r9,|L5.2228|
0006a2  2601              MOVS     r6,#1                 ;1017
0006a4  2400              MOVS     r4,#0                 ;1024
0006a6  f44f7a16          MOV      r10,#0x258            ;1020
0006aa  2801              CMP      r0,#1                 ;1017
0006ac  d162              BNE      |L5.1908|
0006ae  4882              LDR      r0,|L5.2232|
0006b0  6801              LDR      r1,[r0,#0]            ;1019  ; time_proc
0006b2  1c49              ADDS     r1,r1,#1              ;1019
0006b4  fb91f2fa          SDIV     r2,r1,r10             ;1020
0006b8  6001              STR      r1,[r0,#0]            ;1020  ; time_proc
0006ba  fb0a1012          MLS      r0,r10,r2,r1          ;1020
0006be  b930              CBNZ     r0,|L5.1742|
0006c0  487e              LDR      r0,|L5.2236|
0006c2  7800              LDRB     r0,[r0,#0]            ;1020  ; restart_enable
0006c4  2801              CMP      r0,#1                 ;1020
0006c6  d102              BNE      |L5.1742|
0006c8  20d0              MOVS     r0,#0xd0              ;1022
0006ca  f7fffffe          BL       lc640_write_long
                  |L5.1742|
0006ce  f8d91000          LDR      r1,[r9,#0]            ;1024  ; time_proc_remain
0006d2  4648              MOV      r0,r9                 ;1024
0006d4  b109              CBZ      r1,|L5.1754|
0006d6  1e49              SUBS     r1,r1,#1              ;1026
0006d8  6001              STR      r1,[r0,#0]            ;1026  ; time_proc_remain
                  |L5.1754|
0006da  4608              MOV      r0,r1                 ;1028
0006dc  4978              LDR      r1,|L5.2240|
0006de  f9b11000          LDRSH    r1,[r1,#0]            ;1028  ; T_PROC_GS_MODE
0006e2  4308              ORRS     r0,r0,r1              ;1028
0006e4  d10c              BNE      |L5.1792|
0006e6  f8884000          STRB     r4,[r8,#0]            ;1030
0006ea  f7fffffe          BL       restart_off
0006ee  2300              MOVS     r3,#0                 ;1032
0006f0  461a              MOV      r2,r3                 ;1032
0006f2  4619              MOV      r1,r3                 ;1032
0006f4  207a              MOVS     r0,#0x7a              ;1032
0006f6  f7fffffe          BL       tree_up
0006fa  2000              MOVS     r0,#0                 ;1033
0006fc  f7fffffe          BL       ||ret||
                  |L5.1792|
000700  4870              LDR      r0,|L5.2244|
000702  8800              LDRH     r0,[r0,#0]            ;1035  ; REV_IS_ON
000704  b3b0              CBZ      r0,|L5.1908|
000706  f8bb0000          LDRH     r0,[r11,#0]           ;1035  ; AVT_REV_IS_ON
00070a  b398              CBZ      r0,|L5.1908|
00070c  4b6e              LDR      r3,|L5.2248|
00070e  8818              LDRH     r0,[r3,#0]            ;1036  ; time_proc_phase
000710  1c40              ADDS     r0,r0,#1              ;1036
000712  b201              SXTH     r1,r0                 ;1036
000714  486d              LDR      r0,|L5.2252|
000716  8019              STRH     r1,[r3,#0]            ;1036
000718  7802              LDRB     r2,[r0,#0]            ;1038  ; proc_phase
00071a  b132              CBZ      r2,|L5.1834|
00071c  2a01              CMP      r2,#1                 ;1044
00071e  d00c              BEQ      |L5.1850|
;;;1048   				proc_phase=ppREW;	
;;;1049   				time_proc_phase=0;
;;;1050   			}
;;;1051   		} else if(proc_phase==ppREW) {
000720  2a02              CMP      r2,#2
000722  d015              BEQ      |L5.1872|
;;;1052   			REV_STAT=rsREW;
;;;1053   			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;1054   				proc_phase=ppREW_P_FF;	
;;;1055   				time_proc_phase=0;
;;;1056   			}
;;;1057   		} else if(proc_phase==ppREW_P_FF) {
000724  2a03              CMP      r2,#3
000726  d01c              BEQ      |L5.1890|
000728  e024              B        |L5.1908|
                  |L5.1834|
00072a  4a69              LDR      r2,|L5.2256|
00072c  702e              STRB     r6,[r5,#0]            ;1039
00072e  f9b22000          LDRSH    r2,[r2,#0]            ;1040  ; AVT_REV_TIME_FF
000732  4291              CMP      r1,r2                 ;1040
000734  db1e              BLT      |L5.1908|
000736  7006              STRB     r6,[r0,#0]            ;1041
000738  e01b              B        |L5.1906|
                  |L5.1850|
00073a  b139              CBZ      r1,|L5.1868|
00073c  f8854000          STRB.W   r4,[r5,#0]            ;1046
                  |L5.1856|
000740  f9b72000          LDRSH    r2,[r7,#0]            ;1047  ; AVT_REV_TIME_PAUSE
000744  4291              CMP      r1,r2                 ;1047
000746  db15              BLT      |L5.1908|
000748  2102              MOVS     r1,#2                 ;1048
00074a  e008              B        |L5.1886|
                  |L5.1868|
00074c  702e              STRB     r6,[r5,#0]            ;1045
00074e  e7f7              B        |L5.1856|
                  |L5.1872|
000750  4a60              LDR      r2,|L5.2260|
000752  702c              STRB     r4,[r5,#0]            ;1052
000754  f9b22000          LDRSH    r2,[r2,#0]            ;1053  ; AVT_REV_TIME_REW
000758  4291              CMP      r1,r2                 ;1053
00075a  db0b              BLT      |L5.1908|
00075c  2103              MOVS     r1,#3                 ;1054
                  |L5.1886|
00075e  7001              STRB     r1,[r0,#0]            ;1048
000760  e007              B        |L5.1906|
                  |L5.1890|
;;;1058   			if(time_proc_phase==0)REV_STAT=rsREW;
000762  b1a9              CBZ      r1,|L5.1936|
;;;1059   			else REV_STAT=rsFF;
000764  f8856000          STRB.W   r6,[r5,#0]
                  |L5.1896|
;;;1060   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
000768  f9b72000          LDRSH    r2,[r7,#0]  ; AVT_REV_TIME_PAUSE
00076c  4291              CMP      r1,r2
00076e  db01              BLT      |L5.1908|
;;;1061   				proc_phase=ppFF;	
000770  7004              STRB     r4,[r0,#0]
                  |L5.1906|
;;;1062   				time_proc_phase=0;
000772  801c              STRH     r4,[r3,#0]
                  |L5.1908|
;;;1063   			}
;;;1064   		}
;;;1065   	}
;;;1066   	}
;;;1067   
;;;1068   
;;;1069   if(work_stat==wsPS)
000774  f8980000          LDRB     r0,[r8,#0]  ; work_stat
000778  2802              CMP      r0,#2
00077a  d15c              BNE      |L5.2102|
;;;1070   	{
;;;1071   	time_proc++;
00077c  484e              LDR      r0,|L5.2232|
00077e  6801              LDR      r1,[r0,#0]  ; time_proc
000780  1c49              ADDS     r1,r1,#1
;;;1072   	if(((time_proc%600L)==0)&&(restart_enable==reON))
000782  fb91f2fa          SDIV     r2,r1,r10
000786  6001              STR      r1,[r0,#0]  ; time_proc
000788  fb0a1012          MLS      r0,r10,r2,r1
00078c  b110              CBZ      r0,|L5.1940|
00078e  e008              B        |L5.1954|
                  |L5.1936|
000790  702c              STRB     r4,[r5,#0]            ;1058
000792  e7e9              B        |L5.1896|
                  |L5.1940|
000794  4849              LDR      r0,|L5.2236|
000796  7800              LDRB     r0,[r0,#0]  ; restart_enable
000798  2801              CMP      r0,#1
00079a  d102              BNE      |L5.1954|
;;;1073   		{
;;;1074   		lc640_write_long(EE_TIME_PROC_PS_RESTART,time_proc);
00079c  20d4              MOVS     r0,#0xd4
00079e  f7fffffe          BL       lc640_write_long
                  |L5.1954|
;;;1075   		}
;;;1076   	if(time_proc_remain)
0007a2  f8d91000          LDR      r1,[r9,#0]  ; time_proc_remain
0007a6  4648              MOV      r0,r9
0007a8  b109              CBZ      r1,|L5.1966|
;;;1077   		{
;;;1078   		time_proc_remain--;
0007aa  1e49              SUBS     r1,r1,#1
0007ac  6001              STR      r1,[r0,#0]  ; time_proc_remain
                  |L5.1966|
;;;1079   		}
;;;1080   	if((!time_proc_remain)&&(!T_PROC_PS_MODE))
0007ae  4608              MOV      r0,r1
0007b0  4949              LDR      r1,|L5.2264|
0007b2  f9b11000          LDRSH    r1,[r1,#0]  ; T_PROC_PS_MODE
0007b6  4308              ORRS     r0,r0,r1
0007b8  d10c              BNE      |L5.2004|
;;;1081   		{
;;;1082   		work_stat=wsOFF;
0007ba  f8884000          STRB     r4,[r8,#0]
;;;1083   		restart_off();
0007be  f7fffffe          BL       restart_off
;;;1084   		tree_up(iProcIsComplete,0,0,0);
0007c2  2300              MOVS     r3,#0
0007c4  461a              MOV      r2,r3
0007c6  4619              MOV      r1,r3
0007c8  207a              MOVS     r0,#0x7a
0007ca  f7fffffe          BL       tree_up
;;;1085   		ret(0);
0007ce  2000              MOVS     r0,#0
0007d0  f7fffffe          BL       ||ret||
                  |L5.2004|
;;;1086   		}
;;;1087   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0007d4  483b              LDR      r0,|L5.2244|
0007d6  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
0007d8  2800              CMP      r0,#0
0007da  d02c              BEQ      |L5.2102|
0007dc  f8bb0000          LDRH     r0,[r11,#0]  ; AVT_REV_IS_ON
0007e0  2800              CMP      r0,#0
0007e2  d028              BEQ      |L5.2102|
;;;1088   		time_proc_phase++;
0007e4  4838              LDR      r0,|L5.2248|
0007e6  8801              LDRH     r1,[r0,#0]  ; time_proc_phase
0007e8  1c49              ADDS     r1,r1,#1
0007ea  b20a              SXTH     r2,r1
;;;1089   		
;;;1090   		if(proc_phase==ppFF) {
0007ec  4937              LDR      r1,|L5.2252|
0007ee  8002              STRH     r2,[r0,#0]            ;1088
0007f0  780b              LDRB     r3,[r1,#0]  ; proc_phase
0007f2  b16b              CBZ      r3,|L5.2064|
;;;1091   			REV_STAT=rsFF;
;;;1092   			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;1093   				proc_phase=ppFF_P_REW;	
;;;1094   				time_proc_phase=0;
;;;1095   			}
;;;1096   		} else if(proc_phase==ppFF_P_REW) {
0007f4  2b01              CMP      r3,#1
0007f6  d013              BEQ      |L5.2080|
;;;1097   			if(time_proc_phase==0)REV_STAT=rsFF;
;;;1098   			else REV_STAT=rsREW;
;;;1099   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;1100   				proc_phase=ppREW;	
;;;1101   				time_proc_phase=0;
;;;1102   			}
;;;1103   		} else if(proc_phase==ppREW) {
0007f8  2b02              CMP      r3,#2
0007fa  d01e              BEQ      |L5.2106|
;;;1104   			REV_STAT=rsREW;
;;;1105   			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;1106   				proc_phase=ppREW_P_FF;	
;;;1107   				time_proc_phase=0;
;;;1108   			}
;;;1109   		} else if(proc_phase==ppREW_P_FF) {
0007fc  2b03              CMP      r3,#3
0007fe  d11a              BNE      |L5.2102|
;;;1110   			if(time_proc_phase==0)REV_STAT=rsREW;
000800  b322              CBZ      r2,|L5.2124|
;;;1111   			else REV_STAT=rsFF;
000802  702e              STRB     r6,[r5,#0]
                  |L5.2052|
;;;1112   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
000804  f9b73000          LDRSH    r3,[r7,#0]  ; AVT_REV_TIME_PAUSE
000808  429a              CMP      r2,r3
00080a  db14              BLT      |L5.2102|
;;;1113   				proc_phase=ppFF;	
00080c  700c              STRB     r4,[r1,#0]
;;;1114   				time_proc_phase=0;
00080e  e011              B        |L5.2100|
                  |L5.2064|
000810  4b2f              LDR      r3,|L5.2256|
000812  702e              STRB     r6,[r5,#0]            ;1091
000814  f9b33000          LDRSH    r3,[r3,#0]            ;1092  ; AVT_REV_TIME_FF
000818  429a              CMP      r2,r3                 ;1092
00081a  db0c              BLT      |L5.2102|
00081c  700e              STRB     r6,[r1,#0]            ;1093
00081e  e009              B        |L5.2100|
                  |L5.2080|
000820  b132              CBZ      r2,|L5.2096|
000822  702c              STRB     r4,[r5,#0]            ;1098
                  |L5.2084|
000824  f9b73000          LDRSH    r3,[r7,#0]            ;1099  ; AVT_REV_TIME_PAUSE
000828  429a              CMP      r2,r3                 ;1099
00082a  db04              BLT      |L5.2102|
00082c  2202              MOVS     r2,#2                 ;1100
00082e  e00b              B        |L5.2120|
                  |L5.2096|
000830  702e              STRB     r6,[r5,#0]            ;1097
000832  e7f7              B        |L5.2084|
                  |L5.2100|
000834  8004              STRH     r4,[r0,#0]            ;1094
                  |L5.2102|
;;;1115   			}
;;;1116   		}
;;;1117   	}
;;;1118   	}
;;;1119   
;;;1120   
;;;1121   
;;;1122   }
000836  e8bd9ff0          POP      {r4-r12,pc}
                  |L5.2106|
00083a  4b26              LDR      r3,|L5.2260|
00083c  702c              STRB     r4,[r5,#0]            ;1104
00083e  f9b33000          LDRSH    r3,[r3,#0]            ;1105  ; AVT_REV_TIME_REW
000842  429a              CMP      r2,r3                 ;1105
000844  dbf7              BLT      |L5.2102|
000846  2203              MOVS     r2,#3                 ;1106
                  |L5.2120|
000848  700a              STRB     r2,[r1,#0]            ;1106
00084a  e7f3              B        |L5.2100|
                  |L5.2124|
00084c  e046              B        |L5.2268|
00084e  0000              DCW      0x0000
                  |L5.2128|
                          DCD      i_avg_min
                  |L5.2132|
                          DCD      i_avg_max
                  |L5.2136|
                          DCD      i_avg_summ
                  |L5.2140|
                          DCD      i_avg
                  |L5.2144|
                          DCD      avg
                  |L5.2148|
                          DCD      bAVG
                  |L5.2152|
                          DCD      bAVG_CNT
                  |L5.2156|
                          DCD      work_stat
                  |L5.2160|
                          DCD      milliAmperSecunda
                  |L5.2164|
                          DCD      ACH_OFF_EN
                  |L5.2168|
                          DCD      load_I
                  |L5.2172|
                          DCD      AMPERCHAS
                  |L5.2176|
                          DCD      ACH_OFF_LEVEL
                  |L5.2180|
                          DCD      curr_off_stop_cnt
                  |L5.2184|
                          DCD      curr_off_start_cnt
                  |L5.2188|
                          DCD      CURR_OFF_EN
                  |L5.2192|
                          DCD      CUR_OFF_T_OFF
                  |L5.2196|
                          DCD      I_ug_temp
                  |L5.2200|
                          DCD      I_maxp
                  |L5.2204|
                          DCD      CUR_OFF_LEVEL_RELATIV
                  |L5.2208|
                          DCD      curr_off_temp
                  |L5.2212|
                          DCD      CUR_OFF_T_ON
                  |L5.2216|
                          DCD      AVT_REV_IS_ON
                  |L5.2220|
                          DCD      REV_STAT
                  |L5.2224|
                          DCD      AVT_REV_TIME_PAUSE
                  |L5.2228|
                          DCD      time_proc_remain
                  |L5.2232|
                          DCD      time_proc
                  |L5.2236|
                          DCD      restart_enable
                  |L5.2240|
                          DCD      T_PROC_GS_MODE
                  |L5.2244|
                          DCD      REV_IS_ON
                  |L5.2248|
                          DCD      time_proc_phase
                  |L5.2252|
                          DCD      proc_phase
                  |L5.2256|
                          DCD      AVT_REV_TIME_FF
                  |L5.2260|
                          DCD      AVT_REV_TIME_REW
                  |L5.2264|
                          DCD      T_PROC_PS_MODE
                  |L5.2268|
0008dc  702c              STRB     r4,[r5,#0]            ;1110
0008de  e791              B        |L5.2052|
;;;1123   
                          ENDP

                  cap_time_hndl PROC
;;;1124   //-----------------------------------------------
;;;1125   void cap_time_hndl(void) /*10 раз в секунду*/
0008e0  b570              PUSH     {r4-r6,lr}
;;;1126   {
;;;1127   
;;;1128   if(work_stat==wsCAP)
0008e2  48ff              LDR      r0,|L5.3296|
0008e4  7800              LDRB     r0,[r0,#0]  ; work_stat
0008e6  2803              CMP      r0,#3
0008e8  d143              BNE      |L5.2418|
;;;1129   	{
;;;1130   	cap_time_proc++;
0008ea  49fe              LDR      r1,|L5.3300|
;;;1131   	if(cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME+CAP_PAUSE2_TIME))
0008ec  48fe              LDR      r0,|L5.3304|
0008ee  680a              LDR      r2,[r1,#0]            ;1130  ; cap_time_proc
0008f0  1c52              ADDS     r2,r2,#1              ;1130
0008f2  600a              STR      r2,[r1,#0]  ; cap_time_proc
0008f4  f9b05000          LDRSH    r5,[r0,#0]  ; CAP_ZAR_TIME
0008f8  48fc              LDR      r0,|L5.3308|
0008fa  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
0008fe  182b              ADDS     r3,r5,r0
000900  48fb              LDR      r0,|L5.3312|
000902  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
000906  181c              ADDS     r4,r3,r0
000908  48fa              LDR      r0,|L5.3316|
00090a  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
00090e  1826              ADDS     r6,r4,r0
;;;1132   		{
;;;1133   		cap_time_proc=0;
000910  2000              MOVS     r0,#0
000912  4296              CMP      r6,r2                 ;1131
000914  dc04              BGT      |L5.2336|
;;;1134   		CAP_COUNTER++;
000916  4ef8              LDR      r6,|L5.3320|
000918  6008              STR      r0,[r1,#0]  ; cap_time_proc
00091a  8832              LDRH     r2,[r6,#0]  ; CAP_COUNTER
00091c  1c52              ADDS     r2,r2,#1
00091e  8032              STRH     r2,[r6,#0]
                  |L5.2336|
;;;1135   		}
;;;1136   
;;;1137   	if(cap_time_proc>=CAP_ZAR_TIME)bOFF=1;
000920  6809              LDR      r1,[r1,#0]  ; cap_time_proc
000922  4ef6              LDR      r6,|L5.3324|
000924  2201              MOVS     r2,#1
000926  42a9              CMP      r1,r5
000928  db01              BLT      |L5.2350|
00092a  7032              STRB     r2,[r6,#0]
00092c  e000              B        |L5.2352|
                  |L5.2350|
;;;1138   	else bOFF=0;
00092e  7030              STRB     r0,[r6,#0]
                  |L5.2352|
;;;1139   
;;;1140   	if((cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME))&&(cap_time_proc<(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME)))bRAZR=1;
000930  4df3              LDR      r5,|L5.3328|
000932  428b              CMP      r3,r1
000934  dc03              BGT      |L5.2366|
000936  428c              CMP      r4,r1
000938  dd01              BLE      |L5.2366|
00093a  702a              STRB     r2,[r5,#0]
00093c  e000              B        |L5.2368|
                  |L5.2366|
;;;1141   	else bRAZR=0;
00093e  7028              STRB     r0,[r5,#0]
                  |L5.2368|
;;;1142   
;;;1143   
;;;1144   	CAP_TIME_SEC++;
000940  49f0              LDR      r1,|L5.3332|
000942  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_SEC
000944  1c52              ADDS     r2,r2,#1
000946  b212              SXTH     r2,r2
000948  800a              STRH     r2,[r1,#0]
;;;1145   	if(CAP_TIME_SEC>=600)
00094a  f5b27f16          CMP      r2,#0x258
00094e  db10              BLT      |L5.2418|
;;;1146   		{
;;;1147   		CAP_TIME_SEC=0;
000950  8008              STRH     r0,[r1,#0]
;;;1148   		
;;;1149   		CAP_TIME_MIN++;
000952  49ed              LDR      r1,|L5.3336|
000954  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_MIN
000956  1c52              ADDS     r2,r2,#1
000958  b212              SXTH     r2,r2
00095a  800a              STRH     r2,[r1,#0]
;;;1150   		if(CAP_TIME_MIN>=60)
00095c  2a3c              CMP      r2,#0x3c
00095e  db08              BLT      |L5.2418|
;;;1151   			{
;;;1152   			CAP_TIME_MIN=0;
000960  8008              STRH     r0,[r1,#0]
;;;1153   	
;;;1154   			CAP_TIME_HOUR++;
000962  49ea              LDR      r1,|L5.3340|
000964  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_HOUR
000966  1c52              ADDS     r2,r2,#1
000968  b212              SXTH     r2,r2
00096a  800a              STRH     r2,[r1,#0]
;;;1155   			if(CAP_TIME_HOUR>=24)
00096c  2a18              CMP      r2,#0x18
00096e  db00              BLT      |L5.2418|
;;;1156   				{
;;;1157   				CAP_TIME_HOUR=0;
000970  8008              STRH     r0,[r1,#0]
                  |L5.2418|
;;;1158   				}
;;;1159   			}
;;;1160   		}
;;;1161   	}
;;;1162   
;;;1163   }
000972  bd70              POP      {r4-r6,pc}
;;;1164   
                          ENDP

                  restart_on_GS PROC
;;;1166   //-----------------------------------------------
;;;1167   void restart_on_GS(void)
000974  2101              MOVS     r1,#1
;;;1168   {
;;;1169   lc640_write_long(EE_TIME_PROC_GS_RESTART,1);
000976  20d0              MOVS     r0,#0xd0
000978  f7ffbffe          B.W      lc640_write_long
;;;1170   }
;;;1171   
                          ENDP

                  restart_on_PS PROC
;;;1172   //-----------------------------------------------
;;;1173   void restart_on_PS(void)
00097c  2101              MOVS     r1,#1
;;;1174   {
;;;1175   lc640_write_long(EE_TIME_PROC_PS_RESTART,1);
00097e  20d4              MOVS     r0,#0xd4
000980  f7ffbffe          B.W      lc640_write_long
;;;1176   }
;;;1177   
                          ENDP

                  start_GS PROC
;;;1185   //-----------------------------------------------
;;;1186   void start_GS(void) {
000984  b570              PUSH     {r4-r6,lr}
;;;1187   	work_stat=wsGS;
000986  48d6              LDR      r0,|L5.3296|
000988  2501              MOVS     r5,#1
;;;1188   	time_proc=0;
00098a  2400              MOVS     r4,#0
00098c  7005              STRB     r5,[r0,#0]            ;1187
00098e  48e0              LDR      r0,|L5.3344|
;;;1189   	time_proc_remain=T_PROC_GS;
000990  49e1              LDR      r1,|L5.3352|
000992  6004              STR      r4,[r0,#0]  ; time_proc
000994  48df              LDR      r0,|L5.3348|
000996  6800              LDR      r0,[r0,#0]  ; T_PROC_GS
;;;1190   	//index_set=0;
;;;1191   	restart_on_GS();
000998  6008              STR      r0,[r1,#0]  ; time_proc_remain
00099a  f7fffffe          BL       restart_on_GS
;;;1192   	bFAST_REG=1;
00099e  48df              LDR      r0,|L5.3356|
0009a0  7205              STRB     r5,[r0,#8]
;;;1193   	bU_VALID=0;
0009a2  7244              STRB     r4,[r0,#9]
;;;1194   	bU_VALID_VALID=0;
0009a4  7284              STRB     r4,[r0,#0xa]
;;;1195   	
;;;1196   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0009a6  48de              LDR      r0,|L5.3360|
0009a8  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
0009aa  b140              CBZ      r0,|L5.2494|
0009ac  48dd              LDR      r0,|L5.3364|
0009ae  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
0009b0  b128              CBZ      r0,|L5.2494|
;;;1197   		time_proc_phase=0;
0009b2  48dd              LDR      r0,|L5.3368|
0009b4  8004              STRH     r4,[r0,#0]
;;;1198   		proc_phase=ppFF;
0009b6  48dd              LDR      r0,|L5.3372|
0009b8  7004              STRB     r4,[r0,#0]
;;;1199   		REV_STAT=rsFF;	
0009ba  48dd              LDR      r0,|L5.3376|
0009bc  7005              STRB     r5,[r0,#0]
                  |L5.2494|
;;;1200   	}
;;;1201   
;;;1202   	milliAmperSecunda=0L;
0009be  48dd              LDR      r0,|L5.3380|
0009c0  4621              MOV      r1,r4
;;;1203   	AMPERCHAS=0L;
0009c2  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
0009c4  48dc              LDR      r0,|L5.3384|
;;;1204   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
0009c6  6004              STR      r4,[r0,#0]  ; AMPERCHAS
0009c8  e8bd4070          POP      {r4-r6,lr}
0009cc  f640401c          MOV      r0,#0xc1c
0009d0  f7ffbffe          B.W      lc640_write_long
;;;1205   }
;;;1206   
                          ENDP

                  start_PS PROC
;;;1208   //-----------------------------------------------
;;;1209   void start_PS(void) {
0009d4  49c2              LDR      r1,|L5.3296|
0009d6  b510              PUSH     {r4,lr}
;;;1210   	work_stat=wsPS;
0009d8  2002              MOVS     r0,#2
0009da  7008              STRB     r0,[r1,#0]
;;;1211   	time_proc=0;
0009dc  48cc              LDR      r0,|L5.3344|
0009de  2400              MOVS     r4,#0
;;;1212   	time_proc_remain=T_PROC_PS;
0009e0  49cd              LDR      r1,|L5.3352|
0009e2  6004              STR      r4,[r0,#0]  ; time_proc
0009e4  48d5              LDR      r0,|L5.3388|
0009e6  6800              LDR      r0,[r0,#0]  ; T_PROC_PS
;;;1213   	//index_set=0;
;;;1214   	restart_on_PS();
0009e8  6008              STR      r0,[r1,#0]  ; time_proc_remain
0009ea  f7fffffe          BL       restart_on_PS
;;;1215   	bFAST_REG=1;
0009ee  48cb              LDR      r0,|L5.3356|
0009f0  2101              MOVS     r1,#1
0009f2  7201              STRB     r1,[r0,#8]
;;;1216   	bU_VALID=0;
0009f4  7244              STRB     r4,[r0,#9]
;;;1217   	bU_VALID_VALID=0;
0009f6  7284              STRB     r4,[r0,#0xa]
;;;1218   	
;;;1219   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0009f8  48c9              LDR      r0,|L5.3360|
0009fa  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
0009fc  b140              CBZ      r0,|L5.2576|
0009fe  48c9              LDR      r0,|L5.3364|
000a00  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
000a02  b128              CBZ      r0,|L5.2576|
;;;1220   		time_proc_phase=0;
000a04  48c8              LDR      r0,|L5.3368|
000a06  8004              STRH     r4,[r0,#0]
;;;1221   		proc_phase=ppFF;
000a08  48c8              LDR      r0,|L5.3372|
000a0a  7004              STRB     r4,[r0,#0]
;;;1222   		REV_STAT=rsFF;	
000a0c  48c8              LDR      r0,|L5.3376|
000a0e  7001              STRB     r1,[r0,#0]
                  |L5.2576|
;;;1223   	}
;;;1224   	milliAmperSecunda=0L;
000a10  48c8              LDR      r0,|L5.3380|
000a12  4621              MOV      r1,r4
;;;1225   	AMPERCHAS=0L;
000a14  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
000a16  48c8              LDR      r0,|L5.3384|
;;;1226   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000a18  6004              STR      r4,[r0,#0]  ; AMPERCHAS
000a1a  e8bd4010          POP      {r4,lr}
000a1e  f640401c          MOV      r0,#0xc1c
000a22  f7ffbffe          B.W      lc640_write_long
;;;1227   }
;;;1228   
                          ENDP

                  start_CAP PROC
;;;1229   //-----------------------------------------------
;;;1230   void start_CAP(void) {
000a26  49ae              LDR      r1,|L5.3296|
;;;1231   	work_stat=wsCAP;
000a28  2003              MOVS     r0,#3
000a2a  7008              STRB     r0,[r1,#0]
;;;1232   }
000a2c  4770              BX       lr
;;;1233   
                          ENDP

                  pause_CAP PROC
;;;1234   //-----------------------------------------------
;;;1235   void pause_CAP(void) {
000a2e  49ac              LDR      r1,|L5.3296|
;;;1236   	work_stat=wsOFF;
000a30  2000              MOVS     r0,#0
000a32  7008              STRB     r0,[r1,#0]
;;;1237   }
000a34  4770              BX       lr
;;;1238   
                          ENDP

                  stop_CAP PROC
;;;1239   //-----------------------------------------------
;;;1240   void stop_CAP(void) {
000a36  49aa              LDR      r1,|L5.3296|
;;;1241   	work_stat=wsOFF;
000a38  2000              MOVS     r0,#0
000a3a  7008              STRB     r0,[r1,#0]
;;;1242   
;;;1243   }
000a3c  4770              BX       lr
;;;1244   
                          ENDP

                  ramModbusCnt_hndl PROC
;;;1245   //-----------------------------------------------
;;;1246   void ramModbusCnt_hndl(void)  
000a3e  48c0              LDR      r0,|L5.3392|
;;;1247   {
;;;1248   if(ramModbusCnt) ramModbusCnt--;
000a40  f9b01000          LDRSH    r1,[r0,#0]  ; ramModbusCnt
000a44  b111              CBZ      r1,|L5.2636|
000a46  1e49              SUBS     r1,r1,#1
000a48  8001              STRH     r1,[r0,#0]
;;;1249   else 
;;;1250   	{
;;;1251   	I_ug_ram=0;
;;;1252   	U_up_ram=0;
;;;1253   	}	
;;;1254   }
000a4a  4770              BX       lr
                  |L5.2636|
000a4c  49bd              LDR      r1,|L5.3396|
000a4e  2000              MOVS     r0,#0                 ;1251
000a50  8008              STRH     r0,[r1,#0]            ;1251
000a52  49bd              LDR      r1,|L5.3400|
000a54  8008              STRH     r0,[r1,#0]            ;1252
000a56  4770              BX       lr
;;;1255   
                          ENDP

                  reset_CAP PROC
;;;1256   //-----------------------------------------------
;;;1257   void reset_CAP(void) {
000a58  49a1              LDR      r1,|L5.3296|
;;;1258   	work_stat=wsOFF;
000a5a  2000              MOVS     r0,#0
000a5c  7008              STRB     r0,[r1,#0]
;;;1259   	cap_time_proc=0;
000a5e  49a1              LDR      r1,|L5.3300|
;;;1260   	CAP_COUNTER=0;
000a60  6008              STR      r0,[r1,#0]  ; cap_time_proc
000a62  49a5              LDR      r1,|L5.3320|
000a64  8008              STRH     r0,[r1,#0]
;;;1261   	CAP_TIME_SEC=0;
000a66  49a7              LDR      r1,|L5.3332|
000a68  8008              STRH     r0,[r1,#0]
;;;1262   	CAP_TIME_MIN=0;
000a6a  49a7              LDR      r1,|L5.3336|
000a6c  8008              STRH     r0,[r1,#0]
;;;1263   	CAP_TIME_HOUR=0;
000a6e  49a7              LDR      r1,|L5.3340|
000a70  8008              STRH     r0,[r1,#0]
;;;1264   }
000a72  4770              BX       lr
;;;1265   
                          ENDP

                  stop_proc PROC
;;;1266   //-----------------------------------------------
;;;1267   void stop_proc(void)
000a74  499a              LDR      r1,|L5.3296|
;;;1268   {
;;;1269   work_stat=wsOFF;
000a76  2000              MOVS     r0,#0
000a78  7008              STRB     r0,[r1,#0]
;;;1270   restart_off();
000a7a  e7fe              B        restart_off
;;;1271   }
;;;1272   
                          ENDP

                  find_U_curve PROC
;;;1273   //-----------------------------------------------
;;;1274   short find_U_curve(signed short in)
000a7c  e92d41f0          PUSH     {r4-r8,lr}
;;;1275   {
;;;1276   short ii,i=0,out=0;
000a80  2400              MOVS     r4,#0
000a82  4606              MOV      r6,r0                 ;1275
;;;1277   
;;;1278   ii=0;
;;;1279   
;;;1280   if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) >= in)
000a84  f44f75fa          MOV      r5,#0x1f4
000a88  46a0              MOV      r8,r4                 ;1276
000a8a  4627              MOV      r7,r4                 ;1278
000a8c  4628              MOV      r0,r5
000a8e  f7fffffe          BL       lc640_read_int
000a92  42b0              CMP      r0,r6
000a94  da29              BGE      |L5.2794|
;;;1281   	{
;;;1282   	out=0;
;;;1283   	}
;;;1284   else 
;;;1285   	{
;;;1286   	for (ii=0;ii<=200;ii+=10)
;;;1287   		{
;;;1288   		if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000a96  bf00              NOP      
                  |L5.2712|
000a98  eb050047          ADD      r0,r5,r7,LSL #1
000a9c  f7fffffe          BL       lc640_read_int
000aa0  42b0              CMP      r0,r6
000aa2  dc00              BGT      |L5.2726|
;;;1289   			{
;;;1290   			i=ii;
000aa4  463c              MOV      r4,r7
                  |L5.2726|
000aa6  370a              ADDS     r7,r7,#0xa            ;1286
000aa8  b23f              SXTH     r7,r7                 ;1286
000aaa  2fc8              CMP      r7,#0xc8              ;1286
000aac  ddf4              BLE      |L5.2712|
;;;1291   			}
;;;1292   		else continue;
;;;1293   		}
;;;1294   	if(i<200)
000aae  2cc8              CMP      r4,#0xc8
000ab0  da0e              BGE      |L5.2768|
;;;1295   		{
;;;1296   		for (ii=i;ii<i+10;ii++)
000ab2  f104070a          ADD      r7,r4,#0xa
000ab6  e008              B        |L5.2762|
                  |L5.2744|
;;;1297   			{
;;;1298   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000ab8  eb050044          ADD      r0,r5,r4,LSL #1
000abc  f7fffffe          BL       lc640_read_int
000ac0  42b0              CMP      r0,r6
000ac2  dc00              BGT      |L5.2758|
;;;1299   				{
;;;1300   				out=ii;
000ac4  46a0              MOV      r8,r4
                  |L5.2758|
000ac6  1c64              ADDS     r4,r4,#1              ;1296
000ac8  b224              SXTH     r4,r4                 ;1296
                  |L5.2762|
000aca  42bc              CMP      r4,r7                 ;1296
000acc  dbf4              BLT      |L5.2744|
000ace  e00c              B        |L5.2794|
                  |L5.2768|
;;;1301   				}
;;;1302   			else continue;
;;;1303   			}
;;;1304   		}
;;;1305   	else 
;;;1306   		{
;;;1307   		for (ii=200;ii<=202;ii++)
000ad0  f05f04c8          MOVS.W   r4,#0xc8
                  |L5.2772|
;;;1308   			{
;;;1309   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000ad4  eb050044          ADD      r0,r5,r4,LSL #1
000ad8  f7fffffe          BL       lc640_read_int
000adc  42b0              CMP      r0,r6
000ade  dc00              BGT      |L5.2786|
;;;1310   				{
;;;1311   				out=ii;
000ae0  46a0              MOV      r8,r4
                  |L5.2786|
000ae2  1c64              ADDS     r4,r4,#1              ;1307
000ae4  b224              SXTH     r4,r4                 ;1307
000ae6  2cca              CMP      r4,#0xca              ;1307
000ae8  ddf4              BLE      |L5.2772|
                  |L5.2794|
;;;1312   				}
;;;1313   			else continue;
;;;1314   			}
;;;1315   	
;;;1316   	
;;;1317   		}
;;;1318   	}
;;;1319   
;;;1320   return out;
000aea  4640              MOV      r0,r8
;;;1321   }
000aec  e44d              B        |L5.906|
;;;1322   
                          ENDP

                  find_I_curve PROC
;;;1323   //-----------------------------------------------
;;;1324   short find_I_curve(signed short in)
000aee  e92d41f0          PUSH     {r4-r8,lr}
;;;1325   {
;;;1326   short ii,i=0,out=0;
000af2  2400              MOVS     r4,#0
000af4  4606              MOV      r6,r0                 ;1325
;;;1327   
;;;1328   ii=0;
;;;1329   
;;;1330   if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) >= in)
000af6  f44f757a          MOV      r5,#0x3e8
000afa  46a0              MOV      r8,r4                 ;1326
000afc  4627              MOV      r7,r4                 ;1328
000afe  4628              MOV      r0,r5
000b00  f7fffffe          BL       lc640_read_int
000b04  42b0              CMP      r0,r6
000b06  da28              BGE      |L5.2906|
                  |L5.2824|
;;;1331   	{
;;;1332   	out=0;
;;;1333   	}
;;;1334   else 
;;;1335   	{
;;;1336   	for (ii=0;ii<=200;ii+=10)
;;;1337   		{
;;;1338   		if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000b08  eb050047          ADD      r0,r5,r7,LSL #1
000b0c  f7fffffe          BL       lc640_read_int
000b10  42b0              CMP      r0,r6
000b12  dc00              BGT      |L5.2838|
;;;1339   			{
;;;1340   			i=ii;
000b14  463c              MOV      r4,r7
                  |L5.2838|
000b16  370a              ADDS     r7,r7,#0xa            ;1336
000b18  b23f              SXTH     r7,r7                 ;1336
000b1a  2fc8              CMP      r7,#0xc8              ;1336
000b1c  ddf4              BLE      |L5.2824|
;;;1341   			}
;;;1342   		else continue;
;;;1343   		}
;;;1344   	
;;;1345   	if(i<200)
000b1e  2cc8              CMP      r4,#0xc8
000b20  da0e              BGE      |L5.2880|
;;;1346   		{
;;;1347   		for (ii=i;ii<i+10;ii++)
000b22  f104070a          ADD      r7,r4,#0xa
000b26  e008              B        |L5.2874|
                  |L5.2856|
;;;1348   			{
;;;1349   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000b28  eb050044          ADD      r0,r5,r4,LSL #1
000b2c  f7fffffe          BL       lc640_read_int
000b30  42b0              CMP      r0,r6
000b32  dc00              BGT      |L5.2870|
;;;1350   				{
;;;1351   				out=ii;
000b34  46a0              MOV      r8,r4
                  |L5.2870|
000b36  1c64              ADDS     r4,r4,#1              ;1347
000b38  b224              SXTH     r4,r4                 ;1347
                  |L5.2874|
000b3a  42bc              CMP      r4,r7                 ;1347
000b3c  dbf4              BLT      |L5.2856|
000b3e  e00c              B        |L5.2906|
                  |L5.2880|
;;;1352   				}
;;;1353   			else continue;
;;;1354   			}
;;;1355   		}
;;;1356   	else 
;;;1357   		{
;;;1358   		for (ii=200;ii<=202;ii++)
000b40  f05f04c8          MOVS.W   r4,#0xc8
                  |L5.2884|
;;;1359   			{
;;;1360   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000b44  eb050044          ADD      r0,r5,r4,LSL #1
000b48  f7fffffe          BL       lc640_read_int
000b4c  42b0              CMP      r0,r6
000b4e  dc00              BGT      |L5.2898|
;;;1361   				{
;;;1362   				out=ii;
000b50  46a0              MOV      r8,r4
                  |L5.2898|
000b52  1c64              ADDS     r4,r4,#1              ;1358
000b54  b224              SXTH     r4,r4                 ;1358
000b56  2cca              CMP      r4,#0xca              ;1358
000b58  ddf4              BLE      |L5.2884|
                  |L5.2906|
;;;1363   				}
;;;1364   			else continue;
;;;1365   			}
;;;1366   		}
;;;1367   	}
;;;1368   return out;
000b5a  4640              MOV      r0,r8
;;;1369   }
000b5c  e415              B        |L5.906|
;;;1370   
                          ENDP

                  viz_hndl PROC
;;;1372   //-----------------------------------------------
;;;1373   void viz_hndl(void)
000b5e  e92d5ff0          PUSH     {r4-r12,lr}
;;;1374   {
;;;1375   if(ind==iK_viz_u)
000b62  f8df91e8          LDR      r9,|L5.3404|
;;;1376   	{
;;;1377   	if(viz_stat==vsON)
;;;1378   		{
;;;1379   		viz_stat_cnt++;
;;;1380   		if(viz_stat_cnt>=10221)
;;;1381   			{
;;;1382   			viz_stat=vsOFF;
;;;1383   			lc640_write_int(EE_U_CURVE_IS_ON,0xabcd);
;;;1384   			//ind=iK_viz_sel;
;;;1385   			tree_down(0,0);
;;;1386   			}
;;;1387   		tst_pwm_i=1022;
;;;1388   		tst_pwm_u=(viz_stat_cnt/50)*5;
000b66  4f7a              LDR      r7,|L5.3408|
000b68  4e7a              LDR      r6,|L5.3412|
000b6a  f8990000          LDRB     r0,[r9,#0]            ;1375  ; a_ind
000b6e  4c7a              LDR      r4,|L5.3416|
000b70  2532              MOVS     r5,#0x32
000b72  f24278ed          MOV      r8,#0x27ed            ;1380
000b76  f04f0a00          MOV      r10,#0                ;1382
000b7a  f2403bfe          MOV      r11,#0x3fe            ;1387
000b7e  2846              CMP      r0,#0x46              ;1375
000b80  d12a              BNE      |L5.3032|
000b82  7830              LDRB     r0,[r6,#0]            ;1377  ; viz_stat
000b84  2801              CMP      r0,#1                 ;1377
000b86  d158              BNE      |L5.3130|
000b88  8820              LDRH     r0,[r4,#0]            ;1379  ; viz_stat_cnt
000b8a  1c40              ADDS     r0,r0,#1              ;1379
000b8c  b200              SXTH     r0,r0                 ;1379
000b8e  8020              STRH     r0,[r4,#0]            ;1379
000b90  4540              CMP      r0,r8                 ;1380
000b92  db09              BLT      |L5.2984|
000b94  f886a000          STRB     r10,[r6,#0]           ;1382
000b98  4970              LDR      r1,|L5.3420|
000b9a  20ac              MOVS     r0,#0xac              ;1383
000b9c  f7fffffe          BL       lc640_write_int
000ba0  2100              MOVS     r1,#0                 ;1385
000ba2  4608              MOV      r0,r1                 ;1385
000ba4  f7fffffe          BL       tree_down
                  |L5.2984|
000ba8  496d              LDR      r1,|L5.3424|
000baa  f8a1b000          STRH     r11,[r1,#0]           ;1387
000bae  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000bb2  fb91f0f5          SDIV     r0,r1,r5
;;;1389   		if(viz_stat_cnt%50==49)
000bb6  fb051110          MLS      r1,r5,r0,r1
000bba  eb000280          ADD      r2,r0,r0,LSL #2       ;1388
000bbe  803a              STRH     r2,[r7,#0]            ;1388
000bc0  2931              CMP      r1,#0x31
000bc2  d109              BNE      |L5.3032|
;;;1390   			{
;;;1391   			lc640_write_int(SEKTOR_KURVE_U+((viz_stat_cnt/50)*2),load_U);
000bc4  f44f71fa          MOV      r1,#0x1f4
000bc8  eb010040          ADD      r0,r1,r0,LSL #1
000bcc  4965              LDR      r1,|L5.3428|
000bce  b200              SXTH     r0,r0
000bd0  f9b11000          LDRSH    r1,[r1,#0]  ; load_U
000bd4  f7fffffe          BL       lc640_write_int
                  |L5.3032|
;;;1392   			}
;;;1393   		}
;;;1394   	}
;;;1395   
;;;1396   if(ind==iK_viz_i)
000bd8  f8990000          LDRB     r0,[r9,#0]  ; a_ind
000bdc  2845              CMP      r0,#0x45
000bde  d12c              BNE      |L5.3130|
;;;1397   	{
;;;1398   	if(viz_stat==vsON)
000be0  7830              LDRB     r0,[r6,#0]  ; viz_stat
000be2  2801              CMP      r0,#1
000be4  d129              BNE      |L5.3130|
;;;1399   		{
;;;1400   		viz_stat_cnt++;
000be6  8820              LDRH     r0,[r4,#0]  ; viz_stat_cnt
000be8  1c40              ADDS     r0,r0,#1
000bea  b200              SXTH     r0,r0
000bec  8020              STRH     r0,[r4,#0]
;;;1401   		if(viz_stat_cnt>=10221)
000bee  4540              CMP      r0,r8
000bf0  db09              BLT      |L5.3078|
;;;1402   			{
;;;1403   			viz_stat=vsOFF;
000bf2  f886a000          STRB     r10,[r6,#0]
;;;1404   			lc640_write_int(EE_I_CURVE_IS_ON,0xabcd);
000bf6  4959              LDR      r1,|L5.3420|
000bf8  20ae              MOVS     r0,#0xae
000bfa  f7fffffe          BL       lc640_write_int
;;;1405   			//ind=iK_viz_sel;
;;;1406   			tree_down(0,0);
000bfe  2100              MOVS     r1,#0
000c00  4608              MOV      r0,r1
000c02  f7fffffe          BL       tree_down
                  |L5.3078|
;;;1407   			}
;;;1408   		tst_pwm_u=1022;
000c06  f8a7b000          STRH     r11,[r7,#0]
;;;1409   		tst_pwm_i=(viz_stat_cnt/50)*5;
000c0a  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000c0e  4b54              LDR      r3,|L5.3424|
000c10  fb91f0f5          SDIV     r0,r1,r5
;;;1410   		if(viz_stat_cnt%50==49)
000c14  fb051110          MLS      r1,r5,r0,r1
000c18  eb000280          ADD      r2,r0,r0,LSL #2       ;1409
000c1c  801a              STRH     r2,[r3,#0]            ;1409
000c1e  2931              CMP      r1,#0x31
000c20  d10b              BNE      |L5.3130|
;;;1411   			{
;;;1412   			lc640_write_int(SEKTOR_KURVE_I+((viz_stat_cnt/50)*2),load_I);
000c22  f44f717a          MOV      r1,#0x3e8
000c26  eb010040          ADD      r0,r1,r0,LSL #1
000c2a  494f              LDR      r1,|L5.3432|
000c2c  b200              SXTH     r0,r0
000c2e  f9b11000          LDRSH    r1,[r1,#0]  ; load_I
000c32  e8bd5ff0          POP      {r4-r12,lr}
000c36  f7ffbffe          B.W      lc640_write_int
                  |L5.3130|
;;;1413   			}
;;;1414   		}
;;;1415   	}
;;;1416   }
000c3a  e5fc              B        |L5.2102|
;;;1417   
                          ENDP

                  bps_hndl PROC
;;;1420   //-----------------------------------------------
;;;1421   void bps_hndl(void) /*ГЦ, 10 раз в секунду*/
000c3c  e92d5ffc          PUSH     {r2-r12,lr}
;;;1422   {
;;;1423   char /*ptr__,*/i;
;;;1424   
;;;1425   if((REV_IS_ON)&&(AVT_REV_IS_ON)) {
000c40  4837              LDR      r0,|L5.3360|
;;;1426   	if(work_stat==wsGS) {
000c42  f8dfa09c          LDR      r10,|L5.3296|
000c46  8800              LDRH     r0,[r0,#0]            ;1425  ; REV_IS_ON
000c48  b328              CBZ      r0,|L5.3222|
000c4a  4836              LDR      r0,|L5.3364|
000c4c  8800              LDRH     r0,[r0,#0]            ;1425  ; AVT_REV_IS_ON
000c4e  b310              CBZ      r0,|L5.3222|
;;;1427   		if(REV_STAT==rsFF) 	I_ug_temp=AVT_REV_I_NOM_FF;
000c50  4846              LDR      r0,|L5.3436|
000c52  f89a3000          LDRB     r3,[r10,#0]           ;1426  ; work_stat
000c56  f9b01000          LDRSH    r1,[r0,#0]
000c5a  4835              LDR      r0,|L5.3376|
000c5c  2b01              CMP      r3,#1                 ;1426
000c5e  7800              LDRB     r0,[r0,#0]
000c60  d007              BEQ      |L5.3186|
;;;1428   		else if (REV_STAT==rsREW) I_ug_temp=AVT_REV_I_NOM_REW;
;;;1429   	} else if (work_stat==wsPS) {
;;;1430   		if(REV_STAT==rsFF) 	U_up_temp=AVT_REV_U_NOM_FF;
000c62  4a43              LDR      r2,|L5.3440|
000c64  2b02              CMP      r3,#2                 ;1429
000c66  f9b22000          LDRSH    r2,[r2,#0]
000c6a  d00b              BEQ      |L5.3204|
;;;1431   		else if (REV_STAT==rsREW) U_up_temp=AVT_REV_U_NOM_REW;
;;;1432   	} else {
;;;1433   		U_up_temp=AVT_REV_U_NOM_FF;
000c6c  4841              LDR      r0,|L5.3444|
000c6e  8002              STRH     r2,[r0,#0]
;;;1434   		I_ug_temp=AVT_REV_I_NOM_FF;
000c70  e003              B        |L5.3194|
                  |L5.3186|
000c72  2801              CMP      r0,#1                 ;1427
000c74  d001              BEQ      |L5.3194|
000c76  b110              CBZ      r0,|L5.3198|
000c78  e023              B        |L5.3266|
                  |L5.3194|
000c7a  483f              LDR      r0,|L5.3448|
000c7c  e020              B        |L5.3264|
                  |L5.3198|
000c7e  483f              LDR      r0,|L5.3452|
000c80  8801              LDRH     r1,[r0,#0]            ;1428  ; AVT_REV_I_NOM_REW
000c82  e7fa              B        |L5.3194|
                  |L5.3204|
000c84  2801              CMP      r0,#1                 ;1430
000c86  d001              BEQ      |L5.3212|
000c88  b118              CBZ      r0,|L5.3218|
000c8a  e01a              B        |L5.3266|
                  |L5.3212|
000c8c  4839              LDR      r0,|L5.3444|
000c8e  8002              STRH     r2,[r0,#0]            ;1430
000c90  e017              B        |L5.3266|
                  |L5.3218|
000c92  483b              LDR      r0,|L5.3456|
000c94  e012              B        |L5.3260|
                  |L5.3222|
;;;1435   	}
;;;1436   } else {
;;;1437   
;;;1438   if(fiks_stat_I==2)I_ug_temp=I_ug3;
000c96  483b              LDR      r0,|L5.3460|
000c98  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_I
000c9c  2802              CMP      r0,#2
000c9e  d07d              BEQ      |L5.3484|
;;;1439   else if(fiks_stat_I==1)I_ug_temp=I_ug2;
000ca0  2801              CMP      r0,#1
000ca2  d07c              BEQ      |L5.3486|
;;;1440   else I_ug_temp=I_ug;
000ca4  4838              LDR      r0,|L5.3464|
                  |L5.3238|
000ca6  8801              LDRH     r1,[r0,#0]            ;1439  ; I_ug2
000ca8  4833              LDR      r0,|L5.3448|
000caa  8001              STRH     r1,[r0,#0]            ;1439
;;;1441   
;;;1442   if(fiks_stat_U==2)U_up_temp=U_up3;
000cac  4837              LDR      r0,|L5.3468|
000cae  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_U
000cb2  2802              CMP      r0,#2
000cb4  d074              BEQ      |L5.3488|
;;;1443   	else if(fiks_stat_U==1)U_up_temp=U_up2;
000cb6  2801              CMP      r0,#1
000cb8  d073              BEQ      |L5.3490|
;;;1444   	else U_up_temp=U_up;
000cba  4835              LDR      r0,|L5.3472|
                  |L5.3260|
000cbc  8801              LDRH     r1,[r0,#0]            ;1443  ; U_up2
000cbe  482d              LDR      r0,|L5.3444|
                  |L5.3264|
000cc0  8001              STRH     r1,[r0,#0]            ;1443
                  |L5.3266|
;;;1445   
;;;1446   }
;;;1447   	
;;;1448   gran(&I_ug_temp,0/*I_MIN_IPS*/,I_MAX_IPS);
000cc2  4834              LDR      r0,|L5.3476|
000cc4  2100              MOVS     r1,#0
000cc6  f9b02000          LDRSH    r2,[r0,#0]  ; I_MAX_IPS
000cca  482b              LDR      r0,|L5.3448|
000ccc  f7fffffe          BL       gran
;;;1449   gran(&U_up_temp,0/*U_MIN*/,U_MAX);
000cd0  4831              LDR      r0,|L5.3480|
000cd2  2100              MOVS     r1,#0
000cd4  f9b02000          LDRSH    r2,[r0,#0]  ; U_MAX
000cd8  4826              LDR      r0,|L5.3444|
000cda  f7fffffe          BL       gran
;;;1450   
;;;1451   if(sh_cnt0<10) {
000cde  e061              B        |L5.3492|
                  |L5.3296|
                          DCD      work_stat
                  |L5.3300|
                          DCD      cap_time_proc
                  |L5.3304|
                          DCD      CAP_ZAR_TIME
                  |L5.3308|
                          DCD      CAP_PAUSE1_TIME
                  |L5.3312|
                          DCD      CAP_RAZR_TIME
                  |L5.3316|
                          DCD      CAP_PAUSE2_TIME
                  |L5.3320|
                          DCD      CAP_COUNTER
                  |L5.3324|
                          DCD      bOFF
                  |L5.3328|
                          DCD      bRAZR
                  |L5.3332|
                          DCD      CAP_TIME_SEC
                  |L5.3336|
                          DCD      CAP_TIME_MIN
                  |L5.3340|
                          DCD      CAP_TIME_HOUR
                  |L5.3344|
                          DCD      time_proc
                  |L5.3348|
                          DCD      T_PROC_GS
                  |L5.3352|
                          DCD      time_proc_remain
                  |L5.3356|
                          DCD      ||area_number.25||
                  |L5.3360|
                          DCD      REV_IS_ON
                  |L5.3364|
                          DCD      AVT_REV_IS_ON
                  |L5.3368|
                          DCD      time_proc_phase
                  |L5.3372|
                          DCD      proc_phase
                  |L5.3376|
                          DCD      REV_STAT
                  |L5.3380|
                          DCD      milliAmperSecunda
                  |L5.3384|
                          DCD      AMPERCHAS
                  |L5.3388|
                          DCD      T_PROC_PS
                  |L5.3392|
                          DCD      ramModbusCnt
                  |L5.3396|
                          DCD      I_ug_ram
                  |L5.3400|
                          DCD      U_up_ram
                  |L5.3404|
                          DCD      a_ind
                  |L5.3408|
                          DCD      tst_pwm_u
                  |L5.3412|
                          DCD      viz_stat
                  |L5.3416|
                          DCD      viz_stat_cnt
                  |L5.3420|
                          DCD      0xffffabcd
                  |L5.3424|
                          DCD      tst_pwm_i
                  |L5.3428|
                          DCD      load_U
                  |L5.3432|
                          DCD      load_I
                  |L5.3436|
                          DCD      AVT_REV_I_NOM_FF
                  |L5.3440|
                          DCD      AVT_REV_U_NOM_FF
                  |L5.3444|
                          DCD      U_up_temp
                  |L5.3448|
                          DCD      I_ug_temp
                  |L5.3452|
                          DCD      AVT_REV_I_NOM_REW
                  |L5.3456|
                          DCD      AVT_REV_U_NOM_REW
                  |L5.3460|
                          DCD      fiks_stat_I
                  |L5.3464|
                          DCD      I_ug
                  |L5.3468|
                          DCD      fiks_stat_U
                  |L5.3472|
                          DCD      U_up
                  |L5.3476|
                          DCD      I_MAX_IPS
                  |L5.3480|
                          DCD      U_MAX
                  |L5.3484|
000d9c  e04c              B        |L5.3640|
                  |L5.3486|
000d9e  e04d              B        |L5.3644|
                  |L5.3488|
000da0  e04e              B        |L5.3648|
                  |L5.3490|
000da2  e04f              B        |L5.3652|
                  |L5.3492|
000da4  4efa              LDR      r6,|L5.4496|
000da6  2500              MOVS     r5,#0                 ;1425
000da8  f04f0901          MOV      r9,#1                 ;1426
000dac  7970              LDRB     r0,[r6,#5]  ; sh_cnt0
000dae  280a              CMP      r0,#0xa
000db0  d212              BCS      |L5.3544|
;;;1452   	sh_cnt0++;
000db2  1c40              ADDS     r0,r0,#1
000db4  b2c0              UXTB     r0,r0
000db6  7170              STRB     r0,[r6,#5]
;;;1453   	if(sh_cnt0>=10) {
000db8  280a              CMP      r0,#0xa
000dba  d30d              BCC      |L5.3544|
;;;1454   		sh_cnt0=0;
000dbc  7175              STRB     r5,[r6,#5]
;;;1455   		b1Hz_sh=1;
000dbe  f8869006          STRB     r9,[r6,#6]
;;;1456   		if(sh_cnt1<5) {
000dc2  79f1              LDRB     r1,[r6,#7]  ; sh_cnt1
000dc4  4648              MOV      r0,r9                 ;1455
000dc6  2905              CMP      r1,#5
000dc8  d206              BCS      |L5.3544|
;;;1457   			sh_cnt1++;
000dca  1c49              ADDS     r1,r1,#1
000dcc  b2c9              UXTB     r1,r1
000dce  71f1              STRB     r1,[r6,#7]
;;;1458   			if(sh_cnt1>=5) {
000dd0  2905              CMP      r1,#5
000dd2  d301              BCC      |L5.3544|
;;;1459   			 	sh_cnt1=0;
000dd4  71f5              STRB     r5,[r6,#7]
;;;1460   				bPRECESSION_REG=1;
000dd6  72f0              STRB     r0,[r6,#0xb]
                  |L5.3544|
;;;1461   			}
;;;1462   		}
;;;1463   	}
;;;1464   }
;;;1465   
;;;1466   if(ind==iK_load)
000dd8  48ee              LDR      r0,|L5.4500|
;;;1467   	{
;;;1468   	if(sub_ind==0)
;;;1469   		{
;;;1470   		cntrl_stat_U=1022;
;;;1471   		cntrl_stat_I=1022;
;;;1472   		bps_stat=stON;
000dda  4bef              LDR      r3,|L5.4504|
;;;1473   
;;;1474   		for(i=0;i<NUMIST;i++)
;;;1475   			{
;;;1476   			bps[i]._vol_u=1022;
;;;1477   			bps[i]._vol_i=1022;
;;;1478   			bps[i]._flags_tu=0;
;;;1479   			}
;;;1480   		}
;;;1481   	else if(sub_ind==1)
;;;1482   		{
;;;1483   		if(phase==0)
000ddc  49ef              LDR      r1,|L5.4508|
000dde  f890c000          LDRB     r12,[r0,#0]           ;1466  ; a_ind
000de2  4cef              LDR      r4,|L5.4512|
000de4  4fef              LDR      r7,|L5.4516|
000de6  f24038fe          MOV      r8,#0x3fe             ;1470
000dea  f1bc0f31          CMP      r12,#0x31             ;1466
000dee  d02b              BEQ      |L5.3656|
;;;1484   			{
;;;1485     			cntrl_stat_U=0;
;;;1486   			cntrl_stat_I=0;
;;;1487   			bps_stat=stOFF;
;;;1488   
;;;1489   			for(i=0;i<NUMIST;i++)
;;;1490   				{
;;;1491   				bps[i]._vol_u=0;
;;;1492   				bps[i]._vol_i=0;
;;;1493   				bps[i]._flags_tu=1;
;;;1494   				}
;;;1495   			}
;;;1496   		else if(phase==1)
;;;1497   			{
;;;1498     			cntrl_stat_U=1022;
;;;1499   			cntrl_stat_I=1022;
;;;1500   			bps_stat=stON;
;;;1501   
;;;1502   			for(i=0;i<NUMIST;i++)
;;;1503   				{
;;;1504   				bps[i]._vol_u=1022;
;;;1505   				bps[i]._vol_i=1022;
;;;1506   				bps[i]._flags_tu=0;
;;;1507   				}
;;;1508   			}
;;;1509   		}
;;;1510   	else 
;;;1511   		{
;;;1512   		bps_stat=stOFF;
;;;1513   
;;;1514   		bps[0]._vol_u=0;
;;;1515   		bps[0]._vol_i=0;
;;;1516   		bps[0]._flags_tu=1;
;;;1517   		}
;;;1518   	}
;;;1519   else if((ind==iK_bps)||(ind==iK_bps_v2))
000df0  f1bc0f2b          CMP      r12,#0x2b
000df4  d074              BEQ      |L5.3808|
000df6  f1bc0f2c          CMP      r12,#0x2c
000dfa  d071              BEQ      |L5.3808|
;;;1520   	{
;;;1521   	if((sub_ind==0)||(sub_ind==3))
;;;1522   		{
;;;1523   		cntrl_stat_U=1022;
;;;1524   		cntrl_stat_I=1022;
;;;1525   		bps_stat=stON;
;;;1526   
;;;1527   		bps[0]._vol_u=0;
;;;1528   		bps[0]._vol_i=0;
;;;1529   		bps[0]._flags_tu=1;
;;;1530   
;;;1531   		bps[1]._vol_u=0;
;;;1532   		bps[1]._vol_i=0;
;;;1533   		bps[1]._flags_tu=1;
;;;1534   
;;;1535   		bps[1]._vol_u=0;
;;;1536   		bps[1]._vol_i=0;
;;;1537   		bps[1]._flags_tu=1;
;;;1538   
;;;1539   		bps[2]._vol_u=0;
;;;1540   		bps[2]._vol_i=0;
;;;1541   		bps[2]._flags_tu=1;
;;;1542   
;;;1543   		bps[3]._vol_u=0;
;;;1544   		bps[3]._vol_i=0;
;;;1545   		bps[3]._flags_tu=1;
;;;1546   
;;;1547   		bps[4]._vol_u=0;
;;;1548   		bps[4]._vol_i=0;
;;;1549   		bps[4]._flags_tu=1;
;;;1550   
;;;1551   		bps[5]._vol_u=0;
;;;1552   		bps[5]._vol_i=0;
;;;1553   		bps[5]._flags_tu=1;
;;;1554   
;;;1555   		bps[6]._vol_u=0;
;;;1556   		bps[6]._vol_i=0;
;;;1557   		bps[6]._flags_tu=1;
;;;1558   
;;;1559   		bps[7]._vol_u=0;
;;;1560   		bps[7]._vol_i=0;
;;;1561   		bps[7]._flags_tu=1;
;;;1562   
;;;1563   		bps[8]._vol_u=0;
;;;1564   		bps[8]._vol_i=0;
;;;1565   		bps[8]._flags_tu=1;
;;;1566   		
;;;1567   		bps[9]._vol_u=0;
;;;1568   		bps[9]._vol_i=0;
;;;1569   		bps[9]._flags_tu=1;
;;;1570   
;;;1571   		bps[10]._vol_u=0;
;;;1572   		bps[10]._vol_i=0;
;;;1573   		bps[10]._flags_tu=1;
;;;1574   
;;;1575   		bps[11]._vol_u=0;
;;;1576   		bps[11]._vol_i=0;
;;;1577   		bps[11]._flags_tu=1;
;;;1578    		
;;;1579   		bps[sub_ind1]._vol_u=1022;
;;;1580   		bps[sub_ind1]._vol_i=1022;
;;;1581   		bps[sub_ind1]._flags_tu=0;
;;;1582   		}
;;;1583   
;;;1584   	else if(sub_ind==6)
;;;1585   		{
;;;1586   		if(phase==0)
;;;1587   			{
;;;1588     			cntrl_stat_U=0;
;;;1589   			cntrl_stat_I=0;
;;;1590   			bps_stat=stOFF;
;;;1591   			bps[0]._vol_u=0;
;;;1592   			bps[0]._vol_i=0;
;;;1593   			bps[0]._flags_tu=1;
;;;1594   	
;;;1595   			bps[1]._vol_u=0;
;;;1596   			bps[1]._vol_i=0;
;;;1597   			bps[1]._flags_tu=1;
;;;1598   	
;;;1599   			bps[1]._vol_u=0;
;;;1600   			bps[1]._vol_i=0;
;;;1601   			bps[1]._flags_tu=1;
;;;1602   	
;;;1603   			bps[2]._vol_u=0;
;;;1604   			bps[2]._vol_i=0;
;;;1605   			bps[2]._flags_tu=1;
;;;1606   	
;;;1607   			bps[3]._vol_u=0;
;;;1608   			bps[3]._vol_i=0;
;;;1609   			bps[3]._flags_tu=1;
;;;1610   	
;;;1611   			bps[4]._vol_u=0;
;;;1612   			bps[4]._vol_i=0;
;;;1613   			bps[4]._flags_tu=1;
;;;1614   	
;;;1615   			bps[5]._vol_u=0;
;;;1616   			bps[5]._vol_i=0;
;;;1617   			bps[5]._flags_tu=1;
;;;1618   	
;;;1619   			bps[6]._vol_u=0;
;;;1620   			bps[6]._vol_i=0;
;;;1621   			bps[6]._flags_tu=1;
;;;1622   	
;;;1623   			bps[7]._vol_u=0;
;;;1624   			bps[7]._vol_i=0;
;;;1625   			bps[7]._flags_tu=1;
;;;1626   	
;;;1627   			bps[8]._vol_u=0;
;;;1628   			bps[8]._vol_i=0;
;;;1629   			bps[8]._flags_tu=1;
;;;1630   			
;;;1631   			bps[9]._vol_u=0;
;;;1632   			bps[9]._vol_i=0;
;;;1633   			bps[9]._flags_tu=1;
;;;1634   	
;;;1635   			bps[10]._vol_u=0;
;;;1636   			bps[10]._vol_i=0;
;;;1637   			bps[10]._flags_tu=1;
;;;1638   	
;;;1639   			bps[11]._vol_u=0;
;;;1640   			bps[11]._vol_i=0;
;;;1641   			bps[11]._flags_tu=1;
;;;1642   
;;;1643   			}
;;;1644   		else if(phase==1)
;;;1645   			{
;;;1646     			cntrl_stat_U=1022;
;;;1647   			cntrl_stat_I=1022;
;;;1648   			bps_stat=stON;
;;;1649   
;;;1650   			bps[0]._vol_u=0;
;;;1651   			bps[0]._vol_i=0;
;;;1652   			bps[0]._flags_tu=1;
;;;1653   	
;;;1654   			bps[1]._vol_u=0;
;;;1655   			bps[1]._vol_i=0;
;;;1656   			bps[1]._flags_tu=1;
;;;1657   	
;;;1658   			bps[1]._vol_u=0;
;;;1659   			bps[1]._vol_i=0;
;;;1660   			bps[1]._flags_tu=1;
;;;1661   	
;;;1662   			bps[2]._vol_u=0;
;;;1663   			bps[2]._vol_i=0;
;;;1664   			bps[2]._flags_tu=1;
;;;1665   	
;;;1666   			bps[3]._vol_u=0;
;;;1667   			bps[3]._vol_i=0;
;;;1668   			bps[3]._flags_tu=1;
;;;1669   	
;;;1670   			bps[4]._vol_u=0;
;;;1671   			bps[4]._vol_i=0;
;;;1672   			bps[4]._flags_tu=1;
;;;1673   	
;;;1674   			bps[5]._vol_u=0;
;;;1675   			bps[5]._vol_i=0;
;;;1676   			bps[5]._flags_tu=1;
;;;1677   	
;;;1678   			bps[6]._vol_u=0;
;;;1679   			bps[6]._vol_i=0;
;;;1680   			bps[6]._flags_tu=1;
;;;1681   	
;;;1682   			bps[7]._vol_u=0;
;;;1683   			bps[7]._vol_i=0;
;;;1684   			bps[7]._flags_tu=1;
;;;1685   	
;;;1686   			bps[8]._vol_u=0;
;;;1687   			bps[8]._vol_i=0;
;;;1688   			bps[8]._flags_tu=1;
;;;1689   			
;;;1690   			bps[9]._vol_u=0;
;;;1691   			bps[9]._vol_i=0;
;;;1692   			bps[9]._flags_tu=1;
;;;1693   	
;;;1694   			bps[10]._vol_u=0;
;;;1695   			bps[10]._vol_i=0;
;;;1696   			bps[10]._flags_tu=1;
;;;1697   	
;;;1698   			bps[11]._vol_u=0;
;;;1699   			bps[11]._vol_i=0;
;;;1700   			bps[11]._flags_tu=1;
;;;1701   
;;;1702   
;;;1703   
;;;1704   			bps[sub_ind1]._vol_u=1022;
;;;1705   			bps[sub_ind1]._vol_i=1022;
;;;1706   			bps[sub_ind1]._flags_tu=0;
;;;1707   			}
;;;1708   		}
;;;1709   	else 
;;;1710   		{
;;;1711   		bps_stat=stOFF;
;;;1712   
;;;1713   		bps[0]._vol_u=0;
;;;1714   		bps[0]._vol_i=0;
;;;1715   		bps[0]._flags_tu=1;
;;;1716   
;;;1717   		bps[1]._vol_u=0;
;;;1718   		bps[1]._vol_i=0;
;;;1719   		bps[1]._flags_tu=1;
;;;1720   
;;;1721   		bps[1]._vol_u=0;
;;;1722   		bps[1]._vol_i=0;
;;;1723   		bps[1]._flags_tu=1;
;;;1724   
;;;1725   		bps[2]._vol_u=0;
;;;1726   		bps[2]._vol_i=0;
;;;1727   		bps[2]._flags_tu=1;
;;;1728   
;;;1729   		bps[3]._vol_u=0;
;;;1730   		bps[3]._vol_i=0;
;;;1731   		bps[3]._flags_tu=1;
;;;1732   
;;;1733   		bps[4]._vol_u=0;
;;;1734   		bps[4]._vol_i=0;
;;;1735   		bps[4]._flags_tu=1;
;;;1736   
;;;1737   		bps[5]._vol_u=0;
;;;1738   		bps[5]._vol_i=0;
;;;1739   		bps[5]._flags_tu=1;
;;;1740   
;;;1741   		bps[6]._vol_u=0;
;;;1742   		bps[6]._vol_i=0;
;;;1743   		bps[6]._flags_tu=1;
;;;1744   
;;;1745   		bps[7]._vol_u=0;
;;;1746   		bps[7]._vol_i=0;
;;;1747   		bps[7]._flags_tu=1;
;;;1748   
;;;1749   		bps[8]._vol_u=0;
;;;1750   		bps[8]._vol_i=0;
;;;1751   		bps[8]._flags_tu=1;
;;;1752   		
;;;1753   		bps[9]._vol_u=0;
;;;1754   		bps[9]._vol_i=0;
;;;1755   		bps[9]._flags_tu=1;
;;;1756   
;;;1757   		bps[10]._vol_u=0;
;;;1758   		bps[10]._vol_i=0;
;;;1759   		bps[10]._flags_tu=1;
;;;1760   
;;;1761   		bps[11]._vol_u=0;
;;;1762   		bps[11]._vol_i=0;
;;;1763   		bps[11]._flags_tu=1;
;;;1764   
;;;1765   		}
;;;1766   	}
;;;1767   
;;;1768   else if(ind==iTst_pwm)
;;;1769   	{
;;;1770   	char i;
;;;1771   
;;;1772   	for(i=0;i<NUMIST;i++)
;;;1773   		{
;;;1774   		bps[i]._vol_u=tst_pwm_u;
000dfc  4aea              LDR      r2,|L5.4520|
;;;1775   		bps[i]._vol_i=tst_pwm_i;
000dfe  49eb              LDR      r1,|L5.4524|
000e00  f1bc0f34          CMP      r12,#0x34             ;1768
000e04  d06d              BEQ      |L5.3810|
;;;1776   		bps[i]._flags_tu=0;
;;;1777   		}
;;;1778   	}
;;;1779   
;;;1780   else if(ind==iK_viz_u)
;;;1781   	{
;;;1782   	char i;
;;;1783   
;;;1784   	if(viz_stat!=vsON)
000e06  48ea              LDR      r0,|L5.4528|
000e08  f1bc0f46          CMP      r12,#0x46             ;1780
000e0c  d06a              BEQ      |L5.3812|
;;;1785   		{
;;;1786   		for(i=0;i<NUMIST;i++)
;;;1787   			{
;;;1788   			bps[i]._vol_u=1022;
;;;1789   			bps[i]._vol_i=1022;
;;;1790   			bps[i]._flags_tu=0;
;;;1791   			}
;;;1792   		}
;;;1793   	else 
;;;1794   		{
;;;1795   		for(i=0;i<NUMIST;i++)
;;;1796   			{
;;;1797   			bps[i]._vol_u=tst_pwm_u;
;;;1798   			bps[i]._vol_i=tst_pwm_i;
;;;1799   			bps[i]._flags_tu=0;
;;;1800   			}
;;;1801   		}
;;;1802   	}
;;;1803   
;;;1804   else if(ind==iK_viz_i)
000e0e  f1bc0f45          CMP      r12,#0x45
000e12  d068              BEQ      |L5.3814|
;;;1805   	{
;;;1806   	char i;
;;;1807   
;;;1808   	if(viz_stat!=vsON)
;;;1809   		{
;;;1810   		for(i=0;i<NUMIST;i++)
;;;1811   			{
;;;1812   			bps[i]._vol_u=1022;
;;;1813   			bps[i]._vol_i=1022;
;;;1814   			bps[i]._flags_tu=0;
;;;1815   			}
;;;1816   		}
;;;1817   	else 
;;;1818   		{
;;;1819   		for(i=0;i<NUMIST;i++)
;;;1820   			{
;;;1821   			bps[i]._vol_u=tst_pwm_u;
;;;1822   			bps[i]._vol_i=tst_pwm_i;
;;;1823   			bps[i]._flags_tu=0;
;;;1824   			}
;;;1825   		}
;;;1826   	}
;;;1827   
;;;1828   else if(work_stat==wsGS)
000e14  f89a0000          LDRB     r0,[r10,#0]  ; work_stat
;;;1829   	{
;;;1830   	signed long temp_SL_U,temp_SL_I;
;;;1831   	
;;;1832   	if((CURR_FADE_IN) && (time_proc<CURR_FADE_IN))
;;;1833   		{
;;;1834   		signed long temp_SL_;
;;;1835   		
;;;1836   		temp_SL_=	(signed long)I_ug_temp;
;;;1837   		temp_SL_*= (signed long)time_proc;
;;;1838   		temp_SL_/= (signed long)CURR_FADE_IN;
;;;1839   
;;;1840   		//I_ug_temp= (signed short)((signed long)I_ug_temp*(signed long)time_proc)/(signed long)CURR_FADE_IN;
;;;1841   
;;;1842   		I_ug_temp= (signed short)temp_SL_;
;;;1843   		}	
;;;1844   	
;;;1845   	if(b1Hz_sh) {
;;;1846   
;;;1847   
;;;1848   
;;;1849   
;;;1850   		if(!((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF)))) {
;;;1851   	 		if(load_I<I_ug_temp)_x_++;
;;;1852      			else if(load_I>I_ug_temp)_x_--;
;;;1853   			//gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;1854   			gran(&_x_,-50,50); 
;;;1855   
;;;1856   	 		if(load_U<U_maxg)_xu_++;
000e18  f8dfa398          LDR      r10,|L5.4532|
000e1c  f8dfb398          LDR      r11,|L5.4536|
000e20  2801              CMP      r0,#1                 ;1828
000e22  d070              BEQ      |L5.3846|
;;;1857      			else if(load_U>U_maxg)_xu_--;
;;;1858   			//gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;1859   			gran(&_xu_,-50,50); 
;;;1860   		}
;;;1861   	}
;;;1862   
;;;1863   	temp_SL_U=1022;
;;;1864   	temp_SL_U*=(signed long)U_maxg;
;;;1865   	temp_SL_U/=(signed long)U_MAX;
;;;1866   
;;;1867   	temp_SL_I=1022;
;;;1868   	//temp_SL_I*=NUMIST;
;;;1869   	temp_SL_I*=(signed long)I_ug_temp;
;;;1870   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1871   
;;;1872   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1873   		{
;;;1874   		temp_SL_U=find_U_curve(U_maxg)*5;
;;;1875   		}
;;;1876   	 
;;;1877   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1878   		{
;;;1879   		temp_SL_I=find_I_curve(I_ug_temp)*5;
;;;1880   		}
;;;1881   
;;;1882   	for(i=0;i<NUMIST;i++)
;;;1883   		{
;;;1884   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;1885   		 	bps[i]._vol_u=0;
;;;1886   			bps[i]._vol_i=0;
;;;1887   			bps[i]._flags_tu=1;
;;;1888   		} else {
;;;1889   			bps[i]._vol_u=(short)temp_SL_U + _xu_/*+bps[i]._xu_*/;
;;;1890   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1891   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1892   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1893   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1894   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1895   			bps[i]._flags_tu=0;
;;;1896   		}
;;;1897   	}
;;;1898   
;;;1899   	}
;;;1900   else if(work_stat==wsPS)
000e24  2802              CMP      r0,#2
000e26  d06f              BEQ      |L5.3848|
;;;1901   	{
;;;1902   	signed long temp_SL_U,temp_SL_I;
;;;1903   	/*	U_up_d=U_up/100;
;;;1904   	if(U_up_d<5) U_up_d=5;
;;;1905   	*/
;;;1906   	if(load_U_>5)bU_VALID=1;
;;;1907   	else bU_VALID=0;
;;;1908   
;;;1909   	temp_SL_U=(long)U_up_temp/100L;
;;;1910   	if(temp_SL_U<=0)temp_SL_U=1;
;;;1911   	if((abs(load_U_-U_up_temp))<(signed short)temp_SL_U) bU_VALID_VALID=1;
;;;1912   	else bU_VALID_VALID=0;
;;;1913   /*	if( (load_U_>(U_up-U_up_d))&&(load_U_<(U_up+U_up_d)) )bFAST_REG=0;
;;;1914   	else bFAST_REG=1;*/
;;;1915   
;;;1916   	bFAST_REG=0;
;;;1917   
;;;1918   	if(bU_VALID_VALID)
;;;1919   		{
;;;1920   		if(bPRECESSION_REG)
;;;1921   			{
;;;1922   			bPRECESSION_REG=0;
;;;1923   			if(load_U_<U_up_temp)_xu_++;
;;;1924      			else if(load_U_>U_up_temp)_xu_--;
;;;1925   			gran(&_xu_,-50,50);
;;;1926   			}
;;;1927   		}
;;;1928   	else if((b1Hz_sh&&bU_VALID)||(bFAST_REG&&bU_VALID))
;;;1929   		{
;;;1930   	 	if(load_I<I_maxp)_x_++;
;;;1931      		else if(load_I>I_maxp)_x_--;
;;;1932   		gran(&_x_,-50,50); 
;;;1933   
;;;1934   	 	if(load_U_<U_up_temp)_xu_++;
;;;1935      		else if(load_U_>U_up_temp)_xu_--;
;;;1936   		gran(&_xu_,-50,50); 
;;;1937   
;;;1938   		}
;;;1939   
;;;1940   
;;;1941   	temp_SL_U=900;
;;;1942   	temp_SL_U*=(signed long)U_up_temp;
;;;1943   	temp_SL_U/=(signed long)U_MAX;
;;;1944   	temp_SL_U+=50;
;;;1945   
;;;1946   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1947   		{	
;;;1948   		temp_SL_U=find_U_curve(U_up_temp)*5;
;;;1949   		}
;;;1950   	//temp_SL_U=lc640_read_int(SEKTOR_KURVE_U+(temp_SL_U*2));
;;;1951   	 
;;;1952   	temp_SL_I=1022;
;;;1953   	//temp_SL_I*=NUMIST;
;;;1954   	temp_SL_I*=(signed long)I_maxp;
;;;1955   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1956   
;;;1957   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1958   		{
;;;1959   		temp_SL_I=find_I_curve(I_maxp)*5;
;;;1960   		}
;;;1961   
;;;1962   	for(i=0;i<NUMIST;i++) {
;;;1963   
;;;1964   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;1965   		 	bps[i]._vol_u=0;
;;;1966   			bps[i]._vol_i=0;
;;;1967   			bps[i]._flags_tu=1;
;;;1968   		} else {
;;;1969   			bps[i]._vol_u=(short)temp_SL_U + _xu_+bps[i]._xu_;
;;;1970   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1971   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1972   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1973   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1974   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1975   			bps[i]._flags_tu=0;
;;;1976   		}
;;;1977   	}
;;;1978   
;;;1979   
;;;1980   /*	for(i=0;i<NUMIST;i++)
;;;1981   		{
;;;1982   		bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;1983   	 	bps[i]._vol_i=((short)temp_SL_I+ _x_);//NUMIST;
;;;1984   		bps[i]._flags_tu=0;
;;;1985   		}*/
;;;1986   	//bps[0]._vol_i+= _x_;
;;;1987   	plazma_vol_u_0=temp_SL_U;
;;;1988   	plazma_vol_u_1=bps[0]._vol_u;
;;;1989   	}
;;;1990   
;;;1991   else if(work_stat==wsCAP)
000e28  2803              CMP      r0,#3
000e2a  d06e              BEQ      |L5.3850|
;;;1992   	{
;;;1993   	signed long temp_SL_U=0,temp_SL_I=0;
;;;1994   
;;;1995   
;;;1996   
;;;1997   
;;;1998   
;;;1999   
;;;2000   	if(b1Hz_sh) {
;;;2001   		if(!bOFF) {
;;;2002   	 		if(load_I<(CAP_WRK_CURR*10))_x_++;
;;;2003      			else if(load_I>(CAP_WRK_CURR*10))_x_--;
;;;2004   			gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;2005   			gran(&_x_,-50,50); 
;;;2006   
;;;2007   	 		if(load_U<(CAP_MAX_VOLT*10))_xu_++;
;;;2008      			else if(load_U>(CAP_MAX_VOLT*10))_xu_--;
;;;2009   			gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;2010   			gran(&_xu_,-50,50); 
;;;2011   		}
;;;2012   	}
;;;2013   
;;;2014   	temp_SL_U=10220L;
;;;2015   	temp_SL_U*=(signed long)CAP_MAX_VOLT;
;;;2016   	temp_SL_U/=(signed long)U_MAX;
;;;2017   
;;;2018   	temp_SL_I=10220L;
;;;2019   	//temp_SL_I*=NUMIST;
;;;2020   	temp_SL_I*=(signed long)CAP_WRK_CURR;
;;;2021   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;2022   
;;;2023   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;2024   		{
;;;2025   		temp_SL_U=find_U_curve(CAP_MAX_VOLT*10)*5;
;;;2026   		}
;;;2027   	 
;;;2028   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;2029   		{
;;;2030   		temp_SL_I=find_I_curve(CAP_WRK_CURR*10)*5;
;;;2031   		} 
;;;2032   
;;;2033   //temp_SL_U=1000;
;;;2034   
;;;2035   	for(i=0;i<NUMIST;i++)
;;;2036   		{
;;;2037   		if(bOFF) {
;;;2038   		 	bps[i]._vol_u=0;
;;;2039   			bps[i]._vol_i=0;
;;;2040   			bps[i]._flags_tu=1;
;;;2041   		} else {
;;;2042   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;2043   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;2044   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;2045   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;2046   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;2047   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;2048   			bps[i]._flags_tu=0;
;;;2049   		}
;;;2050   	}
;;;2051   
;;;2052   	}
;;;2053   else 
;;;2054   	{
;;;2055   	bps_stat=stOFF;
000e2c  701d              STRB     r5,[r3,#0]
;;;2056   
;;;2057   	for(i=0;i<NUMIST;i++)
000e2e  2000              MOVS     r0,#0
000e30  464b              MOV      r3,r9                 ;1426
000e32  f9b71000          LDRSH    r1,[r7,#0]            ;1474
000e36  e3fe              B        |L5.5686|
                  |L5.3640|
000e38  48e0              LDR      r0,|L5.4540|
000e3a  e734              B        |L5.3238|
                  |L5.3644|
000e3c  48e0              LDR      r0,|L5.4544|
000e3e  e732              B        |L5.3238|
                  |L5.3648|
000e40  48e0              LDR      r0,|L5.4548|
000e42  e73b              B        |L5.3260|
                  |L5.3652|
000e44  48e0              LDR      r0,|L5.4552|
000e46  e739              B        |L5.3260|
                  |L5.3656|
000e48  f9900001          LDRSB    r0,[r0,#1]            ;1468  ; a_ind
000e4c  b138              CBZ      r0,|L5.3678|
000e4e  2801              CMP      r0,#1                 ;1481
000e50  d01f              BEQ      |L5.3730|
000e52  701d              STRB     r5,[r3,#0]            ;1512
000e54  62e5              STR      r5,[r4,#0x2c]         ;1515  ; bps
000e56  6325              STR      r5,[r4,#0x30]         ;1516  ; bps
000e58  f8849028          STRB     r9,[r4,#0x28]         ;1516
000e5c  e2c6              B        |L5.5100|
                  |L5.3678|
000e5e  f8a68014          STRH     r8,[r6,#0x14]         ;1470
000e62  f8a68016          STRH     r8,[r6,#0x16]         ;1471
000e66  f8839000          STRB     r9,[r3,#0]            ;1472
000e6a  4640              MOV      r0,r8                 ;1470
000e6c  2100              MOVS     r1,#0                 ;1474
000e6e  f9b72000          LDRSH    r2,[r7,#0]            ;1474
000e72  e00b              B        |L5.3724|
                  |L5.3700|
000e74  ebc103c1          RSB      r3,r1,r1,LSL #3       ;1476
000e78  eb030343          ADD      r3,r3,r3,LSL #1       ;1476
000e7c  eb040383          ADD      r3,r4,r3,LSL #2       ;1476
000e80  1c49              ADDS     r1,r1,#1              ;1474
000e82  62d8              STR      r0,[r3,#0x2c]         ;1477
000e84  6318              STR      r0,[r3,#0x30]         ;1478
000e86  f8835028          STRB     r5,[r3,#0x28]         ;1478
000e8a  b2c9              UXTB     r1,r1                 ;1474
                  |L5.3724|
000e8c  4291              CMP      r1,r2                 ;1474
000e8e  dbf1              BLT      |L5.3700|
000e90  e2ac              B        |L5.5100|
                  |L5.3730|
000e92  7808              LDRB     r0,[r1,#0]            ;1483  ; phase
000e94  b110              CBZ      r0,|L5.3740|
000e96  2801              CMP      r0,#1                 ;1496
000e98  d017              BEQ      |L5.3786|
000e9a  e2a7              B        |L5.5100|
                  |L5.3740|
000e9c  82b5              STRH     r5,[r6,#0x14]         ;1485
000e9e  82f5              STRH     r5,[r6,#0x16]         ;1486
000ea0  701d              STRB     r5,[r3,#0]            ;1487
000ea2  2000              MOVS     r0,#0                 ;1489
000ea4  464b              MOV      r3,r9                 ;1426
000ea6  f9b71000          LDRSH    r1,[r7,#0]            ;1474
000eaa  e00b              B        |L5.3780|
                  |L5.3756|
000eac  ebc002c0          RSB      r2,r0,r0,LSL #3       ;1491
000eb0  eb020242          ADD      r2,r2,r2,LSL #1       ;1491
000eb4  eb040282          ADD      r2,r4,r2,LSL #2       ;1491
000eb8  1c40              ADDS     r0,r0,#1              ;1489
000eba  62d5              STR      r5,[r2,#0x2c]         ;1492
000ebc  6315              STR      r5,[r2,#0x30]         ;1493
000ebe  f8823028          STRB     r3,[r2,#0x28]         ;1493
000ec2  b2c0              UXTB     r0,r0                 ;1489
                  |L5.3780|
000ec4  4288              CMP      r0,r1                 ;1489
000ec6  dbf1              BLT      |L5.3756|
000ec8  e290              B        |L5.5100|
                  |L5.3786|
000eca  f8a68014          STRH     r8,[r6,#0x14]         ;1498
000ece  f8a68016          STRH     r8,[r6,#0x16]         ;1499
000ed2  f8839000          STRB     r9,[r3,#0]            ;1500
000ed6  4640              MOV      r0,r8                 ;1498
000ed8  2100              MOVS     r1,#0                 ;1502
000eda  f9b72000          LDRSH    r2,[r7,#0]            ;1474
000ede  e00f              B        |L5.3840|
                  |L5.3808|
000ee0  e014              B        |L5.3852|
                  |L5.3810|
000ee2  e125              B        |L5.4400|
                  |L5.3812|
000ee4  e13b              B        |L5.4446|
                  |L5.3814|
000ee6  e188              B        |L5.4602|
                  |L5.3816|
000ee8  ebc103c1          RSB      r3,r1,r1,LSL #3       ;1504
000eec  eb030343          ADD      r3,r3,r3,LSL #1       ;1504
000ef0  eb040383          ADD      r3,r4,r3,LSL #2       ;1504
000ef4  1c49              ADDS     r1,r1,#1              ;1502
000ef6  62d8              STR      r0,[r3,#0x2c]         ;1505
000ef8  6318              STR      r0,[r3,#0x30]         ;1506
000efa  f8835028          STRB     r5,[r3,#0x28]         ;1506
000efe  b2c9              UXTB     r1,r1                 ;1502
                  |L5.3840|
000f00  4291              CMP      r1,r2                 ;1502
000f02  dbf1              BLT      |L5.3816|
000f04  e272              B        |L5.5100|
                  |L5.3846|
000f06  e1a6              B        |L5.4694|
                  |L5.3848|
000f08  e271              B        |L5.5102|
                  |L5.3850|
000f0a  e362              B        |L5.5586|
                  |L5.3852|
000f0c  f9902001          LDRSB    r2,[r0,#1]            ;1521  ; a_ind
000f10  b122              CBZ      r2,|L5.3868|
000f12  2a03              CMP      r2,#3                 ;1521
000f14  d002              BEQ      |L5.3868|
000f16  2a06              CMP      r2,#6                 ;1584
000f18  d05b              BEQ      |L5.4050|
000f1a  e061              B        |L5.4064|
                  |L5.3868|
000f1c  f8a68014          STRH     r8,[r6,#0x14]         ;1523
000f20  f8a68016          STRH     r8,[r6,#0x16]         ;1524
000f24  f1040428          ADD      r4,r4,#0x28           ;1525
000f28  f8839000          STRB     r9,[r3,#0]            ;1525
000f2c  6065              STR      r5,[r4,#4]            ;1528  ; bps
000f2e  60a5              STR      r5,[r4,#8]            ;1529  ; bps
000f30  f8849000          STRB     r9,[r4,#0]            ;1529
000f34  65a5              STR      r5,[r4,#0x58]         ;1532  ; bps
000f36  65e5              STR      r5,[r4,#0x5c]         ;1533  ; bps
000f38  f8849054          STRB     r9,[r4,#0x54]         ;1533
000f3c  f8c450ac          STR      r5,[r4,#0xac]         ;1540  ; bps
000f40  f8c450b0          STR      r5,[r4,#0xb0]         ;1541  ; bps
000f44  f88490a8          STRB     r9,[r4,#0xa8]         ;1541
000f48  f8c45100          STR      r5,[r4,#0x100]        ;1544  ; bps
000f4c  f8c45104          STR      r5,[r4,#0x104]        ;1545  ; bps
000f50  f88490fc          STRB     r9,[r4,#0xfc]         ;1545
000f54  f8c45154          STR      r5,[r4,#0x154]        ;1548  ; bps
000f58  464a              MOV      r2,r9                 ;1525
000f5a  f8c45158          STR      r5,[r4,#0x158]        ;1549  ; bps
000f5e  f8842150          STRB     r2,[r4,#0x150]        ;1549
000f62  f8c451a8          STR      r5,[r4,#0x1a8]        ;1552  ; bps
000f66  f8c451ac          STR      r5,[r4,#0x1ac]        ;1553  ; bps
000f6a  f88421a4          STRB     r2,[r4,#0x1a4]        ;1553
000f6e  f8c451fc          STR      r5,[r4,#0x1fc]        ;1556  ; bps
000f72  f8c45200          STR      r5,[r4,#0x200]        ;1557  ; bps
000f76  f88421f8          STRB     r2,[r4,#0x1f8]        ;1557
000f7a  f8c45250          STR      r5,[r4,#0x250]        ;1560  ; bps
000f7e  f8c45254          STR      r5,[r4,#0x254]        ;1561  ; bps
000f82  f884224c          STRB     r2,[r4,#0x24c]        ;1561
000f86  f8c452a4          STR      r5,[r4,#0x2a4]        ;1564  ; bps
000f8a  f8c452a8          STR      r5,[r4,#0x2a8]        ;1565  ; bps
000f8e  f88422a0          STRB     r2,[r4,#0x2a0]        ;1565
000f92  f8c452f8          STR      r5,[r4,#0x2f8]        ;1568  ; bps
000f96  f8c452fc          STR      r5,[r4,#0x2fc]        ;1569  ; bps
000f9a  f88422f4          STRB     r2,[r4,#0x2f4]        ;1569
000f9e  f8c4534c          STR      r5,[r4,#0x34c]        ;1572  ; bps
000fa2  f8c45350          STR      r5,[r4,#0x350]        ;1573  ; bps
000fa6  f8842348          STRB     r2,[r4,#0x348]        ;1573
000faa  f8c453a0          STR      r5,[r4,#0x3a0]        ;1576  ; bps
000fae  f8c453a4          STR      r5,[r4,#0x3a4]        ;1577  ; bps
000fb2  f884239c          STRB     r2,[r4,#0x39c]        ;1577
000fb6  f9900002          LDRSB    r0,[r0,#2]            ;1579  ; a_ind
000fba  f1a40428          SUB      r4,r4,#0x28           ;1577
000fbe  ebc000c0          RSB      r0,r0,r0,LSL #3       ;1579
000fc2  eb000040          ADD      r0,r0,r0,LSL #1       ;1579
000fc6  eb040080          ADD      r0,r4,r0,LSL #2       ;1579
000fca  4641              MOV      r1,r8                 ;1523
000fcc  62c1              STR      r1,[r0,#0x2c]         ;1580
000fce  6301              STR      r1,[r0,#0x30]         ;1581
000fd0  e0ab              B        |L5.4394|
                  |L5.4050|
000fd2  7809              LDRB     r1,[r1,#0]            ;1586  ; phase
000fd4  b111              CBZ      r1,|L5.4060|
000fd6  2901              CMP      r1,#1                 ;1644
000fd8  d04d              BEQ      |L5.4214|
000fda  e3f9              B        |L5.6096|
                  |L5.4060|
000fdc  82b5              STRH     r5,[r6,#0x14]         ;1588
000fde  82f5              STRH     r5,[r6,#0x16]         ;1589
                  |L5.4064|
000fe0  f1040428          ADD      r4,r4,#0x28           ;1711
000fe4  701d              STRB     r5,[r3,#0]            ;1711
000fe6  6065              STR      r5,[r4,#4]            ;1714  ; bps
000fe8  60a5              STR      r5,[r4,#8]            ;1715  ; bps
000fea  f8849000          STRB     r9,[r4,#0]            ;1715
000fee  65a5              STR      r5,[r4,#0x58]         ;1718  ; bps
000ff0  65e5              STR      r5,[r4,#0x5c]         ;1719  ; bps
000ff2  f8849054          STRB     r9,[r4,#0x54]         ;1719
000ff6  f8c450ac          STR      r5,[r4,#0xac]         ;1726  ; bps
000ffa  f8c450b0          STR      r5,[r4,#0xb0]         ;1727  ; bps
000ffe  f88490a8          STRB     r9,[r4,#0xa8]         ;1727
001002  f8c45100          STR      r5,[r4,#0x100]        ;1730  ; bps
001006  f8c45104          STR      r5,[r4,#0x104]        ;1731  ; bps
00100a  f88490fc          STRB     r9,[r4,#0xfc]         ;1731
00100e  f8c45154          STR      r5,[r4,#0x154]        ;1734  ; bps
001012  f8c45158          STR      r5,[r4,#0x158]        ;1735  ; bps
001016  f8849150          STRB     r9,[r4,#0x150]        ;1735
00101a  f8c451a8          STR      r5,[r4,#0x1a8]        ;1738  ; bps
00101e  f8c451ac          STR      r5,[r4,#0x1ac]        ;1739  ; bps
001022  f88491a4          STRB     r9,[r4,#0x1a4]        ;1739
001026  f8c451fc          STR      r5,[r4,#0x1fc]        ;1742  ; bps
00102a  4648              MOV      r0,r9                 ;1715
00102c  f8c45200          STR      r5,[r4,#0x200]        ;1743  ; bps
001030  f88401f8          STRB     r0,[r4,#0x1f8]        ;1743
001034  f8c45250          STR      r5,[r4,#0x250]        ;1746  ; bps
001038  f8c45254          STR      r5,[r4,#0x254]        ;1747  ; bps
00103c  f884024c          STRB     r0,[r4,#0x24c]        ;1747
001040  f8c452a4          STR      r5,[r4,#0x2a4]        ;1750  ; bps
001044  f8c452a8          STR      r5,[r4,#0x2a8]        ;1751  ; bps
001048  f88402a0          STRB     r0,[r4,#0x2a0]        ;1751
00104c  f8c452f8          STR      r5,[r4,#0x2f8]        ;1754  ; bps
001050  f8c452fc          STR      r5,[r4,#0x2fc]        ;1755  ; bps
001054  f88402f4          STRB     r0,[r4,#0x2f4]        ;1755
001058  f8c4534c          STR      r5,[r4,#0x34c]        ;1758  ; bps
00105c  f8c45350          STR      r5,[r4,#0x350]        ;1759  ; bps
001060  f8840348          STRB     r0,[r4,#0x348]        ;1759
001064  f8c453a0          STR      r5,[r4,#0x3a0]        ;1762  ; bps
001068  f8c453a4          STR      r5,[r4,#0x3a4]        ;1763  ; bps
00106c  f884039c          STRB     r0,[r4,#0x39c]        ;1763
001070  f1a40428          SUB      r4,r4,#0x28           ;1763
001074  e3ac              B        |L5.6096|
                  |L5.4214|
001076  f8a68014          STRH     r8,[r6,#0x14]         ;1646
00107a  f8a68016          STRH     r8,[r6,#0x16]         ;1647
00107e  f1040428          ADD      r4,r4,#0x28           ;1648
001082  f8839000          STRB     r9,[r3,#0]            ;1648
001086  6065              STR      r5,[r4,#4]            ;1651  ; bps
001088  60a5              STR      r5,[r4,#8]            ;1652  ; bps
00108a  f8849000          STRB     r9,[r4,#0]            ;1652
00108e  65a5              STR      r5,[r4,#0x58]         ;1655  ; bps
001090  65e5              STR      r5,[r4,#0x5c]         ;1656  ; bps
001092  f8849054          STRB     r9,[r4,#0x54]         ;1656
001096  f8c450ac          STR      r5,[r4,#0xac]         ;1663  ; bps
00109a  f8c450b0          STR      r5,[r4,#0xb0]         ;1664  ; bps
00109e  f88490a8          STRB     r9,[r4,#0xa8]         ;1664
0010a2  f8c45100          STR      r5,[r4,#0x100]        ;1667  ; bps
0010a6  f8c45104          STR      r5,[r4,#0x104]        ;1668  ; bps
0010aa  f88490fc          STRB     r9,[r4,#0xfc]         ;1668
0010ae  f8c45154          STR      r5,[r4,#0x154]        ;1671  ; bps
0010b2  4649              MOV      r1,r9                 ;1648
0010b4  f8c45158          STR      r5,[r4,#0x158]        ;1672  ; bps
0010b8  f8841150          STRB     r1,[r4,#0x150]        ;1672
0010bc  f8c451a8          STR      r5,[r4,#0x1a8]        ;1675  ; bps
0010c0  f8c451ac          STR      r5,[r4,#0x1ac]        ;1676  ; bps
0010c4  f88411a4          STRB     r1,[r4,#0x1a4]        ;1676
0010c8  f8c451fc          STR      r5,[r4,#0x1fc]        ;1679  ; bps
0010cc  f8c45200          STR      r5,[r4,#0x200]        ;1680  ; bps
0010d0  f88411f8          STRB     r1,[r4,#0x1f8]        ;1680
0010d4  f8c45250          STR      r5,[r4,#0x250]        ;1683  ; bps
0010d8  f8c45254          STR      r5,[r4,#0x254]        ;1684  ; bps
0010dc  f884124c          STRB     r1,[r4,#0x24c]        ;1684
0010e0  f8c452a4          STR      r5,[r4,#0x2a4]        ;1687  ; bps
0010e4  f8c452a8          STR      r5,[r4,#0x2a8]        ;1688  ; bps
0010e8  f88412a0          STRB     r1,[r4,#0x2a0]        ;1688
0010ec  f8c452f8          STR      r5,[r4,#0x2f8]        ;1691  ; bps
0010f0  f8c452fc          STR      r5,[r4,#0x2fc]        ;1692  ; bps
0010f4  f88412f4          STRB     r1,[r4,#0x2f4]        ;1692
0010f8  f8c4534c          STR      r5,[r4,#0x34c]        ;1695  ; bps
0010fc  f8c45350          STR      r5,[r4,#0x350]        ;1696  ; bps
001100  f8841348          STRB     r1,[r4,#0x348]        ;1696
001104  f8c453a0          STR      r5,[r4,#0x3a0]        ;1699  ; bps
001108  f8c453a4          STR      r5,[r4,#0x3a4]        ;1700  ; bps
00110c  f884139c          STRB     r1,[r4,#0x39c]        ;1700
001110  f9900002          LDRSB    r0,[r0,#2]            ;1704  ; a_ind
001114  f1a40428          SUB      r4,r4,#0x28           ;1700
001118  ebc000c0          RSB      r0,r0,r0,LSL #3       ;1704
00111c  eb000040          ADD      r0,r0,r0,LSL #1       ;1704
001120  eb040080          ADD      r0,r4,r0,LSL #2       ;1704
001124  4642              MOV      r2,r8                 ;1646
001126  62c2              STR      r2,[r0,#0x2c]         ;1705
001128  6302              STR      r2,[r0,#0x30]         ;1705
                  |L5.4394|
00112a  f8805028          STRB     r5,[r0,#0x28]         ;1581
00112e  e34f              B        |L5.6096|
                  |L5.4400|
001130  f9b1c000          LDRSH    r12,[r1,#0]           ;1775
001134  2000              MOVS     r0,#0                 ;1772
001136  f9b22000          LDRSH    r2,[r2,#0]            ;1774
00113a  f9b71000          LDRSH    r1,[r7,#0]            ;1474
00113e  e00b              B        |L5.4440|
                  |L5.4416|
001140  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1774
001144  eb030343          ADD      r3,r3,r3,LSL #1       ;1774
001148  eb040383          ADD      r3,r4,r3,LSL #2       ;1774
00114c  1c40              ADDS     r0,r0,#1              ;1772
00114e  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1774
001152  f8835028          STRB     r5,[r3,#0x28]         ;1776
001156  b2c0              UXTB     r0,r0                 ;1772
                  |L5.4440|
001158  4288              CMP      r0,r1                 ;1772
00115a  dbf1              BLT      |L5.4416|
00115c  e338              B        |L5.6096|
                  |L5.4446|
00115e  7800              LDRB     r0,[r0,#0]            ;1784  ; viz_stat
001160  2801              CMP      r0,#1                 ;1784
001162  f04f0000          MOV      r0,#0                 ;1795
001166  d031              BEQ      |L5.4556|
001168  4641              MOV      r1,r8                 ;1470
00116a  f9b72000          LDRSH    r2,[r7,#0]            ;1474
00116e  e00b              B        |L5.4488|
                  |L5.4464|
001170  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1788
001174  eb030343          ADD      r3,r3,r3,LSL #1       ;1788
001178  eb040383          ADD      r3,r4,r3,LSL #2       ;1788
00117c  1c40              ADDS     r0,r0,#1              ;1786
00117e  62d9              STR      r1,[r3,#0x2c]         ;1789
001180  6319              STR      r1,[r3,#0x30]         ;1790
001182  f8835028          STRB     r5,[r3,#0x28]         ;1790
001186  b2c0              UXTB     r0,r0                 ;1786
                  |L5.4488|
001188  4290              CMP      r0,r2                 ;1786
00118a  dbf1              BLT      |L5.4464|
00118c  e320              B        |L5.6096|
00118e  0000              DCW      0x0000
                  |L5.4496|
                          DCD      ||area_number.25||
                  |L5.4500|
                          DCD      a_ind
                  |L5.4504|
                          DCD      bps_stat
                  |L5.4508|
                          DCD      phase
                  |L5.4512|
                          DCD      bps
                  |L5.4516|
                          DCD      NUMIST
                  |L5.4520|
                          DCD      tst_pwm_u
                  |L5.4524|
                          DCD      tst_pwm_i
                  |L5.4528|
                          DCD      viz_stat
                  |L5.4532|
                          DCD      _xu_
                  |L5.4536|
                          DCD      _x_
                  |L5.4540|
                          DCD      I_ug3
                  |L5.4544|
                          DCD      I_ug2
                  |L5.4548|
                          DCD      U_up3
                  |L5.4552|
                          DCD      U_up2
                  |L5.4556|
0011cc  f9b1c000          LDRSH    r12,[r1,#0]           ;1775
0011d0  f9b22000          LDRSH    r2,[r2,#0]            ;1774
0011d4  f9b71000          LDRSH    r1,[r7,#0]            ;1474
0011d8  e00c              B        |L5.4596|
0011da  bf00              NOP                            ;1797
                  |L5.4572|
0011dc  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1797
0011e0  eb030343          ADD      r3,r3,r3,LSL #1       ;1797
0011e4  eb040383          ADD      r3,r4,r3,LSL #2       ;1797
0011e8  1c40              ADDS     r0,r0,#1              ;1795
0011ea  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1797
0011ee  f8835028          STRB     r5,[r3,#0x28]         ;1799
0011f2  b2c0              UXTB     r0,r0                 ;1795
                  |L5.4596|
0011f4  4288              CMP      r0,r1                 ;1795
0011f6  dbf1              BLT      |L5.4572|
0011f8  e2ea              B        |L5.6096|
                  |L5.4602|
0011fa  7800              LDRB     r0,[r0,#0]            ;1808  ; viz_stat
0011fc  2801              CMP      r0,#1                 ;1808
0011fe  f04f0000          MOV      r0,#0                 ;1819
001202  d012              BEQ      |L5.4650|
001204  4641              MOV      r1,r8                 ;1470
001206  f9b72000          LDRSH    r2,[r7,#0]            ;1474
00120a  e00b              B        |L5.4644|
                  |L5.4620|
00120c  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1812
001210  eb030343          ADD      r3,r3,r3,LSL #1       ;1812
001214  eb040383          ADD      r3,r4,r3,LSL #2       ;1812
001218  1c40              ADDS     r0,r0,#1              ;1810
00121a  62d9              STR      r1,[r3,#0x2c]         ;1813
00121c  6319              STR      r1,[r3,#0x30]         ;1814
00121e  f8835028          STRB     r5,[r3,#0x28]         ;1814
001222  b2c0              UXTB     r0,r0                 ;1810
                  |L5.4644|
001224  4290              CMP      r0,r2                 ;1810
001226  dbf1              BLT      |L5.4620|
001228  e2d2              B        |L5.6096|
                  |L5.4650|
00122a  f9b1c000          LDRSH    r12,[r1,#0]           ;1775
00122e  f9b22000          LDRSH    r2,[r2,#0]            ;1774
001232  f9b71000          LDRSH    r1,[r7,#0]            ;1474
001236  e00b              B        |L5.4688|
                  |L5.4664|
001238  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1821
00123c  eb030343          ADD      r3,r3,r3,LSL #1       ;1821
001240  eb040383          ADD      r3,r4,r3,LSL #2       ;1821
001244  1c40              ADDS     r0,r0,#1              ;1819
001246  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1821
00124a  f8835028          STRB     r5,[r3,#0x28]         ;1823
00124e  b2c0              UXTB     r0,r0                 ;1819
                  |L5.4688|
001250  4288              CMP      r0,r1                 ;1819
001252  dbf1              BLT      |L5.4664|
001254  e2bc              B        |L5.6096|
                  |L5.4694|
001256  48fb              LDR      r0,|L5.5700|
001258  f9b01000          LDRSH    r1,[r0,#0]            ;1832  ; CURR_FADE_IN
00125c  b151              CBZ      r1,|L5.4724|
00125e  48fa              LDR      r0,|L5.5704|
001260  6803              LDR      r3,[r0,#0]            ;1832  ; time_proc
001262  428b              CMP      r3,r1                 ;1832
001264  da06              BGE      |L5.4724|
001266  4af9              LDR      r2,|L5.5708|
001268  f9b20000          LDRSH    r0,[r2,#0]            ;1836  ; I_ug_temp
00126c  4358              MULS     r0,r3,r0              ;1837
00126e  fb90f0f1          SDIV     r0,r0,r1              ;1838
001272  8010              STRH     r0,[r2,#0]            ;1842
                  |L5.4724|
001274  79b0              LDRB     r0,[r6,#6]            ;1845  ; b1Hz_sh
001276  b398              CBZ      r0,|L5.4832|
001278  48f5              LDR      r0,|L5.5712|
00127a  8800              LDRH     r0,[r0,#0]            ;1850  ; REV_IS_ON
00127c  b140              CBZ      r0,|L5.4752|
00127e  48f5              LDR      r0,|L5.5716|
001280  8800              LDRH     r0,[r0,#0]            ;1850  ; AVT_REV_IS_ON
001282  b128              CBZ      r0,|L5.4752|
001284  48f4              LDR      r0,|L5.5720|
001286  7800              LDRB     r0,[r0,#0]            ;1850  ; proc_phase
001288  2801              CMP      r0,#1                 ;1850
00128a  d036              BEQ      |L5.4858|
00128c  2803              CMP      r0,#3                 ;1850
00128e  d034              BEQ      |L5.4858|
                  |L5.4752|
001290  48f2              LDR      r0,|L5.5724|
001292  f9b01000          LDRSH    r1,[r0,#0]            ;1851  ; load_I
001296  48ed              LDR      r0,|L5.5708|
001298  f9b00000          LDRSH    r0,[r0,#0]            ;1851  ; I_ug_temp
00129c  4281              CMP      r1,r0                 ;1851
00129e  da06              BGE      |L5.4782|
0012a0  f8bb1000          LDRH     r1,[r11,#0]           ;1851  ; _x_
0012a4  f1010101          ADD      r1,r1,#1              ;1851
0012a8  f8ab1000          STRH     r1,[r11,#0]           ;1851
0012ac  e006              B        |L5.4796|
                  |L5.4782|
0012ae  dd05              BLE      |L5.4796|
0012b0  f8bb0000          LDRH     r0,[r11,#0]           ;1852  ; _x_
0012b4  f1a00001          SUB      r0,r0,#1              ;1852
0012b8  f8ab0000          STRH     r0,[r11,#0]           ;1852
                  |L5.4796|
0012bc  2232              MOVS     r2,#0x32              ;1854
0012be  4251              RSBS     r1,r2,#0              ;1854
0012c0  48e7              LDR      r0,|L5.5728|
0012c2  f7fffffe          BL       gran
0012c6  48e7              LDR      r0,|L5.5732|
0012c8  f9b01000          LDRSH    r1,[r0,#0]            ;1856  ; load_U
0012cc  48e6              LDR      r0,|L5.5736|
0012ce  f9b00000          LDRSH    r0,[r0,#0]            ;1856  ; U_maxg
0012d2  4281              CMP      r1,r0                 ;1856
0012d4  da05              BGE      |L5.4834|
0012d6  f8ba1000          LDRH     r1,[r10,#0]           ;1856  ; _xu_
0012da  f1010101          ADD      r1,r1,#1              ;1856
0012de  e005              B        |L5.4844|
                  |L5.4832|
0012e0  e00b              B        |L5.4858|
                  |L5.4834|
0012e2  dd05              BLE      |L5.4848|
0012e4  f8ba1000          LDRH     r1,[r10,#0]           ;1857  ; _xu_
0012e8  f1a10101          SUB      r1,r1,#1              ;1857
                  |L5.4844|
0012ec  f8aa1000          STRH     r1,[r10,#0]           ;1857
                  |L5.4848|
0012f0  2232              MOVS     r2,#0x32              ;1859
0012f2  4251              RSBS     r1,r2,#0              ;1859
0012f4  48dd              LDR      r0,|L5.5740|
0012f6  f7fffffe          BL       gran
                  |L5.4858|
0012fa  48db              LDR      r0,|L5.5736|
0012fc  49dc              LDR      r1,|L5.5744|
0012fe  f9b00000          LDRSH    r0,[r0,#0]            ;1864  ; U_maxg
001302  f9b11000          LDRSH    r1,[r1,#0]            ;1865  ; U_MAX
001306  ebc02040          RSB      r0,r0,r0,LSL #9       ;1864
00130a  0040              LSLS     r0,r0,#1              ;1864
00130c  fb90f0f1          SDIV     r0,r0,r1              ;1865
001310  9000              STR      r0,[sp,#0]            ;1869
001312  48ce              LDR      r0,|L5.5708|
001314  49d7              LDR      r1,|L5.5748|
001316  f9b00000          LDRSH    r0,[r0,#0]            ;1869  ; I_ug_temp
00131a  f9b11000          LDRSH    r1,[r1,#0]            ;1870  ; I_MAX_IPS
00131e  ebc02040          RSB      r0,r0,r0,LSL #9       ;1869
001322  0040              LSLS     r0,r0,#1              ;1869
001324  fb90f0f1          SDIV     r0,r0,r1              ;1870
001328  4680              MOV      r8,r0                 ;1870
00132a  20ac              MOVS     r0,#0xac              ;1872
00132c  f7fffffe          BL       lc640_read_int
001330  f5a0412b          SUB      r1,r0,#0xab00         ;1872
001334  39cd              SUBS     r1,r1,#0xcd           ;1872
001336  d107              BNE      |L5.4936|
001338  48cb              LDR      r0,|L5.5736|
00133a  f9b00000          LDRSH    r0,[r0,#0]            ;1874  ; U_maxg
00133e  f7fffffe          BL       find_U_curve
001342  eb000080          ADD      r0,r0,r0,LSL #2       ;1874
001346  9000              STR      r0,[sp,#0]            ;1874
                  |L5.4936|
001348  20ae              MOVS     r0,#0xae              ;1877
00134a  f7fffffe          BL       lc640_read_int
00134e  f5a0412b          SUB      r1,r0,#0xab00         ;1877
001352  39cd              SUBS     r1,r1,#0xcd           ;1877
001354  d107              BNE      |L5.4966|
001356  48bd              LDR      r0,|L5.5708|
001358  f9b00000          LDRSH    r0,[r0,#0]            ;1879  ; I_ug_temp
00135c  f7fffffe          BL       find_I_curve
001360  eb000080          ADD      r0,r0,r0,LSL #2       ;1879
001364  4680              MOV      r8,r0                 ;1879
                  |L5.4966|
001366  2000              MOVS     r0,#0                 ;1882
001368  f9b7c000          LDRSH    r12,[r7,#0]           ;1474
00136c  e03c              B        |L5.5096|
                  |L5.4974|
00136e  49b8              LDR      r1,|L5.5712|
001370  8809              LDRH     r1,[r1,#0]            ;1884  ; REV_IS_ON
001372  b141              CBZ      r1,|L5.4998|
001374  49b7              LDR      r1,|L5.5716|
001376  8809              LDRH     r1,[r1,#0]            ;1884  ; AVT_REV_IS_ON
001378  b129              CBZ      r1,|L5.4998|
00137a  49b7              LDR      r1,|L5.5720|
00137c  7809              LDRB     r1,[r1,#0]            ;1884  ; proc_phase
00137e  2901              CMP      r1,#1                 ;1884
001380  d010              BEQ      |L5.5028|
001382  2903              CMP      r1,#3                 ;1884
001384  d00e              BEQ      |L5.5028|
                  |L5.4998|
001386  9900              LDR      r1,[sp,#0]            ;1889
001388  b20a              SXTH     r2,r1                 ;1889
00138a  f9ba1000          LDRSH    r1,[r10,#0]           ;1889  ; _xu_
00138e  1852              ADDS     r2,r2,r1              ;1889
001390  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1889
001394  eb010141          ADD      r1,r1,r1,LSL #1       ;1889
001398  eb040181          ADD      r1,r4,r1,LSL #2       ;1889
00139c  62ca              STR      r2,[r1,#0x2c]         ;1890
00139e  d50c              BPL      |L5.5050|
0013a0  62cd              STR      r5,[r1,#0x2c]         ;1890
0013a2  e00f              B        |L5.5060|
                  |L5.5028|
0013a4  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1885
0013a8  eb010141          ADD      r1,r1,r1,LSL #1       ;1885
0013ac  eb040181          ADD      r1,r4,r1,LSL #2       ;1885
0013b0  62cd              STR      r5,[r1,#0x2c]         ;1886
0013b2  630d              STR      r5,[r1,#0x30]         ;1887
0013b4  f8819028          STRB     r9,[r1,#0x28]         ;1887
0013b8  e014              B        |L5.5092|
                  |L5.5050|
0013ba  f24033fe          MOV      r3,#0x3fe             ;1891
0013be  429a              CMP      r2,r3                 ;1891
0013c0  dd00              BLE      |L5.5060|
0013c2  62cb              STR      r3,[r1,#0x2c]         ;1891
                  |L5.5060|
0013c4  f9bb2000          LDRSH    r2,[r11,#0]           ;1892  ; _x_
0013c8  fa0ff388          SXTH     r3,r8                 ;1892
0013cc  189a              ADDS     r2,r3,r2              ;1892
0013ce  630a              STR      r2,[r1,#0x30]         ;1893
0013d0  d501              BPL      |L5.5078|
0013d2  630d              STR      r5,[r1,#0x30]         ;1893
0013d4  e004              B        |L5.5088|
                  |L5.5078|
0013d6  f24033fe          MOV      r3,#0x3fe             ;1894
0013da  429a              CMP      r2,r3                 ;1894
0013dc  dd00              BLE      |L5.5088|
0013de  630b              STR      r3,[r1,#0x30]         ;1894
                  |L5.5088|
0013e0  f8815028          STRB     r5,[r1,#0x28]         ;1895
                  |L5.5092|
0013e4  1c40              ADDS     r0,r0,#1              ;1882
0013e6  b2c0              UXTB     r0,r0                 ;1882
                  |L5.5096|
0013e8  4560              CMP      r0,r12                ;1882
0013ea  dbc0              BLT      |L5.4974|
                  |L5.5100|
0013ec  e1f0              B        |L5.6096|
                  |L5.5102|
0013ee  4ba2              LDR      r3,|L5.5752|
0013f0  f9b30000          LDRSH    r0,[r3,#0]            ;1906  ; load_U_
0013f4  2805              CMP      r0,#5                 ;1906
0013f6  dd02              BLE      |L5.5118|
0013f8  f8869009          STRB     r9,[r6,#9]            ;1906
0013fc  e000              B        |L5.5120|
                  |L5.5118|
0013fe  7275              STRB     r5,[r6,#9]            ;1907
                  |L5.5120|
001400  f8dfc278          LDR      r12,|L5.5756|
001404  2264              MOVS     r2,#0x64              ;1909
001406  f9bc1000          LDRSH    r1,[r12,#0]           ;1909  ; U_up_temp
00140a  fb91f2f2          SDIV     r2,r1,r2              ;1909
00140e  9200              STR      r2,[sp,#0]            ;1910
001410  2a00              CMP      r2,#0                 ;1910
001412  dc01              BGT      |L5.5144|
001414  2201              MOVS     r2,#1                 ;1910
001416  9200              STR      r2,[sp,#0]            ;1910
                  |L5.5144|
001418  1a40              SUBS     r0,r0,r1              ;1911
00141a  b200              SXTH     r0,r0                 ;1911
00141c  f7fffffe          BL       abs
001420  9900              LDR      r1,[sp,#0]            ;1911
001422  b209              SXTH     r1,r1                 ;1911
001424  4288              CMP      r0,r1                 ;1911
001426  da02              BGE      |L5.5166|
001428  f886900a          STRB     r9,[r6,#0xa]          ;1911
00142c  e000              B        |L5.5168|
                  |L5.5166|
00142e  72b5              STRB     r5,[r6,#0xa]          ;1912
                  |L5.5168|
001430  7235              STRB     r5,[r6,#8]            ;1916
001432  7ab0              LDRB     r0,[r6,#0xa]          ;1918  ; bU_VALID_VALID
001434  b178              CBZ      r0,|L5.5206|
001436  7af0              LDRB     r0,[r6,#0xb]          ;1920  ; bPRECESSION_REG
001438  b3b0              CBZ      r0,|L5.5288|
00143a  488f              LDR      r0,|L5.5752|
00143c  72f5              STRB     r5,[r6,#0xb]          ;1922
00143e  f9b01000          LDRSH    r1,[r0,#0]            ;1923  ; load_U_
001442  488e              LDR      r0,|L5.5756|
001444  f9b00000          LDRSH    r0,[r0,#0]            ;1923  ; U_up_temp
001448  4281              CMP      r1,r0                 ;1923
00144a  db29              BLT      |L5.5280|
00144c  dc2e              BGT      |L5.5292|
00144e  e031              B        |L5.5300|
                  |L5.5200|
001450  f8aa1000          STRH     r1,[r10,#0]           ;1924
001454  e02e              B        |L5.5300|
                  |L5.5206|
001456  79b0              LDRB     r0,[r6,#6]            ;1928  ; b1Hz_sh
001458  b330              CBZ      r0,|L5.5288|
00145a  7a70              LDRB     r0,[r6,#9]            ;1928  ; bU_VALID
00145c  b320              CBZ      r0,|L5.5288|
00145e  487f              LDR      r0,|L5.5724|
001460  f9b01000          LDRSH    r1,[r0,#0]            ;1930  ; load_I
001464  4886              LDR      r0,|L5.5760|
001466  f9b00000          LDRSH    r0,[r0,#0]            ;1930  ; I_maxp
00146a  4281              CMP      r1,r0                 ;1930
00146c  da04              BGE      |L5.5240|
00146e  f8bb1000          LDRH     r1,[r11,#0]           ;1930  ; _x_
001472  f1010101          ADD      r1,r1,#1              ;1930
001476  e004              B        |L5.5250|
                  |L5.5240|
001478  dd05              BLE      |L5.5254|
00147a  f8bb1000          LDRH     r1,[r11,#0]           ;1931  ; _x_
00147e  f1a10101          SUB      r1,r1,#1              ;1931
                  |L5.5250|
001482  f8ab1000          STRH     r1,[r11,#0]           ;1931
                  |L5.5254|
001486  2232              MOVS     r2,#0x32              ;1932
001488  4251              RSBS     r1,r2,#0              ;1932
00148a  4875              LDR      r0,|L5.5728|
00148c  f7fffffe          BL       gran
001490  4879              LDR      r0,|L5.5752|
001492  f9b01000          LDRSH    r1,[r0,#0]            ;1934  ; load_U_
001496  4879              LDR      r0,|L5.5756|
001498  f9b00000          LDRSH    r0,[r0,#0]            ;1934  ; U_up_temp
00149c  4281              CMP      r1,r0                 ;1934
00149e  da04              BGE      |L5.5290|
                  |L5.5280|
0014a0  f8ba1000          LDRH     r1,[r10,#0]           ;1934  ; _xu_
0014a4  1c49              ADDS     r1,r1,#1              ;1934
0014a6  e7d3              B        |L5.5200|
                  |L5.5288|
0014a8  e009              B        |L5.5310|
                  |L5.5290|
0014aa  dd03              BLE      |L5.5300|
                  |L5.5292|
0014ac  f8ba1000          LDRH     r1,[r10,#0]           ;1935  ; _xu_
0014b0  1e49              SUBS     r1,r1,#1              ;1935
0014b2  e7cd              B        |L5.5200|
                  |L5.5300|
0014b4  2232              MOVS     r2,#0x32              ;1936
0014b6  4251              RSBS     r1,r2,#0              ;1936
0014b8  486c              LDR      r0,|L5.5740|
0014ba  f7fffffe          BL       gran
                  |L5.5310|
0014be  486f              LDR      r0,|L5.5756|
0014c0  f44f7161          MOV      r1,#0x384             ;1942
0014c4  f9b00000          LDRSH    r0,[r0,#0]            ;1942  ; U_up_temp
0014c8  4348              MULS     r0,r1,r0              ;1942
0014ca  4969              LDR      r1,|L5.5744|
0014cc  f9b11000          LDRSH    r1,[r1,#0]            ;1943  ; U_MAX
0014d0  fb90f0f1          SDIV     r0,r0,r1              ;1943
0014d4  3032              ADDS     r0,r0,#0x32           ;1944
0014d6  9000              STR      r0,[sp,#0]            ;1946
0014d8  20ac              MOVS     r0,#0xac              ;1946
0014da  f7fffffe          BL       lc640_read_int
0014de  f5a0412b          SUB      r1,r0,#0xab00         ;1946
0014e2  39cd              SUBS     r1,r1,#0xcd           ;1946
0014e4  d107              BNE      |L5.5366|
0014e6  4865              LDR      r0,|L5.5756|
0014e8  f9b00000          LDRSH    r0,[r0,#0]            ;1948  ; U_up_temp
0014ec  f7fffffe          BL       find_U_curve
0014f0  eb000080          ADD      r0,r0,r0,LSL #2       ;1948
0014f4  9000              STR      r0,[sp,#0]            ;1948
                  |L5.5366|
0014f6  f8df8188          LDR      r8,|L5.5760|
0014fa  495e              LDR      r1,|L5.5748|
0014fc  f9b80000          LDRSH    r0,[r8,#0]            ;1954  ; I_maxp
001500  f9b11000          LDRSH    r1,[r1,#0]            ;1955  ; I_MAX_IPS
001504  ebc02040          RSB      r0,r0,r0,LSL #9       ;1954
001508  0040              LSLS     r0,r0,#1              ;1954
00150a  fb90f0f1          SDIV     r0,r0,r1              ;1955
00150e  9001              STR      r0,[sp,#4]            ;1957
001510  20ae              MOVS     r0,#0xae              ;1957
001512  f7fffffe          BL       lc640_read_int
001516  f5a0412b          SUB      r1,r0,#0xab00         ;1957
00151a  39cd              SUBS     r1,r1,#0xcd           ;1957
00151c  d106              BNE      |L5.5420|
00151e  f9b80000          LDRSH    r0,[r8,#0]            ;1959  ; I_maxp
001522  f7fffffe          BL       find_I_curve
001526  eb000080          ADD      r0,r0,r0,LSL #2       ;1959
00152a  9001              STR      r0,[sp,#4]            ;1959
                  |L5.5420|
00152c  2000              MOVS     r0,#0                 ;1962
00152e  f9b78000          LDRSH    r8,[r7,#0]            ;1474
001532  e045              B        |L5.5568|
                  |L5.5428|
001534  4946              LDR      r1,|L5.5712|
001536  8809              LDRH     r1,[r1,#0]            ;1964  ; REV_IS_ON
001538  b141              CBZ      r1,|L5.5452|
00153a  4946              LDR      r1,|L5.5716|
00153c  8809              LDRH     r1,[r1,#0]            ;1964  ; AVT_REV_IS_ON
00153e  b129              CBZ      r1,|L5.5452|
001540  4945              LDR      r1,|L5.5720|
001542  7809              LDRB     r1,[r1,#0]            ;1964  ; proc_phase
001544  2901              CMP      r1,#1                 ;1964
001546  d015              BEQ      |L5.5492|
001548  2903              CMP      r1,#3                 ;1964
00154a  d013              BEQ      |L5.5492|
                  |L5.5452|
00154c  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1969
001550  eb010141          ADD      r1,r1,r1,LSL #1       ;1969
001554  eb040c81          ADD      r12,r4,r1,LSL #2      ;1969
001558  9900              LDR      r1,[sp,#0]            ;1969
00155a  f9bc2050          LDRSH    r2,[r12,#0x50]        ;1969
00155e  b20b              SXTH     r3,r1                 ;1969
001560  f9ba1000          LDRSH    r1,[r10,#0]           ;1969  ; _xu_
001564  4419              ADD      r1,r1,r3              ;1969
001566  1851              ADDS     r1,r2,r1              ;1969
001568  f8cc102c          STR      r1,[r12,#0x2c]        ;1970
00156c  d50d              BPL      |L5.5514|
00156e  f8cc502c          STR      r5,[r12,#0x2c]        ;1970
001572  e010              B        |L5.5526|
                  |L5.5492|
001574  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1965
001578  eb010141          ADD      r1,r1,r1,LSL #1       ;1965
00157c  eb040181          ADD      r1,r4,r1,LSL #2       ;1965
001580  62cd              STR      r5,[r1,#0x2c]         ;1966
001582  630d              STR      r5,[r1,#0x30]         ;1967
001584  f8819028          STRB     r9,[r1,#0x28]         ;1967
001588  e018              B        |L5.5564|
                  |L5.5514|
00158a  f24032fe          MOV      r2,#0x3fe             ;1971
00158e  4291              CMP      r1,r2                 ;1971
001590  dd01              BLE      |L5.5526|
001592  f8cc202c          STR      r2,[r12,#0x2c]        ;1971
                  |L5.5526|
001596  9901              LDR      r1,[sp,#4]            ;1972
001598  b20a              SXTH     r2,r1                 ;1972
00159a  f9bb1000          LDRSH    r1,[r11,#0]           ;1972  ; _x_
00159e  1851              ADDS     r1,r2,r1              ;1972
0015a0  f8cc1030          STR      r1,[r12,#0x30]        ;1973
0015a4  d502              BPL      |L5.5548|
0015a6  f8cc5030          STR      r5,[r12,#0x30]        ;1973
0015aa  e005              B        |L5.5560|
                  |L5.5548|
0015ac  f24032fe          MOV      r2,#0x3fe             ;1974
0015b0  4291              CMP      r1,r2                 ;1974
0015b2  dd01              BLE      |L5.5560|
0015b4  f8cc2030          STR      r2,[r12,#0x30]        ;1974
                  |L5.5560|
0015b8  f88c5028          STRB     r5,[r12,#0x28]        ;1975
                  |L5.5564|
0015bc  1c40              ADDS     r0,r0,#1              ;1962
0015be  b2c0              UXTB     r0,r0                 ;1962
                  |L5.5568|
0015c0  4540              CMP      r0,r8                 ;1962
0015c2  dbb7              BLT      |L5.5428|
0015c4  492f              LDR      r1,|L5.5764|
0015c6  9800              LDR      r0,[sp,#0]            ;1987
0015c8  8008              STRH     r0,[r1,#0]            ;1987
0015ca  492f              LDR      r1,|L5.5768|
0015cc  6ae0              LDR      r0,[r4,#0x2c]         ;1988  ; bps
0015ce  8008              STRH     r0,[r1,#0]            ;1988
0015d0  e0fe              B        |L5.6096|
                  |L5.5586|
0015d2  79b0              LDRB     r0,[r6,#6]            ;2000  ; b1Hz_sh
0015d4  b380              CBZ      r0,|L5.5688|
0015d6  482d              LDR      r0,|L5.5772|
0015d8  7800              LDRB     r0,[r0,#0]            ;2001  ; bOFF
0015da  bb68              CBNZ     r0,|L5.5688|
0015dc  482c              LDR      r0,|L5.5776|
0015de  f9b00000          LDRSH    r0,[r0,#0]            ;2002  ; CAP_WRK_CURR
0015e2  eb000180          ADD      r1,r0,r0,LSL #2       ;2002
0015e6  481d              LDR      r0,|L5.5724|
0015e8  f9b00000          LDRSH    r0,[r0,#0]            ;2002  ; load_I
0015ec  ebb00f41          CMP      r0,r1,LSL #1          ;2002
0015f0  da04              BGE      |L5.5628|
0015f2  f8bb1000          LDRH     r1,[r11,#0]           ;2002  ; _x_
0015f6  f1010101          ADD      r1,r1,#1              ;2002
0015fa  e004              B        |L5.5638|
                  |L5.5628|
0015fc  dd05              BLE      |L5.5642|
0015fe  f8bb1000          LDRH     r1,[r11,#0]           ;2003  ; _x_
001602  f1a10101          SUB      r1,r1,#1              ;2003
                  |L5.5638|
001606  f8ab1000          STRH     r1,[r11,#0]           ;2003
                  |L5.5642|
00160a  4642              MOV      r2,r8                 ;2004
00160c  4629              MOV      r1,r5                 ;2004
00160e  4814              LDR      r0,|L5.5728|
001610  f7fffffe          BL       gran
001614  2232              MOVS     r2,#0x32              ;2005
001616  4251              RSBS     r1,r2,#0              ;2005
001618  4811              LDR      r0,|L5.5728|
00161a  f7fffffe          BL       gran
00161e  481d              LDR      r0,|L5.5780|
001620  f9b00000          LDRSH    r0,[r0,#0]            ;2007  ; CAP_MAX_VOLT
001624  eb000180          ADD      r1,r0,r0,LSL #2       ;2007
001628  480e              LDR      r0,|L5.5732|
00162a  f9b00000          LDRSH    r0,[r0,#0]            ;2007  ; load_U
00162e  ebb00f41          CMP      r0,r1,LSL #1          ;2007
001632  da31              BGE      |L5.5784|
001634  e001              B        |L5.5690|
                  |L5.5686|
001636  e0c5              B        |L5.6084|
                  |L5.5688|
001638  e03f              B        |L5.5818|
                  |L5.5690|
00163a  f8ba1000          LDRH     r1,[r10,#0]           ;2007  ; _xu_
00163e  f1010101          ADD      r1,r1,#1              ;2007
001642  e02e              B        |L5.5794|
                  |L5.5700|
                          DCD      CURR_FADE_IN
                  |L5.5704|
                          DCD      time_proc
                  |L5.5708|
                          DCD      I_ug_temp
                  |L5.5712|
                          DCD      REV_IS_ON
                  |L5.5716|
                          DCD      AVT_REV_IS_ON
                  |L5.5720|
                          DCD      proc_phase
                  |L5.5724|
                          DCD      load_I
                  |L5.5728|
                          DCD      _x_
                  |L5.5732|
                          DCD      load_U
                  |L5.5736|
                          DCD      U_maxg
                  |L5.5740|
                          DCD      _xu_
                  |L5.5744|
                          DCD      U_MAX
                  |L5.5748|
                          DCD      I_MAX_IPS
                  |L5.5752|
                          DCD      load_U_
                  |L5.5756|
                          DCD      U_up_temp
                  |L5.5760|
                          DCD      I_maxp
                  |L5.5764|
                          DCD      plazma_vol_u_0
                  |L5.5768|
                          DCD      plazma_vol_u_1
                  |L5.5772|
                          DCD      bOFF
                  |L5.5776|
                          DCD      CAP_WRK_CURR
                  |L5.5780|
                          DCD      CAP_MAX_VOLT
                  |L5.5784|
001698  dd05              BLE      |L5.5798|
00169a  f8ba1000          LDRH     r1,[r10,#0]           ;2008  ; _xu_
00169e  f1a10101          SUB      r1,r1,#1              ;2008
                  |L5.5794|
0016a2  f8aa1000          STRH     r1,[r10,#0]           ;2008
                  |L5.5798|
0016a6  4642              MOV      r2,r8                 ;2009
0016a8  4629              MOV      r1,r5                 ;2009
0016aa  48fe              LDR      r0,|L5.6820|
0016ac  f7fffffe          BL       gran
0016b0  2232              MOVS     r2,#0x32              ;2010
0016b2  4251              RSBS     r1,r2,#0              ;2010
0016b4  48fc              LDR      r0,|L5.6824|
0016b6  f7fffffe          BL       gran
                  |L5.5818|
0016ba  48fc              LDR      r0,|L5.6828|
0016bc  f24271ec          MOV      r1,#0x27ec            ;2015
0016c0  f9b00000          LDRSH    r0,[r0,#0]            ;2015  ; CAP_MAX_VOLT
0016c4  4348              MULS     r0,r1,r0              ;2015
0016c6  49fa              LDR      r1,|L5.6832|
0016c8  f9b11000          LDRSH    r1,[r1,#0]            ;2016  ; U_MAX
0016cc  fb90f0f1          SDIV     r0,r0,r1              ;2016
0016d0  9000              STR      r0,[sp,#0]            ;2020
0016d2  48f8              LDR      r0,|L5.6836|
0016d4  f24271ec          MOV      r1,#0x27ec            ;2020
0016d8  f9b00000          LDRSH    r0,[r0,#0]            ;2020  ; CAP_WRK_CURR
0016dc  4348              MULS     r0,r1,r0              ;2020
0016de  49f6              LDR      r1,|L5.6840|
0016e0  f9b11000          LDRSH    r1,[r1,#0]            ;2021  ; I_MAX_IPS
0016e4  fb90f0f1          SDIV     r0,r0,r1              ;2021
0016e8  9001              STR      r0,[sp,#4]            ;2023
0016ea  20ac              MOVS     r0,#0xac              ;2023
0016ec  f7fffffe          BL       lc640_read_int
0016f0  f5a0412b          SUB      r1,r0,#0xab00         ;2023
0016f4  39cd              SUBS     r1,r1,#0xcd           ;2023
0016f6  d10a              BNE      |L5.5902|
0016f8  48ec              LDR      r0,|L5.6828|
0016fa  8800              LDRH     r0,[r0,#0]            ;2025  ; CAP_MAX_VOLT
0016fc  eb000080          ADD      r0,r0,r0,LSL #2       ;2025
001700  0040              LSLS     r0,r0,#1              ;2025
001702  b200              SXTH     r0,r0                 ;2025
001704  f7fffffe          BL       find_U_curve
001708  eb000080          ADD      r0,r0,r0,LSL #2       ;2025
00170c  9000              STR      r0,[sp,#0]            ;2025
                  |L5.5902|
00170e  20ae              MOVS     r0,#0xae              ;2028
001710  f7fffffe          BL       lc640_read_int
001714  f5a0412b          SUB      r1,r0,#0xab00         ;2028
001718  39cd              SUBS     r1,r1,#0xcd           ;2028
00171a  d10a              BNE      |L5.5938|
00171c  48e5              LDR      r0,|L5.6836|
00171e  8800              LDRH     r0,[r0,#0]            ;2030  ; CAP_WRK_CURR
001720  eb000080          ADD      r0,r0,r0,LSL #2       ;2030
001724  0040              LSLS     r0,r0,#1              ;2030
001726  b200              SXTH     r0,r0                 ;2030
001728  f7fffffe          BL       find_I_curve
00172c  eb000080          ADD      r0,r0,r0,LSL #2       ;2030
001730  9001              STR      r0,[sp,#4]            ;2030
                  |L5.5938|
001732  2000              MOVS     r0,#0                 ;2035
001734  f9b71000          LDRSH    r1,[r7,#0]            ;1474
001738  e035              B        |L5.6054|
                  |L5.5946|
00173a  4ae0              LDR      r2,|L5.6844|
00173c  7812              LDRB     r2,[r2,#0]            ;2037  ; bOFF
00173e  b152              CBZ      r2,|L5.5974|
001740  ebc002c0          RSB      r2,r0,r0,LSL #3       ;2038
001744  eb020242          ADD      r2,r2,r2,LSL #1       ;2038
001748  eb040282          ADD      r2,r4,r2,LSL #2       ;2038
00174c  62d5              STR      r5,[r2,#0x2c]         ;2039
00174e  6315              STR      r5,[r2,#0x30]         ;2040
001750  f8829028          STRB     r9,[r2,#0x28]         ;2040
001754  e025              B        |L5.6050|
                  |L5.5974|
001756  9a00              LDR      r2,[sp,#0]            ;2042
001758  b213              SXTH     r3,r2                 ;2042
00175a  f9ba2000          LDRSH    r2,[r10,#0]           ;2042  ; _xu_
00175e  189a              ADDS     r2,r3,r2              ;2042
001760  ebc003c0          RSB      r3,r0,r0,LSL #3       ;2042
001764  eb030343          ADD      r3,r3,r3,LSL #1       ;2042
001768  eb040c83          ADD      r12,r4,r3,LSL #2      ;2042
00176c  f8cc202c          STR      r2,[r12,#0x2c]        ;2043
001770  d502              BPL      |L5.6008|
001772  f8cc502c          STR      r5,[r12,#0x2c]        ;2043
001776  e003              B        |L5.6016|
                  |L5.6008|
001778  4542              CMP      r2,r8                 ;2044
00177a  dd01              BLE      |L5.6016|
00177c  f8cc802c          STR      r8,[r12,#0x2c]        ;2044
                  |L5.6016|
001780  9a01              LDR      r2,[sp,#4]            ;2045
001782  b213              SXTH     r3,r2                 ;2045
001784  f9bb2000          LDRSH    r2,[r11,#0]           ;2045  ; _x_
001788  189a              ADDS     r2,r3,r2              ;2045
00178a  f8cc2030          STR      r2,[r12,#0x30]        ;2046
00178e  d502              BPL      |L5.6038|
001790  f8cc5030          STR      r5,[r12,#0x30]        ;2046
001794  e003              B        |L5.6046|
                  |L5.6038|
001796  4542              CMP      r2,r8                 ;2047
001798  dd01              BLE      |L5.6046|
00179a  f8cc8030          STR      r8,[r12,#0x30]        ;2047
                  |L5.6046|
00179e  f88c5028          STRB     r5,[r12,#0x28]        ;2048
                  |L5.6050|
0017a2  1c40              ADDS     r0,r0,#1              ;2035
0017a4  b2c0              UXTB     r0,r0                 ;2035
                  |L5.6054|
0017a6  4288              CMP      r0,r1                 ;2035
0017a8  dbc7              BLT      |L5.5946|
0017aa  e011              B        |L5.6096|
                  |L5.6060|
;;;2058   		{
;;;2059   		bps[i]._vol_u=0;
0017ac  ebc002c0          RSB      r2,r0,r0,LSL #3
0017b0  eb020242          ADD      r2,r2,r2,LSL #1
0017b4  eb040282          ADD      r2,r4,r2,LSL #2
0017b8  1c40              ADDS     r0,r0,#1              ;2057
;;;2060   		bps[i]._vol_i=0;
0017ba  62d5              STR      r5,[r2,#0x2c]
;;;2061   		bps[i]._flags_tu=1;
0017bc  6315              STR      r5,[r2,#0x30]
0017be  f8823028          STRB     r3,[r2,#0x28]
0017c2  b2c0              UXTB     r0,r0                 ;2057
                  |L5.6084|
0017c4  4288              CMP      r0,r1                 ;2057
0017c6  dbf1              BLT      |L5.6060|
;;;2062   		}
;;;2063   	_x_=0;
0017c8  f8ab5000          STRH     r5,[r11,#0]
;;;2064   	_xu_=0;
0017cc  f8aa5000          STRH     r5,[r10,#0]
                  |L5.6096|
;;;2065   	}
;;;2066   
;;;2067   //gran(&bps[0]._vol_u,10,1010);
;;;2068   //gran(&bps[0]._vol_i,10,1010);
;;;2069   
;;;2070   if(pwm_t_reg)
0017d0  49bb              LDR      r1,|L5.6848|
0017d2  f9b10000          LDRSH    r0,[r1,#0]  ; pwm_t_reg
0017d6  b1e8              CBZ      r0,|L5.6164|
;;;2071   	{
;;;2072   	if(--pwm_t_reg==0)
0017d8  1e40              SUBS     r0,r0,#1
0017da  b200              SXTH     r0,r0
0017dc  8008              STRH     r0,[r1,#0]
;;;2073   		{
;;;2074   		pwm_u_reg=0;
0017de  4ab9              LDR      r2,|L5.6852|
;;;2075   		pwm_i_reg=0;
0017e0  49b9              LDR      r1,|L5.6856|
0017e2  b908              CBNZ     r0,|L5.6120|
0017e4  8015              STRH     r5,[r2,#0]            ;2074
0017e6  800d              STRH     r5,[r1,#0]
                  |L5.6120|
;;;2076   		}
;;;2077   	for(i=0;i<NUMIST;i++) 
0017e8  f9b1c000          LDRSH    r12,[r1,#0]
0017ec  2000              MOVS     r0,#0
0017ee  f9b22000          LDRSH    r2,[r2,#0]
0017f2  f9b71000          LDRSH    r1,[r7,#0]            ;1474
0017f6  e00b              B        |L5.6160|
                  |L5.6136|
;;;2078   		{
;;;2079   		bps[i]._vol_u=pwm_u_reg;
0017f8  ebc003c0          RSB      r3,r0,r0,LSL #3
0017fc  eb030343          ADD      r3,r3,r3,LSL #1
001800  eb040383          ADD      r3,r4,r3,LSL #2
001804  1c40              ADDS     r0,r0,#1              ;2077
001806  e9c32c0b          STRD     r2,r12,[r3,#0x2c]
;;;2080   		bps[i]._vol_i=pwm_i_reg;
;;;2081   		bps[i]._flags_tu=0;
00180a  f8835028          STRB     r5,[r3,#0x28]
00180e  b2c0              UXTB     r0,r0                 ;2077
                  |L5.6160|
001810  4288              CMP      r0,r1                 ;2077
001812  dbf1              BLT      |L5.6136|
                  |L5.6164|
;;;2082   		}
;;;2083   	}
;;;2084   
;;;2085   
;;;2086   for(i=0;i<NUMIST;i++) 
001814  2000              MOVS     r0,#0
001816  464b              MOV      r3,r9                 ;1426
001818  f9b71000          LDRSH    r1,[r7,#0]            ;1474
00181c  e010              B        |L5.6208|
;;;2087   	{
;;;2088   	if(bps[i]._av&0x8f)
00181e  bf00              NOP      
                  |L5.6176|
001820  ebc002c0          RSB      r2,r0,r0,LSL #3
001824  eb020242          ADD      r2,r2,r2,LSL #1
001828  eb040282          ADD      r2,r4,r2,LSL #2
00182c  7857              LDRB     r7,[r2,#1]
00182e  f0170f8f          TST      r7,#0x8f
001832  d003              BEQ      |L5.6204|
;;;2089   		{
;;;2090   		bps[i]._vol_u=0;
;;;2091   		bps[i]._vol_i=0;
001834  62d5              STR      r5,[r2,#0x2c]
;;;2092   		bps[i]._flags_tu=1;
001836  6315              STR      r5,[r2,#0x30]
001838  f8823028          STRB     r3,[r2,#0x28]
                  |L5.6204|
00183c  1c40              ADDS     r0,r0,#1              ;2086
00183e  b2c0              UXTB     r0,r0                 ;2086
                  |L5.6208|
001840  4288              CMP      r0,r1                 ;2086
001842  dbed              BLT      |L5.6176|
;;;2093   		}
;;;2094   	}
;;;2095   
;;;2096   b1Hz_sh=0;
001844  71b5              STRB     r5,[r6,#6]
;;;2097   }
001846  e8bd9ffc          POP      {r2-r12,pc}
;;;2098   
                          ENDP

                  bps_drv PROC
;;;2107   //-----------------------------------------------
;;;2108   void bps_drv(char in)
00184a  ebc000c0          RSB      r0,r0,r0,LSL #3
;;;2109   {
;;;2110   char temp;
;;;2111   
;;;2112   if (bps[in]._device!=dSRC) return;
00184e  499f              LDR      r1,|L5.6860|
001850  b510              PUSH     {r4,lr}               ;2109
001852  eb000040          ADD      r0,r0,r0,LSL #1
001856  f8112020          LDRB     r2,[r1,r0,LSL #2]
00185a  2a03              CMP      r2,#3
00185c  d17d              BNE      |L5.6490|
;;;2113   temp=bps[in]._flags_tm;
00185e  eb010080          ADD      r0,r1,r0,LSL #2
001862  f890103e          LDRB     r1,[r0,#0x3e]
;;;2114   if(temp&(1<<AV_T))
001866  078a              LSLS     r2,r1,#30
;;;2115   	{
;;;2116   	if(bps[in]._temp_av_cnt<1200) 
;;;2117   		{
;;;2118   		bps[in]._temp_av_cnt++;
;;;2119   		if(bps[in]._temp_av_cnt>=1200)
;;;2120   			{
;;;2121   			bps[in]._temp_av_cnt=1200;
;;;2122   		   	//if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
;;;2123   			}
;;;2124   		}
;;;2125   	}
;;;2126   
;;;2127   else if(!(temp&(1<<AV_T)))
;;;2128   	{
;;;2129   	if(bps[in]._temp_av_cnt) 
001868  f9b02042          LDRSH    r2,[r0,#0x42]
00186c  d50c              BPL      |L5.6280|
00186e  f44f6396          MOV      r3,#0x4b0             ;2116
001872  429a              CMP      r2,r3                 ;2116
001874  da0d              BGE      |L5.6290|
001876  1c52              ADDS     r2,r2,#1              ;2118
001878  b212              SXTH     r2,r2                 ;2118
00187a  f8a02042          STRH     r2,[r0,#0x42]         ;2118
00187e  429a              CMP      r2,r3                 ;2119
001880  db07              BLT      |L5.6290|
001882  f8a03042          STRH     r3,[r0,#0x42]         ;2121
001886  e004              B        |L5.6290|
                  |L5.6280|
001888  b11a              CBZ      r2,|L5.6290|
;;;2130   		{
;;;2131   		bps[in]._temp_av_cnt--;
00188a  f1a20201          SUB      r2,r2,#1
00188e  f8a02042          STRH     r2,[r0,#0x42]
                  |L5.6290|
;;;2132   		if(!bps[in]._temp_av_cnt)
;;;2133   			{
;;;2134   			//if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
;;;2135   			}
;;;2136   		} 	
;;;2137   
;;;2138   	}
;;;2139   
;;;2140   if((temp&(1<<AVUMAX)))
001892  070a              LSLS     r2,r1,#28
;;;2141   	{
;;;2142   	if(bps[in]._umax_av_cnt<10) 
;;;2143   		{
;;;2144   		bps[in]._umax_av_cnt++;
;;;2145   		if(bps[in]._umax_av_cnt>=10)
;;;2146   			{ 
;;;2147   			bps[in]._umax_av_cnt=10;
;;;2148   			//if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
;;;2149   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;2150   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2151   				{
;;;2152   				apv_cnt[in,0]=APV_INIT;
;;;2153   				apv_cnt[in,1]=APV_INIT;
;;;2154   				apv_cnt[in,2]=APV_INIT;
;;;2155   				apv_flags[in]=afOFF;
;;;2156   				}				*/
;;;2157   						
;;;2158   			}
;;;2159   		} 
;;;2160   	}		
;;;2161   else if(!(temp&(1<<AVUMAX)))
;;;2162   	{
;;;2163   	if(bps[in]._umax_av_cnt>0) 
001894  f9b02044          LDRSH    r2,[r0,#0x44]
001898  f04f030a          MOV      r3,#0xa               ;2147
00189c  f04f0400          MOV      r4,#0                 ;2116
0018a0  d50a              BPL      |L5.6328|
0018a2  2a0a              CMP      r2,#0xa               ;2142
0018a4  da13              BGE      |L5.6350|
0018a6  1c52              ADDS     r2,r2,#1              ;2144
0018a8  b212              SXTH     r2,r2                 ;2144
0018aa  f8a02044          STRH     r2,[r0,#0x44]         ;2144
0018ae  2a0a              CMP      r2,#0xa               ;2145
0018b0  db0d              BLT      |L5.6350|
0018b2  f8a03044          STRH     r3,[r0,#0x44]         ;2147
0018b6  e00a              B        |L5.6350|
                  |L5.6328|
0018b8  2a00              CMP      r2,#0
0018ba  dd05              BLE      |L5.6344|
;;;2164   		{
;;;2165   		bps[in]._umax_av_cnt--;
0018bc  f1a20201          SUB      r2,r2,#1
0018c0  b212              SXTH     r2,r2
0018c2  f8a02044          STRH     r2,[r0,#0x44]
;;;2166   		if(bps[in]._umax_av_cnt==0)
0018c6  e002              B        |L5.6350|
                  |L5.6344|
;;;2167   			{
;;;2168   			bps[in]._umax_av_cnt=0;
;;;2169   			//avar_bps_hndl(in,1,0);
;;;2170   	 //		apv_cnt[in,0]=0;
;;;2171   	//		apv_cnt[in,1]=0;
;;;2172   	 //		apv_cnt[in,2]=0;			
;;;2173   			}
;;;2174   		}
;;;2175   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
0018c8  da01              BGE      |L5.6350|
0018ca  f8a04044          STRH     r4,[r0,#0x44]
                  |L5.6350|
;;;2176   	}
;;;2177   
;;;2178   if(temp&(1<<AVUMIN))
0018ce  06ca              LSLS     r2,r1,#27
;;;2179   	{
;;;2180   	if(bps[in]._umin_av_cnt<10) 
;;;2181   		{
;;;2182   		bps[in]._umin_av_cnt++;
;;;2183   		if(bps[in]._umin_av_cnt>=10)
;;;2184   			{ 
;;;2185   			bps[in]._umin_av_cnt=10;
;;;2186   			//if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
;;;2187   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;2188   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2189   				{
;;;2190   				apv_cnt[in,0]=APV_INIT;
;;;2191   				apv_cnt[in,1]=APV_INIT;
;;;2192   				apv_cnt[in,2]=APV_INIT;
;;;2193   				apv_flags[in]=afOFF;
;;;2194   				}*/				
;;;2195   			}
;;;2196   		} 
;;;2197   	}	
;;;2198   	
;;;2199   else if(!(temp&(1<<AVUMIN)))
;;;2200   	{
;;;2201   	if(bps[in]._umin_av_cnt) 
0018d0  f9b02046          LDRSH    r2,[r0,#0x46]
0018d4  d50a              BPL      |L5.6380|
0018d6  2a0a              CMP      r2,#0xa               ;2180
0018d8  da0d              BGE      |L5.6390|
0018da  1c52              ADDS     r2,r2,#1              ;2182
0018dc  b212              SXTH     r2,r2                 ;2182
0018de  f8a02046          STRH     r2,[r0,#0x46]         ;2182
0018e2  2a0a              CMP      r2,#0xa               ;2183
0018e4  db07              BLT      |L5.6390|
0018e6  f8a03046          STRH     r3,[r0,#0x46]         ;2185
0018ea  e004              B        |L5.6390|
                  |L5.6380|
0018ec  b11a              CBZ      r2,|L5.6390|
;;;2202   		{
;;;2203   		bps[in]._umin_av_cnt--;
0018ee  1e52              SUBS     r2,r2,#1
0018f0  b212              SXTH     r2,r2
0018f2  f8a02046          STRH     r2,[r0,#0x46]
                  |L5.6390|
;;;2204   		if(bps[in]._umin_av_cnt==0)
;;;2205   			{
;;;2206   			bps[in]._umin_av_cnt=0;
;;;2207   		//	avar_bps_hndl(in,2,0);
;;;2208   		//	apv_cnt[in,0]=0;
;;;2209   		//	apv_cnt[in,1]=0;
;;;2210   		//	apv_cnt[in,2]=0;
;;;2211   			}
;;;2212   		}
;;;2213   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;2214   	}
;;;2215   
;;;2216   //bps[in]._state=bsOFF;
;;;2217   
;;;2218   
;;;2219   if(((work_stat==wsGS) || (work_stat==wsPS))&&(UOUT_OFF_EN))
0018f6  4a76              LDR      r2,|L5.6864|
0018f8  7813              LDRB     r3,[r2,#0]  ; work_stat
0018fa  2b01              CMP      r3,#1
0018fc  d001              BEQ      |L5.6402|
0018fe  2b02              CMP      r3,#2
001900  d135              BNE      |L5.6510|
                  |L5.6402|
001902  4a74              LDR      r2,|L5.6868|
001904  8812              LDRH     r2,[r2,#0]  ; UOUT_OFF_EN
001906  b34a              CBZ      r2,|L5.6492|
;;;2220   	{
;;;2221   	short tempU;
;;;2222   	long tempL;
;;;2223   
;;;2224   	tempU= U_maxg;
001908  4a73              LDR      r2,|L5.6872|
;;;2225   	if(work_stat==wsPS)tempU= U_up_temp;
00190a  2b02              CMP      r3,#2
00190c  f9b22000          LDRSH    r2,[r2,#0]            ;2224  ; U_maxg
001910  d102              BNE      |L5.6424|
001912  4a72              LDR      r2,|L5.6876|
001914  f9b22000          LDRSH    r2,[r2,#0]  ; U_up_temp
                  |L5.6424|
;;;2226   
;;;2227   	tempL=((long)tempU)*((long)(100+UOUT_OFF_LEVEL));
001918  4b71              LDR      r3,|L5.6880|
00191a  f9b33000          LDRSH    r3,[r3,#0]  ; UOUT_OFF_LEVEL
00191e  3364              ADDS     r3,r3,#0x64
001920  435a              MULS     r2,r3,r2
;;;2228   	tempL/=100L;
001922  2364              MOVS     r3,#0x64
001924  fb92f2f3          SDIV     r2,r2,r3
;;;2229   
;;;2230   	tempU=(short)tempL;
;;;2231   	plazma_umax=tempU;
001928  4b6e              LDR      r3,|L5.6884|
00192a  b212              SXTH     r2,r2                 ;2230
00192c  801a              STRH     r2,[r3,#0]
;;;2232   
;;;2233   	if(bps[in]._Uii>tempU)
00192e  6983              LDR      r3,[r0,#0x18]
001930  4293              CMP      r3,r2
;;;2234   		{
;;;2235   		if(bps[in]._uout_avar_cnt<(UOUT_OFF_DELAY*10))
;;;2236   			{
;;;2237   			bps[in]._uout_avar_cnt++;
;;;2238   			if(bps[in]._uout_avar_cnt>=(UOUT_OFF_DELAY*10))
;;;2239   				{
;;;2240   				bps[in]._av|=0x80;
;;;2241   				}
;;;2242   			}
;;;2243   		}
;;;2244   	else 
;;;2245   		{
;;;2246   		if(bps[in]._uout_avar_cnt) bps[in]._uout_avar_cnt--;
001932  f8902052          LDRB     r2,[r0,#0x52]
001936  dd16              BLE      |L5.6502|
001938  4b6b              LDR      r3,|L5.6888|
00193a  f9b33000          LDRSH    r3,[r3,#0]            ;2235  ; UOUT_OFF_DELAY
00193e  eb030383          ADD      r3,r3,r3,LSL #2       ;2235
001942  ebb20f43          CMP      r2,r3,LSL #1          ;2235
001946  da12              BGE      |L5.6510|
001948  1c52              ADDS     r2,r2,#1              ;2237
00194a  b2d2              UXTB     r2,r2                 ;2237
00194c  f8802052          STRB     r2,[r0,#0x52]         ;2237
001950  ebb20f43          CMP      r2,r3,LSL #1          ;2238
001954  db0b              BLT      |L5.6510|
001956  7842              LDRB     r2,[r0,#1]            ;2240
001958  e001              B        |L5.6494|
                  |L5.6490|
00195a  e032              B        |L5.6594|
                  |L5.6492|
00195c  e007              B        |L5.6510|
                  |L5.6494|
00195e  f0420280          ORR      r2,r2,#0x80           ;2240
001962  7042              STRB     r2,[r0,#1]            ;2240
001964  e003              B        |L5.6510|
                  |L5.6502|
001966  b112              CBZ      r2,|L5.6510|
001968  1e52              SUBS     r2,r2,#1
00196a  f8802052          STRB     r2,[r0,#0x52]
                  |L5.6510|
;;;2247   		}
;;;2248   
;;;2249   
;;;2250   
;;;2251   
;;;2252   
;;;2253   	}
;;;2254   
;;;2255   
;;;2256   
;;;2257   if (bps[in]._av&0x8f)					bps[in]._state=bsAV;
00196e  7842              LDRB     r2,[r0,#1]
001970  f0120f8f          TST      r2,#0x8f
001974  d001              BEQ      |L5.6522|
001976  2104              MOVS     r1,#4
001978  e00f              B        |L5.6554|
                  |L5.6522|
;;;2258   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
00197a  4a5c              LDR      r2,|L5.6892|
00197c  7812              LDRB     r2,[r2,#0]  ; net_av
00197e  b122              CBZ      r2,|L5.6538|
001980  78c2              LDRB     r2,[r0,#3]
001982  2a14              CMP      r2,#0x14
001984  d901              BLS      |L5.6538|
;;;2259   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
001986  2105              MOVS     r1,#5
001988  e007              B        |L5.6554|
                  |L5.6538|
;;;2260   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
00198a  0689              LSLS     r1,r1,#26
00198c  d501              BPL      |L5.6546|
00198e  2102              MOVS     r1,#2
001990  e003              B        |L5.6554|
                  |L5.6546|
;;;2261   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
001992  78c1              LDRB     r1,[r0,#3]
001994  2914              CMP      r1,#0x14
001996  d201              BCS      |L5.6556|
001998  2101              MOVS     r1,#1
                  |L5.6554|
00199a  7081              STRB     r1,[r0,#2]
                  |L5.6556|
;;;2262   
;;;2263   
;;;2264   
;;;2265   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;2266   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;2267   //else bps[0]._state=ssNOT;
;;;2268   
;;;2269   //bps[in]._is_ready=0;
;;;2270   //bps[in]._is_wrk=0;
;;;2271   //if(bps[in]._av_net) bps[in]._flags_bp='N';// не подключен
;;;2272   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// завышено напряжение(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;2273   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// занижено напряжение
;;;2274   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// температура
;;;2275   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;2276   //	{
;;;2277   //	bps[in]._flags_bp='B';// заблокирован
;;;2278   //	bps[in]._is_ready=1;
;;;2279   //	}
;;;2280   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;2281   //     {
;;;2282   //     bps[in]._flags_bp='W';// работает
;;;2283   //     bps[in]._is_ready=1;
;;;2284   //     bps[in]._is_wrk=1;
;;;2285        
;;;2286   //     }
;;;2287   //else bps[in]._is_ready=1;     
;;;2288   
;;;2289   
;;;2290   
;;;2291   
;;;2292   
;;;2293   /*
;;;2294   bps[in]._flags_tu&=BIN8(11111110);
;;;2295   if(bps[in]._ist_blok_cnt)
;;;2296   	{
;;;2297   	bps[in]._ist_blok_cnt--;
;;;2298   	bps[in]._flags_tu|=BIN8(1);
;;;2299   	}
;;;2300   
;;;2301   	   */ 
;;;2302   
;;;2303   //Пересброс БПСа при потере связи
;;;2304   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
00199c  78c1              LDRB     r1,[r0,#3]
00199e  290a              CMP      r1,#0xa
;;;2305   else bps[in]._flags_tu&=BIN8(1111111);
0019a0  f8901028          LDRB     r1,[r0,#0x28]
0019a4  d302              BCC      |L5.6572|
0019a6  f0410180          ORR      r1,r1,#0x80           ;2304
0019aa  e001              B        |L5.6576|
                  |L5.6572|
0019ac  f001017f          AND      r1,r1,#0x7f
                  |L5.6576|
0019b0  f8801028          STRB     r1,[r0,#0x28]
;;;2306   	
;;;2307   bps[in]._vol_u=cntrl_stat_U;	
0019b4  494e              LDR      r1,|L5.6896|
0019b6  f9b12014          LDRSH    r2,[r1,#0x14]  ; cntrl_stat_U
;;;2308   bps[in]._vol_i=cntrl_stat_I;
0019ba  62c2              STR      r2,[r0,#0x2c]
0019bc  f9b11016          LDRSH    r1,[r1,#0x16]  ; cntrl_stat_I
0019c0  6301              STR      r1,[r0,#0x30]
                  |L5.6594|
;;;2309    
;;;2310   }
0019c2  bd10              POP      {r4,pc}
;;;2311   
                          ENDP

                  volt_contr_hndl PROC
;;;2324   //-----------------------------------------------
;;;2325   void volt_contr_hndl(void)
0019c4  e92d47f0          PUSH     {r4-r10,lr}
;;;2326   {
;;;2327   if(work_stat==wsOFF)
0019c8  4841              LDR      r0,|L5.6864|
;;;2328   	{
;;;2329   	cnt_volt_contr=0;
;;;2330   	}
;;;2331   else 
;;;2332   	{
;;;2333   	if(cnt_volt_contr<(T_DEL_REL_VOLT_START*10))
0019ca  4e4a              LDR      r6,|L5.6900|
0019cc  4c48              LDR      r4,|L5.6896|
0019ce  7800              LDRB     r0,[r0,#0]            ;2327  ; work_stat
0019d0  2500              MOVS     r5,#0                 ;2327
0019d2  b310              CBZ      r0,|L5.6682|
0019d4  f9b60000          LDRSH    r0,[r6,#0]  ; T_DEL_REL_VOLT_START
0019d8  eb000180          ADD      r1,r0,r0,LSL #2
0019dc  f9b40028          LDRSH    r0,[r4,#0x28]  ; cnt_volt_contr
0019e0  ebb00f41          CMP      r0,r1,LSL #1
0019e4  da01              BGE      |L5.6634|
;;;2334   		{
;;;2335   		cnt_volt_contr++;
0019e6  1c40              ADDS     r0,r0,#1
0019e8  8520              STRH     r0,[r4,#0x28]
                  |L5.6634|
;;;2336   		}
;;;2337   	}
;;;2338   
;;;2339   	
;;;2340   	if(load_U>REL_VOLT_UMIN*10)
0019ea  4843              LDR      r0,|L5.6904|
0019ec  f8df810c          LDR      r8,|L5.6908|
;;;2341   		{
;;;2342   		cnt_rel_volt_umin++;
;;;2343   		gran(&cnt_rel_volt_umin,0,30000);
0019f0  f2475a30          MOV      r10,#0x7530
0019f4  f9b00000          LDRSH    r0,[r0,#0]            ;2340  ; REL_VOLT_UMIN
0019f8  eb000180          ADD      r1,r0,r0,LSL #2       ;2340
0019fc  f9b80000          LDRSH    r0,[r8,#0]            ;2340  ; load_U
001a00  ebb00f41          CMP      r0,r1,LSL #1          ;2340
001a04  dd0b              BLE      |L5.6686|
001a06  8d60              LDRH     r0,[r4,#0x2a]         ;2342  ; cnt_rel_volt_umin
001a08  4652              MOV      r2,r10
001a0a  1c40              ADDS     r0,r0,#1              ;2342
001a0c  8560              STRH     r0,[r4,#0x2a]         ;2342
001a0e  4838              LDR      r0,|L5.6896|
001a10  2100              MOVS     r1,#0
001a12  302a              ADDS     r0,r0,#0x2a
001a14  f7fffffe          BL       gran
001a18  e002              B        |L5.6688|
                  |L5.6682|
001a1a  8525              STRH     r5,[r4,#0x28]         ;2329
001a1c  e7e5              B        |L5.6634|
                  |L5.6686|
;;;2344   		}
;;;2345   	else cnt_rel_volt_umin=0;
001a1e  8565              STRH     r5,[r4,#0x2a]
                  |L5.6688|
;;;2346   	if((cnt_rel_volt_umin>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_DOWN=1;
001a20  f8df90dc          LDR      r9,|L5.6912|
001a24  2701              MOVS     r7,#1
001a26  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
001a2a  eb000180          ADD      r1,r0,r0,LSL #2
001a2e  f9b4002a          LDRSH    r0,[r4,#0x2a]  ; cnt_rel_volt_umin
001a32  ebb00f41          CMP      r0,r1,LSL #1
001a36  db0a              BLT      |L5.6734|
001a38  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
001a3c  f9b42028          LDRSH    r2,[r4,#0x28]  ; cnt_volt_contr
001a40  eb010181          ADD      r1,r1,r1,LSL #2
001a44  ebb20f41          CMP      r2,r1,LSL #1
001a48  db01              BLT      |L5.6734|
001a4a  7327              STRB     r7,[r4,#0xc]
001a4c  e001              B        |L5.6738|
                  |L5.6734|
;;;2347   	else if(cnt_rel_volt_umin==0)							  							bVOLT_IS_NOT_DOWN=0;
001a4e  b900              CBNZ     r0,|L5.6738|
001a50  7325              STRB     r5,[r4,#0xc]
                  |L5.6738|
;;;2348   
;;;2349   	if(load_U<REL_VOLT_UMAX*10)
001a52  482c              LDR      r0,|L5.6916|
001a54  f9b00000          LDRSH    r0,[r0,#0]  ; REL_VOLT_UMAX
001a58  eb000180          ADD      r1,r0,r0,LSL #2
001a5c  f9b80000          LDRSH    r0,[r8,#0]  ; load_U
001a60  ebb00f41          CMP      r0,r1,LSL #1
001a64  da09              BGE      |L5.6778|
;;;2350   		{
;;;2351   		cnt_rel_volt_umax++;
001a66  8da0              LDRH     r0,[r4,#0x2c]  ; cnt_rel_volt_umax
;;;2352   		gran(&cnt_rel_volt_umax,0,30000);
001a68  4652              MOV      r2,r10
001a6a  1c40              ADDS     r0,r0,#1              ;2351
001a6c  85a0              STRH     r0,[r4,#0x2c]         ;2351
001a6e  4820              LDR      r0,|L5.6896|
001a70  2100              MOVS     r1,#0
001a72  302c              ADDS     r0,r0,#0x2c
001a74  f7fffffe          BL       gran
001a78  e000              B        |L5.6780|
                  |L5.6778|
;;;2353   		}
;;;2354   	else cnt_rel_volt_umax=0;
001a7a  85a5              STRH     r5,[r4,#0x2c]
                  |L5.6780|
;;;2355   	if((cnt_rel_volt_umax>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_UP=1;
001a7c  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
001a80  eb000180          ADD      r1,r0,r0,LSL #2
001a84  f9b4002c          LDRSH    r0,[r4,#0x2c]  ; cnt_rel_volt_umax
001a88  ebb00f41          CMP      r0,r1,LSL #1
001a8c  db3c              BLT      |L5.6920|
001a8e  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
001a92  f9b42028          LDRSH    r2,[r4,#0x28]  ; cnt_volt_contr
001a96  eb010181          ADD      r1,r1,r1,LSL #2
001a9a  ebb20f41          CMP      r2,r1,LSL #1
001a9e  db33              BLT      |L5.6920|
001aa0  7367              STRB     r7,[r4,#0xd]
001aa2  e034              B        |L5.6926|
                  |L5.6820|
                          DCD      _x_
                  |L5.6824|
                          DCD      _xu_
                  |L5.6828|
                          DCD      CAP_MAX_VOLT
                  |L5.6832|
                          DCD      U_MAX
                  |L5.6836|
                          DCD      CAP_WRK_CURR
                  |L5.6840|
                          DCD      I_MAX_IPS
                  |L5.6844|
                          DCD      bOFF
                  |L5.6848|
                          DCD      pwm_t_reg
                  |L5.6852|
                          DCD      pwm_u_reg
                  |L5.6856|
                          DCD      pwm_i_reg
                  |L5.6860|
                          DCD      bps
                  |L5.6864|
                          DCD      work_stat
                  |L5.6868|
                          DCD      UOUT_OFF_EN
                  |L5.6872|
                          DCD      U_maxg
                  |L5.6876|
                          DCD      U_up_temp
                  |L5.6880|
                          DCD      UOUT_OFF_LEVEL
                  |L5.6884|
                          DCD      plazma_umax
                  |L5.6888|
                          DCD      UOUT_OFF_DELAY
                  |L5.6892|
                          DCD      net_av
                  |L5.6896|
                          DCD      ||area_number.25||
                  |L5.6900|
                          DCD      T_DEL_REL_VOLT_START
                  |L5.6904|
                          DCD      REL_VOLT_UMIN
                  |L5.6908|
                          DCD      load_U
                  |L5.6912|
                          DCD      T_DEL_REL_VOLT_WRK
                  |L5.6916|
                          DCD      REL_VOLT_UMAX
                  |L5.6920|
;;;2356   	else if(cnt_rel_volt_umax==0)							  							bVOLT_IS_NOT_UP=0;
001b08  b130              CBZ      r0,|L5.6936|
;;;2357   	
;;;2358   	if(bVOLT_IS_NOT_UP && bVOLT_IS_NOT_DOWN) bVOLT_IS_NORM=1;
001b0a  7b60              LDRB     r0,[r4,#0xd]  ; bVOLT_IS_NOT_UP
001b0c  b128              CBZ      r0,|L5.6938|
                  |L5.6926|
001b0e  7b20              LDRB     r0,[r4,#0xc]  ; bVOLT_IS_NOT_DOWN
001b10  b118              CBZ      r0,|L5.6938|
001b12  73a7              STRB     r7,[r4,#0xe]
                  |L5.6932|
;;;2359   	else bVOLT_IS_NORM=0;
;;;2360   
;;;2361   
;;;2362   }
001b14  e8bd87f0          POP      {r4-r10,pc}
                  |L5.6936|
001b18  7365              STRB     r5,[r4,#0xd]          ;2356
                  |L5.6938|
001b1a  73a5              STRB     r5,[r4,#0xe]          ;2359
001b1c  e7fa              B        |L5.6932|
;;;2363   
                          ENDP

                  current_stab_hndl PROC
;;;2364   //-----------------------------------------------
;;;2365   void current_stab_hndl(void)
001b1e  e92d5ff0          PUSH     {r4-r12,lr}
;;;2366   {
;;;2367   
;;;2368   if(work_stat==wsPS)
001b22  48b1              LDR      r0,|L5.7656|
;;;2369   	{
;;;2370   	delta_U_abs=abs_pal(load_U-U_up);
001b24  f8df82c8          LDR      r8,|L5.7664|
;;;2371   	delta_U_rel=(delta_U_abs*100)/U_up;
;;;2372   
;;;2373   	delta_I_abs=abs_pal(load_I-I_maxp);
001b28  f8dfb2c8          LDR      r11,|L5.7668|
001b2c  7801              LDRB     r1,[r0,#0]            ;2368  ; work_stat
001b2e  48af              LDR      r0,|L5.7660|
001b30  f8dfa2c4          LDR      r10,|L5.7672|
001b34  4db1              LDR      r5,|L5.7676|
001b36  f9b00000          LDRSH    r0,[r0,#0]            ;2370
;;;2374   	delta_I_rel=(delta_I_abs*100)/I_maxp;
001b3a  4eb1              LDR      r6,|L5.7680|
;;;2375   	}
;;;2376   
;;;2377   else if(work_stat==wsGS)
;;;2378   	{
;;;2379   	delta_U_abs=abs_pal(load_U-U_maxg);
;;;2380   	delta_U_rel=(delta_U_abs*100)/U_maxg;
;;;2381   
;;;2382   	delta_I_abs=abs_pal(load_I-I_ug_temp);
;;;2383   	delta_I_rel=(delta_I_abs*100)/I_ug_temp;
;;;2384   	}
;;;2385   else 
;;;2386   	{
;;;2387   	cnt_del_rel=0;
001b3c  2700              MOVS     r7,#0
001b3e  4cb1              LDR      r4,|L5.7684|
001b40  2902              CMP      r1,#2                 ;2368
001b42  d011              BEQ      |L5.7016|
001b44  2901              CMP      r1,#1                 ;2377
001b46  d025              BEQ      |L5.7060|
001b48  8027              STRH     r7,[r4,#0]
                  |L5.6986|
;;;2388   	}
;;;2389   
;;;2390   if((delta_U_rel>DELT_REL_CURR_U)&&(delta_I_rel<DELT_REL_CURR_I))
001b4a  49af              LDR      r1,|L5.7688|
001b4c  6828              LDR      r0,[r5,#0]  ; delta_U_rel
001b4e  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_U
001b52  4288              CMP      r0,r1
001b54  dd43              BLE      |L5.7134|
001b56  49ad              LDR      r1,|L5.7692|
001b58  6830              LDR      r0,[r6,#0]  ; delta_I_rel
001b5a  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_I
001b5e  4288              CMP      r0,r1
001b60  da3d              BGE      |L5.7134|
;;;2391   	{
;;;2392   	cnt_del_rel++;
001b62  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001b64  1c40              ADDS     r0,r0,#1
001b66  e03c              B        |L5.7138|
                  |L5.7016|
001b68  f8df92a4          LDR      r9,|L5.7696|
001b6c  f8b91000          LDRH     r1,[r9,#0]            ;2370  ; U_up
001b70  1a40              SUBS     r0,r0,r1              ;2370
001b72  b200              SXTH     r0,r0                 ;2370
001b74  f7fffffe          BL       abs_pal
001b78  f8c80000          STR      r0,[r8,#0]            ;2371  ; delta_U_abs
001b7c  2164              MOVS     r1,#0x64              ;2371
001b7e  4348              MULS     r0,r1,r0              ;2371
001b80  f9b91000          LDRSH    r1,[r9,#0]            ;2371  ; U_up
001b84  f8df828c          LDR      r8,|L5.7700|
001b88  fb90f0f1          SDIV     r0,r0,r1              ;2371
001b8c  6028              STR      r0,[r5,#0]            ;2373  ; delta_U_rel
001b8e  f8bb1000          LDRH     r1,[r11,#0]           ;2373  ; load_I
001b92  e014              B        |L5.7102|
                  |L5.7060|
001b94  f8df9280          LDR      r9,|L5.7704|
001b98  f8b91000          LDRH     r1,[r9,#0]            ;2379  ; U_maxg
001b9c  1a40              SUBS     r0,r0,r1              ;2379
001b9e  b200              SXTH     r0,r0                 ;2379
001ba0  f7fffffe          BL       abs_pal
001ba4  f8c80000          STR      r0,[r8,#0]            ;2380  ; delta_U_abs
001ba8  2164              MOVS     r1,#0x64              ;2380
001baa  4348              MULS     r0,r1,r0              ;2380
001bac  f9b91000          LDRSH    r1,[r9,#0]            ;2380  ; U_maxg
001bb0  f8df8268          LDR      r8,|L5.7708|
001bb4  fb90f0f1          SDIV     r0,r0,r1              ;2380
001bb8  6028              STR      r0,[r5,#0]            ;2382  ; delta_U_rel
001bba  f8bb1000          LDRH     r1,[r11,#0]           ;2382  ; load_I
                  |L5.7102|
001bbe  f8b80000          LDRH     r0,[r8,#0]            ;2382  ; I_ug_temp
001bc2  1a08              SUBS     r0,r1,r0              ;2382
001bc4  b200              SXTH     r0,r0                 ;2382
001bc6  f7fffffe          BL       abs_pal
001bca  2164              MOVS     r1,#0x64              ;2383
001bcc  f8ca0000          STR      r0,[r10,#0]           ;2383  ; delta_I_abs
001bd0  4348              MULS     r0,r1,r0              ;2383
001bd2  f9b81000          LDRSH    r1,[r8,#0]            ;2383  ; I_ug_temp
001bd6  fb90f0f1          SDIV     r0,r0,r1              ;2383
001bda  6030              STR      r0,[r6,#0]            ;2383  ; delta_I_rel
001bdc  e7b5              B        |L5.6986|
                  |L5.7134|
;;;2393   	}
;;;2394   else
;;;2395   	{
;;;2396   	cnt_del_rel--;
001bde  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001be0  1e40              SUBS     r0,r0,#1
                  |L5.7138|
;;;2397   	}
;;;2398   
;;;2399   gran(&cnt_del_rel,0,(T_DEL_REL_CURR_WRK*10)+10);
001be2  4d8f              LDR      r5,|L5.7712|
001be4  8020              STRH     r0,[r4,#0]            ;2396
001be6  210a              MOVS     r1,#0xa
001be8  8828              LDRH     r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
001bea  eb000080          ADD      r0,r0,r0,LSL #2
001bee  eb010040          ADD      r0,r1,r0,LSL #1
001bf2  b202              SXTH     r2,r0
001bf4  2100              MOVS     r1,#0
001bf6  4883              LDR      r0,|L5.7684|
001bf8  f7fffffe          BL       gran
;;;2400   
;;;2401   if(work_stat==wsOFF) cnt_del_rel=0;
001bfc  487a              LDR      r0,|L5.7656|
001bfe  7800              LDRB     r0,[r0,#0]  ; work_stat
001c00  b900              CBNZ     r0,|L5.7172|
001c02  8027              STRH     r7,[r4,#0]
                  |L5.7172|
;;;2402   
;;;2403   
;;;2404   if ( (time_proc>=(T_DEL_REL_CURR_START)) &&
001c04  4887              LDR      r0,|L5.7716|
001c06  4988              LDR      r1,|L5.7720|
;;;2405   	(cnt_del_rel>(T_DEL_REL_CURR_WRK*10)) )
;;;2406   	{
;;;2407   	bCURRENT_STAB=1;
001c08  4a88              LDR      r2,|L5.7724|
001c0a  6800              LDR      r0,[r0,#0]            ;2404  ; time_proc
001c0c  f9b11000          LDRSH    r1,[r1,#0]            ;2404  ; T_DEL_REL_CURR_START
001c10  4288              CMP      r0,r1                 ;2404
001c12  db0a              BLT      |L5.7210|
001c14  f9b53000          LDRSH    r3,[r5,#0]            ;2405  ; T_DEL_REL_CURR_WRK
001c18  f9b46000          LDRSH    r6,[r4,#0]            ;2405  ; cnt_del_rel
001c1c  eb030383          ADD      r3,r3,r3,LSL #2       ;2405
001c20  ebb60f43          CMP      r6,r3,LSL #1          ;2405
001c24  dd01              BLE      |L5.7210|
001c26  2301              MOVS     r3,#1
001c28  7013              STRB     r3,[r2,#0]
                  |L5.7210|
;;;2408   	}
;;;2409   if ( (time_proc<(T_DEL_REL_CURR_START)) ||
001c2a  4288              CMP      r0,r1
001c2c  db08              BLT      |L5.7232|
;;;2410   	(cnt_del_rel<=(T_DEL_REL_CURR_WRK*10)) )
001c2e  f9b50000          LDRSH    r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
001c32  f9b41000          LDRSH    r1,[r4,#0]  ; cnt_del_rel
001c36  eb000080          ADD      r0,r0,r0,LSL #2
001c3a  ebb10f40          CMP      r1,r0,LSL #1
001c3e  dc00              BGT      |L5.7234|
                  |L5.7232|
;;;2411   	{
;;;2412   	bCURRENT_STAB=0;
001c40  7017              STRB     r7,[r2,#0]
                  |L5.7234|
;;;2413   	}
;;;2414   
;;;2415   /*
;;;2416   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
;;;2417   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
;;;2418   //SET_REG(LPC_GPIO0->FIOSET,1,5,1);
;;;2419   
;;;2420   if(RELE_LOG_CURR==0)
;;;2421   	{
;;;2422   	SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2423   	}
;;;2424   else if(RELE_LOG_CURR==1)
;;;2425   	{
;;;2426   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2427   	else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2428   	}
;;;2429   else
;;;2430   	{
;;;2431   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2432   	else SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2433   	}*/
;;;2434   
;;;2435   }
001c42  e8bd9ff0          POP      {r4-r12,pc}
;;;2436   
                          ENDP

                  rele_hndl PROC
;;;2460   //-----------------------------------------------
;;;2461   void rele_hndl(void)
001c46  e92d4ff0          PUSH     {r4-r11,lr}
;;;2462   {
;;;2463   //Реле1
;;;2464   if(RELE_FUNC[0]==0)rele_stat[0]=rsOFF; 		//Выключено
;;;2465   else if(RELE_FUNC[0]==1)					//Реверс
;;;2466   	{
;;;2467   	if(work_stat==wsCAP) 
001c4a  4867              LDR      r0,|L5.7656|
;;;2468   		{
;;;2469   		if(bRAZR) rele_stat[0]=rsOFF;
;;;2470   		else 	rele_stat[0]=rsON;
;;;2471   		} 
;;;2472   	else 
;;;2473   		{
;;;2474   		if(REV_STAT==rsREW)	rele_stat[0]=rsOFF;
;;;2475   		else 			rele_stat[0]=rsON;
;;;2476   		}
;;;2477   	}
;;;2478   else if(RELE_FUNC[0]==2)					//Токоограничение
;;;2479   	{
;;;2480   	if(RELE_LOG_CURR==0)
001c4c  4b7c              LDR      r3,|L5.7744|
001c4e  f8dfe1e0          LDR      lr,|L5.7728|
001c52  f890c000          LDRB     r12,[r0,#0]           ;2467
001c56  4877              LDR      r0,|L5.7732|
001c58  f9b36000          LDRSH    r6,[r3,#0]
;;;2481   		{
;;;2482   		if(bCURRENT_STAB==0)	rele_stat[0]=rsON;
;;;2483   		else 				rele_stat[0]=rsOFF;
;;;2484   		}
;;;2485   	else if(RELE_LOG_CURR==1)
;;;2486   		{
;;;2487   		if(bCURRENT_STAB==0)	rele_stat[0]=rsOFF;
;;;2488   		else 				rele_stat[0]=rsON;
;;;2489   		}
;;;2490   	}									
;;;2491   else if(RELE_FUNC[0]==3)					//Напряжение в норме
;;;2492   	{
;;;2493   	if(RELE_LOG_VOLT==0)
001c5c  4b79              LDR      r3,|L5.7748|
001c5e  7800              LDRB     r0,[r0,#0]            ;2469
001c60  f9be4000          LDRSH    r4,[lr,#0]            ;2464  ; RELE_FUNC
001c64  4682              MOV      r10,r0                ;2469
001c66  4874              LDR      r0,|L5.7736|
001c68  2100              MOVS     r1,#0                 ;2464
001c6a  f9b33000          LDRSH    r3,[r3,#0]
001c6e  7800              LDRB     r0,[r0,#0]            ;2474
001c70  4683              MOV      r11,r0                ;2474
001c72  486e              LDR      r0,|L5.7724|
001c74  7805              LDRB     r5,[r0,#0]            ;2482
;;;2494   		{
;;;2495   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsON;
001c76  4871              LDR      r0,|L5.7740|
001c78  7b87              LDRB     r7,[r0,#0xe]
;;;2496   		else 				rele_stat[0]=rsOFF;
;;;2497   		}
;;;2498   	else if(RELE_LOG_VOLT==1)
;;;2499   		{
;;;2500   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsOFF;
;;;2501   		else 				rele_stat[0]=rsON;
;;;2502   		}
;;;2503   	}
;;;2504   else if(RELE_FUNC[0]==4)					//Напряжение не выше
;;;2505   	{
;;;2506   	if(RELE_LOG_VOLT==0)
;;;2507   		{
;;;2508   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsON;
001c7a  f890800d          LDRB     r8,[r0,#0xd]
;;;2509   		else 				rele_stat[0]=rsOFF;
;;;2510   		}
;;;2511   	else if(RELE_LOG_VOLT==1)
;;;2512   		{
;;;2513   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsOFF;
;;;2514   		else 				rele_stat[0]=rsON;
;;;2515   		}
;;;2516   	}
;;;2517   else if(RELE_FUNC[0]==5)					//Напряжение не ниже
;;;2518   	{
;;;2519   	if(RELE_LOG_VOLT==0)
;;;2520   		{
;;;2521   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsON;
001c7e  7b00              LDRB     r0,[r0,#0xc]
001c80  4681              MOV      r9,r0
001c82  486e              LDR      r0,|L5.7740|
001c84  302e              ADDS     r0,r0,#0x2e           ;2464
001c86  2201              MOVS     r2,#1                 ;2464
001c88  b314              CBZ      r4,|L5.7376|
001c8a  2c01              CMP      r4,#1                 ;2465
001c8c  d008              BEQ      |L5.7328|
001c8e  2c02              CMP      r4,#2                 ;2478
001c90  d011              BEQ      |L5.7350|
001c92  2c03              CMP      r4,#3                 ;2491
001c94  d017              BEQ      |L5.7366|
001c96  2c04              CMP      r4,#4                 ;2504
001c98  d01d              BEQ      |L5.7382|
001c9a  2c05              CMP      r4,#5                 ;2517
001c9c  d027              BEQ      |L5.7406|
001c9e  e032              B        |L5.7430|
                  |L5.7328|
001ca0  f1bc0f03          CMP      r12,#3                ;2467
001ca4  d003              BEQ      |L5.7342|
001ca6  f1bb0f00          CMP      r11,#0                ;2474
001caa  d040              BEQ      |L5.7470|
001cac  e02a              B        |L5.7428|
                  |L5.7342|
001cae  f1ba0f00          CMP      r10,#0                ;2469
001cb2  d13c              BNE      |L5.7470|
001cb4  e026              B        |L5.7428|
                  |L5.7350|
001cb6  b116              CBZ      r6,|L5.7358|
001cb8  2e01              CMP      r6,#1                 ;2485
001cba  d002              BEQ      |L5.7362|
001cbc  e023              B        |L5.7430|
                  |L5.7358|
001cbe  b30d              CBZ      r5,|L5.7428|
001cc0  e035              B        |L5.7470|
                  |L5.7362|
001cc2  b12d              CBZ      r5,|L5.7376|
001cc4  e01e              B        |L5.7428|
                  |L5.7366|
001cc6  b113              CBZ      r3,|L5.7374|
001cc8  2b01              CMP      r3,#1                 ;2498
001cca  d002              BEQ      |L5.7378|
001ccc  e01b              B        |L5.7430|
                  |L5.7374|
001cce  b1cf              CBZ      r7,|L5.7428|
                  |L5.7376|
001cd0  e02d              B        |L5.7470|
                  |L5.7378|
001cd2  b367              CBZ      r7,|L5.7470|
001cd4  e016              B        |L5.7428|
                  |L5.7382|
001cd6  b113              CBZ      r3,|L5.7390|
001cd8  2b01              CMP      r3,#1                 ;2511
001cda  d004              BEQ      |L5.7398|
001cdc  e013              B        |L5.7430|
                  |L5.7390|
001cde  f1b80f00          CMP      r8,#0                 ;2508
001ce2  d00f              BEQ      |L5.7428|
001ce4  e023              B        |L5.7470|
                  |L5.7398|
001ce6  f1b80f00          CMP      r8,#0                 ;2513
001cea  d020              BEQ      |L5.7470|
001cec  e00a              B        |L5.7428|
                  |L5.7406|
001cee  b113              CBZ      r3,|L5.7414|
;;;2522   		else 				rele_stat[0]=rsOFF;
;;;2523   		}
;;;2524   	else if(RELE_LOG_VOLT==1)
001cf0  2b01              CMP      r3,#1
001cf2  d004              BEQ      |L5.7422|
001cf4  e007              B        |L5.7430|
                  |L5.7414|
001cf6  f1b90f00          CMP      r9,#0                 ;2521
001cfa  d003              BEQ      |L5.7428|
001cfc  e017              B        |L5.7470|
                  |L5.7422|
;;;2525   		{
;;;2526   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsOFF;
001cfe  f1b90f00          CMP      r9,#0
001d02  d014              BEQ      |L5.7470|
                  |L5.7428|
;;;2527   		else 				rele_stat[0]=rsON;
001d04  7002              STRB     r2,[r0,#0]
                  |L5.7430|
;;;2528   		}
;;;2529   	}
;;;2530   											
;;;2531   //Реле2
;;;2532   if(RELE_FUNC[1]==0)rele_stat[1]=rsOFF; 		//Выключено
001d06  f9be4002          LDRSH    r4,[lr,#2]  ; RELE_FUNC
001d0a  b194              CBZ      r4,|L5.7474|
;;;2533   else if(RELE_FUNC[1]==1)					//Реверс
001d0c  2c01              CMP      r4,#1
001d0e  d013              BEQ      |L5.7480|
;;;2534   	{
;;;2535   	if(work_stat==wsCAP) 
;;;2536   		{
;;;2537   		if(bRAZR) 		rele_stat[1]=rsOFF;
;;;2538   		else 			rele_stat[1]=rsON;
;;;2539   		} 
;;;2540   	else 
;;;2541   		{
;;;2542   		if(REV_STAT==rsREW)	rele_stat[1]=rsOFF;
;;;2543   		else 			rele_stat[1]=rsON;
;;;2544   		}
;;;2545   	}
;;;2546   else if(RELE_FUNC[1]==2)					//Токоограничение
001d10  2c02              CMP      r4,#2
001d12  d01d              BEQ      |L5.7504|
;;;2547   	{
;;;2548   	if(RELE_LOG_CURR==0)
;;;2549   		{
;;;2550   		if(bCURRENT_STAB==0)rele_stat[1]=rsON;
;;;2551   		else 			rele_stat[1]=rsOFF;
;;;2552   		}
;;;2553   	else if(RELE_LOG_CURR==1)
;;;2554   		{
;;;2555   		if(bCURRENT_STAB==0)rele_stat[1]=rsOFF;
;;;2556   		else 			rele_stat[1]=rsON;
;;;2557   		}
;;;2558   	}									
;;;2559   else if(RELE_FUNC[1]==3)					//Напряжение в норме
001d14  2c03              CMP      r4,#3
001d16  d024              BEQ      |L5.7522|
;;;2560   	{
;;;2561   	if(RELE_LOG_VOLT==0)
;;;2562   		{
;;;2563   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsON;
;;;2564   		else 				rele_stat[1]=rsOFF;
;;;2565   		}
;;;2566   	else if(RELE_LOG_VOLT==1)
;;;2567   		{
;;;2568   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsOFF;
;;;2569   		else 				rele_stat[1]=rsON;
;;;2570   		}
;;;2571   	}
;;;2572   else if(RELE_FUNC[1]==4)					//Напряжение не выше
001d18  2c04              CMP      r4,#4
001d1a  d02b              BEQ      |L5.7540|
;;;2573   	{
;;;2574   	if(RELE_LOG_VOLT==0)
;;;2575   		{
;;;2576   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsON;
;;;2577   		else 				rele_stat[1]=rsOFF;
;;;2578   		}
;;;2579   	else if(RELE_LOG_VOLT==1)
;;;2580   		{
;;;2581   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsOFF;
;;;2582   		else 				rele_stat[1]=rsON;
;;;2583   		}
;;;2584   	}
;;;2585   else if(RELE_FUNC[1]==5)					//Напряжение не ниже
001d1c  2c05              CMP      r4,#5
001d1e  d109              BNE      |L5.7476|
;;;2586   	{
;;;2587   	if(RELE_LOG_VOLT==0)
001d20  b37b              CBZ      r3,|L5.7554|
;;;2588   		{
;;;2589   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsON;
;;;2590   		else 				rele_stat[1]=rsOFF;
;;;2591   		}
;;;2592   	else if(RELE_LOG_VOLT==1)
001d22  2b01              CMP      r3,#1
001d24  d106              BNE      |L5.7476|
;;;2593   		{
;;;2594   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsOFF;
001d26  f1b90f00          CMP      r9,#0
001d2a  d10b              BNE      |L5.7492|
001d2c  e001              B        |L5.7474|
                  |L5.7470|
001d2e  7001              STRB     r1,[r0,#0]            ;2526
001d30  e7e9              B        |L5.7430|
                  |L5.7474|
001d32  7041              STRB     r1,[r0,#1]            ;2532
                  |L5.7476|
;;;2595   		else 				rele_stat[1]=rsON;
;;;2596   		}
;;;2597   	}
;;;2598   	
;;;2599   
;;;2600   //rele_stat[0]=rsON;
;;;2601   //rele_stat[1]=rsON;
;;;2602   										
;;;2603   }
001d34  e8bd8ff0          POP      {r4-r11,pc}
                  |L5.7480|
001d38  f1bc0f03          CMP      r12,#3                ;2535
001d3c  d004              BEQ      |L5.7496|
001d3e  f1bb0f00          CMP      r11,#0                ;2542
001d42  d0f6              BEQ      |L5.7474|
                  |L5.7492|
001d44  7042              STRB     r2,[r0,#1]            ;2543
001d46  e7f5              B        |L5.7476|
                  |L5.7496|
001d48  f1ba0f00          CMP      r10,#0                ;2537
001d4c  d1f1              BNE      |L5.7474|
001d4e  e7f9              B        |L5.7492|
                  |L5.7504|
001d50  b126              CBZ      r6,|L5.7516|
001d52  2e01              CMP      r6,#1                 ;2553
001d54  d1ee              BNE      |L5.7476|
001d56  2d00              CMP      r5,#0                 ;2555
001d58  d1f4              BNE      |L5.7492|
001d5a  e7ea              B        |L5.7474|
                  |L5.7516|
001d5c  2d00              CMP      r5,#0                 ;2550
001d5e  d0f1              BEQ      |L5.7492|
001d60  e7e7              B        |L5.7474|
                  |L5.7522|
001d62  b123              CBZ      r3,|L5.7534|
001d64  2b01              CMP      r3,#1                 ;2566
001d66  d1e5              BNE      |L5.7476|
001d68  2f00              CMP      r7,#0                 ;2568
001d6a  d1eb              BNE      |L5.7492|
001d6c  e7e1              B        |L5.7474|
                  |L5.7534|
001d6e  2f00              CMP      r7,#0                 ;2563
001d70  d0e8              BEQ      |L5.7492|
001d72  e7de              B        |L5.7474|
                  |L5.7540|
001d74  b133              CBZ      r3,|L5.7556|
001d76  2b01              CMP      r3,#1                 ;2579
001d78  d1dc              BNE      |L5.7476|
001d7a  f1b80f00          CMP      r8,#0                 ;2581
001d7e  d1e1              BNE      |L5.7492|
001d80  e7d7              B        |L5.7474|
                  |L5.7554|
001d82  e003              B        |L5.7564|
                  |L5.7556|
001d84  f1b80f00          CMP      r8,#0                 ;2576
001d88  d0dc              BEQ      |L5.7492|
001d8a  e7d2              B        |L5.7474|
                  |L5.7564|
001d8c  f1b90f00          CMP      r9,#0                 ;2589
001d90  d0d8              BEQ      |L5.7492|
001d92  e7ce              B        |L5.7474|
;;;2604    
                          ENDP

                  rele_drv PROC
;;;2605   //-----------------------------------------------
;;;2606   void rele_drv(void)
001d94  492c              LDR      r1,|L5.7752|
;;;2607   {
;;;2608   #ifdef EXT_BOARD_V_1
;;;2609   SET_REG(LPC_PINCON->PINSEL0,0,4*2,2);
;;;2610   SET_REG(LPC_GPIO0->FIODIR,1,4,1);
;;;2611   
;;;2612   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
;;;2613   else SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2614   #endif
;;;2615   
;;;2616   #ifdef EXT_BOARD_V_2
;;;2617   SET_REG(LPC_PINCON->PINSEL0,0,7*2,2);
001d96  6808              LDR      r0,[r1,#0]
001d98  f4204040          BIC      r0,r0,#0xc000
001d9c  6008              STR      r0,[r1,#0]
;;;2618   SET_REG(LPC_GPIO0->FIODIR,1,7,1);
001d9e  482b              LDR      r0,|L5.7756|
001da0  6802              LDR      r2,[r0,#0]
001da2  f0420280          ORR      r2,r2,#0x80
001da6  6002              STR      r2,[r0,#0]
;;;2619   
;;;2620   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,7,1);
001da8  4a24              LDR      r2,|L5.7740|
001daa  322e              ADDS     r2,r2,#0x2e
001dac  7813              LDRB     r3,[r2,#0]  ; rele_stat
001dae  2b01              CMP      r3,#1
;;;2621   else SET_REG(LPC_GPIO0->FIOPIN,1,7,1);
001db0  6943              LDR      r3,[r0,#0x14]
001db2  d012              BEQ      |L5.7642|
001db4  f0430380          ORR      r3,r3,#0x80
                  |L5.7608|
001db8  6143              STR      r3,[r0,#0x14]
;;;2622   #endif
;;;2623   
;;;2624   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
001dba  680b              LDR      r3,[r1,#0]
001dbc  f4236340          BIC      r3,r3,#0xc00
001dc0  600b              STR      r3,[r1,#0]
;;;2625   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
001dc2  6801              LDR      r1,[r0,#0]
001dc4  f0410120          ORR      r1,r1,#0x20
001dc8  6001              STR      r1,[r0,#0]
;;;2626   
;;;2627   if(rele_stat[1]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
001dca  7851              LDRB     r1,[r2,#1]  ; rele_stat
001dcc  2901              CMP      r1,#1
;;;2628   else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
001dce  6941              LDR      r1,[r0,#0x14]
001dd0  d006              BEQ      |L5.7648|
001dd2  f0410120          ORR      r1,r1,#0x20
                  |L5.7638|
001dd6  6141              STR      r1,[r0,#0x14]         ;2627
;;;2629   
;;;2630   
;;;2631   }
001dd8  4770              BX       lr
                  |L5.7642|
001dda  f0230380          BIC      r3,r3,#0x80           ;2620
001dde  e7eb              B        |L5.7608|
                  |L5.7648|
001de0  f0210120          BIC      r1,r1,#0x20           ;2627
001de4  e7f7              B        |L5.7638|
;;;2632   
                          ENDP

001de6  0000              DCW      0x0000
                  |L5.7656|
                          DCD      work_stat
                  |L5.7660|
                          DCD      load_U
                  |L5.7664|
                          DCD      delta_U_abs
                  |L5.7668|
                          DCD      load_I
                  |L5.7672|
                          DCD      delta_I_abs
                  |L5.7676|
                          DCD      delta_U_rel
                  |L5.7680|
                          DCD      delta_I_rel
                  |L5.7684|
                          DCD      cnt_del_rel
                  |L5.7688|
                          DCD      DELT_REL_CURR_U
                  |L5.7692|
                          DCD      DELT_REL_CURR_I
                  |L5.7696|
                          DCD      U_up
                  |L5.7700|
                          DCD      I_maxp
                  |L5.7704|
                          DCD      U_maxg
                  |L5.7708|
                          DCD      I_ug_temp
                  |L5.7712|
                          DCD      T_DEL_REL_CURR_WRK
                  |L5.7716|
                          DCD      time_proc
                  |L5.7720|
                          DCD      T_DEL_REL_CURR_START
                  |L5.7724|
                          DCD      bCURRENT_STAB
                  |L5.7728|
                          DCD      RELE_FUNC
                  |L5.7732|
                          DCD      bRAZR
                  |L5.7736|
                          DCD      REV_STAT
                  |L5.7740|
                          DCD      ||area_number.25||
                  |L5.7744|
                          DCD      RELE_LOG_CURR
                  |L5.7748|
                          DCD      RELE_LOG_VOLT
                  |L5.7752|
                          DCD      0x4002c000
                  |L5.7756|
                          DCD      0x2009c000

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  adc_drv6 PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000004  4c77              LDR      r4,|L6.484|
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
;;;227    }
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  f44f7296          MOV      r2,#0x12c
000034  80a8              STRH     r0,[r5,#4]
000036  f1a40130          SUB      r1,r4,#0x30
00003a  4290              CMP      r0,r2
00003c  da01              BGE      |L6.66|
00003e  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000040  e00a              B        |L6.88|
                  |L6.66|
000042  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
000046  4290              CMP      r0,r2
000048  da01              BGE      |L6.78|
00004a  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00004c  e004              B        |L6.88|
                  |L6.78|
00004e  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
000052  4290              CMP      r0,r2
000054  da01              BGE      |L6.90|
000056  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L6.88|
000058  8348              STRH     r0,[r1,#0x1a]
                  |L6.90|
00005a  784e              LDRB     r6,[r1,#1]  ; adc_ch_net
00005c  2000              MOVS     r0,#0
00005e  b3f6              CBZ      r6,|L6.222|
000060  790c              LDRB     r4,[r1,#4]  ; adc_window_flag
000062  4a61              LDR      r2,|L6.488|
000064  b18c              CBZ      r4,|L6.138|
000066  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
00006a  6815              LDR      r5,[r2,#0]  ; main_power_buffer
00006c  eb0505a3          ADD      r5,r5,r3,ASR #2
000070  6015              STR      r5,[r2,#0]  ; main_power_buffer
000072  6855              LDR      r5,[r2,#4]  ; main_power_buffer
000074  eb0505a3          ADD      r5,r5,r3,ASR #2
000078  6055              STR      r5,[r2,#4]  ; main_power_buffer
00007a  6895              LDR      r5,[r2,#8]  ; main_power_buffer
00007c  eb0505a3          ADD      r5,r5,r3,ASR #2
000080  6095              STR      r5,[r2,#8]  ; main_power_buffer
000082  68d5              LDR      r5,[r2,#0xc]  ; main_power_buffer
000084  eb0503a3          ADD      r3,r5,r3,ASR #2
000088  60d3              STR      r3,[r2,#0xc]  ; main_power_buffer
                  |L6.138|
00008a  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
00008e  2b64              CMP      r3,#0x64
000090  da0e              BGE      |L6.176|
000092  8bcb              LDRH     r3,[r1,#0x1e]  ; adc_zero_cnt
000094  f44f65fa          MOV      r5,#0x7d0
000098  1c5b              ADDS     r3,r3,#1
00009a  b21b              SXTH     r3,r3
00009c  83cb              STRH     r3,[r1,#0x1e]
00009e  42ab              CMP      r3,r5
0000a0  db08              BLT      |L6.180|
0000a2  83cd              STRH     r5,[r1,#0x1e]
0000a4  6010              STR      r0,[r2,#0]  ; main_power_buffer
0000a6  6050              STR      r0,[r2,#4]  ; main_power_buffer
0000a8  6090              STR      r0,[r2,#8]  ; main_power_buffer
0000aa  60d0              STR      r0,[r2,#0xc]  ; main_power_buffer
0000ac  8308              STRH     r0,[r1,#0x18]
0000ae  e053              B        |L6.344|
                  |L6.176|
0000b0  83c8              STRH     r0,[r1,#0x1e]
0000b2  e051              B        |L6.344|
                  |L6.180|
0000b4  2b05              CMP      r3,#5
0000b6  d14f              BNE      |L6.344|
0000b8  b1a4              CBZ      r4,|L6.228|
0000ba  8b8b              LDRH     r3,[r1,#0x1c]  ; adc_gorb_cnt
0000bc  1c5b              ADDS     r3,r3,#1
0000be  b21b              SXTH     r3,r3
0000c0  838b              STRH     r3,[r1,#0x1c]
0000c2  f5b37f00          CMP      r3,#0x200
0000c6  db00              BLT      |L6.202|
0000c8  8388              STRH     r0,[r1,#0x1c]
                  |L6.202|
0000ca  f9b1301c          LDRSH    r3,[r1,#0x1c]  ; adc_gorb_cnt
0000ce  065d              LSLS     r5,r3,#25
0000d0  d108              BNE      |L6.228|
0000d2  11db              ASRS     r3,r3,#7
0000d4  f8525023          LDR      r5,[r2,r3,LSL #2]
0000d8  122d              ASRS     r5,r5,#8
0000da  830d              STRH     r5,[r1,#0x18]
0000dc  e000              B        |L6.224|
                  |L6.222|
0000de  e00f              B        |L6.256|
                  |L6.224|
0000e0  f8420023          STR      r0,[r2,r3,LSL #2]
                  |L6.228|
0000e4  f9b12020          LDRSH    r2,[r1,#0x20]  ; adc_window_cnt
0000e8  2a96              CMP      r2,#0x96
0000ea  dd01              BLE      |L6.240|
0000ec  b104              CBZ      r4,|L6.240|
0000ee  7108              STRB     r0,[r1,#4]
                  |L6.240|
0000f0  3a1f              SUBS     r2,r2,#0x1f
0000f2  2a27              CMP      r2,#0x27
0000f4  d230              BCS      |L6.344|
0000f6  790a              LDRB     r2,[r1,#4]  ; adc_window_flag
0000f8  bb72              CBNZ     r2,|L6.344|
0000fa  2201              MOVS     r2,#1
0000fc  710a              STRB     r2,[r1,#4]
0000fe  e02b              B        |L6.344|
                  |L6.256|
000100  4f3a              LDR      r7,|L6.492|
000102  788a              LDRB     r2,[r1,#2]  ; adc_ch
000104  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
000108  eb0714c2          ADD      r4,r7,r2,LSL #7
00010c  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
000110  f844302c          STR      r3,[r4,r12,LSL #2]
000114  ea5f738c          LSLS     r3,r12,#30
000118  d110              BNE      |L6.316|
00011a  2400              MOVS     r4,#0
00011c  4623              MOV      r3,r4
00011e  eb0715c2          ADD      r5,r7,r2,LSL #7
000122  bf00              NOP      
                  |L6.292|
000124  f8557023          LDR      r7,[r5,r3,LSL #2]
000128  1c5b              ADDS     r3,r3,#1
00012a  b2db              UXTB     r3,r3
00012c  443c              ADD      r4,r4,r7
00012e  2b10              CMP      r3,#0x10
000130  d3f8              BCC      |L6.292|
000132  1123              ASRS     r3,r4,#4
000134  4c2c              LDR      r4,|L6.488|
000136  3c40              SUBS     r4,r4,#0x40
000138  f8243012          STRH     r3,[r4,r2,LSL #1]
                  |L6.316|
00013c  1c52              ADDS     r2,r2,#1
00013e  b2d2              UXTB     r2,r2
000140  708a              STRB     r2,[r1,#2]
000142  2a10              CMP      r2,#0x10
000144  d308              BCC      |L6.344|
000146  f10c0c01          ADD      r12,r12,#1
00014a  f00c02ff          AND      r2,r12,#0xff
00014e  7088              STRB     r0,[r1,#2]
000150  70ca              STRB     r2,[r1,#3]
000152  2a10              CMP      r2,#0x10
000154  d300              BCC      |L6.344|
000156  70c8              STRB     r0,[r1,#3]
                  |L6.344|
000158  7008              STRB     r0,[r1,#0]
00015a  1c76              ADDS     r6,r6,#1
00015c  f0160001          ANDS     r0,r6,#1
000160  4a23              LDR      r2,|L6.496|
000162  7048              STRB     r0,[r1,#1]
000164  d005              BEQ      |L6.370|
000166  6810              LDR      r0,[r2,#0]
000168  f02000ff          BIC      r0,r0,#0xff
00016c  1d00              ADDS     r0,r0,#4
00016e  6010              STR      r0,[r2,#0]
000170  e032              B        |L6.472|
                  |L6.370|
000172  7889              LDRB     r1,[r1,#2]  ; adc_ch
000174  0708              LSLS     r0,r1,#28
000176  2800              CMP      r0,#0
000178  6810              LDR      r0,[r2,#0]
00017a  f02000ff          BIC      r0,r0,#0xff
00017e  db01              BLT      |L6.388|
000180  1c40              ADDS     r0,r0,#1
000182  e000              B        |L6.390|
                  |L6.388|
000184  1c80              ADDS     r0,r0,#2
                  |L6.390|
000186  6010              STR      r0,[r2,#0]
000188  481a              LDR      r0,|L6.500|
00018a  6803              LDR      r3,[r0,#0]
00018c  f0435380          ORR      r3,r3,#0x10000000
000190  6003              STR      r3,[r0,#0]
000192  6a03              LDR      r3,[r0,#0x20]
000194  f0434380          ORR      r3,r3,#0x40000000
000198  6203              STR      r3,[r0,#0x20]
00019a  6e03              LDR      r3,[r0,#0x60]
00019c  f0436380          ORR      r3,r3,#0x4000000
0001a0  6603              STR      r3,[r0,#0x60]
0001a2  07cb              LSLS     r3,r1,#31
0001a4  6943              LDR      r3,[r0,#0x14]
0001a6  d008              BEQ      |L6.442|
0001a8  f0435380          ORR      r3,r3,#0x10000000
                  |L6.428|
0001ac  6143              STR      r3,[r0,#0x14]
0001ae  078b              LSLS     r3,r1,#30
0001b0  6b43              LDR      r3,[r0,#0x34]
0001b2  d405              BMI      |L6.448|
0001b4  f0234380          BIC      r3,r3,#0x40000000
0001b8  e004              B        |L6.452|
                  |L6.442|
0001ba  f0235380          BIC      r3,r3,#0x10000000
0001be  e7f5              B        |L6.428|
                  |L6.448|
0001c0  f0434380          ORR      r3,r3,#0x40000000
                  |L6.452|
0001c4  6343              STR      r3,[r0,#0x34]
0001c6  0749              LSLS     r1,r1,#29
0001c8  6f41              LDR      r1,[r0,#0x74]
0001ca  d402              BMI      |L6.466|
0001cc  f0216180          BIC      r1,r1,#0x4000000
0001d0  e001              B        |L6.470|
                  |L6.466|
0001d2  f0416180          ORR      r1,r1,#0x4000000
                  |L6.470|
0001d6  6741              STR      r1,[r0,#0x74]
                  |L6.472|
0001d8  6810              LDR      r0,[r2,#0]
0001da  f0407080          ORR      r0,r0,#0x1000000
0001de  6010              STR      r0,[r2,#0]
0001e0  e8bd81f0          POP      {r4-r8,pc}
;;;228    
                          ENDP

                  |L6.484|
                          DCD      ||area_number.25||+0x30
                  |L6.488|
                          DCD      ||.bss||+0x840
                  |L6.492|
                          DCD      ||.bss||
                  |L6.496|
                          DCD      0x40034000
                  |L6.500|
                          DCD      0x2009c000

                          AREA ||area_number.7||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.7||, ||.text||
                  zar_superviser_start PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  4903              LDR      r1,|L7.16|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  4a04              LDR      r2,|L7.20|
000004  2001              MOVS     r0,#1
000006  7008              STRB     r0,[r1,#0]
000008  7010              STRB     r0,[r2,#0]
00000a  7048              STRB     r0,[r1,#1]
00000c  7050              STRB     r0,[r2,#1]
00000e  4770              BX       lr
;;;227    }
;;;228    
                          ENDP

                  |L7.16|
                          DCD      sign_U
                  |L7.20|
                          DCD      sign_I

                          AREA ||area_number.8||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.8||, ||.text||
                  revers_hndl PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  480e              LDR      r0,|L8.60|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  6801              LDR      r1,[r0,#0]
000004  f4217140          BIC      r1,r1,#0x300
000008  6001              STR      r1,[r0,#0]
00000a  480d              LDR      r0,|L8.64|
00000c  6801              LDR      r1,[r0,#0]
00000e  f0410110          ORR      r1,r1,#0x10
000012  6001              STR      r1,[r0,#0]
;;;227    }
000014  490b              LDR      r1,|L8.68|
000016  7809              LDRB     r1,[r1,#0]  ; work_stat
000018  2903              CMP      r1,#3
00001a  d003              BEQ      |L8.36|
00001c  490a              LDR      r1,|L8.72|
00001e  7809              LDRB     r1,[r1,#0]  ; REV_STAT
000020  b119              CBZ      r1,|L8.42|
000022  e007              B        |L8.52|
                  |L8.36|
000024  4909              LDR      r1,|L8.76|
000026  7809              LDRB     r1,[r1,#0]  ; bRAZR
000028  b121              CBZ      r1,|L8.52|
                  |L8.42|
00002a  6941              LDR      r1,[r0,#0x14]
00002c  f0210110          BIC      r1,r1,#0x10
                  |L8.48|
000030  6141              STR      r1,[r0,#0x14]
000032  4770              BX       lr
                  |L8.52|
000034  6941              LDR      r1,[r0,#0x14]
000036  f0410110          ORR      r1,r1,#0x10
00003a  e7f9              B        |L8.48|
;;;228    
                          ENDP

                  |L8.60|
                          DCD      0x4002c000
                  |L8.64|
                          DCD      0x2009c000
                  |L8.68|
                          DCD      work_stat
                  |L8.72|
                          DCD      REV_STAT
                  |L8.76|
                          DCD      bRAZR

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        2048
                  adc_buff_
                          %        32
                  adc_buff__
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.11||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.11||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.12||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.12||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.19||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.21||, DATA, ALIGN=1

                          EXPORTAS ||area_number.21||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.22||, DATA, ALIGN=0

                          EXPORTAS ||area_number.22||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.23||, DATA, ALIGN=1

                          EXPORTAS ||area_number.23||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  vent_stat
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  adc_self_ch_cnt
000000  00                DCB      0x00
                  adc_ch_net
000001  00                DCB      0x00
                  adc_ch
000002  00                DCB      0x00
                  adc_ch_cnt
000003  00                DCB      0x00
                  adc_window_flag
000004  00                DCB      0x00
                  sh_cnt0
000005  00                DCB      0x00
                  b1Hz_sh
000006  00                DCB      0x00
                  sh_cnt1
000007  00                DCB      0x00
                  bFAST_REG
000008  00                DCB      0x00
                  bU_VALID
000009  00                DCB      0x00
                  bU_VALID_VALID
00000a  00                DCB      0x00
                  bPRECESSION_REG
00000b  00                DCB      0x00
                  bVOLT_IS_NOT_DOWN
00000c  00                DCB      0x00
                  bVOLT_IS_NOT_UP
00000d  00                DCB      0x00
                  bVOLT_IS_NORM
00000e  00                DCB      0x00
                  net_in_drv_cnt_B
00000f  00                DCB      0x00
                  net_in_drv_cnt_C
000010  00                DCB      0x00
                  net_in_drv_stat_B
000011  00                DCB      0x00
                  net_in_drv_stat_C
000012  0000              DCB      0x00,0x00
                  cntrl_stat_U
000014  03e8              DCW      0x03e8
                  cntrl_stat_I
000016  03e8              DCW      0x03e8
                  net_buff_
000018  0000              DCB      0x00,0x00
                  adc_result
00001a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00001c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00001e  0000              DCB      0x00,0x00
                  adc_window_cnt
000020  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000022  0000              DCB      0x00,0x00
                  samokalibr_cnt
000024  0000              DCB      0x00,0x00
                  main_kb_cnt
000026  0000              DCB      0x00,0x00
                  cnt_volt_contr
000028  0000              DCB      0x00,0x00
                  cnt_rel_volt_umin
00002a  0000              DCB      0x00,0x00
                  cnt_rel_volt_umax
00002c  0000              DCB      0x00,0x00
                  rele_stat
00002e  0000              DCB      0x00,0x00
                  adc_self_ch_buff
                          DCDU     0x00000000
000034  0000              DCB      0x00,0x00
                  adc_self_ch_disp
000036  0000              DCB      0x00,0x00
                          DCDU     0x00000000

                          AREA ||area_number.26||, DATA, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.data||
                  cntrl_stat_old
000000  0258              DCW      0x0258

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=0

                          EXPORTAS ||area_number.29||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=0

                          EXPORTAS ||area_number.35||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.36||, DATA, ALIGN=2

                          EXPORTAS ||area_number.36||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.37||, DATA, ALIGN=1

                          EXPORTAS ||area_number.37||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.38||, DATA, ALIGN=1

                          EXPORTAS ||area_number.38||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.39||, DATA, ALIGN=1

                          EXPORTAS ||area_number.39||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  plazma_sk
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  cntrl_stat_new
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=1

                          EXPORTAS ||area_number.42||, ||.data||
                  Ibmax
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  ch_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  b1Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  i
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  iiii
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=1

                          EXPORTAS ||area_number.50||, ||.data||
                  IZMAX_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.51||, DATA, ALIGN=1

                          EXPORTAS ||area_number.51||, ||.data||
                  kb_cnt_1lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.52||, DATA, ALIGN=1

                          EXPORTAS ||area_number.52||, ||.data||
                  kb_cnt_2lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.53||, DATA, ALIGN=0

                          EXPORTAS ||area_number.53||, ||.data||
                  kb_full_ver
000000  00                DCB      0x00

                          AREA ||area_number.54||, DATA, ALIGN=0

                          EXPORTAS ||area_number.54||, ||.data||
                  kb_start
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.55||, DATA, ALIGN=0

                          EXPORTAS ||area_number.55||, ||.data||
                  num_of_wrks_bps
000000  00                DCB      0x00

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=0

                          EXPORTAS ||area_number.57||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.58||, DATA, ALIGN=0

                          EXPORTAS ||area_number.58||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.59||, DATA, ALIGN=0

                          EXPORTAS ||area_number.59||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.60||, DATA, ALIGN=1

                          EXPORTAS ||area_number.60||, ||.data||
                  bps_on_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.61||, DATA, ALIGN=1

                          EXPORTAS ||area_number.61||, ||.data||
                  bps_off_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.62||, DATA, ALIGN=0

                          EXPORTAS ||area_number.62||, ||.data||
                  num_necc_up
000000  00                DCB      0x00

                          AREA ||area_number.63||, DATA, ALIGN=0

                          EXPORTAS ||area_number.63||, ||.data||
                  num_necc_down
000000  00                DCB      0x00

                          AREA ||area_number.64||, DATA, ALIGN=0

                          EXPORTAS ||area_number.64||, ||.data||
                  spc_stat
000000  00                DCB      0x00

                          AREA ||area_number.65||, DATA, ALIGN=0

                          EXPORTAS ||area_number.65||, ||.data||
                  spc_bat
000000  00                DCB      0x00

                          AREA ||area_number.66||, DATA, ALIGN=0

                          EXPORTAS ||area_number.66||, ||.data||
                  spc_phase
000000  00                DCB      0x00

                          AREA ||area_number.67||, DATA, ALIGN=1

                          EXPORTAS ||area_number.67||, ||.data||
                  vz_cnt_s
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.68||, DATA, ALIGN=1

                          EXPORTAS ||area_number.68||, ||.data||
                  vz_cnt_s_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.69||, DATA, ALIGN=1

                          EXPORTAS ||area_number.69||, ||.data||
                  vz_cnt_h
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.70||, DATA, ALIGN=1

                          EXPORTAS ||area_number.70||, ||.data||
                  vz_cnt_h_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.71||, DATA, ALIGN=0

                          EXPORTAS ||area_number.71||, ||.data||
                  bAVZ
000000  00                DCB      0x00

                          AREA ||area_number.72||, DATA, ALIGN=0

                          EXPORTAS ||area_number.72||, ||.data||
                  ke_start_stat
000000  00                DCB      0x00

                          AREA ||area_number.73||, DATA, ALIGN=1

                          EXPORTAS ||area_number.73||, ||.data||
                  cnt_end_ke
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.74||, DATA, ALIGN=2

                          EXPORTAS ||area_number.74||, ||.data||
                  ke_date
                          %        8

                          AREA ||area_number.75||, DATA, ALIGN=1

                          EXPORTAS ||area_number.75||, ||.data||
                  __ee_vz_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.76||, DATA, ALIGN=1

                          EXPORTAS ||area_number.76||, ||.data||
                  __ee_spc_stat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.77||, DATA, ALIGN=1

                          EXPORTAS ||area_number.77||, ||.data||
                  __ee_spc_bat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.78||, DATA, ALIGN=1

                          EXPORTAS ||area_number.78||, ||.data||
                  __ee_spc_phase
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.79||, DATA, ALIGN=1

                          EXPORTAS ||area_number.79||, ||.data||
                  cntrl_stat_blok_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.80||, DATA, ALIGN=1

                          EXPORTAS ||area_number.80||, ||.data||
                  cntrl_stat_blok_cnt_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.81||, DATA, ALIGN=1

                          EXPORTAS ||area_number.81||, ||.data||
                  cntrl_stat_blok_cnt_plus
                          DCDU     0x00000000

                          AREA ||area_number.82||, DATA, ALIGN=1

                          EXPORTAS ||area_number.82||, ||.data||
                  cntrl_stat_blok_cnt_minus
                          DCDU     0x00000000

                          AREA ||area_number.83||, DATA, ALIGN=0

                          EXPORTAS ||area_number.83||, ||.data||
                  plazma_inv
                          DCDU     0x00000000

                          AREA ||area_number.84||, DATA, ALIGN=0

                          EXPORTAS ||area_number.84||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.85||, DATA, ALIGN=2

                          EXPORTAS ||area_number.85||, ||.data||
                  temp_temp_SL
                          DCD      0x00000000
