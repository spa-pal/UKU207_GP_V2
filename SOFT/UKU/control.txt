; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  kb_init PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  4805              LDR      r0,|L1.24|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f06f013b          MVN      r1,#0x3b
000006  8800              LDRH     r0,[r0,#0]  ; TBAT
000008  ebc01000          RSB      r0,r0,r0,LSL #4
00000c  eb010080          ADD      r0,r1,r0,LSL #2
000010  4902              LDR      r1,|L1.28|
000012  84c8              STRH     r0,[r1,#0x26]
;;;227    }
000014  4770              BX       lr
;;;228    
                          ENDP

000016  0000              DCW      0x0000
                  |L1.24|
                          DCD      TBAT
                  |L1.28|
                          DCD      ||area_number.25||

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  4902              LDR      r1,|L2.12|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f24060f9          MOV      r0,#0x6f9
000006  8488              STRH     r0,[r1,#0x24]
000008  4770              BX       lr
;;;227    }
;;;228    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.25||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  samokalibr_hndl PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  b510              PUSH     {r4,lr}
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  4c19              LDR      r4,|L3.104|
000004  8ca0              LDRH     r0,[r4,#0x24]  ; samokalibr_cnt
000006  1c40              ADDS     r0,r0,#1
000008  b200              SXTH     r0,r0
00000a  84a0              STRH     r0,[r4,#0x24]
00000c  f5b06fe1          CMP      r0,#0x708
000010  db02              BLT      |L3.24|
000012  2000              MOVS     r0,#0
;;;227    }
000014  84a0              STRH     r0,[r4,#0x24]
                  |L3.22|
000016  bd10              POP      {r4,pc}
                  |L3.24|
000018  f5b06fdf          CMP      r0,#0x6f8
00001c  d911              BLS      |L3.66|
00001e  230f              MOVS     r3,#0xf
000020  2201              MOVS     r2,#1
000022  2164              MOVS     r1,#0x64
000024  20d2              MOVS     r0,#0xd2
000026  f7fffffe          BL       mess_send
00002a  230f              MOVS     r3,#0xf
00002c  2200              MOVS     r2,#0
00002e  21d8              MOVS     r1,#0xd8
000030  20d7              MOVS     r0,#0xd7
000032  f7fffffe          BL       mess_send
000036  230f              MOVS     r3,#0xf
000038  2200              MOVS     r2,#0
00003a  21d8              MOVS     r1,#0xd8
00003c  20dc              MOVS     r0,#0xdc
00003e  f7fffffe          BL       mess_send
                  |L3.66|
000042  f9b40024          LDRSH    r0,[r4,#0x24]  ; samokalibr_cnt
000046  f5a061e0          SUB      r1,r0,#0x700
00004a  3907              SUBS     r1,#7
00004c  d1e3              BNE      |L3.22|
00004e  4807              LDR      r0,|L3.108|
000050  4a07              LDR      r2,|L3.112|
000052  8801              LDRH     r1,[r0,#0]  ; ad7705_buff_
000054  6812              LDR      r2,[r2,#0]  ; Kiload0
000056  4291              CMP      r1,r2
000058  d0dd              BEQ      |L3.22|
00005a  f9b01000          LDRSH    r1,[r0,#0]  ; ad7705_buff_
00005e  e8bd4010          POP      {r4,lr}
000062  2014              MOVS     r0,#0x14
000064  f7ffbffe          B.W      lc640_write_int
;;;228    
                          ENDP

                  |L3.104|
                          DCD      ||area_number.25||
                  |L3.108|
                          DCD      ad7705_buff_
                  |L3.112|
                          DCD      Kiload0

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  unet_drv PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  4a0d              LDR      r2,|L4.56|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  b430              PUSH     {r4,r5}
000004  490d              LDR      r1,|L4.60|
000006  f9b2400a          LDRSH    r4,[r2,#0xa]  ; adc_buff_
00000a  f64053ac          MOV      r3,#0xdac
00000e  f9b10000          LDRSH    r0,[r1,#0]
000012  429c              CMP      r4,r3
;;;227    }
000014  dc03              BGT      |L4.30|
000016  f9b22014          LDRSH    r2,[r2,#0x14]  ; adc_buff_
00001a  429a              CMP      r2,r3
00001c  dd03              BLE      |L4.38|
                  |L4.30|
00001e  2814              CMP      r0,#0x14
000020  da04              BGE      |L4.44|
000022  1c40              ADDS     r0,r0,#1
000024  e001              B        |L4.42|
                  |L4.38|
000026  b108              CBZ      r0,|L4.44|
000028  1e40              SUBS     r0,r0,#1
                  |L4.42|
00002a  8008              STRH     r0,[r1,#0]
                  |L4.44|
00002c  2214              MOVS     r2,#0x14
00002e  bc30              POP      {r4,r5}
000030  2100              MOVS     r1,#0
000032  4802              LDR      r0,|L4.60|
000034  f7ffbffe          B.W      gran
;;;228    
                          ENDP

                  |L4.56|
                          DCD      ||.bss||+0x800
                  |L4.60|
                          DCD      unet_drv_cnt

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  matemat PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  b5f0              PUSH     {r4-r7,lr}
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  48fd              LDR      r0,|L5.1016|
000004  49fd              LDR      r1,|L5.1020|
000006  f44f72fa          MOV      r2,#0x1f4
00000a  f9b00000          LDRSH    r0,[r0,#0]  ; adc_buff_
00000e  f9b11000          LDRSH    r1,[r1,#0]  ; Kuload
000012  4bfb              LDR      r3,|L5.1024|
;;;227    }
000014  4348              MULS     r0,r1,r0
000016  fb90f0f2          SDIV     r0,r0,r2
00001a  8018              STRH     r0,[r3,#0]
00001c  48f6              LDR      r0,|L5.1016|
00001e  f2413388          MOV      r3,#0x1388
000022  3020              ADDS     r0,r0,#0x20
000024  4dfc              LDR      r5,|L5.1048|
000026  f9b00000          LDRSH    r0,[r0,#0]  ; adc_buff__
00002a  4348              MULS     r0,r1,r0
00002c  fb90f0f2          SDIV     r0,r0,r2
000030  49f4              LDR      r1,|L5.1028|
000032  4af8              LDR      r2,|L5.1044|
000034  8008              STRH     r0,[r1,#0]
000036  49f5              LDR      r1,|L5.1036|
000038  48f3              LDR      r0,|L5.1032|
00003a  680c              LDR      r4,[r1,#0]  ; Kiload0
00003c  49f4              LDR      r1,|L5.1040|
00003e  8800              LDRH     r0,[r0,#0]  ; ad7705_buff_
000040  f9b11000          LDRSH    r1,[r1,#0]  ; Kiload1
000044  1b00              SUBS     r0,r0,r4
000046  4348              MULS     r0,r1,r0
000048  fb90f0f3          SDIV     r0,r0,r3
00004c  8010              STRH     r0,[r2,#0]
00004e  1b00              SUBS     r0,r0,r4
000050  4348              MULS     r0,r1,r0
000052  fb90f0f3          SDIV     r0,r0,r3
000056  8028              STRH     r0,[r5,#0]
000058  48f0              LDR      r0,|L5.1052|
00005a  4bf2              LDR      r3,|L5.1060|
00005c  8801              LDRH     r1,[r0,#0]  ; I_LOAD_MODE
00005e  48f0              LDR      r0,|L5.1056|
000060  f9b04000          LDRSH    r4,[r0,#0]
000064  b981              CBNZ     r1,|L5.136|
000066  2000              MOVS     r0,#0
000068  4601              MOV      r1,r0
00006a  e009              B        |L5.128|
                  |L5.108|
00006c  ebc106c1          RSB      r6,r1,r1,LSL #3
000070  eb060646          ADD      r6,r6,r6,LSL #1
000074  eb030686          ADD      r6,r3,r6,LSL #2
000078  1c49              ADDS     r1,r1,#1
00007a  6a36              LDR      r6,[r6,#0x20]
00007c  b2c9              UXTB     r1,r1
00007e  4430              ADD      r0,r0,r6
                  |L5.128|
000080  42a1              CMP      r1,r4
000082  dbf3              BLT      |L5.108|
000084  8010              STRH     r0,[r2,#0]
000086  8028              STRH     r0,[r5,#0]
                  |L5.136|
000088  f9b20000          LDRSH    r0,[r2,#0]  ; load_I
00008c  2100              MOVS     r1,#0
00008e  2800              CMP      r0,#0
000090  da00              BGE      |L5.148|
000092  8011              STRH     r1,[r2,#0]
                  |L5.148|
000094  f05f0200          MOVS.W   r2,#0
                  |L5.152|
000098  ebc200c2          RSB      r0,r2,r2,LSL #3
00009c  eb000040          ADD      r0,r0,r0,LSL #1
0000a0  eb030080          ADD      r0,r3,r0,LSL #2
0000a4  78c5              LDRB     r5,[r0,#3]
0000a6  2d19              CMP      r5,#0x19
0000a8  d21b              BCS      |L5.226|
0000aa  7985              LDRB     r5,[r0,#6]
0000ac  79c6              LDRB     r6,[r0,#7]
0000ae  eb052606          ADD      r6,r5,r6,LSL #8
0000b2  6206              STR      r6,[r0,#0x20]
0000b4  7a06              LDRB     r6,[r0,#8]
0000b6  7a47              LDRB     r7,[r0,#9]
0000b8  eb062607          ADD      r6,r6,r7,LSL #8
0000bc  61c6              STR      r6,[r0,#0x1c]
0000be  7a86              LDRB     r6,[r0,#0xa]
0000c0  7ac7              LDRB     r7,[r0,#0xb]
0000c2  eb062607          ADD      r6,r6,r7,LSL #8
0000c6  6186              STR      r6,[r0,#0x18]
0000c8  7b06              LDRB     r6,[r0,#0xc]
0000ca  6246              STR      r6,[r0,#0x24]
0000cc  f880504e          STRB     r5,[r0,#0x4e]
0000d0  7b85              LDRB     r5,[r0,#0xe]
0000d2  f880503e          STRB     r5,[r0,#0x3e]
0000d6  7c05              LDRB     r5,[r0,#0x10]
0000d8  7c46              LDRB     r6,[r0,#0x11]
0000da  eb052506          ADD      r5,r5,r6,LSL #8
0000de  6485              STR      r5,[r0,#0x48]
0000e0  e006              B        |L5.240|
                  |L5.226|
0000e2  6181              STR      r1,[r0,#0x18]
0000e4  6201              STR      r1,[r0,#0x20]
0000e6  61c1              STR      r1,[r0,#0x1c]
0000e8  6241              STR      r1,[r0,#0x24]
0000ea  f880103e          STRB     r1,[r0,#0x3e]
0000ee  6481              STR      r1,[r0,#0x48]
                  |L5.240|
0000f0  1c52              ADDS     r2,r2,#1
0000f2  b2d2              UXTB     r2,r2
0000f4  2a20              CMP      r2,#0x20
0000f6  d3cf              BCC      |L5.152|
0000f8  48cb              LDR      r0,|L5.1064|
0000fa  49cc              LDR      r1,|L5.1068|
0000fc  8800              LDRH     r0,[r0,#0]  ; I_MAX
0000fe  4360              MULS     r0,r4,r0
000100  8008              STRH     r0,[r1,#0]
000102  48cb              LDR      r0,|L5.1072|
000104  49cb              LDR      r1,|L5.1076|
000106  8800              LDRH     r0,[r0,#0]  ; I_MIN
000108  4360              MULS     r0,r4,r0
00010a  8008              STRH     r0,[r1,#0]
00010c  bdf0              POP      {r4-r7,pc}
;;;228    
                          ENDP

                  adc_init PROC
;;;357    //-----------------------------------------------
;;;358    void adc_init(void)
00010e  48ca              LDR      r0,|L5.1080|
;;;359    {
;;;360    
;;;361    SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
000110  6841              LDR      r1,[r0,#4]
000112  f4212140          BIC      r1,r1,#0xc0000
000116  f4412180          ORR      r1,r1,#0x40000
00011a  6041              STR      r1,[r0,#4]
;;;362    SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
00011c  6841              LDR      r1,[r0,#4]
00011e  f4213140          BIC      r1,r1,#0x30000
000122  f4413180          ORR      r1,r1,#0x10000
000126  6041              STR      r1,[r0,#4]
;;;363    SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
000128  6841              LDR      r1,[r0,#4]
00012a  f4214140          BIC      r1,r1,#0xc000
00012e  f4414180          ORR      r1,r1,#0x4000
000132  6041              STR      r1,[r0,#4]
;;;364    
;;;365    
;;;366    SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
000134  6c41              LDR      r1,[r0,#0x44]
000136  f4212140          BIC      r1,r1,#0xc0000
00013a  f4412100          ORR      r1,r1,#0x80000
00013e  6441              STR      r1,[r0,#0x44]
;;;367    SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
000140  6c41              LDR      r1,[r0,#0x44]
000142  f4213140          BIC      r1,r1,#0x30000
000146  f4413100          ORR      r1,r1,#0x20000
00014a  6441              STR      r1,[r0,#0x44]
;;;368    SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
00014c  6c41              LDR      r1,[r0,#0x44]
00014e  f4214140          BIC      r1,r1,#0xc000
000152  f4414100          ORR      r1,r1,#0x8000
000156  6441              STR      r1,[r0,#0x44]
;;;369    
;;;370    SET_REG(LPC_ADC->ADCR,0,24,3);
000158  48b8              LDR      r0,|L5.1084|
00015a  6801              LDR      r1,[r0,#0]
00015c  f02161e0          BIC      r1,r1,#0x7000000
000160  6001              STR      r1,[r0,#0]
;;;371    
;;;372    SET_REG(LPC_ADC->ADCR,1,21,1);
000162  6801              LDR      r1,[r0,#0]
000164  f4411100          ORR      r1,r1,#0x200000
000168  6001              STR      r1,[r0,#0]
;;;373    SET_REG(LPC_ADC->ADCR,0,16,1);
00016a  6801              LDR      r1,[r0,#0]
00016c  f4213180          BIC      r1,r1,#0x10000
000170  6001              STR      r1,[r0,#0]
;;;374    SET_REG(LPC_ADC->ADCR,1,8,8);
000172  6801              LDR      r1,[r0,#0]
000174  f421417f          BIC      r1,r1,#0xff00
000178  f4417180          ORR      r1,r1,#0x100
00017c  6001              STR      r1,[r0,#0]
;;;375    
;;;376    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;377    //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;378    	
;;;379    	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;380         /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;381         else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;382    
;;;383    LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
00017e  1581              ASRS     r1,r0,#22
000180  60c1              STR      r1,[r0,#0xc]
000182  48af              LDR      r0,|L5.1088|
000184  0389              LSLS     r1,r1,#14
000186  6001              STR      r1,[r0,#0]
;;;384    
;;;385    NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;386    
;;;387    
;;;388    }
000188  4770              BX       lr
;;;389    
                          ENDP

                  net_in_drv PROC
;;;390    //-----------------------------------------------
;;;391    void net_in_drv(void)
00018a  b5f0              PUSH     {r4-r7,lr}
;;;392    {
;;;393    if(adc_buff_[10]<3500)
00018c  4d9a              LDR      r5,|L5.1016|
;;;394    	{
;;;395    	if(net_in_drv_cnt_B	< 20)
00018e  48ad              LDR      r0,|L5.1092|
;;;396    		{
;;;397    		net_in_drv_cnt_B++;
;;;398    		}
;;;399    	else if(net_in_drv_cnt_B>20)net_in_drv_cnt_B=0; 
;;;400    	}
;;;401    else
;;;402    	{
;;;403    	if(net_in_drv_cnt_B)
;;;404    		{
;;;405    		net_in_drv_cnt_B--;
;;;406    		}
;;;407    	}			 
;;;408    if(net_in_drv_cnt_B>=19) 
;;;409    	{
;;;410    	net_in_drv_stat_B=1;
;;;411    	gp_av_stat&=~0x00000001;
000190  49ad              LDR      r1,|L5.1096|
000192  f9b57014          LDRSH    r7,[r5,#0x14]         ;393  ; adc_buff_
000196  f64056ac          MOV      r6,#0xdac             ;393
00019a  f990200f          LDRSB    r2,[r0,#0xf]          ;395
00019e  2300              MOVS     r3,#0                 ;399
0001a0  680c              LDR      r4,[r1,#0]            ;393
0001a2  f04f0c01          MOV      r12,#1                ;410
0001a6  42b7              CMP      r7,r6                 ;393
0001a8  da07              BGE      |L5.442|
0001aa  2a14              CMP      r2,#0x14              ;395
0001ac  da02              BGE      |L5.436|
0001ae  f1020201          ADD      r2,r2,#1              ;397
0001b2  e004              B        |L5.446|
                  |L5.436|
0001b4  dd04              BLE      |L5.448|
0001b6  73c3              STRB     r3,[r0,#0xf]          ;399
0001b8  e00d              B        |L5.470|
                  |L5.442|
0001ba  b162              CBZ      r2,|L5.470|
0001bc  1e52              SUBS     r2,r2,#1              ;405
                  |L5.446|
0001be  73c2              STRB     r2,[r0,#0xf]          ;405
                  |L5.448|
0001c0  f990200f          LDRSB    r2,[r0,#0xf]          ;408  ; net_in_drv_cnt_B
0001c4  2a13              CMP      r2,#0x13              ;408
0001c6  db04              BLT      |L5.466|
0001c8  f880c011          STRB     r12,[r0,#0x11]        ;410
0001cc  f0240201          BIC      r2,r4,#1
0001d0  e004              B        |L5.476|
                  |L5.466|
;;;412    	}
;;;413    else if(net_in_drv_cnt_B<=2) 
0001d2  2a02              CMP      r2,#2
0001d4  dc03              BGT      |L5.478|
                  |L5.470|
;;;414    	{
;;;415    	net_in_drv_stat_B=0;
0001d6  7443              STRB     r3,[r0,#0x11]
;;;416    	gp_av_stat|=0x00000001;
0001d8  f0440201          ORR      r2,r4,#1
                  |L5.476|
0001dc  600a              STR      r2,[r1,#0]  ; gp_av_stat
                  |L5.478|
0001de  4a99              LDR      r2,|L5.1092|
;;;417    		
;;;418    	}
;;;419    
;;;420    if(adc_buff_[5]<3500)
0001e0  f9b5400a          LDRSH    r4,[r5,#0xa]  ; adc_buff_
;;;421    	{
;;;422    	if(net_in_drv_cnt_C	< 20)
0001e4  f9922010          LDRSB    r2,[r2,#0x10]
0001e8  42b4              CMP      r4,r6                 ;420
0001ea  da07              BGE      |L5.508|
0001ec  2a14              CMP      r2,#0x14
0001ee  da02              BGE      |L5.502|
;;;423    		{
;;;424    		net_in_drv_cnt_C++;
0001f0  f1020201          ADD      r2,r2,#1
0001f4  e004              B        |L5.512|
                  |L5.502|
;;;425    		}
;;;426    	else if(net_in_drv_cnt_C>20)net_in_drv_cnt_C=0; 
0001f6  dd04              BLE      |L5.514|
0001f8  7403              STRB     r3,[r0,#0x10]
0001fa  e00e              B        |L5.538|
                  |L5.508|
;;;427    	}
;;;428    else
;;;429    	{
;;;430    	if(net_in_drv_cnt_C)
0001fc  b16a              CBZ      r2,|L5.538|
;;;431    		{
;;;432    		net_in_drv_cnt_C--;
0001fe  1e52              SUBS     r2,r2,#1
                  |L5.512|
000200  7402              STRB     r2,[r0,#0x10]
                  |L5.514|
;;;433    		}
;;;434    	}			 
;;;435    if(net_in_drv_cnt_C>=19) 
000202  f9902010          LDRSB    r2,[r0,#0x10]  ; net_in_drv_cnt_C
000206  2a13              CMP      r2,#0x13
000208  db05              BLT      |L5.534|
;;;436    	{
;;;437    	net_in_drv_stat_C=1;
00020a  f880c012          STRB     r12,[r0,#0x12]
;;;438    	gp_av_stat&=~0x00000002;
00020e  6808              LDR      r0,[r1,#0]  ; gp_av_stat
000210  f0200002          BIC      r0,r0,#2
000214  e005              B        |L5.546|
                  |L5.534|
;;;439    	}
;;;440    else if(net_in_drv_cnt_C<=2) 
000216  2a02              CMP      r2,#2
000218  dc04              BGT      |L5.548|
                  |L5.538|
;;;441    	{
;;;442    	net_in_drv_stat_C=0;
00021a  7483              STRB     r3,[r0,#0x12]
;;;443    	gp_av_stat|=0x00000002;
00021c  6808              LDR      r0,[r1,#0]  ; gp_av_stat
00021e  f0400002          ORR      r0,r0,#2
                  |L5.546|
000222  6008              STR      r0,[r1,#0]            ;438  ; gp_av_stat
                  |L5.548|
;;;444    	}
;;;445    }	   
000224  bdf0              POP      {r4-r7,pc}
;;;446    
                          ENDP

                  adc_drv7 PROC
;;;447    //-----------------------------------------------
;;;448    void adc_drv7(void) //(Uсети - постоянка)
000226  e92d41f0          PUSH     {r4-r8,lr}
;;;449    {
;;;450    //int temp_S;
;;;451    //char i;
;;;452    //signed short temp_SS;
;;;453    
;;;454    adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
00022a  4c86              LDR      r4,|L5.1092|
00022c  3430              ADDS     r4,r4,#0x30
00022e  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000230  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000232  1a40              SUBS     r0,r0,r1
000234  b200              SXTH     r0,r0
000236  f7fffffe          BL       abs_pal
00023a  1da5              ADDS     r5,r4,#6
00023c  8028              STRH     r0,[r5,#0]
;;;455    adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
00023e  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000240  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
000242  1a40              SUBS     r0,r0,r1
000244  b200              SXTH     r0,r0
000246  f7fffffe          BL       abs_pal
00024a  8068              STRH     r0,[r5,#2]
;;;456    adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
00024c  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00024e  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000250  1a40              SUBS     r0,r0,r1
000252  b200              SXTH     r0,r0
000254  f7fffffe          BL       abs_pal
;;;457    
;;;458    //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;459    //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;460    //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;461    
;;;462    
;;;463    if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
000258  f44f7296          MOV      r2,#0x12c
;;;464    	{
;;;465    	adc_result=adc_self_ch_buff[2];
00025c  4979              LDR      r1,|L5.1092|
00025e  80a8              STRH     r0,[r5,#4]            ;456
000260  4290              CMP      r0,r2                 ;463
000262  da01              BGE      |L5.616|
000264  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000266  e00a              B        |L5.638|
                  |L5.616|
;;;466    	} 
;;;467    else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
000268  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
00026c  4290              CMP      r0,r2
00026e  da01              BGE      |L5.628|
;;;468    	{
;;;469    	adc_result=adc_self_ch_buff[1];
000270  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000272  e004              B        |L5.638|
                  |L5.628|
;;;470    	}
;;;471    else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
000274  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
000278  4290              CMP      r0,r2
00027a  da01              BGE      |L5.640|
;;;472    	{
;;;473    	adc_result=adc_self_ch_buff[0];
00027c  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L5.638|
00027e  8348              STRH     r0,[r1,#0x1a]
                  |L5.640|
;;;474    	}
;;;475        //adc_result=92;
;;;476    
;;;477    if(adc_ch_net)
000280  784c              LDRB     r4,[r1,#1]  ; adc_ch_net
000282  2300              MOVS     r3,#0
000284  b31c              CBZ      r4,|L5.718|
;;;478    	{
;;;479    
;;;480    	main_power_buffer[0]+=(long)(adc_result);
000286  485c              LDR      r0,|L5.1016|
000288  f9b1201a          LDRSH    r2,[r1,#0x1a]  ; adc_result
00028c  3040              ADDS     r0,r0,#0x40
00028e  6805              LDR      r5,[r0,#0]  ; main_power_buffer
000290  4415              ADD      r5,r5,r2
;;;481    	main_power_buffer[1]+=(long)(adc_result);
000292  6005              STR      r5,[r0,#0]  ; main_power_buffer
000294  6845              LDR      r5,[r0,#4]  ; main_power_buffer
000296  4415              ADD      r5,r5,r2
;;;482    	main_power_buffer[2]+=(long)(adc_result);
000298  6045              STR      r5,[r0,#4]  ; main_power_buffer
00029a  6885              LDR      r5,[r0,#8]  ; main_power_buffer
00029c  4415              ADD      r5,r5,r2
;;;483    	main_power_buffer[3]+=(long)(adc_result);
00029e  6085              STR      r5,[r0,#8]  ; main_power_buffer
0002a0  68c5              LDR      r5,[r0,#0xc]  ; main_power_buffer
0002a2  442a              ADD      r2,r2,r5
;;;484    
;;;485    	adc_net_buff_cnt++;
0002a4  60c2              STR      r2,[r0,#0xc]  ; main_power_buffer
0002a6  8c4a              LDRH     r2,[r1,#0x22]  ; adc_net_buff_cnt
0002a8  1c52              ADDS     r2,r2,#1
0002aa  b212              SXTH     r2,r2
0002ac  844a              STRH     r2,[r1,#0x22]
;;;486    	if(adc_net_buff_cnt>=0x1000)
0002ae  f5b25f80          CMP      r2,#0x1000
0002b2  db00              BLT      |L5.694|
;;;487    		{
;;;488    		adc_net_buff_cnt=0;
0002b4  844b              STRH     r3,[r1,#0x22]
                  |L5.694|
;;;489    		}
;;;490    	if((adc_net_buff_cnt&0x03ff)==0)
0002b6  f9b12022          LDRSH    r2,[r1,#0x22]  ; adc_net_buff_cnt
0002ba  0595              LSLS     r5,r2,#22
0002bc  d135              BNE      |L5.810|
;;;491    		{
;;;492    		#ifdef UKU_220
;;;493    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;494    		#else
;;;495    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
0002be  1292              ASRS     r2,r2,#10
0002c0  f8505022          LDR      r5,[r0,r2,LSL #2]
0002c4  122d              ASRS     r5,r5,#8
0002c6  830d              STRH     r5,[r1,#0x18]
;;;496    		#endif
;;;497    		main_power_buffer[adc_net_buff_cnt>>10]=0;
0002c8  f8403022          STR      r3,[r0,r2,LSL #2]
0002cc  e02d              B        |L5.810|
                  |L5.718|
;;;498    		}
;;;499    
;;;500    
;;;501    	} 
;;;502    else if(!adc_ch_net)
;;;503    	{
;;;504    	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
0002ce  4f5f              LDR      r7,|L5.1100|
0002d0  7888              LDRB     r0,[r1,#2]  ; adc_ch
0002d2  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
0002d6  eb0712c0          ADD      r2,r7,r0,LSL #7
0002da  f9b1e01a          LDRSH    lr,[r1,#0x1a]  ; adc_result
0002de  f842e02c          STR      lr,[r2,r12,LSL #2]
;;;505    	
;;;506    	if((adc_ch_cnt&0x03)==0)
0002e2  ea5f728c          LSLS     r2,r12,#30
0002e6  d112              BNE      |L5.782|
;;;507    		{
;;;508    		long temp_L;
;;;509    		char i;
;;;510    		temp_L=0;
0002e8  2500              MOVS     r5,#0
;;;511    		for(i=0;i<32;i++)
0002ea  462a              MOV      r2,r5
;;;512    			{
;;;513    			temp_L+=adc_buff[adc_ch][i];
0002ec  eb0716c0          ADD      r6,r7,r0,LSL #7
                  |L5.752|
0002f0  f8567022          LDR      r7,[r6,r2,LSL #2]
0002f4  1c52              ADDS     r2,r2,#1              ;511
0002f6  b2d2              UXTB     r2,r2                 ;511
0002f8  443d              ADD      r5,r5,r7
0002fa  2a20              CMP      r2,#0x20              ;511
0002fc  d3f8              BCC      |L5.752|
;;;514    			}
;;;515    		adc_buff_[adc_ch]= (short)(temp_L>>5);
0002fe  116a              ASRS     r2,r5,#5
000300  4d3d              LDR      r5,|L5.1016|
000302  f8252010          STRH     r2,[r5,r0,LSL #1]
;;;516    		adc_buff__[adc_ch]= adc_buff[adc_ch][adc_ch_cnt];
000306  f1050220          ADD      r2,r5,#0x20
00030a  f822e010          STRH     lr,[r2,r0,LSL #1]
                  |L5.782|
;;;517    		//adc_buff_[3]=346;
;;;518    		}
;;;519    	if(++adc_ch>=16) 
00030e  1c40              ADDS     r0,r0,#1
000310  b2c0              UXTB     r0,r0
000312  7088              STRB     r0,[r1,#2]
000314  2810              CMP      r0,#0x10
000316  d308              BCC      |L5.810|
;;;520    		{
;;;521    		adc_ch=0;
;;;522    		adc_ch_cnt++;
000318  f10c0c01          ADD      r12,r12,#1
00031c  f00c00ff          AND      r0,r12,#0xff
000320  708b              STRB     r3,[r1,#2]            ;521
000322  70c8              STRB     r0,[r1,#3]
;;;523    		if(adc_ch_cnt>=32)adc_ch_cnt=0;
000324  2820              CMP      r0,#0x20
000326  d300              BCC      |L5.810|
000328  70cb              STRB     r3,[r1,#3]
                  |L5.810|
;;;524    		}
;;;525    	}
;;;526    
;;;527      
;;;528    
;;;529    adc_self_ch_cnt=0;
;;;530    
;;;531    adc_ch_net++;
00032a  1c64              ADDS     r4,r4,#1
00032c  700b              STRB     r3,[r1,#0]            ;529
;;;532    adc_ch_net&=1;
00032e  f0140001          ANDS     r0,r4,#1
;;;533    
;;;534    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;535    //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;536    
;;;537    if(adc_ch_net)
;;;538    	{
;;;539    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;540    	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;541    	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
000332  4a42              LDR      r2,|L5.1084|
000334  7048              STRB     r0,[r1,#1]            ;532
000336  d005              BEQ      |L5.836|
000338  6810              LDR      r0,[r2,#0]
00033a  f02000ff          BIC      r0,r0,#0xff
00033e  1d00              ADDS     r0,r0,#4
000340  6010              STR      r0,[r2,#0]
000342  e034              B        |L5.942|
                  |L5.836|
;;;542    	}
;;;543    else
;;;544    	{
;;;545    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;546    	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;547    	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
000344  7889              LDRB     r1,[r1,#2]  ; adc_ch
000346  0708              LSLS     r0,r1,#28
000348  2800              CMP      r0,#0
;;;548    	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
00034a  6810              LDR      r0,[r2,#0]
00034c  f02000ff          BIC      r0,r0,#0xff
000350  db02              BLT      |L5.856|
000352  f1000001          ADD      r0,r0,#1              ;547
000356  e001              B        |L5.860|
                  |L5.856|
000358  f1000002          ADD      r0,r0,#2
                  |L5.860|
00035c  6010              STR      r0,[r2,#0]
;;;549    
;;;550    
;;;551    	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
00035e  483c              LDR      r0,|L5.1104|
000360  6803              LDR      r3,[r0,#0]
000362  f0435380          ORR      r3,r3,#0x10000000
000366  6003              STR      r3,[r0,#0]
;;;552    	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
000368  6a03              LDR      r3,[r0,#0x20]
00036a  f0434380          ORR      r3,r3,#0x40000000
00036e  6203              STR      r3,[r0,#0x20]
;;;553    	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
000370  6e03              LDR      r3,[r0,#0x60]
000372  f0436380          ORR      r3,r3,#0x4000000
000376  6603              STR      r3,[r0,#0x60]
;;;554    
;;;555    	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
000378  07cb              LSLS     r3,r1,#31
;;;556    	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
00037a  6943              LDR      r3,[r0,#0x14]
00037c  d008              BEQ      |L5.912|
00037e  f0435380          ORR      r3,r3,#0x10000000
                  |L5.898|
000382  6143              STR      r3,[r0,#0x14]
;;;557    
;;;558    	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
000384  078b              LSLS     r3,r1,#30
;;;559    	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
000386  6b43              LDR      r3,[r0,#0x34]
000388  d405              BMI      |L5.918|
00038a  f0234380          BIC      r3,r3,#0x40000000     ;558
00038e  e004              B        |L5.922|
                  |L5.912|
000390  f0235380          BIC      r3,r3,#0x10000000     ;555
000394  e7f5              B        |L5.898|
                  |L5.918|
000396  f0434380          ORR      r3,r3,#0x40000000
                  |L5.922|
00039a  6343              STR      r3,[r0,#0x34]
;;;560    
;;;561    	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
00039c  0749              LSLS     r1,r1,#29
;;;562    	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
00039e  6f41              LDR      r1,[r0,#0x74]
0003a0  d402              BMI      |L5.936|
0003a2  f0216180          BIC      r1,r1,#0x4000000      ;561
0003a6  e001              B        |L5.940|
                  |L5.936|
0003a8  f0416180          ORR      r1,r1,#0x4000000
                  |L5.940|
0003ac  6741              STR      r1,[r0,#0x74]         ;561
                  |L5.942|
;;;563    	}
;;;564    	
;;;565    
;;;566    
;;;567    
;;;568    LPC_ADC->ADCR |=  (1<<24);
0003ae  6810              LDR      r0,[r2,#0]
0003b0  f0407080          ORR      r0,r0,#0x1000000
0003b4  6010              STR      r0,[r2,#0]
                  |L5.950|
;;;569    
;;;570    }
0003b6  e8bd81f0          POP      {r4-r8,pc}
;;;571    
                          ENDP

                  avg_hndl PROC
;;;572    //-----------------------------------------------
;;;573    void avg_hndl(void)
0003ba  e92d4ff0          PUSH     {r4-r11,lr}
;;;574    { 
;;;575    char i;
;;;576    
;;;577    
;;;578    
;;;579    #define AVGCNTMAX	5
;;;580    if(avg_main_cnt)
0003be  4925              LDR      r1,|L5.1108|
0003c0  f9b10000          LDRSH    r0,[r1,#0]  ; avg_main_cnt
0003c4  b118              CBZ      r0,|L5.974|
;;;581    	{
;;;582    	avg_main_cnt--;
0003c6  f1a00001          SUB      r0,r0,#1
0003ca  8008              STRH     r0,[r1,#0]
;;;583    	goto avg_hndl_end;
0003cc  e0e5              B        |L5.1434|
                  |L5.974|
;;;584    	}                 
;;;585    
;;;586    avg_main_cnt=10;
0003ce  200a              MOVS     r0,#0xa
0003d0  8008              STRH     r0,[r1,#0]
;;;587    
;;;588    avg_num=0;
0003d2  4921              LDR      r1,|L5.1112|
0003d4  2300              MOVS     r3,#0
;;;589    num_of_dumm_src=100;
0003d6  f8dfb084          LDR      r11,|L5.1116|
;;;590    num_of_max_src=100;
0003da  f8df8084          LDR      r8,|L5.1120|
0003de  700b              STRB     r3,[r1,#0]            ;588
0003e0  2064              MOVS     r0,#0x64              ;589
0003e2  f88b0000          STRB     r0,[r11,#0]           ;589
0003e6  f8880000          STRB     r0,[r8,#0]
;;;591    
;;;592    for(i=0;i<NUMIST;i++)
0003ea  480d              LDR      r0,|L5.1056|
0003ec  461a              MOV      r2,r3
0003ee  f9b04000          LDRSH    r4,[r0,#0]
;;;593    	{
;;;594    	if(/*(bps[i]._state==bsWRK)&&*/(bps[i]._cnt<20))avg_num++;
0003f2  480c              LDR      r0,|L5.1060|
0003f4  e044              B        |L5.1152|
0003f6  0000              DCW      0x0000
                  |L5.1016|
                          DCD      ||.bss||+0x800
                  |L5.1020|
                          DCD      Kuload
                  |L5.1024|
                          DCD      load_U
                  |L5.1028|
                          DCD      load_U_
                  |L5.1032|
                          DCD      ad7705_buff_
                  |L5.1036|
                          DCD      Kiload0
                  |L5.1040|
                          DCD      Kiload1
                  |L5.1044|
                          DCD      load_I
                  |L5.1048|
                          DCD      load_I_
                  |L5.1052|
                          DCD      I_LOAD_MODE
                  |L5.1056|
                          DCD      NUMIST
                  |L5.1060|
                          DCD      bps
                  |L5.1064|
                          DCD      I_MAX
                  |L5.1068|
                          DCD      I_MAX_IPS
                  |L5.1072|
                          DCD      I_MIN
                  |L5.1076|
                          DCD      I_MIN_IPS
                  |L5.1080|
                          DCD      0x4002c000
                  |L5.1084|
                          DCD      0x40034000
                  |L5.1088|
                          DCD      0xe000e100
                  |L5.1092|
                          DCD      ||area_number.25||
                  |L5.1096|
                          DCD      gp_av_stat
                  |L5.1100|
                          DCD      ||.bss||
                  |L5.1104|
                          DCD      0x2009c000
                  |L5.1108|
                          DCD      avg_main_cnt
                  |L5.1112|
                          DCD      avg_num
                  |L5.1116|
                          DCD      num_of_dumm_src
                  |L5.1120|
                          DCD      num_of_max_src
                  |L5.1124|
000464  ebc205c2          RSB      r5,r2,r2,LSL #3
000468  eb050545          ADD      r5,r5,r5,LSL #1
00046c  eb000585          ADD      r5,r0,r5,LSL #2
000470  78ed              LDRB     r5,[r5,#3]
000472  2d14              CMP      r5,#0x14
000474  d202              BCS      |L5.1148|
000476  780d              LDRB     r5,[r1,#0]  ; avg_num
000478  1c6d              ADDS     r5,r5,#1
00047a  700d              STRB     r5,[r1,#0]
                  |L5.1148|
00047c  1c52              ADDS     r2,r2,#1              ;592
00047e  b2d2              UXTB     r2,r2                 ;592
                  |L5.1152|
000480  42a2              CMP      r2,r4                 ;592
000482  dbef              BLT      |L5.1124|
;;;595    	}
;;;596    
;;;597    /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;598    if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;599    if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;600    
;;;601    	
;;;602    if(avg_num<2)
000484  7809              LDRB     r1,[r1,#0]  ; avg_num
000486  468a              MOV      r10,r1
000488  2902              CMP      r1,#2
00048a  d34c              BCC      |L5.1318|
;;;603    	{
;;;604    	goto avg_hndl_end;
;;;605    	
;;;606    	}
;;;607    	
;;;608    else if(bU_VALID_VALID)
00048c  49fa              LDR      r1,|L5.2168|
00048e  7a89              LDRB     r1,[r1,#0xa]  ; bU_VALID_VALID
000490  2900              CMP      r1,#0
000492  d048              BEQ      |L5.1318|
;;;609    	{
;;;610    	i_avg_min=5000;
000494  4af9              LDR      r2,|L5.2172|
000496  f2413188          MOV      r1,#0x1388
;;;611    	i_avg_max=0;
00049a  f8dfc3e4          LDR      r12,|L5.2176|
00049e  6011              STR      r1,[r2,#0]  ; i_avg_min
;;;612    	i_avg_summ=0;
0004a0  4df8              LDR      r5,|L5.2180|
0004a2  f8cc3000          STR      r3,[r12,#0]  ; i_avg_max
;;;613    	for(i=0;i<NUMIST;i++)
0004a6  2100              MOVS     r1,#0
0004a8  602b              STR      r3,[r5,#0]  ; i_avg_summ
0004aa  e01f              B        |L5.1260|
                  |L5.1196|
;;;614    		{
;;;615    		if(bps[i]._state==bsWRK)
0004ac  ebc106c1          RSB      r6,r1,r1,LSL #3
0004b0  eb060646          ADD      r6,r6,r6,LSL #1
0004b4  eb000686          ADD      r6,r0,r6,LSL #2
0004b8  78b7              LDRB     r7,[r6,#2]
0004ba  2f01              CMP      r7,#1
0004bc  d114              BNE      |L5.1256|
;;;616    			{
;;;617    			if(bps[i]._Ii>i_avg_max)
0004be  6a36              LDR      r6,[r6,#0x20]
0004c0  f8dc7000          LDR      r7,[r12,#0]  ; i_avg_max
0004c4  46b1              MOV      r9,r6
0004c6  42be              CMP      r6,r7
0004c8  dd03              BLE      |L5.1234|
;;;618    				{
;;;619    				i_avg_max=bps[i]._Ii;
;;;620    				num_of_max_src=i;
0004ca  f8cc9000          STR      r9,[r12,#0]  ; i_avg_max
0004ce  f8881000          STRB     r1,[r8,#0]
                  |L5.1234|
;;;621    				}
;;;622    			if(bps[i]._Ii<i_avg_min)
0004d2  6817              LDR      r7,[r2,#0]  ; i_avg_min
0004d4  45b9              CMP      r9,r7
0004d6  da03              BGE      |L5.1248|
;;;623    				{
;;;624    				i_avg_min=bps[i]._Ii;
;;;625    				num_of_dumm_src=i;
0004d8  f8c29000          STR      r9,[r2,#0]  ; i_avg_min
0004dc  f88b1000          STRB     r1,[r11,#0]
                  |L5.1248|
;;;626    				}
;;;627    			
;;;628    			i_avg_summ+=bps[i]._Ii;
0004e0  682f              LDR      r7,[r5,#0]  ; i_avg_summ
0004e2  eb090607          ADD      r6,r9,r7
0004e6  602e              STR      r6,[r5,#0]  ; i_avg_summ
                  |L5.1256|
0004e8  1c49              ADDS     r1,r1,#1              ;613
0004ea  b2c9              UXTB     r1,r1                 ;613
                  |L5.1260|
0004ec  42a1              CMP      r1,r4                 ;613
0004ee  dbdd              BLT      |L5.1196|
;;;629    			}
;;;630    		}
;;;631    	i_avg=i_avg_summ/avg_num;	
0004f0  682e              LDR      r6,[r5,#0]  ; i_avg_summ
0004f2  fb96f5fa          SDIV     r5,r6,r10
0004f6  4ee4              LDR      r6,|L5.2184|
;;;632    	
;;;633    	if(i_avg_min==0)i_avg_min=1;
0004f8  6035              STR      r5,[r6,#0]  ; i_avg
0004fa  6816              LDR      r6,[r2,#0]  ; i_avg_min
0004fc  2501              MOVS     r5,#1                 ;615
0004fe  b906              CBNZ     r6,|L5.1282|
000500  6015              STR      r5,[r2,#0]  ; i_avg_min
                  |L5.1282|
;;;634    
;;;635    	
;;;636    
;;;637    	avg=i_avg_max;
000502  f8dc6000          LDR      r6,[r12,#0]  ; i_avg_max
;;;638    	avg*=100;
000506  2764              MOVS     r7,#0x64
;;;639    	avg/=i_avg_min;
000508  6812              LDR      r2,[r2,#0]  ; i_avg_min
00050a  437e              MULS     r6,r7,r6              ;638
00050c  fb96f2f2          SDIV     r2,r6,r2
000510  f8dfc378          LDR      r12,|L5.2188|
;;;640    	
;;;641    	if(avg>160) bAVG=1;
000514  4ede              LDR      r6,|L5.2192|
000516  2aa0              CMP      r2,#0xa0
000518  f8cc2000          STR      r2,[r12,#0]  ; avg
00051c  dd00              BLE      |L5.1312|
00051e  7035              STRB     r5,[r6,#0]
                  |L5.1312|
;;;642    	if(avg<120) bAVG=0;
000520  2a78              CMP      r2,#0x78
000522  da01              BGE      |L5.1320|
000524  7033              STRB     r3,[r6,#0]
                  |L5.1318|
000526  e038              B        |L5.1434|
                  |L5.1320|
;;;643    
;;;644    	if(bAVG==1)
000528  7832              LDRB     r2,[r6,#0]  ; bAVG
00052a  2a01              CMP      r2,#1
00052c  d135              BNE      |L5.1434|
;;;645    		{
;;;646    		//for(i=0;i<NUMIST;i++)
;;;647    			//{
;;;648    		//	if(bps[i]._state==bsWRK)
;;;649    				//{
;;;650    				//if(bps[i]._Ii>i_avg)bps[i]._xu_--;
;;;651    				/*if(bps[i]._Ii<i_avg)*/
;;;652    				if(bAVG_CNT==0)
00052e  4ad9              LDR      r2,|L5.2196|
000530  7816              LDRB     r6,[r2,#0]  ; bAVG_CNT
000532  b1ee              CBZ      r6,|L5.1392|
;;;653    					{
;;;654    					bAVG_CNT=1;
;;;655    					if(num_of_dumm_src<NUMIST) bps[num_of_dumm_src]._xu_++;
;;;656    					}
;;;657    				else
;;;658    					{
;;;659    					bAVG_CNT=0;
000534  7013              STRB     r3,[r2,#0]
;;;660    					if(num_of_max_src<NUMIST) bps[num_of_max_src]._xu_--;
000536  f8982000          LDRB     r2,[r8,#0]  ; num_of_max_src
00053a  42a2              CMP      r2,r4
00053c  da09              BGE      |L5.1362|
00053e  ebc202c2          RSB      r2,r2,r2,LSL #3
000542  eb020242          ADD      r2,r2,r2,LSL #1
000546  eb000282          ADD      r2,r0,r2,LSL #2
00054a  f8323f50          LDRH     r3,[r2,#0x50]!
00054e  1e5b              SUBS     r3,r3,#1
                  |L5.1360|
000550  8013              STRH     r3,[r2,#0]
                  |L5.1362|
;;;661    					}
;;;662    			
;;;663    				if(bps[i]._xu_<-50)bps[i]._xu_=-50;
000552  ebc101c1          RSB      r1,r1,r1,LSL #3
000556  eb010141          ADD      r1,r1,r1,LSL #1
00055a  eb000081          ADD      r0,r0,r1,LSL #2
00055e  f06f0231          MVN      r2,#0x31
000562  f9b01050          LDRSH    r1,[r0,#0x50]
000566  4291              CMP      r1,r2
000568  da11              BGE      |L5.1422|
00056a  f8a02050          STRH     r2,[r0,#0x50]
00056e  e014              B        |L5.1434|
                  |L5.1392|
000570  7015              STRB     r5,[r2,#0]            ;654
000572  f89b2000          LDRB     r2,[r11,#0]           ;655  ; num_of_dumm_src
000576  42a2              CMP      r2,r4                 ;655
000578  daeb              BGE      |L5.1362|
00057a  ebc202c2          RSB      r2,r2,r2,LSL #3       ;655
00057e  eb020242          ADD      r2,r2,r2,LSL #1       ;655
000582  eb000282          ADD      r2,r0,r2,LSL #2       ;655
000586  f8323f50          LDRH     r3,[r2,#0x50]!        ;655
00058a  1c5b              ADDS     r3,r3,#1              ;655
00058c  e7e0              B        |L5.1360|
                  |L5.1422|
;;;664    				if(bps[i]._xu_>50)bps[i]._xu_=50;	
00058e  2932              CMP      r1,#0x32
000590  dd03              BLE      |L5.1434|
000592  f04f0132          MOV      r1,#0x32
000596  f8a01050          STRH     r1,[r0,#0x50]
                  |L5.1434|
;;;665    			//	}
;;;666    			//}		
;;;667    		}			
;;;668    	}   	 
;;;669    
;;;670    
;;;671    avg_hndl_end:
;;;672    __nop();  
00059a  bf00              NOP      
;;;673    }
00059c  e8bd8ff0          POP      {r4-r11,pc}
;;;674    
                          ENDP

                  restart_off PROC
;;;1190   //-----------------------------------------------
;;;1191   void restart_off(void)
0005a0  b510              PUSH     {r4,lr}
;;;1192   {
;;;1193   lc640_write_long(EE_TIME_PROC_GS_RESTART,0);
0005a2  2100              MOVS     r1,#0
0005a4  20d0              MOVS     r0,#0xd0
0005a6  f7fffffe          BL       lc640_write_long
;;;1194   lc640_write_long(EE_TIME_PROC_PS_RESTART,0);
0005aa  2100              MOVS     r1,#0
0005ac  e8bd4010          POP      {r4,lr}
0005b0  20d4              MOVS     r0,#0xd4
0005b2  f7ffbffe          B.W      lc640_write_long
;;;1195   }
;;;1196   
                          ENDP

                  ach_off_hndl PROC
;;;946    //драйвер функции выключения по амперчасам
;;;947    void ach_off_hndl(void)
0005b6  b570              PUSH     {r4-r6,lr}
;;;948    {
;;;949    
;;;950    if((work_stat!=wsOFF)&&(ACH_OFF_EN))
0005b8  4cb7              LDR      r4,|L5.2200|
;;;951    	{
;;;952    	milliAmperSecunda+=((long)load_I);
0005ba  48b8              LDR      r0,|L5.2204|
0005bc  2500              MOVS     r5,#0                 ;950
0005be  7821              LDRB     r1,[r4,#0]            ;950  ; work_stat
0005c0  b351              CBZ      r1,|L5.1560|
0005c2  49b7              LDR      r1,|L5.2208|
0005c4  8809              LDRH     r1,[r1,#0]            ;950  ; ACH_OFF_EN
0005c6  b339              CBZ      r1,|L5.1560|
0005c8  4ab6              LDR      r2,|L5.2212|
0005ca  6801              LDR      r1,[r0,#0]  ; milliAmperSecunda
0005cc  f9b22000          LDRSH    r2,[r2,#0]  ; load_I
0005d0  4411              ADD      r1,r1,r2
;;;953    	if(milliAmperSecunda>=3600L)
0005d2  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
0005d4  f5b16f61          CMP      r1,#0xe10
0005d8  db1f              BLT      |L5.1562|
;;;954    		{
;;;955    		milliAmperSecunda-=3600L;
;;;956    		AMPERCHAS+=1;
0005da  4eb3              LDR      r6,|L5.2216|
0005dc  f5a16161          SUB      r1,r1,#0xe10          ;955
0005e0  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
0005e2  6831              LDR      r1,[r6,#0]  ; AMPERCHAS
;;;957    		lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
0005e4  f640401c          MOV      r0,#0xc1c
0005e8  1c49              ADDS     r1,r1,#1              ;956
0005ea  6031              STR      r1,[r6,#0]  ; AMPERCHAS
0005ec  f7fffffe          BL       lc640_write_long
;;;958    
;;;959    		if(AMPERCHAS>=ACH_OFF_LEVEL)
0005f0  49ae              LDR      r1,|L5.2220|
0005f2  6830              LDR      r0,[r6,#0]  ; AMPERCHAS
0005f4  f9b11000          LDRSH    r1,[r1,#0]  ; ACH_OFF_LEVEL
0005f8  4288              CMP      r0,r1
0005fa  db0e              BLT      |L5.1562|
;;;960    			{
;;;961    			work_stat=wsOFF;
0005fc  7025              STRB     r5,[r4,#0]
;;;962    			restart_off();
0005fe  f7fffffe          BL       restart_off
;;;963    			tree_up(iProcIsComplete,1,0,0);
000602  2300              MOVS     r3,#0
000604  461a              MOV      r2,r3
000606  2101              MOVS     r1,#1
000608  207a              MOVS     r0,#0x7a
00060a  f7fffffe          BL       tree_up
;;;964    			ret(0);
00060e  e8bd4070          POP      {r4-r6,lr}
000612  2000              MOVS     r0,#0
000614  f7ffbffe          B.W      ||ret||
                  |L5.1560|
;;;965    			}
;;;966    		}
;;;967    	}
;;;968    else 
;;;969    	{
;;;970    	milliAmperSecunda=0;
000618  6005              STR      r5,[r0,#0]  ; milliAmperSecunda
                  |L5.1562|
;;;971    	}
;;;972    
;;;973    }
00061a  bd70              POP      {r4-r6,pc}
;;;974     	
                          ENDP

                  curr_off_hndl PROC
;;;976    //драйвер функции выключения по снижению тока
;;;977    void curr_off_hndl(void)
00061c  b570              PUSH     {r4-r6,lr}
;;;978    {
;;;979    
;;;980    if((work_stat!=wsOFF)&&(CURR_OFF_EN))
00061e  4c9e              LDR      r4,|L5.2200|
;;;981    	{
;;;982    	if(curr_off_start_cnt<CUR_OFF_T_OFF)curr_off_start_cnt++;
;;;983    	else
;;;984    		{
;;;985    		signed int temp_I=0;
;;;986    		if(work_stat==wsGS)
;;;987    			{
;;;988    			temp_I=(signed int)I_ug_temp;
;;;989    			}
;;;990    		else if(work_stat==wsPS)
;;;991    			{
;;;992    			temp_I=(signed int)I_maxp;
;;;993    			}
;;;994    		temp_I*=(signed int)CUR_OFF_LEVEL_RELATIV;
;;;995    		temp_I/=100;
;;;996    		curr_off_temp=(short)temp_I;
;;;997    		if(load_I<curr_off_temp)
;;;998    			{
;;;999    			curr_off_stop_cnt++;
000620  4aa3              LDR      r2,|L5.2224|
000622  48a4              LDR      r0,|L5.2228|
000624  7825              LDRB     r5,[r4,#0]            ;980  ; work_stat
000626  2100              MOVS     r1,#0                 ;980
000628  b3f5              CBZ      r5,|L5.1704|
00062a  4ba3              LDR      r3,|L5.2232|
00062c  881b              LDRH     r3,[r3,#0]            ;980  ; CURR_OFF_EN
00062e  b3db              CBZ      r3,|L5.1704|
000630  4ea2              LDR      r6,|L5.2236|
000632  f9b03000          LDRSH    r3,[r0,#0]            ;982  ; curr_off_start_cnt
000636  f9b66000          LDRSH    r6,[r6,#0]            ;982  ; CUR_OFF_T_OFF
00063a  42b3              CMP      r3,r6                 ;982
00063c  da02              BGE      |L5.1604|
00063e  1c5b              ADDS     r3,r3,#1              ;982
000640  8003              STRH     r3,[r0,#0]            ;982
                  |L5.1602|
;;;1000   			if(curr_off_stop_cnt>=CUR_OFF_T_ON)
;;;1001   				{
;;;1002   				work_stat=wsOFF;
;;;1003   				restart_off();
;;;1004   				tree_up(iProcIsComplete,2,0,0);
;;;1005   				ret(0);
;;;1006   				}
;;;1007   			}
;;;1008   		else curr_off_stop_cnt=0;
;;;1009   		}
;;;1010   	}
;;;1011   else 
;;;1012   	{
;;;1013   	curr_off_start_cnt=0;
;;;1014   	curr_off_stop_cnt=0;
;;;1015   	}
;;;1016   }	
000642  bd70              POP      {r4-r6,pc}
                  |L5.1604|
000644  2000              MOVS     r0,#0                 ;985
000646  2d01              CMP      r5,#1                 ;986
000648  d002              BEQ      |L5.1616|
00064a  2d02              CMP      r5,#2                 ;990
00064c  d002              BEQ      |L5.1620|
00064e  e004              B        |L5.1626|
                  |L5.1616|
000650  489b              LDR      r0,|L5.2240|
000652  e000              B        |L5.1622|
                  |L5.1620|
000654  489b              LDR      r0,|L5.2244|
                  |L5.1622|
000656  f9b00000          LDRSH    r0,[r0,#0]            ;992  ; I_maxp
                  |L5.1626|
00065a  4b9b              LDR      r3,|L5.2248|
00065c  f9b33000          LDRSH    r3,[r3,#0]            ;994  ; CUR_OFF_LEVEL_RELATIV
000660  4358              MULS     r0,r3,r0              ;994
000662  2364              MOVS     r3,#0x64              ;995
000664  fb90f0f3          SDIV     r0,r0,r3              ;995
000668  4b98              LDR      r3,|L5.2252|
00066a  b200              SXTH     r0,r0                 ;996
00066c  8018              STRH     r0,[r3,#0]            ;996
00066e  4b8d              LDR      r3,|L5.2212|
000670  f9b33000          LDRSH    r3,[r3,#0]            ;997  ; load_I
000674  4283              CMP      r3,r0                 ;997
000676  da16              BGE      |L5.1702|
000678  8810              LDRH     r0,[r2,#0]            ;999  ; curr_off_stop_cnt
00067a  1c40              ADDS     r0,r0,#1              ;999
00067c  b200              SXTH     r0,r0                 ;999
00067e  8010              STRH     r0,[r2,#0]            ;999
000680  4a93              LDR      r2,|L5.2256|
000682  f9b22000          LDRSH    r2,[r2,#0]            ;1000  ; CUR_OFF_T_ON
000686  4290              CMP      r0,r2                 ;1000
000688  dbdb              BLT      |L5.1602|
00068a  7021              STRB     r1,[r4,#0]            ;1002
00068c  f7fffffe          BL       restart_off
000690  2300              MOVS     r3,#0                 ;1004
000692  461a              MOV      r2,r3                 ;1004
000694  2102              MOVS     r1,#2                 ;1004
000696  207a              MOVS     r0,#0x7a              ;1004
000698  f7fffffe          BL       tree_up
00069c  e8bd4070          POP      {r4-r6,lr}            ;1005
0006a0  2000              MOVS     r0,#0                 ;1005
0006a2  f7ffbffe          B.W      ||ret||
                  |L5.1702|
0006a6  e000              B        |L5.1706|
                  |L5.1704|
0006a8  e001              B        |L5.1710|
                  |L5.1706|
0006aa  8011              STRH     r1,[r2,#0]            ;1008
0006ac  bd70              POP      {r4-r6,pc}
                  |L5.1710|
0006ae  8001              STRH     r1,[r0,#0]            ;1013
0006b0  e7f9              B        |L5.1702|
;;;1017   
                          ENDP

                  time_hndl PROC
;;;1018   //-----------------------------------------------
;;;1019   void time_hndl(void) /*ГЦ раз в секунду*/
0006b2  e92d5ff0          PUSH     {r4-r12,lr}
;;;1020   {
;;;1021   if((REV_IS_ON)&&(AVT_REV_IS_ON))
;;;1022   	{
;;;1023   
;;;1024   	}
;;;1025   
;;;1026   
;;;1027   
;;;1028   
;;;1029   if(work_stat==wsGS)
0006b6  f8df81e0          LDR      r8,|L5.2200|
;;;1030   	{
;;;1031   	time_proc++;
;;;1032   	if(((time_proc%600L)==0)&&(restart_enable==reON))
;;;1033   		{
;;;1034   		lc640_write_long(EE_TIME_PROC_GS_RESTART,time_proc);
;;;1035   		}
;;;1036   	if(time_proc_remain)
;;;1037   		{
;;;1038   		time_proc_remain--;
;;;1039   		}
;;;1040   	if((!time_proc_remain)&&(!T_PROC_GS_MODE))
;;;1041   		{
;;;1042   		work_stat=wsOFF;
;;;1043   		restart_off();
;;;1044   		tree_up(iProcIsComplete,0,0,0);
;;;1045   		ret(0);
;;;1046   		}
;;;1047   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0006ba  f8dfb218          LDR      r11,|L5.2260|
;;;1048   		time_proc_phase++;
;;;1049   		
;;;1050   		if(proc_phase==ppFF) {
;;;1051   			REV_STAT=rsFF;
0006be  4d86              LDR      r5,|L5.2264|
0006c0  f8980000          LDRB     r0,[r8,#0]            ;1029  ; work_stat
;;;1052   			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;1053   				proc_phase=ppFF_P_REW;	
;;;1054   				time_proc_phase=0;
;;;1055   			}
;;;1056   		} else if(proc_phase==ppFF_P_REW) {
;;;1057   			if(time_proc_phase==0)REV_STAT=rsFF;
;;;1058   			else REV_STAT=rsREW;
;;;1059   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
0006c4  4f85              LDR      r7,|L5.2268|
0006c6  f8df9218          LDR      r9,|L5.2272|
0006ca  2601              MOVS     r6,#1                 ;1029
0006cc  2400              MOVS     r4,#0                 ;1036
0006ce  f44f7a16          MOV      r10,#0x258            ;1032
0006d2  2801              CMP      r0,#1                 ;1029
0006d4  d162              BNE      |L5.1948|
0006d6  4883              LDR      r0,|L5.2276|
0006d8  6801              LDR      r1,[r0,#0]            ;1031  ; time_proc
0006da  1c49              ADDS     r1,r1,#1              ;1031
0006dc  fb91f2fa          SDIV     r2,r1,r10             ;1032
0006e0  6001              STR      r1,[r0,#0]            ;1032  ; time_proc
0006e2  fb0a1012          MLS      r0,r10,r2,r1          ;1032
0006e6  b930              CBNZ     r0,|L5.1782|
0006e8  487f              LDR      r0,|L5.2280|
0006ea  7800              LDRB     r0,[r0,#0]            ;1032  ; restart_enable
0006ec  2801              CMP      r0,#1                 ;1032
0006ee  d102              BNE      |L5.1782|
0006f0  20d0              MOVS     r0,#0xd0              ;1034
0006f2  f7fffffe          BL       lc640_write_long
                  |L5.1782|
0006f6  f8d91000          LDR      r1,[r9,#0]            ;1036  ; time_proc_remain
0006fa  4648              MOV      r0,r9                 ;1036
0006fc  b109              CBZ      r1,|L5.1794|
0006fe  1e49              SUBS     r1,r1,#1              ;1038
000700  6001              STR      r1,[r0,#0]            ;1038  ; time_proc_remain
                  |L5.1794|
000702  4608              MOV      r0,r1                 ;1040
000704  4979              LDR      r1,|L5.2284|
000706  f9b11000          LDRSH    r1,[r1,#0]            ;1040  ; T_PROC_GS_MODE
00070a  4308              ORRS     r0,r0,r1              ;1040
00070c  d10c              BNE      |L5.1832|
00070e  f8884000          STRB     r4,[r8,#0]            ;1042
000712  f7fffffe          BL       restart_off
000716  2300              MOVS     r3,#0                 ;1044
000718  461a              MOV      r2,r3                 ;1044
00071a  4619              MOV      r1,r3                 ;1044
00071c  207a              MOVS     r0,#0x7a              ;1044
00071e  f7fffffe          BL       tree_up
000722  2000              MOVS     r0,#0                 ;1045
000724  f7fffffe          BL       ||ret||
                  |L5.1832|
000728  4871              LDR      r0,|L5.2288|
00072a  8800              LDRH     r0,[r0,#0]            ;1047  ; REV_IS_ON
00072c  b3b0              CBZ      r0,|L5.1948|
00072e  f8bb0000          LDRH     r0,[r11,#0]           ;1047  ; AVT_REV_IS_ON
000732  b398              CBZ      r0,|L5.1948|
000734  4b6f              LDR      r3,|L5.2292|
000736  8818              LDRH     r0,[r3,#0]            ;1048  ; time_proc_phase
000738  1c40              ADDS     r0,r0,#1              ;1048
00073a  b201              SXTH     r1,r0                 ;1048
00073c  486e              LDR      r0,|L5.2296|
00073e  8019              STRH     r1,[r3,#0]            ;1048
000740  7802              LDRB     r2,[r0,#0]            ;1050  ; proc_phase
000742  b132              CBZ      r2,|L5.1874|
000744  2a01              CMP      r2,#1                 ;1056
000746  d00c              BEQ      |L5.1890|
;;;1060   				proc_phase=ppREW;	
;;;1061   				time_proc_phase=0;
;;;1062   			}
;;;1063   		} else if(proc_phase==ppREW) {
000748  2a02              CMP      r2,#2
00074a  d015              BEQ      |L5.1912|
;;;1064   			REV_STAT=rsREW;
;;;1065   			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;1066   				proc_phase=ppREW_P_FF;	
;;;1067   				time_proc_phase=0;
;;;1068   			}
;;;1069   		} else if(proc_phase==ppREW_P_FF) {
00074c  2a03              CMP      r2,#3
00074e  d01c              BEQ      |L5.1930|
000750  e024              B        |L5.1948|
                  |L5.1874|
000752  4a6a              LDR      r2,|L5.2300|
000754  702e              STRB     r6,[r5,#0]            ;1051
000756  f9b22000          LDRSH    r2,[r2,#0]            ;1052  ; AVT_REV_TIME_FF
00075a  4291              CMP      r1,r2                 ;1052
00075c  db1e              BLT      |L5.1948|
00075e  7006              STRB     r6,[r0,#0]            ;1053
000760  e01b              B        |L5.1946|
                  |L5.1890|
000762  b139              CBZ      r1,|L5.1908|
000764  f8854000          STRB.W   r4,[r5,#0]            ;1058
                  |L5.1896|
000768  f9b72000          LDRSH    r2,[r7,#0]            ;1059  ; AVT_REV_TIME_PAUSE
00076c  4291              CMP      r1,r2                 ;1059
00076e  db15              BLT      |L5.1948|
000770  2102              MOVS     r1,#2                 ;1060
000772  e008              B        |L5.1926|
                  |L5.1908|
000774  702e              STRB     r6,[r5,#0]            ;1057
000776  e7f7              B        |L5.1896|
                  |L5.1912|
000778  4a61              LDR      r2,|L5.2304|
00077a  702c              STRB     r4,[r5,#0]            ;1064
00077c  f9b22000          LDRSH    r2,[r2,#0]            ;1065  ; AVT_REV_TIME_REW
000780  4291              CMP      r1,r2                 ;1065
000782  db0b              BLT      |L5.1948|
000784  2103              MOVS     r1,#3                 ;1066
                  |L5.1926|
000786  7001              STRB     r1,[r0,#0]            ;1060
000788  e007              B        |L5.1946|
                  |L5.1930|
;;;1070   			if(time_proc_phase==0)REV_STAT=rsREW;
00078a  b1a9              CBZ      r1,|L5.1976|
;;;1071   			else REV_STAT=rsFF;
00078c  f8856000          STRB.W   r6,[r5,#0]
                  |L5.1936|
;;;1072   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
000790  f9b72000          LDRSH    r2,[r7,#0]  ; AVT_REV_TIME_PAUSE
000794  4291              CMP      r1,r2
000796  db01              BLT      |L5.1948|
;;;1073   				proc_phase=ppFF;	
000798  7004              STRB     r4,[r0,#0]
                  |L5.1946|
;;;1074   				time_proc_phase=0;
00079a  801c              STRH     r4,[r3,#0]
                  |L5.1948|
;;;1075   			}
;;;1076   		}
;;;1077   	}
;;;1078   	}
;;;1079   
;;;1080   
;;;1081   if(work_stat==wsPS)
00079c  f8980000          LDRB     r0,[r8,#0]  ; work_stat
0007a0  2802              CMP      r0,#2
0007a2  d15c              BNE      |L5.2142|
;;;1082   	{
;;;1083   	time_proc++;
0007a4  484f              LDR      r0,|L5.2276|
0007a6  6801              LDR      r1,[r0,#0]  ; time_proc
0007a8  1c49              ADDS     r1,r1,#1
;;;1084   	if(((time_proc%600L)==0)&&(restart_enable==reON))
0007aa  fb91f2fa          SDIV     r2,r1,r10
0007ae  6001              STR      r1,[r0,#0]  ; time_proc
0007b0  fb0a1012          MLS      r0,r10,r2,r1
0007b4  b110              CBZ      r0,|L5.1980|
0007b6  e008              B        |L5.1994|
                  |L5.1976|
0007b8  702c              STRB     r4,[r5,#0]            ;1070
0007ba  e7e9              B        |L5.1936|
                  |L5.1980|
0007bc  484a              LDR      r0,|L5.2280|
0007be  7800              LDRB     r0,[r0,#0]  ; restart_enable
0007c0  2801              CMP      r0,#1
0007c2  d102              BNE      |L5.1994|
;;;1085   		{
;;;1086   		lc640_write_long(EE_TIME_PROC_PS_RESTART,time_proc);
0007c4  20d4              MOVS     r0,#0xd4
0007c6  f7fffffe          BL       lc640_write_long
                  |L5.1994|
;;;1087   		}
;;;1088   	if(time_proc_remain)
0007ca  f8d91000          LDR      r1,[r9,#0]  ; time_proc_remain
0007ce  4648              MOV      r0,r9
0007d0  b109              CBZ      r1,|L5.2006|
;;;1089   		{
;;;1090   		time_proc_remain--;
0007d2  1e49              SUBS     r1,r1,#1
0007d4  6001              STR      r1,[r0,#0]  ; time_proc_remain
                  |L5.2006|
;;;1091   		}
;;;1092   	if((!time_proc_remain)&&(!T_PROC_PS_MODE))
0007d6  4608              MOV      r0,r1
0007d8  494a              LDR      r1,|L5.2308|
0007da  f9b11000          LDRSH    r1,[r1,#0]  ; T_PROC_PS_MODE
0007de  4308              ORRS     r0,r0,r1
0007e0  d10c              BNE      |L5.2044|
;;;1093   		{
;;;1094   		work_stat=wsOFF;
0007e2  f8884000          STRB     r4,[r8,#0]
;;;1095   		restart_off();
0007e6  f7fffffe          BL       restart_off
;;;1096   		tree_up(iProcIsComplete,0,0,0);
0007ea  2300              MOVS     r3,#0
0007ec  461a              MOV      r2,r3
0007ee  4619              MOV      r1,r3
0007f0  207a              MOVS     r0,#0x7a
0007f2  f7fffffe          BL       tree_up
;;;1097   		ret(0);
0007f6  2000              MOVS     r0,#0
0007f8  f7fffffe          BL       ||ret||
                  |L5.2044|
;;;1098   		}
;;;1099   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0007fc  483c              LDR      r0,|L5.2288|
0007fe  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000800  2800              CMP      r0,#0
000802  d02c              BEQ      |L5.2142|
000804  f8bb0000          LDRH     r0,[r11,#0]  ; AVT_REV_IS_ON
000808  2800              CMP      r0,#0
00080a  d028              BEQ      |L5.2142|
;;;1100   		time_proc_phase++;
00080c  4839              LDR      r0,|L5.2292|
00080e  8801              LDRH     r1,[r0,#0]  ; time_proc_phase
000810  1c49              ADDS     r1,r1,#1
000812  b20a              SXTH     r2,r1
;;;1101   		
;;;1102   		if(proc_phase==ppFF) {
000814  4938              LDR      r1,|L5.2296|
000816  8002              STRH     r2,[r0,#0]            ;1100
000818  780b              LDRB     r3,[r1,#0]  ; proc_phase
00081a  b16b              CBZ      r3,|L5.2104|
;;;1103   			REV_STAT=rsFF;
;;;1104   			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;1105   				proc_phase=ppFF_P_REW;	
;;;1106   				time_proc_phase=0;
;;;1107   			}
;;;1108   		} else if(proc_phase==ppFF_P_REW) {
00081c  2b01              CMP      r3,#1
00081e  d013              BEQ      |L5.2120|
;;;1109   			if(time_proc_phase==0)REV_STAT=rsFF;
;;;1110   			else REV_STAT=rsREW;
;;;1111   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;1112   				proc_phase=ppREW;	
;;;1113   				time_proc_phase=0;
;;;1114   			}
;;;1115   		} else if(proc_phase==ppREW) {
000820  2b02              CMP      r3,#2
000822  d01e              BEQ      |L5.2146|
;;;1116   			REV_STAT=rsREW;
;;;1117   			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;1118   				proc_phase=ppREW_P_FF;	
;;;1119   				time_proc_phase=0;
;;;1120   			}
;;;1121   		} else if(proc_phase==ppREW_P_FF) {
000824  2b03              CMP      r3,#3
000826  d11a              BNE      |L5.2142|
;;;1122   			if(time_proc_phase==0)REV_STAT=rsREW;
000828  b322              CBZ      r2,|L5.2164|
;;;1123   			else REV_STAT=rsFF;
00082a  702e              STRB     r6,[r5,#0]
                  |L5.2092|
;;;1124   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
00082c  f9b73000          LDRSH    r3,[r7,#0]  ; AVT_REV_TIME_PAUSE
000830  429a              CMP      r2,r3
000832  db14              BLT      |L5.2142|
;;;1125   				proc_phase=ppFF;	
000834  700c              STRB     r4,[r1,#0]
;;;1126   				time_proc_phase=0;
000836  e011              B        |L5.2140|
                  |L5.2104|
000838  4b30              LDR      r3,|L5.2300|
00083a  702e              STRB     r6,[r5,#0]            ;1103
00083c  f9b33000          LDRSH    r3,[r3,#0]            ;1104  ; AVT_REV_TIME_FF
000840  429a              CMP      r2,r3                 ;1104
000842  db0c              BLT      |L5.2142|
000844  700e              STRB     r6,[r1,#0]            ;1105
000846  e009              B        |L5.2140|
                  |L5.2120|
000848  b132              CBZ      r2,|L5.2136|
00084a  702c              STRB     r4,[r5,#0]            ;1110
                  |L5.2124|
00084c  f9b73000          LDRSH    r3,[r7,#0]            ;1111  ; AVT_REV_TIME_PAUSE
000850  429a              CMP      r2,r3                 ;1111
000852  db04              BLT      |L5.2142|
000854  2202              MOVS     r2,#2                 ;1112
000856  e00b              B        |L5.2160|
                  |L5.2136|
000858  702e              STRB     r6,[r5,#0]            ;1109
00085a  e7f7              B        |L5.2124|
                  |L5.2140|
00085c  8004              STRH     r4,[r0,#0]            ;1106
                  |L5.2142|
;;;1127   			}
;;;1128   		}
;;;1129   	}
;;;1130   	}
;;;1131   
;;;1132   
;;;1133   
;;;1134   }
00085e  e8bd9ff0          POP      {r4-r12,pc}
                  |L5.2146|
000862  4b27              LDR      r3,|L5.2304|
000864  702c              STRB     r4,[r5,#0]            ;1116
000866  f9b33000          LDRSH    r3,[r3,#0]            ;1117  ; AVT_REV_TIME_REW
00086a  429a              CMP      r2,r3                 ;1117
00086c  dbf7              BLT      |L5.2142|
00086e  2203              MOVS     r2,#3                 ;1118
                  |L5.2160|
000870  700a              STRB     r2,[r1,#0]            ;1118
000872  e7f3              B        |L5.2140|
                  |L5.2164|
000874  e048              B        |L5.2312|
000876  0000              DCW      0x0000
                  |L5.2168|
                          DCD      ||area_number.25||
                  |L5.2172|
                          DCD      i_avg_min
                  |L5.2176|
                          DCD      i_avg_max
                  |L5.2180|
                          DCD      i_avg_summ
                  |L5.2184|
                          DCD      i_avg
                  |L5.2188|
                          DCD      avg
                  |L5.2192|
                          DCD      bAVG
                  |L5.2196|
                          DCD      bAVG_CNT
                  |L5.2200|
                          DCD      work_stat
                  |L5.2204|
                          DCD      milliAmperSecunda
                  |L5.2208|
                          DCD      ACH_OFF_EN
                  |L5.2212|
                          DCD      load_I
                  |L5.2216|
                          DCD      AMPERCHAS
                  |L5.2220|
                          DCD      ACH_OFF_LEVEL
                  |L5.2224|
                          DCD      curr_off_stop_cnt
                  |L5.2228|
                          DCD      curr_off_start_cnt
                  |L5.2232|
                          DCD      CURR_OFF_EN
                  |L5.2236|
                          DCD      CUR_OFF_T_OFF
                  |L5.2240|
                          DCD      I_ug_temp
                  |L5.2244|
                          DCD      I_maxp
                  |L5.2248|
                          DCD      CUR_OFF_LEVEL_RELATIV
                  |L5.2252|
                          DCD      curr_off_temp
                  |L5.2256|
                          DCD      CUR_OFF_T_ON
                  |L5.2260|
                          DCD      AVT_REV_IS_ON
                  |L5.2264|
                          DCD      REV_STAT
                  |L5.2268|
                          DCD      AVT_REV_TIME_PAUSE
                  |L5.2272|
                          DCD      time_proc_remain
                  |L5.2276|
                          DCD      time_proc
                  |L5.2280|
                          DCD      restart_enable
                  |L5.2284|
                          DCD      T_PROC_GS_MODE
                  |L5.2288|
                          DCD      REV_IS_ON
                  |L5.2292|
                          DCD      time_proc_phase
                  |L5.2296|
                          DCD      proc_phase
                  |L5.2300|
                          DCD      AVT_REV_TIME_FF
                  |L5.2304|
                          DCD      AVT_REV_TIME_REW
                  |L5.2308|
                          DCD      T_PROC_PS_MODE
                  |L5.2312|
000908  702c              STRB     r4,[r5,#0]            ;1122
00090a  e78f              B        |L5.2092|
;;;1135   
                          ENDP

                  cap_time_hndl PROC
;;;1136   //-----------------------------------------------
;;;1137   void cap_time_hndl(void) /*10 раз в секунду*/
00090c  b570              PUSH     {r4-r6,lr}
;;;1138   {
;;;1139   
;;;1140   if(work_stat==wsCAP)
00090e  48f8              LDR      r0,|L5.3312|
000910  7800              LDRB     r0,[r0,#0]  ; work_stat
000912  2803              CMP      r0,#3
000914  d143              BNE      |L5.2462|
;;;1141   	{
;;;1142   	cap_time_proc++;
000916  49f7              LDR      r1,|L5.3316|
;;;1143   	if(cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME+CAP_PAUSE2_TIME))
000918  48f7              LDR      r0,|L5.3320|
00091a  680a              LDR      r2,[r1,#0]            ;1142  ; cap_time_proc
00091c  1c52              ADDS     r2,r2,#1              ;1142
00091e  600a              STR      r2,[r1,#0]  ; cap_time_proc
000920  f9b05000          LDRSH    r5,[r0,#0]  ; CAP_ZAR_TIME
000924  48f5              LDR      r0,|L5.3324|
000926  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
00092a  182b              ADDS     r3,r5,r0
00092c  48f4              LDR      r0,|L5.3328|
00092e  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
000932  181c              ADDS     r4,r3,r0
000934  48f3              LDR      r0,|L5.3332|
000936  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
00093a  1826              ADDS     r6,r4,r0
;;;1144   		{
;;;1145   		cap_time_proc=0;
00093c  2000              MOVS     r0,#0
00093e  4296              CMP      r6,r2                 ;1143
000940  dc04              BGT      |L5.2380|
;;;1146   		CAP_COUNTER++;
000942  4ef1              LDR      r6,|L5.3336|
000944  6008              STR      r0,[r1,#0]  ; cap_time_proc
000946  8832              LDRH     r2,[r6,#0]  ; CAP_COUNTER
000948  1c52              ADDS     r2,r2,#1
00094a  8032              STRH     r2,[r6,#0]
                  |L5.2380|
;;;1147   		}
;;;1148   
;;;1149   	if(cap_time_proc>=CAP_ZAR_TIME)bOFF=1;
00094c  6809              LDR      r1,[r1,#0]  ; cap_time_proc
00094e  4eef              LDR      r6,|L5.3340|
000950  2201              MOVS     r2,#1
000952  42a9              CMP      r1,r5
000954  db01              BLT      |L5.2394|
000956  7032              STRB     r2,[r6,#0]
000958  e000              B        |L5.2396|
                  |L5.2394|
;;;1150   	else bOFF=0;
00095a  7030              STRB     r0,[r6,#0]
                  |L5.2396|
;;;1151   
;;;1152   	if((cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME))&&(cap_time_proc<(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME)))bRAZR=1;
00095c  4dec              LDR      r5,|L5.3344|
00095e  428b              CMP      r3,r1
000960  dc03              BGT      |L5.2410|
000962  428c              CMP      r4,r1
000964  dd01              BLE      |L5.2410|
000966  702a              STRB     r2,[r5,#0]
000968  e000              B        |L5.2412|
                  |L5.2410|
;;;1153   	else bRAZR=0;
00096a  7028              STRB     r0,[r5,#0]
                  |L5.2412|
;;;1154   
;;;1155   
;;;1156   	CAP_TIME_SEC++;
00096c  49e9              LDR      r1,|L5.3348|
00096e  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_SEC
000970  1c52              ADDS     r2,r2,#1
000972  b212              SXTH     r2,r2
000974  800a              STRH     r2,[r1,#0]
;;;1157   	if(CAP_TIME_SEC>=600)
000976  f5b27f16          CMP      r2,#0x258
00097a  db10              BLT      |L5.2462|
;;;1158   		{
;;;1159   		CAP_TIME_SEC=0;
00097c  8008              STRH     r0,[r1,#0]
;;;1160   		
;;;1161   		CAP_TIME_MIN++;
00097e  49e6              LDR      r1,|L5.3352|
000980  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_MIN
000982  1c52              ADDS     r2,r2,#1
000984  b212              SXTH     r2,r2
000986  800a              STRH     r2,[r1,#0]
;;;1162   		if(CAP_TIME_MIN>=60)
000988  2a3c              CMP      r2,#0x3c
00098a  db08              BLT      |L5.2462|
;;;1163   			{
;;;1164   			CAP_TIME_MIN=0;
00098c  8008              STRH     r0,[r1,#0]
;;;1165   	
;;;1166   			CAP_TIME_HOUR++;
00098e  49e3              LDR      r1,|L5.3356|
000990  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_HOUR
000992  1c52              ADDS     r2,r2,#1
000994  b212              SXTH     r2,r2
000996  800a              STRH     r2,[r1,#0]
;;;1167   			if(CAP_TIME_HOUR>=24)
000998  2a18              CMP      r2,#0x18
00099a  db00              BLT      |L5.2462|
;;;1168   				{
;;;1169   				CAP_TIME_HOUR=0;
00099c  8008              STRH     r0,[r1,#0]
                  |L5.2462|
;;;1170   				}
;;;1171   			}
;;;1172   		}
;;;1173   	}
;;;1174   
;;;1175   }
00099e  bd70              POP      {r4-r6,pc}
;;;1176   
                          ENDP

                  restart_on_GS PROC
;;;1178   //-----------------------------------------------
;;;1179   void restart_on_GS(void)
0009a0  2101              MOVS     r1,#1
;;;1180   {
;;;1181   lc640_write_long(EE_TIME_PROC_GS_RESTART,1);
0009a2  20d0              MOVS     r0,#0xd0
0009a4  f7ffbffe          B.W      lc640_write_long
;;;1182   }
;;;1183   
                          ENDP

                  restart_on_PS PROC
;;;1184   //-----------------------------------------------
;;;1185   void restart_on_PS(void)
0009a8  2101              MOVS     r1,#1
;;;1186   {
;;;1187   lc640_write_long(EE_TIME_PROC_PS_RESTART,1);
0009aa  20d4              MOVS     r0,#0xd4
0009ac  f7ffbffe          B.W      lc640_write_long
;;;1188   }
;;;1189   
                          ENDP

                  start_GS PROC
;;;1197   //-----------------------------------------------
;;;1198   void start_GS(void) {
0009b0  b570              PUSH     {r4-r6,lr}
;;;1199   
;;;1200   	if(SK_START==2)
0009b2  48db              LDR      r0,|L5.3360|
0009b4  8800              LDRH     r0,[r0,#0]  ; SK_START
0009b6  2802              CMP      r0,#2
0009b8  d10a              BNE      |L5.2512|
;;;1201   		{
;;;1202   		if(SK_START_LEV)
0009ba  48da              LDR      r0,|L5.3364|
0009bc  8801              LDRH     r1,[r0,#0]  ; SK_START_LEV
;;;1203   			{
;;;1204   			if(sk_in_drv_stat==1)
0009be  48da              LDR      r0,|L5.3368|
0009c0  f9b00000          LDRSH    r0,[r0,#0]
0009c4  b111              CBZ      r1,|L5.2508|
0009c6  2801              CMP      r0,#1
0009c8  d029              BEQ      |L5.2590|
0009ca  e001              B        |L5.2512|
                  |L5.2508|
;;;1205   				{
;;;1206   				return;
;;;1207   				}
;;;1208   			}
;;;1209   		if(!SK_START_LEV)
;;;1210   			{
;;;1211   			if(sk_in_drv_stat==-1)
0009cc  1c40              ADDS     r0,r0,#1
0009ce  d026              BEQ      |L5.2590|
                  |L5.2512|
;;;1212   				{
;;;1213   				return;
;;;1214   				}
;;;1215   			}
;;;1216   		}
;;;1217   
;;;1218   	work_stat=wsGS;
0009d0  48c7              LDR      r0,|L5.3312|
0009d2  2501              MOVS     r5,#1
;;;1219   	time_proc=0;
0009d4  2400              MOVS     r4,#0
0009d6  7005              STRB     r5,[r0,#0]            ;1218
0009d8  48d4              LDR      r0,|L5.3372|
;;;1220   	time_proc_remain=T_PROC_GS;
0009da  49d6              LDR      r1,|L5.3380|
0009dc  6004              STR      r4,[r0,#0]  ; time_proc
0009de  48d4              LDR      r0,|L5.3376|
0009e0  6800              LDR      r0,[r0,#0]  ; T_PROC_GS
;;;1221   	//index_set=0;
;;;1222   	restart_on_GS();
0009e2  6008              STR      r0,[r1,#0]  ; time_proc_remain
0009e4  f7fffffe          BL       restart_on_GS
;;;1223   	bFAST_REG=1;
0009e8  48d3              LDR      r0,|L5.3384|
0009ea  7205              STRB     r5,[r0,#8]
;;;1224   	bU_VALID=0;
0009ec  7244              STRB     r4,[r0,#9]
;;;1225   	bU_VALID_VALID=0;
0009ee  7284              STRB     r4,[r0,#0xa]
;;;1226   	
;;;1227   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0009f0  48d2              LDR      r0,|L5.3388|
0009f2  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
0009f4  b140              CBZ      r0,|L5.2568|
0009f6  48d2              LDR      r0,|L5.3392|
0009f8  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
0009fa  b128              CBZ      r0,|L5.2568|
;;;1228   		time_proc_phase=0;
0009fc  48d1              LDR      r0,|L5.3396|
0009fe  8004              STRH     r4,[r0,#0]
;;;1229   		proc_phase=ppFF;
000a00  48d1              LDR      r0,|L5.3400|
000a02  7004              STRB     r4,[r0,#0]
;;;1230   		REV_STAT=rsFF;	
000a04  48d1              LDR      r0,|L5.3404|
000a06  7005              STRB     r5,[r0,#0]
                  |L5.2568|
;;;1231   	}
;;;1232   
;;;1233   	milliAmperSecunda=0L;
000a08  48d1              LDR      r0,|L5.3408|
000a0a  4621              MOV      r1,r4
;;;1234   	AMPERCHAS=0L;
000a0c  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
000a0e  48d1              LDR      r0,|L5.3412|
;;;1235   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000a10  6004              STR      r4,[r0,#0]  ; AMPERCHAS
000a12  e8bd4070          POP      {r4-r6,lr}
000a16  f640401c          MOV      r0,#0xc1c
000a1a  f7ffbffe          B.W      lc640_write_long
                  |L5.2590|
;;;1236   }
000a1e  bd70              POP      {r4-r6,pc}
;;;1237   
                          ENDP

                  start_PS PROC
;;;1239   //-----------------------------------------------
;;;1240   void start_PS(void) {
000a20  48bf              LDR      r0,|L5.3360|
000a22  b510              PUSH     {r4,lr}
;;;1241   
;;;1242   	if(SK_START==2)
000a24  8800              LDRH     r0,[r0,#0]  ; SK_START
000a26  2802              CMP      r0,#2
000a28  d10a              BNE      |L5.2624|
;;;1243   		{
;;;1244   		if(SK_START_LEV)
000a2a  48be              LDR      r0,|L5.3364|
000a2c  8801              LDRH     r1,[r0,#0]  ; SK_START_LEV
;;;1245   			{
;;;1246   			if(sk_in_drv_stat==1)
000a2e  48be              LDR      r0,|L5.3368|
000a30  f9b00000          LDRSH    r0,[r0,#0]
000a34  b111              CBZ      r1,|L5.2620|
000a36  2801              CMP      r0,#1
000a38  d02a              BEQ      |L5.2704|
000a3a  e001              B        |L5.2624|
                  |L5.2620|
;;;1247   				{
;;;1248   				return;
;;;1249   				}
;;;1250   			}
;;;1251   		if(!SK_START_LEV)
;;;1252   			{
;;;1253   			if(sk_in_drv_stat==-1)
000a3c  1c40              ADDS     r0,r0,#1
000a3e  d027              BEQ      |L5.2704|
                  |L5.2624|
;;;1254   				{
;;;1255   				return;
;;;1256   				}
;;;1257   			}
;;;1258   		}
;;;1259   
;;;1260   	work_stat=wsPS;
000a40  49ab              LDR      r1,|L5.3312|
000a42  2002              MOVS     r0,#2
;;;1261   	time_proc=0;
000a44  2400              MOVS     r4,#0
000a46  7008              STRB     r0,[r1,#0]            ;1260
000a48  48b8              LDR      r0,|L5.3372|
;;;1262   	time_proc_remain=T_PROC_PS;
000a4a  49ba              LDR      r1,|L5.3380|
000a4c  6004              STR      r4,[r0,#0]  ; time_proc
000a4e  48c2              LDR      r0,|L5.3416|
000a50  6800              LDR      r0,[r0,#0]  ; T_PROC_PS
;;;1263   	//index_set=0;
;;;1264   	restart_on_PS();
000a52  6008              STR      r0,[r1,#0]  ; time_proc_remain
000a54  f7fffffe          BL       restart_on_PS
;;;1265   	bFAST_REG=1;
000a58  48b7              LDR      r0,|L5.3384|
000a5a  2101              MOVS     r1,#1
000a5c  7201              STRB     r1,[r0,#8]
;;;1266   	bU_VALID=0;
000a5e  7244              STRB     r4,[r0,#9]
;;;1267   	bU_VALID_VALID=0;
000a60  7284              STRB     r4,[r0,#0xa]
;;;1268   	
;;;1269   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000a62  48b6              LDR      r0,|L5.3388|
000a64  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000a66  b140              CBZ      r0,|L5.2682|
000a68  48b5              LDR      r0,|L5.3392|
000a6a  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
000a6c  b128              CBZ      r0,|L5.2682|
;;;1270   		time_proc_phase=0;
000a6e  48b5              LDR      r0,|L5.3396|
000a70  8004              STRH     r4,[r0,#0]
;;;1271   		proc_phase=ppFF;
000a72  48b5              LDR      r0,|L5.3400|
000a74  7004              STRB     r4,[r0,#0]
;;;1272   		REV_STAT=rsFF;	
000a76  48b5              LDR      r0,|L5.3404|
000a78  7001              STRB     r1,[r0,#0]
                  |L5.2682|
;;;1273   	}
;;;1274   	milliAmperSecunda=0L;
000a7a  48b5              LDR      r0,|L5.3408|
000a7c  4621              MOV      r1,r4
;;;1275   	AMPERCHAS=0L;
000a7e  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
000a80  48b4              LDR      r0,|L5.3412|
;;;1276   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000a82  6004              STR      r4,[r0,#0]  ; AMPERCHAS
000a84  e8bd4010          POP      {r4,lr}
000a88  f640401c          MOV      r0,#0xc1c
000a8c  f7ffbffe          B.W      lc640_write_long
                  |L5.2704|
;;;1277   }
000a90  bd10              POP      {r4,pc}
;;;1278   
                          ENDP

                  start_CAP PROC
;;;1279   //-----------------------------------------------
;;;1280   void start_CAP(void) {
000a92  4997              LDR      r1,|L5.3312|
;;;1281   	work_stat=wsCAP;
000a94  2003              MOVS     r0,#3
000a96  7008              STRB     r0,[r1,#0]
;;;1282   }
000a98  4770              BX       lr
;;;1283   
                          ENDP

                  pause_CAP PROC
;;;1284   //-----------------------------------------------
;;;1285   void pause_CAP(void) {
000a9a  4995              LDR      r1,|L5.3312|
;;;1286   	work_stat=wsOFF;
000a9c  2000              MOVS     r0,#0
000a9e  7008              STRB     r0,[r1,#0]
;;;1287   }
000aa0  4770              BX       lr
;;;1288   
                          ENDP

                  stop_CAP PROC
;;;1289   //-----------------------------------------------
;;;1290   void stop_CAP(void) {
000aa2  4993              LDR      r1,|L5.3312|
;;;1291   	work_stat=wsOFF;
000aa4  2000              MOVS     r0,#0
000aa6  7008              STRB     r0,[r1,#0]
;;;1292   
;;;1293   }
000aa8  4770              BX       lr
;;;1294   
                          ENDP

                  ramModbusCnt_hndl PROC
;;;1295   //-----------------------------------------------
;;;1296   void ramModbusCnt_hndl(void)  
000aaa  48ac              LDR      r0,|L5.3420|
;;;1297   {
;;;1298   if(ramModbusCnt) ramModbusCnt--;
000aac  f9b01000          LDRSH    r1,[r0,#0]  ; ramModbusCnt
000ab0  b111              CBZ      r1,|L5.2744|
000ab2  1e49              SUBS     r1,r1,#1
000ab4  8001              STRH     r1,[r0,#0]
;;;1299   else 
;;;1300   	{
;;;1301   	I_ug_ram=0;
;;;1302   	U_up_ram=0;
;;;1303   	}	
;;;1304   }
000ab6  4770              BX       lr
                  |L5.2744|
000ab8  49a9              LDR      r1,|L5.3424|
000aba  2000              MOVS     r0,#0                 ;1301
000abc  8008              STRH     r0,[r1,#0]            ;1301
000abe  49a9              LDR      r1,|L5.3428|
000ac0  8008              STRH     r0,[r1,#0]            ;1302
000ac2  4770              BX       lr
;;;1305   
                          ENDP

                  reset_CAP PROC
;;;1306   //-----------------------------------------------
;;;1307   void reset_CAP(void) {
000ac4  498a              LDR      r1,|L5.3312|
;;;1308   	work_stat=wsOFF;
000ac6  2000              MOVS     r0,#0
000ac8  7008              STRB     r0,[r1,#0]
;;;1309   	cap_time_proc=0;
000aca  498a              LDR      r1,|L5.3316|
;;;1310   	CAP_COUNTER=0;
000acc  6008              STR      r0,[r1,#0]  ; cap_time_proc
000ace  498e              LDR      r1,|L5.3336|
000ad0  8008              STRH     r0,[r1,#0]
;;;1311   	CAP_TIME_SEC=0;
000ad2  4990              LDR      r1,|L5.3348|
000ad4  8008              STRH     r0,[r1,#0]
;;;1312   	CAP_TIME_MIN=0;
000ad6  4990              LDR      r1,|L5.3352|
000ad8  8008              STRH     r0,[r1,#0]
;;;1313   	CAP_TIME_HOUR=0;
000ada  4990              LDR      r1,|L5.3356|
000adc  8008              STRH     r0,[r1,#0]
;;;1314   }
000ade  4770              BX       lr
;;;1315   
                          ENDP

                  stop_proc PROC
;;;1316   //-----------------------------------------------
;;;1317   void stop_proc(void)
000ae0  4983              LDR      r1,|L5.3312|
;;;1318   {
;;;1319   work_stat=wsOFF;
000ae2  2000              MOVS     r0,#0
000ae4  7008              STRB     r0,[r1,#0]
;;;1320   restart_off();
000ae6  e7fe              B        restart_off
;;;1321   }
;;;1322   
                          ENDP

                  find_U_curve PROC
;;;1323   //-----------------------------------------------
;;;1324   short find_U_curve(signed short in)
000ae8  e92d41f0          PUSH     {r4-r8,lr}
;;;1325   {
;;;1326   short ii,i=0,out=0;
000aec  2400              MOVS     r4,#0
000aee  4606              MOV      r6,r0                 ;1325
;;;1327   
;;;1328   ii=0;
;;;1329   
;;;1330   if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) >= in)
000af0  f44f75fa          MOV      r5,#0x1f4
000af4  46a0              MOV      r8,r4                 ;1326
000af6  4627              MOV      r7,r4                 ;1328
000af8  4628              MOV      r0,r5
000afa  f7fffffe          BL       lc640_read_int
000afe  42b0              CMP      r0,r6
000b00  da29              BGE      |L5.2902|
;;;1331   	{
;;;1332   	out=0;
;;;1333   	}
;;;1334   else 
;;;1335   	{
;;;1336   	for (ii=0;ii<=200;ii+=10)
;;;1337   		{
;;;1338   		if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000b02  bf00              NOP      
                  |L5.2820|
000b04  eb050047          ADD      r0,r5,r7,LSL #1
000b08  f7fffffe          BL       lc640_read_int
000b0c  42b0              CMP      r0,r6
000b0e  dc00              BGT      |L5.2834|
;;;1339   			{
;;;1340   			i=ii;
000b10  463c              MOV      r4,r7
                  |L5.2834|
000b12  370a              ADDS     r7,r7,#0xa            ;1336
000b14  b23f              SXTH     r7,r7                 ;1336
000b16  2fc8              CMP      r7,#0xc8              ;1336
000b18  ddf4              BLE      |L5.2820|
;;;1341   			}
;;;1342   		else continue;
;;;1343   		}
;;;1344   	if(i<200)
000b1a  2cc8              CMP      r4,#0xc8
000b1c  da0e              BGE      |L5.2876|
;;;1345   		{
;;;1346   		for (ii=i;ii<i+10;ii++)
000b1e  f104070a          ADD      r7,r4,#0xa
000b22  e008              B        |L5.2870|
                  |L5.2852|
;;;1347   			{
;;;1348   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000b24  eb050044          ADD      r0,r5,r4,LSL #1
000b28  f7fffffe          BL       lc640_read_int
000b2c  42b0              CMP      r0,r6
000b2e  dc00              BGT      |L5.2866|
;;;1349   				{
;;;1350   				out=ii;
000b30  46a0              MOV      r8,r4
                  |L5.2866|
000b32  1c64              ADDS     r4,r4,#1              ;1346
000b34  b224              SXTH     r4,r4                 ;1346
                  |L5.2870|
000b36  42bc              CMP      r4,r7                 ;1346
000b38  dbf4              BLT      |L5.2852|
000b3a  e00c              B        |L5.2902|
                  |L5.2876|
;;;1351   				}
;;;1352   			else continue;
;;;1353   			}
;;;1354   		}
;;;1355   	else 
;;;1356   		{
;;;1357   		for (ii=200;ii<=202;ii++)
000b3c  f05f04c8          MOVS.W   r4,#0xc8
                  |L5.2880|
;;;1358   			{
;;;1359   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000b40  eb050044          ADD      r0,r5,r4,LSL #1
000b44  f7fffffe          BL       lc640_read_int
000b48  42b0              CMP      r0,r6
000b4a  dc00              BGT      |L5.2894|
;;;1360   				{
;;;1361   				out=ii;
000b4c  46a0              MOV      r8,r4
                  |L5.2894|
000b4e  1c64              ADDS     r4,r4,#1              ;1357
000b50  b224              SXTH     r4,r4                 ;1357
000b52  2cca              CMP      r4,#0xca              ;1357
000b54  ddf4              BLE      |L5.2880|
                  |L5.2902|
;;;1362   				}
;;;1363   			else continue;
;;;1364   			}
;;;1365   	
;;;1366   	
;;;1367   		}
;;;1368   	}
;;;1369   
;;;1370   return out;
000b56  4640              MOV      r0,r8
                  |L5.2904|
;;;1371   }
000b58  e42d              B        |L5.950|
;;;1372   
                          ENDP

                  find_I_curve PROC
;;;1373   //-----------------------------------------------
;;;1374   short find_I_curve(signed short in)
000b5a  e92d41f0          PUSH     {r4-r8,lr}
;;;1375   {
;;;1376   short ii,i=0,out=0;
000b5e  2400              MOVS     r4,#0
000b60  4606              MOV      r6,r0                 ;1375
;;;1377   
;;;1378   ii=0;
;;;1379   
;;;1380   if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) >= in)
000b62  f44f757a          MOV      r5,#0x3e8
000b66  46a0              MOV      r8,r4                 ;1376
000b68  4627              MOV      r7,r4                 ;1378
000b6a  4628              MOV      r0,r5
000b6c  f7fffffe          BL       lc640_read_int
000b70  42b0              CMP      r0,r6
000b72  da28              BGE      |L5.3014|
                  |L5.2932|
;;;1381   	{
;;;1382   	out=0;
;;;1383   	}
;;;1384   else 
;;;1385   	{
;;;1386   	for (ii=0;ii<=200;ii+=10)
;;;1387   		{
;;;1388   		if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000b74  eb050047          ADD      r0,r5,r7,LSL #1
000b78  f7fffffe          BL       lc640_read_int
000b7c  42b0              CMP      r0,r6
000b7e  dc00              BGT      |L5.2946|
;;;1389   			{
;;;1390   			i=ii;
000b80  463c              MOV      r4,r7
                  |L5.2946|
000b82  370a              ADDS     r7,r7,#0xa            ;1386
000b84  b23f              SXTH     r7,r7                 ;1386
000b86  2fc8              CMP      r7,#0xc8              ;1386
000b88  ddf4              BLE      |L5.2932|
;;;1391   			}
;;;1392   		else continue;
;;;1393   		}
;;;1394   	
;;;1395   	if(i<200)
000b8a  2cc8              CMP      r4,#0xc8
000b8c  da0e              BGE      |L5.2988|
;;;1396   		{
;;;1397   		for (ii=i;ii<i+10;ii++)
000b8e  f104070a          ADD      r7,r4,#0xa
000b92  e008              B        |L5.2982|
                  |L5.2964|
;;;1398   			{
;;;1399   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000b94  eb050044          ADD      r0,r5,r4,LSL #1
000b98  f7fffffe          BL       lc640_read_int
000b9c  42b0              CMP      r0,r6
000b9e  dc00              BGT      |L5.2978|
;;;1400   				{
;;;1401   				out=ii;
000ba0  46a0              MOV      r8,r4
                  |L5.2978|
000ba2  1c64              ADDS     r4,r4,#1              ;1397
000ba4  b224              SXTH     r4,r4                 ;1397
                  |L5.2982|
000ba6  42bc              CMP      r4,r7                 ;1397
000ba8  dbf4              BLT      |L5.2964|
000baa  e00c              B        |L5.3014|
                  |L5.2988|
;;;1402   				}
;;;1403   			else continue;
;;;1404   			}
;;;1405   		}
;;;1406   	else 
;;;1407   		{
;;;1408   		for (ii=200;ii<=202;ii++)
000bac  f05f04c8          MOVS.W   r4,#0xc8
                  |L5.2992|
;;;1409   			{
;;;1410   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000bb0  eb050044          ADD      r0,r5,r4,LSL #1
000bb4  f7fffffe          BL       lc640_read_int
000bb8  42b0              CMP      r0,r6
000bba  dc00              BGT      |L5.3006|
;;;1411   				{
;;;1412   				out=ii;
000bbc  46a0              MOV      r8,r4
                  |L5.3006|
000bbe  1c64              ADDS     r4,r4,#1              ;1408
000bc0  b224              SXTH     r4,r4                 ;1408
000bc2  2cca              CMP      r4,#0xca              ;1408
000bc4  ddf4              BLE      |L5.2992|
                  |L5.3014|
;;;1413   				}
;;;1414   			else continue;
;;;1415   			}
;;;1416   		}
;;;1417   	}
;;;1418   return out;
000bc6  4640              MOV      r0,r8
;;;1419   }
000bc8  e7c6              B        |L5.2904|
;;;1420   
                          ENDP

                  viz_hndl PROC
;;;1422   //-----------------------------------------------
;;;1423   void viz_hndl(void)
000bca  e92d5ff0          PUSH     {r4-r12,lr}
;;;1424   {
;;;1425   if(ind==iK_viz_u)
000bce  f8df9198          LDR      r9,|L5.3432|
;;;1426   	{
;;;1427   	if(viz_stat==vsON)
;;;1428   		{
;;;1429   		viz_stat_cnt++;
;;;1430   		if(viz_stat_cnt>=10221)
;;;1431   			{
;;;1432   			viz_stat=vsOFF;
;;;1433   			lc640_write_int(EE_U_CURVE_IS_ON,0xabcd);
;;;1434   			//ind=iK_viz_sel;
;;;1435   			tree_down(0,0);
;;;1436   			}
;;;1437   		tst_pwm_i=1022;
;;;1438   		tst_pwm_u=(viz_stat_cnt/50)*5;
000bd2  4f66              LDR      r7,|L5.3436|
000bd4  4e66              LDR      r6,|L5.3440|
000bd6  f8990000          LDRB     r0,[r9,#0]            ;1425  ; a_ind
000bda  4c66              LDR      r4,|L5.3444|
000bdc  2532              MOVS     r5,#0x32
000bde  f24278ed          MOV      r8,#0x27ed            ;1430
000be2  f04f0a00          MOV      r10,#0                ;1432
000be6  f2403bfe          MOV      r11,#0x3fe            ;1437
000bea  2846              CMP      r0,#0x46              ;1425
000bec  d12a              BNE      |L5.3140|
000bee  7830              LDRB     r0,[r6,#0]            ;1427  ; viz_stat
000bf0  2801              CMP      r0,#1                 ;1427
000bf2  d158              BNE      |L5.3238|
000bf4  8820              LDRH     r0,[r4,#0]            ;1429  ; viz_stat_cnt
000bf6  1c40              ADDS     r0,r0,#1              ;1429
000bf8  b200              SXTH     r0,r0                 ;1429
000bfa  8020              STRH     r0,[r4,#0]            ;1429
000bfc  4540              CMP      r0,r8                 ;1430
000bfe  db09              BLT      |L5.3092|
000c00  f886a000          STRB     r10,[r6,#0]           ;1432
000c04  495c              LDR      r1,|L5.3448|
000c06  20ac              MOVS     r0,#0xac              ;1433
000c08  f7fffffe          BL       lc640_write_int
000c0c  2100              MOVS     r1,#0                 ;1435
000c0e  4608              MOV      r0,r1                 ;1435
000c10  f7fffffe          BL       tree_down
                  |L5.3092|
000c14  4959              LDR      r1,|L5.3452|
000c16  f8a1b000          STRH     r11,[r1,#0]           ;1437
000c1a  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000c1e  fb91f0f5          SDIV     r0,r1,r5
;;;1439   		if(viz_stat_cnt%50==49)
000c22  fb051110          MLS      r1,r5,r0,r1
000c26  eb000280          ADD      r2,r0,r0,LSL #2       ;1438
000c2a  803a              STRH     r2,[r7,#0]            ;1438
000c2c  2931              CMP      r1,#0x31
000c2e  d109              BNE      |L5.3140|
;;;1440   			{
;;;1441   			lc640_write_int(SEKTOR_KURVE_U+((viz_stat_cnt/50)*2),load_U);
000c30  f44f71fa          MOV      r1,#0x1f4
000c34  eb010040          ADD      r0,r1,r0,LSL #1
000c38  4951              LDR      r1,|L5.3456|
000c3a  b200              SXTH     r0,r0
000c3c  f9b11000          LDRSH    r1,[r1,#0]  ; load_U
000c40  f7fffffe          BL       lc640_write_int
                  |L5.3140|
;;;1442   			}
;;;1443   		}
;;;1444   	}
;;;1445   
;;;1446   if(ind==iK_viz_i)
000c44  f8990000          LDRB     r0,[r9,#0]  ; a_ind
000c48  2845              CMP      r0,#0x45
000c4a  d12c              BNE      |L5.3238|
;;;1447   	{
;;;1448   	if(viz_stat==vsON)
000c4c  7830              LDRB     r0,[r6,#0]  ; viz_stat
000c4e  2801              CMP      r0,#1
000c50  d129              BNE      |L5.3238|
;;;1449   		{
;;;1450   		viz_stat_cnt++;
000c52  8820              LDRH     r0,[r4,#0]  ; viz_stat_cnt
000c54  1c40              ADDS     r0,r0,#1
000c56  b200              SXTH     r0,r0
000c58  8020              STRH     r0,[r4,#0]
;;;1451   		if(viz_stat_cnt>=10221)
000c5a  4540              CMP      r0,r8
000c5c  db09              BLT      |L5.3186|
;;;1452   			{
;;;1453   			viz_stat=vsOFF;
000c5e  f886a000          STRB     r10,[r6,#0]
;;;1454   			lc640_write_int(EE_I_CURVE_IS_ON,0xabcd);
000c62  4945              LDR      r1,|L5.3448|
000c64  20ae              MOVS     r0,#0xae
000c66  f7fffffe          BL       lc640_write_int
;;;1455   			//ind=iK_viz_sel;
;;;1456   			tree_down(0,0);
000c6a  2100              MOVS     r1,#0
000c6c  4608              MOV      r0,r1
000c6e  f7fffffe          BL       tree_down
                  |L5.3186|
;;;1457   			}
;;;1458   		tst_pwm_u=1022;
000c72  f8a7b000          STRH     r11,[r7,#0]
;;;1459   		tst_pwm_i=(viz_stat_cnt/50)*5;
000c76  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000c7a  4b40              LDR      r3,|L5.3452|
000c7c  fb91f0f5          SDIV     r0,r1,r5
;;;1460   		if(viz_stat_cnt%50==49)
000c80  fb051110          MLS      r1,r5,r0,r1
000c84  eb000280          ADD      r2,r0,r0,LSL #2       ;1459
000c88  801a              STRH     r2,[r3,#0]            ;1459
000c8a  2931              CMP      r1,#0x31
000c8c  d10b              BNE      |L5.3238|
;;;1461   			{
;;;1462   			lc640_write_int(SEKTOR_KURVE_I+((viz_stat_cnt/50)*2),load_I);
000c8e  f44f717a          MOV      r1,#0x3e8
000c92  eb010040          ADD      r0,r1,r0,LSL #1
000c96  493b              LDR      r1,|L5.3460|
000c98  b200              SXTH     r0,r0
000c9a  f9b11000          LDRSH    r1,[r1,#0]  ; load_I
000c9e  e8bd5ff0          POP      {r4-r12,lr}
000ca2  f7ffbffe          B.W      lc640_write_int
                  |L5.3238|
;;;1463   			}
;;;1464   		}
;;;1465   	}
;;;1466   }
000ca6  e5da              B        |L5.2142|
;;;1467   
                          ENDP

                  bps_hndl PROC
;;;1470   //-----------------------------------------------
;;;1471   void bps_hndl(void) /*ГЦ, 10 раз в секунду*/
000ca8  e92d5ffc          PUSH     {r2-r12,lr}
;;;1472   {
;;;1473   char /*ptr__,*/i;
;;;1474   
;;;1475   if((REV_IS_ON)&&(AVT_REV_IS_ON)) {
000cac  4823              LDR      r0,|L5.3388|
;;;1476   	if(work_stat==wsGS) {
000cae  f8dfa040          LDR      r10,|L5.3312|
000cb2  8800              LDRH     r0,[r0,#0]            ;1475  ; REV_IS_ON
000cb4  b1c8              CBZ      r0,|L5.3306|
000cb6  4822              LDR      r0,|L5.3392|
000cb8  8800              LDRH     r0,[r0,#0]            ;1475  ; AVT_REV_IS_ON
000cba  b1b0              CBZ      r0,|L5.3306|
;;;1477   		if(REV_STAT==rsFF) 	I_ug_temp=AVT_REV_I_NOM_FF;
000cbc  4832              LDR      r0,|L5.3464|
000cbe  f89a3000          LDRB     r3,[r10,#0]           ;1476  ; work_stat
000cc2  f9b01000          LDRSH    r1,[r0,#0]
000cc6  4821              LDR      r0,|L5.3404|
000cc8  2b01              CMP      r3,#1                 ;1476
000cca  7800              LDRB     r0,[r0,#0]
000ccc  d007              BEQ      |L5.3294|
;;;1478   		else if (REV_STAT==rsREW) I_ug_temp=AVT_REV_I_NOM_REW;
;;;1479   	} else if (work_stat==wsPS) {
;;;1480   		if(REV_STAT==rsFF) 	U_up_temp=AVT_REV_U_NOM_FF;
000cce  4a2f              LDR      r2,|L5.3468|
000cd0  2b02              CMP      r3,#2                 ;1479
000cd2  f9b22000          LDRSH    r2,[r2,#0]
000cd6  d062              BEQ      |L5.3486|
;;;1481   		else if (REV_STAT==rsREW) U_up_temp=AVT_REV_U_NOM_REW;
;;;1482   	} else {
;;;1483   		U_up_temp=AVT_REV_U_NOM_FF;
000cd8  482d              LDR      r0,|L5.3472|
000cda  8002              STRH     r2,[r0,#0]
;;;1484   		I_ug_temp=AVT_REV_I_NOM_FF;
000cdc  e003              B        |L5.3302|
                  |L5.3294|
000cde  2801              CMP      r0,#1                 ;1477
000ce0  d001              BEQ      |L5.3302|
000ce2  b118              CBZ      r0,|L5.3308|
000ce4  e07a              B        |L5.3548|
                  |L5.3302|
000ce6  482b              LDR      r0,|L5.3476|
000ce8  e077              B        |L5.3546|
                  |L5.3306|
000cea  e061              B        |L5.3504|
                  |L5.3308|
000cec  e054              B        |L5.3480|
000cee  e056              B        |L5.3486|
                  |L5.3312|
                          DCD      work_stat
                  |L5.3316|
                          DCD      cap_time_proc
                  |L5.3320|
                          DCD      CAP_ZAR_TIME
                  |L5.3324|
                          DCD      CAP_PAUSE1_TIME
                  |L5.3328|
                          DCD      CAP_RAZR_TIME
                  |L5.3332|
                          DCD      CAP_PAUSE2_TIME
                  |L5.3336|
                          DCD      CAP_COUNTER
                  |L5.3340|
                          DCD      bOFF
                  |L5.3344|
                          DCD      bRAZR
                  |L5.3348|
                          DCD      CAP_TIME_SEC
                  |L5.3352|
                          DCD      CAP_TIME_MIN
                  |L5.3356|
                          DCD      CAP_TIME_HOUR
                  |L5.3360|
                          DCD      SK_START
                  |L5.3364|
                          DCD      SK_START_LEV
                  |L5.3368|
                          DCD      sk_in_drv_stat
                  |L5.3372|
                          DCD      time_proc
                  |L5.3376|
                          DCD      T_PROC_GS
                  |L5.3380|
                          DCD      time_proc_remain
                  |L5.3384|
                          DCD      ||area_number.25||
                  |L5.3388|
                          DCD      REV_IS_ON
                  |L5.3392|
                          DCD      AVT_REV_IS_ON
                  |L5.3396|
                          DCD      time_proc_phase
                  |L5.3400|
                          DCD      proc_phase
                  |L5.3404|
                          DCD      REV_STAT
                  |L5.3408|
                          DCD      milliAmperSecunda
                  |L5.3412|
                          DCD      AMPERCHAS
                  |L5.3416|
                          DCD      T_PROC_PS
                  |L5.3420|
                          DCD      ramModbusCnt
                  |L5.3424|
                          DCD      I_ug_ram
                  |L5.3428|
                          DCD      U_up_ram
                  |L5.3432|
                          DCD      a_ind
                  |L5.3436|
                          DCD      tst_pwm_u
                  |L5.3440|
                          DCD      viz_stat
                  |L5.3444|
                          DCD      viz_stat_cnt
                  |L5.3448|
                          DCD      0xffffabcd
                  |L5.3452|
                          DCD      tst_pwm_i
                  |L5.3456|
                          DCD      load_U
                  |L5.3460|
                          DCD      load_I
                  |L5.3464|
                          DCD      AVT_REV_I_NOM_FF
                  |L5.3468|
                          DCD      AVT_REV_U_NOM_FF
                  |L5.3472|
                          DCD      U_up_temp
                  |L5.3476|
                          DCD      I_ug_temp
                  |L5.3480|
000d98  48fa              LDR      r0,|L5.4484|
000d9a  8801              LDRH     r1,[r0,#0]            ;1478  ; AVT_REV_I_NOM_REW
000d9c  e7a3              B        |L5.3302|
                  |L5.3486|
000d9e  2801              CMP      r0,#1                 ;1480
000da0  d001              BEQ      |L5.3494|
000da2  b118              CBZ      r0,|L5.3500|
000da4  e01a              B        |L5.3548|
                  |L5.3494|
000da6  48f8              LDR      r0,|L5.4488|
000da8  8002              STRH     r2,[r0,#0]            ;1480
000daa  e017              B        |L5.3548|
                  |L5.3500|
000dac  48f7              LDR      r0,|L5.4492|
000dae  e012              B        |L5.3542|
                  |L5.3504|
;;;1485   	}
;;;1486   } else {
;;;1487   
;;;1488   if(fiks_stat_I==2)I_ug_temp=I_ug3;
000db0  48f7              LDR      r0,|L5.4496|
000db2  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_I
000db6  2802              CMP      r0,#2
000db8  d068              BEQ      |L5.3724|
;;;1489   else if(fiks_stat_I==1)I_ug_temp=I_ug2;
000dba  2801              CMP      r0,#1
000dbc  d068              BEQ      |L5.3728|
;;;1490   else I_ug_temp=I_ug;
000dbe  48f5              LDR      r0,|L5.4500|
                  |L5.3520|
000dc0  8801              LDRH     r1,[r0,#0]            ;1489  ; I_ug2
000dc2  48f5              LDR      r0,|L5.4504|
000dc4  8001              STRH     r1,[r0,#0]            ;1489
;;;1491   
;;;1492   if(fiks_stat_U==2)U_up_temp=U_up3;
000dc6  48f5              LDR      r0,|L5.4508|
000dc8  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_U
000dcc  2802              CMP      r0,#2
000dce  d061              BEQ      |L5.3732|
;;;1493   	else if(fiks_stat_U==1)U_up_temp=U_up2;
000dd0  2801              CMP      r0,#1
000dd2  d061              BEQ      |L5.3736|
;;;1494   	else U_up_temp=U_up;
000dd4  48f2              LDR      r0,|L5.4512|
                  |L5.3542|
000dd6  8801              LDRH     r1,[r0,#0]            ;1493  ; U_up2
000dd8  48eb              LDR      r0,|L5.4488|
                  |L5.3546|
000dda  8001              STRH     r1,[r0,#0]            ;1493
                  |L5.3548|
;;;1495   
;;;1496   }
;;;1497   	
;;;1498   gran(&I_ug_temp,0/*I_MIN_IPS*/,I_MAX_IPS);
000ddc  48f1              LDR      r0,|L5.4516|
000dde  2100              MOVS     r1,#0
000de0  f9b02000          LDRSH    r2,[r0,#0]  ; I_MAX_IPS
000de4  48ec              LDR      r0,|L5.4504|
000de6  f7fffffe          BL       gran
;;;1499   gran(&U_up_temp,0/*U_MIN*/,U_MAX);
000dea  48ef              LDR      r0,|L5.4520|
000dec  2100              MOVS     r1,#0
000dee  f9b02000          LDRSH    r2,[r0,#0]  ; U_MAX
000df2  48e5              LDR      r0,|L5.4488|
000df4  f7fffffe          BL       gran
;;;1500   
;;;1501   if(sh_cnt0<10) {
000df8  4eec              LDR      r6,|L5.4524|
000dfa  2500              MOVS     r5,#0                 ;1475
000dfc  f04f0901          MOV      r9,#1                 ;1476
000e00  7970              LDRB     r0,[r6,#5]  ; sh_cnt0
000e02  280a              CMP      r0,#0xa
000e04  d212              BCS      |L5.3628|
;;;1502   	sh_cnt0++;
000e06  1c40              ADDS     r0,r0,#1
000e08  b2c0              UXTB     r0,r0
000e0a  7170              STRB     r0,[r6,#5]
;;;1503   	if(sh_cnt0>=10) {
000e0c  280a              CMP      r0,#0xa
000e0e  d30d              BCC      |L5.3628|
;;;1504   		sh_cnt0=0;
000e10  7175              STRB     r5,[r6,#5]
;;;1505   		b1Hz_sh=1;
000e12  f8869006          STRB     r9,[r6,#6]
;;;1506   		if(sh_cnt1<5) {
000e16  79f1              LDRB     r1,[r6,#7]  ; sh_cnt1
000e18  4648              MOV      r0,r9                 ;1505
000e1a  2905              CMP      r1,#5
000e1c  d206              BCS      |L5.3628|
;;;1507   			sh_cnt1++;
000e1e  1c49              ADDS     r1,r1,#1
000e20  b2c9              UXTB     r1,r1
000e22  71f1              STRB     r1,[r6,#7]
;;;1508   			if(sh_cnt1>=5) {
000e24  2905              CMP      r1,#5
000e26  d301              BCC      |L5.3628|
;;;1509   			 	sh_cnt1=0;
000e28  71f5              STRB     r5,[r6,#7]
;;;1510   				bPRECESSION_REG=1;
000e2a  72f0              STRB     r0,[r6,#0xb]
                  |L5.3628|
;;;1511   			}
;;;1512   		}
;;;1513   	}
;;;1514   }
;;;1515   
;;;1516   if(ind==iK_load)
000e2c  48e0              LDR      r0,|L5.4528|
;;;1517   	{
;;;1518   	if(sub_ind==0)		 
;;;1519   		{
;;;1520   		cntrl_stat_U=1022;
;;;1521   		cntrl_stat_I=1022;
;;;1522   		bps_stat=stON;
000e2e  4be1              LDR      r3,|L5.4532|
;;;1523   
;;;1524   		for(i=0;i<NUMIST;i++)
;;;1525   			{
;;;1526   			bps[i]._vol_u=1022;
;;;1527   			bps[i]._vol_i=1022;
;;;1528   			bps[i]._flags_tu=0;
;;;1529   			}
;;;1530   		}
;;;1531   	else if(sub_ind==1)
;;;1532   		{
;;;1533   		if(phase==0)
000e30  49e1              LDR      r1,|L5.4536|
000e32  f890c000          LDRB     r12,[r0,#0]           ;1516  ; a_ind
000e36  4ce1              LDR      r4,|L5.4540|
000e38  4fe1              LDR      r7,|L5.4544|
000e3a  f24038fe          MOV      r8,#0x3fe             ;1520
000e3e  f1bc0f31          CMP      r12,#0x31             ;1516
000e42  d02b              BEQ      |L5.3740|
;;;1534   			{
;;;1535     			cntrl_stat_U=0;
;;;1536   			cntrl_stat_I=0;
;;;1537   			bps_stat=stOFF;
;;;1538   
;;;1539   			for(i=0;i<NUMIST;i++)
;;;1540   				{
;;;1541   				bps[i]._vol_u=0;
;;;1542   				bps[i]._vol_i=0;
;;;1543   				bps[i]._flags_tu=1;
;;;1544   				}
;;;1545   			}
;;;1546   		else if(phase==1)
;;;1547   			{
;;;1548     			cntrl_stat_U=1022;
;;;1549   			cntrl_stat_I=1022;
;;;1550   			bps_stat=stON;
;;;1551   
;;;1552   			for(i=0;i<NUMIST;i++)
;;;1553   				{
;;;1554   				bps[i]._vol_u=1022;
;;;1555   				bps[i]._vol_i=1022;
;;;1556   				bps[i]._flags_tu=0;
;;;1557   				}
;;;1558   			}
;;;1559   		}
;;;1560   	else 
;;;1561   		{
;;;1562   		bps_stat=stOFF;
;;;1563   
;;;1564   		bps[0]._vol_u=0;
;;;1565   		bps[0]._vol_i=0;
;;;1566   		bps[0]._flags_tu=1;
;;;1567   		}
;;;1568   	}
;;;1569   else if((ind==iK_bps)||(ind==iK_bps_v2))
000e44  f1bc0f2b          CMP      r12,#0x2b
000e48  d074              BEQ      |L5.3892|
000e4a  f1bc0f2c          CMP      r12,#0x2c
000e4e  d071              BEQ      |L5.3892|
;;;1570   	{
;;;1571   	if((sub_ind==0)||(sub_ind==3))
;;;1572   		{
;;;1573   		cntrl_stat_U=1022;
;;;1574   		cntrl_stat_I=1022;
;;;1575   		bps_stat=stON;
;;;1576   
;;;1577   		bps[0]._vol_u=0;
;;;1578   		bps[0]._vol_i=0;
;;;1579   		bps[0]._flags_tu=1;
;;;1580   
;;;1581   		bps[1]._vol_u=0;
;;;1582   		bps[1]._vol_i=0;
;;;1583   		bps[1]._flags_tu=1;
;;;1584   
;;;1585   		bps[1]._vol_u=0;
;;;1586   		bps[1]._vol_i=0;
;;;1587   		bps[1]._flags_tu=1;
;;;1588   
;;;1589   		bps[2]._vol_u=0;
;;;1590   		bps[2]._vol_i=0;
;;;1591   		bps[2]._flags_tu=1;
;;;1592   
;;;1593   		bps[3]._vol_u=0;
;;;1594   		bps[3]._vol_i=0;
;;;1595   		bps[3]._flags_tu=1;
;;;1596   
;;;1597   		bps[4]._vol_u=0;
;;;1598   		bps[4]._vol_i=0;
;;;1599   		bps[4]._flags_tu=1;
;;;1600   
;;;1601   		bps[5]._vol_u=0;
;;;1602   		bps[5]._vol_i=0;
;;;1603   		bps[5]._flags_tu=1;
;;;1604   
;;;1605   		bps[6]._vol_u=0;
;;;1606   		bps[6]._vol_i=0;
;;;1607   		bps[6]._flags_tu=1;
;;;1608   
;;;1609   		bps[7]._vol_u=0;
;;;1610   		bps[7]._vol_i=0;
;;;1611   		bps[7]._flags_tu=1;
;;;1612   
;;;1613   		bps[8]._vol_u=0;
;;;1614   		bps[8]._vol_i=0;
;;;1615   		bps[8]._flags_tu=1;
;;;1616   		
;;;1617   		bps[9]._vol_u=0;
;;;1618   		bps[9]._vol_i=0;
;;;1619   		bps[9]._flags_tu=1;
;;;1620   
;;;1621   		bps[10]._vol_u=0;
;;;1622   		bps[10]._vol_i=0;
;;;1623   		bps[10]._flags_tu=1;
;;;1624   
;;;1625   		bps[11]._vol_u=0;
;;;1626   		bps[11]._vol_i=0;
;;;1627   		bps[11]._flags_tu=1;
;;;1628    		
;;;1629   		bps[sub_ind1]._vol_u=1022;
;;;1630   		bps[sub_ind1]._vol_i=1022;
;;;1631   		bps[sub_ind1]._flags_tu=0;
;;;1632   		}
;;;1633   
;;;1634   	else if(sub_ind==6)
;;;1635   		{
;;;1636   		if(phase==0)
;;;1637   			{
;;;1638     			cntrl_stat_U=0;
;;;1639   			cntrl_stat_I=0;
;;;1640   			bps_stat=stOFF;
;;;1641   			bps[0]._vol_u=0;
;;;1642   			bps[0]._vol_i=0;
;;;1643   			bps[0]._flags_tu=1;
;;;1644   	
;;;1645   			bps[1]._vol_u=0;
;;;1646   			bps[1]._vol_i=0;
;;;1647   			bps[1]._flags_tu=1;
;;;1648   	
;;;1649   			bps[1]._vol_u=0;
;;;1650   			bps[1]._vol_i=0;
;;;1651   			bps[1]._flags_tu=1;
;;;1652   	
;;;1653   			bps[2]._vol_u=0;
;;;1654   			bps[2]._vol_i=0;
;;;1655   			bps[2]._flags_tu=1;
;;;1656   	
;;;1657   			bps[3]._vol_u=0;
;;;1658   			bps[3]._vol_i=0;
;;;1659   			bps[3]._flags_tu=1;
;;;1660   	
;;;1661   			bps[4]._vol_u=0;
;;;1662   			bps[4]._vol_i=0;
;;;1663   			bps[4]._flags_tu=1;
;;;1664   	
;;;1665   			bps[5]._vol_u=0;
;;;1666   			bps[5]._vol_i=0;
;;;1667   			bps[5]._flags_tu=1;
;;;1668   	
;;;1669   			bps[6]._vol_u=0;
;;;1670   			bps[6]._vol_i=0;
;;;1671   			bps[6]._flags_tu=1;
;;;1672   	
;;;1673   			bps[7]._vol_u=0;
;;;1674   			bps[7]._vol_i=0;
;;;1675   			bps[7]._flags_tu=1;
;;;1676   	
;;;1677   			bps[8]._vol_u=0;
;;;1678   			bps[8]._vol_i=0;
;;;1679   			bps[8]._flags_tu=1;
;;;1680   			
;;;1681   			bps[9]._vol_u=0;
;;;1682   			bps[9]._vol_i=0;
;;;1683   			bps[9]._flags_tu=1;
;;;1684   	
;;;1685   			bps[10]._vol_u=0;
;;;1686   			bps[10]._vol_i=0;
;;;1687   			bps[10]._flags_tu=1;
;;;1688   	
;;;1689   			bps[11]._vol_u=0;
;;;1690   			bps[11]._vol_i=0;
;;;1691   			bps[11]._flags_tu=1;
;;;1692   
;;;1693   			}
;;;1694   		else if(phase==1)
;;;1695   			{
;;;1696     			cntrl_stat_U=1022;
;;;1697   			cntrl_stat_I=1022;
;;;1698   			bps_stat=stON;
;;;1699   
;;;1700   			bps[0]._vol_u=0;
;;;1701   			bps[0]._vol_i=0;
;;;1702   			bps[0]._flags_tu=1;
;;;1703   	
;;;1704   			bps[1]._vol_u=0;
;;;1705   			bps[1]._vol_i=0;
;;;1706   			bps[1]._flags_tu=1;
;;;1707   	
;;;1708   			bps[1]._vol_u=0;
;;;1709   			bps[1]._vol_i=0;
;;;1710   			bps[1]._flags_tu=1;
;;;1711   	
;;;1712   			bps[2]._vol_u=0;
;;;1713   			bps[2]._vol_i=0;
;;;1714   			bps[2]._flags_tu=1;
;;;1715   	
;;;1716   			bps[3]._vol_u=0;
;;;1717   			bps[3]._vol_i=0;
;;;1718   			bps[3]._flags_tu=1;
;;;1719   	
;;;1720   			bps[4]._vol_u=0;
;;;1721   			bps[4]._vol_i=0;
;;;1722   			bps[4]._flags_tu=1;
;;;1723   	
;;;1724   			bps[5]._vol_u=0;
;;;1725   			bps[5]._vol_i=0;
;;;1726   			bps[5]._flags_tu=1;
;;;1727   	
;;;1728   			bps[6]._vol_u=0;
;;;1729   			bps[6]._vol_i=0;
;;;1730   			bps[6]._flags_tu=1;
;;;1731   	
;;;1732   			bps[7]._vol_u=0;
;;;1733   			bps[7]._vol_i=0;
;;;1734   			bps[7]._flags_tu=1;
;;;1735   	
;;;1736   			bps[8]._vol_u=0;
;;;1737   			bps[8]._vol_i=0;
;;;1738   			bps[8]._flags_tu=1;
;;;1739   			
;;;1740   			bps[9]._vol_u=0;
;;;1741   			bps[9]._vol_i=0;
;;;1742   			bps[9]._flags_tu=1;
;;;1743   	
;;;1744   			bps[10]._vol_u=0;
;;;1745   			bps[10]._vol_i=0;
;;;1746   			bps[10]._flags_tu=1;
;;;1747   	
;;;1748   			bps[11]._vol_u=0;
;;;1749   			bps[11]._vol_i=0;
;;;1750   			bps[11]._flags_tu=1;
;;;1751   
;;;1752   
;;;1753   
;;;1754   			bps[sub_ind1]._vol_u=1022;
;;;1755   			bps[sub_ind1]._vol_i=1022;
;;;1756   			bps[sub_ind1]._flags_tu=0;
;;;1757   			}
;;;1758   		}
;;;1759   	else 
;;;1760   		{
;;;1761   		bps_stat=stOFF;
;;;1762   
;;;1763   		bps[0]._vol_u=0;
;;;1764   		bps[0]._vol_i=0;
;;;1765   		bps[0]._flags_tu=1;
;;;1766   
;;;1767   		bps[1]._vol_u=0;
;;;1768   		bps[1]._vol_i=0;
;;;1769   		bps[1]._flags_tu=1;
;;;1770   
;;;1771   		bps[1]._vol_u=0;
;;;1772   		bps[1]._vol_i=0;
;;;1773   		bps[1]._flags_tu=1;
;;;1774   
;;;1775   		bps[2]._vol_u=0;
;;;1776   		bps[2]._vol_i=0;
;;;1777   		bps[2]._flags_tu=1;
;;;1778   
;;;1779   		bps[3]._vol_u=0;
;;;1780   		bps[3]._vol_i=0;
;;;1781   		bps[3]._flags_tu=1;
;;;1782   
;;;1783   		bps[4]._vol_u=0;
;;;1784   		bps[4]._vol_i=0;
;;;1785   		bps[4]._flags_tu=1;
;;;1786   
;;;1787   		bps[5]._vol_u=0;
;;;1788   		bps[5]._vol_i=0;
;;;1789   		bps[5]._flags_tu=1;
;;;1790   
;;;1791   		bps[6]._vol_u=0;
;;;1792   		bps[6]._vol_i=0;
;;;1793   		bps[6]._flags_tu=1;
;;;1794   
;;;1795   		bps[7]._vol_u=0;
;;;1796   		bps[7]._vol_i=0;
;;;1797   		bps[7]._flags_tu=1;
;;;1798   
;;;1799   		bps[8]._vol_u=0;
;;;1800   		bps[8]._vol_i=0;
;;;1801   		bps[8]._flags_tu=1;
;;;1802   		
;;;1803   		bps[9]._vol_u=0;
;;;1804   		bps[9]._vol_i=0;
;;;1805   		bps[9]._flags_tu=1;
;;;1806   
;;;1807   		bps[10]._vol_u=0;
;;;1808   		bps[10]._vol_i=0;
;;;1809   		bps[10]._flags_tu=1;
;;;1810   
;;;1811   		bps[11]._vol_u=0;
;;;1812   		bps[11]._vol_i=0;
;;;1813   		bps[11]._flags_tu=1;
;;;1814   
;;;1815   		}
;;;1816   	}
;;;1817   
;;;1818   else if(ind==iTst_pwm)
;;;1819   	{
;;;1820   	char i;
;;;1821   
;;;1822   	for(i=0;i<NUMIST;i++)
;;;1823   		{
;;;1824   		bps[i]._vol_u=tst_pwm_u;
000e50  4adc              LDR      r2,|L5.4548|
;;;1825   		bps[i]._vol_i=tst_pwm_i;
000e52  49dd              LDR      r1,|L5.4552|
000e54  f1bc0f34          CMP      r12,#0x34             ;1818
000e58  d06d              BEQ      |L5.3894|
;;;1826   		bps[i]._flags_tu=0;
;;;1827   		}
;;;1828   	}
;;;1829   
;;;1830   else if(ind==iK_viz_u)
;;;1831   	{
;;;1832   	char i;
;;;1833   
;;;1834   	if(viz_stat!=vsON)
000e5a  48dc              LDR      r0,|L5.4556|
000e5c  f1bc0f46          CMP      r12,#0x46             ;1830
000e60  d06a              BEQ      |L5.3896|
;;;1835   		{
;;;1836   		for(i=0;i<NUMIST;i++)
;;;1837   			{
;;;1838   			bps[i]._vol_u=1022;
;;;1839   			bps[i]._vol_i=1022;
;;;1840   			bps[i]._flags_tu=0;
;;;1841   			}
;;;1842   		}
;;;1843   	else 
;;;1844   		{
;;;1845   		for(i=0;i<NUMIST;i++)
;;;1846   			{
;;;1847   			bps[i]._vol_u=tst_pwm_u;
;;;1848   			bps[i]._vol_i=tst_pwm_i;
;;;1849   			bps[i]._flags_tu=0;
;;;1850   			}
;;;1851   		}
;;;1852   	}
;;;1853   
;;;1854   else if(ind==iK_viz_i)
000e62  f1bc0f45          CMP      r12,#0x45
000e66  d068              BEQ      |L5.3898|
;;;1855   	{
;;;1856   	char i;
;;;1857   
;;;1858   	if(viz_stat!=vsON)
;;;1859   		{
;;;1860   		for(i=0;i<NUMIST;i++)
;;;1861   			{
;;;1862   			bps[i]._vol_u=1022;
;;;1863   			bps[i]._vol_i=1022;
;;;1864   			bps[i]._flags_tu=0;
;;;1865   			}
;;;1866   		}
;;;1867   	else 
;;;1868   		{
;;;1869   		for(i=0;i<NUMIST;i++)
;;;1870   			{
;;;1871   			bps[i]._vol_u=tst_pwm_u;
;;;1872   			bps[i]._vol_i=tst_pwm_i;
;;;1873   			bps[i]._flags_tu=0;
;;;1874   			}
;;;1875   		}
;;;1876   	}
;;;1877   
;;;1878   else if(work_stat==wsGS)
000e68  f89a0000          LDRB     r0,[r10,#0]  ; work_stat
;;;1879   	{
;;;1880   	signed long temp_SL_U,temp_SL_I;
;;;1881   	
;;;1882   	if((CURR_FADE_IN) && (time_proc<CURR_FADE_IN))
;;;1883   		{
;;;1884   		signed long temp_SL_;
;;;1885   		
;;;1886   		temp_SL_=	(signed long)I_ug_temp;
;;;1887   		temp_SL_*= (signed long)time_proc;
;;;1888   		temp_SL_/= (signed long)CURR_FADE_IN;
;;;1889   
;;;1890   		//I_ug_temp= (signed short)((signed long)I_ug_temp*(signed long)time_proc)/(signed long)CURR_FADE_IN;
;;;1891   
;;;1892   		I_ug_temp= (signed short)temp_SL_;
;;;1893   		}	
;;;1894   	
;;;1895   	if(b1Hz_sh) {
;;;1896   
;;;1897   
;;;1898   
;;;1899   
;;;1900   		if(!((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF)))) {
;;;1901   	 		if(load_I<I_ug_temp)_x_++;
;;;1902      			else if(load_I>I_ug_temp)_x_--;
;;;1903   			//gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;1904   			gran(&_x_,-50,50); 
;;;1905   
;;;1906   	 		if(load_U<U_maxg)_xu_++;
000e6c  f8dfa360          LDR      r10,|L5.4560|
000e70  f8dfb360          LDR      r11,|L5.4564|
000e74  2801              CMP      r0,#1                 ;1878
000e76  d070              BEQ      |L5.3930|
;;;1907      			else if(load_U>U_maxg)_xu_--;
;;;1908   			//gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;1909   			gran(&_xu_,-50,50); 
;;;1910   		}
;;;1911   	}
;;;1912   
;;;1913   	temp_SL_U=1022;
;;;1914   	temp_SL_U*=(signed long)U_maxg;
;;;1915   	temp_SL_U/=(signed long)U_MAX;
;;;1916   
;;;1917   	temp_SL_I=1022;
;;;1918   	//temp_SL_I*=NUMIST;
;;;1919   	temp_SL_I*=(signed long)I_ug_temp;
;;;1920   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1921   
;;;1922   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1923   		{
;;;1924   		temp_SL_U=find_U_curve(U_maxg)*5;
;;;1925   		}
;;;1926   	 
;;;1927   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1928   		{
;;;1929   		temp_SL_I=find_I_curve(I_ug_temp)*5;
;;;1930   		}
;;;1931   
;;;1932   	for(i=0;i<NUMIST;i++)
;;;1933   		{
;;;1934   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;1935   		 	bps[i]._vol_u=0;
;;;1936   			bps[i]._vol_i=0;
;;;1937   			bps[i]._flags_tu=1;
;;;1938   		} else {
;;;1939   			bps[i]._vol_u=(short)temp_SL_U + _xu_/*+bps[i]._xu_*/;
;;;1940   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1941   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1942   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1943   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1944   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1945   			bps[i]._flags_tu=0;
;;;1946   		}
;;;1947   	}
;;;1948   
;;;1949   	}
;;;1950   else if(work_stat==wsPS)
000e78  2802              CMP      r0,#2
000e7a  d06f              BEQ      |L5.3932|
;;;1951   	{
;;;1952   	signed long temp_SL_U,temp_SL_I;
;;;1953   	/*	U_up_d=U_up/100;
;;;1954   	if(U_up_d<5) U_up_d=5;
;;;1955   	*/
;;;1956   	if(load_U_>5)bU_VALID=1;
;;;1957   	else bU_VALID=0;
;;;1958   
;;;1959   	temp_SL_U=(long)U_up_temp/100L;
;;;1960   	if(temp_SL_U<=0)temp_SL_U=1;
;;;1961   	if((abs(load_U_-U_up_temp))<(signed short)temp_SL_U) bU_VALID_VALID=1;
;;;1962   	else bU_VALID_VALID=0;
;;;1963   /*	if( (load_U_>(U_up-U_up_d))&&(load_U_<(U_up+U_up_d)) )bFAST_REG=0;
;;;1964   	else bFAST_REG=1;*/
;;;1965   
;;;1966   	bFAST_REG=0;
;;;1967   
;;;1968   	if(bU_VALID_VALID)
;;;1969   		{
;;;1970   		if(bPRECESSION_REG)
;;;1971   			{
;;;1972   			bPRECESSION_REG=0;
;;;1973   			if(load_U_<U_up_temp)_xu_++;
;;;1974      			else if(load_U_>U_up_temp)_xu_--;
;;;1975   			gran(&_xu_,-50,50);
;;;1976   			}
;;;1977   		}
;;;1978   	else if((b1Hz_sh&&bU_VALID)||(bFAST_REG&&bU_VALID))
;;;1979   		{
;;;1980   	 	if(load_I<I_maxp)_x_++;
;;;1981      		else if(load_I>I_maxp)_x_--;
;;;1982   		gran(&_x_,-50,50); 
;;;1983   
;;;1984   	 	if(load_U_<U_up_temp)_xu_++;
;;;1985      		else if(load_U_>U_up_temp)_xu_--;
;;;1986   		gran(&_xu_,-50,50); 
;;;1987   
;;;1988   		}
;;;1989   
;;;1990   
;;;1991   	temp_SL_U=900;
;;;1992   	temp_SL_U*=(signed long)U_up_temp;
;;;1993   	temp_SL_U/=(signed long)U_MAX;
;;;1994   	temp_SL_U+=50;
;;;1995   
;;;1996   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1997   		{	
;;;1998   		temp_SL_U=find_U_curve(U_up_temp)*5;
;;;1999   		}
;;;2000   	//temp_SL_U=lc640_read_int(SEKTOR_KURVE_U+(temp_SL_U*2));
;;;2001   	 
;;;2002   	temp_SL_I=1022;
;;;2003   	//temp_SL_I*=NUMIST;
;;;2004   	temp_SL_I*=(signed long)I_maxp;
;;;2005   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;2006   
;;;2007   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;2008   		{
;;;2009   		temp_SL_I=find_I_curve(I_maxp)*5;
;;;2010   		}
;;;2011   
;;;2012   	for(i=0;i<NUMIST;i++) {
;;;2013   
;;;2014   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;2015   		 	bps[i]._vol_u=0;
;;;2016   			bps[i]._vol_i=0;
;;;2017   			bps[i]._flags_tu=1;
;;;2018   		} else {
;;;2019   			bps[i]._vol_u=(short)temp_SL_U + _xu_+bps[i]._xu_;
;;;2020   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;2021   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;2022   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;2023   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;2024   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;2025   			bps[i]._flags_tu=0;
;;;2026   		}
;;;2027   	}
;;;2028   
;;;2029   
;;;2030   /*	for(i=0;i<NUMIST;i++)
;;;2031   		{
;;;2032   		bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;2033   	 	bps[i]._vol_i=((short)temp_SL_I+ _x_);//NUMIST;
;;;2034   		bps[i]._flags_tu=0;
;;;2035   		}*/
;;;2036   	//bps[0]._vol_i+= _x_;
;;;2037   	plazma_vol_u_0=temp_SL_U;
;;;2038   	plazma_vol_u_1=bps[0]._vol_u;
;;;2039   	}
;;;2040   
;;;2041   else if(work_stat==wsCAP)
000e7c  2803              CMP      r0,#3
000e7e  d06e              BEQ      |L5.3934|
;;;2042   	{
;;;2043   	signed long temp_SL_U=0,temp_SL_I=0;
;;;2044   
;;;2045   
;;;2046   
;;;2047   
;;;2048   
;;;2049   
;;;2050   	if(b1Hz_sh) {
;;;2051   		if(!bOFF) {
;;;2052   	 		if(load_I<(CAP_WRK_CURR*10))_x_++;
;;;2053      			else if(load_I>(CAP_WRK_CURR*10))_x_--;
;;;2054   			gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;2055   			gran(&_x_,-50,50); 
;;;2056   
;;;2057   	 		if(load_U<(CAP_MAX_VOLT*10))_xu_++;
;;;2058      			else if(load_U>(CAP_MAX_VOLT*10))_xu_--;
;;;2059   			gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;2060   			gran(&_xu_,-50,50); 
;;;2061   		}
;;;2062   	}
;;;2063   
;;;2064   	temp_SL_U=10220L;
;;;2065   	temp_SL_U*=(signed long)CAP_MAX_VOLT;
;;;2066   	temp_SL_U/=(signed long)U_MAX;
;;;2067   
;;;2068   	temp_SL_I=10220L;
;;;2069   	//temp_SL_I*=NUMIST;
;;;2070   	temp_SL_I*=(signed long)CAP_WRK_CURR;
;;;2071   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;2072   
;;;2073   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;2074   		{
;;;2075   		temp_SL_U=find_U_curve(CAP_MAX_VOLT*10)*5;
;;;2076   		}
;;;2077   	 
;;;2078   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;2079   		{
;;;2080   		temp_SL_I=find_I_curve(CAP_WRK_CURR*10)*5;
;;;2081   		} 
;;;2082   
;;;2083   //temp_SL_U=1000;
;;;2084   
;;;2085   	for(i=0;i<NUMIST;i++)
;;;2086   		{
;;;2087   		if(bOFF) {
;;;2088   		 	bps[i]._vol_u=0;
;;;2089   			bps[i]._vol_i=0;
;;;2090   			bps[i]._flags_tu=1;
;;;2091   		} else {
;;;2092   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;2093   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;2094   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;2095   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;2096   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;2097   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;2098   			bps[i]._flags_tu=0;
;;;2099   		}
;;;2100   	}
;;;2101   
;;;2102   	}
;;;2103   else 
;;;2104   	{
;;;2105   	bps_stat=stOFF;
000e80  701d              STRB     r5,[r3,#0]
;;;2106   
;;;2107   	for(i=0;i<NUMIST;i++)
000e82  2000              MOVS     r0,#0
000e84  464b              MOV      r3,r9                 ;1476
000e86  f9b71000          LDRSH    r1,[r7,#0]            ;1524
000e8a  e3f3              B        |L5.5748|
                  |L5.3724|
000e8c  48d2              LDR      r0,|L5.4568|
000e8e  e797              B        |L5.3520|
                  |L5.3728|
000e90  48d2              LDR      r0,|L5.4572|
000e92  e795              B        |L5.3520|
                  |L5.3732|
000e94  48d2              LDR      r0,|L5.4576|
000e96  e79e              B        |L5.3542|
                  |L5.3736|
000e98  48d2              LDR      r0,|L5.4580|
000e9a  e79c              B        |L5.3542|
                  |L5.3740|
000e9c  f9900001          LDRSB    r0,[r0,#1]            ;1518  ; a_ind
000ea0  b138              CBZ      r0,|L5.3762|
000ea2  2801              CMP      r0,#1                 ;1531
000ea4  d01f              BEQ      |L5.3814|
000ea6  701d              STRB     r5,[r3,#0]            ;1562
000ea8  62e5              STR      r5,[r4,#0x2c]         ;1565  ; bps
000eaa  6325              STR      r5,[r4,#0x30]         ;1566  ; bps
000eac  f8849028          STRB     r9,[r4,#0x28]         ;1566
000eb0  e20c              B        |L5.4812|
                  |L5.3762|
000eb2  f8a68014          STRH     r8,[r6,#0x14]         ;1520
000eb6  f8a68016          STRH     r8,[r6,#0x16]         ;1521
000eba  f8839000          STRB     r9,[r3,#0]            ;1522
000ebe  4640              MOV      r0,r8                 ;1520
000ec0  2100              MOVS     r1,#0                 ;1524
000ec2  f9b72000          LDRSH    r2,[r7,#0]            ;1524
000ec6  e00b              B        |L5.3808|
                  |L5.3784|
000ec8  ebc103c1          RSB      r3,r1,r1,LSL #3       ;1526
000ecc  eb030343          ADD      r3,r3,r3,LSL #1       ;1526
000ed0  eb040383          ADD      r3,r4,r3,LSL #2       ;1526
000ed4  1c49              ADDS     r1,r1,#1              ;1524
000ed6  62d8              STR      r0,[r3,#0x2c]         ;1527
000ed8  6318              STR      r0,[r3,#0x30]         ;1528
000eda  f8835028          STRB     r5,[r3,#0x28]         ;1528
000ede  b2c9              UXTB     r1,r1                 ;1524
                  |L5.3808|
000ee0  4291              CMP      r1,r2                 ;1524
000ee2  dbf1              BLT      |L5.3784|
000ee4  e1f2              B        |L5.4812|
                  |L5.3814|
000ee6  7808              LDRB     r0,[r1,#0]            ;1533  ; phase
000ee8  b110              CBZ      r0,|L5.3824|
000eea  2801              CMP      r0,#1                 ;1546
000eec  d017              BEQ      |L5.3870|
000eee  e1ed              B        |L5.4812|
                  |L5.3824|
000ef0  82b5              STRH     r5,[r6,#0x14]         ;1535
000ef2  82f5              STRH     r5,[r6,#0x16]         ;1536
000ef4  701d              STRB     r5,[r3,#0]            ;1537
000ef6  2000              MOVS     r0,#0                 ;1539
000ef8  464b              MOV      r3,r9                 ;1476
000efa  f9b71000          LDRSH    r1,[r7,#0]            ;1524
000efe  e00b              B        |L5.3864|
                  |L5.3840|
000f00  ebc002c0          RSB      r2,r0,r0,LSL #3       ;1541
000f04  eb020242          ADD      r2,r2,r2,LSL #1       ;1541
000f08  eb040282          ADD      r2,r4,r2,LSL #2       ;1541
000f0c  1c40              ADDS     r0,r0,#1              ;1539
000f0e  62d5              STR      r5,[r2,#0x2c]         ;1542
000f10  6315              STR      r5,[r2,#0x30]         ;1543
000f12  f8823028          STRB     r3,[r2,#0x28]         ;1543
000f16  b2c0              UXTB     r0,r0                 ;1539
                  |L5.3864|
000f18  4288              CMP      r0,r1                 ;1539
000f1a  dbf1              BLT      |L5.3840|
000f1c  e1d6              B        |L5.4812|
                  |L5.3870|
000f1e  f8a68014          STRH     r8,[r6,#0x14]         ;1548
000f22  f8a68016          STRH     r8,[r6,#0x16]         ;1549
000f26  f8839000          STRB     r9,[r3,#0]            ;1550
000f2a  4640              MOV      r0,r8                 ;1548
000f2c  2100              MOVS     r1,#0                 ;1552
000f2e  f9b72000          LDRSH    r2,[r7,#0]            ;1524
000f32  e00f              B        |L5.3924|
                  |L5.3892|
000f34  e014              B        |L5.3936|
                  |L5.3894|
000f36  e157              B        |L5.4584|
                  |L5.3896|
000f38  e16d              B        |L5.4630|
                  |L5.3898|
000f3a  e19a              B        |L5.4722|
                  |L5.3900|
000f3c  ebc103c1          RSB      r3,r1,r1,LSL #3       ;1554
000f40  eb030343          ADD      r3,r3,r3,LSL #1       ;1554
000f44  eb040383          ADD      r3,r4,r3,LSL #2       ;1554
000f48  1c49              ADDS     r1,r1,#1              ;1552
000f4a  62d8              STR      r0,[r3,#0x2c]         ;1555
000f4c  6318              STR      r0,[r3,#0x30]         ;1556
000f4e  f8835028          STRB     r5,[r3,#0x28]         ;1556
000f52  b2c9              UXTB     r1,r1                 ;1552
                  |L5.3924|
000f54  4291              CMP      r1,r2                 ;1552
000f56  dbf1              BLT      |L5.3900|
000f58  e1b8              B        |L5.4812|
                  |L5.3930|
000f5a  e1b8              B        |L5.4814|
                  |L5.3932|
000f5c  e283              B        |L5.5222|
                  |L5.3934|
000f5e  e374              B        |L5.5706|
                  |L5.3936|
000f60  f9902001          LDRSB    r2,[r0,#1]            ;1571  ; a_ind
000f64  b122              CBZ      r2,|L5.3952|
000f66  2a03              CMP      r2,#3                 ;1571
000f68  d002              BEQ      |L5.3952|
000f6a  2a06              CMP      r2,#6                 ;1634
000f6c  d05b              BEQ      |L5.4134|
000f6e  e061              B        |L5.4148|
                  |L5.3952|
000f70  f8a68014          STRH     r8,[r6,#0x14]         ;1573
000f74  f8a68016          STRH     r8,[r6,#0x16]         ;1574
000f78  f1040428          ADD      r4,r4,#0x28           ;1575
000f7c  f8839000          STRB     r9,[r3,#0]            ;1575
000f80  6065              STR      r5,[r4,#4]            ;1578  ; bps
000f82  60a5              STR      r5,[r4,#8]            ;1579  ; bps
000f84  f8849000          STRB     r9,[r4,#0]            ;1579
000f88  65a5              STR      r5,[r4,#0x58]         ;1582  ; bps
000f8a  65e5              STR      r5,[r4,#0x5c]         ;1583  ; bps
000f8c  f8849054          STRB     r9,[r4,#0x54]         ;1583
000f90  f8c450ac          STR      r5,[r4,#0xac]         ;1590  ; bps
000f94  f8c450b0          STR      r5,[r4,#0xb0]         ;1591  ; bps
000f98  f88490a8          STRB     r9,[r4,#0xa8]         ;1591
000f9c  f8c45100          STR      r5,[r4,#0x100]        ;1594  ; bps
000fa0  f8c45104          STR      r5,[r4,#0x104]        ;1595  ; bps
000fa4  f88490fc          STRB     r9,[r4,#0xfc]         ;1595
000fa8  f8c45154          STR      r5,[r4,#0x154]        ;1598  ; bps
000fac  464a              MOV      r2,r9                 ;1575
000fae  f8c45158          STR      r5,[r4,#0x158]        ;1599  ; bps
000fb2  f8842150          STRB     r2,[r4,#0x150]        ;1599
000fb6  f8c451a8          STR      r5,[r4,#0x1a8]        ;1602  ; bps
000fba  f8c451ac          STR      r5,[r4,#0x1ac]        ;1603  ; bps
000fbe  f88421a4          STRB     r2,[r4,#0x1a4]        ;1603
000fc2  f8c451fc          STR      r5,[r4,#0x1fc]        ;1606  ; bps
000fc6  f8c45200          STR      r5,[r4,#0x200]        ;1607  ; bps
000fca  f88421f8          STRB     r2,[r4,#0x1f8]        ;1607
000fce  f8c45250          STR      r5,[r4,#0x250]        ;1610  ; bps
000fd2  f8c45254          STR      r5,[r4,#0x254]        ;1611  ; bps
000fd6  f884224c          STRB     r2,[r4,#0x24c]        ;1611
000fda  f8c452a4          STR      r5,[r4,#0x2a4]        ;1614  ; bps
000fde  f8c452a8          STR      r5,[r4,#0x2a8]        ;1615  ; bps
000fe2  f88422a0          STRB     r2,[r4,#0x2a0]        ;1615
000fe6  f8c452f8          STR      r5,[r4,#0x2f8]        ;1618  ; bps
000fea  f8c452fc          STR      r5,[r4,#0x2fc]        ;1619  ; bps
000fee  f88422f4          STRB     r2,[r4,#0x2f4]        ;1619
000ff2  f8c4534c          STR      r5,[r4,#0x34c]        ;1622  ; bps
000ff6  f8c45350          STR      r5,[r4,#0x350]        ;1623  ; bps
000ffa  f8842348          STRB     r2,[r4,#0x348]        ;1623
000ffe  f8c453a0          STR      r5,[r4,#0x3a0]        ;1626  ; bps
001002  f8c453a4          STR      r5,[r4,#0x3a4]        ;1627  ; bps
001006  f884239c          STRB     r2,[r4,#0x39c]        ;1627
00100a  f9900002          LDRSB    r0,[r0,#2]            ;1629  ; a_ind
00100e  f1a40428          SUB      r4,r4,#0x28           ;1627
001012  ebc000c0          RSB      r0,r0,r0,LSL #3       ;1629
001016  eb000040          ADD      r0,r0,r0,LSL #1       ;1629
00101a  eb040080          ADD      r0,r4,r0,LSL #2       ;1629
00101e  4641              MOV      r1,r8                 ;1573
001020  62c1              STR      r1,[r0,#0x2c]         ;1630
001022  6301              STR      r1,[r0,#0x30]         ;1631
001024  e0ab              B        |L5.4478|
                  |L5.4134|
001026  7809              LDRB     r1,[r1,#0]            ;1636  ; phase
001028  b111              CBZ      r1,|L5.4144|
00102a  2901              CMP      r1,#1                 ;1694
00102c  d04d              BEQ      |L5.4298|
00102e  e14d              B        |L5.4812|
                  |L5.4144|
001030  82b5              STRH     r5,[r6,#0x14]         ;1638
001032  82f5              STRH     r5,[r6,#0x16]         ;1639
                  |L5.4148|
001034  f1040428          ADD      r4,r4,#0x28           ;1761
001038  701d              STRB     r5,[r3,#0]            ;1761
00103a  6065              STR      r5,[r4,#4]            ;1764  ; bps
00103c  60a5              STR      r5,[r4,#8]            ;1765  ; bps
00103e  f8849000          STRB     r9,[r4,#0]            ;1765
001042  65a5              STR      r5,[r4,#0x58]         ;1768  ; bps
001044  65e5              STR      r5,[r4,#0x5c]         ;1769  ; bps
001046  f8849054          STRB     r9,[r4,#0x54]         ;1769
00104a  f8c450ac          STR      r5,[r4,#0xac]         ;1776  ; bps
00104e  f8c450b0          STR      r5,[r4,#0xb0]         ;1777  ; bps
001052  f88490a8          STRB     r9,[r4,#0xa8]         ;1777
001056  f8c45100          STR      r5,[r4,#0x100]        ;1780  ; bps
00105a  f8c45104          STR      r5,[r4,#0x104]        ;1781  ; bps
00105e  f88490fc          STRB     r9,[r4,#0xfc]         ;1781
001062  f8c45154          STR      r5,[r4,#0x154]        ;1784  ; bps
001066  f8c45158          STR      r5,[r4,#0x158]        ;1785  ; bps
00106a  f8849150          STRB     r9,[r4,#0x150]        ;1785
00106e  f8c451a8          STR      r5,[r4,#0x1a8]        ;1788  ; bps
001072  f8c451ac          STR      r5,[r4,#0x1ac]        ;1789  ; bps
001076  f88491a4          STRB     r9,[r4,#0x1a4]        ;1789
00107a  f8c451fc          STR      r5,[r4,#0x1fc]        ;1792  ; bps
00107e  4648              MOV      r0,r9                 ;1765
001080  f8c45200          STR      r5,[r4,#0x200]        ;1793  ; bps
001084  f88401f8          STRB     r0,[r4,#0x1f8]        ;1793
001088  f8c45250          STR      r5,[r4,#0x250]        ;1796  ; bps
00108c  f8c45254          STR      r5,[r4,#0x254]        ;1797  ; bps
001090  f884024c          STRB     r0,[r4,#0x24c]        ;1797
001094  f8c452a4          STR      r5,[r4,#0x2a4]        ;1800  ; bps
001098  f8c452a8          STR      r5,[r4,#0x2a8]        ;1801  ; bps
00109c  f88402a0          STRB     r0,[r4,#0x2a0]        ;1801
0010a0  f8c452f8          STR      r5,[r4,#0x2f8]        ;1804  ; bps
0010a4  f8c452fc          STR      r5,[r4,#0x2fc]        ;1805  ; bps
0010a8  f88402f4          STRB     r0,[r4,#0x2f4]        ;1805
0010ac  f8c4534c          STR      r5,[r4,#0x34c]        ;1808  ; bps
0010b0  f8c45350          STR      r5,[r4,#0x350]        ;1809  ; bps
0010b4  f8840348          STRB     r0,[r4,#0x348]        ;1809
0010b8  f8c453a0          STR      r5,[r4,#0x3a0]        ;1812  ; bps
0010bc  f8c453a4          STR      r5,[r4,#0x3a4]        ;1813  ; bps
0010c0  f884039c          STRB     r0,[r4,#0x39c]        ;1813
0010c4  f1a40428          SUB      r4,r4,#0x28           ;1813
0010c8  e3be              B        |L5.6216|
                  |L5.4298|
0010ca  f8a68014          STRH     r8,[r6,#0x14]         ;1696
0010ce  f8a68016          STRH     r8,[r6,#0x16]         ;1697
0010d2  f1040428          ADD      r4,r4,#0x28           ;1698
0010d6  f8839000          STRB     r9,[r3,#0]            ;1698
0010da  6065              STR      r5,[r4,#4]            ;1701  ; bps
0010dc  60a5              STR      r5,[r4,#8]            ;1702  ; bps
0010de  f8849000          STRB     r9,[r4,#0]            ;1702
0010e2  65a5              STR      r5,[r4,#0x58]         ;1705  ; bps
0010e4  65e5              STR      r5,[r4,#0x5c]         ;1706  ; bps
0010e6  f8849054          STRB     r9,[r4,#0x54]         ;1706
0010ea  f8c450ac          STR      r5,[r4,#0xac]         ;1713  ; bps
0010ee  f8c450b0          STR      r5,[r4,#0xb0]         ;1714  ; bps
0010f2  f88490a8          STRB     r9,[r4,#0xa8]         ;1714
0010f6  f8c45100          STR      r5,[r4,#0x100]        ;1717  ; bps
0010fa  f8c45104          STR      r5,[r4,#0x104]        ;1718  ; bps
0010fe  f88490fc          STRB     r9,[r4,#0xfc]         ;1718
001102  f8c45154          STR      r5,[r4,#0x154]        ;1721  ; bps
001106  4649              MOV      r1,r9                 ;1698
001108  f8c45158          STR      r5,[r4,#0x158]        ;1722  ; bps
00110c  f8841150          STRB     r1,[r4,#0x150]        ;1722
001110  f8c451a8          STR      r5,[r4,#0x1a8]        ;1725  ; bps
001114  f8c451ac          STR      r5,[r4,#0x1ac]        ;1726  ; bps
001118  f88411a4          STRB     r1,[r4,#0x1a4]        ;1726
00111c  f8c451fc          STR      r5,[r4,#0x1fc]        ;1729  ; bps
001120  f8c45200          STR      r5,[r4,#0x200]        ;1730  ; bps
001124  f88411f8          STRB     r1,[r4,#0x1f8]        ;1730
001128  f8c45250          STR      r5,[r4,#0x250]        ;1733  ; bps
00112c  f8c45254          STR      r5,[r4,#0x254]        ;1734  ; bps
001130  f884124c          STRB     r1,[r4,#0x24c]        ;1734
001134  f8c452a4          STR      r5,[r4,#0x2a4]        ;1737  ; bps
001138  f8c452a8          STR      r5,[r4,#0x2a8]        ;1738  ; bps
00113c  f88412a0          STRB     r1,[r4,#0x2a0]        ;1738
001140  f8c452f8          STR      r5,[r4,#0x2f8]        ;1741  ; bps
001144  f8c452fc          STR      r5,[r4,#0x2fc]        ;1742  ; bps
001148  f88412f4          STRB     r1,[r4,#0x2f4]        ;1742
00114c  f8c4534c          STR      r5,[r4,#0x34c]        ;1745  ; bps
001150  f8c45350          STR      r5,[r4,#0x350]        ;1746  ; bps
001154  f8841348          STRB     r1,[r4,#0x348]        ;1746
001158  f8c453a0          STR      r5,[r4,#0x3a0]        ;1749  ; bps
00115c  f8c453a4          STR      r5,[r4,#0x3a4]        ;1750  ; bps
001160  f884139c          STRB     r1,[r4,#0x39c]        ;1750
001164  f9900002          LDRSB    r0,[r0,#2]            ;1754  ; a_ind
001168  f1a40428          SUB      r4,r4,#0x28           ;1750
00116c  ebc000c0          RSB      r0,r0,r0,LSL #3       ;1754
001170  eb000040          ADD      r0,r0,r0,LSL #1       ;1754
001174  eb040080          ADD      r0,r4,r0,LSL #2       ;1754
001178  4642              MOV      r2,r8                 ;1696
00117a  62c2              STR      r2,[r0,#0x2c]         ;1755
00117c  6302              STR      r2,[r0,#0x30]         ;1755
                  |L5.4478|
00117e  f8805028          STRB     r5,[r0,#0x28]         ;1631
001182  e361              B        |L5.6216|
                  |L5.4484|
                          DCD      AVT_REV_I_NOM_REW
                  |L5.4488|
                          DCD      U_up_temp
                  |L5.4492|
                          DCD      AVT_REV_U_NOM_REW
                  |L5.4496|
                          DCD      fiks_stat_I
                  |L5.4500|
                          DCD      I_ug
                  |L5.4504|
                          DCD      I_ug_temp
                  |L5.4508|
                          DCD      fiks_stat_U
                  |L5.4512|
                          DCD      U_up
                  |L5.4516|
                          DCD      I_MAX_IPS
                  |L5.4520|
                          DCD      U_MAX
                  |L5.4524|
                          DCD      ||area_number.25||
                  |L5.4528|
                          DCD      a_ind
                  |L5.4532|
                          DCD      bps_stat
                  |L5.4536|
                          DCD      phase
                  |L5.4540|
                          DCD      bps
                  |L5.4544|
                          DCD      NUMIST
                  |L5.4548|
                          DCD      tst_pwm_u
                  |L5.4552|
                          DCD      tst_pwm_i
                  |L5.4556|
                          DCD      viz_stat
                  |L5.4560|
                          DCD      _xu_
                  |L5.4564|
                          DCD      _x_
                  |L5.4568|
                          DCD      I_ug3
                  |L5.4572|
                          DCD      I_ug2
                  |L5.4576|
                          DCD      U_up3
                  |L5.4580|
                          DCD      U_up2
                  |L5.4584|
0011e8  f9b1c000          LDRSH    r12,[r1,#0]           ;1825
0011ec  2000              MOVS     r0,#0                 ;1822
0011ee  f9b22000          LDRSH    r2,[r2,#0]            ;1824
0011f2  f9b71000          LDRSH    r1,[r7,#0]            ;1524
0011f6  e00b              B        |L5.4624|
                  |L5.4600|
0011f8  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1824
0011fc  eb030343          ADD      r3,r3,r3,LSL #1       ;1824
001200  eb040383          ADD      r3,r4,r3,LSL #2       ;1824
001204  1c40              ADDS     r0,r0,#1              ;1822
001206  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1824
00120a  f8835028          STRB     r5,[r3,#0x28]         ;1826
00120e  b2c0              UXTB     r0,r0                 ;1822
                  |L5.4624|
001210  4288              CMP      r0,r1                 ;1822
001212  dbf1              BLT      |L5.4600|
001214  e318              B        |L5.6216|
                  |L5.4630|
001216  7800              LDRB     r0,[r0,#0]            ;1834  ; viz_stat
001218  2801              CMP      r0,#1                 ;1834
00121a  f04f0000          MOV      r0,#0                 ;1845
00121e  d012              BEQ      |L5.4678|
001220  4641              MOV      r1,r8                 ;1520
001222  f9b72000          LDRSH    r2,[r7,#0]            ;1524
001226  e00b              B        |L5.4672|
                  |L5.4648|
001228  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1838
00122c  eb030343          ADD      r3,r3,r3,LSL #1       ;1838
001230  eb040383          ADD      r3,r4,r3,LSL #2       ;1838
001234  1c40              ADDS     r0,r0,#1              ;1836
001236  62d9              STR      r1,[r3,#0x2c]         ;1839
001238  6319              STR      r1,[r3,#0x30]         ;1840
00123a  f8835028          STRB     r5,[r3,#0x28]         ;1840
00123e  b2c0              UXTB     r0,r0                 ;1836
                  |L5.4672|
001240  4290              CMP      r0,r2                 ;1836
001242  dbf1              BLT      |L5.4648|
001244  e300              B        |L5.6216|
                  |L5.4678|
001246  f9b1c000          LDRSH    r12,[r1,#0]           ;1825
00124a  f9b22000          LDRSH    r2,[r2,#0]            ;1824
00124e  f9b71000          LDRSH    r1,[r7,#0]            ;1524
001252  e00b              B        |L5.4716|
                  |L5.4692|
001254  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1847
001258  eb030343          ADD      r3,r3,r3,LSL #1       ;1847
00125c  eb040383          ADD      r3,r4,r3,LSL #2       ;1847
001260  1c40              ADDS     r0,r0,#1              ;1845
001262  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1847
001266  f8835028          STRB     r5,[r3,#0x28]         ;1849
00126a  b2c0              UXTB     r0,r0                 ;1845
                  |L5.4716|
00126c  4288              CMP      r0,r1                 ;1845
00126e  dbf1              BLT      |L5.4692|
001270  e2ea              B        |L5.6216|
                  |L5.4722|
001272  7800              LDRB     r0,[r0,#0]            ;1858  ; viz_stat
001274  2801              CMP      r0,#1                 ;1858
001276  f04f0000          MOV      r0,#0                 ;1869
00127a  d012              BEQ      |L5.4770|
00127c  4641              MOV      r1,r8                 ;1520
00127e  f9b72000          LDRSH    r2,[r7,#0]            ;1524
001282  e00b              B        |L5.4764|
                  |L5.4740|
001284  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1862
001288  eb030343          ADD      r3,r3,r3,LSL #1       ;1862
00128c  eb040383          ADD      r3,r4,r3,LSL #2       ;1862
001290  1c40              ADDS     r0,r0,#1              ;1860
001292  62d9              STR      r1,[r3,#0x2c]         ;1863
001294  6319              STR      r1,[r3,#0x30]         ;1864
001296  f8835028          STRB     r5,[r3,#0x28]         ;1864
00129a  b2c0              UXTB     r0,r0                 ;1860
                  |L5.4764|
00129c  4290              CMP      r0,r2                 ;1860
00129e  dbf1              BLT      |L5.4740|
0012a0  e2d2              B        |L5.6216|
                  |L5.4770|
0012a2  f9b1c000          LDRSH    r12,[r1,#0]           ;1825
0012a6  f9b22000          LDRSH    r2,[r2,#0]            ;1824
0012aa  f9b71000          LDRSH    r1,[r7,#0]            ;1524
0012ae  e00b              B        |L5.4808|
                  |L5.4784|
0012b0  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1871
0012b4  eb030343          ADD      r3,r3,r3,LSL #1       ;1871
0012b8  eb040383          ADD      r3,r4,r3,LSL #2       ;1871
0012bc  1c40              ADDS     r0,r0,#1              ;1869
0012be  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1871
0012c2  f8835028          STRB     r5,[r3,#0x28]         ;1873
0012c6  b2c0              UXTB     r0,r0                 ;1869
                  |L5.4808|
0012c8  4288              CMP      r0,r1                 ;1869
0012ca  dbf1              BLT      |L5.4784|
                  |L5.4812|
0012cc  e2bc              B        |L5.6216|
                  |L5.4814|
0012ce  48fb              LDR      r0,|L5.5820|
0012d0  f9b01000          LDRSH    r1,[r0,#0]            ;1882  ; CURR_FADE_IN
0012d4  b151              CBZ      r1,|L5.4844|
0012d6  48fa              LDR      r0,|L5.5824|
0012d8  6803              LDR      r3,[r0,#0]            ;1882  ; time_proc
0012da  428b              CMP      r3,r1                 ;1882
0012dc  da06              BGE      |L5.4844|
0012de  4af9              LDR      r2,|L5.5828|
0012e0  f9b20000          LDRSH    r0,[r2,#0]            ;1886  ; I_ug_temp
0012e4  4358              MULS     r0,r3,r0              ;1887
0012e6  fb90f0f1          SDIV     r0,r0,r1              ;1888
0012ea  8010              STRH     r0,[r2,#0]            ;1892
                  |L5.4844|
0012ec  79b0              LDRB     r0,[r6,#6]            ;1895  ; b1Hz_sh
0012ee  b398              CBZ      r0,|L5.4952|
0012f0  48f5              LDR      r0,|L5.5832|
0012f2  8800              LDRH     r0,[r0,#0]            ;1900  ; REV_IS_ON
0012f4  b140              CBZ      r0,|L5.4872|
0012f6  48f5              LDR      r0,|L5.5836|
0012f8  8800              LDRH     r0,[r0,#0]            ;1900  ; AVT_REV_IS_ON
0012fa  b128              CBZ      r0,|L5.4872|
0012fc  48f4              LDR      r0,|L5.5840|
0012fe  7800              LDRB     r0,[r0,#0]            ;1900  ; proc_phase
001300  2801              CMP      r0,#1                 ;1900
001302  d036              BEQ      |L5.4978|
001304  2803              CMP      r0,#3                 ;1900
001306  d034              BEQ      |L5.4978|
                  |L5.4872|
001308  48f2              LDR      r0,|L5.5844|
00130a  f9b01000          LDRSH    r1,[r0,#0]            ;1901  ; load_I
00130e  48ed              LDR      r0,|L5.5828|
001310  f9b00000          LDRSH    r0,[r0,#0]            ;1901  ; I_ug_temp
001314  4281              CMP      r1,r0                 ;1901
001316  da06              BGE      |L5.4902|
001318  f8bb1000          LDRH     r1,[r11,#0]           ;1901  ; _x_
00131c  f1010101          ADD      r1,r1,#1              ;1901
001320  f8ab1000          STRH     r1,[r11,#0]           ;1901
001324  e006              B        |L5.4916|
                  |L5.4902|
001326  dd05              BLE      |L5.4916|
001328  f8bb0000          LDRH     r0,[r11,#0]           ;1902  ; _x_
00132c  f1a00001          SUB      r0,r0,#1              ;1902
001330  f8ab0000          STRH     r0,[r11,#0]           ;1902
                  |L5.4916|
001334  2232              MOVS     r2,#0x32              ;1904
001336  4251              RSBS     r1,r2,#0              ;1904
001338  48e7              LDR      r0,|L5.5848|
00133a  f7fffffe          BL       gran
00133e  48e7              LDR      r0,|L5.5852|
001340  f9b01000          LDRSH    r1,[r0,#0]            ;1906  ; load_U
001344  48e6              LDR      r0,|L5.5856|
001346  f9b00000          LDRSH    r0,[r0,#0]            ;1906  ; U_maxg
00134a  4281              CMP      r1,r0                 ;1906
00134c  da05              BGE      |L5.4954|
00134e  f8ba1000          LDRH     r1,[r10,#0]           ;1906  ; _xu_
001352  f1010101          ADD      r1,r1,#1              ;1906
001356  e005              B        |L5.4964|
                  |L5.4952|
001358  e00b              B        |L5.4978|
                  |L5.4954|
00135a  dd05              BLE      |L5.4968|
00135c  f8ba1000          LDRH     r1,[r10,#0]           ;1907  ; _xu_
001360  f1a10101          SUB      r1,r1,#1              ;1907
                  |L5.4964|
001364  f8aa1000          STRH     r1,[r10,#0]           ;1907
                  |L5.4968|
001368  2232              MOVS     r2,#0x32              ;1909
00136a  4251              RSBS     r1,r2,#0              ;1909
00136c  48dd              LDR      r0,|L5.5860|
00136e  f7fffffe          BL       gran
                  |L5.4978|
001372  48db              LDR      r0,|L5.5856|
001374  49dc              LDR      r1,|L5.5864|
001376  f9b00000          LDRSH    r0,[r0,#0]            ;1914  ; U_maxg
00137a  f9b11000          LDRSH    r1,[r1,#0]            ;1915  ; U_MAX
00137e  ebc02040          RSB      r0,r0,r0,LSL #9       ;1914
001382  0040              LSLS     r0,r0,#1              ;1914
001384  fb90f0f1          SDIV     r0,r0,r1              ;1915
001388  9000              STR      r0,[sp,#0]            ;1919
00138a  48ce              LDR      r0,|L5.5828|
00138c  49d7              LDR      r1,|L5.5868|
00138e  f9b00000          LDRSH    r0,[r0,#0]            ;1919  ; I_ug_temp
001392  f9b11000          LDRSH    r1,[r1,#0]            ;1920  ; I_MAX_IPS
001396  ebc02040          RSB      r0,r0,r0,LSL #9       ;1919
00139a  0040              LSLS     r0,r0,#1              ;1919
00139c  fb90f0f1          SDIV     r0,r0,r1              ;1920
0013a0  4680              MOV      r8,r0                 ;1920
0013a2  20ac              MOVS     r0,#0xac              ;1922
0013a4  f7fffffe          BL       lc640_read_int
0013a8  f5a0412b          SUB      r1,r0,#0xab00         ;1922
0013ac  39cd              SUBS     r1,r1,#0xcd           ;1922
0013ae  d107              BNE      |L5.5056|
0013b0  48cb              LDR      r0,|L5.5856|
0013b2  f9b00000          LDRSH    r0,[r0,#0]            ;1924  ; U_maxg
0013b6  f7fffffe          BL       find_U_curve
0013ba  eb000080          ADD      r0,r0,r0,LSL #2       ;1924
0013be  9000              STR      r0,[sp,#0]            ;1924
                  |L5.5056|
0013c0  20ae              MOVS     r0,#0xae              ;1927
0013c2  f7fffffe          BL       lc640_read_int
0013c6  f5a0412b          SUB      r1,r0,#0xab00         ;1927
0013ca  39cd              SUBS     r1,r1,#0xcd           ;1927
0013cc  d107              BNE      |L5.5086|
0013ce  48bd              LDR      r0,|L5.5828|
0013d0  f9b00000          LDRSH    r0,[r0,#0]            ;1929  ; I_ug_temp
0013d4  f7fffffe          BL       find_I_curve
0013d8  eb000080          ADD      r0,r0,r0,LSL #2       ;1929
0013dc  4680              MOV      r8,r0                 ;1929
                  |L5.5086|
0013de  2000              MOVS     r0,#0                 ;1932
0013e0  f9b7c000          LDRSH    r12,[r7,#0]           ;1524
0013e4  e03c              B        |L5.5216|
                  |L5.5094|
0013e6  49b8              LDR      r1,|L5.5832|
0013e8  8809              LDRH     r1,[r1,#0]            ;1934  ; REV_IS_ON
0013ea  b141              CBZ      r1,|L5.5118|
0013ec  49b7              LDR      r1,|L5.5836|
0013ee  8809              LDRH     r1,[r1,#0]            ;1934  ; AVT_REV_IS_ON
0013f0  b129              CBZ      r1,|L5.5118|
0013f2  49b7              LDR      r1,|L5.5840|
0013f4  7809              LDRB     r1,[r1,#0]            ;1934  ; proc_phase
0013f6  2901              CMP      r1,#1                 ;1934
0013f8  d010              BEQ      |L5.5148|
0013fa  2903              CMP      r1,#3                 ;1934
0013fc  d00e              BEQ      |L5.5148|
                  |L5.5118|
0013fe  9900              LDR      r1,[sp,#0]            ;1939
001400  b20a              SXTH     r2,r1                 ;1939
001402  f9ba1000          LDRSH    r1,[r10,#0]           ;1939  ; _xu_
001406  1852              ADDS     r2,r2,r1              ;1939
001408  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1939
00140c  eb010141          ADD      r1,r1,r1,LSL #1       ;1939
001410  eb040181          ADD      r1,r4,r1,LSL #2       ;1939
001414  62ca              STR      r2,[r1,#0x2c]         ;1940
001416  d50c              BPL      |L5.5170|
001418  62cd              STR      r5,[r1,#0x2c]         ;1940
00141a  e00f              B        |L5.5180|
                  |L5.5148|
00141c  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1935
001420  eb010141          ADD      r1,r1,r1,LSL #1       ;1935
001424  eb040181          ADD      r1,r4,r1,LSL #2       ;1935
001428  62cd              STR      r5,[r1,#0x2c]         ;1936
00142a  630d              STR      r5,[r1,#0x30]         ;1937
00142c  f8819028          STRB     r9,[r1,#0x28]         ;1937
001430  e014              B        |L5.5212|
                  |L5.5170|
001432  f24033fe          MOV      r3,#0x3fe             ;1941
001436  429a              CMP      r2,r3                 ;1941
001438  dd00              BLE      |L5.5180|
00143a  62cb              STR      r3,[r1,#0x2c]         ;1941
                  |L5.5180|
00143c  f9bb2000          LDRSH    r2,[r11,#0]           ;1942  ; _x_
001440  fa0ff388          SXTH     r3,r8                 ;1942
001444  189a              ADDS     r2,r3,r2              ;1942
001446  630a              STR      r2,[r1,#0x30]         ;1943
001448  d501              BPL      |L5.5198|
00144a  630d              STR      r5,[r1,#0x30]         ;1943
00144c  e004              B        |L5.5208|
                  |L5.5198|
00144e  f24033fe          MOV      r3,#0x3fe             ;1944
001452  429a              CMP      r2,r3                 ;1944
001454  dd00              BLE      |L5.5208|
001456  630b              STR      r3,[r1,#0x30]         ;1944
                  |L5.5208|
001458  f8815028          STRB     r5,[r1,#0x28]         ;1945
                  |L5.5212|
00145c  1c40              ADDS     r0,r0,#1              ;1932
00145e  b2c0              UXTB     r0,r0                 ;1932
                  |L5.5216|
001460  4560              CMP      r0,r12                ;1932
001462  dbc0              BLT      |L5.5094|
001464  e1f0              B        |L5.6216|
                  |L5.5222|
001466  4ba2              LDR      r3,|L5.5872|
001468  f9b30000          LDRSH    r0,[r3,#0]            ;1956  ; load_U_
00146c  2805              CMP      r0,#5                 ;1956
00146e  dd02              BLE      |L5.5238|
001470  f8869009          STRB     r9,[r6,#9]            ;1956
001474  e000              B        |L5.5240|
                  |L5.5238|
001476  7275              STRB     r5,[r6,#9]            ;1957
                  |L5.5240|
001478  f8dfc278          LDR      r12,|L5.5876|
00147c  2264              MOVS     r2,#0x64              ;1959
00147e  f9bc1000          LDRSH    r1,[r12,#0]           ;1959  ; U_up_temp
001482  fb91f2f2          SDIV     r2,r1,r2              ;1959
001486  9200              STR      r2,[sp,#0]            ;1960
001488  2a00              CMP      r2,#0                 ;1960
00148a  dc01              BGT      |L5.5264|
00148c  2201              MOVS     r2,#1                 ;1960
00148e  9200              STR      r2,[sp,#0]            ;1960
                  |L5.5264|
001490  1a40              SUBS     r0,r0,r1              ;1961
001492  b200              SXTH     r0,r0                 ;1961
001494  f7fffffe          BL       abs
001498  9900              LDR      r1,[sp,#0]            ;1961
00149a  b209              SXTH     r1,r1                 ;1961
00149c  4288              CMP      r0,r1                 ;1961
00149e  da02              BGE      |L5.5286|
0014a0  f886900a          STRB     r9,[r6,#0xa]          ;1961
0014a4  e000              B        |L5.5288|
                  |L5.5286|
0014a6  72b5              STRB     r5,[r6,#0xa]          ;1962
                  |L5.5288|
0014a8  7235              STRB     r5,[r6,#8]            ;1966
0014aa  7ab0              LDRB     r0,[r6,#0xa]          ;1968  ; bU_VALID_VALID
0014ac  b178              CBZ      r0,|L5.5326|
0014ae  7af0              LDRB     r0,[r6,#0xb]          ;1970  ; bPRECESSION_REG
0014b0  b3b0              CBZ      r0,|L5.5408|
0014b2  488f              LDR      r0,|L5.5872|
0014b4  72f5              STRB     r5,[r6,#0xb]          ;1972
0014b6  f9b01000          LDRSH    r1,[r0,#0]            ;1973  ; load_U_
0014ba  488e              LDR      r0,|L5.5876|
0014bc  f9b00000          LDRSH    r0,[r0,#0]            ;1973  ; U_up_temp
0014c0  4281              CMP      r1,r0                 ;1973
0014c2  db29              BLT      |L5.5400|
0014c4  dc2e              BGT      |L5.5412|
0014c6  e031              B        |L5.5420|
                  |L5.5320|
0014c8  f8aa1000          STRH     r1,[r10,#0]           ;1974
0014cc  e02e              B        |L5.5420|
                  |L5.5326|
0014ce  79b0              LDRB     r0,[r6,#6]            ;1978  ; b1Hz_sh
0014d0  b330              CBZ      r0,|L5.5408|
0014d2  7a70              LDRB     r0,[r6,#9]            ;1978  ; bU_VALID
0014d4  b320              CBZ      r0,|L5.5408|
0014d6  487f              LDR      r0,|L5.5844|
0014d8  f9b01000          LDRSH    r1,[r0,#0]            ;1980  ; load_I
0014dc  4886              LDR      r0,|L5.5880|
0014de  f9b00000          LDRSH    r0,[r0,#0]            ;1980  ; I_maxp
0014e2  4281              CMP      r1,r0                 ;1980
0014e4  da04              BGE      |L5.5360|
0014e6  f8bb1000          LDRH     r1,[r11,#0]           ;1980  ; _x_
0014ea  f1010101          ADD      r1,r1,#1              ;1980
0014ee  e004              B        |L5.5370|
                  |L5.5360|
0014f0  dd05              BLE      |L5.5374|
0014f2  f8bb1000          LDRH     r1,[r11,#0]           ;1981  ; _x_
0014f6  f1a10101          SUB      r1,r1,#1              ;1981
                  |L5.5370|
0014fa  f8ab1000          STRH     r1,[r11,#0]           ;1981
                  |L5.5374|
0014fe  2232              MOVS     r2,#0x32              ;1982
001500  4251              RSBS     r1,r2,#0              ;1982
001502  4875              LDR      r0,|L5.5848|
001504  f7fffffe          BL       gran
001508  4879              LDR      r0,|L5.5872|
00150a  f9b01000          LDRSH    r1,[r0,#0]            ;1984  ; load_U_
00150e  4879              LDR      r0,|L5.5876|
001510  f9b00000          LDRSH    r0,[r0,#0]            ;1984  ; U_up_temp
001514  4281              CMP      r1,r0                 ;1984
001516  da04              BGE      |L5.5410|
                  |L5.5400|
001518  f8ba1000          LDRH     r1,[r10,#0]           ;1984  ; _xu_
00151c  1c49              ADDS     r1,r1,#1              ;1984
00151e  e7d3              B        |L5.5320|
                  |L5.5408|
001520  e009              B        |L5.5430|
                  |L5.5410|
001522  dd03              BLE      |L5.5420|
                  |L5.5412|
001524  f8ba1000          LDRH     r1,[r10,#0]           ;1985  ; _xu_
001528  1e49              SUBS     r1,r1,#1              ;1985
00152a  e7cd              B        |L5.5320|
                  |L5.5420|
00152c  2232              MOVS     r2,#0x32              ;1986
00152e  4251              RSBS     r1,r2,#0              ;1986
001530  486c              LDR      r0,|L5.5860|
001532  f7fffffe          BL       gran
                  |L5.5430|
001536  486f              LDR      r0,|L5.5876|
001538  f44f7161          MOV      r1,#0x384             ;1992
00153c  f9b00000          LDRSH    r0,[r0,#0]            ;1992  ; U_up_temp
001540  4348              MULS     r0,r1,r0              ;1992
001542  4969              LDR      r1,|L5.5864|
001544  f9b11000          LDRSH    r1,[r1,#0]            ;1993  ; U_MAX
001548  fb90f0f1          SDIV     r0,r0,r1              ;1993
00154c  3032              ADDS     r0,r0,#0x32           ;1994
00154e  9000              STR      r0,[sp,#0]            ;1996
001550  20ac              MOVS     r0,#0xac              ;1996
001552  f7fffffe          BL       lc640_read_int
001556  f5a0412b          SUB      r1,r0,#0xab00         ;1996
00155a  39cd              SUBS     r1,r1,#0xcd           ;1996
00155c  d107              BNE      |L5.5486|
00155e  4865              LDR      r0,|L5.5876|
001560  f9b00000          LDRSH    r0,[r0,#0]            ;1998  ; U_up_temp
001564  f7fffffe          BL       find_U_curve
001568  eb000080          ADD      r0,r0,r0,LSL #2       ;1998
00156c  9000              STR      r0,[sp,#0]            ;1998
                  |L5.5486|
00156e  f8df8188          LDR      r8,|L5.5880|
001572  495e              LDR      r1,|L5.5868|
001574  f9b80000          LDRSH    r0,[r8,#0]            ;2004  ; I_maxp
001578  f9b11000          LDRSH    r1,[r1,#0]            ;2005  ; I_MAX_IPS
00157c  ebc02040          RSB      r0,r0,r0,LSL #9       ;2004
001580  0040              LSLS     r0,r0,#1              ;2004
001582  fb90f0f1          SDIV     r0,r0,r1              ;2005
001586  9001              STR      r0,[sp,#4]            ;2007
001588  20ae              MOVS     r0,#0xae              ;2007
00158a  f7fffffe          BL       lc640_read_int
00158e  f5a0412b          SUB      r1,r0,#0xab00         ;2007
001592  39cd              SUBS     r1,r1,#0xcd           ;2007
001594  d106              BNE      |L5.5540|
001596  f9b80000          LDRSH    r0,[r8,#0]            ;2009  ; I_maxp
00159a  f7fffffe          BL       find_I_curve
00159e  eb000080          ADD      r0,r0,r0,LSL #2       ;2009
0015a2  9001              STR      r0,[sp,#4]            ;2009
                  |L5.5540|
0015a4  2000              MOVS     r0,#0                 ;2012
0015a6  f9b78000          LDRSH    r8,[r7,#0]            ;1524
0015aa  e045              B        |L5.5688|
                  |L5.5548|
0015ac  4946              LDR      r1,|L5.5832|
0015ae  8809              LDRH     r1,[r1,#0]            ;2014  ; REV_IS_ON
0015b0  b141              CBZ      r1,|L5.5572|
0015b2  4946              LDR      r1,|L5.5836|
0015b4  8809              LDRH     r1,[r1,#0]            ;2014  ; AVT_REV_IS_ON
0015b6  b129              CBZ      r1,|L5.5572|
0015b8  4945              LDR      r1,|L5.5840|
0015ba  7809              LDRB     r1,[r1,#0]            ;2014  ; proc_phase
0015bc  2901              CMP      r1,#1                 ;2014
0015be  d015              BEQ      |L5.5612|
0015c0  2903              CMP      r1,#3                 ;2014
0015c2  d013              BEQ      |L5.5612|
                  |L5.5572|
0015c4  ebc001c0          RSB      r1,r0,r0,LSL #3       ;2019
0015c8  eb010141          ADD      r1,r1,r1,LSL #1       ;2019
0015cc  eb040c81          ADD      r12,r4,r1,LSL #2      ;2019
0015d0  9900              LDR      r1,[sp,#0]            ;2019
0015d2  f9bc2050          LDRSH    r2,[r12,#0x50]        ;2019
0015d6  b20b              SXTH     r3,r1                 ;2019
0015d8  f9ba1000          LDRSH    r1,[r10,#0]           ;2019  ; _xu_
0015dc  4419              ADD      r1,r1,r3              ;2019
0015de  1851              ADDS     r1,r2,r1              ;2019
0015e0  f8cc102c          STR      r1,[r12,#0x2c]        ;2020
0015e4  d50d              BPL      |L5.5634|
0015e6  f8cc502c          STR      r5,[r12,#0x2c]        ;2020
0015ea  e010              B        |L5.5646|
                  |L5.5612|
0015ec  ebc001c0          RSB      r1,r0,r0,LSL #3       ;2015
0015f0  eb010141          ADD      r1,r1,r1,LSL #1       ;2015
0015f4  eb040181          ADD      r1,r4,r1,LSL #2       ;2015
0015f8  62cd              STR      r5,[r1,#0x2c]         ;2016
0015fa  630d              STR      r5,[r1,#0x30]         ;2017
0015fc  f8819028          STRB     r9,[r1,#0x28]         ;2017
001600  e018              B        |L5.5684|
                  |L5.5634|
001602  f24032fe          MOV      r2,#0x3fe             ;2021
001606  4291              CMP      r1,r2                 ;2021
001608  dd01              BLE      |L5.5646|
00160a  f8cc202c          STR      r2,[r12,#0x2c]        ;2021
                  |L5.5646|
00160e  9901              LDR      r1,[sp,#4]            ;2022
001610  b20a              SXTH     r2,r1                 ;2022
001612  f9bb1000          LDRSH    r1,[r11,#0]           ;2022  ; _x_
001616  1851              ADDS     r1,r2,r1              ;2022
001618  f8cc1030          STR      r1,[r12,#0x30]        ;2023
00161c  d502              BPL      |L5.5668|
00161e  f8cc5030          STR      r5,[r12,#0x30]        ;2023
001622  e005              B        |L5.5680|
                  |L5.5668|
001624  f24032fe          MOV      r2,#0x3fe             ;2024
001628  4291              CMP      r1,r2                 ;2024
00162a  dd01              BLE      |L5.5680|
00162c  f8cc2030          STR      r2,[r12,#0x30]        ;2024
                  |L5.5680|
001630  f88c5028          STRB     r5,[r12,#0x28]        ;2025
                  |L5.5684|
001634  1c40              ADDS     r0,r0,#1              ;2012
001636  b2c0              UXTB     r0,r0                 ;2012
                  |L5.5688|
001638  4540              CMP      r0,r8                 ;2012
00163a  dbb7              BLT      |L5.5548|
00163c  492f              LDR      r1,|L5.5884|
00163e  9800              LDR      r0,[sp,#0]            ;2037
001640  8008              STRH     r0,[r1,#0]            ;2037
001642  492f              LDR      r1,|L5.5888|
001644  6ae0              LDR      r0,[r4,#0x2c]         ;2038  ; bps
001646  8008              STRH     r0,[r1,#0]            ;2038
001648  e0fe              B        |L5.6216|
                  |L5.5706|
00164a  79b0              LDRB     r0,[r6,#6]            ;2050  ; b1Hz_sh
00164c  b3a0              CBZ      r0,|L5.5816|
00164e  482d              LDR      r0,|L5.5892|
001650  7800              LDRB     r0,[r0,#0]            ;2051  ; bOFF
001652  bb88              CBNZ     r0,|L5.5816|
001654  482c              LDR      r0,|L5.5896|
001656  f9b00000          LDRSH    r0,[r0,#0]            ;2052  ; CAP_WRK_CURR
00165a  eb000180          ADD      r1,r0,r0,LSL #2       ;2052
00165e  481d              LDR      r0,|L5.5844|
001660  f9b00000          LDRSH    r0,[r0,#0]            ;2052  ; load_I
001664  ebb00f41          CMP      r0,r1,LSL #1          ;2052
001668  da05              BGE      |L5.5750|
00166a  f8bb1000          LDRH     r1,[r11,#0]           ;2052  ; _x_
00166e  f1010101          ADD      r1,r1,#1              ;2052
001672  e005              B        |L5.5760|
                  |L5.5748|
001674  e0e2              B        |L5.6204|
                  |L5.5750|
001676  dd05              BLE      |L5.5764|
001678  f8bb1000          LDRH     r1,[r11,#0]           ;2053  ; _x_
00167c  f1a10101          SUB      r1,r1,#1              ;2053
                  |L5.5760|
001680  f8ab1000          STRH     r1,[r11,#0]           ;2053
                  |L5.5764|
001684  4642              MOV      r2,r8                 ;2054
001686  4629              MOV      r1,r5                 ;2054
001688  4813              LDR      r0,|L5.5848|
00168a  f7fffffe          BL       gran
00168e  2232              MOVS     r2,#0x32              ;2055
001690  4251              RSBS     r1,r2,#0              ;2055
001692  4811              LDR      r0,|L5.5848|
001694  f7fffffe          BL       gran
001698  481c              LDR      r0,|L5.5900|
00169a  f9b00000          LDRSH    r0,[r0,#0]            ;2057  ; CAP_MAX_VOLT
00169e  eb000180          ADD      r1,r0,r0,LSL #2       ;2057
0016a2  480e              LDR      r0,|L5.5852|
0016a4  f9b00000          LDRSH    r0,[r0,#0]            ;2057  ; load_U
0016a8  ebb00f41          CMP      r0,r1,LSL #1          ;2057
0016ac  da30              BGE      |L5.5904|
0016ae  f8ba1000          LDRH     r1,[r10,#0]           ;2057  ; _xu_
0016b2  f1010101          ADD      r1,r1,#1              ;2057
0016b6  e030              B        |L5.5914|
                  |L5.5816|
0016b8  e03b              B        |L5.5938|
0016ba  0000              DCW      0x0000
                  |L5.5820|
                          DCD      CURR_FADE_IN
                  |L5.5824|
                          DCD      time_proc
                  |L5.5828|
                          DCD      I_ug_temp
                  |L5.5832|
                          DCD      REV_IS_ON
                  |L5.5836|
                          DCD      AVT_REV_IS_ON
                  |L5.5840|
                          DCD      proc_phase
                  |L5.5844|
                          DCD      load_I
                  |L5.5848|
                          DCD      _x_
                  |L5.5852|
                          DCD      load_U
                  |L5.5856|
                          DCD      U_maxg
                  |L5.5860|
                          DCD      _xu_
                  |L5.5864|
                          DCD      U_MAX
                  |L5.5868|
                          DCD      I_MAX_IPS
                  |L5.5872|
                          DCD      load_U_
                  |L5.5876|
                          DCD      U_up_temp
                  |L5.5880|
                          DCD      I_maxp
                  |L5.5884|
                          DCD      plazma_vol_u_0
                  |L5.5888|
                          DCD      plazma_vol_u_1
                  |L5.5892|
                          DCD      bOFF
                  |L5.5896|
                          DCD      CAP_WRK_CURR
                  |L5.5900|
                          DCD      CAP_MAX_VOLT
                  |L5.5904|
001710  dd05              BLE      |L5.5918|
001712  f8ba1000          LDRH     r1,[r10,#0]           ;2058  ; _xu_
001716  f1a10101          SUB      r1,r1,#1              ;2058
                  |L5.5914|
00171a  f8aa1000          STRH     r1,[r10,#0]           ;2058
                  |L5.5918|
00171e  4642              MOV      r2,r8                 ;2059
001720  4629              MOV      r1,r5                 ;2059
001722  48fe              LDR      r0,|L5.6940|
001724  f7fffffe          BL       gran
001728  2232              MOVS     r2,#0x32              ;2060
00172a  4251              RSBS     r1,r2,#0              ;2060
00172c  48fc              LDR      r0,|L5.6944|
00172e  f7fffffe          BL       gran
                  |L5.5938|
001732  48fc              LDR      r0,|L5.6948|
001734  f24271ec          MOV      r1,#0x27ec            ;2065
001738  f9b00000          LDRSH    r0,[r0,#0]            ;2065  ; CAP_MAX_VOLT
00173c  4348              MULS     r0,r1,r0              ;2065
00173e  49fa              LDR      r1,|L5.6952|
001740  f9b11000          LDRSH    r1,[r1,#0]            ;2066  ; U_MAX
001744  fb90f0f1          SDIV     r0,r0,r1              ;2066
001748  9000              STR      r0,[sp,#0]            ;2070
00174a  48f8              LDR      r0,|L5.6956|
00174c  f24271ec          MOV      r1,#0x27ec            ;2070
001750  f9b00000          LDRSH    r0,[r0,#0]            ;2070  ; CAP_WRK_CURR
001754  4348              MULS     r0,r1,r0              ;2070
001756  49f6              LDR      r1,|L5.6960|
001758  f9b11000          LDRSH    r1,[r1,#0]            ;2071  ; I_MAX_IPS
00175c  fb90f0f1          SDIV     r0,r0,r1              ;2071
001760  9001              STR      r0,[sp,#4]            ;2073
001762  20ac              MOVS     r0,#0xac              ;2073
001764  f7fffffe          BL       lc640_read_int
001768  f5a0412b          SUB      r1,r0,#0xab00         ;2073
00176c  39cd              SUBS     r1,r1,#0xcd           ;2073
00176e  d10a              BNE      |L5.6022|
001770  48ec              LDR      r0,|L5.6948|
001772  8800              LDRH     r0,[r0,#0]            ;2075  ; CAP_MAX_VOLT
001774  eb000080          ADD      r0,r0,r0,LSL #2       ;2075
001778  0040              LSLS     r0,r0,#1              ;2075
00177a  b200              SXTH     r0,r0                 ;2075
00177c  f7fffffe          BL       find_U_curve
001780  eb000080          ADD      r0,r0,r0,LSL #2       ;2075
001784  9000              STR      r0,[sp,#0]            ;2075
                  |L5.6022|
001786  20ae              MOVS     r0,#0xae              ;2078
001788  f7fffffe          BL       lc640_read_int
00178c  f5a0412b          SUB      r1,r0,#0xab00         ;2078
001790  39cd              SUBS     r1,r1,#0xcd           ;2078
001792  d10a              BNE      |L5.6058|
001794  48e5              LDR      r0,|L5.6956|
001796  8800              LDRH     r0,[r0,#0]            ;2080  ; CAP_WRK_CURR
001798  eb000080          ADD      r0,r0,r0,LSL #2       ;2080
00179c  0040              LSLS     r0,r0,#1              ;2080
00179e  b200              SXTH     r0,r0                 ;2080
0017a0  f7fffffe          BL       find_I_curve
0017a4  eb000080          ADD      r0,r0,r0,LSL #2       ;2080
0017a8  9001              STR      r0,[sp,#4]            ;2080
                  |L5.6058|
0017aa  2000              MOVS     r0,#0                 ;2085
0017ac  f9b71000          LDRSH    r1,[r7,#0]            ;1524
0017b0  e035              B        |L5.6174|
                  |L5.6066|
0017b2  4ae0              LDR      r2,|L5.6964|
0017b4  7812              LDRB     r2,[r2,#0]            ;2087  ; bOFF
0017b6  b152              CBZ      r2,|L5.6094|
0017b8  ebc002c0          RSB      r2,r0,r0,LSL #3       ;2088
0017bc  eb020242          ADD      r2,r2,r2,LSL #1       ;2088
0017c0  eb040282          ADD      r2,r4,r2,LSL #2       ;2088
0017c4  62d5              STR      r5,[r2,#0x2c]         ;2089
0017c6  6315              STR      r5,[r2,#0x30]         ;2090
0017c8  f8829028          STRB     r9,[r2,#0x28]         ;2090
0017cc  e025              B        |L5.6170|
                  |L5.6094|
0017ce  9a00              LDR      r2,[sp,#0]            ;2092
0017d0  b213              SXTH     r3,r2                 ;2092
0017d2  f9ba2000          LDRSH    r2,[r10,#0]           ;2092  ; _xu_
0017d6  189a              ADDS     r2,r3,r2              ;2092
0017d8  ebc003c0          RSB      r3,r0,r0,LSL #3       ;2092
0017dc  eb030343          ADD      r3,r3,r3,LSL #1       ;2092
0017e0  eb040c83          ADD      r12,r4,r3,LSL #2      ;2092
0017e4  f8cc202c          STR      r2,[r12,#0x2c]        ;2093
0017e8  d502              BPL      |L5.6128|
0017ea  f8cc502c          STR      r5,[r12,#0x2c]        ;2093
0017ee  e003              B        |L5.6136|
                  |L5.6128|
0017f0  4542              CMP      r2,r8                 ;2094
0017f2  dd01              BLE      |L5.6136|
0017f4  f8cc802c          STR      r8,[r12,#0x2c]        ;2094
                  |L5.6136|
0017f8  9a01              LDR      r2,[sp,#4]            ;2095
0017fa  b213              SXTH     r3,r2                 ;2095
0017fc  f9bb2000          LDRSH    r2,[r11,#0]           ;2095  ; _x_
001800  189a              ADDS     r2,r3,r2              ;2095
001802  f8cc2030          STR      r2,[r12,#0x30]        ;2096
001806  d502              BPL      |L5.6158|
001808  f8cc5030          STR      r5,[r12,#0x30]        ;2096
00180c  e003              B        |L5.6166|
                  |L5.6158|
00180e  4542              CMP      r2,r8                 ;2097
001810  dd01              BLE      |L5.6166|
001812  f8cc8030          STR      r8,[r12,#0x30]        ;2097
                  |L5.6166|
001816  f88c5028          STRB     r5,[r12,#0x28]        ;2098
                  |L5.6170|
00181a  1c40              ADDS     r0,r0,#1              ;2085
00181c  b2c0              UXTB     r0,r0                 ;2085
                  |L5.6174|
00181e  4288              CMP      r0,r1                 ;2085
001820  dbc7              BLT      |L5.6066|
001822  e011              B        |L5.6216|
                  |L5.6180|
;;;2108   		{
;;;2109   		bps[i]._vol_u=0;
001824  ebc002c0          RSB      r2,r0,r0,LSL #3
001828  eb020242          ADD      r2,r2,r2,LSL #1
00182c  eb040282          ADD      r2,r4,r2,LSL #2
001830  1c40              ADDS     r0,r0,#1              ;2107
;;;2110   		bps[i]._vol_i=0;
001832  62d5              STR      r5,[r2,#0x2c]
;;;2111   		bps[i]._flags_tu=1;
001834  6315              STR      r5,[r2,#0x30]
001836  f8823028          STRB     r3,[r2,#0x28]
00183a  b2c0              UXTB     r0,r0                 ;2107
                  |L5.6204|
00183c  4288              CMP      r0,r1                 ;2107
00183e  dbf1              BLT      |L5.6180|
;;;2112   		}
;;;2113   	_x_=0;
001840  f8ab5000          STRH     r5,[r11,#0]
;;;2114   	_xu_=0;
001844  f8aa5000          STRH     r5,[r10,#0]
                  |L5.6216|
;;;2115   	}
;;;2116   
;;;2117   //gran(&bps[0]._vol_u,10,1010);
;;;2118   //gran(&bps[0]._vol_i,10,1010);
;;;2119   
;;;2120   if(pwm_t_reg)
001848  49bb              LDR      r1,|L5.6968|
00184a  f9b10000          LDRSH    r0,[r1,#0]  ; pwm_t_reg
00184e  b1e8              CBZ      r0,|L5.6284|
;;;2121   	{
;;;2122   	if(--pwm_t_reg==0)
001850  1e40              SUBS     r0,r0,#1
001852  b200              SXTH     r0,r0
001854  8008              STRH     r0,[r1,#0]
;;;2123   		{
;;;2124   		pwm_u_reg=0;
001856  4ab9              LDR      r2,|L5.6972|
;;;2125   		pwm_i_reg=0;
001858  49b9              LDR      r1,|L5.6976|
00185a  b908              CBNZ     r0,|L5.6240|
00185c  8015              STRH     r5,[r2,#0]            ;2124
00185e  800d              STRH     r5,[r1,#0]
                  |L5.6240|
;;;2126   		}
;;;2127   	for(i=0;i<NUMIST;i++) 
001860  f9b1c000          LDRSH    r12,[r1,#0]
001864  2000              MOVS     r0,#0
001866  f9b22000          LDRSH    r2,[r2,#0]
00186a  f9b71000          LDRSH    r1,[r7,#0]            ;1524
00186e  e00b              B        |L5.6280|
                  |L5.6256|
;;;2128   		{
;;;2129   		bps[i]._vol_u=pwm_u_reg;
001870  ebc003c0          RSB      r3,r0,r0,LSL #3
001874  eb030343          ADD      r3,r3,r3,LSL #1
001878  eb040383          ADD      r3,r4,r3,LSL #2
00187c  1c40              ADDS     r0,r0,#1              ;2127
00187e  e9c32c0b          STRD     r2,r12,[r3,#0x2c]
;;;2130   		bps[i]._vol_i=pwm_i_reg;
;;;2131   		bps[i]._flags_tu=0;
001882  f8835028          STRB     r5,[r3,#0x28]
001886  b2c0              UXTB     r0,r0                 ;2127
                  |L5.6280|
001888  4288              CMP      r0,r1                 ;2127
00188a  dbf1              BLT      |L5.6256|
                  |L5.6284|
;;;2132   		}
;;;2133   	}
;;;2134   
;;;2135   
;;;2136   for(i=0;i<NUMIST;i++) 
00188c  2000              MOVS     r0,#0
00188e  464b              MOV      r3,r9                 ;1476
001890  f9b71000          LDRSH    r1,[r7,#0]            ;1524
001894  e010              B        |L5.6328|
;;;2137   	{
;;;2138   	if(bps[i]._av&0x8f)
001896  bf00              NOP      
                  |L5.6296|
001898  ebc002c0          RSB      r2,r0,r0,LSL #3
00189c  eb020242          ADD      r2,r2,r2,LSL #1
0018a0  eb040282          ADD      r2,r4,r2,LSL #2
0018a4  7857              LDRB     r7,[r2,#1]
0018a6  f0170f8f          TST      r7,#0x8f
0018aa  d003              BEQ      |L5.6324|
;;;2139   		{
;;;2140   		bps[i]._vol_u=0;
;;;2141   		bps[i]._vol_i=0;
0018ac  62d5              STR      r5,[r2,#0x2c]
;;;2142   		bps[i]._flags_tu=1;
0018ae  6315              STR      r5,[r2,#0x30]
0018b0  f8823028          STRB     r3,[r2,#0x28]
                  |L5.6324|
0018b4  1c40              ADDS     r0,r0,#1              ;2136
0018b6  b2c0              UXTB     r0,r0                 ;2136
                  |L5.6328|
0018b8  4288              CMP      r0,r1                 ;2136
0018ba  dbed              BLT      |L5.6296|
;;;2143   		}
;;;2144   	}
;;;2145   
;;;2146   b1Hz_sh=0;
0018bc  71b5              STRB     r5,[r6,#6]
;;;2147   }
0018be  e8bd9ffc          POP      {r2-r12,pc}
;;;2148   
                          ENDP

                  bps_drv PROC
;;;2157   //-----------------------------------------------
;;;2158   void bps_drv(char in)
0018c2  ebc000c0          RSB      r0,r0,r0,LSL #3
;;;2159   {
;;;2160   char temp;
;;;2161   
;;;2162   if (bps[in]._device!=dSRC) return;
0018c6  499f              LDR      r1,|L5.6980|
0018c8  b510              PUSH     {r4,lr}               ;2159
0018ca  eb000040          ADD      r0,r0,r0,LSL #1
0018ce  f8112020          LDRB     r2,[r1,r0,LSL #2]
0018d2  2a03              CMP      r2,#3
0018d4  d17d              BNE      |L5.6610|
;;;2163   temp=bps[in]._flags_tm;
0018d6  eb010080          ADD      r0,r1,r0,LSL #2
0018da  f890103e          LDRB     r1,[r0,#0x3e]
;;;2164   if(temp&(1<<AV_T))
0018de  078a              LSLS     r2,r1,#30
;;;2165   	{
;;;2166   	if(bps[in]._temp_av_cnt<1200) 
;;;2167   		{
;;;2168   		bps[in]._temp_av_cnt++;
;;;2169   		if(bps[in]._temp_av_cnt>=1200)
;;;2170   			{
;;;2171   			bps[in]._temp_av_cnt=1200;
;;;2172   		   	//if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
;;;2173   			}
;;;2174   		}
;;;2175   	}
;;;2176   
;;;2177   else if(!(temp&(1<<AV_T)))
;;;2178   	{
;;;2179   	if(bps[in]._temp_av_cnt) 
0018e0  f9b02042          LDRSH    r2,[r0,#0x42]
0018e4  d50c              BPL      |L5.6400|
0018e6  f44f6396          MOV      r3,#0x4b0             ;2166
0018ea  429a              CMP      r2,r3                 ;2166
0018ec  da0d              BGE      |L5.6410|
0018ee  1c52              ADDS     r2,r2,#1              ;2168
0018f0  b212              SXTH     r2,r2                 ;2168
0018f2  f8a02042          STRH     r2,[r0,#0x42]         ;2168
0018f6  429a              CMP      r2,r3                 ;2169
0018f8  db07              BLT      |L5.6410|
0018fa  f8a03042          STRH     r3,[r0,#0x42]         ;2171
0018fe  e004              B        |L5.6410|
                  |L5.6400|
001900  b11a              CBZ      r2,|L5.6410|
;;;2180   		{
;;;2181   		bps[in]._temp_av_cnt--;
001902  f1a20201          SUB      r2,r2,#1
001906  f8a02042          STRH     r2,[r0,#0x42]
                  |L5.6410|
;;;2182   		if(!bps[in]._temp_av_cnt)
;;;2183   			{
;;;2184   			//if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
;;;2185   			}
;;;2186   		} 	
;;;2187   
;;;2188   	}
;;;2189   
;;;2190   if((temp&(1<<AVUMAX)))
00190a  070a              LSLS     r2,r1,#28
;;;2191   	{
;;;2192   	if(bps[in]._umax_av_cnt<10) 
;;;2193   		{
;;;2194   		bps[in]._umax_av_cnt++;
;;;2195   		if(bps[in]._umax_av_cnt>=10)
;;;2196   			{ 
;;;2197   			bps[in]._umax_av_cnt=10;
;;;2198   			//if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
;;;2199   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;2200   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2201   				{
;;;2202   				apv_cnt[in,0]=APV_INIT;
;;;2203   				apv_cnt[in,1]=APV_INIT;
;;;2204   				apv_cnt[in,2]=APV_INIT;
;;;2205   				apv_flags[in]=afOFF;
;;;2206   				}				*/
;;;2207   						
;;;2208   			}
;;;2209   		} 
;;;2210   	}		
;;;2211   else if(!(temp&(1<<AVUMAX)))
;;;2212   	{
;;;2213   	if(bps[in]._umax_av_cnt>0) 
00190c  f9b02044          LDRSH    r2,[r0,#0x44]
001910  f04f030a          MOV      r3,#0xa               ;2197
001914  f04f0400          MOV      r4,#0                 ;2166
001918  d50a              BPL      |L5.6448|
00191a  2a0a              CMP      r2,#0xa               ;2192
00191c  da13              BGE      |L5.6470|
00191e  1c52              ADDS     r2,r2,#1              ;2194
001920  b212              SXTH     r2,r2                 ;2194
001922  f8a02044          STRH     r2,[r0,#0x44]         ;2194
001926  2a0a              CMP      r2,#0xa               ;2195
001928  db0d              BLT      |L5.6470|
00192a  f8a03044          STRH     r3,[r0,#0x44]         ;2197
00192e  e00a              B        |L5.6470|
                  |L5.6448|
001930  2a00              CMP      r2,#0
001932  dd05              BLE      |L5.6464|
;;;2214   		{
;;;2215   		bps[in]._umax_av_cnt--;
001934  f1a20201          SUB      r2,r2,#1
001938  b212              SXTH     r2,r2
00193a  f8a02044          STRH     r2,[r0,#0x44]
;;;2216   		if(bps[in]._umax_av_cnt==0)
00193e  e002              B        |L5.6470|
                  |L5.6464|
;;;2217   			{
;;;2218   			bps[in]._umax_av_cnt=0;
;;;2219   			//avar_bps_hndl(in,1,0);
;;;2220   	 //		apv_cnt[in,0]=0;
;;;2221   	//		apv_cnt[in,1]=0;
;;;2222   	 //		apv_cnt[in,2]=0;			
;;;2223   			}
;;;2224   		}
;;;2225   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
001940  da01              BGE      |L5.6470|
001942  f8a04044          STRH     r4,[r0,#0x44]
                  |L5.6470|
;;;2226   	}
;;;2227   
;;;2228   if(temp&(1<<AVUMIN))
001946  06ca              LSLS     r2,r1,#27
;;;2229   	{
;;;2230   	if(bps[in]._umin_av_cnt<10) 
;;;2231   		{
;;;2232   		bps[in]._umin_av_cnt++;
;;;2233   		if(bps[in]._umin_av_cnt>=10)
;;;2234   			{ 
;;;2235   			bps[in]._umin_av_cnt=10;
;;;2236   			//if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
;;;2237   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;2238   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2239   				{
;;;2240   				apv_cnt[in,0]=APV_INIT;
;;;2241   				apv_cnt[in,1]=APV_INIT;
;;;2242   				apv_cnt[in,2]=APV_INIT;
;;;2243   				apv_flags[in]=afOFF;
;;;2244   				}*/				
;;;2245   			}
;;;2246   		} 
;;;2247   	}	
;;;2248   	
;;;2249   else if(!(temp&(1<<AVUMIN)))
;;;2250   	{
;;;2251   	if(bps[in]._umin_av_cnt) 
001948  f9b02046          LDRSH    r2,[r0,#0x46]
00194c  d50a              BPL      |L5.6500|
00194e  2a0a              CMP      r2,#0xa               ;2230
001950  da0d              BGE      |L5.6510|
001952  1c52              ADDS     r2,r2,#1              ;2232
001954  b212              SXTH     r2,r2                 ;2232
001956  f8a02046          STRH     r2,[r0,#0x46]         ;2232
00195a  2a0a              CMP      r2,#0xa               ;2233
00195c  db07              BLT      |L5.6510|
00195e  f8a03046          STRH     r3,[r0,#0x46]         ;2235
001962  e004              B        |L5.6510|
                  |L5.6500|
001964  b11a              CBZ      r2,|L5.6510|
;;;2252   		{
;;;2253   		bps[in]._umin_av_cnt--;
001966  1e52              SUBS     r2,r2,#1
001968  b212              SXTH     r2,r2
00196a  f8a02046          STRH     r2,[r0,#0x46]
                  |L5.6510|
;;;2254   		if(bps[in]._umin_av_cnt==0)
;;;2255   			{
;;;2256   			bps[in]._umin_av_cnt=0;
;;;2257   		//	avar_bps_hndl(in,2,0);
;;;2258   		//	apv_cnt[in,0]=0;
;;;2259   		//	apv_cnt[in,1]=0;
;;;2260   		//	apv_cnt[in,2]=0;
;;;2261   			}
;;;2262   		}
;;;2263   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;2264   	}
;;;2265   
;;;2266   //bps[in]._state=bsOFF;
;;;2267   
;;;2268   
;;;2269   if(((work_stat==wsGS) || (work_stat==wsPS))&&(UOUT_OFF_EN))
00196e  4a76              LDR      r2,|L5.6984|
001970  7813              LDRB     r3,[r2,#0]  ; work_stat
001972  2b01              CMP      r3,#1
001974  d001              BEQ      |L5.6522|
001976  2b02              CMP      r3,#2
001978  d135              BNE      |L5.6630|
                  |L5.6522|
00197a  4a74              LDR      r2,|L5.6988|
00197c  8812              LDRH     r2,[r2,#0]  ; UOUT_OFF_EN
00197e  b34a              CBZ      r2,|L5.6612|
;;;2270   	{
;;;2271   	short tempU;
;;;2272   	long tempL;
;;;2273   
;;;2274   	tempU= U_maxg;
001980  4a73              LDR      r2,|L5.6992|
;;;2275   	if(work_stat==wsPS)tempU= U_up_temp;
001982  2b02              CMP      r3,#2
001984  f9b22000          LDRSH    r2,[r2,#0]            ;2274  ; U_maxg
001988  d102              BNE      |L5.6544|
00198a  4a72              LDR      r2,|L5.6996|
00198c  f9b22000          LDRSH    r2,[r2,#0]  ; U_up_temp
                  |L5.6544|
;;;2276   
;;;2277   	tempL=((long)tempU)*((long)(100+UOUT_OFF_LEVEL));
001990  4b71              LDR      r3,|L5.7000|
001992  f9b33000          LDRSH    r3,[r3,#0]  ; UOUT_OFF_LEVEL
001996  3364              ADDS     r3,r3,#0x64
001998  435a              MULS     r2,r3,r2
;;;2278   	tempL/=100L;
00199a  2364              MOVS     r3,#0x64
00199c  fb92f2f3          SDIV     r2,r2,r3
;;;2279   
;;;2280   	tempU=(short)tempL;
;;;2281   	plazma_umax=tempU;
0019a0  4b6e              LDR      r3,|L5.7004|
0019a2  b212              SXTH     r2,r2                 ;2280
0019a4  801a              STRH     r2,[r3,#0]
;;;2282   
;;;2283   	if(bps[in]._Uii>tempU)
0019a6  6983              LDR      r3,[r0,#0x18]
0019a8  4293              CMP      r3,r2
;;;2284   		{
;;;2285   		if(bps[in]._uout_avar_cnt<(UOUT_OFF_DELAY*10))
;;;2286   			{
;;;2287   			bps[in]._uout_avar_cnt++;
;;;2288   			if(bps[in]._uout_avar_cnt>=(UOUT_OFF_DELAY*10))
;;;2289   				{
;;;2290   				bps[in]._av|=0x80;
;;;2291   				}
;;;2292   			}
;;;2293   		}
;;;2294   	else 
;;;2295   		{
;;;2296   		if(bps[in]._uout_avar_cnt) bps[in]._uout_avar_cnt--;
0019aa  f8902052          LDRB     r2,[r0,#0x52]
0019ae  dd16              BLE      |L5.6622|
0019b0  4b6b              LDR      r3,|L5.7008|
0019b2  f9b33000          LDRSH    r3,[r3,#0]            ;2285  ; UOUT_OFF_DELAY
0019b6  eb030383          ADD      r3,r3,r3,LSL #2       ;2285
0019ba  ebb20f43          CMP      r2,r3,LSL #1          ;2285
0019be  da12              BGE      |L5.6630|
0019c0  1c52              ADDS     r2,r2,#1              ;2287
0019c2  b2d2              UXTB     r2,r2                 ;2287
0019c4  f8802052          STRB     r2,[r0,#0x52]         ;2287
0019c8  ebb20f43          CMP      r2,r3,LSL #1          ;2288
0019cc  db0b              BLT      |L5.6630|
0019ce  7842              LDRB     r2,[r0,#1]            ;2290
0019d0  e001              B        |L5.6614|
                  |L5.6610|
0019d2  e032              B        |L5.6714|
                  |L5.6612|
0019d4  e007              B        |L5.6630|
                  |L5.6614|
0019d6  f0420280          ORR      r2,r2,#0x80           ;2290
0019da  7042              STRB     r2,[r0,#1]            ;2290
0019dc  e003              B        |L5.6630|
                  |L5.6622|
0019de  b112              CBZ      r2,|L5.6630|
0019e0  1e52              SUBS     r2,r2,#1
0019e2  f8802052          STRB     r2,[r0,#0x52]
                  |L5.6630|
;;;2297   		}
;;;2298   
;;;2299   
;;;2300   
;;;2301   
;;;2302   
;;;2303   	}
;;;2304   
;;;2305   
;;;2306   
;;;2307   if (bps[in]._av&0x8f)					bps[in]._state=bsAV;
0019e6  7842              LDRB     r2,[r0,#1]
0019e8  f0120f8f          TST      r2,#0x8f
0019ec  d001              BEQ      |L5.6642|
0019ee  2104              MOVS     r1,#4
0019f0  e00f              B        |L5.6674|
                  |L5.6642|
;;;2308   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
0019f2  4a5c              LDR      r2,|L5.7012|
0019f4  7812              LDRB     r2,[r2,#0]  ; net_av
0019f6  b122              CBZ      r2,|L5.6658|
0019f8  78c2              LDRB     r2,[r0,#3]
0019fa  2a14              CMP      r2,#0x14
0019fc  d901              BLS      |L5.6658|
;;;2309   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
0019fe  2105              MOVS     r1,#5
001a00  e007              B        |L5.6674|
                  |L5.6658|
;;;2310   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
001a02  0689              LSLS     r1,r1,#26
001a04  d501              BPL      |L5.6666|
001a06  2102              MOVS     r1,#2
001a08  e003              B        |L5.6674|
                  |L5.6666|
;;;2311   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
001a0a  78c1              LDRB     r1,[r0,#3]
001a0c  2914              CMP      r1,#0x14
001a0e  d201              BCS      |L5.6676|
001a10  2101              MOVS     r1,#1
                  |L5.6674|
001a12  7081              STRB     r1,[r0,#2]
                  |L5.6676|
;;;2312   
;;;2313   
;;;2314   
;;;2315   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;2316   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;2317   //else bps[0]._state=ssNOT;
;;;2318   
;;;2319   //bps[in]._is_ready=0;
;;;2320   //bps[in]._is_wrk=0;
;;;2321   //if(bps[in]._av_net) bps[in]._flags_bp='N';// не подключен
;;;2322   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// завышено напряжение(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;2323   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// занижено напряжение
;;;2324   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// температура
;;;2325   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;2326   //	{
;;;2327   //	bps[in]._flags_bp='B';// заблокирован
;;;2328   //	bps[in]._is_ready=1;
;;;2329   //	}
;;;2330   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;2331   //     {
;;;2332   //     bps[in]._flags_bp='W';// работает
;;;2333   //     bps[in]._is_ready=1;
;;;2334   //     bps[in]._is_wrk=1;
;;;2335        
;;;2336   //     }
;;;2337   //else bps[in]._is_ready=1;     
;;;2338   
;;;2339   
;;;2340   
;;;2341   
;;;2342   
;;;2343   /*
;;;2344   bps[in]._flags_tu&=BIN8(11111110);
;;;2345   if(bps[in]._ist_blok_cnt)
;;;2346   	{
;;;2347   	bps[in]._ist_blok_cnt--;
;;;2348   	bps[in]._flags_tu|=BIN8(1);
;;;2349   	}
;;;2350   
;;;2351   	   */ 
;;;2352   
;;;2353   //Пересброс БПСа при потере связи
;;;2354   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
001a14  78c1              LDRB     r1,[r0,#3]
001a16  290a              CMP      r1,#0xa
;;;2355   else bps[in]._flags_tu&=BIN8(1111111);
001a18  f8901028          LDRB     r1,[r0,#0x28]
001a1c  d302              BCC      |L5.6692|
001a1e  f0410180          ORR      r1,r1,#0x80           ;2354
001a22  e001              B        |L5.6696|
                  |L5.6692|
001a24  f001017f          AND      r1,r1,#0x7f
                  |L5.6696|
001a28  f8801028          STRB     r1,[r0,#0x28]
;;;2356   	
;;;2357   bps[in]._vol_u=cntrl_stat_U;	
001a2c  494e              LDR      r1,|L5.7016|
001a2e  f9b12014          LDRSH    r2,[r1,#0x14]  ; cntrl_stat_U
;;;2358   bps[in]._vol_i=cntrl_stat_I;
001a32  62c2              STR      r2,[r0,#0x2c]
001a34  f9b11016          LDRSH    r1,[r1,#0x16]  ; cntrl_stat_I
001a38  6301              STR      r1,[r0,#0x30]
                  |L5.6714|
;;;2359    
;;;2360   }
001a3a  bd10              POP      {r4,pc}
;;;2361   
                          ENDP

                  volt_contr_hndl PROC
;;;2374   //-----------------------------------------------
;;;2375   void volt_contr_hndl(void)
001a3c  e92d47f0          PUSH     {r4-r10,lr}
;;;2376   {
;;;2377   if(work_stat==wsOFF)
001a40  4841              LDR      r0,|L5.6984|
;;;2378   	{
;;;2379   	cnt_volt_contr=0;
;;;2380   	}
;;;2381   else 
;;;2382   	{
;;;2383   	if(cnt_volt_contr<(T_DEL_REL_VOLT_START*10))
001a42  4e4a              LDR      r6,|L5.7020|
001a44  4c48              LDR      r4,|L5.7016|
001a46  7800              LDRB     r0,[r0,#0]            ;2377  ; work_stat
001a48  2500              MOVS     r5,#0                 ;2377
001a4a  b310              CBZ      r0,|L5.6802|
001a4c  f9b60000          LDRSH    r0,[r6,#0]  ; T_DEL_REL_VOLT_START
001a50  eb000180          ADD      r1,r0,r0,LSL #2
001a54  f9b40028          LDRSH    r0,[r4,#0x28]  ; cnt_volt_contr
001a58  ebb00f41          CMP      r0,r1,LSL #1
001a5c  da01              BGE      |L5.6754|
;;;2384   		{
;;;2385   		cnt_volt_contr++;
001a5e  1c40              ADDS     r0,r0,#1
001a60  8520              STRH     r0,[r4,#0x28]
                  |L5.6754|
;;;2386   		}
;;;2387   	}
;;;2388   
;;;2389   	
;;;2390   	if(load_U>REL_VOLT_UMIN*10)
001a62  4843              LDR      r0,|L5.7024|
001a64  f8df810c          LDR      r8,|L5.7028|
;;;2391   		{
;;;2392   		cnt_rel_volt_umin++;
;;;2393   		gran(&cnt_rel_volt_umin,0,30000);
001a68  f2475a30          MOV      r10,#0x7530
001a6c  f9b00000          LDRSH    r0,[r0,#0]            ;2390  ; REL_VOLT_UMIN
001a70  eb000180          ADD      r1,r0,r0,LSL #2       ;2390
001a74  f9b80000          LDRSH    r0,[r8,#0]            ;2390  ; load_U
001a78  ebb00f41          CMP      r0,r1,LSL #1          ;2390
001a7c  dd0b              BLE      |L5.6806|
001a7e  8d60              LDRH     r0,[r4,#0x2a]         ;2392  ; cnt_rel_volt_umin
001a80  4652              MOV      r2,r10
001a82  1c40              ADDS     r0,r0,#1              ;2392
001a84  8560              STRH     r0,[r4,#0x2a]         ;2392
001a86  4838              LDR      r0,|L5.7016|
001a88  2100              MOVS     r1,#0
001a8a  302a              ADDS     r0,r0,#0x2a
001a8c  f7fffffe          BL       gran
001a90  e002              B        |L5.6808|
                  |L5.6802|
001a92  8525              STRH     r5,[r4,#0x28]         ;2379
001a94  e7e5              B        |L5.6754|
                  |L5.6806|
;;;2394   		}
;;;2395   	else cnt_rel_volt_umin=0;
001a96  8565              STRH     r5,[r4,#0x2a]
                  |L5.6808|
;;;2396   	if((cnt_rel_volt_umin>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_DOWN=1;
001a98  f8df90dc          LDR      r9,|L5.7032|
001a9c  2701              MOVS     r7,#1
001a9e  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
001aa2  eb000180          ADD      r1,r0,r0,LSL #2
001aa6  f9b4002a          LDRSH    r0,[r4,#0x2a]  ; cnt_rel_volt_umin
001aaa  ebb00f41          CMP      r0,r1,LSL #1
001aae  db0a              BLT      |L5.6854|
001ab0  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
001ab4  f9b42028          LDRSH    r2,[r4,#0x28]  ; cnt_volt_contr
001ab8  eb010181          ADD      r1,r1,r1,LSL #2
001abc  ebb20f41          CMP      r2,r1,LSL #1
001ac0  db01              BLT      |L5.6854|
001ac2  7327              STRB     r7,[r4,#0xc]
001ac4  e001              B        |L5.6858|
                  |L5.6854|
;;;2397   	else if(cnt_rel_volt_umin==0)							  							bVOLT_IS_NOT_DOWN=0;
001ac6  b900              CBNZ     r0,|L5.6858|
001ac8  7325              STRB     r5,[r4,#0xc]
                  |L5.6858|
;;;2398   
;;;2399   	if(load_U<REL_VOLT_UMAX*10)
001aca  482c              LDR      r0,|L5.7036|
001acc  f9b00000          LDRSH    r0,[r0,#0]  ; REL_VOLT_UMAX
001ad0  eb000180          ADD      r1,r0,r0,LSL #2
001ad4  f9b80000          LDRSH    r0,[r8,#0]  ; load_U
001ad8  ebb00f41          CMP      r0,r1,LSL #1
001adc  da09              BGE      |L5.6898|
;;;2400   		{
;;;2401   		cnt_rel_volt_umax++;
001ade  8da0              LDRH     r0,[r4,#0x2c]  ; cnt_rel_volt_umax
;;;2402   		gran(&cnt_rel_volt_umax,0,30000);
001ae0  4652              MOV      r2,r10
001ae2  1c40              ADDS     r0,r0,#1              ;2401
001ae4  85a0              STRH     r0,[r4,#0x2c]         ;2401
001ae6  4820              LDR      r0,|L5.7016|
001ae8  2100              MOVS     r1,#0
001aea  302c              ADDS     r0,r0,#0x2c
001aec  f7fffffe          BL       gran
001af0  e000              B        |L5.6900|
                  |L5.6898|
;;;2403   		}
;;;2404   	else cnt_rel_volt_umax=0;
001af2  85a5              STRH     r5,[r4,#0x2c]
                  |L5.6900|
;;;2405   	if((cnt_rel_volt_umax>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_UP=1;
001af4  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
001af8  eb000180          ADD      r1,r0,r0,LSL #2
001afc  f9b4002c          LDRSH    r0,[r4,#0x2c]  ; cnt_rel_volt_umax
001b00  ebb00f41          CMP      r0,r1,LSL #1
001b04  db3c              BLT      |L5.7040|
001b06  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
001b0a  f9b42028          LDRSH    r2,[r4,#0x28]  ; cnt_volt_contr
001b0e  eb010181          ADD      r1,r1,r1,LSL #2
001b12  ebb20f41          CMP      r2,r1,LSL #1
001b16  db33              BLT      |L5.7040|
001b18  7367              STRB     r7,[r4,#0xd]
001b1a  e034              B        |L5.7046|
                  |L5.6940|
                          DCD      _x_
                  |L5.6944|
                          DCD      _xu_
                  |L5.6948|
                          DCD      CAP_MAX_VOLT
                  |L5.6952|
                          DCD      U_MAX
                  |L5.6956|
                          DCD      CAP_WRK_CURR
                  |L5.6960|
                          DCD      I_MAX_IPS
                  |L5.6964|
                          DCD      bOFF
                  |L5.6968|
                          DCD      pwm_t_reg
                  |L5.6972|
                          DCD      pwm_u_reg
                  |L5.6976|
                          DCD      pwm_i_reg
                  |L5.6980|
                          DCD      bps
                  |L5.6984|
                          DCD      work_stat
                  |L5.6988|
                          DCD      UOUT_OFF_EN
                  |L5.6992|
                          DCD      U_maxg
                  |L5.6996|
                          DCD      U_up_temp
                  |L5.7000|
                          DCD      UOUT_OFF_LEVEL
                  |L5.7004|
                          DCD      plazma_umax
                  |L5.7008|
                          DCD      UOUT_OFF_DELAY
                  |L5.7012|
                          DCD      net_av
                  |L5.7016|
                          DCD      ||area_number.25||
                  |L5.7020|
                          DCD      T_DEL_REL_VOLT_START
                  |L5.7024|
                          DCD      REL_VOLT_UMIN
                  |L5.7028|
                          DCD      load_U
                  |L5.7032|
                          DCD      T_DEL_REL_VOLT_WRK
                  |L5.7036|
                          DCD      REL_VOLT_UMAX
                  |L5.7040|
;;;2406   	else if(cnt_rel_volt_umax==0)							  							bVOLT_IS_NOT_UP=0;
001b80  b130              CBZ      r0,|L5.7056|
;;;2407   	
;;;2408   	if(bVOLT_IS_NOT_UP && bVOLT_IS_NOT_DOWN) bVOLT_IS_NORM=1;
001b82  7b60              LDRB     r0,[r4,#0xd]  ; bVOLT_IS_NOT_UP
001b84  b128              CBZ      r0,|L5.7058|
                  |L5.7046|
001b86  7b20              LDRB     r0,[r4,#0xc]  ; bVOLT_IS_NOT_DOWN
001b88  b118              CBZ      r0,|L5.7058|
001b8a  73a7              STRB     r7,[r4,#0xe]
                  |L5.7052|
;;;2409   	else bVOLT_IS_NORM=0;
;;;2410   
;;;2411   
;;;2412   }
001b8c  e8bd87f0          POP      {r4-r10,pc}
                  |L5.7056|
001b90  7365              STRB     r5,[r4,#0xd]          ;2406
                  |L5.7058|
001b92  73a5              STRB     r5,[r4,#0xe]          ;2409
001b94  e7fa              B        |L5.7052|
;;;2413   
                          ENDP

                  current_stab_hndl PROC
;;;2414   //-----------------------------------------------
;;;2415   void current_stab_hndl(void)
001b96  e92d5ff0          PUSH     {r4-r12,lr}
;;;2416   {
;;;2417   
;;;2418   if(work_stat==wsPS)
001b9a  48b1              LDR      r0,|L5.7776|
;;;2419   	{
;;;2420   	delta_U_abs=abs_pal(load_U-U_up);
001b9c  f8df82c8          LDR      r8,|L5.7784|
;;;2421   	delta_U_rel=(delta_U_abs*100)/U_up;
;;;2422   
;;;2423   	delta_I_abs=abs_pal(load_I-I_maxp);
001ba0  f8dfb2c8          LDR      r11,|L5.7788|
001ba4  7801              LDRB     r1,[r0,#0]            ;2418  ; work_stat
001ba6  48af              LDR      r0,|L5.7780|
001ba8  f8dfa2c4          LDR      r10,|L5.7792|
001bac  4db1              LDR      r5,|L5.7796|
001bae  f9b00000          LDRSH    r0,[r0,#0]            ;2420
;;;2424   	delta_I_rel=(delta_I_abs*100)/I_maxp;
001bb2  4eb1              LDR      r6,|L5.7800|
;;;2425   	}
;;;2426   
;;;2427   else if(work_stat==wsGS)
;;;2428   	{
;;;2429   	delta_U_abs=abs_pal(load_U-U_maxg);
;;;2430   	delta_U_rel=(delta_U_abs*100)/U_maxg;
;;;2431   
;;;2432   	delta_I_abs=abs_pal(load_I-I_ug_temp);
;;;2433   	delta_I_rel=(delta_I_abs*100)/I_ug_temp;
;;;2434   	}
;;;2435   else 
;;;2436   	{
;;;2437   	cnt_del_rel=0;
001bb4  2700              MOVS     r7,#0
001bb6  4cb1              LDR      r4,|L5.7804|
001bb8  2902              CMP      r1,#2                 ;2418
001bba  d011              BEQ      |L5.7136|
001bbc  2901              CMP      r1,#1                 ;2427
001bbe  d025              BEQ      |L5.7180|
001bc0  8027              STRH     r7,[r4,#0]
                  |L5.7106|
;;;2438   	}
;;;2439   
;;;2440   if((delta_U_rel>DELT_REL_CURR_U)&&(delta_I_rel<DELT_REL_CURR_I))
001bc2  49af              LDR      r1,|L5.7808|
001bc4  6828              LDR      r0,[r5,#0]  ; delta_U_rel
001bc6  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_U
001bca  4288              CMP      r0,r1
001bcc  dd43              BLE      |L5.7254|
001bce  49ad              LDR      r1,|L5.7812|
001bd0  6830              LDR      r0,[r6,#0]  ; delta_I_rel
001bd2  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_I
001bd6  4288              CMP      r0,r1
001bd8  da3d              BGE      |L5.7254|
;;;2441   	{
;;;2442   	cnt_del_rel++;
001bda  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001bdc  1c40              ADDS     r0,r0,#1
001bde  e03c              B        |L5.7258|
                  |L5.7136|
001be0  f8df92a4          LDR      r9,|L5.7816|
001be4  f8b91000          LDRH     r1,[r9,#0]            ;2420  ; U_up
001be8  1a40              SUBS     r0,r0,r1              ;2420
001bea  b200              SXTH     r0,r0                 ;2420
001bec  f7fffffe          BL       abs_pal
001bf0  f8c80000          STR      r0,[r8,#0]            ;2421  ; delta_U_abs
001bf4  2164              MOVS     r1,#0x64              ;2421
001bf6  4348              MULS     r0,r1,r0              ;2421
001bf8  f9b91000          LDRSH    r1,[r9,#0]            ;2421  ; U_up
001bfc  f8df828c          LDR      r8,|L5.7820|
001c00  fb90f0f1          SDIV     r0,r0,r1              ;2421
001c04  6028              STR      r0,[r5,#0]            ;2423  ; delta_U_rel
001c06  f8bb1000          LDRH     r1,[r11,#0]           ;2423  ; load_I
001c0a  e014              B        |L5.7222|
                  |L5.7180|
001c0c  f8df9280          LDR      r9,|L5.7824|
001c10  f8b91000          LDRH     r1,[r9,#0]            ;2429  ; U_maxg
001c14  1a40              SUBS     r0,r0,r1              ;2429
001c16  b200              SXTH     r0,r0                 ;2429
001c18  f7fffffe          BL       abs_pal
001c1c  f8c80000          STR      r0,[r8,#0]            ;2430  ; delta_U_abs
001c20  2164              MOVS     r1,#0x64              ;2430
001c22  4348              MULS     r0,r1,r0              ;2430
001c24  f9b91000          LDRSH    r1,[r9,#0]            ;2430  ; U_maxg
001c28  f8df8268          LDR      r8,|L5.7828|
001c2c  fb90f0f1          SDIV     r0,r0,r1              ;2430
001c30  6028              STR      r0,[r5,#0]            ;2432  ; delta_U_rel
001c32  f8bb1000          LDRH     r1,[r11,#0]           ;2432  ; load_I
                  |L5.7222|
001c36  f8b80000          LDRH     r0,[r8,#0]            ;2432  ; I_ug_temp
001c3a  1a08              SUBS     r0,r1,r0              ;2432
001c3c  b200              SXTH     r0,r0                 ;2432
001c3e  f7fffffe          BL       abs_pal
001c42  2164              MOVS     r1,#0x64              ;2433
001c44  f8ca0000          STR      r0,[r10,#0]           ;2433  ; delta_I_abs
001c48  4348              MULS     r0,r1,r0              ;2433
001c4a  f9b81000          LDRSH    r1,[r8,#0]            ;2433  ; I_ug_temp
001c4e  fb90f0f1          SDIV     r0,r0,r1              ;2433
001c52  6030              STR      r0,[r6,#0]            ;2433  ; delta_I_rel
001c54  e7b5              B        |L5.7106|
                  |L5.7254|
;;;2443   	}
;;;2444   else
;;;2445   	{
;;;2446   	cnt_del_rel--;
001c56  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001c58  1e40              SUBS     r0,r0,#1
                  |L5.7258|
;;;2447   	}
;;;2448   
;;;2449   gran(&cnt_del_rel,0,(T_DEL_REL_CURR_WRK*10)+10);
001c5a  4d8f              LDR      r5,|L5.7832|
001c5c  8020              STRH     r0,[r4,#0]            ;2446
001c5e  210a              MOVS     r1,#0xa
001c60  8828              LDRH     r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
001c62  eb000080          ADD      r0,r0,r0,LSL #2
001c66  eb010040          ADD      r0,r1,r0,LSL #1
001c6a  b202              SXTH     r2,r0
001c6c  2100              MOVS     r1,#0
001c6e  4883              LDR      r0,|L5.7804|
001c70  f7fffffe          BL       gran
;;;2450   
;;;2451   if(work_stat==wsOFF) cnt_del_rel=0;
001c74  487a              LDR      r0,|L5.7776|
001c76  7800              LDRB     r0,[r0,#0]  ; work_stat
001c78  b900              CBNZ     r0,|L5.7292|
001c7a  8027              STRH     r7,[r4,#0]
                  |L5.7292|
;;;2452   
;;;2453   
;;;2454   if ( (time_proc>=(T_DEL_REL_CURR_START)) &&
001c7c  4887              LDR      r0,|L5.7836|
001c7e  4988              LDR      r1,|L5.7840|
;;;2455   	(cnt_del_rel>(T_DEL_REL_CURR_WRK*10)) )
;;;2456   	{
;;;2457   	bCURRENT_STAB=1;
001c80  4a88              LDR      r2,|L5.7844|
001c82  6800              LDR      r0,[r0,#0]            ;2454  ; time_proc
001c84  f9b11000          LDRSH    r1,[r1,#0]            ;2454  ; T_DEL_REL_CURR_START
001c88  4288              CMP      r0,r1                 ;2454
001c8a  db0a              BLT      |L5.7330|
001c8c  f9b53000          LDRSH    r3,[r5,#0]            ;2455  ; T_DEL_REL_CURR_WRK
001c90  f9b46000          LDRSH    r6,[r4,#0]            ;2455  ; cnt_del_rel
001c94  eb030383          ADD      r3,r3,r3,LSL #2       ;2455
001c98  ebb60f43          CMP      r6,r3,LSL #1          ;2455
001c9c  dd01              BLE      |L5.7330|
001c9e  2301              MOVS     r3,#1
001ca0  7013              STRB     r3,[r2,#0]
                  |L5.7330|
;;;2458   	}
;;;2459   if ( (time_proc<(T_DEL_REL_CURR_START)) ||
001ca2  4288              CMP      r0,r1
001ca4  db08              BLT      |L5.7352|
;;;2460   	(cnt_del_rel<=(T_DEL_REL_CURR_WRK*10)) )
001ca6  f9b50000          LDRSH    r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
001caa  f9b41000          LDRSH    r1,[r4,#0]  ; cnt_del_rel
001cae  eb000080          ADD      r0,r0,r0,LSL #2
001cb2  ebb10f40          CMP      r1,r0,LSL #1
001cb6  dc00              BGT      |L5.7354|
                  |L5.7352|
;;;2461   	{
;;;2462   	bCURRENT_STAB=0;
001cb8  7017              STRB     r7,[r2,#0]
                  |L5.7354|
;;;2463   	}
;;;2464   
;;;2465   /*
;;;2466   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
;;;2467   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
;;;2468   //SET_REG(LPC_GPIO0->FIOSET,1,5,1);
;;;2469   
;;;2470   if(RELE_LOG_CURR==0)
;;;2471   	{
;;;2472   	SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2473   	}
;;;2474   else if(RELE_LOG_CURR==1)
;;;2475   	{
;;;2476   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2477   	else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2478   	}
;;;2479   else
;;;2480   	{
;;;2481   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2482   	else SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2483   	}*/
;;;2484   
;;;2485   }
001cba  e8bd9ff0          POP      {r4-r12,pc}
;;;2486   
                          ENDP

                  rele_hndl PROC
;;;2510   //-----------------------------------------------
;;;2511   void rele_hndl(void)
001cbe  e92d4ff0          PUSH     {r4-r11,lr}
;;;2512   {
;;;2513   //Реле1
;;;2514   if(RELE_FUNC[0]==0)rele_stat[0]=rsOFF; 		//Выключено
;;;2515   else if(RELE_FUNC[0]==1)					//Реверс
;;;2516   	{
;;;2517   	if(work_stat==wsCAP) 
001cc2  4867              LDR      r0,|L5.7776|
;;;2518   		{
;;;2519   		if(bRAZR) rele_stat[0]=rsOFF;
;;;2520   		else 	rele_stat[0]=rsON;
;;;2521   		} 
;;;2522   	else 
;;;2523   		{
;;;2524   		if(REV_STAT==rsREW)	rele_stat[0]=rsOFF;
;;;2525   		else 			rele_stat[0]=rsON;
;;;2526   		}
;;;2527   	}
;;;2528   else if(RELE_FUNC[0]==2)					//Токоограничение
;;;2529   	{
;;;2530   	if(RELE_LOG_CURR==0)
001cc4  4b7c              LDR      r3,|L5.7864|
001cc6  f8dfe1e0          LDR      lr,|L5.7848|
001cca  f890c000          LDRB     r12,[r0,#0]           ;2517
001cce  4877              LDR      r0,|L5.7852|
001cd0  f9b36000          LDRSH    r6,[r3,#0]
;;;2531   		{
;;;2532   		if(bCURRENT_STAB==0)	rele_stat[0]=rsON;
;;;2533   		else 				rele_stat[0]=rsOFF;
;;;2534   		}
;;;2535   	else if(RELE_LOG_CURR==1)
;;;2536   		{
;;;2537   		if(bCURRENT_STAB==0)	rele_stat[0]=rsOFF;
;;;2538   		else 				rele_stat[0]=rsON;
;;;2539   		}
;;;2540   	}									
;;;2541   else if(RELE_FUNC[0]==3)					//Напряжение в норме
;;;2542   	{
;;;2543   	if(RELE_LOG_VOLT==0)
001cd4  4b79              LDR      r3,|L5.7868|
001cd6  7800              LDRB     r0,[r0,#0]            ;2519
001cd8  f9be4000          LDRSH    r4,[lr,#0]            ;2514  ; RELE_FUNC
001cdc  4682              MOV      r10,r0                ;2519
001cde  4874              LDR      r0,|L5.7856|
001ce0  2100              MOVS     r1,#0                 ;2514
001ce2  f9b33000          LDRSH    r3,[r3,#0]
001ce6  7800              LDRB     r0,[r0,#0]            ;2524
001ce8  4683              MOV      r11,r0                ;2524
001cea  486e              LDR      r0,|L5.7844|
001cec  7805              LDRB     r5,[r0,#0]            ;2532
;;;2544   		{
;;;2545   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsON;
001cee  4871              LDR      r0,|L5.7860|
001cf0  7b87              LDRB     r7,[r0,#0xe]
;;;2546   		else 				rele_stat[0]=rsOFF;
;;;2547   		}
;;;2548   	else if(RELE_LOG_VOLT==1)
;;;2549   		{
;;;2550   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsOFF;
;;;2551   		else 				rele_stat[0]=rsON;
;;;2552   		}
;;;2553   	}
;;;2554   else if(RELE_FUNC[0]==4)					//Напряжение не выше
;;;2555   	{
;;;2556   	if(RELE_LOG_VOLT==0)
;;;2557   		{
;;;2558   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsON;
001cf2  f890800d          LDRB     r8,[r0,#0xd]
;;;2559   		else 				rele_stat[0]=rsOFF;
;;;2560   		}
;;;2561   	else if(RELE_LOG_VOLT==1)
;;;2562   		{
;;;2563   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsOFF;
;;;2564   		else 				rele_stat[0]=rsON;
;;;2565   		}
;;;2566   	}
;;;2567   else if(RELE_FUNC[0]==5)					//Напряжение не ниже
;;;2568   	{
;;;2569   	if(RELE_LOG_VOLT==0)
;;;2570   		{
;;;2571   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsON;
001cf6  7b00              LDRB     r0,[r0,#0xc]
001cf8  4681              MOV      r9,r0
001cfa  486e              LDR      r0,|L5.7860|
001cfc  302e              ADDS     r0,r0,#0x2e           ;2514
001cfe  2201              MOVS     r2,#1                 ;2514
001d00  b314              CBZ      r4,|L5.7496|
001d02  2c01              CMP      r4,#1                 ;2515
001d04  d008              BEQ      |L5.7448|
001d06  2c02              CMP      r4,#2                 ;2528
001d08  d011              BEQ      |L5.7470|
001d0a  2c03              CMP      r4,#3                 ;2541
001d0c  d017              BEQ      |L5.7486|
001d0e  2c04              CMP      r4,#4                 ;2554
001d10  d01d              BEQ      |L5.7502|
001d12  2c05              CMP      r4,#5                 ;2567
001d14  d027              BEQ      |L5.7526|
001d16  e032              B        |L5.7550|
                  |L5.7448|
001d18  f1bc0f03          CMP      r12,#3                ;2517
001d1c  d003              BEQ      |L5.7462|
001d1e  f1bb0f00          CMP      r11,#0                ;2524
001d22  d040              BEQ      |L5.7590|
001d24  e02a              B        |L5.7548|
                  |L5.7462|
001d26  f1ba0f00          CMP      r10,#0                ;2519
001d2a  d13c              BNE      |L5.7590|
001d2c  e026              B        |L5.7548|
                  |L5.7470|
001d2e  b116              CBZ      r6,|L5.7478|
001d30  2e01              CMP      r6,#1                 ;2535
001d32  d002              BEQ      |L5.7482|
001d34  e023              B        |L5.7550|
                  |L5.7478|
001d36  b30d              CBZ      r5,|L5.7548|
001d38  e035              B        |L5.7590|
                  |L5.7482|
001d3a  b12d              CBZ      r5,|L5.7496|
001d3c  e01e              B        |L5.7548|
                  |L5.7486|
001d3e  b113              CBZ      r3,|L5.7494|
001d40  2b01              CMP      r3,#1                 ;2548
001d42  d002              BEQ      |L5.7498|
001d44  e01b              B        |L5.7550|
                  |L5.7494|
001d46  b1cf              CBZ      r7,|L5.7548|
                  |L5.7496|
001d48  e02d              B        |L5.7590|
                  |L5.7498|
001d4a  b367              CBZ      r7,|L5.7590|
001d4c  e016              B        |L5.7548|
                  |L5.7502|
001d4e  b113              CBZ      r3,|L5.7510|
001d50  2b01              CMP      r3,#1                 ;2561
001d52  d004              BEQ      |L5.7518|
001d54  e013              B        |L5.7550|
                  |L5.7510|
001d56  f1b80f00          CMP      r8,#0                 ;2558
001d5a  d00f              BEQ      |L5.7548|
001d5c  e023              B        |L5.7590|
                  |L5.7518|
001d5e  f1b80f00          CMP      r8,#0                 ;2563
001d62  d020              BEQ      |L5.7590|
001d64  e00a              B        |L5.7548|
                  |L5.7526|
001d66  b113              CBZ      r3,|L5.7534|
;;;2572   		else 				rele_stat[0]=rsOFF;
;;;2573   		}
;;;2574   	else if(RELE_LOG_VOLT==1)
001d68  2b01              CMP      r3,#1
001d6a  d004              BEQ      |L5.7542|
001d6c  e007              B        |L5.7550|
                  |L5.7534|
001d6e  f1b90f00          CMP      r9,#0                 ;2571
001d72  d003              BEQ      |L5.7548|
001d74  e017              B        |L5.7590|
                  |L5.7542|
;;;2575   		{
;;;2576   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsOFF;
001d76  f1b90f00          CMP      r9,#0
001d7a  d014              BEQ      |L5.7590|
                  |L5.7548|
;;;2577   		else 				rele_stat[0]=rsON;
001d7c  7002              STRB     r2,[r0,#0]
                  |L5.7550|
;;;2578   		}
;;;2579   	}
;;;2580   											
;;;2581   //Реле2
;;;2582   if(RELE_FUNC[1]==0)rele_stat[1]=rsOFF; 		//Выключено
001d7e  f9be4002          LDRSH    r4,[lr,#2]  ; RELE_FUNC
001d82  b194              CBZ      r4,|L5.7594|
;;;2583   else if(RELE_FUNC[1]==1)					//Реверс
001d84  2c01              CMP      r4,#1
001d86  d013              BEQ      |L5.7600|
;;;2584   	{
;;;2585   	if(work_stat==wsCAP) 
;;;2586   		{
;;;2587   		if(bRAZR) 		rele_stat[1]=rsOFF;
;;;2588   		else 			rele_stat[1]=rsON;
;;;2589   		} 
;;;2590   	else 
;;;2591   		{
;;;2592   		if(REV_STAT==rsREW)	rele_stat[1]=rsOFF;
;;;2593   		else 			rele_stat[1]=rsON;
;;;2594   		}
;;;2595   	}
;;;2596   else if(RELE_FUNC[1]==2)					//Токоограничение
001d88  2c02              CMP      r4,#2
001d8a  d01d              BEQ      |L5.7624|
;;;2597   	{
;;;2598   	if(RELE_LOG_CURR==0)
;;;2599   		{
;;;2600   		if(bCURRENT_STAB==0)rele_stat[1]=rsON;
;;;2601   		else 			rele_stat[1]=rsOFF;
;;;2602   		}
;;;2603   	else if(RELE_LOG_CURR==1)
;;;2604   		{
;;;2605   		if(bCURRENT_STAB==0)rele_stat[1]=rsOFF;
;;;2606   		else 			rele_stat[1]=rsON;
;;;2607   		}
;;;2608   	}									
;;;2609   else if(RELE_FUNC[1]==3)					//Напряжение в норме
001d8c  2c03              CMP      r4,#3
001d8e  d024              BEQ      |L5.7642|
;;;2610   	{
;;;2611   	if(RELE_LOG_VOLT==0)
;;;2612   		{
;;;2613   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsON;
;;;2614   		else 				rele_stat[1]=rsOFF;
;;;2615   		}
;;;2616   	else if(RELE_LOG_VOLT==1)
;;;2617   		{
;;;2618   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsOFF;
;;;2619   		else 				rele_stat[1]=rsON;
;;;2620   		}
;;;2621   	}
;;;2622   else if(RELE_FUNC[1]==4)					//Напряжение не выше
001d90  2c04              CMP      r4,#4
001d92  d02b              BEQ      |L5.7660|
;;;2623   	{
;;;2624   	if(RELE_LOG_VOLT==0)
;;;2625   		{
;;;2626   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsON;
;;;2627   		else 				rele_stat[1]=rsOFF;
;;;2628   		}
;;;2629   	else if(RELE_LOG_VOLT==1)
;;;2630   		{
;;;2631   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsOFF;
;;;2632   		else 				rele_stat[1]=rsON;
;;;2633   		}
;;;2634   	}
;;;2635   else if(RELE_FUNC[1]==5)					//Напряжение не ниже
001d94  2c05              CMP      r4,#5
001d96  d109              BNE      |L5.7596|
;;;2636   	{
;;;2637   	if(RELE_LOG_VOLT==0)
001d98  b37b              CBZ      r3,|L5.7674|
;;;2638   		{
;;;2639   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsON;
;;;2640   		else 				rele_stat[1]=rsOFF;
;;;2641   		}
;;;2642   	else if(RELE_LOG_VOLT==1)
001d9a  2b01              CMP      r3,#1
001d9c  d106              BNE      |L5.7596|
;;;2643   		{
;;;2644   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsOFF;
001d9e  f1b90f00          CMP      r9,#0
001da2  d10b              BNE      |L5.7612|
001da4  e001              B        |L5.7594|
                  |L5.7590|
001da6  7001              STRB     r1,[r0,#0]            ;2576
001da8  e7e9              B        |L5.7550|
                  |L5.7594|
001daa  7041              STRB     r1,[r0,#1]            ;2582
                  |L5.7596|
;;;2645   		else 				rele_stat[1]=rsON;
;;;2646   		}
;;;2647   	}
;;;2648   	
;;;2649   
;;;2650   //rele_stat[0]=rsON;
;;;2651   //rele_stat[1]=rsON;
;;;2652   										
;;;2653   }
001dac  e8bd8ff0          POP      {r4-r11,pc}
                  |L5.7600|
001db0  f1bc0f03          CMP      r12,#3                ;2585
001db4  d004              BEQ      |L5.7616|
001db6  f1bb0f00          CMP      r11,#0                ;2592
001dba  d0f6              BEQ      |L5.7594|
                  |L5.7612|
001dbc  7042              STRB     r2,[r0,#1]            ;2593
001dbe  e7f5              B        |L5.7596|
                  |L5.7616|
001dc0  f1ba0f00          CMP      r10,#0                ;2587
001dc4  d1f1              BNE      |L5.7594|
001dc6  e7f9              B        |L5.7612|
                  |L5.7624|
001dc8  b126              CBZ      r6,|L5.7636|
001dca  2e01              CMP      r6,#1                 ;2603
001dcc  d1ee              BNE      |L5.7596|
001dce  2d00              CMP      r5,#0                 ;2605
001dd0  d1f4              BNE      |L5.7612|
001dd2  e7ea              B        |L5.7594|
                  |L5.7636|
001dd4  2d00              CMP      r5,#0                 ;2600
001dd6  d0f1              BEQ      |L5.7612|
001dd8  e7e7              B        |L5.7594|
                  |L5.7642|
001dda  b123              CBZ      r3,|L5.7654|
001ddc  2b01              CMP      r3,#1                 ;2616
001dde  d1e5              BNE      |L5.7596|
001de0  2f00              CMP      r7,#0                 ;2618
001de2  d1eb              BNE      |L5.7612|
001de4  e7e1              B        |L5.7594|
                  |L5.7654|
001de6  2f00              CMP      r7,#0                 ;2613
001de8  d0e8              BEQ      |L5.7612|
001dea  e7de              B        |L5.7594|
                  |L5.7660|
001dec  b133              CBZ      r3,|L5.7676|
001dee  2b01              CMP      r3,#1                 ;2629
001df0  d1dc              BNE      |L5.7596|
001df2  f1b80f00          CMP      r8,#0                 ;2631
001df6  d1e1              BNE      |L5.7612|
001df8  e7d7              B        |L5.7594|
                  |L5.7674|
001dfa  e003              B        |L5.7684|
                  |L5.7676|
001dfc  f1b80f00          CMP      r8,#0                 ;2626
001e00  d0dc              BEQ      |L5.7612|
001e02  e7d2              B        |L5.7594|
                  |L5.7684|
001e04  f1b90f00          CMP      r9,#0                 ;2639
001e08  d0d8              BEQ      |L5.7612|
001e0a  e7ce              B        |L5.7594|
;;;2654    
                          ENDP

                  rele_drv PROC
;;;2655   //-----------------------------------------------
;;;2656   void rele_drv(void)
001e0c  492c              LDR      r1,|L5.7872|
;;;2657   {
;;;2658   #ifdef EXT_BOARD_V_1
;;;2659   SET_REG(LPC_PINCON->PINSEL0,0,4*2,2);
;;;2660   SET_REG(LPC_GPIO0->FIODIR,1,4,1);
;;;2661   
;;;2662   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
;;;2663   else SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2664   #endif
;;;2665   
;;;2666   #ifdef EXT_BOARD_V_2
;;;2667   SET_REG(LPC_PINCON->PINSEL0,0,7*2,2);
001e0e  6808              LDR      r0,[r1,#0]
001e10  f4204040          BIC      r0,r0,#0xc000
001e14  6008              STR      r0,[r1,#0]
;;;2668   SET_REG(LPC_GPIO0->FIODIR,1,7,1);
001e16  482b              LDR      r0,|L5.7876|
001e18  6802              LDR      r2,[r0,#0]
001e1a  f0420280          ORR      r2,r2,#0x80
001e1e  6002              STR      r2,[r0,#0]
;;;2669   
;;;2670   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,7,1);
001e20  4a24              LDR      r2,|L5.7860|
001e22  322e              ADDS     r2,r2,#0x2e
001e24  7813              LDRB     r3,[r2,#0]  ; rele_stat
001e26  2b01              CMP      r3,#1
;;;2671   else SET_REG(LPC_GPIO0->FIOPIN,1,7,1);
001e28  6943              LDR      r3,[r0,#0x14]
001e2a  d012              BEQ      |L5.7762|
001e2c  f0430380          ORR      r3,r3,#0x80
                  |L5.7728|
001e30  6143              STR      r3,[r0,#0x14]
;;;2672   #endif
;;;2673   
;;;2674   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
001e32  680b              LDR      r3,[r1,#0]
001e34  f4236340          BIC      r3,r3,#0xc00
001e38  600b              STR      r3,[r1,#0]
;;;2675   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
001e3a  6801              LDR      r1,[r0,#0]
001e3c  f0410120          ORR      r1,r1,#0x20
001e40  6001              STR      r1,[r0,#0]
;;;2676   
;;;2677   if(rele_stat[1]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
001e42  7851              LDRB     r1,[r2,#1]  ; rele_stat
001e44  2901              CMP      r1,#1
;;;2678   else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
001e46  6941              LDR      r1,[r0,#0x14]
001e48  d006              BEQ      |L5.7768|
001e4a  f0410120          ORR      r1,r1,#0x20
                  |L5.7758|
001e4e  6141              STR      r1,[r0,#0x14]         ;2677
;;;2679   
;;;2680   
;;;2681   }
001e50  4770              BX       lr
                  |L5.7762|
001e52  f0230380          BIC      r3,r3,#0x80           ;2670
001e56  e7eb              B        |L5.7728|
                  |L5.7768|
001e58  f0210120          BIC      r1,r1,#0x20           ;2677
001e5c  e7f7              B        |L5.7758|
;;;2682   
                          ENDP

001e5e  0000              DCW      0x0000
                  |L5.7776|
                          DCD      work_stat
                  |L5.7780|
                          DCD      load_U
                  |L5.7784|
                          DCD      delta_U_abs
                  |L5.7788|
                          DCD      load_I
                  |L5.7792|
                          DCD      delta_I_abs
                  |L5.7796|
                          DCD      delta_U_rel
                  |L5.7800|
                          DCD      delta_I_rel
                  |L5.7804|
                          DCD      cnt_del_rel
                  |L5.7808|
                          DCD      DELT_REL_CURR_U
                  |L5.7812|
                          DCD      DELT_REL_CURR_I
                  |L5.7816|
                          DCD      U_up
                  |L5.7820|
                          DCD      I_maxp
                  |L5.7824|
                          DCD      U_maxg
                  |L5.7828|
                          DCD      I_ug_temp
                  |L5.7832|
                          DCD      T_DEL_REL_CURR_WRK
                  |L5.7836|
                          DCD      time_proc
                  |L5.7840|
                          DCD      T_DEL_REL_CURR_START
                  |L5.7844|
                          DCD      bCURRENT_STAB
                  |L5.7848|
                          DCD      RELE_FUNC
                  |L5.7852|
                          DCD      bRAZR
                  |L5.7856|
                          DCD      REV_STAT
                  |L5.7860|
                          DCD      ||area_number.25||
                  |L5.7864|
                          DCD      RELE_LOG_CURR
                  |L5.7868|
                          DCD      RELE_LOG_VOLT
                  |L5.7872|
                          DCD      0x4002c000
                  |L5.7876|
                          DCD      0x2009c000

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  adc_drv6 PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000004  4c77              LDR      r4,|L6.484|
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
;;;227    }
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  f44f7296          MOV      r2,#0x12c
000034  80a8              STRH     r0,[r5,#4]
000036  f1a40130          SUB      r1,r4,#0x30
00003a  4290              CMP      r0,r2
00003c  da01              BGE      |L6.66|
00003e  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000040  e00a              B        |L6.88|
                  |L6.66|
000042  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
000046  4290              CMP      r0,r2
000048  da01              BGE      |L6.78|
00004a  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00004c  e004              B        |L6.88|
                  |L6.78|
00004e  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
000052  4290              CMP      r0,r2
000054  da01              BGE      |L6.90|
000056  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L6.88|
000058  8348              STRH     r0,[r1,#0x1a]
                  |L6.90|
00005a  784e              LDRB     r6,[r1,#1]  ; adc_ch_net
00005c  2000              MOVS     r0,#0
00005e  b3f6              CBZ      r6,|L6.222|
000060  790c              LDRB     r4,[r1,#4]  ; adc_window_flag
000062  4a61              LDR      r2,|L6.488|
000064  b18c              CBZ      r4,|L6.138|
000066  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
00006a  6815              LDR      r5,[r2,#0]  ; main_power_buffer
00006c  eb0505a3          ADD      r5,r5,r3,ASR #2
000070  6015              STR      r5,[r2,#0]  ; main_power_buffer
000072  6855              LDR      r5,[r2,#4]  ; main_power_buffer
000074  eb0505a3          ADD      r5,r5,r3,ASR #2
000078  6055              STR      r5,[r2,#4]  ; main_power_buffer
00007a  6895              LDR      r5,[r2,#8]  ; main_power_buffer
00007c  eb0505a3          ADD      r5,r5,r3,ASR #2
000080  6095              STR      r5,[r2,#8]  ; main_power_buffer
000082  68d5              LDR      r5,[r2,#0xc]  ; main_power_buffer
000084  eb0503a3          ADD      r3,r5,r3,ASR #2
000088  60d3              STR      r3,[r2,#0xc]  ; main_power_buffer
                  |L6.138|
00008a  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
00008e  2b64              CMP      r3,#0x64
000090  da0e              BGE      |L6.176|
000092  8bcb              LDRH     r3,[r1,#0x1e]  ; adc_zero_cnt
000094  f44f65fa          MOV      r5,#0x7d0
000098  1c5b              ADDS     r3,r3,#1
00009a  b21b              SXTH     r3,r3
00009c  83cb              STRH     r3,[r1,#0x1e]
00009e  42ab              CMP      r3,r5
0000a0  db08              BLT      |L6.180|
0000a2  83cd              STRH     r5,[r1,#0x1e]
0000a4  6010              STR      r0,[r2,#0]  ; main_power_buffer
0000a6  6050              STR      r0,[r2,#4]  ; main_power_buffer
0000a8  6090              STR      r0,[r2,#8]  ; main_power_buffer
0000aa  60d0              STR      r0,[r2,#0xc]  ; main_power_buffer
0000ac  8308              STRH     r0,[r1,#0x18]
0000ae  e053              B        |L6.344|
                  |L6.176|
0000b0  83c8              STRH     r0,[r1,#0x1e]
0000b2  e051              B        |L6.344|
                  |L6.180|
0000b4  2b05              CMP      r3,#5
0000b6  d14f              BNE      |L6.344|
0000b8  b1a4              CBZ      r4,|L6.228|
0000ba  8b8b              LDRH     r3,[r1,#0x1c]  ; adc_gorb_cnt
0000bc  1c5b              ADDS     r3,r3,#1
0000be  b21b              SXTH     r3,r3
0000c0  838b              STRH     r3,[r1,#0x1c]
0000c2  f5b37f00          CMP      r3,#0x200
0000c6  db00              BLT      |L6.202|
0000c8  8388              STRH     r0,[r1,#0x1c]
                  |L6.202|
0000ca  f9b1301c          LDRSH    r3,[r1,#0x1c]  ; adc_gorb_cnt
0000ce  065d              LSLS     r5,r3,#25
0000d0  d108              BNE      |L6.228|
0000d2  11db              ASRS     r3,r3,#7
0000d4  f8525023          LDR      r5,[r2,r3,LSL #2]
0000d8  122d              ASRS     r5,r5,#8
0000da  830d              STRH     r5,[r1,#0x18]
0000dc  e000              B        |L6.224|
                  |L6.222|
0000de  e00f              B        |L6.256|
                  |L6.224|
0000e0  f8420023          STR      r0,[r2,r3,LSL #2]
                  |L6.228|
0000e4  f9b12020          LDRSH    r2,[r1,#0x20]  ; adc_window_cnt
0000e8  2a96              CMP      r2,#0x96
0000ea  dd01              BLE      |L6.240|
0000ec  b104              CBZ      r4,|L6.240|
0000ee  7108              STRB     r0,[r1,#4]
                  |L6.240|
0000f0  3a1f              SUBS     r2,r2,#0x1f
0000f2  2a27              CMP      r2,#0x27
0000f4  d230              BCS      |L6.344|
0000f6  790a              LDRB     r2,[r1,#4]  ; adc_window_flag
0000f8  bb72              CBNZ     r2,|L6.344|
0000fa  2201              MOVS     r2,#1
0000fc  710a              STRB     r2,[r1,#4]
0000fe  e02b              B        |L6.344|
                  |L6.256|
000100  4f3a              LDR      r7,|L6.492|
000102  788a              LDRB     r2,[r1,#2]  ; adc_ch
000104  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
000108  eb0714c2          ADD      r4,r7,r2,LSL #7
00010c  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
000110  f844302c          STR      r3,[r4,r12,LSL #2]
000114  ea5f738c          LSLS     r3,r12,#30
000118  d110              BNE      |L6.316|
00011a  2400              MOVS     r4,#0
00011c  4623              MOV      r3,r4
00011e  eb0715c2          ADD      r5,r7,r2,LSL #7
000122  bf00              NOP      
                  |L6.292|
000124  f8557023          LDR      r7,[r5,r3,LSL #2]
000128  1c5b              ADDS     r3,r3,#1
00012a  b2db              UXTB     r3,r3
00012c  443c              ADD      r4,r4,r7
00012e  2b10              CMP      r3,#0x10
000130  d3f8              BCC      |L6.292|
000132  1123              ASRS     r3,r4,#4
000134  4c2c              LDR      r4,|L6.488|
000136  3c40              SUBS     r4,r4,#0x40
000138  f8243012          STRH     r3,[r4,r2,LSL #1]
                  |L6.316|
00013c  1c52              ADDS     r2,r2,#1
00013e  b2d2              UXTB     r2,r2
000140  708a              STRB     r2,[r1,#2]
000142  2a10              CMP      r2,#0x10
000144  d308              BCC      |L6.344|
000146  f10c0c01          ADD      r12,r12,#1
00014a  f00c02ff          AND      r2,r12,#0xff
00014e  7088              STRB     r0,[r1,#2]
000150  70ca              STRB     r2,[r1,#3]
000152  2a10              CMP      r2,#0x10
000154  d300              BCC      |L6.344|
000156  70c8              STRB     r0,[r1,#3]
                  |L6.344|
000158  7008              STRB     r0,[r1,#0]
00015a  1c76              ADDS     r6,r6,#1
00015c  f0160001          ANDS     r0,r6,#1
000160  4a23              LDR      r2,|L6.496|
000162  7048              STRB     r0,[r1,#1]
000164  d005              BEQ      |L6.370|
000166  6810              LDR      r0,[r2,#0]
000168  f02000ff          BIC      r0,r0,#0xff
00016c  1d00              ADDS     r0,r0,#4
00016e  6010              STR      r0,[r2,#0]
000170  e032              B        |L6.472|
                  |L6.370|
000172  7889              LDRB     r1,[r1,#2]  ; adc_ch
000174  0708              LSLS     r0,r1,#28
000176  2800              CMP      r0,#0
000178  6810              LDR      r0,[r2,#0]
00017a  f02000ff          BIC      r0,r0,#0xff
00017e  db01              BLT      |L6.388|
000180  1c40              ADDS     r0,r0,#1
000182  e000              B        |L6.390|
                  |L6.388|
000184  1c80              ADDS     r0,r0,#2
                  |L6.390|
000186  6010              STR      r0,[r2,#0]
000188  481a              LDR      r0,|L6.500|
00018a  6803              LDR      r3,[r0,#0]
00018c  f0435380          ORR      r3,r3,#0x10000000
000190  6003              STR      r3,[r0,#0]
000192  6a03              LDR      r3,[r0,#0x20]
000194  f0434380          ORR      r3,r3,#0x40000000
000198  6203              STR      r3,[r0,#0x20]
00019a  6e03              LDR      r3,[r0,#0x60]
00019c  f0436380          ORR      r3,r3,#0x4000000
0001a0  6603              STR      r3,[r0,#0x60]
0001a2  07cb              LSLS     r3,r1,#31
0001a4  6943              LDR      r3,[r0,#0x14]
0001a6  d008              BEQ      |L6.442|
0001a8  f0435380          ORR      r3,r3,#0x10000000
                  |L6.428|
0001ac  6143              STR      r3,[r0,#0x14]
0001ae  078b              LSLS     r3,r1,#30
0001b0  6b43              LDR      r3,[r0,#0x34]
0001b2  d405              BMI      |L6.448|
0001b4  f0234380          BIC      r3,r3,#0x40000000
0001b8  e004              B        |L6.452|
                  |L6.442|
0001ba  f0235380          BIC      r3,r3,#0x10000000
0001be  e7f5              B        |L6.428|
                  |L6.448|
0001c0  f0434380          ORR      r3,r3,#0x40000000
                  |L6.452|
0001c4  6343              STR      r3,[r0,#0x34]
0001c6  0749              LSLS     r1,r1,#29
0001c8  6f41              LDR      r1,[r0,#0x74]
0001ca  d402              BMI      |L6.466|
0001cc  f0216180          BIC      r1,r1,#0x4000000
0001d0  e001              B        |L6.470|
                  |L6.466|
0001d2  f0416180          ORR      r1,r1,#0x4000000
                  |L6.470|
0001d6  6741              STR      r1,[r0,#0x74]
                  |L6.472|
0001d8  6810              LDR      r0,[r2,#0]
0001da  f0407080          ORR      r0,r0,#0x1000000
0001de  6010              STR      r0,[r2,#0]
0001e0  e8bd81f0          POP      {r4-r8,pc}
;;;228    
                          ENDP

                  |L6.484|
                          DCD      ||area_number.25||+0x30
                  |L6.488|
                          DCD      ||.bss||+0x840
                  |L6.492|
                          DCD      ||.bss||
                  |L6.496|
                          DCD      0x40034000
                  |L6.500|
                          DCD      0x2009c000

                          AREA ||area_number.7||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.7||, ||.text||
                  zar_superviser_start PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  4903              LDR      r1,|L7.16|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  4a04              LDR      r2,|L7.20|
000004  2001              MOVS     r0,#1
000006  7008              STRB     r0,[r1,#0]
000008  7010              STRB     r0,[r2,#0]
00000a  7048              STRB     r0,[r1,#1]
00000c  7050              STRB     r0,[r2,#1]
00000e  4770              BX       lr
;;;227    }
;;;228    
                          ENDP

                  |L7.16|
                          DCD      sign_U
                  |L7.20|
                          DCD      sign_I

                          AREA ||area_number.8||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.8||, ||.text||
                  revers_hndl PROC
;;;223    //-----------------------------------------------
;;;224    void kb_init(void)
000000  480e              LDR      r0,|L8.60|
;;;225    {
;;;226    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  6801              LDR      r1,[r0,#0]
000004  f4217140          BIC      r1,r1,#0x300
000008  6001              STR      r1,[r0,#0]
00000a  480d              LDR      r0,|L8.64|
00000c  6801              LDR      r1,[r0,#0]
00000e  f0410110          ORR      r1,r1,#0x10
000012  6001              STR      r1,[r0,#0]
;;;227    }
000014  490b              LDR      r1,|L8.68|
000016  7809              LDRB     r1,[r1,#0]  ; work_stat
000018  2903              CMP      r1,#3
00001a  d003              BEQ      |L8.36|
00001c  490a              LDR      r1,|L8.72|
00001e  7809              LDRB     r1,[r1,#0]  ; REV_STAT
000020  b119              CBZ      r1,|L8.42|
000022  e007              B        |L8.52|
                  |L8.36|
000024  4909              LDR      r1,|L8.76|
000026  7809              LDRB     r1,[r1,#0]  ; bRAZR
000028  b121              CBZ      r1,|L8.52|
                  |L8.42|
00002a  6941              LDR      r1,[r0,#0x14]
00002c  f0210110          BIC      r1,r1,#0x10
                  |L8.48|
000030  6141              STR      r1,[r0,#0x14]
000032  4770              BX       lr
                  |L8.52|
000034  6941              LDR      r1,[r0,#0x14]
000036  f0410110          ORR      r1,r1,#0x10
00003a  e7f9              B        |L8.48|
;;;228    
                          ENDP

                  |L8.60|
                          DCD      0x4002c000
                  |L8.64|
                          DCD      0x2009c000
                  |L8.68|
                          DCD      work_stat
                  |L8.72|
                          DCD      REV_STAT
                  |L8.76|
                          DCD      bRAZR

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        2048
                  adc_buff_
                          %        32
                  adc_buff__
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.11||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.11||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.12||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.12||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.19||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.19||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.21||, DATA, ALIGN=1

                          EXPORTAS ||area_number.21||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.22||, DATA, ALIGN=0

                          EXPORTAS ||area_number.22||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.23||, DATA, ALIGN=1

                          EXPORTAS ||area_number.23||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  vent_stat
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  adc_self_ch_cnt
000000  00                DCB      0x00
                  adc_ch_net
000001  00                DCB      0x00
                  adc_ch
000002  00                DCB      0x00
                  adc_ch_cnt
000003  00                DCB      0x00
                  adc_window_flag
000004  00                DCB      0x00
                  sh_cnt0
000005  00                DCB      0x00
                  b1Hz_sh
000006  00                DCB      0x00
                  sh_cnt1
000007  00                DCB      0x00
                  bFAST_REG
000008  00                DCB      0x00
                  bU_VALID
000009  00                DCB      0x00
                  bU_VALID_VALID
00000a  00                DCB      0x00
                  bPRECESSION_REG
00000b  00                DCB      0x00
                  bVOLT_IS_NOT_DOWN
00000c  00                DCB      0x00
                  bVOLT_IS_NOT_UP
00000d  00                DCB      0x00
                  bVOLT_IS_NORM
00000e  00                DCB      0x00
                  net_in_drv_cnt_B
00000f  00                DCB      0x00
                  net_in_drv_cnt_C
000010  00                DCB      0x00
                  net_in_drv_stat_B
000011  00                DCB      0x00
                  net_in_drv_stat_C
000012  0000              DCB      0x00,0x00
                  cntrl_stat_U
000014  03e8              DCW      0x03e8
                  cntrl_stat_I
000016  03e8              DCW      0x03e8
                  net_buff_
000018  0000              DCB      0x00,0x00
                  adc_result
00001a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00001c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00001e  0000              DCB      0x00,0x00
                  adc_window_cnt
000020  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000022  0000              DCB      0x00,0x00
                  samokalibr_cnt
000024  0000              DCB      0x00,0x00
                  main_kb_cnt
000026  0000              DCB      0x00,0x00
                  cnt_volt_contr
000028  0000              DCB      0x00,0x00
                  cnt_rel_volt_umin
00002a  0000              DCB      0x00,0x00
                  cnt_rel_volt_umax
00002c  0000              DCB      0x00,0x00
                  rele_stat
00002e  0000              DCB      0x00,0x00
                  adc_self_ch_buff
                          DCDU     0x00000000
000034  0000              DCB      0x00,0x00
                  adc_self_ch_disp
000036  0000              DCB      0x00,0x00
                          DCDU     0x00000000

                          AREA ||area_number.26||, DATA, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.data||
                  cntrl_stat_old
000000  0258              DCW      0x0258

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=0

                          EXPORTAS ||area_number.29||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=0

                          EXPORTAS ||area_number.35||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.36||, DATA, ALIGN=2

                          EXPORTAS ||area_number.36||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.37||, DATA, ALIGN=1

                          EXPORTAS ||area_number.37||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.38||, DATA, ALIGN=1

                          EXPORTAS ||area_number.38||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.39||, DATA, ALIGN=1

                          EXPORTAS ||area_number.39||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  plazma_sk
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  cntrl_stat_new
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=1

                          EXPORTAS ||area_number.42||, ||.data||
                  Ibmax
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  ch_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  b1Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  i
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  iiii
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=1

                          EXPORTAS ||area_number.50||, ||.data||
                  IZMAX_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.51||, DATA, ALIGN=1

                          EXPORTAS ||area_number.51||, ||.data||
                  kb_cnt_1lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.52||, DATA, ALIGN=1

                          EXPORTAS ||area_number.52||, ||.data||
                  kb_cnt_2lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.53||, DATA, ALIGN=0

                          EXPORTAS ||area_number.53||, ||.data||
                  kb_full_ver
000000  00                DCB      0x00

                          AREA ||area_number.54||, DATA, ALIGN=0

                          EXPORTAS ||area_number.54||, ||.data||
                  kb_start
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.55||, DATA, ALIGN=0

                          EXPORTAS ||area_number.55||, ||.data||
                  num_of_wrks_bps
000000  00                DCB      0x00

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=0

                          EXPORTAS ||area_number.57||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.58||, DATA, ALIGN=0

                          EXPORTAS ||area_number.58||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.59||, DATA, ALIGN=0

                          EXPORTAS ||area_number.59||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.60||, DATA, ALIGN=1

                          EXPORTAS ||area_number.60||, ||.data||
                  bps_on_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.61||, DATA, ALIGN=1

                          EXPORTAS ||area_number.61||, ||.data||
                  bps_off_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.62||, DATA, ALIGN=0

                          EXPORTAS ||area_number.62||, ||.data||
                  num_necc_up
000000  00                DCB      0x00

                          AREA ||area_number.63||, DATA, ALIGN=0

                          EXPORTAS ||area_number.63||, ||.data||
                  num_necc_down
000000  00                DCB      0x00

                          AREA ||area_number.64||, DATA, ALIGN=0

                          EXPORTAS ||area_number.64||, ||.data||
                  spc_stat
000000  00                DCB      0x00

                          AREA ||area_number.65||, DATA, ALIGN=0

                          EXPORTAS ||area_number.65||, ||.data||
                  spc_bat
000000  00                DCB      0x00

                          AREA ||area_number.66||, DATA, ALIGN=0

                          EXPORTAS ||area_number.66||, ||.data||
                  spc_phase
000000  00                DCB      0x00

                          AREA ||area_number.67||, DATA, ALIGN=1

                          EXPORTAS ||area_number.67||, ||.data||
                  vz_cnt_s
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.68||, DATA, ALIGN=1

                          EXPORTAS ||area_number.68||, ||.data||
                  vz_cnt_s_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.69||, DATA, ALIGN=1

                          EXPORTAS ||area_number.69||, ||.data||
                  vz_cnt_h
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.70||, DATA, ALIGN=1

                          EXPORTAS ||area_number.70||, ||.data||
                  vz_cnt_h_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.71||, DATA, ALIGN=0

                          EXPORTAS ||area_number.71||, ||.data||
                  bAVZ
000000  00                DCB      0x00

                          AREA ||area_number.72||, DATA, ALIGN=0

                          EXPORTAS ||area_number.72||, ||.data||
                  ke_start_stat
000000  00                DCB      0x00

                          AREA ||area_number.73||, DATA, ALIGN=1

                          EXPORTAS ||area_number.73||, ||.data||
                  cnt_end_ke
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.74||, DATA, ALIGN=2

                          EXPORTAS ||area_number.74||, ||.data||
                  ke_date
                          %        8

                          AREA ||area_number.75||, DATA, ALIGN=1

                          EXPORTAS ||area_number.75||, ||.data||
                  __ee_vz_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.76||, DATA, ALIGN=1

                          EXPORTAS ||area_number.76||, ||.data||
                  __ee_spc_stat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.77||, DATA, ALIGN=1

                          EXPORTAS ||area_number.77||, ||.data||
                  __ee_spc_bat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.78||, DATA, ALIGN=1

                          EXPORTAS ||area_number.78||, ||.data||
                  __ee_spc_phase
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.79||, DATA, ALIGN=1

                          EXPORTAS ||area_number.79||, ||.data||
                  cntrl_stat_blok_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.80||, DATA, ALIGN=1

                          EXPORTAS ||area_number.80||, ||.data||
                  cntrl_stat_blok_cnt_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.81||, DATA, ALIGN=1

                          EXPORTAS ||area_number.81||, ||.data||
                  cntrl_stat_blok_cnt_plus
                          DCDU     0x00000000

                          AREA ||area_number.82||, DATA, ALIGN=1

                          EXPORTAS ||area_number.82||, ||.data||
                  cntrl_stat_blok_cnt_minus
                          DCDU     0x00000000

                          AREA ||area_number.83||, DATA, ALIGN=0

                          EXPORTAS ||area_number.83||, ||.data||
                  plazma_inv
                          DCDU     0x00000000

                          AREA ||area_number.84||, DATA, ALIGN=0

                          EXPORTAS ||area_number.84||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.85||, DATA, ALIGN=2

                          EXPORTAS ||area_number.85||, ||.data||
                  temp_temp_SL
                          DCD      0x00000000
