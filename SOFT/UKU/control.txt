; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  kb_init PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  4805              LDR      r0,|L1.24|
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f06f013b          MVN      r1,#0x3b
000006  8800              LDRH     r0,[r0,#0]  ; TBAT
000008  ebc01000          RSB      r0,r0,r0,LSL #4
00000c  eb010080          ADD      r0,r1,r0,LSL #2
000010  4902              LDR      r1,|L1.28|
000012  83c8              STRH     r0,[r1,#0x1e]
;;;230    }
000014  4770              BX       lr
;;;231    
                          ENDP

000016  0000              DCW      0x0000
                  |L1.24|
                          DCD      TBAT
                  |L1.28|
                          DCD      ||area_number.24||

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  4902              LDR      r1,|L2.12|
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f24060f9          MOV      r0,#0x6f9
000006  8388              STRH     r0,[r1,#0x1c]
000008  4770              BX       lr
;;;230    }
;;;231    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.24||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  samokalibr_hndl PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  b510              PUSH     {r4,lr}
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  4c1a              LDR      r4,|L3.108|
000004  8ba0              LDRH     r0,[r4,#0x1c]  ; samokalibr_cnt
000006  1c40              ADDS     r0,r0,#1
000008  b200              SXTH     r0,r0
00000a  83a0              STRH     r0,[r4,#0x1c]
00000c  f5b06fe1          CMP      r0,#0x708
000010  db02              BLT      |L3.24|
000012  2000              MOVS     r0,#0
;;;230    }
000014  83a0              STRH     r0,[r4,#0x1c]
                  |L3.22|
000016  bd10              POP      {r4,pc}
                  |L3.24|
000018  f5b06fdf          CMP      r0,#0x6f8
00001c  d911              BLS      |L3.66|
00001e  230f              MOVS     r3,#0xf
000020  2201              MOVS     r2,#1
000022  2164              MOVS     r1,#0x64
000024  20d2              MOVS     r0,#0xd2
000026  f7fffffe          BL       mess_send
00002a  230f              MOVS     r3,#0xf
00002c  2200              MOVS     r2,#0
00002e  21d8              MOVS     r1,#0xd8
000030  20d7              MOVS     r0,#0xd7
000032  f7fffffe          BL       mess_send
000036  230f              MOVS     r3,#0xf
000038  2200              MOVS     r2,#0
00003a  21d8              MOVS     r1,#0xd8
00003c  20dc              MOVS     r0,#0xdc
00003e  f7fffffe          BL       mess_send
                  |L3.66|
000042  f9b4001c          LDRSH    r0,[r4,#0x1c]  ; samokalibr_cnt
000046  f5a061e0          SUB      r1,r0,#0x700
00004a  3907              SUBS     r1,#7
00004c  d1e3              BNE      |L3.22|
00004e  4808              LDR      r0,|L3.112|
000050  4a08              LDR      r2,|L3.116|
000052  8801              LDRH     r1,[r0,#0]  ; ad7705_buff_
000054  f9b22000          LDRSH    r2,[r2,#0]  ; Kiload0
000058  4291              CMP      r1,r2
00005a  d0dc              BEQ      |L3.22|
00005c  f9b01000          LDRSH    r1,[r0,#0]  ; ad7705_buff_
000060  e8bd4010          POP      {r4,lr}
000064  2014              MOVS     r0,#0x14
000066  f7ffbffe          B.W      lc640_write_int
;;;231    
                          ENDP

00006a  0000              DCW      0x0000
                  |L3.108|
                          DCD      ||area_number.24||
                  |L3.112|
                          DCD      ad7705_buff_
                  |L3.116|
                          DCD      Kiload0

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  unet_drv PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  4afc              LDR      r2,|L4.1012|
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  b430              PUSH     {r4,r5}
000004  49fc              LDR      r1,|L4.1016|
000006  f9b2400a          LDRSH    r4,[r2,#0xa]  ; adc_buff_
00000a  f64053ac          MOV      r3,#0xdac
00000e  f9b10000          LDRSH    r0,[r1,#0]
000012  429c              CMP      r4,r3
;;;230    }
000014  dc03              BGT      |L4.30|
000016  f9b22014          LDRSH    r2,[r2,#0x14]  ; adc_buff_
00001a  429a              CMP      r2,r3
00001c  dd03              BLE      |L4.38|
                  |L4.30|
00001e  2814              CMP      r0,#0x14
000020  da04              BGE      |L4.44|
000022  1c40              ADDS     r0,r0,#1
000024  e001              B        |L4.42|
                  |L4.38|
000026  b108              CBZ      r0,|L4.44|
000028  1e40              SUBS     r0,r0,#1
                  |L4.42|
00002a  8008              STRH     r0,[r1,#0]
                  |L4.44|
00002c  2214              MOVS     r2,#0x14
00002e  bc30              POP      {r4,r5}
000030  2100              MOVS     r1,#0
000032  48f1              LDR      r0,|L4.1016|
000034  f7ffbffe          B.W      gran
;;;231    
                          ENDP

                  matemat PROC
;;;242    //-----------------------------------------------
;;;243    void samokalibr_hndl(void)
;;;244    {
;;;245    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
;;;246    
;;;247    if(samokalibr_cnt>=1785U)
;;;248    	{
;;;249    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
;;;250    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
;;;251    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000038  b5f0              PUSH     {r4-r7,lr}
00003a  48ee              LDR      r0,|L4.1012|
00003c  49ef              LDR      r1,|L4.1020|
00003e  f44f722f          MOV      r2,#0x2bc
;;;252    	} 
;;;253    
;;;254    if(samokalibr_cnt==1799U)
000042  f9b00000          LDRSH    r0,[r0,#0]  ; adc_buff_
000046  f9b11000          LDRSH    r1,[r1,#0]  ; Kuload
00004a  4bed              LDR      r3,|L4.1024|
00004c  4348              MULS     r0,r1,r0
;;;255    	{
;;;256    	if(Kiload0!=ad7705_buff_[0]) lc640_write_int(EE_KILOAD0,ad7705_buff_[0]);
00004e  fb90f0f2          SDIV     r0,r0,r2
000052  8018              STRH     r0,[r3,#0]
000054  48e7              LDR      r0,|L4.1012|
000056  f2413388          MOV      r3,#0x1388
00005a  3020              ADDS     r0,r0,#0x20
00005c  f9b00000          LDRSH    r0,[r0,#0]  ; adc_buff__
000060  4348              MULS     r0,r1,r0
000062  fb90f0f2          SDIV     r0,r0,r2
000066  49e7              LDR      r1,|L4.1028|
000068  4aea              LDR      r2,|L4.1044|
00006a  8008              STRH     r0,[r1,#0]
00006c  49e7              LDR      r1,|L4.1036|
00006e  48e6              LDR      r0,|L4.1032|
000070  f9b14000          LDRSH    r4,[r1,#0]  ; Kiload0
000074  49e6              LDR      r1,|L4.1040|
000076  8800              LDRH     r0,[r0,#0]  ; ad7705_buff_
000078  f9b11000          LDRSH    r1,[r1,#0]  ; Kiload1
00007c  1b00              SUBS     r0,r0,r4
00007e  4348              MULS     r0,r1,r0
000080  fb90f0f3          SDIV     r0,r0,r3
000084  8010              STRH     r0,[r2,#0]
000086  1b00              SUBS     r0,r0,r4
000088  4348              MULS     r0,r1,r0
00008a  fb90f0f3          SDIV     r0,r0,r3
00008e  49e2              LDR      r1,|L4.1048|
000090  4ce4              LDR      r4,|L4.1060|
000092  8008              STRH     r0,[r1,#0]
000094  48e1              LDR      r0,|L4.1052|
000096  8801              LDRH     r1,[r0,#0]  ; I_LOAD_MODE
000098  48e1              LDR      r0,|L4.1056|
00009a  f9b03000          LDRSH    r3,[r0,#0]
00009e  b971              CBNZ     r1,|L4.190|
0000a0  2100              MOVS     r1,#0
0000a2  4608              MOV      r0,r1
0000a4  e008              B        |L4.184|
0000a6  bf00              NOP      
                  |L4.168|
0000a8  eb000580          ADD      r5,r0,r0,LSL #2
0000ac  eb041505          ADD      r5,r4,r5,LSL #4
0000b0  1c40              ADDS     r0,r0,#1
0000b2  6a2d              LDR      r5,[r5,#0x20]
0000b4  b2c0              UXTB     r0,r0
0000b6  4429              ADD      r1,r1,r5
                  |L4.184|
0000b8  4298              CMP      r0,r3
0000ba  dbf5              BLT      |L4.168|
0000bc  8011              STRH     r1,[r2,#0]
                  |L4.190|
0000be  f9b20000          LDRSH    r0,[r2,#0]  ; load_I
0000c2  2100              MOVS     r1,#0
0000c4  2800              CMP      r0,#0
0000c6  da00              BGE      |L4.202|
0000c8  8011              STRH     r1,[r2,#0]
                  |L4.202|
0000ca  2200              MOVS     r2,#0
                  |L4.204|
0000cc  eb020082          ADD      r0,r2,r2,LSL #2
0000d0  eb041000          ADD      r0,r4,r0,LSL #4
0000d4  78c5              LDRB     r5,[r0,#3]
0000d6  2d19              CMP      r5,#0x19
0000d8  d21b              BCS      |L4.274|
0000da  7985              LDRB     r5,[r0,#6]
0000dc  79c6              LDRB     r6,[r0,#7]
0000de  eb052606          ADD      r6,r5,r6,LSL #8
0000e2  6206              STR      r6,[r0,#0x20]
0000e4  7a06              LDRB     r6,[r0,#8]
0000e6  7a47              LDRB     r7,[r0,#9]
0000e8  eb062607          ADD      r6,r6,r7,LSL #8
0000ec  61c6              STR      r6,[r0,#0x1c]
0000ee  7a86              LDRB     r6,[r0,#0xa]
0000f0  7ac7              LDRB     r7,[r0,#0xb]
0000f2  eb062607          ADD      r6,r6,r7,LSL #8
0000f6  6186              STR      r6,[r0,#0x18]
0000f8  7b06              LDRB     r6,[r0,#0xc]
0000fa  6246              STR      r6,[r0,#0x24]
0000fc  f880504e          STRB     r5,[r0,#0x4e]
000100  7b85              LDRB     r5,[r0,#0xe]
000102  f880503e          STRB     r5,[r0,#0x3e]
000106  7c05              LDRB     r5,[r0,#0x10]
000108  7c46              LDRB     r6,[r0,#0x11]
00010a  eb052506          ADD      r5,r5,r6,LSL #8
00010e  6485              STR      r5,[r0,#0x48]
000110  e006              B        |L4.288|
                  |L4.274|
000112  6181              STR      r1,[r0,#0x18]
000114  6201              STR      r1,[r0,#0x20]
000116  61c1              STR      r1,[r0,#0x1c]
000118  6241              STR      r1,[r0,#0x24]
00011a  f880103e          STRB     r1,[r0,#0x3e]
00011e  6481              STR      r1,[r0,#0x48]
                  |L4.288|
000120  1c52              ADDS     r2,r2,#1
000122  b2d2              UXTB     r2,r2
000124  2a20              CMP      r2,#0x20
000126  d3d1              BCC      |L4.204|
000128  48bf              LDR      r0,|L4.1064|
00012a  49c0              LDR      r1,|L4.1068|
00012c  8800              LDRH     r0,[r0,#0]  ; I_MAX
00012e  4358              MULS     r0,r3,r0
000130  8008              STRH     r0,[r1,#0]
000132  48bf              LDR      r0,|L4.1072|
000134  49bf              LDR      r1,|L4.1076|
000136  8800              LDRH     r0,[r0,#0]  ; I_MIN
000138  4358              MULS     r0,r3,r0
00013a  8008              STRH     r0,[r1,#0]
00013c  bdf0              POP      {r4-r7,pc}
;;;257    	}	 	
;;;258    }
;;;259    
                          ENDP

                  adc_init PROC
;;;358    //-----------------------------------------------
;;;359    void adc_init(void)
00013e  48be              LDR      r0,|L4.1080|
;;;360    {
;;;361    
;;;362    SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
000140  6841              LDR      r1,[r0,#4]
000142  f4212140          BIC      r1,r1,#0xc0000
000146  f4412180          ORR      r1,r1,#0x40000
00014a  6041              STR      r1,[r0,#4]
;;;363    SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
00014c  6841              LDR      r1,[r0,#4]
00014e  f4213140          BIC      r1,r1,#0x30000
000152  f4413180          ORR      r1,r1,#0x10000
000156  6041              STR      r1,[r0,#4]
;;;364    SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
000158  6841              LDR      r1,[r0,#4]
00015a  f4214140          BIC      r1,r1,#0xc000
00015e  f4414180          ORR      r1,r1,#0x4000
000162  6041              STR      r1,[r0,#4]
;;;365    
;;;366    
;;;367    SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
000164  6c41              LDR      r1,[r0,#0x44]
000166  f4212140          BIC      r1,r1,#0xc0000
00016a  f4412100          ORR      r1,r1,#0x80000
00016e  6441              STR      r1,[r0,#0x44]
;;;368    SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
000170  6c41              LDR      r1,[r0,#0x44]
000172  f4213140          BIC      r1,r1,#0x30000
000176  f4413100          ORR      r1,r1,#0x20000
00017a  6441              STR      r1,[r0,#0x44]
;;;369    SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
00017c  6c41              LDR      r1,[r0,#0x44]
00017e  f4214140          BIC      r1,r1,#0xc000
000182  f4414100          ORR      r1,r1,#0x8000
000186  6441              STR      r1,[r0,#0x44]
;;;370    
;;;371    SET_REG(LPC_ADC->ADCR,0,24,3);
000188  48ac              LDR      r0,|L4.1084|
00018a  6801              LDR      r1,[r0,#0]
00018c  f02161e0          BIC      r1,r1,#0x7000000
000190  6001              STR      r1,[r0,#0]
;;;372    
;;;373    SET_REG(LPC_ADC->ADCR,1,21,1);
000192  6801              LDR      r1,[r0,#0]
000194  f4411100          ORR      r1,r1,#0x200000
000198  6001              STR      r1,[r0,#0]
;;;374    SET_REG(LPC_ADC->ADCR,0,16,1);
00019a  6801              LDR      r1,[r0,#0]
00019c  f4213180          BIC      r1,r1,#0x10000
0001a0  6001              STR      r1,[r0,#0]
;;;375    SET_REG(LPC_ADC->ADCR,1,8,8);
0001a2  6801              LDR      r1,[r0,#0]
0001a4  f421417f          BIC      r1,r1,#0xff00
0001a8  f4417180          ORR      r1,r1,#0x100
0001ac  6001              STR      r1,[r0,#0]
;;;376    
;;;377    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;378    //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;379    	
;;;380    	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;381         /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;382         else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;383    
;;;384    LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
0001ae  1581              ASRS     r1,r0,#22
0001b0  60c1              STR      r1,[r0,#0xc]
0001b2  48a3              LDR      r0,|L4.1088|
0001b4  0389              LSLS     r1,r1,#14
0001b6  6001              STR      r1,[r0,#0]
;;;385    
;;;386    NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;387    
;;;388    
;;;389    }
0001b8  4770              BX       lr
;;;390    
                          ENDP

                  adc_drv7 PROC
;;;391    //-----------------------------------------------
;;;392    void adc_drv7(void) //(Uсети - постоянка)
0001ba  e92d41f0          PUSH     {r4-r8,lr}
;;;393    {
;;;394    //int temp_S;
;;;395    //char i;
;;;396    //signed short temp_SS;
;;;397    
;;;398    adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0001be  4ca1              LDR      r4,|L4.1092|
0001c0  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0001c2  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0001c4  1a40              SUBS     r0,r0,r1
0001c6  b200              SXTH     r0,r0
0001c8  f7fffffe          BL       abs_pal
0001cc  1da5              ADDS     r5,r4,#6
0001ce  8028              STRH     r0,[r5,#0]
;;;399    adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0001d0  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0001d2  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
0001d4  1a40              SUBS     r0,r0,r1
0001d6  b200              SXTH     r0,r0
0001d8  f7fffffe          BL       abs_pal
0001dc  8068              STRH     r0,[r5,#2]
;;;400    adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
0001de  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0001e0  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0001e2  1a40              SUBS     r0,r0,r1
0001e4  b200              SXTH     r0,r0
0001e6  f7fffffe          BL       abs_pal
;;;401    
;;;402    //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;403    //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;404    //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;405    
;;;406    
;;;407    if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
0001ea  f44f7296          MOV      r2,#0x12c
0001ee  80a8              STRH     r0,[r5,#4]            ;400
;;;408    	{
;;;409    	adc_result=adc_self_ch_buff[2];
0001f0  f1a40128          SUB      r1,r4,#0x28
0001f4  4290              CMP      r0,r2                 ;407
0001f6  da01              BGE      |L4.508|
0001f8  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0001fa  e00a              B        |L4.530|
                  |L4.508|
;;;410    	} 
;;;411    else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
0001fc  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
000200  4290              CMP      r0,r2
000202  da01              BGE      |L4.520|
;;;412    	{
;;;413    	adc_result=adc_self_ch_buff[1];
000204  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000206  e004              B        |L4.530|
                  |L4.520|
;;;414    	}
;;;415    else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
000208  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
00020c  4290              CMP      r0,r2
00020e  da01              BGE      |L4.532|
;;;416    	{
;;;417    	adc_result=adc_self_ch_buff[0];
000210  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L4.530|
000212  8248              STRH     r0,[r1,#0x12]
                  |L4.532|
;;;418    	}
;;;419        //adc_result=92;
;;;420    
;;;421    if(adc_ch_net)
000214  784c              LDRB     r4,[r1,#1]  ; adc_ch_net
000216  2300              MOVS     r3,#0
000218  b31c              CBZ      r4,|L4.610|
;;;422    	{
;;;423    
;;;424    	main_power_buffer[0]+=(long)(adc_result);
00021a  4876              LDR      r0,|L4.1012|
00021c  f9b12012          LDRSH    r2,[r1,#0x12]  ; adc_result
000220  3040              ADDS     r0,r0,#0x40
000222  6805              LDR      r5,[r0,#0]  ; main_power_buffer
000224  4415              ADD      r5,r5,r2
;;;425    	main_power_buffer[1]+=(long)(adc_result);
000226  6005              STR      r5,[r0,#0]  ; main_power_buffer
000228  6845              LDR      r5,[r0,#4]  ; main_power_buffer
00022a  4415              ADD      r5,r5,r2
;;;426    	main_power_buffer[2]+=(long)(adc_result);
00022c  6045              STR      r5,[r0,#4]  ; main_power_buffer
00022e  6885              LDR      r5,[r0,#8]  ; main_power_buffer
000230  4415              ADD      r5,r5,r2
;;;427    	main_power_buffer[3]+=(long)(adc_result);
000232  6085              STR      r5,[r0,#8]  ; main_power_buffer
000234  68c5              LDR      r5,[r0,#0xc]  ; main_power_buffer
000236  442a              ADD      r2,r2,r5
;;;428    
;;;429    	adc_net_buff_cnt++;
000238  60c2              STR      r2,[r0,#0xc]  ; main_power_buffer
00023a  8b4a              LDRH     r2,[r1,#0x1a]  ; adc_net_buff_cnt
00023c  1c52              ADDS     r2,r2,#1
00023e  b212              SXTH     r2,r2
000240  834a              STRH     r2,[r1,#0x1a]
;;;430    	if(adc_net_buff_cnt>=0x1000)
000242  f5b25f80          CMP      r2,#0x1000
000246  db00              BLT      |L4.586|
;;;431    		{
;;;432    		adc_net_buff_cnt=0;
000248  834b              STRH     r3,[r1,#0x1a]
                  |L4.586|
;;;433    		}
;;;434    	if((adc_net_buff_cnt&0x03ff)==0)
00024a  f9b1201a          LDRSH    r2,[r1,#0x1a]  ; adc_net_buff_cnt
00024e  0595              LSLS     r5,r2,#22
000250  d135              BNE      |L4.702|
;;;435    		{
;;;436    		#ifdef UKU_220
;;;437    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;438    		#else
;;;439    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
000252  1292              ASRS     r2,r2,#10
000254  f8505022          LDR      r5,[r0,r2,LSL #2]
000258  122d              ASRS     r5,r5,#8
00025a  820d              STRH     r5,[r1,#0x10]
;;;440    		#endif
;;;441    		main_power_buffer[adc_net_buff_cnt>>10]=0;
00025c  f8403022          STR      r3,[r0,r2,LSL #2]
000260  e02d              B        |L4.702|
                  |L4.610|
;;;442    		}
;;;443    
;;;444    
;;;445    	} 
;;;446    else if(!adc_ch_net)
;;;447    	{
;;;448    	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
000262  4f79              LDR      r7,|L4.1096|
000264  7888              LDRB     r0,[r1,#2]  ; adc_ch
000266  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
00026a  eb0712c0          ADD      r2,r7,r0,LSL #7
00026e  f9b1e012          LDRSH    lr,[r1,#0x12]  ; adc_result
000272  f842e02c          STR      lr,[r2,r12,LSL #2]
;;;449    	
;;;450    	if((adc_ch_cnt&0x03)==0)
000276  ea5f728c          LSLS     r2,r12,#30
00027a  d112              BNE      |L4.674|
;;;451    		{
;;;452    		long temp_L;
;;;453    		char i;
;;;454    		temp_L=0;
00027c  2500              MOVS     r5,#0
;;;455    		for(i=0;i<32;i++)
00027e  462a              MOV      r2,r5
;;;456    			{
;;;457    			temp_L+=adc_buff[adc_ch][i];
000280  eb0716c0          ADD      r6,r7,r0,LSL #7
                  |L4.644|
000284  f8567022          LDR      r7,[r6,r2,LSL #2]
000288  1c52              ADDS     r2,r2,#1              ;455
00028a  b2d2              UXTB     r2,r2                 ;455
00028c  443d              ADD      r5,r5,r7
00028e  2a20              CMP      r2,#0x20              ;455
000290  d3f8              BCC      |L4.644|
;;;458    			}
;;;459    		adc_buff_[adc_ch]= (short)(temp_L>>5);
000292  116a              ASRS     r2,r5,#5
000294  4d57              LDR      r5,|L4.1012|
000296  f8252010          STRH     r2,[r5,r0,LSL #1]
;;;460    		adc_buff__[adc_ch]= adc_buff[adc_ch][adc_ch_cnt];
00029a  f1050220          ADD      r2,r5,#0x20
00029e  f822e010          STRH     lr,[r2,r0,LSL #1]
                  |L4.674|
;;;461    		//adc_buff_[3]=346;
;;;462    		}
;;;463    	if(++adc_ch>=16) 
0002a2  1c40              ADDS     r0,r0,#1
0002a4  b2c0              UXTB     r0,r0
0002a6  7088              STRB     r0,[r1,#2]
0002a8  2810              CMP      r0,#0x10
0002aa  d308              BCC      |L4.702|
;;;464    		{
;;;465    		adc_ch=0;
;;;466    		adc_ch_cnt++;
0002ac  f10c0c01          ADD      r12,r12,#1
0002b0  f00c00ff          AND      r0,r12,#0xff
0002b4  708b              STRB     r3,[r1,#2]            ;465
0002b6  70c8              STRB     r0,[r1,#3]
;;;467    		if(adc_ch_cnt>=32)adc_ch_cnt=0;
0002b8  2820              CMP      r0,#0x20
0002ba  d300              BCC      |L4.702|
0002bc  70cb              STRB     r3,[r1,#3]
                  |L4.702|
;;;468    		}
;;;469    	}
;;;470    
;;;471      
;;;472    
;;;473    adc_self_ch_cnt=0;
;;;474    
;;;475    adc_ch_net++;
0002be  1c64              ADDS     r4,r4,#1
0002c0  700b              STRB     r3,[r1,#0]            ;473
;;;476    adc_ch_net&=1;
0002c2  f0140001          ANDS     r0,r4,#1
;;;477    
;;;478    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;479    //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;480    
;;;481    if(adc_ch_net)
;;;482    	{
;;;483    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;484    	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;485    	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0002c6  4a5d              LDR      r2,|L4.1084|
0002c8  7048              STRB     r0,[r1,#1]            ;476
0002ca  d005              BEQ      |L4.728|
0002cc  6810              LDR      r0,[r2,#0]
0002ce  f02000ff          BIC      r0,r0,#0xff
0002d2  1d00              ADDS     r0,r0,#4
0002d4  6010              STR      r0,[r2,#0]
0002d6  e034              B        |L4.834|
                  |L4.728|
;;;486    	}
;;;487    else
;;;488    	{
;;;489    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;490    	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;491    	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
0002d8  7889              LDRB     r1,[r1,#2]  ; adc_ch
0002da  0708              LSLS     r0,r1,#28
0002dc  2800              CMP      r0,#0
;;;492    	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0002de  6810              LDR      r0,[r2,#0]
0002e0  f02000ff          BIC      r0,r0,#0xff
0002e4  db02              BLT      |L4.748|
0002e6  f1000001          ADD      r0,r0,#1              ;491
0002ea  e001              B        |L4.752|
                  |L4.748|
0002ec  f1000002          ADD      r0,r0,#2
                  |L4.752|
0002f0  6010              STR      r0,[r2,#0]
;;;493    
;;;494    
;;;495    	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0002f2  4856              LDR      r0,|L4.1100|
0002f4  6803              LDR      r3,[r0,#0]
0002f6  f0435380          ORR      r3,r3,#0x10000000
0002fa  6003              STR      r3,[r0,#0]
;;;496    	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0002fc  6a03              LDR      r3,[r0,#0x20]
0002fe  f0434380          ORR      r3,r3,#0x40000000
000302  6203              STR      r3,[r0,#0x20]
;;;497    	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
000304  6e03              LDR      r3,[r0,#0x60]
000306  f0436380          ORR      r3,r3,#0x4000000
00030a  6603              STR      r3,[r0,#0x60]
;;;498    
;;;499    	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
00030c  07cb              LSLS     r3,r1,#31
;;;500    	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
00030e  6943              LDR      r3,[r0,#0x14]
000310  d008              BEQ      |L4.804|
000312  f0435380          ORR      r3,r3,#0x10000000
                  |L4.790|
000316  6143              STR      r3,[r0,#0x14]
;;;501    
;;;502    	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
000318  078b              LSLS     r3,r1,#30
;;;503    	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
00031a  6b43              LDR      r3,[r0,#0x34]
00031c  d405              BMI      |L4.810|
00031e  f0234380          BIC      r3,r3,#0x40000000     ;502
000322  e004              B        |L4.814|
                  |L4.804|
000324  f0235380          BIC      r3,r3,#0x10000000     ;499
000328  e7f5              B        |L4.790|
                  |L4.810|
00032a  f0434380          ORR      r3,r3,#0x40000000
                  |L4.814|
00032e  6343              STR      r3,[r0,#0x34]
;;;504    
;;;505    	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
000330  0749              LSLS     r1,r1,#29
;;;506    	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
000332  6f41              LDR      r1,[r0,#0x74]
000334  d402              BMI      |L4.828|
000336  f0216180          BIC      r1,r1,#0x4000000      ;505
00033a  e001              B        |L4.832|
                  |L4.828|
00033c  f0416180          ORR      r1,r1,#0x4000000
                  |L4.832|
000340  6741              STR      r1,[r0,#0x74]         ;505
                  |L4.834|
;;;507    	}
;;;508    	
;;;509    
;;;510    
;;;511    
;;;512    LPC_ADC->ADCR |=  (1<<24);
000342  6810              LDR      r0,[r2,#0]
000344  f0407080          ORR      r0,r0,#0x1000000
000348  6010              STR      r0,[r2,#0]
                  |L4.842|
;;;513    
;;;514    }
00034a  e8bd81f0          POP      {r4-r8,pc}
;;;515    
                          ENDP

                  restart_off PROC
;;;1031   //-----------------------------------------------
;;;1032   void restart_off(void)
00034e  b510              PUSH     {r4,lr}
;;;1033   {
;;;1034   lc640_write_long(EE_TIME_PROC_GS_RESTART,0);
000350  2100              MOVS     r1,#0
000352  20d0              MOVS     r0,#0xd0
000354  f7fffffe          BL       lc640_write_long
;;;1035   lc640_write_long(EE_TIME_PROC_PS_RESTART,0);
000358  2100              MOVS     r1,#0
00035a  e8bd4010          POP      {r4,lr}
00035e  20d4              MOVS     r0,#0xd4
000360  f7ffbffe          B.W      lc640_write_long
;;;1036   }
;;;1037   
                          ENDP

                  ach_off_hndl PROC
;;;787    //драйвер функции выключения по амперчасам
;;;788    void ach_off_hndl(void)
000364  b570              PUSH     {r4-r6,lr}
;;;789    {
;;;790    
;;;791    if((work_stat!=wsOFF)&&(ACH_OFF_EN))
000366  4c3a              LDR      r4,|L4.1104|
;;;792    	{
;;;793    	milliAmperSecunda+=((long)load_I);
000368  483a              LDR      r0,|L4.1108|
00036a  2500              MOVS     r5,#0                 ;791
00036c  7821              LDRB     r1,[r4,#0]            ;791  ; work_stat
00036e  b351              CBZ      r1,|L4.966|
000370  4939              LDR      r1,|L4.1112|
000372  8809              LDRH     r1,[r1,#0]            ;791  ; ACH_OFF_EN
000374  b339              CBZ      r1,|L4.966|
000376  4a27              LDR      r2,|L4.1044|
000378  6801              LDR      r1,[r0,#0]  ; milliAmperSecunda
00037a  f9b22000          LDRSH    r2,[r2,#0]  ; load_I
00037e  4411              ADD      r1,r1,r2
;;;794    	if(milliAmperSecunda>=3600L)
000380  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
000382  f5b16f61          CMP      r1,#0xe10
000386  db1f              BLT      |L4.968|
;;;795    		{
;;;796    		milliAmperSecunda-=3600L;
;;;797    		AMPERCHAS+=1;
000388  4e34              LDR      r6,|L4.1116|
00038a  f5a16161          SUB      r1,r1,#0xe10          ;796
00038e  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
000390  6831              LDR      r1,[r6,#0]  ; AMPERCHAS
;;;798    		lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000392  f44f709e          MOV      r0,#0x13c
000396  1c49              ADDS     r1,r1,#1              ;797
000398  6031              STR      r1,[r6,#0]  ; AMPERCHAS
00039a  f7fffffe          BL       lc640_write_long
;;;799    
;;;800    		if(AMPERCHAS>=ACH_OFF_LEVEL)
00039e  4930              LDR      r1,|L4.1120|
0003a0  6830              LDR      r0,[r6,#0]  ; AMPERCHAS
0003a2  f9b11000          LDRSH    r1,[r1,#0]  ; ACH_OFF_LEVEL
0003a6  4288              CMP      r0,r1
0003a8  db0e              BLT      |L4.968|
;;;801    			{
;;;802    			work_stat=wsOFF;
0003aa  7025              STRB     r5,[r4,#0]
;;;803    			restart_off();
0003ac  f7fffffe          BL       restart_off
;;;804    			tree_up(iProcIsComplete,1,0,0);
0003b0  2300              MOVS     r3,#0
0003b2  461a              MOV      r2,r3
0003b4  2101              MOVS     r1,#1
0003b6  2078              MOVS     r0,#0x78
0003b8  f7fffffe          BL       tree_up
;;;805    			ret(0);
0003bc  e8bd4070          POP      {r4-r6,lr}
0003c0  2000              MOVS     r0,#0
0003c2  f7ffbffe          B.W      ||ret||
                  |L4.966|
;;;806    			}
;;;807    		}
;;;808    	}
;;;809    else 
;;;810    	{
;;;811    	milliAmperSecunda=0;
0003c6  6005              STR      r5,[r0,#0]  ; milliAmperSecunda
                  |L4.968|
;;;812    	}
;;;813    
;;;814    }
0003c8  bd70              POP      {r4-r6,pc}
;;;815     	
                          ENDP

                  curr_off_hndl PROC
;;;817    //драйвер функции выключения по снижению тока
;;;818    void curr_off_hndl(void)
0003ca  b570              PUSH     {r4-r6,lr}
;;;819    {
;;;820    
;;;821    if((work_stat!=wsOFF)&&(CURR_OFF_EN))
0003cc  4c20              LDR      r4,|L4.1104|
;;;822    	{
;;;823    	if(curr_off_start_cnt<CUR_OFF_T_OFF)curr_off_start_cnt++;
;;;824    	else
;;;825    		{
;;;826    		signed int temp_I=0;
;;;827    		if(work_stat==wsGS)
;;;828    			{
;;;829    			temp_I=(signed int)I_ug_temp;
;;;830    			}
;;;831    		else if(work_stat==wsPS)
;;;832    			{
;;;833    			temp_I=(signed int)I_maxp;
;;;834    			}
;;;835    		temp_I*=(signed int)CUR_OFF_LEVEL_RELATIV;
;;;836    		temp_I/=100;
;;;837    		curr_off_temp=(short)temp_I;
;;;838    		if(load_I<curr_off_temp)
;;;839    			{
;;;840    			curr_off_stop_cnt++;
0003ce  4a25              LDR      r2,|L4.1124|
0003d0  4825              LDR      r0,|L4.1128|
0003d2  7825              LDRB     r5,[r4,#0]            ;821  ; work_stat
0003d4  2100              MOVS     r1,#0                 ;821
0003d6  b165              CBZ      r5,|L4.1010|
0003d8  4b24              LDR      r3,|L4.1132|
0003da  881b              LDRH     r3,[r3,#0]            ;821  ; CURR_OFF_EN
0003dc  b14b              CBZ      r3,|L4.1010|
0003de  4e24              LDR      r6,|L4.1136|
0003e0  f9b03000          LDRSH    r3,[r0,#0]            ;823  ; curr_off_start_cnt
0003e4  f9b66000          LDRSH    r6,[r6,#0]            ;823  ; CUR_OFF_T_OFF
0003e8  42b3              CMP      r3,r6                 ;823
0003ea  da43              BGE      |L4.1140|
0003ec  1c5b              ADDS     r3,r3,#1              ;823
0003ee  8003              STRH     r3,[r0,#0]            ;823
                  |L4.1008|
;;;841    			if(curr_off_stop_cnt>=CUR_OFF_T_ON)
;;;842    				{
;;;843    				work_stat=wsOFF;
;;;844    				restart_off();
;;;845    				tree_up(iProcIsComplete,2,0,0);
;;;846    				ret(0);
;;;847    				}
;;;848    			}
;;;849    		else curr_off_stop_cnt=0;
;;;850    		}
;;;851    	}
;;;852    else 
;;;853    	{
;;;854    	curr_off_start_cnt=0;
;;;855    	curr_off_stop_cnt=0;
;;;856    	}
;;;857    }	
0003f0  bd70              POP      {r4-r6,pc}
                  |L4.1010|
0003f2  e072              B        |L4.1242|
                  |L4.1012|
                          DCD      ||.bss||+0x800
                  |L4.1016|
                          DCD      unet_drv_cnt
                  |L4.1020|
                          DCD      Kuload
                  |L4.1024|
                          DCD      load_U
                  |L4.1028|
                          DCD      load_U_
                  |L4.1032|
                          DCD      ad7705_buff_
                  |L4.1036|
                          DCD      Kiload0
                  |L4.1040|
                          DCD      Kiload1
                  |L4.1044|
                          DCD      load_I
                  |L4.1048|
                          DCD      load_I_
                  |L4.1052|
                          DCD      I_LOAD_MODE
                  |L4.1056|
                          DCD      NUMIST
                  |L4.1060|
                          DCD      bps
                  |L4.1064|
                          DCD      I_MAX
                  |L4.1068|
                          DCD      I_MAX_IPS
                  |L4.1072|
                          DCD      I_MIN
                  |L4.1076|
                          DCD      I_MIN_IPS
                  |L4.1080|
                          DCD      0x4002c000
                  |L4.1084|
                          DCD      0x40034000
                  |L4.1088|
                          DCD      0xe000e100
                  |L4.1092|
                          DCD      ||area_number.24||+0x28
                  |L4.1096|
                          DCD      ||.bss||
                  |L4.1100|
                          DCD      0x2009c000
                  |L4.1104|
                          DCD      work_stat
                  |L4.1108|
                          DCD      milliAmperSecunda
                  |L4.1112|
                          DCD      ACH_OFF_EN
                  |L4.1116|
                          DCD      AMPERCHAS
                  |L4.1120|
                          DCD      ACH_OFF_LEVEL
                  |L4.1124|
                          DCD      curr_off_stop_cnt
                  |L4.1128|
                          DCD      curr_off_start_cnt
                  |L4.1132|
                          DCD      CURR_OFF_EN
                  |L4.1136|
                          DCD      CUR_OFF_T_OFF
                  |L4.1140|
000474  2000              MOVS     r0,#0                 ;826
000476  2d01              CMP      r5,#1                 ;827
000478  d002              BEQ      |L4.1152|
00047a  2d02              CMP      r5,#2                 ;831
00047c  d002              BEQ      |L4.1156|
00047e  e004              B        |L4.1162|
                  |L4.1152|
000480  48fc              LDR      r0,|L4.2164|
000482  e000              B        |L4.1158|
                  |L4.1156|
000484  48fc              LDR      r0,|L4.2168|
                  |L4.1158|
000486  f9b00000          LDRSH    r0,[r0,#0]            ;833  ; I_maxp
                  |L4.1162|
00048a  4bfc              LDR      r3,|L4.2172|
00048c  f9b33000          LDRSH    r3,[r3,#0]            ;835  ; CUR_OFF_LEVEL_RELATIV
000490  4358              MULS     r0,r3,r0              ;835
000492  2364              MOVS     r3,#0x64              ;836
000494  fb90f0f3          SDIV     r0,r0,r3              ;836
000498  4bf9              LDR      r3,|L4.2176|
00049a  b200              SXTH     r0,r0                 ;837
00049c  8018              STRH     r0,[r3,#0]            ;837
00049e  4bf9              LDR      r3,|L4.2180|
0004a0  f9b33000          LDRSH    r3,[r3,#0]            ;838  ; load_I
0004a4  4283              CMP      r3,r0                 ;838
0004a6  da16              BGE      |L4.1238|
0004a8  8810              LDRH     r0,[r2,#0]            ;840  ; curr_off_stop_cnt
0004aa  1c40              ADDS     r0,r0,#1              ;840
0004ac  b200              SXTH     r0,r0                 ;840
0004ae  8010              STRH     r0,[r2,#0]            ;840
0004b0  4af5              LDR      r2,|L4.2184|
0004b2  f9b22000          LDRSH    r2,[r2,#0]            ;841  ; CUR_OFF_T_ON
0004b6  4290              CMP      r0,r2                 ;841
0004b8  db9a              BLT      |L4.1008|
0004ba  7021              STRB     r1,[r4,#0]            ;843
0004bc  f7fffffe          BL       restart_off
0004c0  2300              MOVS     r3,#0                 ;845
0004c2  461a              MOV      r2,r3                 ;845
0004c4  2102              MOVS     r1,#2                 ;845
0004c6  2078              MOVS     r0,#0x78              ;845
0004c8  f7fffffe          BL       tree_up
0004cc  e8bd4070          POP      {r4-r6,lr}            ;846
0004d0  2000              MOVS     r0,#0                 ;846
0004d2  f7ffbffe          B.W      ||ret||
                  |L4.1238|
0004d6  8011              STRH     r1,[r2,#0]            ;849
0004d8  e78a              B        |L4.1008|
                  |L4.1242|
0004da  8001              STRH     r1,[r0,#0]            ;854
0004dc  e7fb              B        |L4.1238|
;;;858    
                          ENDP

                  time_hndl PROC
;;;859    //-----------------------------------------------
;;;860    void time_hndl(void) /*ГЦ раз в секунду*/
0004de  e92d5ff0          PUSH     {r4-r12,lr}
;;;861    {
;;;862    if((REV_IS_ON)&&(AVT_REV_IS_ON))
;;;863    	{
;;;864    
;;;865    	}
;;;866    
;;;867    
;;;868    
;;;869    
;;;870    if(work_stat==wsGS)
0004e2  f8df83a8          LDR      r8,|L4.2188|
;;;871    	{
;;;872    	time_proc++;
;;;873    	if(((time_proc%600L)==0)&&(restart_enable==reON))
;;;874    		{
;;;875    		lc640_write_long(EE_TIME_PROC_GS_RESTART,time_proc);
;;;876    		}
;;;877    	if(time_proc_remain)
;;;878    		{
;;;879    		time_proc_remain--;
;;;880    		}
;;;881    	if((!time_proc_remain)&&(!T_PROC_GS_MODE))
;;;882    		{
;;;883    		work_stat=wsOFF;
;;;884    		restart_off();
;;;885    		tree_up(iProcIsComplete,0,0,0);
;;;886    		ret(0);
;;;887    		}
;;;888    	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0004e6  f8dfb3a8          LDR      r11,|L4.2192|
;;;889    		time_proc_phase++;
;;;890    		
;;;891    		if(proc_phase==ppFF) {
;;;892    			REV_STAT=rsFF;
0004ea  4dea              LDR      r5,|L4.2196|
0004ec  f8980000          LDRB     r0,[r8,#0]            ;870  ; work_stat
;;;893    			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;894    				proc_phase=ppFF_P_REW;	
;;;895    				time_proc_phase=0;
;;;896    			}
;;;897    		} else if(proc_phase==ppFF_P_REW) {
;;;898    			if(time_proc_phase==0)REV_STAT=rsFF;
;;;899    			else REV_STAT=rsREW;
;;;900    			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
0004f0  4fe9              LDR      r7,|L4.2200|
0004f2  f8df93a8          LDR      r9,|L4.2204|
0004f6  2601              MOVS     r6,#1                 ;870
0004f8  2400              MOVS     r4,#0                 ;877
0004fa  f44f7a16          MOV      r10,#0x258            ;873
0004fe  2801              CMP      r0,#1                 ;870
000500  d162              BNE      |L4.1480|
000502  48e7              LDR      r0,|L4.2208|
000504  6801              LDR      r1,[r0,#0]            ;872  ; time_proc
000506  1c49              ADDS     r1,r1,#1              ;872
000508  fb91f2fa          SDIV     r2,r1,r10             ;873
00050c  6001              STR      r1,[r0,#0]            ;873  ; time_proc
00050e  fb0a1012          MLS      r0,r10,r2,r1          ;873
000512  b930              CBNZ     r0,|L4.1314|
000514  48e3              LDR      r0,|L4.2212|
000516  7800              LDRB     r0,[r0,#0]            ;873  ; restart_enable
000518  2801              CMP      r0,#1                 ;873
00051a  d102              BNE      |L4.1314|
00051c  20d0              MOVS     r0,#0xd0              ;875
00051e  f7fffffe          BL       lc640_write_long
                  |L4.1314|
000522  f8d91000          LDR      r1,[r9,#0]            ;877  ; time_proc_remain
000526  4648              MOV      r0,r9                 ;877
000528  b109              CBZ      r1,|L4.1326|
00052a  1e49              SUBS     r1,r1,#1              ;879
00052c  6001              STR      r1,[r0,#0]            ;879  ; time_proc_remain
                  |L4.1326|
00052e  4608              MOV      r0,r1                 ;881
000530  49dd              LDR      r1,|L4.2216|
000532  f9b11000          LDRSH    r1,[r1,#0]            ;881  ; T_PROC_GS_MODE
000536  4308              ORRS     r0,r0,r1              ;881
000538  d10c              BNE      |L4.1364|
00053a  f8884000          STRB     r4,[r8,#0]            ;883
00053e  f7fffffe          BL       restart_off
000542  2300              MOVS     r3,#0                 ;885
000544  461a              MOV      r2,r3                 ;885
000546  4619              MOV      r1,r3                 ;885
000548  2078              MOVS     r0,#0x78              ;885
00054a  f7fffffe          BL       tree_up
00054e  2000              MOVS     r0,#0                 ;886
000550  f7fffffe          BL       ||ret||
                  |L4.1364|
000554  48d5              LDR      r0,|L4.2220|
000556  8800              LDRH     r0,[r0,#0]            ;888  ; REV_IS_ON
000558  b3b0              CBZ      r0,|L4.1480|
00055a  f8bb0000          LDRH     r0,[r11,#0]           ;888  ; AVT_REV_IS_ON
00055e  b398              CBZ      r0,|L4.1480|
000560  4bd3              LDR      r3,|L4.2224|
000562  8818              LDRH     r0,[r3,#0]            ;889  ; time_proc_phase
000564  1c40              ADDS     r0,r0,#1              ;889
000566  b201              SXTH     r1,r0                 ;889
000568  48d2              LDR      r0,|L4.2228|
00056a  8019              STRH     r1,[r3,#0]            ;889
00056c  7802              LDRB     r2,[r0,#0]            ;891  ; proc_phase
00056e  b132              CBZ      r2,|L4.1406|
000570  2a01              CMP      r2,#1                 ;897
000572  d00c              BEQ      |L4.1422|
;;;901    				proc_phase=ppREW;	
;;;902    				time_proc_phase=0;
;;;903    			}
;;;904    		} else if(proc_phase==ppREW) {
000574  2a02              CMP      r2,#2
000576  d015              BEQ      |L4.1444|
;;;905    			REV_STAT=rsREW;
;;;906    			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;907    				proc_phase=ppREW_P_FF;	
;;;908    				time_proc_phase=0;
;;;909    			}
;;;910    		} else if(proc_phase==ppREW_P_FF) {
000578  2a03              CMP      r2,#3
00057a  d01c              BEQ      |L4.1462|
00057c  e024              B        |L4.1480|
                  |L4.1406|
00057e  4ace              LDR      r2,|L4.2232|
000580  702e              STRB     r6,[r5,#0]            ;892
000582  f9b22000          LDRSH    r2,[r2,#0]            ;893  ; AVT_REV_TIME_FF
000586  4291              CMP      r1,r2                 ;893
000588  db1e              BLT      |L4.1480|
00058a  7006              STRB     r6,[r0,#0]            ;894
00058c  e01b              B        |L4.1478|
                  |L4.1422|
00058e  b139              CBZ      r1,|L4.1440|
000590  f8854000          STRB.W   r4,[r5,#0]            ;899
                  |L4.1428|
000594  f9b72000          LDRSH    r2,[r7,#0]            ;900  ; AVT_REV_TIME_PAUSE
000598  4291              CMP      r1,r2                 ;900
00059a  db15              BLT      |L4.1480|
00059c  2102              MOVS     r1,#2                 ;901
00059e  e008              B        |L4.1458|
                  |L4.1440|
0005a0  702e              STRB     r6,[r5,#0]            ;898
0005a2  e7f7              B        |L4.1428|
                  |L4.1444|
0005a4  4ac5              LDR      r2,|L4.2236|
0005a6  702c              STRB     r4,[r5,#0]            ;905
0005a8  f9b22000          LDRSH    r2,[r2,#0]            ;906  ; AVT_REV_TIME_REW
0005ac  4291              CMP      r1,r2                 ;906
0005ae  db0b              BLT      |L4.1480|
0005b0  2103              MOVS     r1,#3                 ;907
                  |L4.1458|
0005b2  7001              STRB     r1,[r0,#0]            ;901
0005b4  e007              B        |L4.1478|
                  |L4.1462|
;;;911    			if(time_proc_phase==0)REV_STAT=rsREW;
0005b6  b1a9              CBZ      r1,|L4.1508|
;;;912    			else REV_STAT=rsFF;
0005b8  f8856000          STRB.W   r6,[r5,#0]
                  |L4.1468|
;;;913    			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
0005bc  f9b72000          LDRSH    r2,[r7,#0]  ; AVT_REV_TIME_PAUSE
0005c0  4291              CMP      r1,r2
0005c2  db01              BLT      |L4.1480|
;;;914    				proc_phase=ppFF;	
0005c4  7004              STRB     r4,[r0,#0]
                  |L4.1478|
;;;915    				time_proc_phase=0;
0005c6  801c              STRH     r4,[r3,#0]
                  |L4.1480|
;;;916    			}
;;;917    		}
;;;918    	}
;;;919    	}
;;;920    
;;;921    
;;;922    if(work_stat==wsPS)
0005c8  f8980000          LDRB     r0,[r8,#0]  ; work_stat
0005cc  2802              CMP      r0,#2
0005ce  d15c              BNE      |L4.1674|
;;;923    	{
;;;924    	time_proc++;
0005d0  48b3              LDR      r0,|L4.2208|
0005d2  6801              LDR      r1,[r0,#0]  ; time_proc
0005d4  1c49              ADDS     r1,r1,#1
;;;925    	if(((time_proc%600L)==0)&&(restart_enable==reON))
0005d6  fb91f2fa          SDIV     r2,r1,r10
0005da  6001              STR      r1,[r0,#0]  ; time_proc
0005dc  fb0a1012          MLS      r0,r10,r2,r1
0005e0  b110              CBZ      r0,|L4.1512|
0005e2  e008              B        |L4.1526|
                  |L4.1508|
0005e4  702c              STRB     r4,[r5,#0]            ;911
0005e6  e7e9              B        |L4.1468|
                  |L4.1512|
0005e8  48ae              LDR      r0,|L4.2212|
0005ea  7800              LDRB     r0,[r0,#0]  ; restart_enable
0005ec  2801              CMP      r0,#1
0005ee  d102              BNE      |L4.1526|
;;;926    		{
;;;927    		lc640_write_long(EE_TIME_PROC_PS_RESTART,time_proc);
0005f0  20d4              MOVS     r0,#0xd4
0005f2  f7fffffe          BL       lc640_write_long
                  |L4.1526|
;;;928    		}
;;;929    	if(time_proc_remain)
0005f6  f8d91000          LDR      r1,[r9,#0]  ; time_proc_remain
0005fa  4648              MOV      r0,r9
0005fc  b109              CBZ      r1,|L4.1538|
;;;930    		{
;;;931    		time_proc_remain--;
0005fe  1e49              SUBS     r1,r1,#1
000600  6001              STR      r1,[r0,#0]  ; time_proc_remain
                  |L4.1538|
;;;932    		}
;;;933    	if((!time_proc_remain)&&(!T_PROC_PS_MODE))
000602  4608              MOV      r0,r1
000604  49ae              LDR      r1,|L4.2240|
000606  f9b11000          LDRSH    r1,[r1,#0]  ; T_PROC_PS_MODE
00060a  4308              ORRS     r0,r0,r1
00060c  d10c              BNE      |L4.1576|
;;;934    		{
;;;935    		work_stat=wsOFF;
00060e  f8884000          STRB     r4,[r8,#0]
;;;936    		restart_off();
000612  f7fffffe          BL       restart_off
;;;937    		tree_up(iProcIsComplete,0,0,0);
000616  2300              MOVS     r3,#0
000618  461a              MOV      r2,r3
00061a  4619              MOV      r1,r3
00061c  2078              MOVS     r0,#0x78
00061e  f7fffffe          BL       tree_up
;;;938    		ret(0);
000622  2000              MOVS     r0,#0
000624  f7fffffe          BL       ||ret||
                  |L4.1576|
;;;939    		}
;;;940    	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000628  48a0              LDR      r0,|L4.2220|
00062a  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
00062c  2800              CMP      r0,#0
00062e  d02c              BEQ      |L4.1674|
000630  f8bb0000          LDRH     r0,[r11,#0]  ; AVT_REV_IS_ON
000634  2800              CMP      r0,#0
000636  d028              BEQ      |L4.1674|
;;;941    		time_proc_phase++;
000638  489d              LDR      r0,|L4.2224|
00063a  8801              LDRH     r1,[r0,#0]  ; time_proc_phase
00063c  1c49              ADDS     r1,r1,#1
00063e  b20a              SXTH     r2,r1
;;;942    		
;;;943    		if(proc_phase==ppFF) {
000640  499c              LDR      r1,|L4.2228|
000642  8002              STRH     r2,[r0,#0]            ;941
000644  780b              LDRB     r3,[r1,#0]  ; proc_phase
000646  b16b              CBZ      r3,|L4.1636|
;;;944    			REV_STAT=rsFF;
;;;945    			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;946    				proc_phase=ppFF_P_REW;	
;;;947    				time_proc_phase=0;
;;;948    			}
;;;949    		} else if(proc_phase==ppFF_P_REW) {
000648  2b01              CMP      r3,#1
00064a  d013              BEQ      |L4.1652|
;;;950    			if(time_proc_phase==0)REV_STAT=rsFF;
;;;951    			else REV_STAT=rsREW;
;;;952    			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;953    				proc_phase=ppREW;	
;;;954    				time_proc_phase=0;
;;;955    			}
;;;956    		} else if(proc_phase==ppREW) {
00064c  2b02              CMP      r3,#2
00064e  d01e              BEQ      |L4.1678|
;;;957    			REV_STAT=rsREW;
;;;958    			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;959    				proc_phase=ppREW_P_FF;	
;;;960    				time_proc_phase=0;
;;;961    			}
;;;962    		} else if(proc_phase==ppREW_P_FF) {
000650  2b03              CMP      r3,#3
000652  d11a              BNE      |L4.1674|
;;;963    			if(time_proc_phase==0)REV_STAT=rsREW;
000654  b322              CBZ      r2,|L4.1696|
;;;964    			else REV_STAT=rsFF;
000656  702e              STRB     r6,[r5,#0]
                  |L4.1624|
;;;965    			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
000658  f9b73000          LDRSH    r3,[r7,#0]  ; AVT_REV_TIME_PAUSE
00065c  429a              CMP      r2,r3
00065e  db14              BLT      |L4.1674|
;;;966    				proc_phase=ppFF;	
000660  700c              STRB     r4,[r1,#0]
;;;967    				time_proc_phase=0;
000662  e011              B        |L4.1672|
                  |L4.1636|
000664  4b94              LDR      r3,|L4.2232|
000666  702e              STRB     r6,[r5,#0]            ;944
000668  f9b33000          LDRSH    r3,[r3,#0]            ;945  ; AVT_REV_TIME_FF
00066c  429a              CMP      r2,r3                 ;945
00066e  db0c              BLT      |L4.1674|
000670  700e              STRB     r6,[r1,#0]            ;946
000672  e009              B        |L4.1672|
                  |L4.1652|
000674  b132              CBZ      r2,|L4.1668|
000676  702c              STRB     r4,[r5,#0]            ;951
                  |L4.1656|
000678  f9b73000          LDRSH    r3,[r7,#0]            ;952  ; AVT_REV_TIME_PAUSE
00067c  429a              CMP      r2,r3                 ;952
00067e  db04              BLT      |L4.1674|
000680  2202              MOVS     r2,#2                 ;953
000682  e00b              B        |L4.1692|
                  |L4.1668|
000684  702e              STRB     r6,[r5,#0]            ;950
000686  e7f7              B        |L4.1656|
                  |L4.1672|
000688  8004              STRH     r4,[r0,#0]            ;947
                  |L4.1674|
;;;968    			}
;;;969    		}
;;;970    	}
;;;971    	}
;;;972    
;;;973    
;;;974    
;;;975    }
00068a  e8bd9ff0          POP      {r4-r12,pc}
                  |L4.1678|
00068e  4b8b              LDR      r3,|L4.2236|
000690  702c              STRB     r4,[r5,#0]            ;957
000692  f9b33000          LDRSH    r3,[r3,#0]            ;958  ; AVT_REV_TIME_REW
000696  429a              CMP      r2,r3                 ;958
000698  dbf7              BLT      |L4.1674|
00069a  2203              MOVS     r2,#3                 ;959
                  |L4.1692|
00069c  700a              STRB     r2,[r1,#0]            ;959
00069e  e7f3              B        |L4.1672|
                  |L4.1696|
0006a0  702c              STRB     r4,[r5,#0]            ;963
0006a2  e7d9              B        |L4.1624|
;;;976    
                          ENDP

                  cap_time_hndl PROC
;;;977    //-----------------------------------------------
;;;978    void cap_time_hndl(void) /*10 раз в секунду*/
0006a4  b570              PUSH     {r4-r6,lr}
;;;979    {
;;;980    
;;;981    if(work_stat==wsCAP)
0006a6  4879              LDR      r0,|L4.2188|
0006a8  7800              LDRB     r0,[r0,#0]  ; work_stat
0006aa  2803              CMP      r0,#3
0006ac  d143              BNE      |L4.1846|
;;;982    	{
;;;983    	cap_time_proc++;
0006ae  4985              LDR      r1,|L4.2244|
;;;984    	if(cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME+CAP_PAUSE2_TIME))
0006b0  4885              LDR      r0,|L4.2248|
0006b2  680a              LDR      r2,[r1,#0]            ;983  ; cap_time_proc
0006b4  1c52              ADDS     r2,r2,#1              ;983
0006b6  600a              STR      r2,[r1,#0]  ; cap_time_proc
0006b8  f9b05000          LDRSH    r5,[r0,#0]  ; CAP_ZAR_TIME
0006bc  4883              LDR      r0,|L4.2252|
0006be  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
0006c2  182b              ADDS     r3,r5,r0
0006c4  4882              LDR      r0,|L4.2256|
0006c6  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
0006ca  181c              ADDS     r4,r3,r0
0006cc  4881              LDR      r0,|L4.2260|
0006ce  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
0006d2  1826              ADDS     r6,r4,r0
;;;985    		{
;;;986    		cap_time_proc=0;
0006d4  2000              MOVS     r0,#0
0006d6  4296              CMP      r6,r2                 ;984
0006d8  dc04              BGT      |L4.1764|
;;;987    		CAP_COUNTER++;
0006da  4e7f              LDR      r6,|L4.2264|
0006dc  6008              STR      r0,[r1,#0]  ; cap_time_proc
0006de  8832              LDRH     r2,[r6,#0]  ; CAP_COUNTER
0006e0  1c52              ADDS     r2,r2,#1
0006e2  8032              STRH     r2,[r6,#0]
                  |L4.1764|
;;;988    		}
;;;989    
;;;990    	if(cap_time_proc>=CAP_ZAR_TIME)bOFF=1;
0006e4  6809              LDR      r1,[r1,#0]  ; cap_time_proc
0006e6  4e7d              LDR      r6,|L4.2268|
0006e8  2201              MOVS     r2,#1
0006ea  42a9              CMP      r1,r5
0006ec  db01              BLT      |L4.1778|
0006ee  7032              STRB     r2,[r6,#0]
0006f0  e000              B        |L4.1780|
                  |L4.1778|
;;;991    	else bOFF=0;
0006f2  7030              STRB     r0,[r6,#0]
                  |L4.1780|
;;;992    
;;;993    	if((cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME))&&(cap_time_proc<(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME)))bRAZR=1;
0006f4  4d7a              LDR      r5,|L4.2272|
0006f6  428b              CMP      r3,r1
0006f8  dc03              BGT      |L4.1794|
0006fa  428c              CMP      r4,r1
0006fc  dd01              BLE      |L4.1794|
0006fe  702a              STRB     r2,[r5,#0]
000700  e000              B        |L4.1796|
                  |L4.1794|
;;;994    	else bRAZR=0;
000702  7028              STRB     r0,[r5,#0]
                  |L4.1796|
;;;995    
;;;996    
;;;997    	CAP_TIME_SEC++;
000704  4977              LDR      r1,|L4.2276|
000706  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_SEC
000708  1c52              ADDS     r2,r2,#1
00070a  b212              SXTH     r2,r2
00070c  800a              STRH     r2,[r1,#0]
;;;998    	if(CAP_TIME_SEC>=600)
00070e  f5b27f16          CMP      r2,#0x258
000712  db10              BLT      |L4.1846|
;;;999    		{
;;;1000   		CAP_TIME_SEC=0;
000714  8008              STRH     r0,[r1,#0]
;;;1001   		
;;;1002   		CAP_TIME_MIN++;
000716  4974              LDR      r1,|L4.2280|
000718  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_MIN
00071a  1c52              ADDS     r2,r2,#1
00071c  b212              SXTH     r2,r2
00071e  800a              STRH     r2,[r1,#0]
;;;1003   		if(CAP_TIME_MIN>=60)
000720  2a3c              CMP      r2,#0x3c
000722  db08              BLT      |L4.1846|
;;;1004   			{
;;;1005   			CAP_TIME_MIN=0;
000724  8008              STRH     r0,[r1,#0]
;;;1006   	
;;;1007   			CAP_TIME_HOUR++;
000726  4971              LDR      r1,|L4.2284|
000728  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_HOUR
00072a  1c52              ADDS     r2,r2,#1
00072c  b212              SXTH     r2,r2
00072e  800a              STRH     r2,[r1,#0]
;;;1008   			if(CAP_TIME_HOUR>=24)
000730  2a18              CMP      r2,#0x18
000732  db00              BLT      |L4.1846|
;;;1009   				{
;;;1010   				CAP_TIME_HOUR=0;
000734  8008              STRH     r0,[r1,#0]
                  |L4.1846|
;;;1011   				}
;;;1012   			}
;;;1013   		}
;;;1014   	}
;;;1015   
;;;1016   }
000736  e65b              B        |L4.1008|
;;;1017   
                          ENDP

                  restart_on_GS PROC
;;;1019   //-----------------------------------------------
;;;1020   void restart_on_GS(void)
000738  2101              MOVS     r1,#1
;;;1021   {
;;;1022   lc640_write_long(EE_TIME_PROC_GS_RESTART,1);
00073a  20d0              MOVS     r0,#0xd0
00073c  f7ffbffe          B.W      lc640_write_long
;;;1023   }
;;;1024   
                          ENDP

                  restart_on_PS PROC
;;;1025   //-----------------------------------------------
;;;1026   void restart_on_PS(void)
000740  2101              MOVS     r1,#1
;;;1027   {
;;;1028   lc640_write_long(EE_TIME_PROC_PS_RESTART,1);
000742  20d4              MOVS     r0,#0xd4
000744  f7ffbffe          B.W      lc640_write_long
;;;1029   }
;;;1030   
                          ENDP

                  start_GS PROC
;;;1038   //-----------------------------------------------
;;;1039   void start_GS(void) {
000748  b570              PUSH     {r4-r6,lr}
;;;1040   	work_stat=wsGS;
00074a  4850              LDR      r0,|L4.2188|
00074c  2501              MOVS     r5,#1
;;;1041   	time_proc=0;
00074e  2400              MOVS     r4,#0
000750  7005              STRB     r5,[r0,#0]            ;1040
000752  4853              LDR      r0,|L4.2208|
;;;1042   	time_proc_remain=T_PROC_GS;
000754  4951              LDR      r1,|L4.2204|
000756  6004              STR      r4,[r0,#0]  ; time_proc
000758  4865              LDR      r0,|L4.2288|
00075a  6800              LDR      r0,[r0,#0]  ; T_PROC_GS
;;;1043   	//index_set=0;
;;;1044   	restart_on_GS();
00075c  6008              STR      r0,[r1,#0]  ; time_proc_remain
00075e  f7fffffe          BL       restart_on_GS
;;;1045   	bFAST_REG=1;
000762  4864              LDR      r0,|L4.2292|
000764  71c5              STRB     r5,[r0,#7]
;;;1046   	bU_VALID=0;
000766  7204              STRB     r4,[r0,#8]
;;;1047   	
;;;1048   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000768  4850              LDR      r0,|L4.2220|
00076a  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
00076c  b140              CBZ      r0,|L4.1920|
00076e  4848              LDR      r0,|L4.2192|
000770  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
000772  b128              CBZ      r0,|L4.1920|
;;;1049   		time_proc_phase=0;
000774  484e              LDR      r0,|L4.2224|
000776  8004              STRH     r4,[r0,#0]
;;;1050   		proc_phase=ppFF;
000778  484e              LDR      r0,|L4.2228|
00077a  7004              STRB     r4,[r0,#0]
;;;1051   		REV_STAT=rsFF;	
00077c  4845              LDR      r0,|L4.2196|
00077e  7005              STRB     r5,[r0,#0]
                  |L4.1920|
;;;1052   	}
;;;1053   
;;;1054   	milliAmperSecunda=0L;
000780  485d              LDR      r0,|L4.2296|
000782  4621              MOV      r1,r4
;;;1055   	AMPERCHAS=0L;
000784  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
000786  485d              LDR      r0,|L4.2300|
;;;1056   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000788  6004              STR      r4,[r0,#0]  ; AMPERCHAS
00078a  e8bd4070          POP      {r4-r6,lr}
00078e  f44f709e          MOV      r0,#0x13c
000792  f7ffbffe          B.W      lc640_write_long
;;;1057   }
;;;1058   
                          ENDP

                  start_PS PROC
;;;1060   //-----------------------------------------------
;;;1061   void start_PS(void) {
000796  493d              LDR      r1,|L4.2188|
000798  b510              PUSH     {r4,lr}
;;;1062   	work_stat=wsPS;
00079a  2002              MOVS     r0,#2
00079c  7008              STRB     r0,[r1,#0]
;;;1063   	time_proc=0;
00079e  4840              LDR      r0,|L4.2208|
0007a0  2400              MOVS     r4,#0
;;;1064   	time_proc_remain=T_PROC_PS;
0007a2  493e              LDR      r1,|L4.2204|
0007a4  6004              STR      r4,[r0,#0]  ; time_proc
0007a6  4856              LDR      r0,|L4.2304|
0007a8  6800              LDR      r0,[r0,#0]  ; T_PROC_PS
;;;1065   	//index_set=0;
;;;1066   	restart_on_PS();
0007aa  6008              STR      r0,[r1,#0]  ; time_proc_remain
0007ac  f7fffffe          BL       restart_on_PS
;;;1067   	bFAST_REG=1;
0007b0  4950              LDR      r1,|L4.2292|
0007b2  2001              MOVS     r0,#1
0007b4  71c8              STRB     r0,[r1,#7]
;;;1068   	bU_VALID=0;
0007b6  720c              STRB     r4,[r1,#8]
;;;1069   	
;;;1070   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0007b8  493c              LDR      r1,|L4.2220|
0007ba  8809              LDRH     r1,[r1,#0]  ; REV_IS_ON
0007bc  b141              CBZ      r1,|L4.2000|
0007be  4934              LDR      r1,|L4.2192|
0007c0  8809              LDRH     r1,[r1,#0]  ; AVT_REV_IS_ON
0007c2  b129              CBZ      r1,|L4.2000|
;;;1071   		time_proc_phase=0;
0007c4  493a              LDR      r1,|L4.2224|
0007c6  800c              STRH     r4,[r1,#0]
;;;1072   		proc_phase=ppFF;
0007c8  493a              LDR      r1,|L4.2228|
0007ca  700c              STRB     r4,[r1,#0]
;;;1073   		REV_STAT=rsFF;	
0007cc  4931              LDR      r1,|L4.2196|
0007ce  7008              STRB     r0,[r1,#0]
                  |L4.2000|
;;;1074   	}
;;;1075   	milliAmperSecunda=0L;
0007d0  4849              LDR      r0,|L4.2296|
0007d2  4621              MOV      r1,r4
;;;1076   	AMPERCHAS=0L;
0007d4  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
0007d6  4849              LDR      r0,|L4.2300|
;;;1077   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
0007d8  6004              STR      r4,[r0,#0]  ; AMPERCHAS
0007da  e8bd4010          POP      {r4,lr}
0007de  f44f709e          MOV      r0,#0x13c
0007e2  f7ffbffe          B.W      lc640_write_long
;;;1078   }
;;;1079   
                          ENDP

                  start_CAP PROC
;;;1080   //-----------------------------------------------
;;;1081   void start_CAP(void) {
0007e6  4929              LDR      r1,|L4.2188|
;;;1082   	work_stat=wsCAP;
0007e8  2003              MOVS     r0,#3
0007ea  7008              STRB     r0,[r1,#0]
;;;1083   }
0007ec  4770              BX       lr
;;;1084   
                          ENDP

                  pause_CAP PROC
;;;1085   //-----------------------------------------------
;;;1086   void pause_CAP(void) {
0007ee  4927              LDR      r1,|L4.2188|
;;;1087   	work_stat=wsOFF;
0007f0  2000              MOVS     r0,#0
0007f2  7008              STRB     r0,[r1,#0]
;;;1088   }
0007f4  4770              BX       lr
;;;1089   
                          ENDP

                  stop_CAP PROC
;;;1090   //-----------------------------------------------
;;;1091   void stop_CAP(void) {
0007f6  4925              LDR      r1,|L4.2188|
;;;1092   	work_stat=wsOFF;
0007f8  2000              MOVS     r0,#0
0007fa  7008              STRB     r0,[r1,#0]
;;;1093   
;;;1094   }
0007fc  4770              BX       lr
;;;1095   
                          ENDP

                  reset_CAP PROC
;;;1096   //-----------------------------------------------
;;;1097   void reset_CAP(void) {
0007fe  4923              LDR      r1,|L4.2188|
;;;1098   	work_stat=wsOFF;
000800  2000              MOVS     r0,#0
000802  7008              STRB     r0,[r1,#0]
;;;1099   	cap_time_proc=0;
000804  492f              LDR      r1,|L4.2244|
;;;1100   	CAP_COUNTER=0;
000806  6008              STR      r0,[r1,#0]  ; cap_time_proc
000808  4933              LDR      r1,|L4.2264|
00080a  8008              STRH     r0,[r1,#0]
;;;1101   	CAP_TIME_SEC=0;
00080c  4935              LDR      r1,|L4.2276|
00080e  8008              STRH     r0,[r1,#0]
;;;1102   	CAP_TIME_MIN=0;
000810  4935              LDR      r1,|L4.2280|
000812  8008              STRH     r0,[r1,#0]
;;;1103   	CAP_TIME_HOUR=0;
000814  4935              LDR      r1,|L4.2284|
000816  8008              STRH     r0,[r1,#0]
;;;1104   }
000818  4770              BX       lr
;;;1105   
                          ENDP

                  stop_proc PROC
;;;1106   //-----------------------------------------------
;;;1107   void stop_proc(void)
00081a  491c              LDR      r1,|L4.2188|
;;;1108   {
;;;1109   work_stat=wsOFF;
00081c  2000              MOVS     r0,#0
00081e  7008              STRB     r0,[r1,#0]
;;;1110   restart_off();
000820  e7fe              B        restart_off
;;;1111   }
;;;1112   
                          ENDP

                  find_U_curve PROC
;;;1113   //-----------------------------------------------
;;;1114   short find_U_curve(signed short in)
000822  e92d41f0          PUSH     {r4-r8,lr}
;;;1115   {
;;;1116   short ii,i=0,out=0;
000826  2400              MOVS     r4,#0
000828  4606              MOV      r6,r0                 ;1115
;;;1117   
;;;1118   ii=0;
;;;1119   
;;;1120   if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) >= in)
00082a  f44f75fa          MOV      r5,#0x1f4
00082e  46a0              MOV      r8,r4                 ;1116
000830  4627              MOV      r7,r4                 ;1118
000832  4628              MOV      r0,r5
000834  f7fffffe          BL       lc640_read_int
000838  42b0              CMP      r0,r6
00083a  da70              BGE      |L4.2334|
                  |L4.2108|
;;;1121   	{
;;;1122   	out=0;
;;;1123   	}
;;;1124   else 
;;;1125   	{
;;;1126   	for (ii=0;ii<=200;ii+=10)
;;;1127   		{
;;;1128   		if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
00083c  eb050047          ADD      r0,r5,r7,LSL #1
000840  f7fffffe          BL       lc640_read_int
000844  42b0              CMP      r0,r6
000846  dc00              BGT      |L4.2122|
;;;1129   			{
;;;1130   			i=ii;
000848  463c              MOV      r4,r7
                  |L4.2122|
00084a  370a              ADDS     r7,r7,#0xa            ;1126
00084c  b23f              SXTH     r7,r7                 ;1126
00084e  2fc8              CMP      r7,#0xc8              ;1126
000850  ddf4              BLE      |L4.2108|
;;;1131   			}
;;;1132   		else continue;
;;;1133   		}
;;;1134   	if(i<200)
000852  2cc8              CMP      r4,#0xc8
000854  da56              BGE      |L4.2308|
;;;1135   		{
;;;1136   		for (ii=i;ii<i+10;ii++)
000856  f104070a          ADD      r7,r4,#0xa
00085a  e008              B        |L4.2158|
                  |L4.2140|
;;;1137   			{
;;;1138   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
00085c  eb050044          ADD      r0,r5,r4,LSL #1
000860  f7fffffe          BL       lc640_read_int
000864  42b0              CMP      r0,r6
000866  dc00              BGT      |L4.2154|
;;;1139   				{
;;;1140   				out=ii;
000868  46a0              MOV      r8,r4
                  |L4.2154|
00086a  1c64              ADDS     r4,r4,#1              ;1136
00086c  b224              SXTH     r4,r4                 ;1136
                  |L4.2158|
00086e  42bc              CMP      r4,r7                 ;1136
000870  dbf4              BLT      |L4.2140|
000872  e054              B        |L4.2334|
                  |L4.2164|
                          DCD      I_ug_temp
                  |L4.2168|
                          DCD      I_maxp
                  |L4.2172|
                          DCD      CUR_OFF_LEVEL_RELATIV
                  |L4.2176|
                          DCD      curr_off_temp
                  |L4.2180|
                          DCD      load_I
                  |L4.2184|
                          DCD      CUR_OFF_T_ON
                  |L4.2188|
                          DCD      work_stat
                  |L4.2192|
                          DCD      AVT_REV_IS_ON
                  |L4.2196|
                          DCD      REV_STAT
                  |L4.2200|
                          DCD      AVT_REV_TIME_PAUSE
                  |L4.2204|
                          DCD      time_proc_remain
                  |L4.2208|
                          DCD      time_proc
                  |L4.2212|
                          DCD      restart_enable
                  |L4.2216|
                          DCD      T_PROC_GS_MODE
                  |L4.2220|
                          DCD      REV_IS_ON
                  |L4.2224|
                          DCD      time_proc_phase
                  |L4.2228|
                          DCD      proc_phase
                  |L4.2232|
                          DCD      AVT_REV_TIME_FF
                  |L4.2236|
                          DCD      AVT_REV_TIME_REW
                  |L4.2240|
                          DCD      T_PROC_PS_MODE
                  |L4.2244|
                          DCD      cap_time_proc
                  |L4.2248|
                          DCD      CAP_ZAR_TIME
                  |L4.2252|
                          DCD      CAP_PAUSE1_TIME
                  |L4.2256|
                          DCD      CAP_RAZR_TIME
                  |L4.2260|
                          DCD      CAP_PAUSE2_TIME
                  |L4.2264|
                          DCD      CAP_COUNTER
                  |L4.2268|
                          DCD      bOFF
                  |L4.2272|
                          DCD      bRAZR
                  |L4.2276|
                          DCD      CAP_TIME_SEC
                  |L4.2280|
                          DCD      CAP_TIME_MIN
                  |L4.2284|
                          DCD      CAP_TIME_HOUR
                  |L4.2288|
                          DCD      T_PROC_GS
                  |L4.2292|
                          DCD      ||area_number.24||
                  |L4.2296|
                          DCD      milliAmperSecunda
                  |L4.2300|
                          DCD      AMPERCHAS
                  |L4.2304|
                          DCD      T_PROC_PS
                  |L4.2308|
;;;1141   				}
;;;1142   			else continue;
;;;1143   			}
;;;1144   		}
;;;1145   	else 
;;;1146   		{
;;;1147   		for (ii=200;ii<=202;ii++)
000904  f05f04c8          MOVS.W   r4,#0xc8
                  |L4.2312|
;;;1148   			{
;;;1149   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000908  eb050044          ADD      r0,r5,r4,LSL #1
00090c  f7fffffe          BL       lc640_read_int
000910  42b0              CMP      r0,r6
000912  dc00              BGT      |L4.2326|
;;;1150   				{
;;;1151   				out=ii;
000914  46a0              MOV      r8,r4
                  |L4.2326|
000916  1c64              ADDS     r4,r4,#1              ;1147
000918  b224              SXTH     r4,r4                 ;1147
00091a  2cca              CMP      r4,#0xca              ;1147
00091c  ddf4              BLE      |L4.2312|
                  |L4.2334|
;;;1152   				}
;;;1153   			else continue;
;;;1154   			}
;;;1155   	
;;;1156   	
;;;1157   		}
;;;1158   	}
;;;1159   
;;;1160   return out;
00091e  4640              MOV      r0,r8
;;;1161   }
000920  e513              B        |L4.842|
;;;1162   
                          ENDP

                  find_I_curve PROC
;;;1163   //-----------------------------------------------
;;;1164   short find_I_curve(signed short in)
000922  e92d41f0          PUSH     {r4-r8,lr}
;;;1165   {
;;;1166   short ii,i=0,out=0;
000926  2400              MOVS     r4,#0
000928  4606              MOV      r6,r0                 ;1165
;;;1167   
;;;1168   ii=0;
;;;1169   
;;;1170   if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) >= in)
00092a  f44f757a          MOV      r5,#0x3e8
00092e  46a0              MOV      r8,r4                 ;1166
000930  4627              MOV      r7,r4                 ;1168
000932  4628              MOV      r0,r5
000934  f7fffffe          BL       lc640_read_int
000938  42b0              CMP      r0,r6
00093a  da28              BGE      |L4.2446|
                  |L4.2364|
;;;1171   	{
;;;1172   	out=0;
;;;1173   	}
;;;1174   else 
;;;1175   	{
;;;1176   	for (ii=0;ii<=200;ii+=10)
;;;1177   		{
;;;1178   		if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
00093c  eb050047          ADD      r0,r5,r7,LSL #1
000940  f7fffffe          BL       lc640_read_int
000944  42b0              CMP      r0,r6
000946  dc00              BGT      |L4.2378|
;;;1179   			{
;;;1180   			i=ii;
000948  463c              MOV      r4,r7
                  |L4.2378|
00094a  370a              ADDS     r7,r7,#0xa            ;1176
00094c  b23f              SXTH     r7,r7                 ;1176
00094e  2fc8              CMP      r7,#0xc8              ;1176
000950  ddf4              BLE      |L4.2364|
;;;1181   			}
;;;1182   		else continue;
;;;1183   		}
;;;1184   	
;;;1185   	if(i<200)
000952  2cc8              CMP      r4,#0xc8
000954  da0e              BGE      |L4.2420|
;;;1186   		{
;;;1187   		for (ii=i;ii<i+10;ii++)
000956  f104070a          ADD      r7,r4,#0xa
00095a  e008              B        |L4.2414|
                  |L4.2396|
;;;1188   			{
;;;1189   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
00095c  eb050044          ADD      r0,r5,r4,LSL #1
000960  f7fffffe          BL       lc640_read_int
000964  42b0              CMP      r0,r6
000966  dc00              BGT      |L4.2410|
;;;1190   				{
;;;1191   				out=ii;
000968  46a0              MOV      r8,r4
                  |L4.2410|
00096a  1c64              ADDS     r4,r4,#1              ;1187
00096c  b224              SXTH     r4,r4                 ;1187
                  |L4.2414|
00096e  42bc              CMP      r4,r7                 ;1187
000970  dbf4              BLT      |L4.2396|
000972  e00c              B        |L4.2446|
                  |L4.2420|
;;;1192   				}
;;;1193   			else continue;
;;;1194   			}
;;;1195   		}
;;;1196   	else 
;;;1197   		{
;;;1198   		for (ii=200;ii<=202;ii++)
000974  f05f04c8          MOVS.W   r4,#0xc8
                  |L4.2424|
;;;1199   			{
;;;1200   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000978  eb050044          ADD      r0,r5,r4,LSL #1
00097c  f7fffffe          BL       lc640_read_int
000980  42b0              CMP      r0,r6
000982  dc00              BGT      |L4.2438|
;;;1201   				{
;;;1202   				out=ii;
000984  46a0              MOV      r8,r4
                  |L4.2438|
000986  1c64              ADDS     r4,r4,#1              ;1198
000988  b224              SXTH     r4,r4                 ;1198
00098a  2cca              CMP      r4,#0xca              ;1198
00098c  ddf4              BLE      |L4.2424|
                  |L4.2446|
;;;1203   				}
;;;1204   			else continue;
;;;1205   			}
;;;1206   		}
;;;1207   	}
;;;1208   return out;
00098e  4640              MOV      r0,r8
;;;1209   }
000990  e4db              B        |L4.842|
;;;1210   
                          ENDP

                  viz_hndl PROC
;;;1212   //-----------------------------------------------
;;;1213   void viz_hndl(void)
000992  e92d5ff0          PUSH     {r4-r12,lr}
;;;1214   {
;;;1215   if(ind==iK_viz_u)
000996  f8df9408          LDR      r9,|L4.3488|
;;;1216   	{
;;;1217   	if(viz_stat==vsON)
;;;1218   		{
;;;1219   		viz_stat_cnt++;
;;;1220   		if(viz_stat_cnt>=10221)
00099a  f24278ed          MOV      r8,#0x27ed
;;;1221   			{
;;;1222   			viz_stat=vsOFF;
00099e  f04f0a00          MOV      r10,#0
0009a2  f8990000          LDRB     r0,[r9,#0]            ;1215  ; a_ind
;;;1223   			lc640_write_int(EE_U_CURVE_IS_ON,0xabcd);
;;;1224   			//ind=iK_viz_sel;
;;;1225   			tree_down(0,0);
;;;1226   			}
;;;1227   		tst_pwm_i=1022;
0009a6  f2403bfe          MOV      r11,#0x3fe
;;;1228   		tst_pwm_u=(viz_stat_cnt/50)*5;
0009aa  4ffe              LDR      r7,|L4.3492|
0009ac  4efe              LDR      r6,|L4.3496|
0009ae  4cff              LDR      r4,|L4.3500|
0009b0  2532              MOVS     r5,#0x32
0009b2  2845              CMP      r0,#0x45              ;1215
0009b4  d12a              BNE      |L4.2572|
0009b6  7830              LDRB     r0,[r6,#0]            ;1217  ; viz_stat
0009b8  2801              CMP      r0,#1                 ;1217
0009ba  d158              BNE      |L4.2670|
0009bc  8820              LDRH     r0,[r4,#0]            ;1219  ; viz_stat_cnt
0009be  1c40              ADDS     r0,r0,#1              ;1219
0009c0  b200              SXTH     r0,r0                 ;1219
0009c2  8020              STRH     r0,[r4,#0]            ;1219
0009c4  4540              CMP      r0,r8                 ;1220
0009c6  db09              BLT      |L4.2524|
0009c8  f886a000          STRB     r10,[r6,#0]           ;1222
0009cc  49f8              LDR      r1,|L4.3504|
0009ce  20ac              MOVS     r0,#0xac              ;1223
0009d0  f7fffffe          BL       lc640_write_int
0009d4  2100              MOVS     r1,#0                 ;1225
0009d6  4608              MOV      r0,r1                 ;1225
0009d8  f7fffffe          BL       tree_down
                  |L4.2524|
0009dc  49f5              LDR      r1,|L4.3508|
0009de  f8a1b000          STRH     r11,[r1,#0]           ;1227
0009e2  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
0009e6  fb91f0f5          SDIV     r0,r1,r5
;;;1229   		if(viz_stat_cnt%50==49)
0009ea  fb051110          MLS      r1,r5,r0,r1
0009ee  eb000280          ADD      r2,r0,r0,LSL #2       ;1228
0009f2  803a              STRH     r2,[r7,#0]            ;1228
0009f4  2931              CMP      r1,#0x31
0009f6  d109              BNE      |L4.2572|
;;;1230   			{
;;;1231   			lc640_write_int(SEKTOR_KURVE_U+((viz_stat_cnt/50)*2),load_U);
0009f8  f44f71fa          MOV      r1,#0x1f4
0009fc  eb010040          ADD      r0,r1,r0,LSL #1
000a00  49ed              LDR      r1,|L4.3512|
000a02  b200              SXTH     r0,r0
000a04  f9b11000          LDRSH    r1,[r1,#0]  ; load_U
000a08  f7fffffe          BL       lc640_write_int
                  |L4.2572|
;;;1232   			}
;;;1233   		}
;;;1234   	}
;;;1235   
;;;1236   if(ind==iK_viz_i)
000a0c  f8990000          LDRB     r0,[r9,#0]  ; a_ind
000a10  2844              CMP      r0,#0x44
000a12  d12c              BNE      |L4.2670|
;;;1237   	{
;;;1238   	if(viz_stat==vsON)
000a14  7830              LDRB     r0,[r6,#0]  ; viz_stat
000a16  2801              CMP      r0,#1
000a18  d129              BNE      |L4.2670|
;;;1239   		{
;;;1240   		viz_stat_cnt++;
000a1a  8820              LDRH     r0,[r4,#0]  ; viz_stat_cnt
000a1c  1c40              ADDS     r0,r0,#1
000a1e  b200              SXTH     r0,r0
000a20  8020              STRH     r0,[r4,#0]
;;;1241   		if(viz_stat_cnt>=10221)
000a22  4540              CMP      r0,r8
000a24  db09              BLT      |L4.2618|
;;;1242   			{
;;;1243   			viz_stat=vsOFF;
000a26  f886a000          STRB     r10,[r6,#0]
;;;1244   			lc640_write_int(EE_I_CURVE_IS_ON,0xabcd);
000a2a  49e1              LDR      r1,|L4.3504|
000a2c  20ae              MOVS     r0,#0xae
000a2e  f7fffffe          BL       lc640_write_int
;;;1245   			//ind=iK_viz_sel;
;;;1246   			tree_down(0,0);
000a32  2100              MOVS     r1,#0
000a34  4608              MOV      r0,r1
000a36  f7fffffe          BL       tree_down
                  |L4.2618|
;;;1247   			}
;;;1248   		tst_pwm_u=1022;
000a3a  f8a7b000          STRH     r11,[r7,#0]
;;;1249   		tst_pwm_i=(viz_stat_cnt/50)*5;
000a3e  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000a42  4bdc              LDR      r3,|L4.3508|
000a44  fb91f0f5          SDIV     r0,r1,r5
;;;1250   		if(viz_stat_cnt%50==49)
000a48  fb051110          MLS      r1,r5,r0,r1
000a4c  eb000280          ADD      r2,r0,r0,LSL #2       ;1249
000a50  801a              STRH     r2,[r3,#0]            ;1249
000a52  2931              CMP      r1,#0x31
000a54  d10b              BNE      |L4.2670|
;;;1251   			{
;;;1252   			lc640_write_int(SEKTOR_KURVE_I+((viz_stat_cnt/50)*2),load_I);
000a56  f44f717a          MOV      r1,#0x3e8
000a5a  eb010040          ADD      r0,r1,r0,LSL #1
000a5e  49d7              LDR      r1,|L4.3516|
000a60  b200              SXTH     r0,r0
000a62  f9b11000          LDRSH    r1,[r1,#0]  ; load_I
000a66  e8bd5ff0          POP      {r4-r12,lr}
000a6a  f7ffbffe          B.W      lc640_write_int
                  |L4.2670|
;;;1253   			}
;;;1254   		}
;;;1255   	}
;;;1256   }
000a6e  e60c              B        |L4.1674|
;;;1257   
                          ENDP

                  bps_hndl PROC
;;;1260   //-----------------------------------------------
;;;1261   void bps_hndl(void) /*ГЦ, 10 раз в секунду*/
000a70  e92d5ffc          PUSH     {r2-r12,lr}
;;;1262   {
;;;1263   char /*ptr__,*/i;
;;;1264   
;;;1265   if((REV_IS_ON)&&(AVT_REV_IS_ON)) {
000a74  48d2              LDR      r0,|L4.3520|
;;;1266   	if(work_stat==wsGS) {
000a76  f8dfa34c          LDR      r10,|L4.3524|
000a7a  8800              LDRH     r0,[r0,#0]            ;1265  ; REV_IS_ON
000a7c  b338              CBZ      r0,|L4.2766|
000a7e  48d2              LDR      r0,|L4.3528|
000a80  8800              LDRH     r0,[r0,#0]            ;1265  ; AVT_REV_IS_ON
000a82  b320              CBZ      r0,|L4.2766|
;;;1267   		if(REV_STAT==rsFF) 	I_ug_temp=AVT_REV_I_NOM_FF;
000a84  48d1              LDR      r0,|L4.3532|
000a86  f89a3000          LDRB     r3,[r10,#0]           ;1266  ; work_stat
000a8a  f9b01000          LDRSH    r1,[r0,#0]
000a8e  48d0              LDR      r0,|L4.3536|
000a90  2b01              CMP      r3,#1                 ;1266
000a92  7800              LDRB     r0,[r0,#0]
000a94  d007              BEQ      |L4.2726|
;;;1268   		else if (REV_STAT==rsREW) I_ug_temp=AVT_REV_I_NOM_REW;
;;;1269   	} else if (work_stat==wsPS) {
;;;1270   		if(REV_STAT==rsFF) 	U_up_temp=AVT_REV_U_NOM_FF;
000a96  4acf              LDR      r2,|L4.3540|
000a98  2b02              CMP      r3,#2                 ;1269
000a9a  f9b22000          LDRSH    r2,[r2,#0]
000a9e  d00d              BEQ      |L4.2748|
;;;1271   		else if (REV_STAT==rsREW) U_up_temp=AVT_REV_U_NOM_REW;
;;;1272   	} else {
;;;1273   		U_up_temp=AVT_REV_U_NOM_FF;
000aa0  48cd              LDR      r0,|L4.3544|
000aa2  8002              STRH     r2,[r0,#0]
;;;1274   		I_ug_temp=AVT_REV_I_NOM_FF;
000aa4  e003              B        |L4.2734|
                  |L4.2726|
000aa6  2801              CMP      r0,#1                 ;1267
000aa8  d001              BEQ      |L4.2734|
000aaa  b110              CBZ      r0,|L4.2738|
000aac  e025              B        |L4.2810|
                  |L4.2734|
000aae  48cb              LDR      r0,|L4.3548|
000ab0  e022              B        |L4.2808|
                  |L4.2738|
000ab2  48cb              LDR      r0,|L4.3552|
000ab4  49c9              LDR      r1,|L4.3548|
000ab6  8800              LDRH     r0,[r0,#0]            ;1268  ; AVT_REV_I_NOM_REW
000ab8  8008              STRH     r0,[r1,#0]            ;1268
000aba  e01e              B        |L4.2810|
                  |L4.2748|
000abc  2801              CMP      r0,#1                 ;1270
000abe  d001              BEQ      |L4.2756|
000ac0  b118              CBZ      r0,|L4.2762|
000ac2  e01a              B        |L4.2810|
                  |L4.2756|
000ac4  48c4              LDR      r0,|L4.3544|
000ac6  8002              STRH     r2,[r0,#0]            ;1270
000ac8  e017              B        |L4.2810|
                  |L4.2762|
000aca  48c6              LDR      r0,|L4.3556|
000acc  e012              B        |L4.2804|
                  |L4.2766|
;;;1275   	}
;;;1276   } else {
;;;1277   
;;;1278   if(fiks_stat_I==2)I_ug_temp=I_ug3;
000ace  48c6              LDR      r0,|L4.3560|
000ad0  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_I
000ad4  2802              CMP      r0,#2
000ad6  d05a              BEQ      |L4.2958|
;;;1279   else if(fiks_stat_I==1)I_ug_temp=I_ug2;
000ad8  2801              CMP      r0,#1
000ada  d05a              BEQ      |L4.2962|
;;;1280   else I_ug_temp=I_ug;
000adc  48c3              LDR      r0,|L4.3564|
                  |L4.2782|
000ade  8801              LDRH     r1,[r0,#0]            ;1279  ; I_ug2
000ae0  48be              LDR      r0,|L4.3548|
000ae2  8001              STRH     r1,[r0,#0]            ;1279
;;;1281   
;;;1282   if(fiks_stat_U==2)U_up_temp=U_up3;
000ae4  48c2              LDR      r0,|L4.3568|
000ae6  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_U
000aea  2802              CMP      r0,#2
000aec  d053              BEQ      |L4.2966|
;;;1283   	else if(fiks_stat_U==1)U_up_temp=U_up2;
000aee  2801              CMP      r0,#1
000af0  d053              BEQ      |L4.2970|
;;;1284   	else U_up_temp=U_up;
000af2  48c0              LDR      r0,|L4.3572|
                  |L4.2804|
000af4  8801              LDRH     r1,[r0,#0]            ;1283  ; U_up2
000af6  48b8              LDR      r0,|L4.3544|
                  |L4.2808|
000af8  8001              STRH     r1,[r0,#0]            ;1283
                  |L4.2810|
;;;1285   
;;;1286   }
;;;1287   	
;;;1288   gran(&I_ug_temp,I_MIN_IPS,I_MAX_IPS);
000afa  48bf              LDR      r0,|L4.3576|
000afc  f9b02000          LDRSH    r2,[r0,#0]  ; I_MAX_IPS
000b00  48be              LDR      r0,|L4.3580|
000b02  f9b01000          LDRSH    r1,[r0,#0]  ; I_MIN_IPS
000b06  48b5              LDR      r0,|L4.3548|
000b08  f7fffffe          BL       gran
;;;1289   gran(&U_up_temp,U_MIN,U_MAX);
000b0c  48bc              LDR      r0,|L4.3584|
000b0e  f9b02000          LDRSH    r2,[r0,#0]  ; U_MAX
000b12  48bc              LDR      r0,|L4.3588|
000b14  f9b01000          LDRSH    r1,[r0,#0]  ; U_MIN
000b18  48af              LDR      r0,|L4.3544|
000b1a  f7fffffe          BL       gran
;;;1290   
;;;1291   if(sh_cnt0<10) {
000b1e  4eba              LDR      r6,|L4.3592|
000b20  2500              MOVS     r5,#0                 ;1265
000b22  f04f0801          MOV      r8,#1                 ;1266
000b26  7970              LDRB     r0,[r6,#5]  ; sh_cnt0
000b28  280a              CMP      r0,#0xa
000b2a  d207              BCS      |L4.2876|
;;;1292   	sh_cnt0++;
000b2c  1c40              ADDS     r0,r0,#1
000b2e  b2c0              UXTB     r0,r0
000b30  7170              STRB     r0,[r6,#5]
;;;1293   	if(sh_cnt0>=10) {
000b32  280a              CMP      r0,#0xa
000b34  d302              BCC      |L4.2876|
;;;1294   		sh_cnt0=0;
000b36  7175              STRB     r5,[r6,#5]
;;;1295   		b1Hz_sh=1;
000b38  f8868006          STRB     r8,[r6,#6]
                  |L4.2876|
;;;1296   	}
;;;1297   }
;;;1298   
;;;1299   if(ind==iK_load)
000b3c  4898              LDR      r0,|L4.3488|
;;;1300   	{
;;;1301   	if(sub_ind==0)
;;;1302   		{
;;;1303   		cntrl_stat_U=1022;
;;;1304   		cntrl_stat_I=1022;
;;;1305   		bps_stat=stON;
000b3e  49b3              LDR      r1,|L4.3596|
;;;1306   
;;;1307   		for(i=0;i<NUMIST;i++)
;;;1308   			{
;;;1309   			bps[i]._vol_u=1022;
;;;1310   			bps[i]._vol_i=1022;
;;;1311   			bps[i]._flags_tu=0;
;;;1312   			}
;;;1313   		}
;;;1314   	else if(sub_ind==1)
;;;1315   		{
;;;1316   		if(phase==0)
000b40  4ab3              LDR      r2,|L4.3600|
000b42  7803              LDRB     r3,[r0,#0]            ;1299  ; a_ind
000b44  4cb3              LDR      r4,|L4.3604|
000b46  4fb4              LDR      r7,|L4.3608|
000b48  f24039fe          MOV      r9,#0x3fe             ;1303
000b4c  2b30              CMP      r3,#0x30              ;1299
000b4e  d026              BEQ      |L4.2974|
;;;1317   			{
;;;1318     			cntrl_stat_U=0;
;;;1319   			cntrl_stat_I=0;
;;;1320   			bps_stat=stOFF;
;;;1321   
;;;1322   			for(i=0;i<NUMIST;i++)
;;;1323   				{
;;;1324   				bps[i]._vol_u=0;
;;;1325   				bps[i]._vol_i=0;
;;;1326   				bps[i]._flags_tu=1;
;;;1327   				}
;;;1328   			}
;;;1329   		else if(phase==1)
;;;1330   			{
;;;1331     			cntrl_stat_U=1022;
;;;1332   			cntrl_stat_I=1022;
;;;1333   			bps_stat=stON;
;;;1334   
;;;1335   			for(i=0;i<NUMIST;i++)
;;;1336   				{
;;;1337   				bps[i]._vol_u=1022;
;;;1338   				bps[i]._vol_i=1022;
;;;1339   				bps[i]._flags_tu=0;
;;;1340   				}
;;;1341   			}
;;;1342   		}
;;;1343   	else 
;;;1344   		{
;;;1345   		bps_stat=stOFF;
;;;1346   
;;;1347   		bps[0]._vol_u=0;
;;;1348   		bps[0]._vol_i=0;
;;;1349   		bps[0]._flags_tu=1;
;;;1350   		}
;;;1351   	}
;;;1352   else if(ind==iK_bps)
000b50  2b2b              CMP      r3,#0x2b
000b52  d07a              BEQ      |L4.3146|
;;;1353   	{
;;;1354   	if(sub_ind==0)
;;;1355   		{
;;;1356   		cntrl_stat_U=1022;
;;;1357   		cntrl_stat_I=1022;
;;;1358   		bps_stat=stON;
;;;1359   
;;;1360   		bps[0]._vol_u=0;
;;;1361   		bps[0]._vol_i=0;
;;;1362   		bps[0]._flags_tu=1;
;;;1363   
;;;1364   		bps[1]._vol_u=0;
;;;1365   		bps[1]._vol_i=0;
;;;1366   		bps[1]._flags_tu=1;
;;;1367   
;;;1368   		bps[1]._vol_u=0;
;;;1369   		bps[1]._vol_i=0;
;;;1370   		bps[1]._flags_tu=1;
;;;1371   
;;;1372   		bps[2]._vol_u=0;
;;;1373   		bps[2]._vol_i=0;
;;;1374   		bps[2]._flags_tu=1;
;;;1375   
;;;1376   		bps[3]._vol_u=0;
;;;1377   		bps[3]._vol_i=0;
;;;1378   		bps[3]._flags_tu=1;
;;;1379   
;;;1380   		bps[4]._vol_u=0;
;;;1381   		bps[4]._vol_i=0;
;;;1382   		bps[4]._flags_tu=1;
;;;1383   
;;;1384   		bps[5]._vol_u=0;
;;;1385   		bps[5]._vol_i=0;
;;;1386   		bps[5]._flags_tu=1;
;;;1387   
;;;1388   		bps[6]._vol_u=0;
;;;1389   		bps[6]._vol_i=0;
;;;1390   		bps[6]._flags_tu=1;
;;;1391   
;;;1392   		bps[7]._vol_u=0;
;;;1393   		bps[7]._vol_i=0;
;;;1394   		bps[7]._flags_tu=1;
;;;1395   
;;;1396   		bps[8]._vol_u=0;
;;;1397   		bps[8]._vol_i=0;
;;;1398   		bps[8]._flags_tu=1;
;;;1399   		
;;;1400   		bps[9]._vol_u=0;
;;;1401   		bps[9]._vol_i=0;
;;;1402   		bps[9]._flags_tu=1;
;;;1403   
;;;1404   		bps[10]._vol_u=0;
;;;1405   		bps[10]._vol_i=0;
;;;1406   		bps[10]._flags_tu=1;
;;;1407   
;;;1408   		bps[11]._vol_u=0;
;;;1409   		bps[11]._vol_i=0;
;;;1410   		bps[11]._flags_tu=1;
;;;1411    		
;;;1412   		bps[sub_ind1]._vol_u=1022;
;;;1413   		bps[sub_ind1]._vol_i=1022;
;;;1414   		bps[sub_ind1]._flags_tu=0;
;;;1415   		}
;;;1416   
;;;1417   	else if(sub_ind==3)
;;;1418   		{
;;;1419   		if(phase==0)
;;;1420   			{
;;;1421     			cntrl_stat_U=0;
;;;1422   			cntrl_stat_I=0;
;;;1423   			bps_stat=stOFF;
;;;1424   			bps[0]._vol_u=0;
;;;1425   			bps[0]._vol_i=0;
;;;1426   			bps[0]._flags_tu=1;
;;;1427   	
;;;1428   			bps[1]._vol_u=0;
;;;1429   			bps[1]._vol_i=0;
;;;1430   			bps[1]._flags_tu=1;
;;;1431   	
;;;1432   			bps[1]._vol_u=0;
;;;1433   			bps[1]._vol_i=0;
;;;1434   			bps[1]._flags_tu=1;
;;;1435   	
;;;1436   			bps[2]._vol_u=0;
;;;1437   			bps[2]._vol_i=0;
;;;1438   			bps[2]._flags_tu=1;
;;;1439   	
;;;1440   			bps[3]._vol_u=0;
;;;1441   			bps[3]._vol_i=0;
;;;1442   			bps[3]._flags_tu=1;
;;;1443   	
;;;1444   			bps[4]._vol_u=0;
;;;1445   			bps[4]._vol_i=0;
;;;1446   			bps[4]._flags_tu=1;
;;;1447   	
;;;1448   			bps[5]._vol_u=0;
;;;1449   			bps[5]._vol_i=0;
;;;1450   			bps[5]._flags_tu=1;
;;;1451   	
;;;1452   			bps[6]._vol_u=0;
;;;1453   			bps[6]._vol_i=0;
;;;1454   			bps[6]._flags_tu=1;
;;;1455   	
;;;1456   			bps[7]._vol_u=0;
;;;1457   			bps[7]._vol_i=0;
;;;1458   			bps[7]._flags_tu=1;
;;;1459   	
;;;1460   			bps[8]._vol_u=0;
;;;1461   			bps[8]._vol_i=0;
;;;1462   			bps[8]._flags_tu=1;
;;;1463   			
;;;1464   			bps[9]._vol_u=0;
;;;1465   			bps[9]._vol_i=0;
;;;1466   			bps[9]._flags_tu=1;
;;;1467   	
;;;1468   			bps[10]._vol_u=0;
;;;1469   			bps[10]._vol_i=0;
;;;1470   			bps[10]._flags_tu=1;
;;;1471   	
;;;1472   			bps[11]._vol_u=0;
;;;1473   			bps[11]._vol_i=0;
;;;1474   			bps[11]._flags_tu=1;
;;;1475   
;;;1476   			}
;;;1477   		else if(phase==1)
;;;1478   			{
;;;1479     			cntrl_stat_U=1022;
;;;1480   			cntrl_stat_I=1022;
;;;1481   			bps_stat=stON;
;;;1482   
;;;1483   			bps[0]._vol_u=0;
;;;1484   			bps[0]._vol_i=0;
;;;1485   			bps[0]._flags_tu=1;
;;;1486   	
;;;1487   			bps[1]._vol_u=0;
;;;1488   			bps[1]._vol_i=0;
;;;1489   			bps[1]._flags_tu=1;
;;;1490   	
;;;1491   			bps[1]._vol_u=0;
;;;1492   			bps[1]._vol_i=0;
;;;1493   			bps[1]._flags_tu=1;
;;;1494   	
;;;1495   			bps[2]._vol_u=0;
;;;1496   			bps[2]._vol_i=0;
;;;1497   			bps[2]._flags_tu=1;
;;;1498   	
;;;1499   			bps[3]._vol_u=0;
;;;1500   			bps[3]._vol_i=0;
;;;1501   			bps[3]._flags_tu=1;
;;;1502   	
;;;1503   			bps[4]._vol_u=0;
;;;1504   			bps[4]._vol_i=0;
;;;1505   			bps[4]._flags_tu=1;
;;;1506   	
;;;1507   			bps[5]._vol_u=0;
;;;1508   			bps[5]._vol_i=0;
;;;1509   			bps[5]._flags_tu=1;
;;;1510   	
;;;1511   			bps[6]._vol_u=0;
;;;1512   			bps[6]._vol_i=0;
;;;1513   			bps[6]._flags_tu=1;
;;;1514   	
;;;1515   			bps[7]._vol_u=0;
;;;1516   			bps[7]._vol_i=0;
;;;1517   			bps[7]._flags_tu=1;
;;;1518   	
;;;1519   			bps[8]._vol_u=0;
;;;1520   			bps[8]._vol_i=0;
;;;1521   			bps[8]._flags_tu=1;
;;;1522   			
;;;1523   			bps[9]._vol_u=0;
;;;1524   			bps[9]._vol_i=0;
;;;1525   			bps[9]._flags_tu=1;
;;;1526   	
;;;1527   			bps[10]._vol_u=0;
;;;1528   			bps[10]._vol_i=0;
;;;1529   			bps[10]._flags_tu=1;
;;;1530   	
;;;1531   			bps[11]._vol_u=0;
;;;1532   			bps[11]._vol_i=0;
;;;1533   			bps[11]._flags_tu=1;
;;;1534   
;;;1535   
;;;1536   
;;;1537   			bps[sub_ind1]._vol_u=1022;
;;;1538   			bps[sub_ind1]._vol_i=1022;
;;;1539   			bps[sub_ind1]._flags_tu=0;
;;;1540   			}
;;;1541   		}
;;;1542   	else 
;;;1543   		{
;;;1544   		bps_stat=stOFF;
;;;1545   
;;;1546   		bps[0]._vol_u=0;
;;;1547   		bps[0]._vol_i=0;
;;;1548   		bps[0]._flags_tu=1;
;;;1549   
;;;1550   		bps[1]._vol_u=0;
;;;1551   		bps[1]._vol_i=0;
;;;1552   		bps[1]._flags_tu=1;
;;;1553   
;;;1554   		bps[1]._vol_u=0;
;;;1555   		bps[1]._vol_i=0;
;;;1556   		bps[1]._flags_tu=1;
;;;1557   
;;;1558   		bps[2]._vol_u=0;
;;;1559   		bps[2]._vol_i=0;
;;;1560   		bps[2]._flags_tu=1;
;;;1561   
;;;1562   		bps[3]._vol_u=0;
;;;1563   		bps[3]._vol_i=0;
;;;1564   		bps[3]._flags_tu=1;
;;;1565   
;;;1566   		bps[4]._vol_u=0;
;;;1567   		bps[4]._vol_i=0;
;;;1568   		bps[4]._flags_tu=1;
;;;1569   
;;;1570   		bps[5]._vol_u=0;
;;;1571   		bps[5]._vol_i=0;
;;;1572   		bps[5]._flags_tu=1;
;;;1573   
;;;1574   		bps[6]._vol_u=0;
;;;1575   		bps[6]._vol_i=0;
;;;1576   		bps[6]._flags_tu=1;
;;;1577   
;;;1578   		bps[7]._vol_u=0;
;;;1579   		bps[7]._vol_i=0;
;;;1580   		bps[7]._flags_tu=1;
;;;1581   
;;;1582   		bps[8]._vol_u=0;
;;;1583   		bps[8]._vol_i=0;
;;;1584   		bps[8]._flags_tu=1;
;;;1585   		
;;;1586   		bps[9]._vol_u=0;
;;;1587   		bps[9]._vol_i=0;
;;;1588   		bps[9]._flags_tu=1;
;;;1589   
;;;1590   		bps[10]._vol_u=0;
;;;1591   		bps[10]._vol_i=0;
;;;1592   		bps[10]._flags_tu=1;
;;;1593   
;;;1594   		bps[11]._vol_u=0;
;;;1595   		bps[11]._vol_i=0;
;;;1596   		bps[11]._flags_tu=1;
;;;1597   
;;;1598   		}
;;;1599   	}
;;;1600   
;;;1601   else if(ind==iTst_pwm)
;;;1602   	{
;;;1603   	char i;
;;;1604   
;;;1605   	for(i=0;i<NUMIST;i++)
;;;1606   		{
;;;1607   		bps[i]._vol_u=tst_pwm_u;
000b54  4893              LDR      r0,|L4.3492|
;;;1608   		bps[i]._vol_i=tst_pwm_i;
000b56  4a97              LDR      r2,|L4.3508|
000b58  2b33              CMP      r3,#0x33              ;1601
000b5a  d077              BEQ      |L4.3148|
;;;1609   		bps[i]._flags_tu=0;
;;;1610   		}
;;;1611   	}
;;;1612   
;;;1613   else if(ind==iK_viz_u)
;;;1614   	{
;;;1615   	char i;
;;;1616   
;;;1617   	if(viz_stat!=vsON)
000b5c  f8dfc248          LDR      r12,|L4.3496|
000b60  2b45              CMP      r3,#0x45              ;1613
000b62  d074              BEQ      |L4.3150|
;;;1618   		{
;;;1619   		for(i=0;i<NUMIST;i++)
;;;1620   			{
;;;1621   			bps[i]._vol_u=1022;
;;;1622   			bps[i]._vol_i=1022;
;;;1623   			bps[i]._flags_tu=0;
;;;1624   			}
;;;1625   		}
;;;1626   	else 
;;;1627   		{
;;;1628   		for(i=0;i<NUMIST;i++)
;;;1629   			{
;;;1630   			bps[i]._vol_u=tst_pwm_u;
;;;1631   			bps[i]._vol_i=tst_pwm_i;
;;;1632   			bps[i]._flags_tu=0;
;;;1633   			}
;;;1634   		}
;;;1635   	}
;;;1636   
;;;1637   else if(ind==iK_viz_i)
000b64  2b44              CMP      r3,#0x44
000b66  d073              BEQ      |L4.3152|
;;;1638   	{
;;;1639   	char i;
;;;1640   
;;;1641   	if(viz_stat!=vsON)
;;;1642   		{
;;;1643   		for(i=0;i<NUMIST;i++)
;;;1644   			{
;;;1645   			bps[i]._vol_u=1022;
;;;1646   			bps[i]._vol_i=1022;
;;;1647   			bps[i]._flags_tu=0;
;;;1648   			}
;;;1649   		}
;;;1650   	else 
;;;1651   		{
;;;1652   		for(i=0;i<NUMIST;i++)
;;;1653   			{
;;;1654   			bps[i]._vol_u=tst_pwm_u;
;;;1655   			bps[i]._vol_i=tst_pwm_i;
;;;1656   			bps[i]._flags_tu=0;
;;;1657   			}
;;;1658   		}
;;;1659   	}
;;;1660   
;;;1661   else if(work_stat==wsGS)
000b68  f89a2000          LDRB     r2,[r10,#0]  ; work_stat
;;;1662   	{
;;;1663   	signed long temp_SL_U,temp_SL_I;
;;;1664   	
;;;1665   	if((CURR_FADE_IN) && (time_proc<CURR_FADE_IN))
;;;1666   		{
;;;1667   		signed long temp_SL_;
;;;1668   		
;;;1669   		temp_SL_=	(signed long)I_ug_temp;
;;;1670   		temp_SL_*= (signed long)time_proc;
;;;1671   		temp_SL_/= (signed long)CURR_FADE_IN;
;;;1672   
;;;1673   		//I_ug_temp= (signed short)((signed long)I_ug_temp*(signed long)time_proc)/(signed long)CURR_FADE_IN;
;;;1674   
;;;1675   		I_ug_temp= (signed short)temp_SL_;
;;;1676   		}	
;;;1677   	
;;;1678   	if(b1Hz_sh) {
;;;1679   
;;;1680   
;;;1681   
;;;1682   
;;;1683   		if(!((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF)))) {
;;;1684   	 		if(load_I<I_ug_temp)_x_++;
000b6c  4893              LDR      r0,|L4.3516|
;;;1685      			else if(load_I>I_ug_temp)_x_--;
;;;1686   			//gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;1687   			gran(&_x_,-50,50); 
;;;1688   
;;;1689   	 		if(load_U<U_maxg)_xu_++;
000b6e  f8dfa2ac          LDR      r10,|L4.3612|
000b72  f8dfb2ac          LDR      r11,|L4.3616|
000b76  2a01              CMP      r2,#1                 ;1661
000b78  d06b              BEQ      |L4.3154|
;;;1690      			else if(load_U>U_maxg)_xu_--;
;;;1691   			//gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;1692   			gran(&_xu_,-50,50); 
;;;1693   		}
;;;1694   	}
;;;1695   
;;;1696   	temp_SL_U=1022;
;;;1697   	temp_SL_U*=(signed long)U_maxg;
;;;1698   	temp_SL_U/=(signed long)U_MAX;
;;;1699   
;;;1700   	temp_SL_I=1022;
;;;1701   	//temp_SL_I*=NUMIST;
;;;1702   	temp_SL_I*=(signed long)I_ug_temp;
;;;1703   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1704   
;;;1705   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1706   		{
;;;1707   		temp_SL_U=find_U_curve(U_maxg)*5;
;;;1708   		}
;;;1709   	 
;;;1710   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1711   		{
;;;1712   		temp_SL_I=find_I_curve(I_ug_temp)*5;
;;;1713   		}
;;;1714   
;;;1715   	for(i=0;i<NUMIST;i++)
;;;1716   		{
;;;1717   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;1718   		 	bps[i]._vol_u=0;
;;;1719   			bps[i]._vol_i=0;
;;;1720   			bps[i]._flags_tu=1;
;;;1721   		} else {
;;;1722   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;1723   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1724   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1725   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1726   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1727   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1728   			bps[i]._flags_tu=0;
;;;1729   		}
;;;1730   	}
;;;1731   
;;;1732   	}
;;;1733   else if(work_stat==wsPS)
000b7a  2a02              CMP      r2,#2
000b7c  d06a              BEQ      |L4.3156|
;;;1734   	{
;;;1735   	signed long temp_SL_U,temp_SL_I;
;;;1736   
;;;1737   /*	U_up_d=U_up/100;
;;;1738   	if(U_up_d<5) U_up_d=5;
;;;1739   	*/
;;;1740   	if(load_U_>5)bU_VALID=1;
;;;1741   	else bU_VALID=0;
;;;1742   /*	if( (load_U_>(U_up-U_up_d))&&(load_U_<(U_up+U_up_d)) )bFAST_REG=0;
;;;1743   	else bFAST_REG=1;*/
;;;1744   
;;;1745   	bFAST_REG=0;
;;;1746   	if((b1Hz_sh&&bU_VALID)||(bFAST_REG&&bU_VALID))
;;;1747   		{
;;;1748   	 	if(load_I<I_maxp)_x_++;
;;;1749      		else if(load_I>I_maxp)_x_--;
;;;1750   		gran(&_x_,-50,50); 
;;;1751   
;;;1752   	 	if(load_U_<U_up_temp)_xu_++;
;;;1753      		else if(load_U_>U_up_temp)_xu_--;
;;;1754   		gran(&_xu_,-50,50); 
;;;1755   
;;;1756   		}
;;;1757   
;;;1758   
;;;1759   	temp_SL_U=900;
;;;1760   	temp_SL_U*=(signed long)U_up_temp;
;;;1761   	temp_SL_U/=(signed long)U_MAX;
;;;1762   	temp_SL_U+=50;
;;;1763   
;;;1764   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1765   		{	
;;;1766   		temp_SL_U=find_U_curve(U_up_temp)*5;
;;;1767   		}
;;;1768   	//temp_SL_U=lc640_read_int(SEKTOR_KURVE_U+(temp_SL_U*2));
;;;1769   	 
;;;1770   	temp_SL_I=1022;
;;;1771   	//temp_SL_I*=NUMIST;
;;;1772   	temp_SL_I*=(signed long)I_maxp;
;;;1773   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1774   
;;;1775   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1776   		{
;;;1777   		temp_SL_I=find_I_curve(I_maxp)*5;
;;;1778   		}
;;;1779   
;;;1780   	for(i=0;i<NUMIST;i++) {
;;;1781   
;;;1782   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;1783   		 	bps[i]._vol_u=0;
;;;1784   			bps[i]._vol_i=0;
;;;1785   			bps[i]._flags_tu=1;
;;;1786   		} else {
;;;1787   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;1788   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1789   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1790   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1791   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1792   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1793   			bps[i]._flags_tu=0;
;;;1794   		}
;;;1795   	}
;;;1796   
;;;1797   
;;;1798   /*	for(i=0;i<NUMIST;i++)
;;;1799   		{
;;;1800   		bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;1801   	 	bps[i]._vol_i=((short)temp_SL_I+ _x_);//NUMIST;
;;;1802   		bps[i]._flags_tu=0;
;;;1803   		}*/
;;;1804   	//bps[0]._vol_i+= _x_;
;;;1805   	plazma_vol_u_0=temp_SL_U;
;;;1806   	plazma_vol_u_1=bps[0]._vol_u;
;;;1807   	}
;;;1808   
;;;1809   else if(work_stat==wsCAP)
000b7e  2a03              CMP      r2,#3
000b80  d069              BEQ      |L4.3158|
;;;1810   	{
;;;1811   	signed long temp_SL_U=0,temp_SL_I=0;
;;;1812   
;;;1813   
;;;1814   
;;;1815   
;;;1816   
;;;1817   
;;;1818   	if(b1Hz_sh) {
;;;1819   		if(!bOFF) {
;;;1820   	 		if(load_I<(CAP_WRK_CURR*10))_x_++;
;;;1821      			else if(load_I>(CAP_WRK_CURR*10))_x_--;
;;;1822   			gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;1823   			gran(&_x_,-50,50); 
;;;1824   
;;;1825   	 		if(load_U<(CAP_MAX_VOLT*10))_xu_++;
;;;1826      			else if(load_U>(CAP_MAX_VOLT*10))_xu_--;
;;;1827   			gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;1828   			gran(&_xu_,-50,50); 
;;;1829   		}
;;;1830   	}
;;;1831   
;;;1832   	temp_SL_U=10220L;
;;;1833   	temp_SL_U*=(signed long)CAP_MAX_VOLT;
;;;1834   	temp_SL_U/=(signed long)U_MAX;
;;;1835   
;;;1836   	temp_SL_I=10220L;
;;;1837   	//temp_SL_I*=NUMIST;
;;;1838   	temp_SL_I*=(signed long)CAP_WRK_CURR;
;;;1839   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1840   
;;;1841   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1842   		{
;;;1843   		temp_SL_U=find_U_curve(CAP_MAX_VOLT*10)*5;
;;;1844   		}
;;;1845   	 
;;;1846   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1847   		{
;;;1848   		temp_SL_I=find_I_curve(CAP_WRK_CURR*10)*5;
;;;1849   		} 
;;;1850   
;;;1851   //temp_SL_U=1000;
;;;1852   
;;;1853   	for(i=0;i<NUMIST;i++)
;;;1854   		{
;;;1855   		if(bOFF) {
;;;1856   		 	bps[i]._vol_u=0;
;;;1857   			bps[i]._vol_i=0;
;;;1858   			bps[i]._flags_tu=1;
;;;1859   		} else {
;;;1860   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;1861   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1862   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1863   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1864   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1865   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1866   			bps[i]._flags_tu=0;
;;;1867   		}
;;;1868   	}
;;;1869   
;;;1870   	}
;;;1871   else 
;;;1872   	{
;;;1873   	bps_stat=stOFF;
000b82  700d              STRB     r5,[r1,#0]
;;;1874   
;;;1875   	for(i=0;i<NUMIST;i++)
000b84  2000              MOVS     r0,#0
000b86  4643              MOV      r3,r8                 ;1266
000b88  f9b72000          LDRSH    r2,[r7,#0]            ;1307
000b8c  e3f2              B        |L4.4980|
                  |L4.2958|
000b8e  48a5              LDR      r0,|L4.3620|
000b90  e7a5              B        |L4.2782|
                  |L4.2962|
000b92  48a5              LDR      r0,|L4.3624|
000b94  e7a3              B        |L4.2782|
                  |L4.2966|
000b96  48a5              LDR      r0,|L4.3628|
000b98  e7ac              B        |L4.2804|
                  |L4.2970|
000b9a  48a5              LDR      r0,|L4.3632|
000b9c  e7aa              B        |L4.2804|
                  |L4.2974|
000b9e  f9900001          LDRSB    r0,[r0,#1]            ;1301  ; a_ind
000ba2  b138              CBZ      r0,|L4.2996|
000ba4  2801              CMP      r0,#1                 ;1314
000ba6  d01e              BEQ      |L4.3046|
000ba8  700d              STRB     r5,[r1,#0]            ;1345
000baa  62e5              STR      r5,[r4,#0x2c]         ;1348  ; bps
000bac  6325              STR      r5,[r4,#0x30]         ;1349  ; bps
000bae  f8848028          STRB     r8,[r4,#0x28]         ;1349
000bb2  e27e              B        |L4.4274|
                  |L4.2996|
000bb4  f8a6900c          STRH     r9,[r6,#0xc]          ;1303
000bb8  f8a6900e          STRH     r9,[r6,#0xe]          ;1304
000bbc  f8818000          STRB     r8,[r1,#0]            ;1305
000bc0  464a              MOV      r2,r9                 ;1303
000bc2  2000              MOVS     r0,#0                 ;1307
000bc4  f9b71000          LDRSH    r1,[r7,#0]            ;1307
000bc8  e00a              B        |L4.3040|
000bca  bf00              NOP                            ;1309
                  |L4.3020|
000bcc  eb000380          ADD      r3,r0,r0,LSL #2       ;1309
000bd0  eb041303          ADD      r3,r4,r3,LSL #4       ;1309
000bd4  1c40              ADDS     r0,r0,#1              ;1307
000bd6  62da              STR      r2,[r3,#0x2c]         ;1310
000bd8  631a              STR      r2,[r3,#0x30]         ;1311
000bda  f8835028          STRB     r5,[r3,#0x28]         ;1311
000bde  b2c0              UXTB     r0,r0                 ;1307
                  |L4.3040|
000be0  4288              CMP      r0,r1                 ;1307
000be2  dbf3              BLT      |L4.3020|
000be4  e265              B        |L4.4274|
                  |L4.3046|
000be6  7810              LDRB     r0,[r2,#0]            ;1316  ; phase
000be8  b110              CBZ      r0,|L4.3056|
000bea  2801              CMP      r0,#1                 ;1329
000bec  d015              BEQ      |L4.3098|
000bee  e260              B        |L4.4274|
                  |L4.3056|
000bf0  81b5              STRH     r5,[r6,#0xc]          ;1318
000bf2  81f5              STRH     r5,[r6,#0xe]          ;1319
000bf4  700d              STRB     r5,[r1,#0]            ;1320
000bf6  2000              MOVS     r0,#0                 ;1322
000bf8  4643              MOV      r3,r8                 ;1266
000bfa  f9b72000          LDRSH    r2,[r7,#0]            ;1307
000bfe  e009              B        |L4.3092|
                  |L4.3072|
000c00  eb000180          ADD      r1,r0,r0,LSL #2       ;1324
000c04  eb041101          ADD      r1,r4,r1,LSL #4       ;1324
000c08  1c40              ADDS     r0,r0,#1              ;1322
000c0a  62cd              STR      r5,[r1,#0x2c]         ;1325
000c0c  630d              STR      r5,[r1,#0x30]         ;1326
000c0e  f8813028          STRB     r3,[r1,#0x28]         ;1326
000c12  b2c0              UXTB     r0,r0                 ;1322
                  |L4.3092|
000c14  4290              CMP      r0,r2                 ;1322
000c16  dbf3              BLT      |L4.3072|
000c18  e3fc              B        |L4.5140|
                  |L4.3098|
000c1a  f8a6900c          STRH     r9,[r6,#0xc]          ;1331
000c1e  f8a6900e          STRH     r9,[r6,#0xe]          ;1332
000c22  f8818000          STRB     r8,[r1,#0]            ;1333
000c26  464a              MOV      r2,r9                 ;1331
000c28  2000              MOVS     r0,#0                 ;1335
000c2a  f9b71000          LDRSH    r1,[r7,#0]            ;1307
000c2e  e009              B        |L4.3140|
                  |L4.3120|
000c30  eb000380          ADD      r3,r0,r0,LSL #2       ;1337
000c34  eb041303          ADD      r3,r4,r3,LSL #4       ;1337
000c38  1c40              ADDS     r0,r0,#1              ;1335
000c3a  62da              STR      r2,[r3,#0x2c]         ;1338
000c3c  631a              STR      r2,[r3,#0x30]         ;1339
000c3e  f8835028          STRB     r5,[r3,#0x28]         ;1339
000c42  b2c0              UXTB     r0,r0                 ;1335
                  |L4.3140|
000c44  4288              CMP      r0,r1                 ;1335
000c46  dbf3              BLT      |L4.3120|
000c48  e3e4              B        |L4.5140|
                  |L4.3146|
000c4a  e005              B        |L4.3160|
                  |L4.3148|
000c4c  e0fd              B        |L4.3658|
                  |L4.3150|
000c4e  e112              B        |L4.3702|
                  |L4.3152|
000c50  e13d              B        |L4.3790|
                  |L4.3154|
000c52  e168              B        |L4.3878|
                  |L4.3156|
000c54  e22e              B        |L4.4276|
                  |L4.3158|
000c56  e2e9              B        |L4.4652|
                  |L4.3160|
000c58  f9903001          LDRSB    r3,[r0,#1]            ;1354  ; a_ind
000c5c  b113              CBZ      r3,|L4.3172|
000c5e  2b03              CMP      r3,#3                 ;1417
000c60  d058              BEQ      |L4.3348|
000c62  e05e              B        |L4.3362|
                  |L4.3172|
000c64  f8a6900c          STRH     r9,[r6,#0xc]          ;1356
000c68  f8a6900e          STRH     r9,[r6,#0xe]          ;1357
000c6c  f8818000          STRB     r8,[r1,#0]            ;1358
000c70  62e5              STR      r5,[r4,#0x2c]         ;1361  ; bps
000c72  6325              STR      r5,[r4,#0x30]         ;1362  ; bps
000c74  f8848028          STRB     r8,[r4,#0x28]         ;1362
000c78  67e5              STR      r5,[r4,#0x7c]         ;1365  ; bps
000c7a  f8c45080          STR      r5,[r4,#0x80]         ;1366  ; bps
000c7e  f8848078          STRB     r8,[r4,#0x78]         ;1366
000c82  f8c450cc          STR      r5,[r4,#0xcc]         ;1373  ; bps
000c86  f8c450d0          STR      r5,[r4,#0xd0]         ;1374  ; bps
000c8a  f88480c8          STRB     r8,[r4,#0xc8]         ;1374
000c8e  f8c4511c          STR      r5,[r4,#0x11c]        ;1377  ; bps
000c92  f8c45120          STR      r5,[r4,#0x120]        ;1378  ; bps
000c96  f8848118          STRB     r8,[r4,#0x118]        ;1378
000c9a  f8c4516c          STR      r5,[r4,#0x16c]        ;1381  ; bps
000c9e  f8c45170          STR      r5,[r4,#0x170]        ;1382  ; bps
000ca2  f8848168          STRB     r8,[r4,#0x168]        ;1382
000ca6  f8c451bc          STR      r5,[r4,#0x1bc]        ;1385  ; bps
000caa  4642              MOV      r2,r8                 ;1358
000cac  f8c451c0          STR      r5,[r4,#0x1c0]        ;1386  ; bps
000cb0  f88421b8          STRB     r2,[r4,#0x1b8]        ;1386
000cb4  f8c4520c          STR      r5,[r4,#0x20c]        ;1389  ; bps
000cb8  f8c45210          STR      r5,[r4,#0x210]        ;1390  ; bps
000cbc  f8842208          STRB     r2,[r4,#0x208]        ;1390
000cc0  f8c4525c          STR      r5,[r4,#0x25c]        ;1393  ; bps
000cc4  f8c45260          STR      r5,[r4,#0x260]        ;1394  ; bps
000cc8  f8842258          STRB     r2,[r4,#0x258]        ;1394
000ccc  f8c452ac          STR      r5,[r4,#0x2ac]        ;1397  ; bps
000cd0  f8c452b0          STR      r5,[r4,#0x2b0]        ;1398  ; bps
000cd4  f88422a8          STRB     r2,[r4,#0x2a8]        ;1398
000cd8  f8c452fc          STR      r5,[r4,#0x2fc]        ;1401  ; bps
000cdc  f8c45300          STR      r5,[r4,#0x300]        ;1402  ; bps
000ce0  f88422f8          STRB     r2,[r4,#0x2f8]        ;1402
000ce4  f8c4534c          STR      r5,[r4,#0x34c]        ;1405  ; bps
000ce8  f8c45350          STR      r5,[r4,#0x350]        ;1406  ; bps
000cec  f8842348          STRB     r2,[r4,#0x348]        ;1406
000cf0  f8c4539c          STR      r5,[r4,#0x39c]        ;1409  ; bps
000cf4  f8c453a0          STR      r5,[r4,#0x3a0]        ;1410  ; bps
000cf8  f8842398          STRB     r2,[r4,#0x398]        ;1410
000cfc  f9900002          LDRSB    r0,[r0,#2]            ;1412  ; a_ind
000d00  464b              MOV      r3,r9                 ;1356
000d02  eb000080          ADD      r0,r0,r0,LSL #2       ;1412
000d06  eb041000          ADD      r0,r4,r0,LSL #4       ;1412
000d0a  62c3              STR      r3,[r0,#0x2c]         ;1413
000d0c  6303              STR      r3,[r0,#0x30]         ;1414
000d0e  f8805028          STRB     r5,[r0,#0x28]         ;1414
000d12  e37f              B        |L4.5140|
                  |L4.3348|
000d14  7812              LDRB     r2,[r2,#0]            ;1419  ; phase
000d16  b112              CBZ      r2,|L4.3358|
000d18  2a01              CMP      r2,#1                 ;1477
000d1a  d0a3              BEQ      |L4.3172|
000d1c  e37a              B        |L4.5140|
                  |L4.3358|
000d1e  81b5              STRH     r5,[r6,#0xc]          ;1421
000d20  81f5              STRH     r5,[r6,#0xe]          ;1422
                  |L4.3362|
000d22  f1040428          ADD      r4,r4,#0x28           ;1544
000d26  700d              STRB     r5,[r1,#0]            ;1544
000d28  6065              STR      r5,[r4,#4]            ;1547  ; bps
000d2a  60a5              STR      r5,[r4,#8]            ;1548  ; bps
000d2c  f8848000          STRB     r8,[r4,#0]            ;1548
000d30  6565              STR      r5,[r4,#0x54]         ;1551  ; bps
000d32  65a5              STR      r5,[r4,#0x58]         ;1552  ; bps
000d34  f8848050          STRB     r8,[r4,#0x50]         ;1552
000d38  f8c450a4          STR      r5,[r4,#0xa4]         ;1559  ; bps
000d3c  f8c450a8          STR      r5,[r4,#0xa8]         ;1560  ; bps
000d40  f88480a0          STRB     r8,[r4,#0xa0]         ;1560
000d44  f8c450f4          STR      r5,[r4,#0xf4]         ;1563  ; bps
000d48  f8c450f8          STR      r5,[r4,#0xf8]         ;1564  ; bps
000d4c  f88480f0          STRB     r8,[r4,#0xf0]         ;1564
000d50  f8c45144          STR      r5,[r4,#0x144]        ;1567  ; bps
000d54  f8c45148          STR      r5,[r4,#0x148]        ;1568  ; bps
000d58  f8848140          STRB     r8,[r4,#0x140]        ;1568
000d5c  f8c45194          STR      r5,[r4,#0x194]        ;1571  ; bps
000d60  f8c45198          STR      r5,[r4,#0x198]        ;1572  ; bps
000d64  f8848190          STRB     r8,[r4,#0x190]        ;1572
000d68  f8c451e4          STR      r5,[r4,#0x1e4]        ;1575  ; bps
000d6c  4640              MOV      r0,r8                 ;1548
000d6e  f8c451e8          STR      r5,[r4,#0x1e8]        ;1576  ; bps
000d72  f88401e0          STRB     r0,[r4,#0x1e0]        ;1576
000d76  f8c45234          STR      r5,[r4,#0x234]        ;1579  ; bps
000d7a  f8c45238          STR      r5,[r4,#0x238]        ;1580  ; bps
000d7e  f8840230          STRB     r0,[r4,#0x230]        ;1580
000d82  f8c45284          STR      r5,[r4,#0x284]        ;1583  ; bps
000d86  f8c45288          STR      r5,[r4,#0x288]        ;1584  ; bps
000d8a  f8840280          STRB     r0,[r4,#0x280]        ;1584
000d8e  f8c452d4          STR      r5,[r4,#0x2d4]        ;1587  ; bps
000d92  f8c452d8          STR      r5,[r4,#0x2d8]        ;1588  ; bps
000d96  f88402d0          STRB     r0,[r4,#0x2d0]        ;1588
000d9a  f8c45324          STR      r5,[r4,#0x324]        ;1591  ; bps
000d9e  e049              B        |L4.3636|
                  |L4.3488|
                          DCD      a_ind
                  |L4.3492|
                          DCD      tst_pwm_u
                  |L4.3496|
                          DCD      viz_stat
                  |L4.3500|
                          DCD      viz_stat_cnt
                  |L4.3504|
                          DCD      0xffffabcd
                  |L4.3508|
                          DCD      tst_pwm_i
                  |L4.3512|
                          DCD      load_U
                  |L4.3516|
                          DCD      load_I
                  |L4.3520|
                          DCD      REV_IS_ON
                  |L4.3524|
                          DCD      work_stat
                  |L4.3528|
                          DCD      AVT_REV_IS_ON
                  |L4.3532|
                          DCD      AVT_REV_I_NOM_FF
                  |L4.3536|
                          DCD      REV_STAT
                  |L4.3540|
                          DCD      AVT_REV_U_NOM_FF
                  |L4.3544|
                          DCD      U_up_temp
                  |L4.3548|
                          DCD      I_ug_temp
                  |L4.3552|
                          DCD      AVT_REV_I_NOM_REW
                  |L4.3556|
                          DCD      AVT_REV_U_NOM_REW
                  |L4.3560|
                          DCD      fiks_stat_I
                  |L4.3564|
                          DCD      I_ug
                  |L4.3568|
                          DCD      fiks_stat_U
                  |L4.3572|
                          DCD      U_up
                  |L4.3576|
                          DCD      I_MAX_IPS
                  |L4.3580|
                          DCD      I_MIN_IPS
                  |L4.3584|
                          DCD      U_MAX
                  |L4.3588|
                          DCD      U_MIN
                  |L4.3592|
                          DCD      ||area_number.24||
                  |L4.3596|
                          DCD      bps_stat
                  |L4.3600|
                          DCD      phase
                  |L4.3604|
                          DCD      bps
                  |L4.3608|
                          DCD      NUMIST
                  |L4.3612|
                          DCD      _xu_
                  |L4.3616|
                          DCD      _x_
                  |L4.3620|
                          DCD      I_ug3
                  |L4.3624|
                          DCD      I_ug2
                  |L4.3628|
                          DCD      U_up3
                  |L4.3632|
                          DCD      U_up2
                  |L4.3636|
000e34  f8c45328          STR      r5,[r4,#0x328]        ;1592  ; bps
000e38  f8840320          STRB     r0,[r4,#0x320]        ;1592
000e3c  f8c45374          STR      r5,[r4,#0x374]        ;1595  ; bps
000e40  f8c45378          STR      r5,[r4,#0x378]        ;1596  ; bps
000e44  f8840370          STRB     r0,[r4,#0x370]        ;1596
000e48  e2e4              B        |L4.5140|
                  |L4.3658|
000e4a  2100              MOVS     r1,#0                 ;1605
000e4c  f9b00000          LDRSH    r0,[r0,#0]            ;1607
000e50  f9b22000          LDRSH    r2,[r2,#0]            ;1608
000e54  f9b73000          LDRSH    r3,[r7,#0]            ;1307
000e58  e00a              B        |L4.3696|
000e5a  bf00              NOP                            ;1607
                  |L4.3676|
000e5c  eb010781          ADD      r7,r1,r1,LSL #2       ;1607
000e60  eb041707          ADD      r7,r4,r7,LSL #4       ;1607
000e64  1c49              ADDS     r1,r1,#1              ;1605
000e66  e9c7020b          STRD     r0,r2,[r7,#0x2c]      ;1607
000e6a  f8875028          STRB     r5,[r7,#0x28]         ;1609
000e6e  b2c9              UXTB     r1,r1                 ;1605
                  |L4.3696|
000e70  4299              CMP      r1,r3                 ;1605
000e72  dbf3              BLT      |L4.3676|
000e74  e2ce              B        |L4.5140|
                  |L4.3702|
000e76  f89c1000          LDRB     r1,[r12,#0]           ;1617  ; viz_stat
000e7a  2901              CMP      r1,#1                 ;1617
000e7c  d011              BEQ      |L4.3746|
000e7e  2000              MOVS     r0,#0                 ;1619
000e80  4649              MOV      r1,r9                 ;1303
000e82  f9b72000          LDRSH    r2,[r7,#0]            ;1307
000e86  e009              B        |L4.3740|
                  |L4.3720|
000e88  eb000380          ADD      r3,r0,r0,LSL #2       ;1621
000e8c  eb041303          ADD      r3,r4,r3,LSL #4       ;1621
000e90  1c40              ADDS     r0,r0,#1              ;1619
000e92  62d9              STR      r1,[r3,#0x2c]         ;1622
000e94  6319              STR      r1,[r3,#0x30]         ;1623
000e96  f8835028          STRB     r5,[r3,#0x28]         ;1623
000e9a  b2c0              UXTB     r0,r0                 ;1619
                  |L4.3740|
000e9c  4290              CMP      r0,r2                 ;1619
000e9e  dbf3              BLT      |L4.3720|
000ea0  e2b8              B        |L4.5140|
                  |L4.3746|
000ea2  2100              MOVS     r1,#0                 ;1628
000ea4  f9b00000          LDRSH    r0,[r0,#0]            ;1607
000ea8  f9b22000          LDRSH    r2,[r2,#0]            ;1608
000eac  f9b73000          LDRSH    r3,[r7,#0]            ;1307
000eb0  e00a              B        |L4.3784|
000eb2  bf00              NOP                            ;1630
                  |L4.3764|
000eb4  eb010781          ADD      r7,r1,r1,LSL #2       ;1630
000eb8  eb041707          ADD      r7,r4,r7,LSL #4       ;1630
000ebc  1c49              ADDS     r1,r1,#1              ;1628
000ebe  e9c7020b          STRD     r0,r2,[r7,#0x2c]      ;1630
000ec2  f8875028          STRB     r5,[r7,#0x28]         ;1632
000ec6  b2c9              UXTB     r1,r1                 ;1628
                  |L4.3784|
000ec8  4299              CMP      r1,r3                 ;1628
000eca  dbf3              BLT      |L4.3764|
000ecc  e2a2              B        |L4.5140|
                  |L4.3790|
000ece  f89c1000          LDRB     r1,[r12,#0]           ;1641  ; viz_stat
000ed2  2901              CMP      r1,#1                 ;1641
000ed4  d011              BEQ      |L4.3834|
000ed6  2000              MOVS     r0,#0                 ;1643
000ed8  4649              MOV      r1,r9                 ;1303
000eda  f9b72000          LDRSH    r2,[r7,#0]            ;1307
000ede  e009              B        |L4.3828|
                  |L4.3808|
000ee0  eb000380          ADD      r3,r0,r0,LSL #2       ;1645
000ee4  eb041303          ADD      r3,r4,r3,LSL #4       ;1645
000ee8  1c40              ADDS     r0,r0,#1              ;1643
000eea  62d9              STR      r1,[r3,#0x2c]         ;1646
000eec  6319              STR      r1,[r3,#0x30]         ;1647
000eee  f8835028          STRB     r5,[r3,#0x28]         ;1647
000ef2  b2c0              UXTB     r0,r0                 ;1643
                  |L4.3828|
000ef4  4290              CMP      r0,r2                 ;1643
000ef6  dbf3              BLT      |L4.3808|
000ef8  e28c              B        |L4.5140|
                  |L4.3834|
000efa  2100              MOVS     r1,#0                 ;1652
000efc  f9b00000          LDRSH    r0,[r0,#0]            ;1607
000f00  f9b22000          LDRSH    r2,[r2,#0]            ;1608
000f04  f9b73000          LDRSH    r3,[r7,#0]            ;1307
000f08  e00a              B        |L4.3872|
000f0a  bf00              NOP                            ;1654
                  |L4.3852|
000f0c  eb010781          ADD      r7,r1,r1,LSL #2       ;1654
000f10  eb041707          ADD      r7,r4,r7,LSL #4       ;1654
000f14  1c49              ADDS     r1,r1,#1              ;1652
000f16  e9c7020b          STRD     r0,r2,[r7,#0x2c]      ;1654
000f1a  f8875028          STRB     r5,[r7,#0x28]         ;1656
000f1e  b2c9              UXTB     r1,r1                 ;1652
                  |L4.3872|
000f20  4299              CMP      r1,r3                 ;1652
000f22  dbf3              BLT      |L4.3852|
000f24  e276              B        |L4.5140|
                  |L4.3878|
000f26  49ff              LDR      r1,|L4.4900|
000f28  f9b12000          LDRSH    r2,[r1,#0]            ;1665  ; CURR_FADE_IN
000f2c  b162              CBZ      r2,|L4.3912|
000f2e  49fe              LDR      r1,|L4.4904|
000f30  680b              LDR      r3,[r1,#0]            ;1665  ; time_proc
000f32  4293              CMP      r3,r2                 ;1665
000f34  da08              BGE      |L4.3912|
000f36  f8dfc3f4          LDR      r12,|L4.4908|
000f3a  f9bc1000          LDRSH    r1,[r12,#0]           ;1669  ; I_ug_temp
000f3e  4359              MULS     r1,r3,r1              ;1670
000f40  fb91f1f2          SDIV     r1,r1,r2              ;1671
000f44  f8ac1000          STRH     r1,[r12,#0]           ;1675
                  |L4.3912|
000f48  79b1              LDRB     r1,[r6,#6]            ;1678  ; b1Hz_sh
000f4a  b381              CBZ      r1,|L4.4014|
000f4c  49f8              LDR      r1,|L4.4912|
000f4e  8809              LDRH     r1,[r1,#0]            ;1683  ; REV_IS_ON
000f50  b141              CBZ      r1,|L4.3940|
000f52  49f8              LDR      r1,|L4.4916|
000f54  8809              LDRH     r1,[r1,#0]            ;1683  ; AVT_REV_IS_ON
000f56  b129              CBZ      r1,|L4.3940|
000f58  49f7              LDR      r1,|L4.4920|
000f5a  7809              LDRB     r1,[r1,#0]            ;1683  ; proc_phase
000f5c  2901              CMP      r1,#1                 ;1683
000f5e  d033              BEQ      |L4.4040|
000f60  2903              CMP      r1,#3                 ;1683
000f62  d031              BEQ      |L4.4040|
                  |L4.3940|
000f64  f9b01000          LDRSH    r1,[r0,#0]            ;1684  ; load_I
000f68  48f0              LDR      r0,|L4.4908|
000f6a  f9b00000          LDRSH    r0,[r0,#0]            ;1684  ; I_ug_temp
000f6e  4281              CMP      r1,r0                 ;1684
000f70  da04              BGE      |L4.3964|
000f72  f8bb1000          LDRH     r1,[r11,#0]           ;1684  ; _x_
000f76  f1010101          ADD      r1,r1,#1              ;1684
000f7a  e004              B        |L4.3974|
                  |L4.3964|
000f7c  dd05              BLE      |L4.3978|
000f7e  f8bb1000          LDRH     r1,[r11,#0]           ;1685  ; _x_
000f82  f1a10101          SUB      r1,r1,#1              ;1685
                  |L4.3974|
000f86  f8ab1000          STRH     r1,[r11,#0]           ;1685
                  |L4.3978|
000f8a  2232              MOVS     r2,#0x32              ;1687
000f8c  4251              RSBS     r1,r2,#0              ;1687
000f8e  48eb              LDR      r0,|L4.4924|
000f90  f7fffffe          BL       gran
000f94  48ea              LDR      r0,|L4.4928|
000f96  f9b01000          LDRSH    r1,[r0,#0]            ;1689  ; load_U
000f9a  48ea              LDR      r0,|L4.4932|
000f9c  f9b00000          LDRSH    r0,[r0,#0]            ;1689  ; U_maxg
000fa0  4281              CMP      r1,r0                 ;1689
000fa2  da05              BGE      |L4.4016|
000fa4  f8ba1000          LDRH     r1,[r10,#0]           ;1689  ; _xu_
000fa8  f1010101          ADD      r1,r1,#1              ;1689
000fac  e005              B        |L4.4026|
                  |L4.4014|
000fae  e00b              B        |L4.4040|
                  |L4.4016|
000fb0  dd05              BLE      |L4.4030|
000fb2  f8ba1000          LDRH     r1,[r10,#0]           ;1690  ; _xu_
000fb6  f1a10101          SUB      r1,r1,#1              ;1690
                  |L4.4026|
000fba  f8aa1000          STRH     r1,[r10,#0]           ;1690
                  |L4.4030|
000fbe  2232              MOVS     r2,#0x32              ;1692
000fc0  4251              RSBS     r1,r2,#0              ;1692
000fc2  48e1              LDR      r0,|L4.4936|
000fc4  f7fffffe          BL       gran
                  |L4.4040|
000fc8  48de              LDR      r0,|L4.4932|
000fca  49e0              LDR      r1,|L4.4940|
000fcc  f9b00000          LDRSH    r0,[r0,#0]            ;1697  ; U_maxg
000fd0  f9b11000          LDRSH    r1,[r1,#0]            ;1698  ; U_MAX
000fd4  ebc02040          RSB      r0,r0,r0,LSL #9       ;1697
000fd8  0040              LSLS     r0,r0,#1              ;1697
000fda  fb90f0f1          SDIV     r0,r0,r1              ;1698
000fde  9000              STR      r0,[sp,#0]            ;1702
000fe0  48d2              LDR      r0,|L4.4908|
000fe2  49db              LDR      r1,|L4.4944|
000fe4  f9b00000          LDRSH    r0,[r0,#0]            ;1702  ; I_ug_temp
000fe8  f9b11000          LDRSH    r1,[r1,#0]            ;1703  ; I_MAX_IPS
000fec  ebc02040          RSB      r0,r0,r0,LSL #9       ;1702
000ff0  0040              LSLS     r0,r0,#1              ;1702
000ff2  fb90f0f1          SDIV     r0,r0,r1              ;1703
000ff6  4681              MOV      r9,r0                 ;1703
000ff8  20ac              MOVS     r0,#0xac              ;1705
000ffa  f7fffffe          BL       lc640_read_int
000ffe  f5a0412b          SUB      r1,r0,#0xab00         ;1705
001002  39cd              SUBS     r1,r1,#0xcd           ;1705
001004  d107              BNE      |L4.4118|
001006  48cf              LDR      r0,|L4.4932|
001008  f9b00000          LDRSH    r0,[r0,#0]            ;1707  ; U_maxg
00100c  f7fffffe          BL       find_U_curve
001010  eb000080          ADD      r0,r0,r0,LSL #2       ;1707
001014  9000              STR      r0,[sp,#0]            ;1707
                  |L4.4118|
001016  20ae              MOVS     r0,#0xae              ;1710
001018  f7fffffe          BL       lc640_read_int
00101c  f5a0412b          SUB      r1,r0,#0xab00         ;1710
001020  39cd              SUBS     r1,r1,#0xcd           ;1710
001022  d107              BNE      |L4.4148|
001024  48c1              LDR      r0,|L4.4908|
001026  f9b00000          LDRSH    r0,[r0,#0]            ;1712  ; I_ug_temp
00102a  f7fffffe          BL       find_I_curve
00102e  eb000080          ADD      r0,r0,r0,LSL #2       ;1712
001032  4681              MOV      r9,r0                 ;1712
                  |L4.4148|
001034  2000              MOVS     r0,#0                 ;1715
001036  f9b73000          LDRSH    r3,[r7,#0]            ;1307
00103a  e038              B        |L4.4270|
                  |L4.4156|
00103c  49bc              LDR      r1,|L4.4912|
00103e  8809              LDRH     r1,[r1,#0]            ;1717  ; REV_IS_ON
001040  b141              CBZ      r1,|L4.4180|
001042  49bc              LDR      r1,|L4.4916|
001044  8809              LDRH     r1,[r1,#0]            ;1717  ; AVT_REV_IS_ON
001046  b129              CBZ      r1,|L4.4180|
001048  49bb              LDR      r1,|L4.4920|
00104a  7809              LDRB     r1,[r1,#0]            ;1717  ; proc_phase
00104c  2901              CMP      r1,#1                 ;1717
00104e  d00e              BEQ      |L4.4206|
001050  2903              CMP      r1,#3                 ;1717
001052  d00c              BEQ      |L4.4206|
                  |L4.4180|
001054  9900              LDR      r1,[sp,#0]            ;1722
001056  b20a              SXTH     r2,r1                 ;1722
001058  f9ba1000          LDRSH    r1,[r10,#0]           ;1722  ; _xu_
00105c  1852              ADDS     r2,r2,r1              ;1722
00105e  eb000180          ADD      r1,r0,r0,LSL #2       ;1722
001062  eb041101          ADD      r1,r4,r1,LSL #4       ;1722
001066  62ca              STR      r2,[r1,#0x2c]         ;1723
001068  d50a              BPL      |L4.4224|
00106a  62cd              STR      r5,[r1,#0x2c]         ;1723
00106c  e00d              B        |L4.4234|
                  |L4.4206|
00106e  eb000180          ADD      r1,r0,r0,LSL #2       ;1718
001072  eb041101          ADD      r1,r4,r1,LSL #4       ;1718
001076  62cd              STR      r5,[r1,#0x2c]         ;1719
001078  630d              STR      r5,[r1,#0x30]         ;1720
00107a  f8818028          STRB     r8,[r1,#0x28]         ;1720
00107e  e014              B        |L4.4266|
                  |L4.4224|
001080  f24037fe          MOV      r7,#0x3fe             ;1724
001084  42ba              CMP      r2,r7                 ;1724
001086  dd00              BLE      |L4.4234|
001088  62cf              STR      r7,[r1,#0x2c]         ;1724
                  |L4.4234|
00108a  f9bb2000          LDRSH    r2,[r11,#0]           ;1725  ; _x_
00108e  fa0ff789          SXTH     r7,r9                 ;1725
001092  18ba              ADDS     r2,r7,r2              ;1725
001094  630a              STR      r2,[r1,#0x30]         ;1726
001096  d501              BPL      |L4.4252|
001098  630d              STR      r5,[r1,#0x30]         ;1726
00109a  e004              B        |L4.4262|
                  |L4.4252|
00109c  f24037fe          MOV      r7,#0x3fe             ;1727
0010a0  42ba              CMP      r2,r7                 ;1727
0010a2  dd00              BLE      |L4.4262|
0010a4  630f              STR      r7,[r1,#0x30]         ;1727
                  |L4.4262|
0010a6  f8815028          STRB     r5,[r1,#0x28]         ;1728
                  |L4.4266|
0010aa  1c40              ADDS     r0,r0,#1              ;1715
0010ac  b2c0              UXTB     r0,r0                 ;1715
                  |L4.4270|
0010ae  4298              CMP      r0,r3                 ;1715
0010b0  dbc4              BLT      |L4.4156|
                  |L4.4274|
0010b2  e1af              B        |L4.5140|
                  |L4.4276|
0010b4  49a7              LDR      r1,|L4.4948|
0010b6  f9b11000          LDRSH    r1,[r1,#0]            ;1740  ; load_U_
0010ba  2905              CMP      r1,#5                 ;1740
0010bc  dd02              BLE      |L4.4292|
0010be  f8868008          STRB     r8,[r6,#8]            ;1740
0010c2  e000              B        |L4.4294|
                  |L4.4292|
0010c4  7235              STRB     r5,[r6,#8]            ;1741
                  |L4.4294|
0010c6  71f5              STRB     r5,[r6,#7]            ;1745
0010c8  79b1              LDRB     r1,[r6,#6]            ;1746  ; b1Hz_sh
0010ca  b391              CBZ      r1,|L4.4402|
0010cc  7a31              LDRB     r1,[r6,#8]            ;1746  ; bU_VALID
0010ce  b381              CBZ      r1,|L4.4402|
0010d0  f9b01000          LDRSH    r1,[r0,#0]            ;1748  ; load_I
0010d4  48a0              LDR      r0,|L4.4952|
0010d6  f9b00000          LDRSH    r0,[r0,#0]            ;1748  ; I_maxp
0010da  4281              CMP      r1,r0                 ;1748
0010dc  da04              BGE      |L4.4328|
0010de  f8bb1000          LDRH     r1,[r11,#0]           ;1748  ; _x_
0010e2  f1010101          ADD      r1,r1,#1              ;1748
0010e6  e004              B        |L4.4338|
                  |L4.4328|
0010e8  dd05              BLE      |L4.4342|
0010ea  f8bb1000          LDRH     r1,[r11,#0]           ;1749  ; _x_
0010ee  f1a10101          SUB      r1,r1,#1              ;1749
                  |L4.4338|
0010f2  f8ab1000          STRH     r1,[r11,#0]           ;1749
                  |L4.4342|
0010f6  2232              MOVS     r2,#0x32              ;1750
0010f8  4251              RSBS     r1,r2,#0              ;1750
0010fa  4890              LDR      r0,|L4.4924|
0010fc  f7fffffe          BL       gran
001100  4894              LDR      r0,|L4.4948|
001102  f9b01000          LDRSH    r1,[r0,#0]            ;1752  ; load_U_
001106  4895              LDR      r0,|L4.4956|
001108  f9b00000          LDRSH    r0,[r0,#0]            ;1752  ; U_up_temp
00110c  4281              CMP      r1,r0                 ;1752
00110e  da04              BGE      |L4.4378|
001110  f8ba1000          LDRH     r1,[r10,#0]           ;1752  ; _xu_
001114  f1010101          ADD      r1,r1,#1              ;1752
001118  e004              B        |L4.4388|
                  |L4.4378|
00111a  dd05              BLE      |L4.4392|
00111c  f8ba1000          LDRH     r1,[r10,#0]           ;1753  ; _xu_
001120  f1a10101          SUB      r1,r1,#1              ;1753
                  |L4.4388|
001124  f8aa1000          STRH     r1,[r10,#0]           ;1753
                  |L4.4392|
001128  2232              MOVS     r2,#0x32              ;1754
00112a  4251              RSBS     r1,r2,#0              ;1754
00112c  4886              LDR      r0,|L4.4936|
00112e  f7fffffe          BL       gran
                  |L4.4402|
001132  488a              LDR      r0,|L4.4956|
001134  f44f7161          MOV      r1,#0x384             ;1760
001138  f9b00000          LDRSH    r0,[r0,#0]            ;1760  ; U_up_temp
00113c  4348              MULS     r0,r1,r0              ;1760
00113e  4983              LDR      r1,|L4.4940|
001140  f9b11000          LDRSH    r1,[r1,#0]            ;1761  ; U_MAX
001144  fb90f0f1          SDIV     r0,r0,r1              ;1761
001148  3032              ADDS     r0,r0,#0x32           ;1762
00114a  9000              STR      r0,[sp,#0]            ;1764
00114c  20ac              MOVS     r0,#0xac              ;1764
00114e  f7fffffe          BL       lc640_read_int
001152  f5a0412b          SUB      r1,r0,#0xab00         ;1764
001156  39cd              SUBS     r1,r1,#0xcd           ;1764
001158  d107              BNE      |L4.4458|
00115a  4880              LDR      r0,|L4.4956|
00115c  f9b00000          LDRSH    r0,[r0,#0]            ;1766  ; U_up_temp
001160  f7fffffe          BL       find_U_curve
001164  eb000080          ADD      r0,r0,r0,LSL #2       ;1766
001168  9000              STR      r0,[sp,#0]            ;1766
                  |L4.4458|
00116a  487b              LDR      r0,|L4.4952|
00116c  4978              LDR      r1,|L4.4944|
00116e  f9b00000          LDRSH    r0,[r0,#0]            ;1772  ; I_maxp
001172  f9b11000          LDRSH    r1,[r1,#0]            ;1773  ; I_MAX_IPS
001176  ebc02040          RSB      r0,r0,r0,LSL #9       ;1772
00117a  0040              LSLS     r0,r0,#1              ;1772
00117c  fb90f0f1          SDIV     r0,r0,r1              ;1773
001180  4681              MOV      r9,r0                 ;1773
001182  20ae              MOVS     r0,#0xae              ;1775
001184  f7fffffe          BL       lc640_read_int
001188  f5a0412b          SUB      r1,r0,#0xab00         ;1775
00118c  39cd              SUBS     r1,r1,#0xcd           ;1775
00118e  d107              BNE      |L4.4512|
001190  4871              LDR      r0,|L4.4952|
001192  f9b00000          LDRSH    r0,[r0,#0]            ;1777  ; I_maxp
001196  f7fffffe          BL       find_I_curve
00119a  eb000080          ADD      r0,r0,r0,LSL #2       ;1777
00119e  4681              MOV      r9,r0                 ;1777
                  |L4.4512|
0011a0  2000              MOVS     r0,#0                 ;1780
0011a2  f9b73000          LDRSH    r3,[r7,#0]            ;1307
0011a6  e038              B        |L4.4634|
                  |L4.4520|
0011a8  4961              LDR      r1,|L4.4912|
0011aa  8809              LDRH     r1,[r1,#0]            ;1782  ; REV_IS_ON
0011ac  b141              CBZ      r1,|L4.4544|
0011ae  4961              LDR      r1,|L4.4916|
0011b0  8809              LDRH     r1,[r1,#0]            ;1782  ; AVT_REV_IS_ON
0011b2  b129              CBZ      r1,|L4.4544|
0011b4  4960              LDR      r1,|L4.4920|
0011b6  7809              LDRB     r1,[r1,#0]            ;1782  ; proc_phase
0011b8  2901              CMP      r1,#1                 ;1782
0011ba  d00e              BEQ      |L4.4570|
0011bc  2903              CMP      r1,#3                 ;1782
0011be  d00c              BEQ      |L4.4570|
                  |L4.4544|
0011c0  9900              LDR      r1,[sp,#0]            ;1787
0011c2  b20a              SXTH     r2,r1                 ;1787
0011c4  f9ba1000          LDRSH    r1,[r10,#0]           ;1787  ; _xu_
0011c8  1852              ADDS     r2,r2,r1              ;1787
0011ca  eb000180          ADD      r1,r0,r0,LSL #2       ;1787
0011ce  eb041101          ADD      r1,r4,r1,LSL #4       ;1787
0011d2  62ca              STR      r2,[r1,#0x2c]         ;1788
0011d4  d50a              BPL      |L4.4588|
0011d6  62cd              STR      r5,[r1,#0x2c]         ;1788
0011d8  e00d              B        |L4.4598|
                  |L4.4570|
0011da  eb000180          ADD      r1,r0,r0,LSL #2       ;1783
0011de  eb041101          ADD      r1,r4,r1,LSL #4       ;1783
0011e2  62cd              STR      r5,[r1,#0x2c]         ;1784
0011e4  630d              STR      r5,[r1,#0x30]         ;1785
0011e6  f8818028          STRB     r8,[r1,#0x28]         ;1785
0011ea  e014              B        |L4.4630|
                  |L4.4588|
0011ec  f24037fe          MOV      r7,#0x3fe             ;1789
0011f0  42ba              CMP      r2,r7                 ;1789
0011f2  dd00              BLE      |L4.4598|
0011f4  62cf              STR      r7,[r1,#0x2c]         ;1789
                  |L4.4598|
0011f6  f9bb2000          LDRSH    r2,[r11,#0]           ;1790  ; _x_
0011fa  fa0ff789          SXTH     r7,r9                 ;1790
0011fe  18ba              ADDS     r2,r7,r2              ;1790
001200  630a              STR      r2,[r1,#0x30]         ;1791
001202  d501              BPL      |L4.4616|
001204  630d              STR      r5,[r1,#0x30]         ;1791
001206  e004              B        |L4.4626|
                  |L4.4616|
001208  f24037fe          MOV      r7,#0x3fe             ;1792
00120c  42ba              CMP      r2,r7                 ;1792
00120e  dd00              BLE      |L4.4626|
001210  630f              STR      r7,[r1,#0x30]         ;1792
                  |L4.4626|
001212  f8815028          STRB     r5,[r1,#0x28]         ;1793
                  |L4.4630|
001216  1c40              ADDS     r0,r0,#1              ;1780
001218  b2c0              UXTB     r0,r0                 ;1780
                  |L4.4634|
00121a  4298              CMP      r0,r3                 ;1780
00121c  dbc4              BLT      |L4.4520|
00121e  4950              LDR      r1,|L4.4960|
001220  9800              LDR      r0,[sp,#0]            ;1805
001222  8008              STRH     r0,[r1,#0]            ;1805
001224  494f              LDR      r1,|L4.4964|
001226  6ae0              LDR      r0,[r4,#0x2c]         ;1806  ; bps
001228  8008              STRH     r0,[r1,#0]            ;1806
00122a  e0f3              B        |L4.5140|
                  |L4.4652|
00122c  79b1              LDRB     r1,[r6,#6]            ;1818  ; b1Hz_sh
00122e  b3a1              CBZ      r1,|L4.4762|
001230  494d              LDR      r1,|L4.4968|
001232  7809              LDRB     r1,[r1,#0]            ;1819  ; bOFF
001234  bb89              CBNZ     r1,|L4.4762|
001236  494d              LDR      r1,|L4.4972|
001238  f9b00000          LDRSH    r0,[r0,#0]            ;1820  ; load_I
00123c  f9b11000          LDRSH    r1,[r1,#0]            ;1820  ; CAP_WRK_CURR
001240  eb010181          ADD      r1,r1,r1,LSL #2       ;1820
001244  ebb00f41          CMP      r0,r1,LSL #1          ;1820
001248  da06              BGE      |L4.4696|
00124a  f8bb1000          LDRH     r1,[r11,#0]           ;1820  ; _x_
00124e  f1010101          ADD      r1,r1,#1              ;1820
001252  f8ab1000          STRH     r1,[r11,#0]           ;1820
001256  e006              B        |L4.4710|
                  |L4.4696|
001258  dd05              BLE      |L4.4710|
00125a  f8bb0000          LDRH     r0,[r11,#0]           ;1821  ; _x_
00125e  f1a00001          SUB      r0,r0,#1              ;1821
001262  f8ab0000          STRH     r0,[r11,#0]           ;1821
                  |L4.4710|
001266  464a              MOV      r2,r9                 ;1822
001268  4629              MOV      r1,r5                 ;1822
00126a  4834              LDR      r0,|L4.4924|
00126c  f7fffffe          BL       gran
001270  2232              MOVS     r2,#0x32              ;1823
001272  4251              RSBS     r1,r2,#0              ;1823
001274  4831              LDR      r0,|L4.4924|
001276  f7fffffe          BL       gran
00127a  483d              LDR      r0,|L4.4976|
00127c  4930              LDR      r1,|L4.4928|
00127e  f9b00000          LDRSH    r0,[r0,#0]            ;1825  ; CAP_MAX_VOLT
001282  f9b11000          LDRSH    r1,[r1,#0]            ;1825  ; load_U
001286  eb000080          ADD      r0,r0,r0,LSL #2       ;1825
00128a  ebb10f40          CMP      r1,r0,LSL #1          ;1825
00128e  da05              BGE      |L4.4764|
001290  f8ba1000          LDRH     r1,[r10,#0]           ;1825  ; _xu_
001294  f1010101          ADD      r1,r1,#1              ;1825
001298  e005              B        |L4.4774|
                  |L4.4762|
00129a  e010              B        |L4.4798|
                  |L4.4764|
00129c  dd05              BLE      |L4.4778|
00129e  f8ba1000          LDRH     r1,[r10,#0]           ;1826  ; _xu_
0012a2  f1a10101          SUB      r1,r1,#1              ;1826
                  |L4.4774|
0012a6  f8aa1000          STRH     r1,[r10,#0]           ;1826
                  |L4.4778|
0012aa  464a              MOV      r2,r9                 ;1827
0012ac  4629              MOV      r1,r5                 ;1827
0012ae  4823              LDR      r0,|L4.4924|
0012b0  f7fffffe          BL       gran
0012b4  2232              MOVS     r2,#0x32              ;1828
0012b6  4251              RSBS     r1,r2,#0              ;1828
0012b8  4823              LDR      r0,|L4.4936|
0012ba  f7fffffe          BL       gran
                  |L4.4798|
0012be  482c              LDR      r0,|L4.4976|
0012c0  f24271ec          MOV      r1,#0x27ec            ;1833
0012c4  f9b00000          LDRSH    r0,[r0,#0]            ;1833  ; CAP_MAX_VOLT
0012c8  4348              MULS     r0,r1,r0              ;1833
0012ca  4920              LDR      r1,|L4.4940|
0012cc  f9b11000          LDRSH    r1,[r1,#0]            ;1834  ; U_MAX
0012d0  fb90f0f1          SDIV     r0,r0,r1              ;1834
0012d4  9000              STR      r0,[sp,#0]            ;1838
0012d6  4825              LDR      r0,|L4.4972|
0012d8  f24271ec          MOV      r1,#0x27ec            ;1838
0012dc  f9b00000          LDRSH    r0,[r0,#0]            ;1838  ; CAP_WRK_CURR
0012e0  4348              MULS     r0,r1,r0              ;1838
0012e2  491b              LDR      r1,|L4.4944|
0012e4  f9b11000          LDRSH    r1,[r1,#0]            ;1839  ; I_MAX_IPS
0012e8  fb90f0f1          SDIV     r0,r0,r1              ;1839
0012ec  9001              STR      r0,[sp,#4]            ;1841
0012ee  20ac              MOVS     r0,#0xac              ;1841
0012f0  f7fffffe          BL       lc640_read_int
0012f4  f5a0412b          SUB      r1,r0,#0xab00         ;1841
0012f8  39cd              SUBS     r1,r1,#0xcd           ;1841
0012fa  d10a              BNE      |L4.4882|
0012fc  481c              LDR      r0,|L4.4976|
0012fe  8800              LDRH     r0,[r0,#0]            ;1843  ; CAP_MAX_VOLT
001300  eb000080          ADD      r0,r0,r0,LSL #2       ;1843
001304  0040              LSLS     r0,r0,#1              ;1843
001306  b200              SXTH     r0,r0                 ;1843
001308  f7fffffe          BL       find_U_curve
00130c  eb000080          ADD      r0,r0,r0,LSL #2       ;1843
001310  9000              STR      r0,[sp,#0]            ;1843
                  |L4.4882|
001312  20ae              MOVS     r0,#0xae              ;1846
001314  f7fffffe          BL       lc640_read_int
001318  f5a0412b          SUB      r1,r0,#0xab00         ;1846
00131c  39cd              SUBS     r1,r1,#0xcd           ;1846
00131e  d134              BNE      |L4.5002|
001320  4812              LDR      r0,|L4.4972|
001322  e028              B        |L4.4982|
                  |L4.4900|
                          DCD      CURR_FADE_IN
                  |L4.4904|
                          DCD      time_proc
                  |L4.4908|
                          DCD      I_ug_temp
                  |L4.4912|
                          DCD      REV_IS_ON
                  |L4.4916|
                          DCD      AVT_REV_IS_ON
                  |L4.4920|
                          DCD      proc_phase
                  |L4.4924|
                          DCD      _x_
                  |L4.4928|
                          DCD      load_U
                  |L4.4932|
                          DCD      U_maxg
                  |L4.4936|
                          DCD      _xu_
                  |L4.4940|
                          DCD      U_MAX
                  |L4.4944|
                          DCD      I_MAX_IPS
                  |L4.4948|
                          DCD      load_U_
                  |L4.4952|
                          DCD      I_maxp
                  |L4.4956|
                          DCD      U_up_temp
                  |L4.4960|
                          DCD      plazma_vol_u_0
                  |L4.4964|
                          DCD      plazma_vol_u_1
                  |L4.4968|
                          DCD      bOFF
                  |L4.4972|
                          DCD      CAP_WRK_CURR
                  |L4.4976|
                          DCD      CAP_MAX_VOLT
                  |L4.4980|
001374  e048              B        |L4.5128|
                  |L4.4982|
001376  8800              LDRH     r0,[r0,#0]            ;1848  ; CAP_WRK_CURR
001378  eb000080          ADD      r0,r0,r0,LSL #2       ;1848
00137c  0040              LSLS     r0,r0,#1              ;1848
00137e  b200              SXTH     r0,r0                 ;1848
001380  f7fffffe          BL       find_I_curve
001384  eb000080          ADD      r0,r0,r0,LSL #2       ;1848
001388  9001              STR      r0,[sp,#4]            ;1848
                  |L4.5002|
00138a  2000              MOVS     r0,#0                 ;1853
00138c  f9b72000          LDRSH    r2,[r7,#0]            ;1307
001390  e02d              B        |L4.5102|
                  |L4.5010|
001392  49ff              LDR      r1,|L4.6032|
001394  7809              LDRB     r1,[r1,#0]            ;1855  ; bOFF
001396  b141              CBZ      r1,|L4.5034|
001398  eb000180          ADD      r1,r0,r0,LSL #2       ;1856
00139c  eb041101          ADD      r1,r4,r1,LSL #4       ;1856
0013a0  62cd              STR      r5,[r1,#0x2c]         ;1857
0013a2  630d              STR      r5,[r1,#0x30]         ;1858
0013a4  f8818028          STRB     r8,[r1,#0x28]         ;1858
0013a8  e01f              B        |L4.5098|
                  |L4.5034|
0013aa  9900              LDR      r1,[sp,#0]            ;1860
0013ac  b20b              SXTH     r3,r1                 ;1860
0013ae  f9ba1000          LDRSH    r1,[r10,#0]           ;1860  ; _xu_
0013b2  185b              ADDS     r3,r3,r1              ;1860
0013b4  eb000180          ADD      r1,r0,r0,LSL #2       ;1860
0013b8  eb041101          ADD      r1,r4,r1,LSL #4       ;1860
0013bc  62cb              STR      r3,[r1,#0x2c]         ;1861
0013be  d501              BPL      |L4.5060|
0013c0  62cd              STR      r5,[r1,#0x2c]         ;1861
0013c2  e003              B        |L4.5068|
                  |L4.5060|
0013c4  454b              CMP      r3,r9                 ;1862
0013c6  dd01              BLE      |L4.5068|
0013c8  f8c1902c          STR      r9,[r1,#0x2c]         ;1862
                  |L4.5068|
0013cc  9b01              LDR      r3,[sp,#4]            ;1863
0013ce  b21f              SXTH     r7,r3                 ;1863
0013d0  f9bb3000          LDRSH    r3,[r11,#0]           ;1863  ; _x_
0013d4  18fb              ADDS     r3,r7,r3              ;1863
0013d6  630b              STR      r3,[r1,#0x30]         ;1864
0013d8  d501              BPL      |L4.5086|
0013da  630d              STR      r5,[r1,#0x30]         ;1864
0013dc  e003              B        |L4.5094|
                  |L4.5086|
0013de  454b              CMP      r3,r9                 ;1865
0013e0  dd01              BLE      |L4.5094|
0013e2  f8c19030          STR      r9,[r1,#0x30]         ;1865
                  |L4.5094|
0013e6  f8815028          STRB     r5,[r1,#0x28]         ;1866
                  |L4.5098|
0013ea  1c40              ADDS     r0,r0,#1              ;1853
0013ec  b2c0              UXTB     r0,r0                 ;1853
                  |L4.5102|
0013ee  4290              CMP      r0,r2                 ;1853
0013f0  dbcf              BLT      |L4.5010|
0013f2  e00f              B        |L4.5140|
                  |L4.5108|
;;;1876   		{
;;;1877   		bps[i]._vol_u=0;
0013f4  eb000180          ADD      r1,r0,r0,LSL #2
0013f8  eb041101          ADD      r1,r4,r1,LSL #4
0013fc  1c40              ADDS     r0,r0,#1              ;1875
;;;1878   		bps[i]._vol_i=0;
0013fe  62cd              STR      r5,[r1,#0x2c]
;;;1879   		bps[i]._flags_tu=1;
001400  630d              STR      r5,[r1,#0x30]
001402  f8813028          STRB     r3,[r1,#0x28]
001406  b2c0              UXTB     r0,r0                 ;1875
                  |L4.5128|
001408  4290              CMP      r0,r2                 ;1875
00140a  dbf3              BLT      |L4.5108|
;;;1880   		}
;;;1881   	_x_=0;
00140c  f8ab5000          STRH     r5,[r11,#0]
;;;1882   	_xu_=0;
001410  f8aa5000          STRH     r5,[r10,#0]
                  |L4.5140|
;;;1883   	}
;;;1884   
;;;1885   //gran(&bps[0]._vol_u,10,1010);
;;;1886   //gran(&bps[0]._vol_i,10,1010);
;;;1887   
;;;1888   b1Hz_sh=0;
001414  71b5              STRB     r5,[r6,#6]
;;;1889   }
001416  e8bd9ffc          POP      {r2-r12,pc}
;;;1890   
                          ENDP

                  bps_drv PROC
;;;1899   //-----------------------------------------------
;;;1900   void bps_drv(char in)
00141a  eb000180          ADD      r1,r0,r0,LSL #2
;;;1901   {
;;;1902   char temp;
;;;1903   
;;;1904   if (bps[in]._device!=dSRC) return;
00141e  48dd              LDR      r0,|L4.6036|
001420  b510              PUSH     {r4,lr}               ;1901
001422  eb001001          ADD      r0,r0,r1,LSL #4
001426  7801              LDRB     r1,[r0,#0]
001428  2903              CMP      r1,#3
00142a  d172              BNE      |L4.5394|
;;;1905   temp=bps[in]._flags_tm;
00142c  f890103e          LDRB     r1,[r0,#0x3e]
;;;1906   if(temp&(1<<AV_T))
001430  078a              LSLS     r2,r1,#30
;;;1907   	{
;;;1908   	if(bps[in]._temp_av_cnt<1200) 
;;;1909   		{
;;;1910   		bps[in]._temp_av_cnt++;
;;;1911   		if(bps[in]._temp_av_cnt>=1200)
;;;1912   			{
;;;1913   			bps[in]._temp_av_cnt=1200;
;;;1914   		   	//if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
;;;1915   			}
;;;1916   		}
;;;1917   	}
;;;1918   
;;;1919   else if(!(temp&(1<<AV_T)))
;;;1920   	{
;;;1921   	if(bps[in]._temp_av_cnt) 
001432  f9b02042          LDRSH    r2,[r0,#0x42]
001436  d50c              BPL      |L4.5202|
001438  f44f6396          MOV      r3,#0x4b0             ;1908
00143c  429a              CMP      r2,r3                 ;1908
00143e  da0d              BGE      |L4.5212|
001440  1c52              ADDS     r2,r2,#1              ;1910
001442  b212              SXTH     r2,r2                 ;1910
001444  f8a02042          STRH     r2,[r0,#0x42]         ;1910
001448  429a              CMP      r2,r3                 ;1911
00144a  db07              BLT      |L4.5212|
00144c  f8a03042          STRH     r3,[r0,#0x42]         ;1913
001450  e004              B        |L4.5212|
                  |L4.5202|
001452  b11a              CBZ      r2,|L4.5212|
;;;1922   		{
;;;1923   		bps[in]._temp_av_cnt--;
001454  f1a20201          SUB      r2,r2,#1
001458  f8a02042          STRH     r2,[r0,#0x42]
                  |L4.5212|
;;;1924   		if(!bps[in]._temp_av_cnt)
;;;1925   			{
;;;1926   			//if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
;;;1927   			}
;;;1928   		} 	
;;;1929   
;;;1930   	}
;;;1931   
;;;1932   if((temp&(1<<AVUMAX)))
00145c  070a              LSLS     r2,r1,#28
;;;1933   	{
;;;1934   	if(bps[in]._umax_av_cnt<10) 
;;;1935   		{
;;;1936   		bps[in]._umax_av_cnt++;
;;;1937   		if(bps[in]._umax_av_cnt>=10)
;;;1938   			{ 
;;;1939   			bps[in]._umax_av_cnt=10;
;;;1940   			//if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
;;;1941   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;1942   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;1943   				{
;;;1944   				apv_cnt[in,0]=APV_INIT;
;;;1945   				apv_cnt[in,1]=APV_INIT;
;;;1946   				apv_cnt[in,2]=APV_INIT;
;;;1947   				apv_flags[in]=afOFF;
;;;1948   				}				*/
;;;1949   						
;;;1950   			}
;;;1951   		} 
;;;1952   	}		
;;;1953   else if(!(temp&(1<<AVUMAX)))
;;;1954   	{
;;;1955   	if(bps[in]._umax_av_cnt>0) 
00145e  f9b02044          LDRSH    r2,[r0,#0x44]
001462  f04f030a          MOV      r3,#0xa               ;1939
001466  f04f0400          MOV      r4,#0                 ;1908
00146a  d50a              BPL      |L4.5250|
00146c  2a0a              CMP      r2,#0xa               ;1934
00146e  da13              BGE      |L4.5272|
001470  1c52              ADDS     r2,r2,#1              ;1936
001472  b212              SXTH     r2,r2                 ;1936
001474  f8a02044          STRH     r2,[r0,#0x44]         ;1936
001478  2a0a              CMP      r2,#0xa               ;1937
00147a  db0d              BLT      |L4.5272|
00147c  f8a03044          STRH     r3,[r0,#0x44]         ;1939
001480  e00a              B        |L4.5272|
                  |L4.5250|
001482  2a00              CMP      r2,#0
001484  dd05              BLE      |L4.5266|
;;;1956   		{
;;;1957   		bps[in]._umax_av_cnt--;
001486  f1a20201          SUB      r2,r2,#1
00148a  b212              SXTH     r2,r2
00148c  f8a02044          STRH     r2,[r0,#0x44]
;;;1958   		if(bps[in]._umax_av_cnt==0)
001490  e002              B        |L4.5272|
                  |L4.5266|
;;;1959   			{
;;;1960   			bps[in]._umax_av_cnt=0;
;;;1961   			//avar_bps_hndl(in,1,0);
;;;1962   	 //		apv_cnt[in,0]=0;
;;;1963   	//		apv_cnt[in,1]=0;
;;;1964   	 //		apv_cnt[in,2]=0;			
;;;1965   			}
;;;1966   		}
;;;1967   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
001492  da01              BGE      |L4.5272|
001494  f8a04044          STRH     r4,[r0,#0x44]
                  |L4.5272|
;;;1968   	}
;;;1969   
;;;1970   if(temp&(1<<AVUMIN))
001498  06ca              LSLS     r2,r1,#27
;;;1971   	{
;;;1972   	if(bps[in]._umin_av_cnt<10) 
;;;1973   		{
;;;1974   		bps[in]._umin_av_cnt++;
;;;1975   		if(bps[in]._umin_av_cnt>=10)
;;;1976   			{ 
;;;1977   			bps[in]._umin_av_cnt=10;
;;;1978   			//if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
;;;1979   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;1980   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;1981   				{
;;;1982   				apv_cnt[in,0]=APV_INIT;
;;;1983   				apv_cnt[in,1]=APV_INIT;
;;;1984   				apv_cnt[in,2]=APV_INIT;
;;;1985   				apv_flags[in]=afOFF;
;;;1986   				}*/				
;;;1987   			}
;;;1988   		} 
;;;1989   	}	
;;;1990   	
;;;1991   else if(!(temp&(1<<AVUMIN)))
;;;1992   	{
;;;1993   	if(bps[in]._umin_av_cnt) 
00149a  f9b02046          LDRSH    r2,[r0,#0x46]
00149e  d50a              BPL      |L4.5302|
0014a0  2a0a              CMP      r2,#0xa               ;1972
0014a2  da0d              BGE      |L4.5312|
0014a4  1c52              ADDS     r2,r2,#1              ;1974
0014a6  b212              SXTH     r2,r2                 ;1974
0014a8  f8a02046          STRH     r2,[r0,#0x46]         ;1974
0014ac  2a0a              CMP      r2,#0xa               ;1975
0014ae  db07              BLT      |L4.5312|
0014b0  f8a03046          STRH     r3,[r0,#0x46]         ;1977
0014b4  e004              B        |L4.5312|
                  |L4.5302|
0014b6  b11a              CBZ      r2,|L4.5312|
;;;1994   		{
;;;1995   		bps[in]._umin_av_cnt--;
0014b8  1e52              SUBS     r2,r2,#1
0014ba  b212              SXTH     r2,r2
0014bc  f8a02046          STRH     r2,[r0,#0x46]
                  |L4.5312|
;;;1996   		if(bps[in]._umin_av_cnt==0)
;;;1997   			{
;;;1998   			bps[in]._umin_av_cnt=0;
;;;1999   		//	avar_bps_hndl(in,2,0);
;;;2000   		//	apv_cnt[in,0]=0;
;;;2001   		//	apv_cnt[in,1]=0;
;;;2002   		//	apv_cnt[in,2]=0;
;;;2003   			}
;;;2004   		}
;;;2005   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;2006   	}
;;;2007   
;;;2008   //bps[in]._state=bsOFF;
;;;2009   
;;;2010   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
0014c0  7842              LDRB     r2,[r0,#1]
0014c2  0712              LSLS     r2,r2,#28
0014c4  d001              BEQ      |L4.5322|
0014c6  2104              MOVS     r1,#4
0014c8  e00f              B        |L4.5354|
                  |L4.5322|
;;;2011   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
0014ca  4ab3              LDR      r2,|L4.6040|
0014cc  7812              LDRB     r2,[r2,#0]  ; net_av
0014ce  b122              CBZ      r2,|L4.5338|
0014d0  78c2              LDRB     r2,[r0,#3]
0014d2  2a14              CMP      r2,#0x14
0014d4  d901              BLS      |L4.5338|
;;;2012   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
0014d6  2105              MOVS     r1,#5
0014d8  e007              B        |L4.5354|
                  |L4.5338|
;;;2013   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
0014da  0689              LSLS     r1,r1,#26
0014dc  d501              BPL      |L4.5346|
0014de  2102              MOVS     r1,#2
0014e0  e003              B        |L4.5354|
                  |L4.5346|
;;;2014   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
0014e2  78c1              LDRB     r1,[r0,#3]
0014e4  2914              CMP      r1,#0x14
0014e6  d201              BCS      |L4.5356|
0014e8  2101              MOVS     r1,#1
                  |L4.5354|
0014ea  7081              STRB     r1,[r0,#2]
                  |L4.5356|
;;;2015   
;;;2016   
;;;2017   
;;;2018   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;2019   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;2020   //else bps[0]._state=ssNOT;
;;;2021   
;;;2022   //bps[in]._is_ready=0;
;;;2023   //bps[in]._is_wrk=0;
;;;2024   //if(bps[in]._av_net) bps[in]._flags_bp='N';// не подключен
;;;2025   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// завышено напряжение(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;2026   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// занижено напряжение
;;;2027   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// температура
;;;2028   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;2029   //	{
;;;2030   //	bps[in]._flags_bp='B';// заблокирован
;;;2031   //	bps[in]._is_ready=1;
;;;2032   //	}
;;;2033   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;2034   //     {
;;;2035   //     bps[in]._flags_bp='W';// работает
;;;2036   //     bps[in]._is_ready=1;
;;;2037   //     bps[in]._is_wrk=1;
;;;2038        
;;;2039   //     }
;;;2040   //else bps[in]._is_ready=1;     
;;;2041   
;;;2042   
;;;2043   
;;;2044   
;;;2045   
;;;2046   /*
;;;2047   bps[in]._flags_tu&=BIN8(11111110);
;;;2048   if(bps[in]._ist_blok_cnt)
;;;2049   	{
;;;2050   	bps[in]._ist_blok_cnt--;
;;;2051   	bps[in]._flags_tu|=BIN8(1);
;;;2052   	}
;;;2053   
;;;2054   	   */ 
;;;2055   
;;;2056   //Пересброс БПСа при потере связи
;;;2057   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
0014ec  78c1              LDRB     r1,[r0,#3]
0014ee  290a              CMP      r1,#0xa
;;;2058   else bps[in]._flags_tu&=BIN8(1111111);
0014f0  f8901028          LDRB     r1,[r0,#0x28]
0014f4  d302              BCC      |L4.5372|
0014f6  f0410180          ORR      r1,r1,#0x80           ;2057
0014fa  e001              B        |L4.5376|
                  |L4.5372|
0014fc  f001017f          AND      r1,r1,#0x7f
                  |L4.5376|
001500  f8801028          STRB     r1,[r0,#0x28]
;;;2059   	
;;;2060   bps[in]._vol_u=cntrl_stat_U;	
001504  49a5              LDR      r1,|L4.6044|
001506  f9b1200c          LDRSH    r2,[r1,#0xc]  ; cntrl_stat_U
;;;2061   bps[in]._vol_i=cntrl_stat_I;
00150a  62c2              STR      r2,[r0,#0x2c]
00150c  f9b1100e          LDRSH    r1,[r1,#0xe]  ; cntrl_stat_I
001510  6301              STR      r1,[r0,#0x30]
                  |L4.5394|
;;;2062    
;;;2063   }
001512  bd10              POP      {r4,pc}
;;;2064   
                          ENDP

                  volt_contr_hndl PROC
;;;2077   //-----------------------------------------------
;;;2078   void volt_contr_hndl(void)
001514  e92d47f0          PUSH     {r4-r10,lr}
;;;2079   {
;;;2080   if(work_stat==wsOFF)
001518  48a1              LDR      r0,|L4.6048|
;;;2081   	{
;;;2082   	cnt_volt_contr=0;
;;;2083   	}
;;;2084   else 
;;;2085   	{
;;;2086   	if(cnt_volt_contr<(T_DEL_REL_VOLT_START*10))
00151a  4ea2              LDR      r6,|L4.6052|
00151c  4c9f              LDR      r4,|L4.6044|
00151e  7800              LDRB     r0,[r0,#0]            ;2080  ; work_stat
001520  2500              MOVS     r5,#0                 ;2080
001522  b310              CBZ      r0,|L4.5482|
001524  f9b60000          LDRSH    r0,[r6,#0]  ; T_DEL_REL_VOLT_START
001528  eb000180          ADD      r1,r0,r0,LSL #2
00152c  f9b40020          LDRSH    r0,[r4,#0x20]  ; cnt_volt_contr
001530  ebb00f41          CMP      r0,r1,LSL #1
001534  da01              BGE      |L4.5434|
;;;2087   		{
;;;2088   		cnt_volt_contr++;
001536  1c40              ADDS     r0,r0,#1
001538  8420              STRH     r0,[r4,#0x20]
                  |L4.5434|
;;;2089   		}
;;;2090   	}
;;;2091   
;;;2092   	
;;;2093   	if(load_U>REL_VOLT_UMIN*10)
00153a  489b              LDR      r0,|L4.6056|
00153c  f8df826c          LDR      r8,|L4.6060|
;;;2094   		{
;;;2095   		cnt_rel_volt_umin++;
;;;2096   		gran(&cnt_rel_volt_umin,0,30000);
001540  f2475a30          MOV      r10,#0x7530
001544  f9b00000          LDRSH    r0,[r0,#0]            ;2093  ; REL_VOLT_UMIN
001548  eb000180          ADD      r1,r0,r0,LSL #2       ;2093
00154c  f9b80000          LDRSH    r0,[r8,#0]            ;2093  ; load_U
001550  ebb00f41          CMP      r0,r1,LSL #1          ;2093
001554  dd0b              BLE      |L4.5486|
001556  8c60              LDRH     r0,[r4,#0x22]         ;2095  ; cnt_rel_volt_umin
001558  4652              MOV      r2,r10
00155a  1c40              ADDS     r0,r0,#1              ;2095
00155c  8460              STRH     r0,[r4,#0x22]         ;2095
00155e  488f              LDR      r0,|L4.6044|
001560  2100              MOVS     r1,#0
001562  3022              ADDS     r0,r0,#0x22
001564  f7fffffe          BL       gran
001568  e002              B        |L4.5488|
                  |L4.5482|
00156a  8425              STRH     r5,[r4,#0x20]         ;2082
00156c  e7e5              B        |L4.5434|
                  |L4.5486|
;;;2097   		}
;;;2098   	else cnt_rel_volt_umin=0;
00156e  8465              STRH     r5,[r4,#0x22]
                  |L4.5488|
;;;2099   	if((cnt_rel_volt_umin>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_DOWN=1;
001570  f8df923c          LDR      r9,|L4.6064|
001574  2701              MOVS     r7,#1
001576  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
00157a  eb000180          ADD      r1,r0,r0,LSL #2
00157e  f9b40022          LDRSH    r0,[r4,#0x22]  ; cnt_rel_volt_umin
001582  ebb00f41          CMP      r0,r1,LSL #1
001586  db0a              BLT      |L4.5534|
001588  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
00158c  f9b42020          LDRSH    r2,[r4,#0x20]  ; cnt_volt_contr
001590  eb010181          ADD      r1,r1,r1,LSL #2
001594  ebb20f41          CMP      r2,r1,LSL #1
001598  db01              BLT      |L4.5534|
00159a  7267              STRB     r7,[r4,#9]
00159c  e001              B        |L4.5538|
                  |L4.5534|
;;;2100   	else if(cnt_rel_volt_umin==0)							  							bVOLT_IS_NOT_DOWN=0;
00159e  b900              CBNZ     r0,|L4.5538|
0015a0  7265              STRB     r5,[r4,#9]
                  |L4.5538|
;;;2101   
;;;2102   	if(load_U<REL_VOLT_UMAX*10)
0015a2  4884              LDR      r0,|L4.6068|
0015a4  f9b00000          LDRSH    r0,[r0,#0]  ; REL_VOLT_UMAX
0015a8  eb000180          ADD      r1,r0,r0,LSL #2
0015ac  f9b80000          LDRSH    r0,[r8,#0]  ; load_U
0015b0  ebb00f41          CMP      r0,r1,LSL #1
0015b4  da09              BGE      |L4.5578|
;;;2103   		{
;;;2104   		cnt_rel_volt_umax++;
0015b6  8ca0              LDRH     r0,[r4,#0x24]  ; cnt_rel_volt_umax
;;;2105   		gran(&cnt_rel_volt_umax,0,30000);
0015b8  4652              MOV      r2,r10
0015ba  1c40              ADDS     r0,r0,#1              ;2104
0015bc  84a0              STRH     r0,[r4,#0x24]         ;2104
0015be  4877              LDR      r0,|L4.6044|
0015c0  2100              MOVS     r1,#0
0015c2  3024              ADDS     r0,r0,#0x24
0015c4  f7fffffe          BL       gran
0015c8  e000              B        |L4.5580|
                  |L4.5578|
;;;2106   		}
;;;2107   	else cnt_rel_volt_umax=0;
0015ca  84a5              STRH     r5,[r4,#0x24]
                  |L4.5580|
;;;2108   	if((cnt_rel_volt_umax>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_UP=1;
0015cc  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
0015d0  eb000180          ADD      r1,r0,r0,LSL #2
0015d4  f9b40024          LDRSH    r0,[r4,#0x24]  ; cnt_rel_volt_umax
0015d8  ebb00f41          CMP      r0,r1,LSL #1
0015dc  db0a              BLT      |L4.5620|
0015de  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
0015e2  f9b42020          LDRSH    r2,[r4,#0x20]  ; cnt_volt_contr
0015e6  eb010181          ADD      r1,r1,r1,LSL #2
0015ea  ebb20f41          CMP      r2,r1,LSL #1
0015ee  db01              BLT      |L4.5620|
0015f0  72a7              STRB     r7,[r4,#0xa]
0015f2  e002              B        |L4.5626|
                  |L4.5620|
;;;2109   	else if(cnt_rel_volt_umax==0)							  							bVOLT_IS_NOT_UP=0;
0015f4  b130              CBZ      r0,|L4.5636|
;;;2110   	
;;;2111   	if(bVOLT_IS_NOT_UP && bVOLT_IS_NOT_DOWN) bVOLT_IS_NORM=1;
0015f6  7aa0              LDRB     r0,[r4,#0xa]  ; bVOLT_IS_NOT_UP
0015f8  b128              CBZ      r0,|L4.5638|
                  |L4.5626|
0015fa  7a60              LDRB     r0,[r4,#9]  ; bVOLT_IS_NOT_DOWN
0015fc  b118              CBZ      r0,|L4.5638|
0015fe  72e7              STRB     r7,[r4,#0xb]
                  |L4.5632|
;;;2112   	else bVOLT_IS_NORM=0;
;;;2113   
;;;2114   
;;;2115   }
001600  e8bd87f0          POP      {r4-r10,pc}
                  |L4.5636|
001604  72a5              STRB     r5,[r4,#0xa]          ;2109
                  |L4.5638|
001606  72e5              STRB     r5,[r4,#0xb]          ;2112
001608  e7fa              B        |L4.5632|
;;;2116   
                          ENDP

                  current_stab_hndl PROC
;;;2117   //-----------------------------------------------
;;;2118   void current_stab_hndl(void)
00160a  e92d5ff0          PUSH     {r4-r12,lr}
;;;2119   {
;;;2120   
;;;2121   if(work_stat==wsPS)
00160e  4864              LDR      r0,|L4.6048|
;;;2122   	{
;;;2123   	delta_U_abs=abs_pal(load_U-U_up);
001610  f8df81a4          LDR      r8,|L4.6072|
;;;2124   	delta_U_rel=(delta_U_abs*100)/U_up;
;;;2125   
;;;2126   	delta_I_abs=abs_pal(load_I-I_maxp);
001614  f8dfb1a4          LDR      r11,|L4.6076|
001618  7801              LDRB     r1,[r0,#0]            ;2121  ; work_stat
00161a  4864              LDR      r0,|L4.6060|
00161c  f8dfa1a0          LDR      r10,|L4.6080|
001620  4d68              LDR      r5,|L4.6084|
001622  f9b00000          LDRSH    r0,[r0,#0]            ;2123
;;;2127   	delta_I_rel=(delta_I_abs*100)/I_maxp;
001626  4e68              LDR      r6,|L4.6088|
;;;2128   	}
;;;2129   
;;;2130   else if(work_stat==wsGS)
;;;2131   	{
;;;2132   	delta_U_abs=abs_pal(load_U-U_maxg);
;;;2133   	delta_U_rel=(delta_U_abs*100)/U_maxg;
;;;2134   
;;;2135   	delta_I_abs=abs_pal(load_I-I_ug_temp);
;;;2136   	delta_I_rel=(delta_I_abs*100)/I_ug_temp;
;;;2137   	}
;;;2138   else 
;;;2139   	{
;;;2140   	cnt_del_rel=0;
001628  2700              MOVS     r7,#0
00162a  4c68              LDR      r4,|L4.6092|
00162c  2902              CMP      r1,#2                 ;2121
00162e  d011              BEQ      |L4.5716|
001630  2901              CMP      r1,#1                 ;2130
001632  d025              BEQ      |L4.5760|
001634  8027              STRH     r7,[r4,#0]
                  |L4.5686|
;;;2141   	}
;;;2142   
;;;2143   if((delta_U_rel>DELT_REL_CURR_U)&&(delta_I_rel<DELT_REL_CURR_I))
001636  4966              LDR      r1,|L4.6096|
001638  6828              LDR      r0,[r5,#0]  ; delta_U_rel
00163a  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_U
00163e  4288              CMP      r0,r1
001640  dd43              BLE      |L4.5834|
001642  4964              LDR      r1,|L4.6100|
001644  6830              LDR      r0,[r6,#0]  ; delta_I_rel
001646  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_I
00164a  4288              CMP      r0,r1
00164c  da3d              BGE      |L4.5834|
;;;2144   	{
;;;2145   	cnt_del_rel++;
00164e  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001650  1c40              ADDS     r0,r0,#1
001652  e03c              B        |L4.5838|
                  |L4.5716|
001654  f8df9180          LDR      r9,|L4.6104|
001658  f8b91000          LDRH     r1,[r9,#0]            ;2123  ; U_up
00165c  1a40              SUBS     r0,r0,r1              ;2123
00165e  b200              SXTH     r0,r0                 ;2123
001660  f7fffffe          BL       abs_pal
001664  f8c80000          STR      r0,[r8,#0]            ;2124  ; delta_U_abs
001668  2164              MOVS     r1,#0x64              ;2124
00166a  4348              MULS     r0,r1,r0              ;2124
00166c  f9b91000          LDRSH    r1,[r9,#0]            ;2124  ; U_up
001670  f8df8168          LDR      r8,|L4.6108|
001674  fb90f0f1          SDIV     r0,r0,r1              ;2124
001678  6028              STR      r0,[r5,#0]            ;2126  ; delta_U_rel
00167a  f8bb1000          LDRH     r1,[r11,#0]           ;2126  ; load_I
00167e  e014              B        |L4.5802|
                  |L4.5760|
001680  f8df915c          LDR      r9,|L4.6112|
001684  f8b91000          LDRH     r1,[r9,#0]            ;2132  ; U_maxg
001688  1a40              SUBS     r0,r0,r1              ;2132
00168a  b200              SXTH     r0,r0                 ;2132
00168c  f7fffffe          BL       abs_pal
001690  f8c80000          STR      r0,[r8,#0]            ;2133  ; delta_U_abs
001694  2164              MOVS     r1,#0x64              ;2133
001696  4348              MULS     r0,r1,r0              ;2133
001698  f9b91000          LDRSH    r1,[r9,#0]            ;2133  ; U_maxg
00169c  f8df8144          LDR      r8,|L4.6116|
0016a0  fb90f0f1          SDIV     r0,r0,r1              ;2133
0016a4  6028              STR      r0,[r5,#0]            ;2135  ; delta_U_rel
0016a6  f8bb1000          LDRH     r1,[r11,#0]           ;2135  ; load_I
                  |L4.5802|
0016aa  f8b80000          LDRH     r0,[r8,#0]            ;2135  ; I_ug_temp
0016ae  1a08              SUBS     r0,r1,r0              ;2135
0016b0  b200              SXTH     r0,r0                 ;2135
0016b2  f7fffffe          BL       abs_pal
0016b6  2164              MOVS     r1,#0x64              ;2136
0016b8  f8ca0000          STR      r0,[r10,#0]           ;2136  ; delta_I_abs
0016bc  4348              MULS     r0,r1,r0              ;2136
0016be  f9b81000          LDRSH    r1,[r8,#0]            ;2136  ; I_ug_temp
0016c2  fb90f0f1          SDIV     r0,r0,r1              ;2136
0016c6  6030              STR      r0,[r6,#0]            ;2136  ; delta_I_rel
0016c8  e7b5              B        |L4.5686|
                  |L4.5834|
;;;2146   	}
;;;2147   else
;;;2148   	{
;;;2149   	cnt_del_rel--;
0016ca  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
0016cc  1e40              SUBS     r0,r0,#1
                  |L4.5838|
;;;2150   	}
;;;2151   
;;;2152   gran(&cnt_del_rel,0,(T_DEL_REL_CURR_WRK*10)+10);
0016ce  4d46              LDR      r5,|L4.6120|
0016d0  8020              STRH     r0,[r4,#0]            ;2149
0016d2  210a              MOVS     r1,#0xa
0016d4  8828              LDRH     r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
0016d6  eb000080          ADD      r0,r0,r0,LSL #2
0016da  eb010040          ADD      r0,r1,r0,LSL #1
0016de  b202              SXTH     r2,r0
0016e0  2100              MOVS     r1,#0
0016e2  483a              LDR      r0,|L4.6092|
0016e4  f7fffffe          BL       gran
;;;2153   
;;;2154   if(work_stat==wsOFF) cnt_del_rel=0;
0016e8  482d              LDR      r0,|L4.6048|
0016ea  7800              LDRB     r0,[r0,#0]  ; work_stat
0016ec  b900              CBNZ     r0,|L4.5872|
0016ee  8027              STRH     r7,[r4,#0]
                  |L4.5872|
;;;2155   
;;;2156   
;;;2157   if ( (time_proc>=(T_DEL_REL_CURR_START)) &&
0016f0  483e              LDR      r0,|L4.6124|
0016f2  493f              LDR      r1,|L4.6128|
;;;2158   	(cnt_del_rel>(T_DEL_REL_CURR_WRK*10)) )
;;;2159   	{
;;;2160   	bCURRENT_STAB=1;
0016f4  4a3f              LDR      r2,|L4.6132|
0016f6  6800              LDR      r0,[r0,#0]            ;2157  ; time_proc
0016f8  f9b11000          LDRSH    r1,[r1,#0]            ;2157  ; T_DEL_REL_CURR_START
0016fc  4288              CMP      r0,r1                 ;2157
0016fe  db0a              BLT      |L4.5910|
001700  f9b53000          LDRSH    r3,[r5,#0]            ;2158  ; T_DEL_REL_CURR_WRK
001704  f9b46000          LDRSH    r6,[r4,#0]            ;2158  ; cnt_del_rel
001708  eb030383          ADD      r3,r3,r3,LSL #2       ;2158
00170c  ebb60f43          CMP      r6,r3,LSL #1          ;2158
001710  dd01              BLE      |L4.5910|
001712  2301              MOVS     r3,#1
001714  7013              STRB     r3,[r2,#0]
                  |L4.5910|
;;;2161   	}
;;;2162   if ( (time_proc<(T_DEL_REL_CURR_START)) ||
001716  4288              CMP      r0,r1
001718  db08              BLT      |L4.5932|
;;;2163   	(cnt_del_rel<=(T_DEL_REL_CURR_WRK*10)) )
00171a  f9b50000          LDRSH    r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
00171e  f9b41000          LDRSH    r1,[r4,#0]  ; cnt_del_rel
001722  eb000080          ADD      r0,r0,r0,LSL #2
001726  ebb10f40          CMP      r1,r0,LSL #1
00172a  dc00              BGT      |L4.5934|
                  |L4.5932|
;;;2164   	{
;;;2165   	bCURRENT_STAB=0;
00172c  7017              STRB     r7,[r2,#0]
                  |L4.5934|
;;;2166   	}
;;;2167   
;;;2168   /*
;;;2169   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
;;;2170   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
;;;2171   //SET_REG(LPC_GPIO0->FIOSET,1,5,1);
;;;2172   
;;;2173   if(RELE_LOG_CURR==0)
;;;2174   	{
;;;2175   	SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2176   	}
;;;2177   else if(RELE_LOG_CURR==1)
;;;2178   	{
;;;2179   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2180   	else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2181   	}
;;;2182   else
;;;2183   	{
;;;2184   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2185   	else SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2186   	}*/
;;;2187   
;;;2188   }
00172e  e8bd9ff0          POP      {r4-r12,pc}
;;;2189   
                          ENDP

                  rele_hndl PROC
;;;2213   //-----------------------------------------------
;;;2214   void rele_hndl(void)
001732  e92d4ff0          PUSH     {r4-r11,lr}
;;;2215   {
;;;2216   //Реле1
;;;2217   if(RELE_FUNC[0]==0)rele_stat[0]=rsOFF; 		//Выключено
;;;2218   else if(RELE_FUNC[0]==1)					//Реверс
;;;2219   	{
;;;2220   	if(work_stat==wsCAP) 
001736  481a              LDR      r0,|L4.6048|
;;;2221   		{
;;;2222   		if(bRAZR) rele_stat[0]=rsOFF;
;;;2223   		else 	rele_stat[0]=rsON;
;;;2224   		} 
;;;2225   	else 
;;;2226   		{
;;;2227   		if(REV_STAT==rsREW)	rele_stat[0]=rsOFF;
;;;2228   		else 			rele_stat[0]=rsON;
;;;2229   		}
;;;2230   	}
;;;2231   else if(RELE_FUNC[0]==2)					//Токоограничение
;;;2232   	{
;;;2233   	if(RELE_LOG_CURR==0)
001738  4b32              LDR      r3,|L4.6148|
00173a  f8dfe0bc          LDR      lr,|L4.6136|
00173e  f890c000          LDRB     r12,[r0,#0]           ;2220
001742  482e              LDR      r0,|L4.6140|
001744  f9b36000          LDRSH    r6,[r3,#0]
;;;2234   		{
;;;2235   		if(bCURRENT_STAB==0)	rele_stat[0]=rsON;
;;;2236   		else 				rele_stat[0]=rsOFF;
;;;2237   		}
;;;2238   	else if(RELE_LOG_CURR==1)
;;;2239   		{
;;;2240   		if(bCURRENT_STAB==0)	rele_stat[0]=rsOFF;
;;;2241   		else 				rele_stat[0]=rsON;
;;;2242   		}
;;;2243   	}									
;;;2244   else if(RELE_FUNC[0]==3)					//Напряжение в норме
;;;2245   	{
;;;2246   	if(RELE_LOG_VOLT==0)
001748  4b2f              LDR      r3,|L4.6152|
00174a  7800              LDRB     r0,[r0,#0]            ;2222
00174c  f9be4000          LDRSH    r4,[lr,#0]            ;2217  ; RELE_FUNC
001750  4682              MOV      r10,r0                ;2222
001752  482b              LDR      r0,|L4.6144|
001754  2100              MOVS     r1,#0                 ;2217
001756  f9b33000          LDRSH    r3,[r3,#0]
00175a  7800              LDRB     r0,[r0,#0]            ;2227
00175c  4683              MOV      r11,r0                ;2227
00175e  4825              LDR      r0,|L4.6132|
001760  7805              LDRB     r5,[r0,#0]            ;2235
;;;2247   		{
;;;2248   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsON;
001762  480e              LDR      r0,|L4.6044|
001764  7ac7              LDRB     r7,[r0,#0xb]
;;;2249   		else 				rele_stat[0]=rsOFF;
;;;2250   		}
;;;2251   	else if(RELE_LOG_VOLT==1)
;;;2252   		{
;;;2253   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsOFF;
;;;2254   		else 				rele_stat[0]=rsON;
;;;2255   		}
;;;2256   	}
;;;2257   else if(RELE_FUNC[0]==4)					//Напряжение не выше
;;;2258   	{
;;;2259   	if(RELE_LOG_VOLT==0)
;;;2260   		{
;;;2261   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsON;
001766  f890800a          LDRB     r8,[r0,#0xa]
;;;2262   		else 				rele_stat[0]=rsOFF;
;;;2263   		}
;;;2264   	else if(RELE_LOG_VOLT==1)
;;;2265   		{
;;;2266   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsOFF;
;;;2267   		else 				rele_stat[0]=rsON;
;;;2268   		}
;;;2269   	}
;;;2270   else if(RELE_FUNC[0]==5)					//Напряжение не ниже
;;;2271   	{
;;;2272   	if(RELE_LOG_VOLT==0)
;;;2273   		{
;;;2274   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsON;
00176a  7a40              LDRB     r0,[r0,#9]
00176c  4681              MOV      r9,r0
00176e  480b              LDR      r0,|L4.6044|
001770  3026              ADDS     r0,r0,#0x26           ;2217
001772  2201              MOVS     r2,#1                 ;2217
001774  b154              CBZ      r4,|L4.6028|
001776  2c01              CMP      r4,#1                 ;2218
001778  d048              BEQ      |L4.6156|
00177a  2c02              CMP      r4,#2                 ;2231
00177c  d051              BEQ      |L4.6178|
00177e  2c03              CMP      r4,#3                 ;2244
001780  d057              BEQ      |L4.6194|
001782  2c04              CMP      r4,#4                 ;2257
001784  d05d              BEQ      |L4.6210|
001786  2c05              CMP      r4,#5                 ;2270
001788  d067              BEQ      |L4.6234|
00178a  e072              B        |L4.6258|
                  |L4.6028|
00178c  e04e              B        |L4.6188|
00178e  0000              DCW      0x0000
                  |L4.6032|
                          DCD      bOFF
                  |L4.6036|
                          DCD      bps
                  |L4.6040|
                          DCD      net_av
                  |L4.6044|
                          DCD      ||area_number.24||
                  |L4.6048|
                          DCD      work_stat
                  |L4.6052|
                          DCD      T_DEL_REL_VOLT_START
                  |L4.6056|
                          DCD      REL_VOLT_UMIN
                  |L4.6060|
                          DCD      load_U
                  |L4.6064|
                          DCD      T_DEL_REL_VOLT_WRK
                  |L4.6068|
                          DCD      REL_VOLT_UMAX
                  |L4.6072|
                          DCD      delta_U_abs
                  |L4.6076|
                          DCD      load_I
                  |L4.6080|
                          DCD      delta_I_abs
                  |L4.6084|
                          DCD      delta_U_rel
                  |L4.6088|
                          DCD      delta_I_rel
                  |L4.6092|
                          DCD      cnt_del_rel
                  |L4.6096|
                          DCD      DELT_REL_CURR_U
                  |L4.6100|
                          DCD      DELT_REL_CURR_I
                  |L4.6104|
                          DCD      U_up
                  |L4.6108|
                          DCD      I_maxp
                  |L4.6112|
                          DCD      U_maxg
                  |L4.6116|
                          DCD      I_ug_temp
                  |L4.6120|
                          DCD      T_DEL_REL_CURR_WRK
                  |L4.6124|
                          DCD      time_proc
                  |L4.6128|
                          DCD      T_DEL_REL_CURR_START
                  |L4.6132|
                          DCD      bCURRENT_STAB
                  |L4.6136|
                          DCD      RELE_FUNC
                  |L4.6140|
                          DCD      bRAZR
                  |L4.6144|
                          DCD      REV_STAT
                  |L4.6148|
                          DCD      RELE_LOG_CURR
                  |L4.6152|
                          DCD      RELE_LOG_VOLT
                  |L4.6156|
00180c  f1bc0f03          CMP      r12,#3                ;2220
001810  d003              BEQ      |L4.6170|
001812  f1bb0f00          CMP      r11,#0                ;2227
001816  d041              BEQ      |L4.6300|
001818  e02a              B        |L4.6256|
                  |L4.6170|
00181a  f1ba0f00          CMP      r10,#0                ;2222
00181e  d13d              BNE      |L4.6300|
001820  e026              B        |L4.6256|
                  |L4.6178|
001822  b116              CBZ      r6,|L4.6186|
001824  2e01              CMP      r6,#1                 ;2238
001826  d002              BEQ      |L4.6190|
001828  e023              B        |L4.6258|
                  |L4.6186|
00182a  b30d              CBZ      r5,|L4.6256|
                  |L4.6188|
00182c  e036              B        |L4.6300|
                  |L4.6190|
00182e  b3a5              CBZ      r5,|L4.6298|
001830  e01e              B        |L4.6256|
                  |L4.6194|
001832  b113              CBZ      r3,|L4.6202|
001834  2b01              CMP      r3,#1                 ;2251
001836  d002              BEQ      |L4.6206|
001838  e01b              B        |L4.6258|
                  |L4.6202|
00183a  b1cf              CBZ      r7,|L4.6256|
00183c  e02e              B        |L4.6300|
                  |L4.6206|
00183e  b367              CBZ      r7,|L4.6298|
001840  e016              B        |L4.6256|
                  |L4.6210|
001842  b113              CBZ      r3,|L4.6218|
001844  2b01              CMP      r3,#1                 ;2264
001846  d004              BEQ      |L4.6226|
001848  e013              B        |L4.6258|
                  |L4.6218|
00184a  f1b80f00          CMP      r8,#0                 ;2261
00184e  d00f              BEQ      |L4.6256|
001850  e024              B        |L4.6300|
                  |L4.6226|
001852  f1b80f00          CMP      r8,#0                 ;2266
001856  d021              BEQ      |L4.6300|
001858  e00a              B        |L4.6256|
                  |L4.6234|
00185a  b113              CBZ      r3,|L4.6242|
;;;2275   		else 				rele_stat[0]=rsOFF;
;;;2276   		}
;;;2277   	else if(RELE_LOG_VOLT==1)
00185c  2b01              CMP      r3,#1
00185e  d004              BEQ      |L4.6250|
001860  e007              B        |L4.6258|
                  |L4.6242|
001862  f1b90f00          CMP      r9,#0                 ;2274
001866  d003              BEQ      |L4.6256|
001868  e018              B        |L4.6300|
                  |L4.6250|
;;;2278   		{
;;;2279   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsOFF;
00186a  f1b90f00          CMP      r9,#0
00186e  d015              BEQ      |L4.6300|
                  |L4.6256|
;;;2280   		else 				rele_stat[0]=rsON;
001870  7002              STRB     r2,[r0,#0]
                  |L4.6258|
;;;2281   		}
;;;2282   	}
;;;2283   											
;;;2284   //Реле2
;;;2285   if(RELE_FUNC[1]==0)rele_stat[1]=rsOFF; 		//Выключено
001872  f9be4002          LDRSH    r4,[lr,#2]  ; RELE_FUNC
001876  b19c              CBZ      r4,|L4.6304|
;;;2286   else if(RELE_FUNC[1]==1)					//Реверс
001878  2c01              CMP      r4,#1
00187a  d014              BEQ      |L4.6310|
;;;2287   	{
;;;2288   	if(work_stat==wsCAP) 
;;;2289   		{
;;;2290   		if(bRAZR) 		rele_stat[1]=rsOFF;
;;;2291   		else 			rele_stat[1]=rsON;
;;;2292   		} 
;;;2293   	else 
;;;2294   		{
;;;2295   		if(REV_STAT==rsREW)	rele_stat[1]=rsOFF;
;;;2296   		else 			rele_stat[1]=rsON;
;;;2297   		}
;;;2298   	}
;;;2299   else if(RELE_FUNC[1]==2)					//Токоограничение
00187c  2c02              CMP      r4,#2
00187e  d01e              BEQ      |L4.6334|
;;;2300   	{
;;;2301   	if(RELE_LOG_CURR==0)
;;;2302   		{
;;;2303   		if(bCURRENT_STAB==0)rele_stat[1]=rsON;
;;;2304   		else 			rele_stat[1]=rsOFF;
;;;2305   		}
;;;2306   	else if(RELE_LOG_CURR==1)
;;;2307   		{
;;;2308   		if(bCURRENT_STAB==0)rele_stat[1]=rsOFF;
;;;2309   		else 			rele_stat[1]=rsON;
;;;2310   		}
;;;2311   	}									
;;;2312   else if(RELE_FUNC[1]==3)					//Напряжение в норме
001880  2c03              CMP      r4,#3
001882  d025              BEQ      |L4.6352|
;;;2313   	{
;;;2314   	if(RELE_LOG_VOLT==0)
;;;2315   		{
;;;2316   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsON;
;;;2317   		else 				rele_stat[1]=rsOFF;
;;;2318   		}
;;;2319   	else if(RELE_LOG_VOLT==1)
;;;2320   		{
;;;2321   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsOFF;
;;;2322   		else 				rele_stat[1]=rsON;
;;;2323   		}
;;;2324   	}
;;;2325   else if(RELE_FUNC[1]==4)					//Напряжение не выше
001884  2c04              CMP      r4,#4
001886  d02c              BEQ      |L4.6370|
;;;2326   	{
;;;2327   	if(RELE_LOG_VOLT==0)
;;;2328   		{
;;;2329   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsON;
;;;2330   		else 				rele_stat[1]=rsOFF;
;;;2331   		}
;;;2332   	else if(RELE_LOG_VOLT==1)
;;;2333   		{
;;;2334   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsOFF;
;;;2335   		else 				rele_stat[1]=rsON;
;;;2336   		}
;;;2337   	}
;;;2338   else if(RELE_FUNC[1]==5)					//Напряжение не ниже
001888  2c05              CMP      r4,#5
00188a  d10a              BNE      |L4.6306|
;;;2339   	{
;;;2340   	if(RELE_LOG_VOLT==0)
00188c  b383              CBZ      r3,|L4.6384|
;;;2341   		{
;;;2342   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsON;
;;;2343   		else 				rele_stat[1]=rsOFF;
;;;2344   		}
;;;2345   	else if(RELE_LOG_VOLT==1)
00188e  2b01              CMP      r3,#1
001890  d107              BNE      |L4.6306|
;;;2346   		{
;;;2347   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsOFF;
001892  f1b90f00          CMP      r9,#0
001896  d10c              BNE      |L4.6322|
001898  e002              B        |L4.6304|
                  |L4.6298|
00189a  e7ff              B        |L4.6300|
                  |L4.6300|
00189c  7001              STRB     r1,[r0,#0]            ;2279
00189e  e7e8              B        |L4.6258|
                  |L4.6304|
0018a0  7041              STRB     r1,[r0,#1]            ;2285
                  |L4.6306|
;;;2348   		else 				rele_stat[1]=rsON;
;;;2349   		}
;;;2350   	}
;;;2351   	
;;;2352   
;;;2353   //rele_stat[0]=rsON;
;;;2354   //rele_stat[1]=rsON;
;;;2355   										
;;;2356   }
0018a2  e8bd8ff0          POP      {r4-r11,pc}
                  |L4.6310|
0018a6  f1bc0f03          CMP      r12,#3                ;2288
0018aa  d004              BEQ      |L4.6326|
0018ac  f1bb0f00          CMP      r11,#0                ;2295
0018b0  d0f6              BEQ      |L4.6304|
                  |L4.6322|
0018b2  7042              STRB     r2,[r0,#1]            ;2296
0018b4  e7f5              B        |L4.6306|
                  |L4.6326|
0018b6  f1ba0f00          CMP      r10,#0                ;2290
0018ba  d1f1              BNE      |L4.6304|
0018bc  e7f9              B        |L4.6322|
                  |L4.6334|
0018be  b126              CBZ      r6,|L4.6346|
0018c0  2e01              CMP      r6,#1                 ;2306
0018c2  d1ee              BNE      |L4.6306|
0018c4  2d00              CMP      r5,#0                 ;2308
0018c6  d1f4              BNE      |L4.6322|
0018c8  e7ea              B        |L4.6304|
                  |L4.6346|
0018ca  2d00              CMP      r5,#0                 ;2303
0018cc  d0f1              BEQ      |L4.6322|
0018ce  e7e7              B        |L4.6304|
                  |L4.6352|
0018d0  b123              CBZ      r3,|L4.6364|
0018d2  2b01              CMP      r3,#1                 ;2319
0018d4  d1e5              BNE      |L4.6306|
0018d6  2f00              CMP      r7,#0                 ;2321
0018d8  d1eb              BNE      |L4.6322|
0018da  e7e1              B        |L4.6304|
                  |L4.6364|
0018dc  2f00              CMP      r7,#0                 ;2316
0018de  d0e8              BEQ      |L4.6322|
0018e0  e7de              B        |L4.6304|
                  |L4.6370|
0018e2  b133              CBZ      r3,|L4.6386|
0018e4  2b01              CMP      r3,#1                 ;2332
0018e6  d1dc              BNE      |L4.6306|
0018e8  f1b80f00          CMP      r8,#0                 ;2334
0018ec  d1e1              BNE      |L4.6322|
0018ee  e7d7              B        |L4.6304|
                  |L4.6384|
0018f0  e003              B        |L4.6394|
                  |L4.6386|
0018f2  f1b80f00          CMP      r8,#0                 ;2329
0018f6  d0dc              BEQ      |L4.6322|
0018f8  e7d2              B        |L4.6304|
                  |L4.6394|
0018fa  f1b90f00          CMP      r9,#0                 ;2342
0018fe  d0d8              BEQ      |L4.6322|
001900  e7ce              B        |L4.6304|
;;;2357    
                          ENDP

                  rele_drv PROC
;;;2358   //-----------------------------------------------
;;;2359   void rele_drv(void)
001902  4914              LDR      r1,|L4.6484|
;;;2360   {
;;;2361   #ifdef EXT_BOARD_V_1
;;;2362   SET_REG(LPC_PINCON->PINSEL0,0,4*2,2);
;;;2363   SET_REG(LPC_GPIO0->FIODIR,1,4,1);
;;;2364   
;;;2365   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
;;;2366   else SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2367   #endif
;;;2368   
;;;2369   #ifdef EXT_BOARD_V_2
;;;2370   SET_REG(LPC_PINCON->PINSEL0,0,7*2,2);
001904  6808              LDR      r0,[r1,#0]
001906  f4204040          BIC      r0,r0,#0xc000
00190a  6008              STR      r0,[r1,#0]
;;;2371   SET_REG(LPC_GPIO0->FIODIR,1,7,1);
00190c  4812              LDR      r0,|L4.6488|
00190e  6802              LDR      r2,[r0,#0]
001910  f0420280          ORR      r2,r2,#0x80
001914  6002              STR      r2,[r0,#0]
;;;2372   
;;;2373   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,7,1);
001916  4a11              LDR      r2,|L4.6492|
001918  7813              LDRB     r3,[r2,#0]  ; rele_stat
00191a  2b01              CMP      r3,#1
;;;2374   else SET_REG(LPC_GPIO0->FIOPIN,1,7,1);
00191c  6943              LDR      r3,[r0,#0x14]
00191e  d012              BEQ      |L4.6470|
001920  f0430380          ORR      r3,r3,#0x80
                  |L4.6436|
001924  6143              STR      r3,[r0,#0x14]
;;;2375   #endif
;;;2376   
;;;2377   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
001926  680b              LDR      r3,[r1,#0]
001928  f4236340          BIC      r3,r3,#0xc00
00192c  600b              STR      r3,[r1,#0]
;;;2378   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
00192e  6801              LDR      r1,[r0,#0]
001930  f0410120          ORR      r1,r1,#0x20
001934  6001              STR      r1,[r0,#0]
;;;2379   
;;;2380   if(rele_stat[1]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
001936  7851              LDRB     r1,[r2,#1]  ; rele_stat
001938  2901              CMP      r1,#1
;;;2381   else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
00193a  6941              LDR      r1,[r0,#0x14]
00193c  d006              BEQ      |L4.6476|
00193e  f0410120          ORR      r1,r1,#0x20
                  |L4.6466|
001942  6141              STR      r1,[r0,#0x14]         ;2380
;;;2382   
;;;2383   
;;;2384   }
001944  4770              BX       lr
                  |L4.6470|
001946  f0230380          BIC      r3,r3,#0x80           ;2373
00194a  e7eb              B        |L4.6436|
                  |L4.6476|
00194c  f0210120          BIC      r1,r1,#0x20           ;2380
001950  e7f7              B        |L4.6466|
;;;2385   
                          ENDP

001952  0000              DCW      0x0000
                  |L4.6484|
                          DCD      0x4002c000
                  |L4.6488|
                          DCD      0x2009c000
                  |L4.6492|
                          DCD      ||area_number.24||+0x26

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  adc_drv6 PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000004  4c77              LDR      r4,|L5.484|
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
;;;230    }
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  f44f7296          MOV      r2,#0x12c
000034  80a8              STRH     r0,[r5,#4]
000036  f1a40128          SUB      r1,r4,#0x28
00003a  4290              CMP      r0,r2
00003c  da01              BGE      |L5.66|
00003e  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000040  e00a              B        |L5.88|
                  |L5.66|
000042  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
000046  4290              CMP      r0,r2
000048  da01              BGE      |L5.78|
00004a  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00004c  e004              B        |L5.88|
                  |L5.78|
00004e  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
000052  4290              CMP      r0,r2
000054  da01              BGE      |L5.90|
000056  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L5.88|
000058  8248              STRH     r0,[r1,#0x12]
                  |L5.90|
00005a  784e              LDRB     r6,[r1,#1]  ; adc_ch_net
00005c  2000              MOVS     r0,#0
00005e  b3f6              CBZ      r6,|L5.222|
000060  790c              LDRB     r4,[r1,#4]  ; adc_window_flag
000062  4a61              LDR      r2,|L5.488|
000064  b18c              CBZ      r4,|L5.138|
000066  f9b13012          LDRSH    r3,[r1,#0x12]  ; adc_result
00006a  6815              LDR      r5,[r2,#0]  ; main_power_buffer
00006c  eb0505a3          ADD      r5,r5,r3,ASR #2
000070  6015              STR      r5,[r2,#0]  ; main_power_buffer
000072  6855              LDR      r5,[r2,#4]  ; main_power_buffer
000074  eb0505a3          ADD      r5,r5,r3,ASR #2
000078  6055              STR      r5,[r2,#4]  ; main_power_buffer
00007a  6895              LDR      r5,[r2,#8]  ; main_power_buffer
00007c  eb0505a3          ADD      r5,r5,r3,ASR #2
000080  6095              STR      r5,[r2,#8]  ; main_power_buffer
000082  68d5              LDR      r5,[r2,#0xc]  ; main_power_buffer
000084  eb0503a3          ADD      r3,r5,r3,ASR #2
000088  60d3              STR      r3,[r2,#0xc]  ; main_power_buffer
                  |L5.138|
00008a  f9b13012          LDRSH    r3,[r1,#0x12]  ; adc_result
00008e  2b64              CMP      r3,#0x64
000090  da0e              BGE      |L5.176|
000092  8acb              LDRH     r3,[r1,#0x16]  ; adc_zero_cnt
000094  f44f65fa          MOV      r5,#0x7d0
000098  1c5b              ADDS     r3,r3,#1
00009a  b21b              SXTH     r3,r3
00009c  82cb              STRH     r3,[r1,#0x16]
00009e  42ab              CMP      r3,r5
0000a0  db08              BLT      |L5.180|
0000a2  82cd              STRH     r5,[r1,#0x16]
0000a4  6010              STR      r0,[r2,#0]  ; main_power_buffer
0000a6  6050              STR      r0,[r2,#4]  ; main_power_buffer
0000a8  6090              STR      r0,[r2,#8]  ; main_power_buffer
0000aa  60d0              STR      r0,[r2,#0xc]  ; main_power_buffer
0000ac  8208              STRH     r0,[r1,#0x10]
0000ae  e053              B        |L5.344|
                  |L5.176|
0000b0  82c8              STRH     r0,[r1,#0x16]
0000b2  e051              B        |L5.344|
                  |L5.180|
0000b4  2b05              CMP      r3,#5
0000b6  d14f              BNE      |L5.344|
0000b8  b1a4              CBZ      r4,|L5.228|
0000ba  8a8b              LDRH     r3,[r1,#0x14]  ; adc_gorb_cnt
0000bc  1c5b              ADDS     r3,r3,#1
0000be  b21b              SXTH     r3,r3
0000c0  828b              STRH     r3,[r1,#0x14]
0000c2  f5b37f00          CMP      r3,#0x200
0000c6  db00              BLT      |L5.202|
0000c8  8288              STRH     r0,[r1,#0x14]
                  |L5.202|
0000ca  f9b13014          LDRSH    r3,[r1,#0x14]  ; adc_gorb_cnt
0000ce  065d              LSLS     r5,r3,#25
0000d0  d108              BNE      |L5.228|
0000d2  11db              ASRS     r3,r3,#7
0000d4  f8525023          LDR      r5,[r2,r3,LSL #2]
0000d8  122d              ASRS     r5,r5,#8
0000da  820d              STRH     r5,[r1,#0x10]
0000dc  e000              B        |L5.224|
                  |L5.222|
0000de  e00f              B        |L5.256|
                  |L5.224|
0000e0  f8420023          STR      r0,[r2,r3,LSL #2]
                  |L5.228|
0000e4  f9b12018          LDRSH    r2,[r1,#0x18]  ; adc_window_cnt
0000e8  2a96              CMP      r2,#0x96
0000ea  dd01              BLE      |L5.240|
0000ec  b104              CBZ      r4,|L5.240|
0000ee  7108              STRB     r0,[r1,#4]
                  |L5.240|
0000f0  3a1f              SUBS     r2,r2,#0x1f
0000f2  2a27              CMP      r2,#0x27
0000f4  d230              BCS      |L5.344|
0000f6  790a              LDRB     r2,[r1,#4]  ; adc_window_flag
0000f8  bb72              CBNZ     r2,|L5.344|
0000fa  2201              MOVS     r2,#1
0000fc  710a              STRB     r2,[r1,#4]
0000fe  e02b              B        |L5.344|
                  |L5.256|
000100  4f3a              LDR      r7,|L5.492|
000102  788a              LDRB     r2,[r1,#2]  ; adc_ch
000104  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
000108  eb0714c2          ADD      r4,r7,r2,LSL #7
00010c  f9b13012          LDRSH    r3,[r1,#0x12]  ; adc_result
000110  f844302c          STR      r3,[r4,r12,LSL #2]
000114  ea5f738c          LSLS     r3,r12,#30
000118  d110              BNE      |L5.316|
00011a  2400              MOVS     r4,#0
00011c  4623              MOV      r3,r4
00011e  eb0715c2          ADD      r5,r7,r2,LSL #7
000122  bf00              NOP      
                  |L5.292|
000124  f8557023          LDR      r7,[r5,r3,LSL #2]
000128  1c5b              ADDS     r3,r3,#1
00012a  b2db              UXTB     r3,r3
00012c  443c              ADD      r4,r4,r7
00012e  2b10              CMP      r3,#0x10
000130  d3f8              BCC      |L5.292|
000132  1123              ASRS     r3,r4,#4
000134  4c2c              LDR      r4,|L5.488|
000136  3c40              SUBS     r4,r4,#0x40
000138  f8243012          STRH     r3,[r4,r2,LSL #1]
                  |L5.316|
00013c  1c52              ADDS     r2,r2,#1
00013e  b2d2              UXTB     r2,r2
000140  708a              STRB     r2,[r1,#2]
000142  2a10              CMP      r2,#0x10
000144  d308              BCC      |L5.344|
000146  f10c0c01          ADD      r12,r12,#1
00014a  f00c02ff          AND      r2,r12,#0xff
00014e  7088              STRB     r0,[r1,#2]
000150  70ca              STRB     r2,[r1,#3]
000152  2a10              CMP      r2,#0x10
000154  d300              BCC      |L5.344|
000156  70c8              STRB     r0,[r1,#3]
                  |L5.344|
000158  7008              STRB     r0,[r1,#0]
00015a  1c76              ADDS     r6,r6,#1
00015c  f0160001          ANDS     r0,r6,#1
000160  4a23              LDR      r2,|L5.496|
000162  7048              STRB     r0,[r1,#1]
000164  d005              BEQ      |L5.370|
000166  6810              LDR      r0,[r2,#0]
000168  f02000ff          BIC      r0,r0,#0xff
00016c  1d00              ADDS     r0,r0,#4
00016e  6010              STR      r0,[r2,#0]
000170  e032              B        |L5.472|
                  |L5.370|
000172  7889              LDRB     r1,[r1,#2]  ; adc_ch
000174  0708              LSLS     r0,r1,#28
000176  2800              CMP      r0,#0
000178  6810              LDR      r0,[r2,#0]
00017a  f02000ff          BIC      r0,r0,#0xff
00017e  db01              BLT      |L5.388|
000180  1c40              ADDS     r0,r0,#1
000182  e000              B        |L5.390|
                  |L5.388|
000184  1c80              ADDS     r0,r0,#2
                  |L5.390|
000186  6010              STR      r0,[r2,#0]
000188  481a              LDR      r0,|L5.500|
00018a  6803              LDR      r3,[r0,#0]
00018c  f0435380          ORR      r3,r3,#0x10000000
000190  6003              STR      r3,[r0,#0]
000192  6a03              LDR      r3,[r0,#0x20]
000194  f0434380          ORR      r3,r3,#0x40000000
000198  6203              STR      r3,[r0,#0x20]
00019a  6e03              LDR      r3,[r0,#0x60]
00019c  f0436380          ORR      r3,r3,#0x4000000
0001a0  6603              STR      r3,[r0,#0x60]
0001a2  07cb              LSLS     r3,r1,#31
0001a4  6943              LDR      r3,[r0,#0x14]
0001a6  d008              BEQ      |L5.442|
0001a8  f0435380          ORR      r3,r3,#0x10000000
                  |L5.428|
0001ac  6143              STR      r3,[r0,#0x14]
0001ae  078b              LSLS     r3,r1,#30
0001b0  6b43              LDR      r3,[r0,#0x34]
0001b2  d405              BMI      |L5.448|
0001b4  f0234380          BIC      r3,r3,#0x40000000
0001b8  e004              B        |L5.452|
                  |L5.442|
0001ba  f0235380          BIC      r3,r3,#0x10000000
0001be  e7f5              B        |L5.428|
                  |L5.448|
0001c0  f0434380          ORR      r3,r3,#0x40000000
                  |L5.452|
0001c4  6343              STR      r3,[r0,#0x34]
0001c6  0749              LSLS     r1,r1,#29
0001c8  6f41              LDR      r1,[r0,#0x74]
0001ca  d402              BMI      |L5.466|
0001cc  f0216180          BIC      r1,r1,#0x4000000
0001d0  e001              B        |L5.470|
                  |L5.466|
0001d2  f0416180          ORR      r1,r1,#0x4000000
                  |L5.470|
0001d6  6741              STR      r1,[r0,#0x74]
                  |L5.472|
0001d8  6810              LDR      r0,[r2,#0]
0001da  f0407080          ORR      r0,r0,#0x1000000
0001de  6010              STR      r0,[r2,#0]
0001e0  e8bd81f0          POP      {r4-r8,pc}
;;;231    
                          ENDP

                  |L5.484|
                          DCD      ||area_number.24||+0x28
                  |L5.488|
                          DCD      ||.bss||+0x840
                  |L5.492|
                          DCD      ||.bss||
                  |L5.496|
                          DCD      0x40034000
                  |L5.500|
                          DCD      0x2009c000

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  zar_superviser_start PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  4903              LDR      r1,|L6.16|
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  4a04              LDR      r2,|L6.20|
000004  2001              MOVS     r0,#1
000006  7008              STRB     r0,[r1,#0]
000008  7010              STRB     r0,[r2,#0]
00000a  7048              STRB     r0,[r1,#1]
00000c  7050              STRB     r0,[r2,#1]
00000e  4770              BX       lr
;;;230    }
;;;231    
                          ENDP

                  |L6.16|
                          DCD      sign_U
                  |L6.20|
                          DCD      sign_I

                          AREA ||area_number.7||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.7||, ||.text||
                  revers_hndl PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  480e              LDR      r0,|L7.60|
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  6801              LDR      r1,[r0,#0]
000004  f4217140          BIC      r1,r1,#0x300
000008  6001              STR      r1,[r0,#0]
00000a  480d              LDR      r0,|L7.64|
00000c  6801              LDR      r1,[r0,#0]
00000e  f0410110          ORR      r1,r1,#0x10
000012  6001              STR      r1,[r0,#0]
;;;230    }
000014  490b              LDR      r1,|L7.68|
000016  7809              LDRB     r1,[r1,#0]  ; work_stat
000018  2903              CMP      r1,#3
00001a  d003              BEQ      |L7.36|
00001c  490a              LDR      r1,|L7.72|
00001e  7809              LDRB     r1,[r1,#0]  ; REV_STAT
000020  b119              CBZ      r1,|L7.42|
000022  e007              B        |L7.52|
                  |L7.36|
000024  4909              LDR      r1,|L7.76|
000026  7809              LDRB     r1,[r1,#0]  ; bRAZR
000028  b121              CBZ      r1,|L7.52|
                  |L7.42|
00002a  6941              LDR      r1,[r0,#0x14]
00002c  f0210110          BIC      r1,r1,#0x10
                  |L7.48|
000030  6141              STR      r1,[r0,#0x14]
000032  4770              BX       lr
                  |L7.52|
000034  6941              LDR      r1,[r0,#0x14]
000036  f0410110          ORR      r1,r1,#0x10
00003a  e7f9              B        |L7.48|
;;;231    
                          ENDP

                  |L7.60|
                          DCD      0x4002c000
                  |L7.64|
                          DCD      0x2009c000
                  |L7.68|
                          DCD      work_stat
                  |L7.72|
                          DCD      REV_STAT
                  |L7.76|
                          DCD      bRAZR

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        2048
                  adc_buff_
                          %        32
                  adc_buff__
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.10||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.11||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.11||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.21||, DATA, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  vent_stat
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=1

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_self_ch_cnt
000000  00                DCB      0x00
                  adc_ch_net
000001  00                DCB      0x00
                  adc_ch
000002  00                DCB      0x00
                  adc_ch_cnt
000003  00                DCB      0x00
                  adc_window_flag
000004  00                DCB      0x00
                  sh_cnt0
000005  00                DCB      0x00
                  b1Hz_sh
000006  00                DCB      0x00
                  bFAST_REG
000007  00                DCB      0x00
                  bU_VALID
000008  00                DCB      0x00
                  bVOLT_IS_NOT_DOWN
000009  00                DCB      0x00
                  bVOLT_IS_NOT_UP
00000a  00                DCB      0x00
                  bVOLT_IS_NORM
00000b  00                DCB      0x00
                  cntrl_stat_U
00000c  03e8              DCW      0x03e8
                  cntrl_stat_I
00000e  03e8              DCW      0x03e8
                  net_buff_
000010  0000              DCB      0x00,0x00
                  adc_result
000012  0000              DCB      0x00,0x00
                  adc_gorb_cnt
000014  0000              DCB      0x00,0x00
                  adc_zero_cnt
000016  0000              DCB      0x00,0x00
                  adc_window_cnt
000018  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
00001a  0000              DCB      0x00,0x00
                  samokalibr_cnt
00001c  0000              DCB      0x00,0x00
                  main_kb_cnt
00001e  0000              DCB      0x00,0x00
                  cnt_volt_contr
000020  0000              DCB      0x00,0x00
                  cnt_rel_volt_umin
000022  0000              DCB      0x00,0x00
                  cnt_rel_volt_umax
000024  0000              DCB      0x00,0x00
                  rele_stat
000026  0000              DCB      0x00,0x00
                  adc_self_ch_buff
                          DCDU     0x00000000
00002c  0000              DCB      0x00,0x00
                  adc_self_ch_disp
00002e  0000              DCB      0x00,0x00
                          DCDU     0x00000000

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  cntrl_stat_old
000000  0258              DCW      0x0258

                          AREA ||area_number.26||, DATA, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.data||
                  avg_main_cnt
000000  0014              DCW      0x0014

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=0

                          EXPORTAS ||area_number.29||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=0

                          EXPORTAS ||area_number.35||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.36||, DATA, ALIGN=2

                          EXPORTAS ||area_number.36||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.37||, DATA, ALIGN=1

                          EXPORTAS ||area_number.37||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.38||, DATA, ALIGN=1

                          EXPORTAS ||area_number.38||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.39||, DATA, ALIGN=1

                          EXPORTAS ||area_number.39||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  plazma_sk
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  cntrl_stat_new
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=1

                          EXPORTAS ||area_number.42||, ||.data||
                  Ibmax
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  ch_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  b1Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  i
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  iiii
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=1

                          EXPORTAS ||area_number.50||, ||.data||
                  IZMAX_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.51||, DATA, ALIGN=2

                          EXPORTAS ||area_number.51||, ||.data||
                  i_avg_max
                          DCD      0x00000000

                          AREA ||area_number.52||, DATA, ALIGN=2

                          EXPORTAS ||area_number.52||, ||.data||
                  i_avg_min
                          DCD      0x00000000

                          AREA ||area_number.53||, DATA, ALIGN=2

                          EXPORTAS ||area_number.53||, ||.data||
                  i_avg_summ
                          DCD      0x00000000

                          AREA ||area_number.54||, DATA, ALIGN=2

                          EXPORTAS ||area_number.54||, ||.data||
                  i_avg
                          DCD      0x00000000

                          AREA ||area_number.55||, DATA, ALIGN=2

                          EXPORTAS ||area_number.55||, ||.data||
                  avg
                          DCD      0x00000000

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  bAVG
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=0

                          EXPORTAS ||area_number.57||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.58||, DATA, ALIGN=1

                          EXPORTAS ||area_number.58||, ||.data||
                  kb_cnt_1lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.59||, DATA, ALIGN=1

                          EXPORTAS ||area_number.59||, ||.data||
                  kb_cnt_2lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.60||, DATA, ALIGN=0

                          EXPORTAS ||area_number.60||, ||.data||
                  kb_full_ver
000000  00                DCB      0x00

                          AREA ||area_number.61||, DATA, ALIGN=0

                          EXPORTAS ||area_number.61||, ||.data||
                  kb_start
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.62||, DATA, ALIGN=0

                          EXPORTAS ||area_number.62||, ||.data||
                  num_of_wrks_bps
000000  00                DCB      0x00

                          AREA ||area_number.63||, DATA, ALIGN=0

                          EXPORTAS ||area_number.63||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.64||, DATA, ALIGN=0

                          EXPORTAS ||area_number.64||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.65||, DATA, ALIGN=0

                          EXPORTAS ||area_number.65||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.66||, DATA, ALIGN=0

                          EXPORTAS ||area_number.66||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.67||, DATA, ALIGN=1

                          EXPORTAS ||area_number.67||, ||.data||
                  bps_on_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.68||, DATA, ALIGN=1

                          EXPORTAS ||area_number.68||, ||.data||
                  bps_off_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.69||, DATA, ALIGN=0

                          EXPORTAS ||area_number.69||, ||.data||
                  num_necc_up
000000  00                DCB      0x00

                          AREA ||area_number.70||, DATA, ALIGN=0

                          EXPORTAS ||area_number.70||, ||.data||
                  num_necc_down
000000  00                DCB      0x00

                          AREA ||area_number.71||, DATA, ALIGN=0

                          EXPORTAS ||area_number.71||, ||.data||
                  spc_stat
000000  00                DCB      0x00

                          AREA ||area_number.72||, DATA, ALIGN=0

                          EXPORTAS ||area_number.72||, ||.data||
                  spc_bat
000000  00                DCB      0x00

                          AREA ||area_number.73||, DATA, ALIGN=0

                          EXPORTAS ||area_number.73||, ||.data||
                  spc_phase
000000  00                DCB      0x00

                          AREA ||area_number.74||, DATA, ALIGN=1

                          EXPORTAS ||area_number.74||, ||.data||
                  vz_cnt_s
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.75||, DATA, ALIGN=1

                          EXPORTAS ||area_number.75||, ||.data||
                  vz_cnt_s_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.76||, DATA, ALIGN=1

                          EXPORTAS ||area_number.76||, ||.data||
                  vz_cnt_h
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.77||, DATA, ALIGN=1

                          EXPORTAS ||area_number.77||, ||.data||
                  vz_cnt_h_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.78||, DATA, ALIGN=0

                          EXPORTAS ||area_number.78||, ||.data||
                  bAVZ
000000  00                DCB      0x00

                          AREA ||area_number.79||, DATA, ALIGN=0

                          EXPORTAS ||area_number.79||, ||.data||
                  ke_start_stat
000000  00                DCB      0x00

                          AREA ||area_number.80||, DATA, ALIGN=1

                          EXPORTAS ||area_number.80||, ||.data||
                  cnt_end_ke
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.81||, DATA, ALIGN=2

                          EXPORTAS ||area_number.81||, ||.data||
                  ke_date
                          %        8

                          AREA ||area_number.82||, DATA, ALIGN=1

                          EXPORTAS ||area_number.82||, ||.data||
                  __ee_vz_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.83||, DATA, ALIGN=1

                          EXPORTAS ||area_number.83||, ||.data||
                  __ee_spc_stat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.84||, DATA, ALIGN=1

                          EXPORTAS ||area_number.84||, ||.data||
                  __ee_spc_bat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.85||, DATA, ALIGN=1

                          EXPORTAS ||area_number.85||, ||.data||
                  __ee_spc_phase
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.86||, DATA, ALIGN=1

                          EXPORTAS ||area_number.86||, ||.data||
                  cntrl_stat_blok_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.87||, DATA, ALIGN=1

                          EXPORTAS ||area_number.87||, ||.data||
                  cntrl_stat_blok_cnt_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.88||, DATA, ALIGN=1

                          EXPORTAS ||area_number.88||, ||.data||
                  cntrl_stat_blok_cnt_plus
                          DCDU     0x00000000

                          AREA ||area_number.89||, DATA, ALIGN=1

                          EXPORTAS ||area_number.89||, ||.data||
                  cntrl_stat_blok_cnt_minus
                          DCDU     0x00000000

                          AREA ||area_number.90||, DATA, ALIGN=0

                          EXPORTAS ||area_number.90||, ||.data||
                  plazma_inv
                          DCDU     0x00000000

                          AREA ||area_number.91||, DATA, ALIGN=0

                          EXPORTAS ||area_number.91||, ||.data||
                  plazma_bat
000000  00                DCB      0x00
