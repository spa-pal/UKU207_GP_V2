; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 -DWG12232A --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  kb_init PROC
;;;228    //-----------------------------------------------
;;;229    void kb_init(void)
000000  48ff              LDR      r0,|L1.1024|
;;;230    {
;;;231    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f06f013b          MVN      r1,#0x3b
000006  8800              LDRH     r0,[r0,#0]  ; TBAT
000008  ebc01000          RSB      r0,r0,r0,LSL #4
00000c  eb010080          ADD      r0,r1,r0,LSL #2
000010  49fc              LDR      r1,|L1.1028|
000012  84c8              STRH     r0,[r1,#0x26]
;;;232    }
000014  4770              BX       lr
;;;233    
                          ENDP

                  samokalibr_init PROC
;;;239    //-----------------------------------------------
;;;240    void samokalibr_init(void)
000016  49fb              LDR      r1,|L1.1028|
;;;241    {
;;;242    samokalibr_cnt=1785;
000018  f24060f9          MOV      r0,#0x6f9
00001c  8488              STRH     r0,[r1,#0x24]
;;;243    }
00001e  4770              BX       lr
;;;244    //-----------------------------------------------
                          ENDP

                  samokalibr_hndl PROC
;;;245    void samokalibr_hndl(void)
000020  b510              PUSH     {r4,lr}
;;;246    {
;;;247    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
000022  4cf8              LDR      r4,|L1.1028|
000024  8ca0              LDRH     r0,[r4,#0x24]  ; samokalibr_cnt
000026  1c40              ADDS     r0,r0,#1
000028  b200              SXTH     r0,r0
00002a  84a0              STRH     r0,[r4,#0x24]
00002c  f5b06fe1          CMP      r0,#0x708
000030  db02              BLT      |L1.56|
000032  2000              MOVS     r0,#0
000034  84a0              STRH     r0,[r4,#0x24]
                  |L1.54|
;;;248    
;;;249    if(samokalibr_cnt>=1785U)
;;;250    	{
;;;251    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
;;;252    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
;;;253    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
;;;254    	} 
;;;255    
;;;256    if(samokalibr_cnt==1799U)
;;;257    	{
;;;258    	if(Kiload0!=ad7705_buff_[0]) lc640_write_int(EE_KILOAD0,ad7705_buff_[0]);
;;;259    	}	 	
;;;260    }
000036  bd10              POP      {r4,pc}
                  |L1.56|
000038  f5b06fdf          CMP      r0,#0x6f8             ;249
00003c  d911              BLS      |L1.98|
00003e  230f              MOVS     r3,#0xf               ;251
000040  2201              MOVS     r2,#1                 ;251
000042  2164              MOVS     r1,#0x64              ;251
000044  20d2              MOVS     r0,#0xd2              ;251
000046  f7fffffe          BL       mess_send
00004a  230f              MOVS     r3,#0xf               ;252
00004c  2200              MOVS     r2,#0                 ;252
00004e  21d8              MOVS     r1,#0xd8              ;252
000050  20d7              MOVS     r0,#0xd7              ;252
000052  f7fffffe          BL       mess_send
000056  230f              MOVS     r3,#0xf               ;253
000058  2200              MOVS     r2,#0                 ;253
00005a  21d8              MOVS     r1,#0xd8              ;253
00005c  20dc              MOVS     r0,#0xdc              ;253
00005e  f7fffffe          BL       mess_send
                  |L1.98|
000062  f9b40024          LDRSH    r0,[r4,#0x24]         ;256  ; samokalibr_cnt
000066  f5a061e0          SUB      r1,r0,#0x700          ;256
00006a  3907              SUBS     r1,#7                 ;256
00006c  d1e3              BNE      |L1.54|
00006e  48e6              LDR      r0,|L1.1032|
000070  4ae6              LDR      r2,|L1.1036|
000072  8801              LDRH     r1,[r0,#0]            ;258  ; ad7705_buff_
000074  6812              LDR      r2,[r2,#0]            ;258  ; Kiload0
000076  4291              CMP      r1,r2                 ;258
000078  d0dd              BEQ      |L1.54|
00007a  f9b01000          LDRSH    r1,[r0,#0]            ;258  ; ad7705_buff_
00007e  e8bd4010          POP      {r4,lr}               ;258
000082  2014              MOVS     r0,#0x14              ;258
000084  f7ffbffe          B.W      lc640_write_int
;;;261    
                          ENDP

                  unet_drv PROC
;;;274    //-----------------------------------------------
;;;275    void unet_drv(void)
000088  4ae1              LDR      r2,|L1.1040|
;;;276    {
00008a  b430              PUSH     {r4,r5}
;;;277    if((adc_buff_[5]>3500)||(adc_buff_[10]>3500))
;;;278    	{
;;;279    	if(unet_drv_cnt<20)unet_drv_cnt++;
00008c  49e1              LDR      r1,|L1.1044|
00008e  f9b2400a          LDRSH    r4,[r2,#0xa]          ;277  ; adc_buff_
000092  f64053ac          MOV      r3,#0xdac             ;277
000096  f9b10000          LDRSH    r0,[r1,#0]
00009a  429c              CMP      r4,r3                 ;277
00009c  dc03              BGT      |L1.166|
00009e  f9b22014          LDRSH    r2,[r2,#0x14]         ;277  ; adc_buff_
0000a2  429a              CMP      r2,r3                 ;277
0000a4  dd03              BLE      |L1.174|
                  |L1.166|
0000a6  2814              CMP      r0,#0x14
0000a8  da04              BGE      |L1.180|
0000aa  1c40              ADDS     r0,r0,#1
0000ac  e001              B        |L1.178|
                  |L1.174|
;;;280    	}
;;;281    else if(unet_drv_cnt)unet_drv_cnt--;
0000ae  b108              CBZ      r0,|L1.180|
0000b0  1e40              SUBS     r0,r0,#1
                  |L1.178|
0000b2  8008              STRH     r0,[r1,#0]
                  |L1.180|
;;;282    
;;;283    gran(&unet_drv_cnt,0,20);
0000b4  2214              MOVS     r2,#0x14
0000b6  bc30              POP      {r4,r5}
0000b8  2100              MOVS     r1,#0
0000ba  48d6              LDR      r0,|L1.1044|
0000bc  f7ffbffe          B.W      gran
;;;284    }
;;;285    
                          ENDP

                  matemat PROC
;;;286    //-----------------------------------------------
;;;287    void matemat(void)
0000c0  b5f0              PUSH     {r4-r7,lr}
;;;288    {
;;;289    //signed short temp_SS;
;;;290    signed long temp_SL/*,temp_SL_*/;
;;;291    char /*temp,*/i;
;;;292    
;;;293    
;;;294    temp_SL=(signed long)adc_buff_[0];
0000c2  48d3              LDR      r0,|L1.1040|
;;;295    temp_SL*=Kuload;
0000c4  49d4              LDR      r1,|L1.1048|
;;;296    temp_SL/=500L;
0000c6  f44f72fa          MOV      r2,#0x1f4
0000ca  f9b00000          LDRSH    r0,[r0,#0]            ;294  ; adc_buff_
0000ce  f9b11000          LDRSH    r1,[r1,#0]            ;295  ; Kuload
;;;297    load_U=(signed short)temp_SL;
0000d2  4bd2              LDR      r3,|L1.1052|
0000d4  4348              MULS     r0,r1,r0              ;295
0000d6  fb90f0f2          SDIV     r0,r0,r2              ;296
0000da  8018              STRH     r0,[r3,#0]
;;;298    
;;;299    temp_SL=(signed long)adc_buff__[0];
0000dc  48cc              LDR      r0,|L1.1040|
;;;300    temp_SL*=Kuload;
;;;301    temp_SL/=500L;
;;;302    load_U_=(signed short)temp_SL;
;;;303    
;;;304    
;;;305    temp_SL=(signed long)ad7705_buff_[0];
;;;306    temp_SL-=(signed long)Kiload0;
;;;307    temp_SL*=(signed long)Kiload1;
;;;308    temp_SL/=5000L;
0000de  f2413388          MOV      r3,#0x1388
0000e2  3020              ADDS     r0,r0,#0x20           ;299
;;;309    load_I=(signed short)temp_SL;
;;;310    
;;;311    //temp_SL=(signed long)ad7705_buff__[0];
;;;312    temp_SL-=(signed long)Kiload0;
;;;313    temp_SL*=(signed long)Kiload1;
;;;314    temp_SL/=5000L;
;;;315    load_I_=(signed short)temp_SL;
0000e4  4dd1              LDR      r5,|L1.1068|
0000e6  f9b00000          LDRSH    r0,[r0,#0]            ;299  ; adc_buff__
0000ea  4348              MULS     r0,r1,r0              ;300
0000ec  fb90f0f2          SDIV     r0,r0,r2              ;301
0000f0  49cb              LDR      r1,|L1.1056|
0000f2  4acd              LDR      r2,|L1.1064|
0000f4  8008              STRH     r0,[r1,#0]            ;302
0000f6  49c5              LDR      r1,|L1.1036|
0000f8  48c3              LDR      r0,|L1.1032|
0000fa  680c              LDR      r4,[r1,#0]            ;306  ; Kiload0
0000fc  49c9              LDR      r1,|L1.1060|
0000fe  8800              LDRH     r0,[r0,#0]            ;305  ; ad7705_buff_
000100  f9b11000          LDRSH    r1,[r1,#0]            ;307  ; Kiload1
000104  1b00              SUBS     r0,r0,r4              ;306
000106  4348              MULS     r0,r1,r0              ;307
000108  fb90f0f3          SDIV     r0,r0,r3              ;308
00010c  8010              STRH     r0,[r2,#0]            ;309
00010e  1b00              SUBS     r0,r0,r4              ;312
000110  4348              MULS     r0,r1,r0              ;313
000112  fb90f0f3          SDIV     r0,r0,r3              ;314
000116  8028              STRH     r0,[r5,#0]
;;;316    
;;;317    if(I_LOAD_MODE==0)
000118  48c5              LDR      r0,|L1.1072|
;;;318    	{
;;;319    	temp_SL=0;
;;;320    	for(i=0;i<NUMIST;i++)
;;;321    		{
;;;322    		temp_SL+=bps[i]._Ii;
00011a  4bc7              LDR      r3,|L1.1080|
00011c  8801              LDRH     r1,[r0,#0]            ;317  ; I_LOAD_MODE
00011e  48c5              LDR      r0,|L1.1076|
000120  f9b04000          LDRSH    r4,[r0,#0]            ;320
000124  b981              CBNZ     r1,|L1.328|
000126  2000              MOVS     r0,#0                 ;319
000128  4601              MOV      r1,r0                 ;320
00012a  e009              B        |L1.320|
                  |L1.300|
00012c  ebc106c1          RSB      r6,r1,r1,LSL #3
000130  eb060646          ADD      r6,r6,r6,LSL #1
000134  eb030686          ADD      r6,r3,r6,LSL #2
000138  1c49              ADDS     r1,r1,#1              ;320
00013a  6a36              LDR      r6,[r6,#0x20]
00013c  b2c9              UXTB     r1,r1                 ;320
00013e  4430              ADD      r0,r0,r6
                  |L1.320|
000140  42a1              CMP      r1,r4                 ;320
000142  dbf3              BLT      |L1.300|
;;;323    		}
;;;324    	//temp_SL/=NUMIST;
;;;325    	
;;;326    	load_I=(signed short)temp_SL;
000144  8010              STRH     r0,[r2,#0]
;;;327    	load_I_=(signed short)temp_SL;
000146  8028              STRH     r0,[r5,#0]
                  |L1.328|
;;;328    	}
;;;329    
;;;330    if(load_I<0)load_I=0;
000148  f9b20000          LDRSH    r0,[r2,#0]  ; load_I
00014c  2100              MOVS     r1,#0                 ;317
00014e  2800              CMP      r0,#0
000150  da00              BGE      |L1.340|
000152  8011              STRH     r1,[r2,#0]
                  |L1.340|
;;;331    //load_I=333;
;;;332    
;;;333    for(i=0;i<32;i++)
000154  f05f0200          MOVS.W   r2,#0
                  |L1.344|
;;;334    	{
;;;335    	if(bps[i]._cnt<25)
000158  ebc200c2          RSB      r0,r2,r2,LSL #3
00015c  eb000040          ADD      r0,r0,r0,LSL #1
000160  eb030080          ADD      r0,r3,r0,LSL #2
000164  78c5              LDRB     r5,[r0,#3]
000166  2d19              CMP      r5,#0x19
000168  d21b              BCS      |L1.418|
;;;336    	     {
;;;337    	     bps[i]._Ii=bps[i]._buff[0]+(bps[i]._buff[1]*256);
00016a  7985              LDRB     r5,[r0,#6]
00016c  79c6              LDRB     r6,[r0,#7]
00016e  eb052606          ADD      r6,r5,r6,LSL #8
;;;338    	     bps[i]._Uin=bps[i]._buff[2]+(bps[i]._buff[3]*256);
000172  6206              STR      r6,[r0,#0x20]
000174  7a06              LDRB     r6,[r0,#8]
000176  7a47              LDRB     r7,[r0,#9]
000178  eb062607          ADD      r6,r6,r7,LSL #8
;;;339    	     bps[i]._Uii=bps[i]._buff[4]+(bps[i]._buff[5]*256);
00017c  61c6              STR      r6,[r0,#0x1c]
00017e  7a86              LDRB     r6,[r0,#0xa]
000180  7ac7              LDRB     r7,[r0,#0xb]
000182  eb062607          ADD      r6,r6,r7,LSL #8
;;;340    	     bps[i]._Ti=(signed)(bps[i]._buff[6]);
000186  6186              STR      r6,[r0,#0x18]
000188  7b06              LDRB     r6,[r0,#0xc]
;;;341    	     bps[i]._adr_ee=bps[i]._buff[0];
00018a  6246              STR      r6,[r0,#0x24]
00018c  f880504e          STRB     r5,[r0,#0x4e]
;;;342    	     bps[i]._flags_tm=bps[i]._buff[8];
000190  7b85              LDRB     r5,[r0,#0xe]
000192  f880503e          STRB     r5,[r0,#0x3e]
;;;343    		bps[i]._rotor=bps[i]._buff[10]+(bps[i]._buff[11]*256);    
000196  7c05              LDRB     r5,[r0,#0x10]
000198  7c46              LDRB     r6,[r0,#0x11]
00019a  eb052506          ADD      r5,r5,r6,LSL #8
00019e  6485              STR      r5,[r0,#0x48]
0001a0  e006              B        |L1.432|
                  |L1.418|
;;;344    	     } 
;;;345    	else 
;;;346    	     {
;;;347    	     bps[i]._Uii=0; 
;;;348    	     bps[i]._Ii=0;
0001a2  6181              STR      r1,[r0,#0x18]
;;;349    	     bps[i]._Uin=0;
0001a4  6201              STR      r1,[r0,#0x20]
;;;350    	     bps[i]._Ti=0;
0001a6  61c1              STR      r1,[r0,#0x1c]
;;;351    	     bps[i]._flags_tm=0; 
0001a8  6241              STR      r1,[r0,#0x24]
0001aa  f880103e          STRB     r1,[r0,#0x3e]
;;;352    		bps[i]._rotor=0;    
0001ae  6481              STR      r1,[r0,#0x48]
                  |L1.432|
0001b0  1c52              ADDS     r2,r2,#1              ;333
0001b2  b2d2              UXTB     r2,r2                 ;333
0001b4  2a20              CMP      r2,#0x20              ;333
0001b6  d3cf              BCC      |L1.344|
;;;353    	     }
;;;354    	}
;;;355    
;;;356    I_MAX_IPS=I_MAX*NUMIST;
0001b8  48a0              LDR      r0,|L1.1084|
0001ba  49a1              LDR      r1,|L1.1088|
0001bc  8800              LDRH     r0,[r0,#0]  ; I_MAX
0001be  4360              MULS     r0,r4,r0
0001c0  8008              STRH     r0,[r1,#0]
;;;357    I_MIN_IPS=I_MIN*NUMIST;
0001c2  48a0              LDR      r0,|L1.1092|
0001c4  49a0              LDR      r1,|L1.1096|
0001c6  8800              LDRH     r0,[r0,#0]  ; I_MIN
0001c8  4360              MULS     r0,r4,r0
0001ca  8008              STRH     r0,[r1,#0]
;;;358    }
0001cc  bdf0              POP      {r4-r7,pc}
;;;359    
                          ENDP

                  adc_init PROC
;;;362    //-----------------------------------------------
;;;363    void adc_init(void)
0001ce  489f              LDR      r0,|L1.1100|
;;;364    {
;;;365    
;;;366    SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
0001d0  6841              LDR      r1,[r0,#4]
0001d2  f4212140          BIC      r1,r1,#0xc0000
0001d6  f4412180          ORR      r1,r1,#0x40000
0001da  6041              STR      r1,[r0,#4]
;;;367    SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
0001dc  6841              LDR      r1,[r0,#4]
0001de  f4213140          BIC      r1,r1,#0x30000
0001e2  f4413180          ORR      r1,r1,#0x10000
0001e6  6041              STR      r1,[r0,#4]
;;;368    SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
0001e8  6841              LDR      r1,[r0,#4]
0001ea  f4214140          BIC      r1,r1,#0xc000
0001ee  f4414180          ORR      r1,r1,#0x4000
0001f2  6041              STR      r1,[r0,#4]
;;;369    
;;;370    
;;;371    SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
0001f4  6c41              LDR      r1,[r0,#0x44]
0001f6  f4212140          BIC      r1,r1,#0xc0000
0001fa  f4412100          ORR      r1,r1,#0x80000
0001fe  6441              STR      r1,[r0,#0x44]
;;;372    SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
000200  6c41              LDR      r1,[r0,#0x44]
000202  f4213140          BIC      r1,r1,#0x30000
000206  f4413100          ORR      r1,r1,#0x20000
00020a  6441              STR      r1,[r0,#0x44]
;;;373    SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
00020c  6c41              LDR      r1,[r0,#0x44]
00020e  f4214140          BIC      r1,r1,#0xc000
000212  f4414100          ORR      r1,r1,#0x8000
000216  6441              STR      r1,[r0,#0x44]
;;;374    
;;;375    SET_REG(LPC_ADC->ADCR,0,24,3);
000218  488d              LDR      r0,|L1.1104|
00021a  6801              LDR      r1,[r0,#0]
00021c  f02161e0          BIC      r1,r1,#0x7000000
000220  6001              STR      r1,[r0,#0]
;;;376    
;;;377    SET_REG(LPC_ADC->ADCR,1,21,1);
000222  6801              LDR      r1,[r0,#0]
000224  f4411100          ORR      r1,r1,#0x200000
000228  6001              STR      r1,[r0,#0]
;;;378    SET_REG(LPC_ADC->ADCR,0,16,1);
00022a  6801              LDR      r1,[r0,#0]
00022c  f4213180          BIC      r1,r1,#0x10000
000230  6001              STR      r1,[r0,#0]
;;;379    SET_REG(LPC_ADC->ADCR,1,8,8);
000232  6801              LDR      r1,[r0,#0]
000234  f421417f          BIC      r1,r1,#0xff00
000238  f4417180          ORR      r1,r1,#0x100
00023c  6001              STR      r1,[r0,#0]
;;;380    
;;;381    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;382    //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;383    	
;;;384    	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;385         /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;386         else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;387    
;;;388    LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
00023e  1581              ASRS     r1,r0,#22
000240  60c1              STR      r1,[r0,#0xc]
000242  4884              LDR      r0,|L1.1108|
000244  0389              LSLS     r1,r1,#14
000246  6001              STR      r1,[r0,#0]
;;;389    
;;;390    NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;391    
;;;392    
;;;393    }
000248  4770              BX       lr
;;;394    
                          ENDP

                  net_in_drv PROC
;;;395    //-----------------------------------------------
;;;396    void net_in_drv(void)
00024a  b5f0              PUSH     {r4-r7,lr}
;;;397    {
;;;398    if(adc_buff_[10]<3500)
00024c  4d70              LDR      r5,|L1.1040|
;;;399    	{
;;;400    	if(net_in_drv_cnt_B	< 20)
00024e  486d              LDR      r0,|L1.1028|
;;;401    		{
;;;402    		net_in_drv_cnt_B++;
;;;403    		}
;;;404    	else if(net_in_drv_cnt_B>20)net_in_drv_cnt_B=0; 
;;;405    	}
;;;406    else
;;;407    	{
;;;408    	if(net_in_drv_cnt_B)
;;;409    		{
;;;410    		net_in_drv_cnt_B--;
;;;411    		}
;;;412    	}			 
;;;413    if(net_in_drv_cnt_B>=19) 
;;;414    	{
;;;415    	net_in_drv_stat_B=1;
;;;416    	gp_av_stat&=~0x00000001;
000250  4981              LDR      r1,|L1.1112|
000252  f9b57014          LDRSH    r7,[r5,#0x14]         ;398  ; adc_buff_
000256  f64056ac          MOV      r6,#0xdac             ;398
00025a  f990200f          LDRSB    r2,[r0,#0xf]          ;400
00025e  2300              MOVS     r3,#0                 ;404
000260  680c              LDR      r4,[r1,#0]            ;398
000262  f04f0c01          MOV      r12,#1                ;415
000266  42b7              CMP      r7,r6                 ;398
000268  da07              BGE      |L1.634|
00026a  2a14              CMP      r2,#0x14              ;400
00026c  da02              BGE      |L1.628|
00026e  f1020201          ADD      r2,r2,#1              ;402
000272  e004              B        |L1.638|
                  |L1.628|
000274  dd04              BLE      |L1.640|
000276  73c3              STRB     r3,[r0,#0xf]          ;404
000278  e00d              B        |L1.662|
                  |L1.634|
00027a  b162              CBZ      r2,|L1.662|
00027c  1e52              SUBS     r2,r2,#1              ;410
                  |L1.638|
00027e  73c2              STRB     r2,[r0,#0xf]          ;410
                  |L1.640|
000280  f990200f          LDRSB    r2,[r0,#0xf]          ;413  ; net_in_drv_cnt_B
000284  2a13              CMP      r2,#0x13              ;413
000286  db04              BLT      |L1.658|
000288  f880c011          STRB     r12,[r0,#0x11]        ;415
00028c  f0240201          BIC      r2,r4,#1
000290  e004              B        |L1.668|
                  |L1.658|
;;;417    	}
;;;418    else if(net_in_drv_cnt_B<=2) 
000292  2a02              CMP      r2,#2
000294  dc03              BGT      |L1.670|
                  |L1.662|
;;;419    	{
;;;420    	net_in_drv_stat_B=0;
000296  7443              STRB     r3,[r0,#0x11]
;;;421    	gp_av_stat|=0x00000001;
000298  f0440201          ORR      r2,r4,#1
                  |L1.668|
00029c  600a              STR      r2,[r1,#0]  ; gp_av_stat
                  |L1.670|
00029e  4a59              LDR      r2,|L1.1028|
;;;422    		
;;;423    	}
;;;424    
;;;425    if(adc_buff_[5]<3500)
0002a0  f9b5400a          LDRSH    r4,[r5,#0xa]  ; adc_buff_
;;;426    	{
;;;427    	if(net_in_drv_cnt_C	< 20)
0002a4  f9922010          LDRSB    r2,[r2,#0x10]
0002a8  42b4              CMP      r4,r6                 ;425
0002aa  da07              BGE      |L1.700|
0002ac  2a14              CMP      r2,#0x14
0002ae  da02              BGE      |L1.694|
;;;428    		{
;;;429    		net_in_drv_cnt_C++;
0002b0  f1020201          ADD      r2,r2,#1
0002b4  e004              B        |L1.704|
                  |L1.694|
;;;430    		}
;;;431    	else if(net_in_drv_cnt_C>20)net_in_drv_cnt_C=0; 
0002b6  dd04              BLE      |L1.706|
0002b8  7403              STRB     r3,[r0,#0x10]
0002ba  e00e              B        |L1.730|
                  |L1.700|
;;;432    	}
;;;433    else
;;;434    	{
;;;435    	if(net_in_drv_cnt_C)
0002bc  b16a              CBZ      r2,|L1.730|
;;;436    		{
;;;437    		net_in_drv_cnt_C--;
0002be  1e52              SUBS     r2,r2,#1
                  |L1.704|
0002c0  7402              STRB     r2,[r0,#0x10]
                  |L1.706|
;;;438    		}
;;;439    	}			 
;;;440    if(net_in_drv_cnt_C>=19) 
0002c2  f9902010          LDRSB    r2,[r0,#0x10]  ; net_in_drv_cnt_C
0002c6  2a13              CMP      r2,#0x13
0002c8  db05              BLT      |L1.726|
;;;441    	{
;;;442    	net_in_drv_stat_C=1;
0002ca  f880c012          STRB     r12,[r0,#0x12]
;;;443    	gp_av_stat&=~0x00000002;
0002ce  6808              LDR      r0,[r1,#0]  ; gp_av_stat
0002d0  f0200002          BIC      r0,r0,#2
0002d4  e005              B        |L1.738|
                  |L1.726|
;;;444    	}
;;;445    else if(net_in_drv_cnt_C<=2) 
0002d6  2a02              CMP      r2,#2
0002d8  dc04              BGT      |L1.740|
                  |L1.730|
;;;446    	{
;;;447    	net_in_drv_stat_C=0;
0002da  7483              STRB     r3,[r0,#0x12]
;;;448    	gp_av_stat|=0x00000002;
0002dc  6808              LDR      r0,[r1,#0]  ; gp_av_stat
0002de  f0400002          ORR      r0,r0,#2
                  |L1.738|
0002e2  6008              STR      r0,[r1,#0]            ;443  ; gp_av_stat
                  |L1.740|
;;;449    	}
;;;450    }	   
0002e4  bdf0              POP      {r4-r7,pc}
;;;451    
                          ENDP

                  adc_drv7 PROC
;;;452    //-----------------------------------------------
;;;453    void adc_drv7(void) //(Uсети - постоянка)
0002e6  e92d41f0          PUSH     {r4-r8,lr}
;;;454    {
;;;455    //int temp_S;
;;;456    //char i;
;;;457    //signed short temp_SS;
;;;458    
;;;459    adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0002ea  4c46              LDR      r4,|L1.1028|
0002ec  3436              ADDS     r4,r4,#0x36
0002ee  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0002f0  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0002f2  1a40              SUBS     r0,r0,r1
0002f4  b200              SXTH     r0,r0
0002f6  f7fffffe          BL       abs_pal
0002fa  1da5              ADDS     r5,r4,#6
0002fc  8028              STRH     r0,[r5,#0]
;;;460    adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0002fe  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000300  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
000302  1a40              SUBS     r0,r0,r1
000304  b200              SXTH     r0,r0
000306  f7fffffe          BL       abs_pal
00030a  8068              STRH     r0,[r5,#2]
;;;461    adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
00030c  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00030e  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000310  1a40              SUBS     r0,r0,r1
000312  b200              SXTH     r0,r0
000314  f7fffffe          BL       abs_pal
;;;462    
;;;463    //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;464    //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;465    //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;466    
;;;467    
;;;468    if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
000318  f44f7296          MOV      r2,#0x12c
;;;469    	{
;;;470    	adc_result=adc_self_ch_buff[2];
00031c  4939              LDR      r1,|L1.1028|
00031e  80a8              STRH     r0,[r5,#4]            ;461
000320  4290              CMP      r0,r2                 ;468
000322  da01              BGE      |L1.808|
000324  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000326  e00a              B        |L1.830|
                  |L1.808|
;;;471    	} 
;;;472    else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
000328  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
00032c  4290              CMP      r0,r2
00032e  da01              BGE      |L1.820|
;;;473    	{
;;;474    	adc_result=adc_self_ch_buff[1];
000330  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000332  e004              B        |L1.830|
                  |L1.820|
;;;475    	}
;;;476    else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
000334  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
000338  4290              CMP      r0,r2
00033a  da01              BGE      |L1.832|
;;;477    	{
;;;478    	adc_result=adc_self_ch_buff[0];
00033c  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L1.830|
00033e  8348              STRH     r0,[r1,#0x1a]
                  |L1.832|
;;;479    	}
;;;480        //adc_result=92;
;;;481    
;;;482    if(adc_ch_net)
000340  784c              LDRB     r4,[r1,#1]  ; adc_ch_net
000342  2300              MOVS     r3,#0
000344  b31c              CBZ      r4,|L1.910|
;;;483    	{
;;;484    
;;;485    	main_power_buffer[0]+=(long)(adc_result);
000346  4832              LDR      r0,|L1.1040|
000348  f9b1201a          LDRSH    r2,[r1,#0x1a]  ; adc_result
00034c  3040              ADDS     r0,r0,#0x40
00034e  6805              LDR      r5,[r0,#0]  ; main_power_buffer
000350  4415              ADD      r5,r5,r2
;;;486    	main_power_buffer[1]+=(long)(adc_result);
000352  6005              STR      r5,[r0,#0]  ; main_power_buffer
000354  6845              LDR      r5,[r0,#4]  ; main_power_buffer
000356  4415              ADD      r5,r5,r2
;;;487    	main_power_buffer[2]+=(long)(adc_result);
000358  6045              STR      r5,[r0,#4]  ; main_power_buffer
00035a  6885              LDR      r5,[r0,#8]  ; main_power_buffer
00035c  4415              ADD      r5,r5,r2
;;;488    	main_power_buffer[3]+=(long)(adc_result);
00035e  6085              STR      r5,[r0,#8]  ; main_power_buffer
000360  68c5              LDR      r5,[r0,#0xc]  ; main_power_buffer
000362  442a              ADD      r2,r2,r5
;;;489    
;;;490    	adc_net_buff_cnt++;
000364  60c2              STR      r2,[r0,#0xc]  ; main_power_buffer
000366  8c4a              LDRH     r2,[r1,#0x22]  ; adc_net_buff_cnt
000368  1c52              ADDS     r2,r2,#1
00036a  b212              SXTH     r2,r2
00036c  844a              STRH     r2,[r1,#0x22]
;;;491    	if(adc_net_buff_cnt>=0x1000)
00036e  f5b25f80          CMP      r2,#0x1000
000372  db00              BLT      |L1.886|
;;;492    		{
;;;493    		adc_net_buff_cnt=0;
000374  844b              STRH     r3,[r1,#0x22]
                  |L1.886|
;;;494    		}
;;;495    	if((adc_net_buff_cnt&0x03ff)==0)
000376  f9b12022          LDRSH    r2,[r1,#0x22]  ; adc_net_buff_cnt
00037a  0595              LSLS     r5,r2,#22
00037c  d135              BNE      |L1.1002|
;;;496    		{
;;;497    		#ifdef UKU_220
;;;498    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;499    		#else
;;;500    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
00037e  1292              ASRS     r2,r2,#10
000380  f8505022          LDR      r5,[r0,r2,LSL #2]
000384  122d              ASRS     r5,r5,#8
000386  830d              STRH     r5,[r1,#0x18]
;;;501    		#endif
;;;502    		main_power_buffer[adc_net_buff_cnt>>10]=0;
000388  f8403022          STR      r3,[r0,r2,LSL #2]
00038c  e02d              B        |L1.1002|
                  |L1.910|
;;;503    		}
;;;504    
;;;505    
;;;506    	} 
;;;507    else if(!adc_ch_net)
;;;508    	{
;;;509    	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
00038e  4f33              LDR      r7,|L1.1116|
000390  7888              LDRB     r0,[r1,#2]  ; adc_ch
000392  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
000396  eb0712c0          ADD      r2,r7,r0,LSL #7
00039a  f9b1e01a          LDRSH    lr,[r1,#0x1a]  ; adc_result
00039e  f842e02c          STR      lr,[r2,r12,LSL #2]
;;;510    	
;;;511    	if((adc_ch_cnt&0x03)==0)
0003a2  ea5f728c          LSLS     r2,r12,#30
0003a6  d112              BNE      |L1.974|
;;;512    		{
;;;513    		long temp_L;
;;;514    		char i;
;;;515    		temp_L=0;
0003a8  2500              MOVS     r5,#0
;;;516    		for(i=0;i<32;i++)
0003aa  462a              MOV      r2,r5
;;;517    			{
;;;518    			temp_L+=adc_buff[adc_ch][i];
0003ac  eb0716c0          ADD      r6,r7,r0,LSL #7
                  |L1.944|
0003b0  f8567022          LDR      r7,[r6,r2,LSL #2]
0003b4  1c52              ADDS     r2,r2,#1              ;516
0003b6  b2d2              UXTB     r2,r2                 ;516
0003b8  443d              ADD      r5,r5,r7
0003ba  2a20              CMP      r2,#0x20              ;516
0003bc  d3f8              BCC      |L1.944|
;;;519    			}
;;;520    		adc_buff_[adc_ch]= (short)(temp_L>>5);
0003be  116a              ASRS     r2,r5,#5
0003c0  4d13              LDR      r5,|L1.1040|
0003c2  f8252010          STRH     r2,[r5,r0,LSL #1]
;;;521    		adc_buff__[adc_ch]= adc_buff[adc_ch][adc_ch_cnt];
0003c6  f1050220          ADD      r2,r5,#0x20
0003ca  f822e010          STRH     lr,[r2,r0,LSL #1]
                  |L1.974|
;;;522    		//adc_buff_[3]=346;
;;;523    		}
;;;524    	if(++adc_ch>=16) 
0003ce  1c40              ADDS     r0,r0,#1
0003d0  b2c0              UXTB     r0,r0
0003d2  7088              STRB     r0,[r1,#2]
0003d4  2810              CMP      r0,#0x10
0003d6  d308              BCC      |L1.1002|
;;;525    		{
;;;526    		adc_ch=0;
;;;527    		adc_ch_cnt++;
0003d8  f10c0c01          ADD      r12,r12,#1
0003dc  f00c00ff          AND      r0,r12,#0xff
0003e0  708b              STRB     r3,[r1,#2]            ;526
0003e2  70c8              STRB     r0,[r1,#3]
;;;528    		if(adc_ch_cnt>=32)adc_ch_cnt=0;
0003e4  2820              CMP      r0,#0x20
0003e6  d300              BCC      |L1.1002|
0003e8  70cb              STRB     r3,[r1,#3]
                  |L1.1002|
;;;529    		}
;;;530    	}
;;;531    
;;;532      
;;;533    
;;;534    adc_self_ch_cnt=0;
;;;535    
;;;536    adc_ch_net++;
0003ea  1c64              ADDS     r4,r4,#1
0003ec  700b              STRB     r3,[r1,#0]            ;534
;;;537    adc_ch_net&=1;
0003ee  f0140001          ANDS     r0,r4,#1
;;;538    
;;;539    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;540    //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;541    
;;;542    if(adc_ch_net)
;;;543    	{
;;;544    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;545    	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;546    	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0003f2  4a17              LDR      r2,|L1.1104|
0003f4  7048              STRB     r0,[r1,#1]            ;537
0003f6  d036              BEQ      |L1.1126|
0003f8  6810              LDR      r0,[r2,#0]
0003fa  f02000ff          BIC      r0,r0,#0xff
0003fe  e02f              B        |L1.1120|
                  |L1.1024|
                          DCD      TBAT
                  |L1.1028|
                          DCD      ||area_number.18||
                  |L1.1032|
                          DCD      ad7705_buff_
                  |L1.1036|
                          DCD      Kiload0
                  |L1.1040|
                          DCD      ||.bss||+0x800
                  |L1.1044|
                          DCD      unet_drv_cnt
                  |L1.1048|
                          DCD      Kuload
                  |L1.1052|
                          DCD      load_U
                  |L1.1056|
                          DCD      load_U_
                  |L1.1060|
                          DCD      Kiload1
                  |L1.1064|
                          DCD      load_I
                  |L1.1068|
                          DCD      load_I_
                  |L1.1072|
                          DCD      I_LOAD_MODE
                  |L1.1076|
                          DCD      NUMIST
                  |L1.1080|
                          DCD      bps
                  |L1.1084|
                          DCD      I_MAX
                  |L1.1088|
                          DCD      I_MAX_IPS
                  |L1.1092|
                          DCD      I_MIN
                  |L1.1096|
                          DCD      I_MIN_IPS
                  |L1.1100|
                          DCD      0x4002c000
                  |L1.1104|
                          DCD      0x40034000
                  |L1.1108|
                          DCD      0xe000e100
                  |L1.1112|
                          DCD      gp_av_stat
                  |L1.1116|
                          DCD      ||.bss||
                  |L1.1120|
000460  1d00              ADDS     r0,r0,#4
000462  6010              STR      r0,[r2,#0]
000464  e034              B        |L1.1232|
                  |L1.1126|
;;;547    	}
;;;548    else
;;;549    	{
;;;550    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;551    	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;552    	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
000466  7889              LDRB     r1,[r1,#2]  ; adc_ch
000468  0708              LSLS     r0,r1,#28
00046a  2800              CMP      r0,#0
;;;553    	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
00046c  6810              LDR      r0,[r2,#0]
00046e  f02000ff          BIC      r0,r0,#0xff
000472  db02              BLT      |L1.1146|
000474  f1000001          ADD      r0,r0,#1              ;552
000478  e001              B        |L1.1150|
                  |L1.1146|
00047a  f1000002          ADD      r0,r0,#2
                  |L1.1150|
00047e  6010              STR      r0,[r2,#0]
;;;554    
;;;555    
;;;556    	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
000480  48ff              LDR      r0,|L1.2176|
000482  6803              LDR      r3,[r0,#0]
000484  f0435380          ORR      r3,r3,#0x10000000
000488  6003              STR      r3,[r0,#0]
;;;557    	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
00048a  6a03              LDR      r3,[r0,#0x20]
00048c  f0434380          ORR      r3,r3,#0x40000000
000490  6203              STR      r3,[r0,#0x20]
;;;558    	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
000492  6e03              LDR      r3,[r0,#0x60]
000494  f0436380          ORR      r3,r3,#0x4000000
000498  6603              STR      r3,[r0,#0x60]
;;;559    
;;;560    	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
00049a  07cb              LSLS     r3,r1,#31
;;;561    	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
00049c  6943              LDR      r3,[r0,#0x14]
00049e  d008              BEQ      |L1.1202|
0004a0  f0435380          ORR      r3,r3,#0x10000000
                  |L1.1188|
0004a4  6143              STR      r3,[r0,#0x14]
;;;562    
;;;563    	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
0004a6  078b              LSLS     r3,r1,#30
;;;564    	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
0004a8  6b43              LDR      r3,[r0,#0x34]
0004aa  d405              BMI      |L1.1208|
0004ac  f0234380          BIC      r3,r3,#0x40000000     ;563
0004b0  e004              B        |L1.1212|
                  |L1.1202|
0004b2  f0235380          BIC      r3,r3,#0x10000000     ;560
0004b6  e7f5              B        |L1.1188|
                  |L1.1208|
0004b8  f0434380          ORR      r3,r3,#0x40000000
                  |L1.1212|
0004bc  6343              STR      r3,[r0,#0x34]
;;;565    
;;;566    	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
0004be  0749              LSLS     r1,r1,#29
;;;567    	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
0004c0  6f41              LDR      r1,[r0,#0x74]
0004c2  d402              BMI      |L1.1226|
0004c4  f0216180          BIC      r1,r1,#0x4000000      ;566
0004c8  e001              B        |L1.1230|
                  |L1.1226|
0004ca  f0416180          ORR      r1,r1,#0x4000000
                  |L1.1230|
0004ce  6741              STR      r1,[r0,#0x74]         ;566
                  |L1.1232|
;;;568    	}
;;;569    	
;;;570    
;;;571    
;;;572    
;;;573    LPC_ADC->ADCR |=  (1<<24);
0004d0  6810              LDR      r0,[r2,#0]
0004d2  f0407080          ORR      r0,r0,#0x1000000
0004d6  6010              STR      r0,[r2,#0]
                  |L1.1240|
;;;574    
;;;575    }
0004d8  e8bd81f0          POP      {r4-r8,pc}
;;;576    
                          ENDP

                  avg_hndl PROC
;;;577    //-----------------------------------------------
;;;578    void avg_hndl(void)
0004dc  e92d4ff0          PUSH     {r4-r11,lr}
;;;579    { 
;;;580    char i;
;;;581    
;;;582    
;;;583    
;;;584    #define AVGCNTMAX	5
;;;585    if(avg_main_cnt)
0004e0  49e8              LDR      r1,|L1.2180|
0004e2  f9b10000          LDRSH    r0,[r1,#0]  ; avg_main_cnt
0004e6  b118              CBZ      r0,|L1.1264|
;;;586    	{
;;;587    	avg_main_cnt--;
0004e8  f1a00001          SUB      r0,r0,#1
0004ec  8008              STRH     r0,[r1,#0]
;;;588    	goto avg_hndl_end;
0004ee  e0ae              B        |L1.1614|
                  |L1.1264|
;;;589    	}                 
;;;590    
;;;591    avg_main_cnt=10;
0004f0  200a              MOVS     r0,#0xa
0004f2  8008              STRH     r0,[r1,#0]
;;;592    
;;;593    avg_num=0;
0004f4  49e4              LDR      r1,|L1.2184|
0004f6  2300              MOVS     r3,#0
;;;594    num_of_dumm_src=100;
0004f8  f8dfb390          LDR      r11,|L1.2188|
;;;595    num_of_max_src=100;
0004fc  f8df8390          LDR      r8,|L1.2192|
000500  700b              STRB     r3,[r1,#0]            ;593
000502  2064              MOVS     r0,#0x64              ;594
000504  f88b0000          STRB     r0,[r11,#0]           ;594
000508  f8880000          STRB     r0,[r8,#0]
;;;596    
;;;597    for(i=0;i<NUMIST;i++)
00050c  48e1              LDR      r0,|L1.2196|
00050e  461a              MOV      r2,r3
000510  f9b04000          LDRSH    r4,[r0,#0]
;;;598    	{
;;;599    	if(/*(bps[i]._state==bsWRK)&&*/(bps[i]._cnt<20))avg_num++;
000514  48e0              LDR      r0,|L1.2200|
000516  e00d              B        |L1.1332|
                  |L1.1304|
000518  ebc205c2          RSB      r5,r2,r2,LSL #3
00051c  eb050545          ADD      r5,r5,r5,LSL #1
000520  eb000585          ADD      r5,r0,r5,LSL #2
000524  78ed              LDRB     r5,[r5,#3]
000526  2d14              CMP      r5,#0x14
000528  d202              BCS      |L1.1328|
00052a  780d              LDRB     r5,[r1,#0]  ; avg_num
00052c  1c6d              ADDS     r5,r5,#1
00052e  700d              STRB     r5,[r1,#0]
                  |L1.1328|
000530  1c52              ADDS     r2,r2,#1              ;597
000532  b2d2              UXTB     r2,r2                 ;597
                  |L1.1332|
000534  42a2              CMP      r2,r4                 ;597
000536  dbef              BLT      |L1.1304|
;;;600    	}
;;;601    
;;;602    /*if((K[NUMI]>=1)&&(bps_state[0]==ssWRK))	avg_num++;
;;;603    if((K[NUMI]>=2)&&(bps_state[1]==ssWRK))	avg_num++;
;;;604    if((K[NUMI]>=3)&&(bps_state[2]==ssWRK))	avg_num++;*/
;;;605    
;;;606    	
;;;607    if(avg_num<2)
000538  7809              LDRB     r1,[r1,#0]  ; avg_num
00053a  468a              MOV      r10,r1
00053c  2902              CMP      r1,#2
00053e  d34c              BCC      |L1.1498|
;;;608    	{
;;;609    	goto avg_hndl_end;
;;;610    	
;;;611    	}
;;;612    	
;;;613    else if(bU_VALID_VALID)
000540  49d6              LDR      r1,|L1.2204|
000542  7a89              LDRB     r1,[r1,#0xa]  ; bU_VALID_VALID
000544  2900              CMP      r1,#0
000546  d048              BEQ      |L1.1498|
;;;614    	{
;;;615    	i_avg_min=5000;
000548  4ad5              LDR      r2,|L1.2208|
00054a  f2413188          MOV      r1,#0x1388
;;;616    	i_avg_max=0;
00054e  f8dfc354          LDR      r12,|L1.2212|
000552  6011              STR      r1,[r2,#0]  ; i_avg_min
;;;617    	i_avg_summ=0;
000554  4dd4              LDR      r5,|L1.2216|
000556  f8cc3000          STR      r3,[r12,#0]  ; i_avg_max
;;;618    	for(i=0;i<NUMIST;i++)
00055a  2100              MOVS     r1,#0
00055c  602b              STR      r3,[r5,#0]  ; i_avg_summ
00055e  e01f              B        |L1.1440|
                  |L1.1376|
;;;619    		{
;;;620    		if(bps[i]._state==bsWRK)
000560  ebc106c1          RSB      r6,r1,r1,LSL #3
000564  eb060646          ADD      r6,r6,r6,LSL #1
000568  eb000686          ADD      r6,r0,r6,LSL #2
00056c  78b7              LDRB     r7,[r6,#2]
00056e  2f01              CMP      r7,#1
000570  d114              BNE      |L1.1436|
;;;621    			{
;;;622    			if(bps[i]._Ii>i_avg_max)
000572  6a36              LDR      r6,[r6,#0x20]
000574  f8dc7000          LDR      r7,[r12,#0]  ; i_avg_max
000578  46b1              MOV      r9,r6
00057a  42be              CMP      r6,r7
00057c  dd03              BLE      |L1.1414|
;;;623    				{
;;;624    				i_avg_max=bps[i]._Ii;
;;;625    				num_of_max_src=i;
00057e  f8cc9000          STR      r9,[r12,#0]  ; i_avg_max
000582  f8881000          STRB     r1,[r8,#0]
                  |L1.1414|
;;;626    				}
;;;627    			if(bps[i]._Ii<i_avg_min)
000586  6817              LDR      r7,[r2,#0]  ; i_avg_min
000588  45b9              CMP      r9,r7
00058a  da03              BGE      |L1.1428|
;;;628    				{
;;;629    				i_avg_min=bps[i]._Ii;
;;;630    				num_of_dumm_src=i;
00058c  f8c29000          STR      r9,[r2,#0]  ; i_avg_min
000590  f88b1000          STRB     r1,[r11,#0]
                  |L1.1428|
;;;631    				}
;;;632    			
;;;633    			i_avg_summ+=bps[i]._Ii;
000594  682f              LDR      r7,[r5,#0]  ; i_avg_summ
000596  eb090607          ADD      r6,r9,r7
00059a  602e              STR      r6,[r5,#0]  ; i_avg_summ
                  |L1.1436|
00059c  1c49              ADDS     r1,r1,#1              ;618
00059e  b2c9              UXTB     r1,r1                 ;618
                  |L1.1440|
0005a0  42a1              CMP      r1,r4                 ;618
0005a2  dbdd              BLT      |L1.1376|
;;;634    			}
;;;635    		}
;;;636    	i_avg=i_avg_summ/avg_num;	
0005a4  682e              LDR      r6,[r5,#0]  ; i_avg_summ
0005a6  fb96f5fa          SDIV     r5,r6,r10
0005aa  4ec0              LDR      r6,|L1.2220|
;;;637    	
;;;638    	if(i_avg_min==0)i_avg_min=1;
0005ac  6035              STR      r5,[r6,#0]  ; i_avg
0005ae  6816              LDR      r6,[r2,#0]  ; i_avg_min
0005b0  2501              MOVS     r5,#1                 ;620
0005b2  b906              CBNZ     r6,|L1.1462|
0005b4  6015              STR      r5,[r2,#0]  ; i_avg_min
                  |L1.1462|
;;;639    
;;;640    	
;;;641    
;;;642    	avg=i_avg_max;
0005b6  f8dc6000          LDR      r6,[r12,#0]  ; i_avg_max
;;;643    	avg*=100;
0005ba  2764              MOVS     r7,#0x64
;;;644    	avg/=i_avg_min;
0005bc  6812              LDR      r2,[r2,#0]  ; i_avg_min
0005be  437e              MULS     r6,r7,r6              ;643
0005c0  fb96f2f2          SDIV     r2,r6,r2
0005c4  f8dfc2e8          LDR      r12,|L1.2224|
;;;645    	
;;;646    	if(avg>160) bAVG=1;
0005c8  4eba              LDR      r6,|L1.2228|
0005ca  2aa0              CMP      r2,#0xa0
0005cc  f8cc2000          STR      r2,[r12,#0]  ; avg
0005d0  dd00              BLE      |L1.1492|
0005d2  7035              STRB     r5,[r6,#0]
                  |L1.1492|
;;;647    	if(avg<120) bAVG=0;
0005d4  2a78              CMP      r2,#0x78
0005d6  da01              BGE      |L1.1500|
0005d8  7033              STRB     r3,[r6,#0]
                  |L1.1498|
0005da  e038              B        |L1.1614|
                  |L1.1500|
;;;648    
;;;649    	if(bAVG==1)
0005dc  7832              LDRB     r2,[r6,#0]  ; bAVG
0005de  2a01              CMP      r2,#1
0005e0  d135              BNE      |L1.1614|
;;;650    		{
;;;651    		//for(i=0;i<NUMIST;i++)
;;;652    			//{
;;;653    		//	if(bps[i]._state==bsWRK)
;;;654    				//{
;;;655    				//if(bps[i]._Ii>i_avg)bps[i]._xu_--;
;;;656    				/*if(bps[i]._Ii<i_avg)*/
;;;657    				if(bAVG_CNT==0)
0005e2  4ab5              LDR      r2,|L1.2232|
0005e4  7816              LDRB     r6,[r2,#0]  ; bAVG_CNT
0005e6  b1ee              CBZ      r6,|L1.1572|
;;;658    					{
;;;659    					bAVG_CNT=1;
;;;660    					if(num_of_dumm_src<NUMIST) bps[num_of_dumm_src]._xu_++;
;;;661    					}
;;;662    				else
;;;663    					{
;;;664    					bAVG_CNT=0;
0005e8  7013              STRB     r3,[r2,#0]
;;;665    					if(num_of_max_src<NUMIST) bps[num_of_max_src]._xu_--;
0005ea  f8982000          LDRB     r2,[r8,#0]  ; num_of_max_src
0005ee  42a2              CMP      r2,r4
0005f0  da09              BGE      |L1.1542|
0005f2  ebc202c2          RSB      r2,r2,r2,LSL #3
0005f6  eb020242          ADD      r2,r2,r2,LSL #1
0005fa  eb000282          ADD      r2,r0,r2,LSL #2
0005fe  f8323f50          LDRH     r3,[r2,#0x50]!
000602  1e5b              SUBS     r3,r3,#1
                  |L1.1540|
000604  8013              STRH     r3,[r2,#0]
                  |L1.1542|
;;;666    					}
;;;667    			
;;;668    				if(bps[i]._xu_<-50)bps[i]._xu_=-50;
000606  ebc101c1          RSB      r1,r1,r1,LSL #3
00060a  eb010141          ADD      r1,r1,r1,LSL #1
00060e  eb000081          ADD      r0,r0,r1,LSL #2
000612  f06f0231          MVN      r2,#0x31
000616  f9b01050          LDRSH    r1,[r0,#0x50]
00061a  4291              CMP      r1,r2
00061c  da11              BGE      |L1.1602|
00061e  f8a02050          STRH     r2,[r0,#0x50]
000622  e014              B        |L1.1614|
                  |L1.1572|
000624  7015              STRB     r5,[r2,#0]            ;659
000626  f89b2000          LDRB     r2,[r11,#0]           ;660  ; num_of_dumm_src
00062a  42a2              CMP      r2,r4                 ;660
00062c  daeb              BGE      |L1.1542|
00062e  ebc202c2          RSB      r2,r2,r2,LSL #3       ;660
000632  eb020242          ADD      r2,r2,r2,LSL #1       ;660
000636  eb000282          ADD      r2,r0,r2,LSL #2       ;660
00063a  f8323f50          LDRH     r3,[r2,#0x50]!        ;660
00063e  1c5b              ADDS     r3,r3,#1              ;660
000640  e7e0              B        |L1.1540|
                  |L1.1602|
;;;669    				if(bps[i]._xu_>50)bps[i]._xu_=50;	
000642  2932              CMP      r1,#0x32
000644  dd03              BLE      |L1.1614|
000646  f04f0132          MOV      r1,#0x32
00064a  f8a01050          STRH     r1,[r0,#0x50]
                  |L1.1614|
;;;670    			//	}
;;;671    			//}		
;;;672    		}			
;;;673    	}   	 
;;;674    
;;;675    
;;;676    avg_hndl_end:
;;;677    __nop();  
00064e  bf00              NOP      
;;;678    }
000650  e8bd8ff0          POP      {r4-r11,pc}
;;;679    
                          ENDP

                  adc_drv6 PROC
;;;680    //-----------------------------------------------
;;;681    void adc_drv6(void) //(с попыткой измерять горбы)
000654  e92d41f0          PUSH     {r4-r8,lr}
;;;682    {
;;;683    //int temp_S;
;;;684    //char i;
;;;685    //signed short temp_SS;
;;;686    
;;;687    adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
000658  4c90              LDR      r4,|L1.2204|
00065a  3436              ADDS     r4,r4,#0x36
00065c  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00065e  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000660  1a40              SUBS     r0,r0,r1
000662  b200              SXTH     r0,r0
000664  f7fffffe          BL       abs_pal
000668  1da5              ADDS     r5,r4,#6
00066a  8028              STRH     r0,[r5,#0]
;;;688    adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
00066c  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00066e  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
000670  1a40              SUBS     r0,r0,r1
000672  b200              SXTH     r0,r0
000674  f7fffffe          BL       abs_pal
000678  8068              STRH     r0,[r5,#2]
;;;689    adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
00067a  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00067c  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00067e  1a40              SUBS     r0,r0,r1
000680  b200              SXTH     r0,r0
000682  f7fffffe          BL       abs_pal
;;;690    
;;;691    //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;692    //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;693    //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;694    
;;;695    
;;;696    if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
000686  f44f7296          MOV      r2,#0x12c
;;;697    	{
;;;698    	adc_result=adc_self_ch_buff[2];
00068a  4984              LDR      r1,|L1.2204|
00068c  80a8              STRH     r0,[r5,#4]            ;689
00068e  4290              CMP      r0,r2                 ;696
000690  da01              BGE      |L1.1686|
000692  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000694  e00a              B        |L1.1708|
                  |L1.1686|
;;;699    	} 
;;;700    else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
000696  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
00069a  4290              CMP      r0,r2
00069c  da01              BGE      |L1.1698|
;;;701    	{
;;;702    	adc_result=adc_self_ch_buff[1];
00069e  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0006a0  e004              B        |L1.1708|
                  |L1.1698|
;;;703    	}
;;;704    else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
0006a2  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
0006a6  4290              CMP      r0,r2
0006a8  da01              BGE      |L1.1710|
;;;705    	{
;;;706    	adc_result=adc_self_ch_buff[0];
0006aa  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L1.1708|
0006ac  8348              STRH     r0,[r1,#0x1a]
                  |L1.1710|
;;;707    	}
;;;708        //adc_result=92;
;;;709    
;;;710    if(adc_ch_net)
0006ae  784e              LDRB     r6,[r1,#1]  ; adc_ch_net
0006b0  2000              MOVS     r0,#0
0006b2  b3f6              CBZ      r6,|L1.1842|
;;;711    	{
;;;712    
;;;713    	if(adc_window_flag)
0006b4  790c              LDRB     r4,[r1,#4]  ; adc_window_flag
;;;714    		{
;;;715    		main_power_buffer[0]+=(long)(adc_result>>2);
0006b6  4a81              LDR      r2,|L1.2236|
0006b8  b18c              CBZ      r4,|L1.1758|
0006ba  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
0006be  6815              LDR      r5,[r2,#0]  ; main_power_buffer
0006c0  eb0505a3          ADD      r5,r5,r3,ASR #2
;;;716    		main_power_buffer[1]+=(long)(adc_result>>2);
0006c4  6015              STR      r5,[r2,#0]  ; main_power_buffer
0006c6  6855              LDR      r5,[r2,#4]  ; main_power_buffer
0006c8  eb0505a3          ADD      r5,r5,r3,ASR #2
;;;717    		main_power_buffer[2]+=(long)(adc_result>>2);
0006cc  6055              STR      r5,[r2,#4]  ; main_power_buffer
0006ce  6895              LDR      r5,[r2,#8]  ; main_power_buffer
0006d0  eb0505a3          ADD      r5,r5,r3,ASR #2
;;;718    		main_power_buffer[3]+=(long)(adc_result>>2);
0006d4  6095              STR      r5,[r2,#8]  ; main_power_buffer
0006d6  68d5              LDR      r5,[r2,#0xc]  ; main_power_buffer
0006d8  eb0503a3          ADD      r3,r5,r3,ASR #2
0006dc  60d3              STR      r3,[r2,#0xc]  ; main_power_buffer
                  |L1.1758|
;;;719    		}
;;;720    //	main_power_buffer[4]+=(long)(adc_result>>2);
;;;721    //	main_power_buffer[5]+=(long)(adc_result>>2);
;;;722    //	main_power_buffer[6]+=(long)(adc_result>>2);
;;;723    //	main_power_buffer[7]+=(long)(adc_result>>2);
;;;724    //	main_power_buffer_cnt++;
;;;725    
;;;726    
;;;727    	if(adc_result<100)
0006de  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
0006e2  2b64              CMP      r3,#0x64
0006e4  da0e              BGE      |L1.1796|
;;;728    		{
;;;729    		adc_zero_cnt++;
0006e6  8bcb              LDRH     r3,[r1,#0x1e]  ; adc_zero_cnt
;;;730    		}
;;;731    	else adc_zero_cnt=0;
;;;732    
;;;733    	if(adc_zero_cnt>=2000)
0006e8  f44f65fa          MOV      r5,#0x7d0
0006ec  1c5b              ADDS     r3,r3,#1              ;729
0006ee  b21b              SXTH     r3,r3                 ;729
0006f0  83cb              STRH     r3,[r1,#0x1e]         ;729
0006f2  42ab              CMP      r3,r5
0006f4  db08              BLT      |L1.1800|
;;;734    		{
;;;735    		adc_zero_cnt=2000;
0006f6  83cd              STRH     r5,[r1,#0x1e]
;;;736    		main_power_buffer[0]=0;
;;;737    		main_power_buffer[1]=0;
0006f8  6010              STR      r0,[r2,#0]  ; main_power_buffer
;;;738    		main_power_buffer[2]=0;
0006fa  6050              STR      r0,[r2,#4]  ; main_power_buffer
;;;739    		main_power_buffer[3]=0;
0006fc  6090              STR      r0,[r2,#8]  ; main_power_buffer
;;;740    		net_buff_=0;
0006fe  60d0              STR      r0,[r2,#0xc]  ; main_power_buffer
000700  8308              STRH     r0,[r1,#0x18]
000702  e053              B        |L1.1964|
                  |L1.1796|
000704  83c8              STRH     r0,[r1,#0x1e]         ;731
000706  e051              B        |L1.1964|
                  |L1.1800|
;;;741    		}
;;;742    
;;;743    	if(adc_zero_cnt==5)
000708  2b05              CMP      r3,#5
00070a  d14f              BNE      |L1.1964|
;;;744    		{
;;;745    		
;;;746    		if(adc_window_flag)
00070c  b1a4              CBZ      r4,|L1.1848|
;;;747    			{
;;;748    			adc_gorb_cnt++;
00070e  8b8b              LDRH     r3,[r1,#0x1c]  ; adc_gorb_cnt
000710  1c5b              ADDS     r3,r3,#1
000712  b21b              SXTH     r3,r3
000714  838b              STRH     r3,[r1,#0x1c]
;;;749    			if(adc_gorb_cnt>=512)
000716  f5b37f00          CMP      r3,#0x200
00071a  db00              BLT      |L1.1822|
;;;750    				{
;;;751    				adc_gorb_cnt=0;
00071c  8388              STRH     r0,[r1,#0x1c]
                  |L1.1822|
;;;752    				//net_buff_=main_power_buffer[0]>>8;
;;;753    				//main_power_buffer[0]=0;
;;;754    			   	}
;;;755    
;;;756    			if((adc_gorb_cnt&0x007f)==0)
00071e  f9b1301c          LDRSH    r3,[r1,#0x1c]  ; adc_gorb_cnt
000722  065d              LSLS     r5,r3,#25
000724  d108              BNE      |L1.1848|
;;;757    				{
;;;758    				net_buff_=main_power_buffer[adc_gorb_cnt>>7]>>8;
000726  11db              ASRS     r3,r3,#7
000728  f8525023          LDR      r5,[r2,r3,LSL #2]
00072c  122d              ASRS     r5,r5,#8
00072e  830d              STRH     r5,[r1,#0x18]
;;;759    				main_power_buffer[adc_gorb_cnt>>7]=0;
000730  e000              B        |L1.1844|
                  |L1.1842|
000732  e00f              B        |L1.1876|
                  |L1.1844|
000734  f8420023          STR      r0,[r2,r3,LSL #2]
                  |L1.1848|
;;;760    				}
;;;761    			}
;;;762    
;;;763    		//LPC_GPIO2->FIODIR|=(1<<8);
;;;764    		//LPC_GPIO2->FIOPIN^=(1<<8);
;;;765    
;;;766    		if((adc_window_cnt>150)&&(adc_window_flag))
000738  f9b12020          LDRSH    r2,[r1,#0x20]  ; adc_window_cnt
00073c  2a96              CMP      r2,#0x96
00073e  dd01              BLE      |L1.1860|
000740  b104              CBZ      r4,|L1.1860|
;;;767    			{
;;;768    			adc_window_flag=0;
000742  7108              STRB     r0,[r1,#4]
                  |L1.1860|
;;;769    
;;;770    			
;;;771    			}
;;;772    		if((adc_window_cnt>30)&&(adc_window_cnt<70)&&(!adc_window_flag))
000744  3a1f              SUBS     r2,r2,#0x1f
000746  2a27              CMP      r2,#0x27
000748  d230              BCS      |L1.1964|
00074a  790a              LDRB     r2,[r1,#4]  ; adc_window_flag
00074c  bb72              CBNZ     r2,|L1.1964|
;;;773    			{
;;;774    			adc_window_flag=1;
00074e  2201              MOVS     r2,#1
000750  710a              STRB     r2,[r1,#4]
000752  e02b              B        |L1.1964|
                  |L1.1876|
;;;775    
;;;776    			//LPC_GPIO2->FIODIR|=(1<<8);
;;;777    			//LPC_GPIO2->FIOPIN|=(1<<8);
;;;778    			}
;;;779    		}
;;;780    	} 
;;;781    else if(!adc_ch_net)
;;;782    	{
;;;783    	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
000754  4f5a              LDR      r7,|L1.2240|
000756  788a              LDRB     r2,[r1,#2]  ; adc_ch
000758  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
00075c  eb0714c2          ADD      r4,r7,r2,LSL #7
000760  f9b1301a          LDRSH    r3,[r1,#0x1a]  ; adc_result
000764  f844302c          STR      r3,[r4,r12,LSL #2]
;;;784    	
;;;785    	if((adc_ch_cnt&0x03)==0)
000768  ea5f738c          LSLS     r3,r12,#30
00076c  d110              BNE      |L1.1936|
;;;786    		{
;;;787    		long temp_L;
;;;788    		char i;
;;;789    		temp_L=0;
00076e  2400              MOVS     r4,#0
;;;790    		for(i=0;i<16;i++)
000770  4623              MOV      r3,r4
;;;791    			{
;;;792    			temp_L+=adc_buff[adc_ch][i];
000772  eb0715c2          ADD      r5,r7,r2,LSL #7
000776  bf00              NOP      
                  |L1.1912|
000778  f8557023          LDR      r7,[r5,r3,LSL #2]
00077c  1c5b              ADDS     r3,r3,#1              ;790
00077e  b2db              UXTB     r3,r3                 ;790
000780  443c              ADD      r4,r4,r7
000782  2b10              CMP      r3,#0x10              ;790
000784  d3f8              BCC      |L1.1912|
;;;793    			}
;;;794    		adc_buff_[adc_ch]= (short)(temp_L>>4);
000786  1123              ASRS     r3,r4,#4
000788  4c4c              LDR      r4,|L1.2236|
00078a  3c40              SUBS     r4,r4,#0x40
00078c  f8243012          STRH     r3,[r4,r2,LSL #1]
                  |L1.1936|
;;;795    
;;;796    		//adc_buff_[3]=346;
;;;797    		}
;;;798    	if(++adc_ch>=16) 
000790  1c52              ADDS     r2,r2,#1
000792  b2d2              UXTB     r2,r2
000794  708a              STRB     r2,[r1,#2]
000796  2a10              CMP      r2,#0x10
000798  d308              BCC      |L1.1964|
;;;799    		{
;;;800    		adc_ch=0;
;;;801    		adc_ch_cnt++;
00079a  f10c0c01          ADD      r12,r12,#1
00079e  f00c02ff          AND      r2,r12,#0xff
0007a2  7088              STRB     r0,[r1,#2]            ;800
0007a4  70ca              STRB     r2,[r1,#3]
;;;802    		if(adc_ch_cnt>=16)adc_ch_cnt=0;
0007a6  2a10              CMP      r2,#0x10
0007a8  d300              BCC      |L1.1964|
0007aa  70c8              STRB     r0,[r1,#3]
                  |L1.1964|
;;;803    		}
;;;804    	}
;;;805    
;;;806    //adc_buff[adc_ch][adc_cnt1]=(adc_self_ch_buff[2]+adc_self_ch_buff[1])/2;
;;;807    
;;;808    //if(adc_buff[adc_ch][adc_cnt1]<adc_buff_min[adc_ch])adc_buff_min[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;809    //if(adc_buff[adc_ch][adc_cnt1]>adc_buff_max[adc_ch])adc_buff_max[adc_ch]=adc_buff[adc_ch][adc_cnt1];
;;;810    /*
;;;811    	{
;;;812    	if((adc_cnt1&0x03)==0)
;;;813    		{
;;;814    		temp_S=0;
;;;815    		for(i=0;i<16;i++)
;;;816    			{
;;;817    			temp_S+=adc_buff[adc_ch][i];
;;;818    			} 
;;;819             	adc_buff_[adc_ch]=temp_S>>4;
;;;820              }
;;;821    	}*/
;;;822    
;;;823    
;;;824    		  
;;;825    
;;;826    adc_self_ch_cnt=0;
0007ac  7008              STRB     r0,[r1,#0]
;;;827    
;;;828    adc_ch_net++;
0007ae  1c76              ADDS     r6,r6,#1
;;;829    adc_ch_net&=1;
0007b0  f0160001          ANDS     r0,r6,#1
;;;830    
;;;831    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;832    //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;833    
;;;834    if(adc_ch_net)
;;;835    	{
;;;836    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;837    	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;838    	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0007b4  4a43              LDR      r2,|L1.2244|
0007b6  7048              STRB     r0,[r1,#1]            ;829
0007b8  d005              BEQ      |L1.1990|
0007ba  6810              LDR      r0,[r2,#0]
0007bc  f02000ff          BIC      r0,r0,#0xff
0007c0  1d00              ADDS     r0,r0,#4
0007c2  6010              STR      r0,[r2,#0]
0007c4  e032              B        |L1.2092|
                  |L1.1990|
;;;839    	}
;;;840    else
;;;841    	{
;;;842    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;843    	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;844    	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
0007c6  7889              LDRB     r1,[r1,#2]  ; adc_ch
0007c8  0708              LSLS     r0,r1,#28
0007ca  2800              CMP      r0,#0
;;;845    	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
0007cc  6810              LDR      r0,[r2,#0]
0007ce  f02000ff          BIC      r0,r0,#0xff
0007d2  db01              BLT      |L1.2008|
0007d4  1c40              ADDS     r0,r0,#1              ;844
0007d6  e000              B        |L1.2010|
                  |L1.2008|
0007d8  1c80              ADDS     r0,r0,#2
                  |L1.2010|
0007da  6010              STR      r0,[r2,#0]
;;;846    
;;;847    
;;;848    	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
0007dc  4828              LDR      r0,|L1.2176|
0007de  6803              LDR      r3,[r0,#0]
0007e0  f0435380          ORR      r3,r3,#0x10000000
0007e4  6003              STR      r3,[r0,#0]
;;;849    	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
0007e6  6a03              LDR      r3,[r0,#0x20]
0007e8  f0434380          ORR      r3,r3,#0x40000000
0007ec  6203              STR      r3,[r0,#0x20]
;;;850    	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
0007ee  6e03              LDR      r3,[r0,#0x60]
0007f0  f0436380          ORR      r3,r3,#0x4000000
0007f4  6603              STR      r3,[r0,#0x60]
;;;851    
;;;852    	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
0007f6  07cb              LSLS     r3,r1,#31
;;;853    	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
0007f8  6943              LDR      r3,[r0,#0x14]
0007fa  d008              BEQ      |L1.2062|
0007fc  f0435380          ORR      r3,r3,#0x10000000
                  |L1.2048|
000800  6143              STR      r3,[r0,#0x14]
;;;854    
;;;855    	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
000802  078b              LSLS     r3,r1,#30
;;;856    	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
000804  6b43              LDR      r3,[r0,#0x34]
000806  d405              BMI      |L1.2068|
000808  f0234380          BIC      r3,r3,#0x40000000     ;855
00080c  e004              B        |L1.2072|
                  |L1.2062|
00080e  f0235380          BIC      r3,r3,#0x10000000     ;852
000812  e7f5              B        |L1.2048|
                  |L1.2068|
000814  f0434380          ORR      r3,r3,#0x40000000
                  |L1.2072|
000818  6343              STR      r3,[r0,#0x34]
;;;857    
;;;858    	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
00081a  0749              LSLS     r1,r1,#29
;;;859    	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
00081c  6f41              LDR      r1,[r0,#0x74]
00081e  d402              BMI      |L1.2086|
000820  f0216180          BIC      r1,r1,#0x4000000      ;858
000824  e001              B        |L1.2090|
                  |L1.2086|
000826  f0416180          ORR      r1,r1,#0x4000000
                  |L1.2090|
00082a  6741              STR      r1,[r0,#0x74]         ;858
                  |L1.2092|
;;;860    	}
;;;861    	
;;;862    
;;;863    
;;;864    
;;;865    LPC_ADC->ADCR |=  (1<<24);
00082c  6810              LDR      r0,[r2,#0]
00082e  f0407080          ORR      r0,r0,#0x1000000
000832  6010              STR      r0,[r2,#0]
                  |L1.2100|
;;;866    
;;;867    }
000834  e650              B        |L1.1240|
;;;868     /*
                          ENDP

                  restart_off PROC
;;;1195   //-----------------------------------------------
;;;1196   void restart_off(void)
000836  b510              PUSH     {r4,lr}
;;;1197   {
;;;1198   lc640_write_long(EE_TIME_PROC_GS_RESTART,0);
000838  2100              MOVS     r1,#0
00083a  20d0              MOVS     r0,#0xd0
00083c  f7fffffe          BL       lc640_write_long
;;;1199   lc640_write_long(EE_TIME_PROC_PS_RESTART,0);
000840  2100              MOVS     r1,#0
000842  e8bd4010          POP      {r4,lr}
000846  20d4              MOVS     r0,#0xd4
000848  f7ffbffe          B.W      lc640_write_long
;;;1200   }
;;;1201   
                          ENDP

                  ach_off_hndl PROC
;;;951    //драйвер функции выключения по амперчасам
;;;952    void ach_off_hndl(void)
00084c  b570              PUSH     {r4-r6,lr}
;;;953    {
;;;954    
;;;955    if((work_stat!=wsOFF)&&(ACH_OFF_EN))
00084e  4c1e              LDR      r4,|L1.2248|
;;;956    	{
;;;957    	milliAmperSecunda+=((long)load_I);
000850  481e              LDR      r0,|L1.2252|
000852  2500              MOVS     r5,#0                 ;955
000854  7821              LDRB     r1,[r4,#0]            ;955  ; work_stat
000856  b191              CBZ      r1,|L1.2174|
000858  491d              LDR      r1,|L1.2256|
00085a  8809              LDRH     r1,[r1,#0]            ;955  ; ACH_OFF_EN
00085c  b179              CBZ      r1,|L1.2174|
00085e  4a1d              LDR      r2,|L1.2260|
000860  6801              LDR      r1,[r0,#0]  ; milliAmperSecunda
000862  f9b22000          LDRSH    r2,[r2,#0]  ; load_I
000866  4411              ADD      r1,r1,r2
;;;958    	if(milliAmperSecunda>=3600L)
000868  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
00086a  f5b16f61          CMP      r1,#0xe10
00086e  db4f              BLT      |L1.2320|
;;;959    		{
;;;960    		milliAmperSecunda-=3600L;
;;;961    		AMPERCHAS+=1;
000870  4e19              LDR      r6,|L1.2264|
000872  f5a16161          SUB      r1,r1,#0xe10          ;960
000876  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
000878  6831              LDR      r1,[r6,#0]  ; AMPERCHAS
00087a  1c49              ADDS     r1,r1,#1
;;;962    		lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
00087c  e02e              B        |L1.2268|
                  |L1.2174|
00087e  e046              B        |L1.2318|
                  |L1.2176|
                          DCD      0x2009c000
                  |L1.2180|
                          DCD      avg_main_cnt
                  |L1.2184|
                          DCD      avg_num
                  |L1.2188|
                          DCD      num_of_dumm_src
                  |L1.2192|
                          DCD      num_of_max_src
                  |L1.2196|
                          DCD      NUMIST
                  |L1.2200|
                          DCD      bps
                  |L1.2204|
                          DCD      ||area_number.18||
                  |L1.2208|
                          DCD      i_avg_min
                  |L1.2212|
                          DCD      i_avg_max
                  |L1.2216|
                          DCD      i_avg_summ
                  |L1.2220|
                          DCD      i_avg
                  |L1.2224|
                          DCD      avg
                  |L1.2228|
                          DCD      bAVG
                  |L1.2232|
                          DCD      bAVG_CNT
                  |L1.2236|
                          DCD      ||.bss||+0x840
                  |L1.2240|
                          DCD      ||.bss||
                  |L1.2244|
                          DCD      0x40034000
                  |L1.2248|
                          DCD      work_stat
                  |L1.2252|
                          DCD      milliAmperSecunda
                  |L1.2256|
                          DCD      ACH_OFF_EN
                  |L1.2260|
                          DCD      load_I
                  |L1.2264|
                          DCD      AMPERCHAS
                  |L1.2268|
0008dc  f640401c          MOV      r0,#0xc1c
0008e0  6031              STR      r1,[r6,#0]  ; AMPERCHAS
0008e2  f7fffffe          BL       lc640_write_long
;;;963    
;;;964    		if(AMPERCHAS>=ACH_OFF_LEVEL)
0008e6  49fe              LDR      r1,|L1.3296|
0008e8  6830              LDR      r0,[r6,#0]  ; AMPERCHAS
0008ea  f9b11000          LDRSH    r1,[r1,#0]  ; ACH_OFF_LEVEL
0008ee  4288              CMP      r0,r1
0008f0  db0e              BLT      |L1.2320|
;;;965    			{
;;;966    			work_stat=wsOFF;
0008f2  7025              STRB     r5,[r4,#0]
;;;967    			restart_off();
0008f4  f7fffffe          BL       restart_off
;;;968    			tree_up(iProcIsComplete,1,0,0);
0008f8  2300              MOVS     r3,#0
0008fa  461a              MOV      r2,r3
0008fc  2101              MOVS     r1,#1
0008fe  207a              MOVS     r0,#0x7a
000900  f7fffffe          BL       tree_up
;;;969    			ret(0);
000904  e8bd4070          POP      {r4-r6,lr}
000908  2000              MOVS     r0,#0
00090a  f7ffbffe          B.W      ||ret||
                  |L1.2318|
;;;970    			}
;;;971    		}
;;;972    	}
;;;973    else 
;;;974    	{
;;;975    	milliAmperSecunda=0;
00090e  6005              STR      r5,[r0,#0]  ; milliAmperSecunda
                  |L1.2320|
;;;976    	}
;;;977    
;;;978    }
000910  bd70              POP      {r4-r6,pc}
;;;979     	
                          ENDP

                  curr_off_hndl PROC
;;;981    //драйвер функции выключения по снижению тока
;;;982    void curr_off_hndl(void)
000912  b570              PUSH     {r4-r6,lr}
;;;983    {
;;;984    
;;;985    if((work_stat!=wsOFF)&&(CURR_OFF_EN))
000914  4cf3              LDR      r4,|L1.3300|
;;;986    	{
;;;987    	if(curr_off_start_cnt<CUR_OFF_T_OFF)curr_off_start_cnt++;
;;;988    	else
;;;989    		{
;;;990    		signed int temp_I=0;
;;;991    		if(work_stat==wsGS)
;;;992    			{
;;;993    			temp_I=(signed int)I_ug_temp;
;;;994    			}
;;;995    		else if(work_stat==wsPS)
;;;996    			{
;;;997    			temp_I=(signed int)I_maxp;
;;;998    			}
;;;999    		temp_I*=(signed int)CUR_OFF_LEVEL_RELATIV;
;;;1000   		temp_I/=100;
;;;1001   		curr_off_temp=(short)temp_I;
;;;1002   		if(load_I<curr_off_temp)
;;;1003   			{
;;;1004   			curr_off_stop_cnt++;
000916  4af4              LDR      r2,|L1.3304|
000918  48f4              LDR      r0,|L1.3308|
00091a  7825              LDRB     r5,[r4,#0]            ;985  ; work_stat
00091c  2100              MOVS     r1,#0                 ;985
00091e  b3f5              CBZ      r5,|L1.2462|
000920  4bf3              LDR      r3,|L1.3312|
000922  881b              LDRH     r3,[r3,#0]            ;985  ; CURR_OFF_EN
000924  b3db              CBZ      r3,|L1.2462|
000926  4ef3              LDR      r6,|L1.3316|
000928  f9b03000          LDRSH    r3,[r0,#0]            ;987  ; curr_off_start_cnt
00092c  f9b66000          LDRSH    r6,[r6,#0]            ;987  ; CUR_OFF_T_OFF
000930  42b3              CMP      r3,r6                 ;987
000932  da02              BGE      |L1.2362|
000934  1c5b              ADDS     r3,r3,#1              ;987
000936  8003              STRH     r3,[r0,#0]            ;987
                  |L1.2360|
;;;1005   			if(curr_off_stop_cnt>=CUR_OFF_T_ON)
;;;1006   				{
;;;1007   				work_stat=wsOFF;
;;;1008   				restart_off();
;;;1009   				tree_up(iProcIsComplete,2,0,0);
;;;1010   				ret(0);
;;;1011   				}
;;;1012   			}
;;;1013   		else curr_off_stop_cnt=0;
;;;1014   		}
;;;1015   	}
;;;1016   else 
;;;1017   	{
;;;1018   	curr_off_start_cnt=0;
;;;1019   	curr_off_stop_cnt=0;
;;;1020   	}
;;;1021   }	
000938  bd70              POP      {r4-r6,pc}
                  |L1.2362|
00093a  2000              MOVS     r0,#0                 ;990
00093c  2d01              CMP      r5,#1                 ;991
00093e  d002              BEQ      |L1.2374|
000940  2d02              CMP      r5,#2                 ;995
000942  d002              BEQ      |L1.2378|
000944  e004              B        |L1.2384|
                  |L1.2374|
000946  48ec              LDR      r0,|L1.3320|
000948  e000              B        |L1.2380|
                  |L1.2378|
00094a  48ec              LDR      r0,|L1.3324|
                  |L1.2380|
00094c  f9b00000          LDRSH    r0,[r0,#0]            ;997  ; I_maxp
                  |L1.2384|
000950  4beb              LDR      r3,|L1.3328|
000952  f9b33000          LDRSH    r3,[r3,#0]            ;999  ; CUR_OFF_LEVEL_RELATIV
000956  4358              MULS     r0,r3,r0              ;999
000958  2364              MOVS     r3,#0x64              ;1000
00095a  fb90f0f3          SDIV     r0,r0,r3              ;1000
00095e  4be9              LDR      r3,|L1.3332|
000960  b200              SXTH     r0,r0                 ;1001
000962  8018              STRH     r0,[r3,#0]            ;1001
000964  4be8              LDR      r3,|L1.3336|
000966  f9b33000          LDRSH    r3,[r3,#0]            ;1002  ; load_I
00096a  4283              CMP      r3,r0                 ;1002
00096c  da16              BGE      |L1.2460|
00096e  8810              LDRH     r0,[r2,#0]            ;1004  ; curr_off_stop_cnt
000970  1c40              ADDS     r0,r0,#1              ;1004
000972  b200              SXTH     r0,r0                 ;1004
000974  8010              STRH     r0,[r2,#0]            ;1004
000976  4ae5              LDR      r2,|L1.3340|
000978  f9b22000          LDRSH    r2,[r2,#0]            ;1005  ; CUR_OFF_T_ON
00097c  4290              CMP      r0,r2                 ;1005
00097e  dbdb              BLT      |L1.2360|
000980  7021              STRB     r1,[r4,#0]            ;1007
000982  f7fffffe          BL       restart_off
000986  2300              MOVS     r3,#0                 ;1009
000988  461a              MOV      r2,r3                 ;1009
00098a  2102              MOVS     r1,#2                 ;1009
00098c  207a              MOVS     r0,#0x7a              ;1009
00098e  f7fffffe          BL       tree_up
000992  e8bd4070          POP      {r4-r6,lr}            ;1010
000996  2000              MOVS     r0,#0                 ;1010
000998  f7ffbffe          B.W      ||ret||
                  |L1.2460|
00099c  e000              B        |L1.2464|
                  |L1.2462|
00099e  e001              B        |L1.2468|
                  |L1.2464|
0009a0  8011              STRH     r1,[r2,#0]            ;1013
0009a2  bd70              POP      {r4-r6,pc}
                  |L1.2468|
0009a4  8001              STRH     r1,[r0,#0]            ;1018
0009a6  e7f9              B        |L1.2460|
;;;1022   
                          ENDP

                  time_hndl PROC
;;;1023   //-----------------------------------------------
;;;1024   void time_hndl(void) /*ГЦ раз в секунду*/
0009a8  e92d5ff0          PUSH     {r4-r12,lr}
;;;1025   {
;;;1026   if((REV_IS_ON)&&(AVT_REV_IS_ON))
;;;1027   	{
;;;1028   
;;;1029   	}
;;;1030   
;;;1031   
;;;1032   
;;;1033   
;;;1034   if(work_stat==wsGS)
0009ac  f8df8334          LDR      r8,|L1.3300|
;;;1035   	{
;;;1036   	time_proc++;
;;;1037   	if(((time_proc%600L)==0)&&(restart_enable==reON))
;;;1038   		{
;;;1039   		lc640_write_long(EE_TIME_PROC_GS_RESTART,time_proc);
;;;1040   		}
;;;1041   	if(time_proc_remain)
;;;1042   		{
;;;1043   		time_proc_remain--;
;;;1044   		}
;;;1045   	if((!time_proc_remain)&&(!T_PROC_GS_MODE))
;;;1046   		{
;;;1047   		work_stat=wsOFF;
;;;1048   		restart_off();
;;;1049   		tree_up(iProcIsComplete,0,0,0);
;;;1050   		ret(0);
;;;1051   		}
;;;1052   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0009b0  f8dfb35c          LDR      r11,|L1.3344|
;;;1053   		time_proc_phase++;
;;;1054   		
;;;1055   		if(proc_phase==ppFF) {
;;;1056   			REV_STAT=rsFF;
0009b4  4dd7              LDR      r5,|L1.3348|
0009b6  f8980000          LDRB     r0,[r8,#0]            ;1034  ; work_stat
0009ba  f8dfa35c          LDR      r10,|L1.3352|
0009be  2601              MOVS     r6,#1                 ;1034
;;;1057   			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;1058   				proc_phase=ppFF_P_REW;	
;;;1059   				time_proc_phase=0;
;;;1060   			}
;;;1061   		} else if(proc_phase==ppFF_P_REW) {
;;;1062   			if(time_proc_phase<AVT_REV_TIME_PAUSE)REV_STAT=rsFF;
0009c0  4fd6              LDR      r7,|L1.3356|
0009c2  2400              MOVS     r4,#0                 ;1041
0009c4  f44f7916          MOV      r9,#0x258             ;1037
0009c8  2801              CMP      r0,#1                 ;1034
0009ca  d162              BNE      |L1.2706|
0009cc  48d4              LDR      r0,|L1.3360|
0009ce  6801              LDR      r1,[r0,#0]            ;1036  ; time_proc
0009d0  1c49              ADDS     r1,r1,#1              ;1036
0009d2  fb91f2f9          SDIV     r2,r1,r9              ;1037
0009d6  6001              STR      r1,[r0,#0]            ;1037  ; time_proc
0009d8  fb091012          MLS      r0,r9,r2,r1           ;1037
0009dc  b930              CBNZ     r0,|L1.2540|
0009de  48d1              LDR      r0,|L1.3364|
0009e0  7800              LDRB     r0,[r0,#0]            ;1037  ; restart_enable
0009e2  2801              CMP      r0,#1                 ;1037
0009e4  d102              BNE      |L1.2540|
0009e6  20d0              MOVS     r0,#0xd0              ;1039
0009e8  f7fffffe          BL       lc640_write_long
                  |L1.2540|
0009ec  f8da1000          LDR      r1,[r10,#0]           ;1041  ; time_proc_remain
0009f0  4650              MOV      r0,r10                ;1041
0009f2  b109              CBZ      r1,|L1.2552|
0009f4  1e49              SUBS     r1,r1,#1              ;1043
0009f6  6001              STR      r1,[r0,#0]            ;1043  ; time_proc_remain
                  |L1.2552|
0009f8  4608              MOV      r0,r1                 ;1045
0009fa  49cb              LDR      r1,|L1.3368|
0009fc  f9b11000          LDRSH    r1,[r1,#0]            ;1045  ; T_PROC_GS_MODE
000a00  4308              ORRS     r0,r0,r1              ;1045
000a02  d10c              BNE      |L1.2590|
000a04  f8884000          STRB     r4,[r8,#0]            ;1047
000a08  f7fffffe          BL       restart_off
000a0c  2300              MOVS     r3,#0                 ;1049
000a0e  461a              MOV      r2,r3                 ;1049
000a10  4619              MOV      r1,r3                 ;1049
000a12  207a              MOVS     r0,#0x7a              ;1049
000a14  f7fffffe          BL       tree_up
000a18  2000              MOVS     r0,#0                 ;1050
000a1a  f7fffffe          BL       ||ret||
                  |L1.2590|
000a1e  48c3              LDR      r0,|L1.3372|
000a20  8800              LDRH     r0,[r0,#0]            ;1052  ; REV_IS_ON
000a22  b388              CBZ      r0,|L1.2696|
000a24  f8bb0000          LDRH     r0,[r11,#0]           ;1052  ; AVT_REV_IS_ON
000a28  b370              CBZ      r0,|L1.2696|
000a2a  4bc1              LDR      r3,|L1.3376|
000a2c  8818              LDRH     r0,[r3,#0]            ;1053  ; time_proc_phase
000a2e  1c40              ADDS     r0,r0,#1              ;1053
000a30  b201              SXTH     r1,r0                 ;1053
000a32  48c0              LDR      r0,|L1.3380|
000a34  8019              STRH     r1,[r3,#0]            ;1053
000a36  7802              LDRB     r2,[r0,#0]            ;1055  ; proc_phase
000a38  b132              CBZ      r2,|L1.2632|
000a3a  2a01              CMP      r2,#1                 ;1061
000a3c  d00b              BEQ      |L1.2646|
;;;1063   			else REV_STAT=rsREW;
;;;1064   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;1065   				proc_phase=ppREW;	
;;;1066   				time_proc_phase=0;
;;;1067   			}
;;;1068   		} else if(proc_phase==ppREW) {
000a3e  2a02              CMP      r2,#2
000a40  d014              BEQ      |L1.2668|
;;;1069   			REV_STAT=rsREW;
;;;1070   			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;1071   				proc_phase=ppREW_P_FF;	
;;;1072   				time_proc_phase=0;
;;;1073   			}
;;;1074   		} else if(proc_phase==ppREW_P_FF) {
000a42  2a03              CMP      r2,#3
000a44  d01a              BEQ      |L1.2684|
000a46  e024              B        |L1.2706|
                  |L1.2632|
000a48  4abb              LDR      r2,|L1.3384|
000a4a  702e              STRB     r6,[r5,#0]            ;1056
000a4c  8812              LDRH     r2,[r2,#0]            ;1057  ; AVT_REV_TIME_FF
000a4e  4291              CMP      r1,r2                 ;1057
000a50  db1f              BLT      |L1.2706|
000a52  7006              STRB     r6,[r0,#0]            ;1058
000a54  e01c              B        |L1.2704|
                  |L1.2646|
000a56  f9b72000          LDRSH    r2,[r7,#0]            ;1062  ; AVT_REV_TIME_PAUSE
000a5a  4291              CMP      r1,r2                 ;1062
000a5c  da01              BGE      |L1.2658|
000a5e  702e              STRB     r6,[r5,#0]            ;1062
000a60  e000              B        |L1.2660|
                  |L1.2658|
000a62  702c              STRB     r4,[r5,#0]            ;1063
                  |L1.2660|
000a64  db15              BLT      |L1.2706|
000a66  f04f0102          MOV      r1,#2                 ;1065
000a6a  e005              B        |L1.2680|
                  |L1.2668|
000a6c  4ab3              LDR      r2,|L1.3388|
000a6e  702c              STRB     r4,[r5,#0]            ;1069
000a70  8812              LDRH     r2,[r2,#0]            ;1070  ; AVT_REV_TIME_REW
000a72  4291              CMP      r1,r2                 ;1070
000a74  db0d              BLT      |L1.2706|
000a76  2103              MOVS     r1,#3                 ;1071
                  |L1.2680|
000a78  7001              STRB     r1,[r0,#0]            ;1065
000a7a  e009              B        |L1.2704|
                  |L1.2684|
;;;1075   			if(time_proc_phase<AVT_REV_TIME_PAUSE)REV_STAT=rsREW;
000a7c  f9b72000          LDRSH    r2,[r7,#0]  ; AVT_REV_TIME_PAUSE
000a80  4291              CMP      r1,r2
000a82  da02              BGE      |L1.2698|
000a84  702c              STRB     r4,[r5,#0]
000a86  e001              B        |L1.2700|
                  |L1.2696|
000a88  e003              B        |L1.2706|
                  |L1.2698|
;;;1076   			else REV_STAT=rsFF;
000a8a  702e              STRB     r6,[r5,#0]
                  |L1.2700|
;;;1077   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
000a8c  db01              BLT      |L1.2706|
;;;1078   				proc_phase=ppFF;	
000a8e  7004              STRB     r4,[r0,#0]
                  |L1.2704|
;;;1079   				time_proc_phase=0;
000a90  801c              STRH     r4,[r3,#0]
                  |L1.2706|
;;;1080   			}
;;;1081   		}
;;;1082   	}
;;;1083   	}
;;;1084   
;;;1085   
;;;1086   if(work_stat==wsPS)
000a92  f8980000          LDRB     r0,[r8,#0]  ; work_stat
000a96  2802              CMP      r0,#2
000a98  d157              BNE      |L1.2890|
;;;1087   	{
;;;1088   	time_proc++;
000a9a  48a1              LDR      r0,|L1.3360|
000a9c  6801              LDR      r1,[r0,#0]  ; time_proc
000a9e  1c49              ADDS     r1,r1,#1
;;;1089   	if(((time_proc%600L)==0)&&(restart_enable==reON))
000aa0  fb91f2f9          SDIV     r2,r1,r9
000aa4  6001              STR      r1,[r0,#0]  ; time_proc
000aa6  fb091012          MLS      r0,r9,r2,r1
000aaa  b930              CBNZ     r0,|L1.2746|
000aac  489d              LDR      r0,|L1.3364|
000aae  7800              LDRB     r0,[r0,#0]  ; restart_enable
000ab0  2801              CMP      r0,#1
000ab2  d102              BNE      |L1.2746|
;;;1090   		{
;;;1091   		lc640_write_long(EE_TIME_PROC_PS_RESTART,time_proc);
000ab4  20d4              MOVS     r0,#0xd4
000ab6  f7fffffe          BL       lc640_write_long
                  |L1.2746|
;;;1092   		}
;;;1093   	if(time_proc_remain)
000aba  f8da1000          LDR      r1,[r10,#0]  ; time_proc_remain
000abe  4650              MOV      r0,r10
000ac0  b109              CBZ      r1,|L1.2758|
;;;1094   		{
;;;1095   		time_proc_remain--;
000ac2  1e49              SUBS     r1,r1,#1
000ac4  6001              STR      r1,[r0,#0]  ; time_proc_remain
                  |L1.2758|
;;;1096   		}
;;;1097   	if((!time_proc_remain)&&(!T_PROC_PS_MODE))
000ac6  4608              MOV      r0,r1
000ac8  499d              LDR      r1,|L1.3392|
000aca  f9b11000          LDRSH    r1,[r1,#0]  ; T_PROC_PS_MODE
000ace  4308              ORRS     r0,r0,r1
000ad0  d10c              BNE      |L1.2796|
;;;1098   		{
;;;1099   		work_stat=wsOFF;
000ad2  f8884000          STRB     r4,[r8,#0]
;;;1100   		restart_off();
000ad6  f7fffffe          BL       restart_off
;;;1101   		tree_up(iProcIsComplete,0,0,0);
000ada  2300              MOVS     r3,#0
000adc  461a              MOV      r2,r3
000ade  4619              MOV      r1,r3
000ae0  207a              MOVS     r0,#0x7a
000ae2  f7fffffe          BL       tree_up
;;;1102   		ret(0);
000ae6  2000              MOVS     r0,#0
000ae8  f7fffffe          BL       ||ret||
                  |L1.2796|
;;;1103   		}
;;;1104   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000aec  488f              LDR      r0,|L1.3372|
000aee  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000af0  2800              CMP      r0,#0
000af2  d02a              BEQ      |L1.2890|
000af4  f8bb0000          LDRH     r0,[r11,#0]  ; AVT_REV_IS_ON
000af8  2800              CMP      r0,#0
000afa  d026              BEQ      |L1.2890|
;;;1105   		time_proc_phase++;
000afc  488c              LDR      r0,|L1.3376|
000afe  8801              LDRH     r1,[r0,#0]  ; time_proc_phase
000b00  1c49              ADDS     r1,r1,#1
000b02  b20a              SXTH     r2,r1
;;;1106   		
;;;1107   		if(proc_phase==ppFF) {
000b04  498b              LDR      r1,|L1.3380|
000b06  8002              STRH     r2,[r0,#0]            ;1105
000b08  780b              LDRB     r3,[r1,#0]  ; proc_phase
000b0a  b15b              CBZ      r3,|L1.2852|
;;;1108   			REV_STAT=rsFF;
;;;1109   			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;1110   				proc_phase=ppFF_P_REW;	
;;;1111   				time_proc_phase=0;
;;;1112   			}
;;;1113   		} else if(proc_phase==ppFF_P_REW) {
000b0c  2b01              CMP      r3,#1
000b0e  d010              BEQ      |L1.2866|
;;;1114   			if(time_proc_phase<AVT_REV_TIME_PAUSE)REV_STAT=rsFF;
;;;1115   			else REV_STAT=rsREW;
;;;1116   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;1117   				proc_phase=ppREW;	
;;;1118   				time_proc_phase=0;
;;;1119   			}
;;;1120   		} else if(proc_phase==ppREW) {
000b10  2b02              CMP      r3,#2
000b12  d01c              BEQ      |L1.2894|
;;;1121   			REV_STAT=rsREW;
;;;1122   			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;1123   				proc_phase=ppREW_P_FF;	
;;;1124   				time_proc_phase=0;
;;;1125   			}
;;;1126   		} else if(proc_phase==ppREW_P_FF) {
000b14  2b03              CMP      r3,#3
000b16  d118              BNE      |L1.2890|
;;;1127   			if(time_proc_phase<AVT_REV_TIME_PAUSE)REV_STAT=rsREW;
000b18  f9b73000          LDRSH    r3,[r7,#0]  ; AVT_REV_TIME_PAUSE
000b1c  429a              CMP      r2,r3
000b1e  da1e              BGE      |L1.2910|
000b20  702c              STRB     r4,[r5,#0]
000b22  e01d              B        |L1.2912|
                  |L1.2852|
000b24  4b84              LDR      r3,|L1.3384|
000b26  702e              STRB     r6,[r5,#0]            ;1108
000b28  881b              LDRH     r3,[r3,#0]            ;1109  ; AVT_REV_TIME_FF
000b2a  429a              CMP      r2,r3                 ;1109
000b2c  db0d              BLT      |L1.2890|
000b2e  700e              STRB     r6,[r1,#0]            ;1110
000b30  e00a              B        |L1.2888|
                  |L1.2866|
000b32  f9b73000          LDRSH    r3,[r7,#0]            ;1114  ; AVT_REV_TIME_PAUSE
000b36  429a              CMP      r2,r3                 ;1114
000b38  da01              BGE      |L1.2878|
000b3a  702e              STRB     r6,[r5,#0]            ;1114
000b3c  e000              B        |L1.2880|
                  |L1.2878|
000b3e  702c              STRB     r4,[r5,#0]            ;1115
                  |L1.2880|
000b40  db03              BLT      |L1.2890|
000b42  f04f0202          MOV      r2,#2                 ;1117
000b46  e008              B        |L1.2906|
                  |L1.2888|
000b48  8004              STRH     r4,[r0,#0]            ;1111
                  |L1.2890|
;;;1128   			else REV_STAT=rsFF;
;;;1129   			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;1130   				proc_phase=ppFF;	
;;;1131   				time_proc_phase=0;
;;;1132   			}
;;;1133   		}
;;;1134   	}
;;;1135   	}
;;;1136   
;;;1137   
;;;1138   
;;;1139   }
000b4a  e8bd9ff0          POP      {r4-r12,pc}
                  |L1.2894|
000b4e  4b7b              LDR      r3,|L1.3388|
000b50  702c              STRB     r4,[r5,#0]            ;1121
000b52  881b              LDRH     r3,[r3,#0]            ;1122  ; AVT_REV_TIME_REW
000b54  429a              CMP      r2,r3                 ;1122
000b56  dbf8              BLT      |L1.2890|
000b58  2203              MOVS     r2,#3                 ;1123
                  |L1.2906|
000b5a  700a              STRB     r2,[r1,#0]            ;1123
000b5c  e7f4              B        |L1.2888|
                  |L1.2910|
000b5e  702e              STRB     r6,[r5,#0]            ;1128
                  |L1.2912|
000b60  dbf3              BLT      |L1.2890|
000b62  700c              STRB     r4,[r1,#0]            ;1130
000b64  e7f0              B        |L1.2888|
;;;1140   
                          ENDP

                  cap_time_hndl PROC
;;;1141   //-----------------------------------------------
;;;1142   void cap_time_hndl(void) /*10 раз в секунду*/
000b66  b570              PUSH     {r4-r6,lr}
;;;1143   {
;;;1144   
;;;1145   if(work_stat==wsCAP)
000b68  485e              LDR      r0,|L1.3300|
000b6a  7800              LDRB     r0,[r0,#0]  ; work_stat
000b6c  2803              CMP      r0,#3
000b6e  d143              BNE      |L1.3064|
;;;1146   	{
;;;1147   	cap_time_proc++;
000b70  4974              LDR      r1,|L1.3396|
;;;1148   	if(cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME+CAP_PAUSE2_TIME))
000b72  4875              LDR      r0,|L1.3400|
000b74  680a              LDR      r2,[r1,#0]            ;1147  ; cap_time_proc
000b76  1c52              ADDS     r2,r2,#1              ;1147
000b78  600a              STR      r2,[r1,#0]  ; cap_time_proc
000b7a  f9b05000          LDRSH    r5,[r0,#0]  ; CAP_ZAR_TIME
000b7e  4873              LDR      r0,|L1.3404|
000b80  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
000b84  182b              ADDS     r3,r5,r0
000b86  4872              LDR      r0,|L1.3408|
000b88  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
000b8c  181c              ADDS     r4,r3,r0
000b8e  4871              LDR      r0,|L1.3412|
000b90  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
000b94  1826              ADDS     r6,r4,r0
;;;1149   		{
;;;1150   		cap_time_proc=0;
000b96  2000              MOVS     r0,#0
000b98  4296              CMP      r6,r2                 ;1148
000b9a  dc04              BGT      |L1.2982|
;;;1151   		CAP_COUNTER++;
000b9c  4e6e              LDR      r6,|L1.3416|
000b9e  6008              STR      r0,[r1,#0]  ; cap_time_proc
000ba0  8832              LDRH     r2,[r6,#0]  ; CAP_COUNTER
000ba2  1c52              ADDS     r2,r2,#1
000ba4  8032              STRH     r2,[r6,#0]
                  |L1.2982|
;;;1152   		}
;;;1153   
;;;1154   	if(cap_time_proc>=CAP_ZAR_TIME)bOFF=1;
000ba6  6809              LDR      r1,[r1,#0]  ; cap_time_proc
000ba8  4e6c              LDR      r6,|L1.3420|
000baa  2201              MOVS     r2,#1
000bac  42a9              CMP      r1,r5
000bae  db01              BLT      |L1.2996|
000bb0  7032              STRB     r2,[r6,#0]
000bb2  e000              B        |L1.2998|
                  |L1.2996|
;;;1155   	else bOFF=0;
000bb4  7030              STRB     r0,[r6,#0]
                  |L1.2998|
;;;1156   
;;;1157   	if((cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME))&&(cap_time_proc<(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME)))bRAZR=1;
000bb6  4d6a              LDR      r5,|L1.3424|
000bb8  428b              CMP      r3,r1
000bba  dc03              BGT      |L1.3012|
000bbc  428c              CMP      r4,r1
000bbe  dd01              BLE      |L1.3012|
000bc0  702a              STRB     r2,[r5,#0]
000bc2  e000              B        |L1.3014|
                  |L1.3012|
;;;1158   	else bRAZR=0;
000bc4  7028              STRB     r0,[r5,#0]
                  |L1.3014|
;;;1159   
;;;1160   
;;;1161   	CAP_TIME_SEC++;
000bc6  4967              LDR      r1,|L1.3428|
000bc8  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_SEC
000bca  1c52              ADDS     r2,r2,#1
000bcc  b212              SXTH     r2,r2
000bce  800a              STRH     r2,[r1,#0]
;;;1162   	if(CAP_TIME_SEC>=600)
000bd0  f5b27f16          CMP      r2,#0x258
000bd4  db10              BLT      |L1.3064|
;;;1163   		{
;;;1164   		CAP_TIME_SEC=0;
000bd6  8008              STRH     r0,[r1,#0]
;;;1165   		
;;;1166   		CAP_TIME_MIN++;
000bd8  4963              LDR      r1,|L1.3432|
000bda  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_MIN
000bdc  1c52              ADDS     r2,r2,#1
000bde  b212              SXTH     r2,r2
000be0  800a              STRH     r2,[r1,#0]
;;;1167   		if(CAP_TIME_MIN>=60)
000be2  2a3c              CMP      r2,#0x3c
000be4  db08              BLT      |L1.3064|
;;;1168   			{
;;;1169   			CAP_TIME_MIN=0;
000be6  8008              STRH     r0,[r1,#0]
;;;1170   	
;;;1171   			CAP_TIME_HOUR++;
000be8  4960              LDR      r1,|L1.3436|
000bea  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_HOUR
000bec  1c52              ADDS     r2,r2,#1
000bee  b212              SXTH     r2,r2
000bf0  800a              STRH     r2,[r1,#0]
;;;1172   			if(CAP_TIME_HOUR>=24)
000bf2  2a18              CMP      r2,#0x18
000bf4  db00              BLT      |L1.3064|
;;;1173   				{
;;;1174   				CAP_TIME_HOUR=0;
000bf6  8008              STRH     r0,[r1,#0]
                  |L1.3064|
;;;1175   				}
;;;1176   			}
;;;1177   		}
;;;1178   	}
;;;1179   
;;;1180   }
000bf8  bd70              POP      {r4-r6,pc}
;;;1181   
                          ENDP

                  restart_on_GS PROC
;;;1183   //-----------------------------------------------
;;;1184   void restart_on_GS(void)
000bfa  2101              MOVS     r1,#1
;;;1185   {
;;;1186   lc640_write_long(EE_TIME_PROC_GS_RESTART,1);
000bfc  20d0              MOVS     r0,#0xd0
000bfe  f7ffbffe          B.W      lc640_write_long
;;;1187   }
;;;1188   
                          ENDP

                  restart_on_PS PROC
;;;1189   //-----------------------------------------------
;;;1190   void restart_on_PS(void)
000c02  2101              MOVS     r1,#1
;;;1191   {
;;;1192   lc640_write_long(EE_TIME_PROC_PS_RESTART,1);
000c04  20d4              MOVS     r0,#0xd4
000c06  f7ffbffe          B.W      lc640_write_long
;;;1193   }
;;;1194   
                          ENDP

                  start_GS PROC
;;;1202   //-----------------------------------------------
;;;1203   void start_GS(void) {
000c0a  b570              PUSH     {r4-r6,lr}
;;;1204   
;;;1205   	if(SK_START==2)
000c0c  4858              LDR      r0,|L1.3440|
000c0e  8800              LDRH     r0,[r0,#0]  ; SK_START
000c10  2802              CMP      r0,#2
000c12  d10a              BNE      |L1.3114|
;;;1206   		{
;;;1207   		if(SK_START_LEV)
000c14  4857              LDR      r0,|L1.3444|
000c16  8801              LDRH     r1,[r0,#0]  ; SK_START_LEV
;;;1208   			{
;;;1209   			if(sk_in_drv_stat==1)
000c18  4857              LDR      r0,|L1.3448|
000c1a  f9b00000          LDRSH    r0,[r0,#0]
000c1e  b111              CBZ      r1,|L1.3110|
000c20  2801              CMP      r0,#1
000c22  d029              BEQ      |L1.3192|
000c24  e001              B        |L1.3114|
                  |L1.3110|
;;;1210   				{
;;;1211   				return;
;;;1212   				}
;;;1213   			}
;;;1214   		if(!SK_START_LEV)
;;;1215   			{
;;;1216   			if(sk_in_drv_stat==-1)
000c26  1c40              ADDS     r0,r0,#1
000c28  d026              BEQ      |L1.3192|
                  |L1.3114|
;;;1217   				{
;;;1218   				return;
;;;1219   				}
;;;1220   			}
;;;1221   		}
;;;1222   
;;;1223   	work_stat=wsGS;
000c2a  482e              LDR      r0,|L1.3300|
000c2c  2501              MOVS     r5,#1
;;;1224   	time_proc=0;
000c2e  2400              MOVS     r4,#0
000c30  7005              STRB     r5,[r0,#0]            ;1223
000c32  483b              LDR      r0,|L1.3360|
;;;1225   	time_proc_remain=T_PROC_GS;
000c34  4938              LDR      r1,|L1.3352|
000c36  6004              STR      r4,[r0,#0]  ; time_proc
000c38  4850              LDR      r0,|L1.3452|
000c3a  6800              LDR      r0,[r0,#0]  ; T_PROC_GS
;;;1226   	//index_set=0;
;;;1227   	restart_on_GS();
000c3c  6008              STR      r0,[r1,#0]  ; time_proc_remain
000c3e  f7fffffe          BL       restart_on_GS
;;;1228   	bFAST_REG=1;
000c42  484f              LDR      r0,|L1.3456|
000c44  7205              STRB     r5,[r0,#8]
;;;1229   	bU_VALID=0;
000c46  7244              STRB     r4,[r0,#9]
;;;1230   	bU_VALID_VALID=0;
000c48  7284              STRB     r4,[r0,#0xa]
;;;1231   	
;;;1232   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000c4a  4838              LDR      r0,|L1.3372|
000c4c  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000c4e  b140              CBZ      r0,|L1.3170|
000c50  482f              LDR      r0,|L1.3344|
000c52  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
000c54  b128              CBZ      r0,|L1.3170|
;;;1233   		time_proc_phase=0;
000c56  4836              LDR      r0,|L1.3376|
000c58  8004              STRH     r4,[r0,#0]
;;;1234   		proc_phase=ppFF;
000c5a  4836              LDR      r0,|L1.3380|
000c5c  7004              STRB     r4,[r0,#0]
;;;1235   		REV_STAT=rsFF;	
000c5e  482d              LDR      r0,|L1.3348|
000c60  7005              STRB     r5,[r0,#0]
                  |L1.3170|
;;;1236   	}
;;;1237   
;;;1238   	milliAmperSecunda=0L;
000c62  4848              LDR      r0,|L1.3460|
000c64  4621              MOV      r1,r4
;;;1239   	AMPERCHAS=0L;
000c66  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
000c68  4847              LDR      r0,|L1.3464|
;;;1240   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000c6a  6004              STR      r4,[r0,#0]  ; AMPERCHAS
000c6c  e8bd4070          POP      {r4-r6,lr}
000c70  f640401c          MOV      r0,#0xc1c
000c74  f7ffbffe          B.W      lc640_write_long
                  |L1.3192|
;;;1241   }
000c78  bd70              POP      {r4-r6,pc}
;;;1242   
                          ENDP

                  start_PS PROC
;;;1244   //-----------------------------------------------
;;;1245   void start_PS(void) {
000c7a  483d              LDR      r0,|L1.3440|
000c7c  b510              PUSH     {r4,lr}
;;;1246   
;;;1247   	if(SK_START==2)
000c7e  8800              LDRH     r0,[r0,#0]  ; SK_START
000c80  2802              CMP      r0,#2
000c82  d10a              BNE      |L1.3226|
;;;1248   		{
;;;1249   		if(SK_START_LEV)
000c84  483b              LDR      r0,|L1.3444|
000c86  8801              LDRH     r1,[r0,#0]  ; SK_START_LEV
;;;1250   			{
;;;1251   			if(sk_in_drv_stat==1)
000c88  483b              LDR      r0,|L1.3448|
000c8a  f9b00000          LDRSH    r0,[r0,#0]
000c8e  b111              CBZ      r1,|L1.3222|
000c90  2801              CMP      r0,#1
000c92  d07d              BEQ      |L1.3472|
000c94  e001              B        |L1.3226|
                  |L1.3222|
;;;1252   				{
;;;1253   				return;
;;;1254   				}
;;;1255   			}
;;;1256   		if(!SK_START_LEV)
;;;1257   			{
;;;1258   			if(sk_in_drv_stat==-1)
000c96  1c40              ADDS     r0,r0,#1
000c98  d07a              BEQ      |L1.3472|
                  |L1.3226|
;;;1259   				{
;;;1260   				return;
;;;1261   				}
;;;1262   			}
;;;1263   		}
;;;1264   
;;;1265   	work_stat=wsPS;
000c9a  4912              LDR      r1,|L1.3300|
000c9c  2002              MOVS     r0,#2
;;;1266   	time_proc=0;
000c9e  2400              MOVS     r4,#0
000ca0  7008              STRB     r0,[r1,#0]            ;1265
000ca2  481f              LDR      r0,|L1.3360|
;;;1267   	time_proc_remain=T_PROC_PS;
000ca4  491c              LDR      r1,|L1.3352|
000ca6  6004              STR      r4,[r0,#0]  ; time_proc
000ca8  4838              LDR      r0,|L1.3468|
000caa  6800              LDR      r0,[r0,#0]  ; T_PROC_PS
;;;1268   	//index_set=0;
;;;1269   	restart_on_PS();
000cac  6008              STR      r0,[r1,#0]  ; time_proc_remain
000cae  f7fffffe          BL       restart_on_PS
;;;1270   	bFAST_REG=1;
000cb2  4833              LDR      r0,|L1.3456|
000cb4  2101              MOVS     r1,#1
000cb6  7201              STRB     r1,[r0,#8]
;;;1271   	bU_VALID=0;
000cb8  7244              STRB     r4,[r0,#9]
;;;1272   	bU_VALID_VALID=0;
000cba  7284              STRB     r4,[r0,#0xa]
;;;1273   	
;;;1274   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000cbc  481b              LDR      r0,|L1.3372|
000cbe  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000cc0  b140              CBZ      r0,|L1.3284|
000cc2  4813              LDR      r0,|L1.3344|
000cc4  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
000cc6  b128              CBZ      r0,|L1.3284|
;;;1275   		time_proc_phase=0;
000cc8  4819              LDR      r0,|L1.3376|
000cca  8004              STRH     r4,[r0,#0]
;;;1276   		proc_phase=ppFF;
000ccc  4819              LDR      r0,|L1.3380|
000cce  7004              STRB     r4,[r0,#0]
;;;1277   		REV_STAT=rsFF;	
000cd0  4810              LDR      r0,|L1.3348|
000cd2  7001              STRB     r1,[r0,#0]
                  |L1.3284|
;;;1278   	}
;;;1279   	milliAmperSecunda=0L;
000cd4  482b              LDR      r0,|L1.3460|
000cd6  4621              MOV      r1,r4
;;;1280   	AMPERCHAS=0L;
000cd8  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
000cda  482b              LDR      r0,|L1.3464|
;;;1281   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000cdc  6004              STR      r4,[r0,#0]  ; AMPERCHAS
000cde  e058              B        |L1.3474|
                  |L1.3296|
                          DCD      ACH_OFF_LEVEL
                  |L1.3300|
                          DCD      work_stat
                  |L1.3304|
                          DCD      curr_off_stop_cnt
                  |L1.3308|
                          DCD      curr_off_start_cnt
                  |L1.3312|
                          DCD      CURR_OFF_EN
                  |L1.3316|
                          DCD      CUR_OFF_T_OFF
                  |L1.3320|
                          DCD      I_ug_temp
                  |L1.3324|
                          DCD      I_maxp
                  |L1.3328|
                          DCD      CUR_OFF_LEVEL_RELATIV
                  |L1.3332|
                          DCD      curr_off_temp
                  |L1.3336|
                          DCD      load_I
                  |L1.3340|
                          DCD      CUR_OFF_T_ON
                  |L1.3344|
                          DCD      AVT_REV_IS_ON
                  |L1.3348|
                          DCD      REV_STAT
                  |L1.3352|
                          DCD      time_proc_remain
                  |L1.3356|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.3360|
                          DCD      time_proc
                  |L1.3364|
                          DCD      restart_enable
                  |L1.3368|
                          DCD      T_PROC_GS_MODE
                  |L1.3372|
                          DCD      REV_IS_ON
                  |L1.3376|
                          DCD      time_proc_phase
                  |L1.3380|
                          DCD      proc_phase
                  |L1.3384|
                          DCD      AVT_REV_TIME_FF
                  |L1.3388|
                          DCD      AVT_REV_TIME_REW
                  |L1.3392|
                          DCD      T_PROC_PS_MODE
                  |L1.3396|
                          DCD      cap_time_proc
                  |L1.3400|
                          DCD      CAP_ZAR_TIME
                  |L1.3404|
                          DCD      CAP_PAUSE1_TIME
                  |L1.3408|
                          DCD      CAP_RAZR_TIME
                  |L1.3412|
                          DCD      CAP_PAUSE2_TIME
                  |L1.3416|
                          DCD      CAP_COUNTER
                  |L1.3420|
                          DCD      bOFF
                  |L1.3424|
                          DCD      bRAZR
                  |L1.3428|
                          DCD      CAP_TIME_SEC
                  |L1.3432|
                          DCD      CAP_TIME_MIN
                  |L1.3436|
                          DCD      CAP_TIME_HOUR
                  |L1.3440|
                          DCD      SK_START
                  |L1.3444|
                          DCD      SK_START_LEV
                  |L1.3448|
                          DCD      sk_in_drv_stat
                  |L1.3452|
                          DCD      T_PROC_GS
                  |L1.3456|
                          DCD      ||area_number.18||
                  |L1.3460|
                          DCD      milliAmperSecunda
                  |L1.3464|
                          DCD      AMPERCHAS
                  |L1.3468|
                          DCD      T_PROC_PS
                  |L1.3472|
000d90  e005              B        |L1.3486|
                  |L1.3474|
000d92  e8bd4010          POP      {r4,lr}
000d96  f640401c          MOV      r0,#0xc1c
000d9a  f7ffbffe          B.W      lc640_write_long
                  |L1.3486|
;;;1282   }
000d9e  bd10              POP      {r4,pc}
;;;1283   
                          ENDP

                  start_CAP PROC
;;;1284   //-----------------------------------------------
;;;1285   void start_CAP(void) {
000da0  49fa              LDR      r1,|L1.4492|
;;;1286   	work_stat=wsCAP;
000da2  2003              MOVS     r0,#3
000da4  7008              STRB     r0,[r1,#0]
;;;1287   }
000da6  4770              BX       lr
;;;1288   
                          ENDP

                  pause_CAP PROC
;;;1289   //-----------------------------------------------
;;;1290   void pause_CAP(void) {
000da8  49f8              LDR      r1,|L1.4492|
;;;1291   	work_stat=wsOFF;
000daa  2000              MOVS     r0,#0
000dac  7008              STRB     r0,[r1,#0]
;;;1292   }
000dae  4770              BX       lr
;;;1293   
                          ENDP

                  stop_CAP PROC
;;;1294   //-----------------------------------------------
;;;1295   void stop_CAP(void) {
000db0  49f6              LDR      r1,|L1.4492|
;;;1296   	work_stat=wsOFF;
000db2  2000              MOVS     r0,#0
000db4  7008              STRB     r0,[r1,#0]
;;;1297   
;;;1298   }
000db6  4770              BX       lr
;;;1299   
                          ENDP

                  ramModbusCnt_hndl PROC
;;;1300   //-----------------------------------------------
;;;1301   void ramModbusCnt_hndl(void)  
000db8  48f5              LDR      r0,|L1.4496|
;;;1302   {
;;;1303   if(ramModbusCnt) ramModbusCnt--;
000dba  f9b01000          LDRSH    r1,[r0,#0]  ; ramModbusCnt
000dbe  b111              CBZ      r1,|L1.3526|
000dc0  1e49              SUBS     r1,r1,#1
000dc2  8001              STRH     r1,[r0,#0]
;;;1304   else 
;;;1305   	{
;;;1306   	I_ug_ram=0;
;;;1307   	U_up_ram=0;
;;;1308   	}	
;;;1309   }
000dc4  4770              BX       lr
                  |L1.3526|
000dc6  49f3              LDR      r1,|L1.4500|
000dc8  2000              MOVS     r0,#0                 ;1306
000dca  8008              STRH     r0,[r1,#0]            ;1306
000dcc  49f2              LDR      r1,|L1.4504|
000dce  8008              STRH     r0,[r1,#0]            ;1307
000dd0  4770              BX       lr
;;;1310   
                          ENDP

                  reset_CAP PROC
;;;1311   //-----------------------------------------------
;;;1312   void reset_CAP(void) {
000dd2  49ee              LDR      r1,|L1.4492|
;;;1313   	work_stat=wsOFF;
000dd4  2000              MOVS     r0,#0
000dd6  7008              STRB     r0,[r1,#0]
;;;1314   	cap_time_proc=0;
000dd8  49f0              LDR      r1,|L1.4508|
;;;1315   	CAP_COUNTER=0;
000dda  6008              STR      r0,[r1,#0]  ; cap_time_proc
000ddc  49f0              LDR      r1,|L1.4512|
000dde  8008              STRH     r0,[r1,#0]
;;;1316   	CAP_TIME_SEC=0;
000de0  49f0              LDR      r1,|L1.4516|
000de2  8008              STRH     r0,[r1,#0]
;;;1317   	CAP_TIME_MIN=0;
000de4  49f0              LDR      r1,|L1.4520|
000de6  8008              STRH     r0,[r1,#0]
;;;1318   	CAP_TIME_HOUR=0;
000de8  49f0              LDR      r1,|L1.4524|
000dea  8008              STRH     r0,[r1,#0]
;;;1319   }
000dec  4770              BX       lr
;;;1320   
                          ENDP

                  stop_proc PROC
;;;1321   //-----------------------------------------------
;;;1322   void stop_proc(void)
000dee  49e7              LDR      r1,|L1.4492|
;;;1323   {
;;;1324   work_stat=wsOFF;
000df0  2000              MOVS     r0,#0
000df2  7008              STRB     r0,[r1,#0]
;;;1325   restart_off();
000df4  e7fe              B        restart_off
;;;1326   }
;;;1327   
                          ENDP

                  find_U_curve PROC
;;;1328   //-----------------------------------------------
;;;1329   short find_U_curve(signed short in)
000df6  e92d41f0          PUSH     {r4-r8,lr}
;;;1330   {
;;;1331   short ii,i=0,out=0;
000dfa  2400              MOVS     r4,#0
000dfc  4606              MOV      r6,r0                 ;1330
;;;1332   
;;;1333   ii=0;
;;;1334   
;;;1335   if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) >= in)
000dfe  f44f75fa          MOV      r5,#0x1f4
000e02  46a0              MOV      r8,r4                 ;1331
000e04  4627              MOV      r7,r4                 ;1333
000e06  4628              MOV      r0,r5
000e08  f7fffffe          BL       lc640_read_int
000e0c  42b0              CMP      r0,r6
000e0e  da28              BGE      |L1.3682|
                  |L1.3600|
;;;1336   	{
;;;1337   	out=0;
;;;1338   	}
;;;1339   else 
;;;1340   	{
;;;1341   	for (ii=0;ii<=200;ii+=10)
;;;1342   		{
;;;1343   		if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000e10  eb050047          ADD      r0,r5,r7,LSL #1
000e14  f7fffffe          BL       lc640_read_int
000e18  42b0              CMP      r0,r6
000e1a  dc00              BGT      |L1.3614|
;;;1344   			{
;;;1345   			i=ii;
000e1c  463c              MOV      r4,r7
                  |L1.3614|
000e1e  370a              ADDS     r7,r7,#0xa            ;1341
000e20  b23f              SXTH     r7,r7                 ;1341
000e22  2fc8              CMP      r7,#0xc8              ;1341
000e24  ddf4              BLE      |L1.3600|
;;;1346   			}
;;;1347   		else continue;
;;;1348   		}
;;;1349   	if(i<200)
000e26  2cc8              CMP      r4,#0xc8
000e28  da0e              BGE      |L1.3656|
;;;1350   		{
;;;1351   		for (ii=i;ii<i+10;ii++)
000e2a  f104070a          ADD      r7,r4,#0xa
000e2e  e008              B        |L1.3650|
                  |L1.3632|
;;;1352   			{
;;;1353   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000e30  eb050044          ADD      r0,r5,r4,LSL #1
000e34  f7fffffe          BL       lc640_read_int
000e38  42b0              CMP      r0,r6
000e3a  dc00              BGT      |L1.3646|
;;;1354   				{
;;;1355   				out=ii;
000e3c  46a0              MOV      r8,r4
                  |L1.3646|
000e3e  1c64              ADDS     r4,r4,#1              ;1351
000e40  b224              SXTH     r4,r4                 ;1351
                  |L1.3650|
000e42  42bc              CMP      r4,r7                 ;1351
000e44  dbf4              BLT      |L1.3632|
000e46  e00c              B        |L1.3682|
                  |L1.3656|
;;;1356   				}
;;;1357   			else continue;
;;;1358   			}
;;;1359   		}
;;;1360   	else 
;;;1361   		{
;;;1362   		for (ii=200;ii<=202;ii++)
000e48  f05f04c8          MOVS.W   r4,#0xc8
                  |L1.3660|
;;;1363   			{
;;;1364   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000e4c  eb050044          ADD      r0,r5,r4,LSL #1
000e50  f7fffffe          BL       lc640_read_int
000e54  42b0              CMP      r0,r6
000e56  dc00              BGT      |L1.3674|
;;;1365   				{
;;;1366   				out=ii;
000e58  46a0              MOV      r8,r4
                  |L1.3674|
000e5a  1c64              ADDS     r4,r4,#1              ;1362
000e5c  b224              SXTH     r4,r4                 ;1362
000e5e  2cca              CMP      r4,#0xca              ;1362
000e60  ddf4              BLE      |L1.3660|
                  |L1.3682|
;;;1367   				}
;;;1368   			else continue;
;;;1369   			}
;;;1370   	
;;;1371   	
;;;1372   		}
;;;1373   	}
;;;1374   
;;;1375   return out;
000e62  4640              MOV      r0,r8
;;;1376   }
000e64  e4e6              B        |L1.2100|
;;;1377   
                          ENDP

                  find_I_curve PROC
;;;1378   //-----------------------------------------------
;;;1379   short find_I_curve(signed short in)
000e66  e92d41f0          PUSH     {r4-r8,lr}
;;;1380   {
;;;1381   short ii,i=0,out=0;
000e6a  2400              MOVS     r4,#0
000e6c  4606              MOV      r6,r0                 ;1380
;;;1382   
;;;1383   ii=0;
;;;1384   
;;;1385   if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) >= in)
000e6e  f44f757a          MOV      r5,#0x3e8
000e72  46a0              MOV      r8,r4                 ;1381
000e74  4627              MOV      r7,r4                 ;1383
000e76  4628              MOV      r0,r5
000e78  f7fffffe          BL       lc640_read_int
000e7c  42b0              CMP      r0,r6
000e7e  da28              BGE      |L1.3794|
                  |L1.3712|
;;;1386   	{
;;;1387   	out=0;
;;;1388   	}
;;;1389   else 
;;;1390   	{
;;;1391   	for (ii=0;ii<=200;ii+=10)
;;;1392   		{
;;;1393   		if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000e80  eb050047          ADD      r0,r5,r7,LSL #1
000e84  f7fffffe          BL       lc640_read_int
000e88  42b0              CMP      r0,r6
000e8a  dc00              BGT      |L1.3726|
;;;1394   			{
;;;1395   			i=ii;
000e8c  463c              MOV      r4,r7
                  |L1.3726|
000e8e  370a              ADDS     r7,r7,#0xa            ;1391
000e90  b23f              SXTH     r7,r7                 ;1391
000e92  2fc8              CMP      r7,#0xc8              ;1391
000e94  ddf4              BLE      |L1.3712|
;;;1396   			}
;;;1397   		else continue;
;;;1398   		}
;;;1399   	
;;;1400   	if(i<200)
000e96  2cc8              CMP      r4,#0xc8
000e98  da0e              BGE      |L1.3768|
;;;1401   		{
;;;1402   		for (ii=i;ii<i+10;ii++)
000e9a  f104070a          ADD      r7,r4,#0xa
000e9e  e008              B        |L1.3762|
                  |L1.3744|
;;;1403   			{
;;;1404   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000ea0  eb050044          ADD      r0,r5,r4,LSL #1
000ea4  f7fffffe          BL       lc640_read_int
000ea8  42b0              CMP      r0,r6
000eaa  dc00              BGT      |L1.3758|
;;;1405   				{
;;;1406   				out=ii;
000eac  46a0              MOV      r8,r4
                  |L1.3758|
000eae  1c64              ADDS     r4,r4,#1              ;1402
000eb0  b224              SXTH     r4,r4                 ;1402
                  |L1.3762|
000eb2  42bc              CMP      r4,r7                 ;1402
000eb4  dbf4              BLT      |L1.3744|
000eb6  e00c              B        |L1.3794|
                  |L1.3768|
;;;1407   				}
;;;1408   			else continue;
;;;1409   			}
;;;1410   		}
;;;1411   	else 
;;;1412   		{
;;;1413   		for (ii=200;ii<=202;ii++)
000eb8  f05f04c8          MOVS.W   r4,#0xc8
                  |L1.3772|
;;;1414   			{
;;;1415   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000ebc  eb050044          ADD      r0,r5,r4,LSL #1
000ec0  f7fffffe          BL       lc640_read_int
000ec4  42b0              CMP      r0,r6
000ec6  dc00              BGT      |L1.3786|
;;;1416   				{
;;;1417   				out=ii;
000ec8  46a0              MOV      r8,r4
                  |L1.3786|
000eca  1c64              ADDS     r4,r4,#1              ;1413
000ecc  b224              SXTH     r4,r4                 ;1413
000ece  2cca              CMP      r4,#0xca              ;1413
000ed0  ddf4              BLE      |L1.3772|
                  |L1.3794|
;;;1418   				}
;;;1419   			else continue;
;;;1420   			}
;;;1421   		}
;;;1422   	}
;;;1423   return out;
000ed2  4640              MOV      r0,r8
;;;1424   }
000ed4  e4ae              B        |L1.2100|
;;;1425   
                          ENDP

                  viz_hndl PROC
;;;1427   //-----------------------------------------------
;;;1428   void viz_hndl(void)
000ed6  e92d5ff0          PUSH     {r4-r12,lr}
;;;1429   {
;;;1430   if(ind==iK_viz_u)
000eda  f8df92d4          LDR      r9,|L1.4528|
;;;1431   	{
;;;1432   	if(viz_stat==vsON)
;;;1433   		{
;;;1434   		viz_stat_cnt++;
;;;1435   		if(viz_stat_cnt>=10221)
;;;1436   			{
;;;1437   			viz_stat=vsOFF;
;;;1438   			lc640_write_int(EE_U_CURVE_IS_ON,0xabcd);
;;;1439   			//ind=iK_viz_sel;
;;;1440   			tree_down(0,0);
;;;1441   			}
;;;1442   		tst_pwm_i=1022;
;;;1443   		tst_pwm_u=(viz_stat_cnt/50)*5;
000ede  4fb5              LDR      r7,|L1.4532|
000ee0  4eb5              LDR      r6,|L1.4536|
000ee2  f8990000          LDRB     r0,[r9,#0]            ;1430  ; a_ind
000ee6  4cb5              LDR      r4,|L1.4540|
000ee8  2532              MOVS     r5,#0x32
000eea  f24278ed          MOV      r8,#0x27ed            ;1435
000eee  f04f0a00          MOV      r10,#0                ;1437
000ef2  f2403bfe          MOV      r11,#0x3fe            ;1442
000ef6  2846              CMP      r0,#0x46              ;1430
000ef8  d12a              BNE      |L1.3920|
000efa  7830              LDRB     r0,[r6,#0]            ;1432  ; viz_stat
000efc  2801              CMP      r0,#1                 ;1432
000efe  d158              BNE      |L1.4018|
000f00  8820              LDRH     r0,[r4,#0]            ;1434  ; viz_stat_cnt
000f02  1c40              ADDS     r0,r0,#1              ;1434
000f04  b200              SXTH     r0,r0                 ;1434
000f06  8020              STRH     r0,[r4,#0]            ;1434
000f08  4540              CMP      r0,r8                 ;1435
000f0a  db09              BLT      |L1.3872|
000f0c  f886a000          STRB     r10,[r6,#0]           ;1437
000f10  49ab              LDR      r1,|L1.4544|
000f12  20ac              MOVS     r0,#0xac              ;1438
000f14  f7fffffe          BL       lc640_write_int
000f18  2100              MOVS     r1,#0                 ;1440
000f1a  4608              MOV      r0,r1                 ;1440
000f1c  f7fffffe          BL       tree_down
                  |L1.3872|
000f20  49a8              LDR      r1,|L1.4548|
000f22  f8a1b000          STRH     r11,[r1,#0]           ;1442
000f26  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000f2a  fb91f0f5          SDIV     r0,r1,r5
;;;1444   		if(viz_stat_cnt%50==49)
000f2e  fb051110          MLS      r1,r5,r0,r1
000f32  eb000280          ADD      r2,r0,r0,LSL #2       ;1443
000f36  803a              STRH     r2,[r7,#0]            ;1443
000f38  2931              CMP      r1,#0x31
000f3a  d109              BNE      |L1.3920|
;;;1445   			{
;;;1446   			lc640_write_int(SEKTOR_KURVE_U+((viz_stat_cnt/50)*2),load_U);
000f3c  f44f71fa          MOV      r1,#0x1f4
000f40  eb010040          ADD      r0,r1,r0,LSL #1
000f44  49a0              LDR      r1,|L1.4552|
000f46  b200              SXTH     r0,r0
000f48  f9b11000          LDRSH    r1,[r1,#0]  ; load_U
000f4c  f7fffffe          BL       lc640_write_int
                  |L1.3920|
;;;1447   			}
;;;1448   		}
;;;1449   	}
;;;1450   
;;;1451   if(ind==iK_viz_i)
000f50  f8990000          LDRB     r0,[r9,#0]  ; a_ind
000f54  2845              CMP      r0,#0x45
000f56  d12c              BNE      |L1.4018|
;;;1452   	{
;;;1453   	if(viz_stat==vsON)
000f58  7830              LDRB     r0,[r6,#0]  ; viz_stat
000f5a  2801              CMP      r0,#1
000f5c  d129              BNE      |L1.4018|
;;;1454   		{
;;;1455   		viz_stat_cnt++;
000f5e  8820              LDRH     r0,[r4,#0]  ; viz_stat_cnt
000f60  1c40              ADDS     r0,r0,#1
000f62  b200              SXTH     r0,r0
000f64  8020              STRH     r0,[r4,#0]
;;;1456   		if(viz_stat_cnt>=10221)
000f66  4540              CMP      r0,r8
000f68  db09              BLT      |L1.3966|
;;;1457   			{
;;;1458   			viz_stat=vsOFF;
000f6a  f886a000          STRB     r10,[r6,#0]
;;;1459   			lc640_write_int(EE_I_CURVE_IS_ON,0xabcd);
000f6e  4994              LDR      r1,|L1.4544|
000f70  20ae              MOVS     r0,#0xae
000f72  f7fffffe          BL       lc640_write_int
;;;1460   			//ind=iK_viz_sel;
;;;1461   			tree_down(0,0);
000f76  2100              MOVS     r1,#0
000f78  4608              MOV      r0,r1
000f7a  f7fffffe          BL       tree_down
                  |L1.3966|
;;;1462   			}
;;;1463   		tst_pwm_u=1022;
000f7e  f8a7b000          STRH     r11,[r7,#0]
;;;1464   		tst_pwm_i=(viz_stat_cnt/50)*5;
000f82  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000f86  4b8f              LDR      r3,|L1.4548|
000f88  fb91f0f5          SDIV     r0,r1,r5
;;;1465   		if(viz_stat_cnt%50==49)
000f8c  fb051110          MLS      r1,r5,r0,r1
000f90  eb000280          ADD      r2,r0,r0,LSL #2       ;1464
000f94  801a              STRH     r2,[r3,#0]            ;1464
000f96  2931              CMP      r1,#0x31
000f98  d10b              BNE      |L1.4018|
;;;1466   			{
;;;1467   			lc640_write_int(SEKTOR_KURVE_I+((viz_stat_cnt/50)*2),load_I);
000f9a  f44f717a          MOV      r1,#0x3e8
000f9e  eb010040          ADD      r0,r1,r0,LSL #1
000fa2  498a              LDR      r1,|L1.4556|
000fa4  b200              SXTH     r0,r0
000fa6  f9b11000          LDRSH    r1,[r1,#0]  ; load_I
000faa  e8bd5ff0          POP      {r4-r12,lr}
000fae  f7ffbffe          B.W      lc640_write_int
                  |L1.4018|
;;;1468   			}
;;;1469   		}
;;;1470   	}
;;;1471   }
000fb2  e5ca              B        |L1.2890|
;;;1472   
                          ENDP

                  bps_hndl PROC
;;;1475   //-----------------------------------------------
;;;1476   void bps_hndl(void) /*ГЦ, 10 раз в секунду*/
000fb4  e92d5ffc          PUSH     {r2-r12,lr}
;;;1477   {
;;;1478   char /*ptr__,*/i;
;;;1479   
;;;1480   if((REV_IS_ON)&&(AVT_REV_IS_ON)) {
000fb8  4885              LDR      r0,|L1.4560|
;;;1481   	if(work_stat==wsGS) {
000fba  f8dfa1d0          LDR      r10,|L1.4492|
000fbe  8800              LDRH     r0,[r0,#0]            ;1480  ; REV_IS_ON
000fc0  b328              CBZ      r0,|L1.4110|
000fc2  4884              LDR      r0,|L1.4564|
000fc4  8800              LDRH     r0,[r0,#0]            ;1480  ; AVT_REV_IS_ON
000fc6  b310              CBZ      r0,|L1.4110|
;;;1482   		if(REV_STAT==rsFF) 	I_ug_temp=AVT_REV_I_NOM_FF;
000fc8  4883              LDR      r0,|L1.4568|
000fca  f89a3000          LDRB     r3,[r10,#0]           ;1481  ; work_stat
000fce  f9b01000          LDRSH    r1,[r0,#0]
000fd2  4882              LDR      r0,|L1.4572|
000fd4  2b01              CMP      r3,#1                 ;1481
000fd6  7800              LDRB     r0,[r0,#0]
000fd8  d007              BEQ      |L1.4074|
;;;1483   		else if (REV_STAT==rsREW) I_ug_temp=AVT_REV_I_NOM_REW;
;;;1484   	} else if (work_stat==wsPS) {
;;;1485   		if(REV_STAT==rsFF) 	U_up_temp=AVT_REV_U_NOM_FF;
000fda  4a81              LDR      r2,|L1.4576|
000fdc  2b02              CMP      r3,#2                 ;1484
000fde  f9b22000          LDRSH    r2,[r2,#0]
000fe2  d00b              BEQ      |L1.4092|
;;;1486   		else if (REV_STAT==rsREW) U_up_temp=AVT_REV_U_NOM_REW;
;;;1487   	} else {
;;;1488   		U_up_temp=AVT_REV_U_NOM_FF;
000fe4  487f              LDR      r0,|L1.4580|
000fe6  8002              STRH     r2,[r0,#0]
;;;1489   		I_ug_temp=AVT_REV_I_NOM_FF;
000fe8  e003              B        |L1.4082|
                  |L1.4074|
000fea  2801              CMP      r0,#1                 ;1482
000fec  d001              BEQ      |L1.4082|
000fee  b110              CBZ      r0,|L1.4086|
000ff0  e023              B        |L1.4154|
                  |L1.4082|
000ff2  487d              LDR      r0,|L1.4584|
000ff4  e020              B        |L1.4152|
                  |L1.4086|
000ff6  487d              LDR      r0,|L1.4588|
000ff8  8801              LDRH     r1,[r0,#0]            ;1483  ; AVT_REV_I_NOM_REW
000ffa  e7fa              B        |L1.4082|
                  |L1.4092|
000ffc  2801              CMP      r0,#1                 ;1485
000ffe  d001              BEQ      |L1.4100|
001000  b118              CBZ      r0,|L1.4106|
001002  e01a              B        |L1.4154|
                  |L1.4100|
001004  4877              LDR      r0,|L1.4580|
001006  8002              STRH     r2,[r0,#0]            ;1485
001008  e017              B        |L1.4154|
                  |L1.4106|
00100a  4879              LDR      r0,|L1.4592|
00100c  e012              B        |L1.4148|
                  |L1.4110|
;;;1490   	}
;;;1491   } else {
;;;1492   
;;;1493   if(fiks_stat_I==2)I_ug_temp=I_ug3;
00100e  4879              LDR      r0,|L1.4596|
001010  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_I
001014  2802              CMP      r0,#2
001016  d068              BEQ      |L1.4330|
;;;1494   else if(fiks_stat_I==1)I_ug_temp=I_ug2;
001018  2801              CMP      r0,#1
00101a  d068              BEQ      |L1.4334|
;;;1495   else I_ug_temp=I_ug;
00101c  4876              LDR      r0,|L1.4600|
                  |L1.4126|
00101e  8801              LDRH     r1,[r0,#0]            ;1494  ; I_ug2
001020  4871              LDR      r0,|L1.4584|
001022  8001              STRH     r1,[r0,#0]            ;1494
;;;1496   
;;;1497   if(fiks_stat_U==2)U_up_temp=U_up3;
001024  4875              LDR      r0,|L1.4604|
001026  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_U
00102a  2802              CMP      r0,#2
00102c  d061              BEQ      |L1.4338|
;;;1498   	else if(fiks_stat_U==1)U_up_temp=U_up2;
00102e  2801              CMP      r0,#1
001030  d061              BEQ      |L1.4342|
;;;1499   	else U_up_temp=U_up;
001032  4873              LDR      r0,|L1.4608|
                  |L1.4148|
001034  8801              LDRH     r1,[r0,#0]            ;1498  ; U_up2
001036  486b              LDR      r0,|L1.4580|
                  |L1.4152|
001038  8001              STRH     r1,[r0,#0]            ;1498
                  |L1.4154|
;;;1500   
;;;1501   }
;;;1502   	
;;;1503   gran(&I_ug_temp,0/*I_MIN_IPS*/,I_MAX_IPS);
00103a  4872              LDR      r0,|L1.4612|
00103c  2100              MOVS     r1,#0
00103e  f9b02000          LDRSH    r2,[r0,#0]  ; I_MAX_IPS
001042  4869              LDR      r0,|L1.4584|
001044  f7fffffe          BL       gran
;;;1504   gran(&U_up_temp,0/*U_MIN*/,U_MAX);
001048  486f              LDR      r0,|L1.4616|
00104a  2100              MOVS     r1,#0
00104c  f9b02000          LDRSH    r2,[r0,#0]  ; U_MAX
001050  4864              LDR      r0,|L1.4580|
001052  f7fffffe          BL       gran
;;;1505   
;;;1506   if(sh_cnt0<10) {
001056  4e6d              LDR      r6,|L1.4620|
001058  2500              MOVS     r5,#0                 ;1480
00105a  f04f0901          MOV      r9,#1                 ;1481
00105e  7970              LDRB     r0,[r6,#5]  ; sh_cnt0
001060  280a              CMP      r0,#0xa
001062  d212              BCS      |L1.4234|
;;;1507   	sh_cnt0++;
001064  1c40              ADDS     r0,r0,#1
001066  b2c0              UXTB     r0,r0
001068  7170              STRB     r0,[r6,#5]
;;;1508   	if(sh_cnt0>=10) {
00106a  280a              CMP      r0,#0xa
00106c  d30d              BCC      |L1.4234|
;;;1509   		sh_cnt0=0;
00106e  7175              STRB     r5,[r6,#5]
;;;1510   		b1Hz_sh=1;
001070  f8869006          STRB     r9,[r6,#6]
;;;1511   		if(sh_cnt1<5) {
001074  79f1              LDRB     r1,[r6,#7]  ; sh_cnt1
001076  4648              MOV      r0,r9                 ;1510
001078  2905              CMP      r1,#5
00107a  d206              BCS      |L1.4234|
;;;1512   			sh_cnt1++;
00107c  1c49              ADDS     r1,r1,#1
00107e  b2c9              UXTB     r1,r1
001080  71f1              STRB     r1,[r6,#7]
;;;1513   			if(sh_cnt1>=5) {
001082  2905              CMP      r1,#5
001084  d301              BCC      |L1.4234|
;;;1514   			 	sh_cnt1=0;
001086  71f5              STRB     r5,[r6,#7]
;;;1515   				bPRECESSION_REG=1;
001088  72f0              STRB     r0,[r6,#0xb]
                  |L1.4234|
;;;1516   			}
;;;1517   		}
;;;1518   	}
;;;1519   }
;;;1520   
;;;1521   if(ind==iK_load)
00108a  4849              LDR      r0,|L1.4528|
;;;1522   	{
;;;1523   	if(sub_ind==0)		 
;;;1524   		{
;;;1525   		cntrl_stat_U=1022;
;;;1526   		cntrl_stat_I=1022;
;;;1527   		bps_stat=stON;
00108c  4b60              LDR      r3,|L1.4624|
;;;1528   
;;;1529   		for(i=0;i<NUMIST;i++)
;;;1530   			{
;;;1531   			bps[i]._vol_u=1022;
;;;1532   			bps[i]._vol_i=1022;
;;;1533   			bps[i]._flags_tu=0;
;;;1534   			}
;;;1535   		}
;;;1536   	else if(sub_ind==1)
;;;1537   		{
;;;1538   		if(phase==0)
00108e  4961              LDR      r1,|L1.4628|
001090  f890c000          LDRB     r12,[r0,#0]           ;1521  ; a_ind
001094  4c60              LDR      r4,|L1.4632|
001096  4f61              LDR      r7,|L1.4636|
001098  f24038fe          MOV      r8,#0x3fe             ;1525
00109c  f1bc0f31          CMP      r12,#0x31             ;1521
0010a0  d02b              BEQ      |L1.4346|
;;;1539   			{
;;;1540     			cntrl_stat_U=0;
;;;1541   			cntrl_stat_I=0;
;;;1542   			bps_stat=stOFF;
;;;1543   
;;;1544   			for(i=0;i<NUMIST;i++)
;;;1545   				{
;;;1546   				bps[i]._vol_u=0;
;;;1547   				bps[i]._vol_i=0;
;;;1548   				bps[i]._flags_tu=1;
;;;1549   				}
;;;1550   			}
;;;1551   		else if(phase==1)
;;;1552   			{
;;;1553     			cntrl_stat_U=1022;
;;;1554   			cntrl_stat_I=1022;
;;;1555   			bps_stat=stON;
;;;1556   
;;;1557   			for(i=0;i<NUMIST;i++)
;;;1558   				{
;;;1559   				bps[i]._vol_u=1022;
;;;1560   				bps[i]._vol_i=1022;
;;;1561   				bps[i]._flags_tu=0;
;;;1562   				}
;;;1563   			}
;;;1564   		}
;;;1565   	else 
;;;1566   		{
;;;1567   		bps_stat=stOFF;
;;;1568   
;;;1569   		bps[0]._vol_u=0;
;;;1570   		bps[0]._vol_i=0;
;;;1571   		bps[0]._flags_tu=1;
;;;1572   		}
;;;1573   	}
;;;1574   else if((ind==iK_bps)||(ind==iK_bps_v2))
0010a2  f1bc0f2b          CMP      r12,#0x2b
0010a6  d06a              BEQ      |L1.4478|
0010a8  f1bc0f2c          CMP      r12,#0x2c
0010ac  d067              BEQ      |L1.4478|
;;;1575   	{
;;;1576   	if((sub_ind==0)||(sub_ind==3))
;;;1577   		{
;;;1578   		cntrl_stat_U=1022;
;;;1579   		cntrl_stat_I=1022;
;;;1580   		bps_stat=stON;
;;;1581   
;;;1582   		bps[0]._vol_u=0;
;;;1583   		bps[0]._vol_i=0;
;;;1584   		bps[0]._flags_tu=1;
;;;1585   
;;;1586   		bps[1]._vol_u=0;
;;;1587   		bps[1]._vol_i=0;
;;;1588   		bps[1]._flags_tu=1;
;;;1589   
;;;1590   		bps[1]._vol_u=0;
;;;1591   		bps[1]._vol_i=0;
;;;1592   		bps[1]._flags_tu=1;
;;;1593   
;;;1594   		bps[2]._vol_u=0;
;;;1595   		bps[2]._vol_i=0;
;;;1596   		bps[2]._flags_tu=1;
;;;1597   
;;;1598   		bps[3]._vol_u=0;
;;;1599   		bps[3]._vol_i=0;
;;;1600   		bps[3]._flags_tu=1;
;;;1601   
;;;1602   		bps[4]._vol_u=0;
;;;1603   		bps[4]._vol_i=0;
;;;1604   		bps[4]._flags_tu=1;
;;;1605   
;;;1606   		bps[5]._vol_u=0;
;;;1607   		bps[5]._vol_i=0;
;;;1608   		bps[5]._flags_tu=1;
;;;1609   
;;;1610   		bps[6]._vol_u=0;
;;;1611   		bps[6]._vol_i=0;
;;;1612   		bps[6]._flags_tu=1;
;;;1613   
;;;1614   		bps[7]._vol_u=0;
;;;1615   		bps[7]._vol_i=0;
;;;1616   		bps[7]._flags_tu=1;
;;;1617   
;;;1618   		bps[8]._vol_u=0;
;;;1619   		bps[8]._vol_i=0;
;;;1620   		bps[8]._flags_tu=1;
;;;1621   		
;;;1622   		bps[9]._vol_u=0;
;;;1623   		bps[9]._vol_i=0;
;;;1624   		bps[9]._flags_tu=1;
;;;1625   
;;;1626   		bps[10]._vol_u=0;
;;;1627   		bps[10]._vol_i=0;
;;;1628   		bps[10]._flags_tu=1;
;;;1629   
;;;1630   		bps[11]._vol_u=0;
;;;1631   		bps[11]._vol_i=0;
;;;1632   		bps[11]._flags_tu=1;
;;;1633    		
;;;1634   		bps[sub_ind1]._vol_u=1022;
;;;1635   		bps[sub_ind1]._vol_i=1022;
;;;1636   		bps[sub_ind1]._flags_tu=0;
;;;1637   		}
;;;1638   
;;;1639   	else if(sub_ind==6)
;;;1640   		{
;;;1641   		if(phase==0)
;;;1642   			{
;;;1643     			cntrl_stat_U=0;
;;;1644   			cntrl_stat_I=0;
;;;1645   			bps_stat=stOFF;
;;;1646   			bps[0]._vol_u=0;
;;;1647   			bps[0]._vol_i=0;
;;;1648   			bps[0]._flags_tu=1;
;;;1649   	
;;;1650   			bps[1]._vol_u=0;
;;;1651   			bps[1]._vol_i=0;
;;;1652   			bps[1]._flags_tu=1;
;;;1653   	
;;;1654   			bps[1]._vol_u=0;
;;;1655   			bps[1]._vol_i=0;
;;;1656   			bps[1]._flags_tu=1;
;;;1657   	
;;;1658   			bps[2]._vol_u=0;
;;;1659   			bps[2]._vol_i=0;
;;;1660   			bps[2]._flags_tu=1;
;;;1661   	
;;;1662   			bps[3]._vol_u=0;
;;;1663   			bps[3]._vol_i=0;
;;;1664   			bps[3]._flags_tu=1;
;;;1665   	
;;;1666   			bps[4]._vol_u=0;
;;;1667   			bps[4]._vol_i=0;
;;;1668   			bps[4]._flags_tu=1;
;;;1669   	
;;;1670   			bps[5]._vol_u=0;
;;;1671   			bps[5]._vol_i=0;
;;;1672   			bps[5]._flags_tu=1;
;;;1673   	
;;;1674   			bps[6]._vol_u=0;
;;;1675   			bps[6]._vol_i=0;
;;;1676   			bps[6]._flags_tu=1;
;;;1677   	
;;;1678   			bps[7]._vol_u=0;
;;;1679   			bps[7]._vol_i=0;
;;;1680   			bps[7]._flags_tu=1;
;;;1681   	
;;;1682   			bps[8]._vol_u=0;
;;;1683   			bps[8]._vol_i=0;
;;;1684   			bps[8]._flags_tu=1;
;;;1685   			
;;;1686   			bps[9]._vol_u=0;
;;;1687   			bps[9]._vol_i=0;
;;;1688   			bps[9]._flags_tu=1;
;;;1689   	
;;;1690   			bps[10]._vol_u=0;
;;;1691   			bps[10]._vol_i=0;
;;;1692   			bps[10]._flags_tu=1;
;;;1693   	
;;;1694   			bps[11]._vol_u=0;
;;;1695   			bps[11]._vol_i=0;
;;;1696   			bps[11]._flags_tu=1;
;;;1697   
;;;1698   			}
;;;1699   		else if(phase==1)
;;;1700   			{
;;;1701     			cntrl_stat_U=1022;
;;;1702   			cntrl_stat_I=1022;
;;;1703   			bps_stat=stON;
;;;1704   
;;;1705   			bps[0]._vol_u=0;
;;;1706   			bps[0]._vol_i=0;
;;;1707   			bps[0]._flags_tu=1;
;;;1708   	
;;;1709   			bps[1]._vol_u=0;
;;;1710   			bps[1]._vol_i=0;
;;;1711   			bps[1]._flags_tu=1;
;;;1712   	
;;;1713   			bps[1]._vol_u=0;
;;;1714   			bps[1]._vol_i=0;
;;;1715   			bps[1]._flags_tu=1;
;;;1716   	
;;;1717   			bps[2]._vol_u=0;
;;;1718   			bps[2]._vol_i=0;
;;;1719   			bps[2]._flags_tu=1;
;;;1720   	
;;;1721   			bps[3]._vol_u=0;
;;;1722   			bps[3]._vol_i=0;
;;;1723   			bps[3]._flags_tu=1;
;;;1724   	
;;;1725   			bps[4]._vol_u=0;
;;;1726   			bps[4]._vol_i=0;
;;;1727   			bps[4]._flags_tu=1;
;;;1728   	
;;;1729   			bps[5]._vol_u=0;
;;;1730   			bps[5]._vol_i=0;
;;;1731   			bps[5]._flags_tu=1;
;;;1732   	
;;;1733   			bps[6]._vol_u=0;
;;;1734   			bps[6]._vol_i=0;
;;;1735   			bps[6]._flags_tu=1;
;;;1736   	
;;;1737   			bps[7]._vol_u=0;
;;;1738   			bps[7]._vol_i=0;
;;;1739   			bps[7]._flags_tu=1;
;;;1740   	
;;;1741   			bps[8]._vol_u=0;
;;;1742   			bps[8]._vol_i=0;
;;;1743   			bps[8]._flags_tu=1;
;;;1744   			
;;;1745   			bps[9]._vol_u=0;
;;;1746   			bps[9]._vol_i=0;
;;;1747   			bps[9]._flags_tu=1;
;;;1748   	
;;;1749   			bps[10]._vol_u=0;
;;;1750   			bps[10]._vol_i=0;
;;;1751   			bps[10]._flags_tu=1;
;;;1752   	
;;;1753   			bps[11]._vol_u=0;
;;;1754   			bps[11]._vol_i=0;
;;;1755   			bps[11]._flags_tu=1;
;;;1756   
;;;1757   
;;;1758   
;;;1759   			bps[sub_ind1]._vol_u=1022;
;;;1760   			bps[sub_ind1]._vol_i=1022;
;;;1761   			bps[sub_ind1]._flags_tu=0;
;;;1762   			}
;;;1763   		}
;;;1764   	else 
;;;1765   		{
;;;1766   		bps_stat=stOFF;
;;;1767   
;;;1768   		bps[0]._vol_u=0;
;;;1769   		bps[0]._vol_i=0;
;;;1770   		bps[0]._flags_tu=1;
;;;1771   
;;;1772   		bps[1]._vol_u=0;
;;;1773   		bps[1]._vol_i=0;
;;;1774   		bps[1]._flags_tu=1;
;;;1775   
;;;1776   		bps[1]._vol_u=0;
;;;1777   		bps[1]._vol_i=0;
;;;1778   		bps[1]._flags_tu=1;
;;;1779   
;;;1780   		bps[2]._vol_u=0;
;;;1781   		bps[2]._vol_i=0;
;;;1782   		bps[2]._flags_tu=1;
;;;1783   
;;;1784   		bps[3]._vol_u=0;
;;;1785   		bps[3]._vol_i=0;
;;;1786   		bps[3]._flags_tu=1;
;;;1787   
;;;1788   		bps[4]._vol_u=0;
;;;1789   		bps[4]._vol_i=0;
;;;1790   		bps[4]._flags_tu=1;
;;;1791   
;;;1792   		bps[5]._vol_u=0;
;;;1793   		bps[5]._vol_i=0;
;;;1794   		bps[5]._flags_tu=1;
;;;1795   
;;;1796   		bps[6]._vol_u=0;
;;;1797   		bps[6]._vol_i=0;
;;;1798   		bps[6]._flags_tu=1;
;;;1799   
;;;1800   		bps[7]._vol_u=0;
;;;1801   		bps[7]._vol_i=0;
;;;1802   		bps[7]._flags_tu=1;
;;;1803   
;;;1804   		bps[8]._vol_u=0;
;;;1805   		bps[8]._vol_i=0;
;;;1806   		bps[8]._flags_tu=1;
;;;1807   		
;;;1808   		bps[9]._vol_u=0;
;;;1809   		bps[9]._vol_i=0;
;;;1810   		bps[9]._flags_tu=1;
;;;1811   
;;;1812   		bps[10]._vol_u=0;
;;;1813   		bps[10]._vol_i=0;
;;;1814   		bps[10]._flags_tu=1;
;;;1815   
;;;1816   		bps[11]._vol_u=0;
;;;1817   		bps[11]._vol_i=0;
;;;1818   		bps[11]._flags_tu=1;
;;;1819   
;;;1820   		}
;;;1821   	}
;;;1822   
;;;1823   else if(ind==iTst_pwm)
;;;1824   	{
;;;1825   	char i;
;;;1826   
;;;1827   	for(i=0;i<NUMIST;i++)
;;;1828   		{
;;;1829   		bps[i]._vol_u=tst_pwm_u;
0010ae  4a41              LDR      r2,|L1.4532|
;;;1830   		bps[i]._vol_i=tst_pwm_i;
0010b0  4944              LDR      r1,|L1.4548|
0010b2  f1bc0f34          CMP      r12,#0x34             ;1823
0010b6  d063              BEQ      |L1.4480|
;;;1831   		bps[i]._flags_tu=0;
;;;1832   		}
;;;1833   	}
;;;1834   
;;;1835   else if(ind==iK_viz_u)
;;;1836   	{
;;;1837   	char i;
;;;1838   
;;;1839   	if(viz_stat!=vsON)
0010b8  483f              LDR      r0,|L1.4536|
0010ba  f1bc0f46          CMP      r12,#0x46             ;1835
0010be  d060              BEQ      |L1.4482|
;;;1840   		{
;;;1841   		for(i=0;i<NUMIST;i++)
;;;1842   			{
;;;1843   			bps[i]._vol_u=1022;
;;;1844   			bps[i]._vol_i=1022;
;;;1845   			bps[i]._flags_tu=0;
;;;1846   			}
;;;1847   		}
;;;1848   	else 
;;;1849   		{
;;;1850   		for(i=0;i<NUMIST;i++)
;;;1851   			{
;;;1852   			bps[i]._vol_u=tst_pwm_u;
;;;1853   			bps[i]._vol_i=tst_pwm_i;
;;;1854   			bps[i]._flags_tu=0;
;;;1855   			}
;;;1856   		}
;;;1857   	}
;;;1858   
;;;1859   else if(ind==iK_viz_i)
0010c0  f1bc0f45          CMP      r12,#0x45
0010c4  d05e              BEQ      |L1.4484|
;;;1860   	{
;;;1861   	char i;
;;;1862   
;;;1863   	if(viz_stat!=vsON)
;;;1864   		{
;;;1865   		for(i=0;i<NUMIST;i++)
;;;1866   			{
;;;1867   			bps[i]._vol_u=1022;
;;;1868   			bps[i]._vol_i=1022;
;;;1869   			bps[i]._flags_tu=0;
;;;1870   			}
;;;1871   		}
;;;1872   	else 
;;;1873   		{
;;;1874   		for(i=0;i<NUMIST;i++)
;;;1875   			{
;;;1876   			bps[i]._vol_u=tst_pwm_u;
;;;1877   			bps[i]._vol_i=tst_pwm_i;
;;;1878   			bps[i]._flags_tu=0;
;;;1879   			}
;;;1880   		}
;;;1881   	}
;;;1882   
;;;1883   else if(work_stat==wsGS)
0010c6  f89a0000          LDRB     r0,[r10,#0]  ; work_stat
;;;1884   	{
;;;1885   	signed long temp_SL_U,temp_SL_I;
;;;1886   	
;;;1887   	if((CURR_FADE_IN) && (time_proc<CURR_FADE_IN))
;;;1888   		{
;;;1889   		signed long temp_SL_;
;;;1890   		
;;;1891   		temp_SL_=	(signed long)I_ug_temp;
;;;1892   		temp_SL_*= (signed long)time_proc;
;;;1893   		temp_SL_/= (signed long)CURR_FADE_IN;
;;;1894   
;;;1895   		//I_ug_temp= (signed short)((signed long)I_ug_temp*(signed long)time_proc)/(signed long)CURR_FADE_IN;
;;;1896   
;;;1897   		I_ug_temp= (signed short)temp_SL_;
;;;1898   		}	
;;;1899   	
;;;1900   	if(b1Hz_sh) {
;;;1901   
;;;1902   
;;;1903   
;;;1904   
;;;1905   		if(!((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF)))) {
;;;1906   	 		if(load_I<I_ug_temp)_x_++;
;;;1907      			else if(load_I>I_ug_temp)_x_--;
;;;1908   			//gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;1909   			gran(&_x_,-50,50); 
;;;1910   
;;;1911   	 		if(load_U<U_maxg)_xu_++;
0010ca  f8dfa154          LDR      r10,|L1.4640|
0010ce  f8dfb154          LDR      r11,|L1.4644|
0010d2  2801              CMP      r0,#1                 ;1883
0010d4  d057              BEQ      |L1.4486|
;;;1912      			else if(load_U>U_maxg)_xu_--;
;;;1913   			//gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;1914   			gran(&_xu_,-50,50); 
;;;1915   		}
;;;1916   	}
;;;1917   
;;;1918   	temp_SL_U=1022;
;;;1919   	temp_SL_U*=(signed long)U_maxg;
;;;1920   	temp_SL_U/=(signed long)U_MAX;
;;;1921   
;;;1922   	temp_SL_I=1022;
;;;1923   	//temp_SL_I*=NUMIST;
;;;1924   	temp_SL_I*=(signed long)I_ug_temp;
;;;1925   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1926   
;;;1927   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1928   		{
;;;1929   		temp_SL_U=find_U_curve(U_maxg)*5;
;;;1930   		}
;;;1931   	 
;;;1932   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1933   		{
;;;1934   		temp_SL_I=find_I_curve(I_ug_temp)*5;
;;;1935   		}
;;;1936   
;;;1937   	for(i=0;i<NUMIST;i++)
;;;1938   		{
;;;1939   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;1940   		 	bps[i]._vol_u=0;
;;;1941   			bps[i]._vol_i=0;
;;;1942   			bps[i]._flags_tu=1;
;;;1943   		} else {
;;;1944   			bps[i]._vol_u=(short)temp_SL_U + _xu_/*+bps[i]._xu_*/;
;;;1945   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1946   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1947   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1948   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1949   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1950   			bps[i]._flags_tu=0;
;;;1951   		}
;;;1952   	}
;;;1953   
;;;1954   	}
;;;1955   else if(work_stat==wsPS)
0010d6  2802              CMP      r0,#2
0010d8  d056              BEQ      |L1.4488|
;;;1956   	{
;;;1957   	signed long temp_SL_U,temp_SL_I;
;;;1958   	/*	U_up_d=U_up/100;
;;;1959   	if(U_up_d<5) U_up_d=5;
;;;1960   	*/
;;;1961   	if(load_U_>5)bU_VALID=1;
;;;1962   	else bU_VALID=0;
;;;1963   
;;;1964   	temp_SL_U=(long)U_up_temp/100L;
;;;1965   	if(temp_SL_U<=0)temp_SL_U=1;
;;;1966   	if((abs(load_U_-U_up_temp))<(signed short)temp_SL_U) bU_VALID_VALID=1;
;;;1967   	else bU_VALID_VALID=0;
;;;1968   /*	if( (load_U_>(U_up-U_up_d))&&(load_U_<(U_up+U_up_d)) )bFAST_REG=0;
;;;1969   	else bFAST_REG=1;*/
;;;1970   
;;;1971   	bFAST_REG=0;
;;;1972   
;;;1973   	if(bU_VALID_VALID)
;;;1974   		{
;;;1975   		if(bPRECESSION_REG)
;;;1976   			{
;;;1977   			bPRECESSION_REG=0;
;;;1978   			if(load_U_<U_up_temp)_xu_++;
;;;1979      			else if(load_U_>U_up_temp)_xu_--;
;;;1980   			gran(&_xu_,-50,50);
;;;1981   			}
;;;1982   		}
;;;1983   	else if((b1Hz_sh&&bU_VALID)||(bFAST_REG&&bU_VALID))
;;;1984   		{
;;;1985   	 	if(load_I<I_maxp)_x_++;
;;;1986      		else if(load_I>I_maxp)_x_--;
;;;1987   		gran(&_x_,-50,50); 
;;;1988   
;;;1989   	 	if(load_U_<U_up_temp)_xu_++;
;;;1990      		else if(load_U_>U_up_temp)_xu_--;
;;;1991   		gran(&_xu_,-50,50); 
;;;1992   
;;;1993   		}
;;;1994   
;;;1995   
;;;1996   	temp_SL_U=900;
;;;1997   	temp_SL_U*=(signed long)U_up_temp;
;;;1998   	temp_SL_U/=(signed long)U_MAX;
;;;1999   	temp_SL_U+=50;
;;;2000   
;;;2001   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;2002   		{	
;;;2003   		temp_SL_U=find_U_curve(U_up_temp)*5;
;;;2004   		}
;;;2005   	//temp_SL_U=lc640_read_int(SEKTOR_KURVE_U+(temp_SL_U*2));
;;;2006   	 
;;;2007   	temp_SL_I=1022;
;;;2008   	//temp_SL_I*=NUMIST;
;;;2009   	temp_SL_I*=(signed long)I_maxp;
;;;2010   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;2011   
;;;2012   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;2013   		{
;;;2014   		temp_SL_I=find_I_curve(I_maxp)*5;
;;;2015   		}
;;;2016   
;;;2017   	for(i=0;i<NUMIST;i++) {
;;;2018   
;;;2019   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;2020   		 	bps[i]._vol_u=0;
;;;2021   			bps[i]._vol_i=0;
;;;2022   			bps[i]._flags_tu=1;
;;;2023   		} else {
;;;2024   			bps[i]._vol_u=(short)temp_SL_U + _xu_+bps[i]._xu_;
;;;2025   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;2026   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;2027   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;2028   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;2029   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;2030   			bps[i]._flags_tu=0;
;;;2031   		}
;;;2032   	}
;;;2033   
;;;2034   
;;;2035   /*	for(i=0;i<NUMIST;i++)
;;;2036   		{
;;;2037   		bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;2038   	 	bps[i]._vol_i=((short)temp_SL_I+ _x_);//NUMIST;
;;;2039   		bps[i]._flags_tu=0;
;;;2040   		}*/
;;;2041   	//bps[0]._vol_i+= _x_;
;;;2042   	plazma_vol_u_0=temp_SL_U;
;;;2043   	plazma_vol_u_1=bps[0]._vol_u;
;;;2044   	}
;;;2045   
;;;2046   else if(work_stat==wsCAP)
0010da  2803              CMP      r0,#3
0010dc  d055              BEQ      |L1.4490|
;;;2047   	{
;;;2048   	signed long temp_SL_U=0,temp_SL_I=0;
;;;2049   
;;;2050   
;;;2051   
;;;2052   
;;;2053   
;;;2054   
;;;2055   	if(b1Hz_sh) {
;;;2056   		if(!bOFF) {
;;;2057   	 		if(load_I<(CAP_WRK_CURR*10))_x_++;
;;;2058      			else if(load_I>(CAP_WRK_CURR*10))_x_--;
;;;2059   			gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;2060   			gran(&_x_,-50,50); 
;;;2061   
;;;2062   	 		if(load_U<(CAP_MAX_VOLT*10))_xu_++;
;;;2063      			else if(load_U>(CAP_MAX_VOLT*10))_xu_--;
;;;2064   			gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;2065   			gran(&_xu_,-50,50); 
;;;2066   		}
;;;2067   	}
;;;2068   
;;;2069   	temp_SL_U=10220L;
;;;2070   	temp_SL_U*=(signed long)CAP_MAX_VOLT;
;;;2071   	temp_SL_U/=(signed long)U_MAX;
;;;2072   
;;;2073   	temp_SL_I=10220L;
;;;2074   	//temp_SL_I*=NUMIST;
;;;2075   	temp_SL_I*=(signed long)CAP_WRK_CURR;
;;;2076   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;2077   
;;;2078   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;2079   		{
;;;2080   		temp_SL_U=find_U_curve(CAP_MAX_VOLT*10)*5;
;;;2081   		}
;;;2082   	 
;;;2083   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;2084   		{
;;;2085   		temp_SL_I=find_I_curve(CAP_WRK_CURR*10)*5;
;;;2086   		} 
;;;2087   
;;;2088   //temp_SL_U=1000;
;;;2089   
;;;2090   	for(i=0;i<NUMIST;i++)
;;;2091   		{
;;;2092   		if(bOFF) {
;;;2093   		 	bps[i]._vol_u=0;
;;;2094   			bps[i]._vol_i=0;
;;;2095   			bps[i]._flags_tu=1;
;;;2096   		} else {
;;;2097   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;2098   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;2099   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;2100   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;2101   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;2102   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;2103   			bps[i]._flags_tu=0;
;;;2104   		}
;;;2105   	}
;;;2106   
;;;2107   	}
;;;2108   else 
;;;2109   	{
;;;2110   	bps_stat=stOFF;
0010de  701d              STRB     r5,[r3,#0]
;;;2111   
;;;2112   	for(i=0;i<NUMIST;i++)
0010e0  2000              MOVS     r0,#0
0010e2  464b              MOV      r3,r9                 ;1481
0010e4  f9b71000          LDRSH    r1,[r7,#0]            ;1529
0010e8  e3f2              B        |L1.6352|
                  |L1.4330|
0010ea  484f              LDR      r0,|L1.4648|
0010ec  e797              B        |L1.4126|
                  |L1.4334|
0010ee  484f              LDR      r0,|L1.4652|
0010f0  e795              B        |L1.4126|
                  |L1.4338|
0010f2  484f              LDR      r0,|L1.4656|
0010f4  e79e              B        |L1.4148|
                  |L1.4342|
0010f6  484f              LDR      r0,|L1.4660|
0010f8  e79c              B        |L1.4148|
                  |L1.4346|
0010fa  f9900001          LDRSB    r0,[r0,#1]            ;1523  ; a_ind
0010fe  b138              CBZ      r0,|L1.4368|
001100  2801              CMP      r0,#1                 ;1536
001102  d020              BEQ      |L1.4422|
001104  701d              STRB     r5,[r3,#0]            ;1567
001106  62e5              STR      r5,[r4,#0x2c]         ;1570  ; bps
001108  6325              STR      r5,[r4,#0x30]         ;1571  ; bps
00110a  f8849028          STRB     r9,[r4,#0x28]         ;1571
00110e  e205              B        |L1.5404|
                  |L1.4368|
001110  f8a68014          STRH     r8,[r6,#0x14]         ;1525
001114  f8a68016          STRH     r8,[r6,#0x16]         ;1526
001118  f8839000          STRB     r9,[r3,#0]            ;1527
00111c  4640              MOV      r0,r8                 ;1525
00111e  2100              MOVS     r1,#0                 ;1529
001120  f9b72000          LDRSH    r2,[r7,#0]            ;1529
001124  e00c              B        |L1.4416|
001126  bf00              NOP                            ;1531
                  |L1.4392|
001128  ebc103c1          RSB      r3,r1,r1,LSL #3       ;1531
00112c  eb030343          ADD      r3,r3,r3,LSL #1       ;1531
001130  eb040383          ADD      r3,r4,r3,LSL #2       ;1531
001134  1c49              ADDS     r1,r1,#1              ;1529
001136  62d8              STR      r0,[r3,#0x2c]         ;1532
001138  6318              STR      r0,[r3,#0x30]         ;1533
00113a  f8835028          STRB     r5,[r3,#0x28]         ;1533
00113e  b2c9              UXTB     r1,r1                 ;1529
                  |L1.4416|
001140  4291              CMP      r1,r2                 ;1529
001142  dbf1              BLT      |L1.4392|
001144  e1ea              B        |L1.5404|
                  |L1.4422|
001146  7808              LDRB     r0,[r1,#0]            ;1538  ; phase
001148  b110              CBZ      r0,|L1.4432|
00114a  2801              CMP      r0,#1                 ;1551
00114c  d075              BEQ      |L1.4666|
00114e  e1e5              B        |L1.5404|
                  |L1.4432|
001150  82b5              STRH     r5,[r6,#0x14]         ;1540
001152  82f5              STRH     r5,[r6,#0x16]         ;1541
001154  701d              STRB     r5,[r3,#0]            ;1542
001156  2000              MOVS     r0,#0                 ;1544
001158  464b              MOV      r3,r9                 ;1481
00115a  f9b71000          LDRSH    r1,[r7,#0]            ;1529
00115e  e00b              B        |L1.4472|
                  |L1.4448|
001160  ebc002c0          RSB      r2,r0,r0,LSL #3       ;1546
001164  eb020242          ADD      r2,r2,r2,LSL #1       ;1546
001168  eb040282          ADD      r2,r4,r2,LSL #2       ;1546
00116c  1c40              ADDS     r0,r0,#1              ;1544
00116e  62d5              STR      r5,[r2,#0x2c]         ;1547
001170  6315              STR      r5,[r2,#0x30]         ;1548
001172  f8823028          STRB     r3,[r2,#0x28]         ;1548
001176  b2c0              UXTB     r0,r0                 ;1544
                  |L1.4472|
001178  4288              CMP      r0,r1                 ;1544
00117a  dbf1              BLT      |L1.4448|
00117c  e1ce              B        |L1.5404|
                  |L1.4478|
00117e  e076              B        |L1.4718|
                  |L1.4480|
001180  e187              B        |L1.5266|
                  |L1.4482|
001182  e19e              B        |L1.5314|
                  |L1.4484|
001184  e1cb              B        |L1.5406|
                  |L1.4486|
001186  e1f8              B        |L1.5498|
                  |L1.4488|
001188  e2c3              B        |L1.5906|
                  |L1.4490|
00118a  e3b5              B        |L1.6392|
                  |L1.4492|
                          DCD      work_stat
                  |L1.4496|
                          DCD      ramModbusCnt
                  |L1.4500|
                          DCD      I_ug_ram
                  |L1.4504|
                          DCD      U_up_ram
                  |L1.4508|
                          DCD      cap_time_proc
                  |L1.4512|
                          DCD      CAP_COUNTER
                  |L1.4516|
                          DCD      CAP_TIME_SEC
                  |L1.4520|
                          DCD      CAP_TIME_MIN
                  |L1.4524|
                          DCD      CAP_TIME_HOUR
                  |L1.4528|
                          DCD      a_ind
                  |L1.4532|
                          DCD      tst_pwm_u
                  |L1.4536|
                          DCD      viz_stat
                  |L1.4540|
                          DCD      viz_stat_cnt
                  |L1.4544|
                          DCD      0xffffabcd
                  |L1.4548|
                          DCD      tst_pwm_i
                  |L1.4552|
                          DCD      load_U
                  |L1.4556|
                          DCD      load_I
                  |L1.4560|
                          DCD      REV_IS_ON
                  |L1.4564|
                          DCD      AVT_REV_IS_ON
                  |L1.4568|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.4572|
                          DCD      REV_STAT
                  |L1.4576|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.4580|
                          DCD      U_up_temp
                  |L1.4584|
                          DCD      I_ug_temp
                  |L1.4588|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.4592|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.4596|
                          DCD      fiks_stat_I
                  |L1.4600|
                          DCD      I_ug
                  |L1.4604|
                          DCD      fiks_stat_U
                  |L1.4608|
                          DCD      U_up
                  |L1.4612|
                          DCD      I_MAX_IPS
                  |L1.4616|
                          DCD      U_MAX
                  |L1.4620|
                          DCD      ||area_number.18||
                  |L1.4624|
                          DCD      bps_stat
                  |L1.4628|
                          DCD      phase
                  |L1.4632|
                          DCD      bps
                  |L1.4636|
                          DCD      NUMIST
                  |L1.4640|
                          DCD      _xu_
                  |L1.4644|
                          DCD      _x_
                  |L1.4648|
                          DCD      I_ug3
                  |L1.4652|
                          DCD      I_ug2
                  |L1.4656|
                          DCD      U_up3
                  |L1.4660|
                          DCD      U_up2
001238  e7ff              B        |L1.4666|
                  |L1.4666|
00123a  f8a68014          STRH     r8,[r6,#0x14]         ;1553
00123e  f8a68016          STRH     r8,[r6,#0x16]         ;1554
001242  f8839000          STRB     r9,[r3,#0]            ;1555
001246  4640              MOV      r0,r8                 ;1553
001248  2100              MOVS     r1,#0                 ;1557
00124a  f9b72000          LDRSH    r2,[r7,#0]            ;1529
00124e  e00b              B        |L1.4712|
                  |L1.4688|
001250  ebc103c1          RSB      r3,r1,r1,LSL #3       ;1559
001254  eb030343          ADD      r3,r3,r3,LSL #1       ;1559
001258  eb040383          ADD      r3,r4,r3,LSL #2       ;1559
00125c  1c49              ADDS     r1,r1,#1              ;1557
00125e  62d8              STR      r0,[r3,#0x2c]         ;1560
001260  6318              STR      r0,[r3,#0x30]         ;1561
001262  f8835028          STRB     r5,[r3,#0x28]         ;1561
001266  b2c9              UXTB     r1,r1                 ;1557
                  |L1.4712|
001268  4291              CMP      r1,r2                 ;1557
00126a  dbf1              BLT      |L1.4688|
00126c  e156              B        |L1.5404|
                  |L1.4718|
00126e  f9902001          LDRSB    r2,[r0,#1]            ;1576  ; a_ind
001272  b122              CBZ      r2,|L1.4734|
001274  2a03              CMP      r2,#3                 ;1576
001276  d002              BEQ      |L1.4734|
001278  2a06              CMP      r2,#6                 ;1639
00127a  d05b              BEQ      |L1.4916|
00127c  e061              B        |L1.4930|
                  |L1.4734|
00127e  f8a68014          STRH     r8,[r6,#0x14]         ;1578
001282  f8a68016          STRH     r8,[r6,#0x16]         ;1579
001286  f1040428          ADD      r4,r4,#0x28           ;1580
00128a  f8839000          STRB     r9,[r3,#0]            ;1580
00128e  6065              STR      r5,[r4,#4]            ;1583  ; bps
001290  60a5              STR      r5,[r4,#8]            ;1584  ; bps
001292  f8849000          STRB     r9,[r4,#0]            ;1584
001296  65a5              STR      r5,[r4,#0x58]         ;1587  ; bps
001298  65e5              STR      r5,[r4,#0x5c]         ;1588  ; bps
00129a  f8849054          STRB     r9,[r4,#0x54]         ;1588
00129e  f8c450ac          STR      r5,[r4,#0xac]         ;1595  ; bps
0012a2  f8c450b0          STR      r5,[r4,#0xb0]         ;1596  ; bps
0012a6  f88490a8          STRB     r9,[r4,#0xa8]         ;1596
0012aa  f8c45100          STR      r5,[r4,#0x100]        ;1599  ; bps
0012ae  f8c45104          STR      r5,[r4,#0x104]        ;1600  ; bps
0012b2  f88490fc          STRB     r9,[r4,#0xfc]         ;1600
0012b6  f8c45154          STR      r5,[r4,#0x154]        ;1603  ; bps
0012ba  464a              MOV      r2,r9                 ;1580
0012bc  f8c45158          STR      r5,[r4,#0x158]        ;1604  ; bps
0012c0  f8842150          STRB     r2,[r4,#0x150]        ;1604
0012c4  f8c451a8          STR      r5,[r4,#0x1a8]        ;1607  ; bps
0012c8  f8c451ac          STR      r5,[r4,#0x1ac]        ;1608  ; bps
0012cc  f88421a4          STRB     r2,[r4,#0x1a4]        ;1608
0012d0  f8c451fc          STR      r5,[r4,#0x1fc]        ;1611  ; bps
0012d4  f8c45200          STR      r5,[r4,#0x200]        ;1612  ; bps
0012d8  f88421f8          STRB     r2,[r4,#0x1f8]        ;1612
0012dc  f8c45250          STR      r5,[r4,#0x250]        ;1615  ; bps
0012e0  f8c45254          STR      r5,[r4,#0x254]        ;1616  ; bps
0012e4  f884224c          STRB     r2,[r4,#0x24c]        ;1616
0012e8  f8c452a4          STR      r5,[r4,#0x2a4]        ;1619  ; bps
0012ec  f8c452a8          STR      r5,[r4,#0x2a8]        ;1620  ; bps
0012f0  f88422a0          STRB     r2,[r4,#0x2a0]        ;1620
0012f4  f8c452f8          STR      r5,[r4,#0x2f8]        ;1623  ; bps
0012f8  f8c452fc          STR      r5,[r4,#0x2fc]        ;1624  ; bps
0012fc  f88422f4          STRB     r2,[r4,#0x2f4]        ;1624
001300  f8c4534c          STR      r5,[r4,#0x34c]        ;1627  ; bps
001304  f8c45350          STR      r5,[r4,#0x350]        ;1628  ; bps
001308  f8842348          STRB     r2,[r4,#0x348]        ;1628
00130c  f8c453a0          STR      r5,[r4,#0x3a0]        ;1631  ; bps
001310  f8c453a4          STR      r5,[r4,#0x3a4]        ;1632  ; bps
001314  f884239c          STRB     r2,[r4,#0x39c]        ;1632
001318  f9900002          LDRSB    r0,[r0,#2]            ;1634  ; a_ind
00131c  f1a40428          SUB      r4,r4,#0x28           ;1632
001320  ebc000c0          RSB      r0,r0,r0,LSL #3       ;1634
001324  eb000040          ADD      r0,r0,r0,LSL #1       ;1634
001328  eb040080          ADD      r0,r4,r0,LSL #2       ;1634
00132c  4641              MOV      r1,r8                 ;1578
00132e  62c1              STR      r1,[r0,#0x2c]         ;1635
001330  6301              STR      r1,[r0,#0x30]         ;1636
001332  e0ab              B        |L1.5260|
                  |L1.4916|
001334  7809              LDRB     r1,[r1,#0]            ;1641  ; phase
001336  b111              CBZ      r1,|L1.4926|
001338  2901              CMP      r1,#1                 ;1699
00133a  d04d              BEQ      |L1.5080|
00133c  e3da              B        |L1.6900|
                  |L1.4926|
00133e  82b5              STRH     r5,[r6,#0x14]         ;1643
001340  82f5              STRH     r5,[r6,#0x16]         ;1644
                  |L1.4930|
001342  f1040428          ADD      r4,r4,#0x28           ;1766
001346  701d              STRB     r5,[r3,#0]            ;1766
001348  6065              STR      r5,[r4,#4]            ;1769  ; bps
00134a  60a5              STR      r5,[r4,#8]            ;1770  ; bps
00134c  f8849000          STRB     r9,[r4,#0]            ;1770
001350  65a5              STR      r5,[r4,#0x58]         ;1773  ; bps
001352  65e5              STR      r5,[r4,#0x5c]         ;1774  ; bps
001354  f8849054          STRB     r9,[r4,#0x54]         ;1774
001358  f8c450ac          STR      r5,[r4,#0xac]         ;1781  ; bps
00135c  f8c450b0          STR      r5,[r4,#0xb0]         ;1782  ; bps
001360  f88490a8          STRB     r9,[r4,#0xa8]         ;1782
001364  f8c45100          STR      r5,[r4,#0x100]        ;1785  ; bps
001368  f8c45104          STR      r5,[r4,#0x104]        ;1786  ; bps
00136c  f88490fc          STRB     r9,[r4,#0xfc]         ;1786
001370  f8c45154          STR      r5,[r4,#0x154]        ;1789  ; bps
001374  f8c45158          STR      r5,[r4,#0x158]        ;1790  ; bps
001378  f8849150          STRB     r9,[r4,#0x150]        ;1790
00137c  f8c451a8          STR      r5,[r4,#0x1a8]        ;1793  ; bps
001380  f8c451ac          STR      r5,[r4,#0x1ac]        ;1794  ; bps
001384  f88491a4          STRB     r9,[r4,#0x1a4]        ;1794
001388  f8c451fc          STR      r5,[r4,#0x1fc]        ;1797  ; bps
00138c  4648              MOV      r0,r9                 ;1770
00138e  f8c45200          STR      r5,[r4,#0x200]        ;1798  ; bps
001392  f88401f8          STRB     r0,[r4,#0x1f8]        ;1798
001396  f8c45250          STR      r5,[r4,#0x250]        ;1801  ; bps
00139a  f8c45254          STR      r5,[r4,#0x254]        ;1802  ; bps
00139e  f884024c          STRB     r0,[r4,#0x24c]        ;1802
0013a2  f8c452a4          STR      r5,[r4,#0x2a4]        ;1805  ; bps
0013a6  f8c452a8          STR      r5,[r4,#0x2a8]        ;1806  ; bps
0013aa  f88402a0          STRB     r0,[r4,#0x2a0]        ;1806
0013ae  f8c452f8          STR      r5,[r4,#0x2f8]        ;1809  ; bps
0013b2  f8c452fc          STR      r5,[r4,#0x2fc]        ;1810  ; bps
0013b6  f88402f4          STRB     r0,[r4,#0x2f4]        ;1810
0013ba  f8c4534c          STR      r5,[r4,#0x34c]        ;1813  ; bps
0013be  f8c45350          STR      r5,[r4,#0x350]        ;1814  ; bps
0013c2  f8840348          STRB     r0,[r4,#0x348]        ;1814
0013c6  f8c453a0          STR      r5,[r4,#0x3a0]        ;1817  ; bps
0013ca  f8c453a4          STR      r5,[r4,#0x3a4]        ;1818  ; bps
0013ce  f884039c          STRB     r0,[r4,#0x39c]        ;1818
0013d2  f1a40428          SUB      r4,r4,#0x28           ;1818
0013d6  e38d              B        |L1.6900|
                  |L1.5080|
0013d8  f8a68014          STRH     r8,[r6,#0x14]         ;1701
0013dc  f8a68016          STRH     r8,[r6,#0x16]         ;1702
0013e0  f1040428          ADD      r4,r4,#0x28           ;1703
0013e4  f8839000          STRB     r9,[r3,#0]            ;1703
0013e8  6065              STR      r5,[r4,#4]            ;1706  ; bps
0013ea  60a5              STR      r5,[r4,#8]            ;1707  ; bps
0013ec  f8849000          STRB     r9,[r4,#0]            ;1707
0013f0  65a5              STR      r5,[r4,#0x58]         ;1710  ; bps
0013f2  65e5              STR      r5,[r4,#0x5c]         ;1711  ; bps
0013f4  f8849054          STRB     r9,[r4,#0x54]         ;1711
0013f8  f8c450ac          STR      r5,[r4,#0xac]         ;1718  ; bps
0013fc  f8c450b0          STR      r5,[r4,#0xb0]         ;1719  ; bps
001400  f88490a8          STRB     r9,[r4,#0xa8]         ;1719
001404  f8c45100          STR      r5,[r4,#0x100]        ;1722  ; bps
001408  f8c45104          STR      r5,[r4,#0x104]        ;1723  ; bps
00140c  f88490fc          STRB     r9,[r4,#0xfc]         ;1723
001410  f8c45154          STR      r5,[r4,#0x154]        ;1726  ; bps
001414  4649              MOV      r1,r9                 ;1703
001416  f8c45158          STR      r5,[r4,#0x158]        ;1727  ; bps
00141a  f8841150          STRB     r1,[r4,#0x150]        ;1727
00141e  f8c451a8          STR      r5,[r4,#0x1a8]        ;1730  ; bps
001422  f8c451ac          STR      r5,[r4,#0x1ac]        ;1731  ; bps
001426  f88411a4          STRB     r1,[r4,#0x1a4]        ;1731
00142a  f8c451fc          STR      r5,[r4,#0x1fc]        ;1734  ; bps
00142e  f8c45200          STR      r5,[r4,#0x200]        ;1735  ; bps
001432  f88411f8          STRB     r1,[r4,#0x1f8]        ;1735
001436  f8c45250          STR      r5,[r4,#0x250]        ;1738  ; bps
00143a  f8c45254          STR      r5,[r4,#0x254]        ;1739  ; bps
00143e  f884124c          STRB     r1,[r4,#0x24c]        ;1739
001442  f8c452a4          STR      r5,[r4,#0x2a4]        ;1742  ; bps
001446  f8c452a8          STR      r5,[r4,#0x2a8]        ;1743  ; bps
00144a  f88412a0          STRB     r1,[r4,#0x2a0]        ;1743
00144e  f8c452f8          STR      r5,[r4,#0x2f8]        ;1746  ; bps
001452  f8c452fc          STR      r5,[r4,#0x2fc]        ;1747  ; bps
001456  f88412f4          STRB     r1,[r4,#0x2f4]        ;1747
00145a  f8c4534c          STR      r5,[r4,#0x34c]        ;1750  ; bps
00145e  f8c45350          STR      r5,[r4,#0x350]        ;1751  ; bps
001462  f8841348          STRB     r1,[r4,#0x348]        ;1751
001466  f8c453a0          STR      r5,[r4,#0x3a0]        ;1754  ; bps
00146a  f8c453a4          STR      r5,[r4,#0x3a4]        ;1755  ; bps
00146e  f884139c          STRB     r1,[r4,#0x39c]        ;1755
001472  f9900002          LDRSB    r0,[r0,#2]            ;1759  ; a_ind
001476  f1a40428          SUB      r4,r4,#0x28           ;1755
00147a  ebc000c0          RSB      r0,r0,r0,LSL #3       ;1759
00147e  eb000040          ADD      r0,r0,r0,LSL #1       ;1759
001482  eb040080          ADD      r0,r4,r0,LSL #2       ;1759
001486  4642              MOV      r2,r8                 ;1701
001488  62c2              STR      r2,[r0,#0x2c]         ;1760
00148a  6302              STR      r2,[r0,#0x30]         ;1760
                  |L1.5260|
00148c  f8805028          STRB     r5,[r0,#0x28]         ;1636
001490  e330              B        |L1.6900|
                  |L1.5266|
001492  f9b1c000          LDRSH    r12,[r1,#0]           ;1830
001496  2000              MOVS     r0,#0                 ;1827
001498  f9b22000          LDRSH    r2,[r2,#0]            ;1829
00149c  f9b71000          LDRSH    r1,[r7,#0]            ;1529
0014a0  e00c              B        |L1.5308|
0014a2  bf00              NOP                            ;1829
                  |L1.5284|
0014a4  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1829
0014a8  eb030343          ADD      r3,r3,r3,LSL #1       ;1829
0014ac  eb040383          ADD      r3,r4,r3,LSL #2       ;1829
0014b0  1c40              ADDS     r0,r0,#1              ;1827
0014b2  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1829
0014b6  f8835028          STRB     r5,[r3,#0x28]         ;1831
0014ba  b2c0              UXTB     r0,r0                 ;1827
                  |L1.5308|
0014bc  4288              CMP      r0,r1                 ;1827
0014be  dbf1              BLT      |L1.5284|
0014c0  e318              B        |L1.6900|
                  |L1.5314|
0014c2  7800              LDRB     r0,[r0,#0]            ;1839  ; viz_stat
0014c4  2801              CMP      r0,#1                 ;1839
0014c6  f04f0000          MOV      r0,#0                 ;1850
0014ca  d012              BEQ      |L1.5362|
0014cc  4641              MOV      r1,r8                 ;1525
0014ce  f9b72000          LDRSH    r2,[r7,#0]            ;1529
0014d2  e00b              B        |L1.5356|
                  |L1.5332|
0014d4  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1843
0014d8  eb030343          ADD      r3,r3,r3,LSL #1       ;1843
0014dc  eb040383          ADD      r3,r4,r3,LSL #2       ;1843
0014e0  1c40              ADDS     r0,r0,#1              ;1841
0014e2  62d9              STR      r1,[r3,#0x2c]         ;1844
0014e4  6319              STR      r1,[r3,#0x30]         ;1845
0014e6  f8835028          STRB     r5,[r3,#0x28]         ;1845
0014ea  b2c0              UXTB     r0,r0                 ;1841
                  |L1.5356|
0014ec  4290              CMP      r0,r2                 ;1841
0014ee  dbf1              BLT      |L1.5332|
0014f0  e300              B        |L1.6900|
                  |L1.5362|
0014f2  f9b1c000          LDRSH    r12,[r1,#0]           ;1830
0014f6  f9b22000          LDRSH    r2,[r2,#0]            ;1829
0014fa  f9b71000          LDRSH    r1,[r7,#0]            ;1529
0014fe  e00b              B        |L1.5400|
                  |L1.5376|
001500  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1852
001504  eb030343          ADD      r3,r3,r3,LSL #1       ;1852
001508  eb040383          ADD      r3,r4,r3,LSL #2       ;1852
00150c  1c40              ADDS     r0,r0,#1              ;1850
00150e  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1852
001512  f8835028          STRB     r5,[r3,#0x28]         ;1854
001516  b2c0              UXTB     r0,r0                 ;1850
                  |L1.5400|
001518  4288              CMP      r0,r1                 ;1850
00151a  dbf1              BLT      |L1.5376|
                  |L1.5404|
00151c  e2ea              B        |L1.6900|
                  |L1.5406|
00151e  7800              LDRB     r0,[r0,#0]            ;1863  ; viz_stat
001520  2801              CMP      r0,#1                 ;1863
001522  f04f0000          MOV      r0,#0                 ;1874
001526  d012              BEQ      |L1.5454|
001528  4641              MOV      r1,r8                 ;1525
00152a  f9b72000          LDRSH    r2,[r7,#0]            ;1529
00152e  e00b              B        |L1.5448|
                  |L1.5424|
001530  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1867
001534  eb030343          ADD      r3,r3,r3,LSL #1       ;1867
001538  eb040383          ADD      r3,r4,r3,LSL #2       ;1867
00153c  1c40              ADDS     r0,r0,#1              ;1865
00153e  62d9              STR      r1,[r3,#0x2c]         ;1868
001540  6319              STR      r1,[r3,#0x30]         ;1869
001542  f8835028          STRB     r5,[r3,#0x28]         ;1869
001546  b2c0              UXTB     r0,r0                 ;1865
                  |L1.5448|
001548  4290              CMP      r0,r2                 ;1865
00154a  dbf1              BLT      |L1.5424|
00154c  e2d2              B        |L1.6900|
                  |L1.5454|
00154e  f9b1c000          LDRSH    r12,[r1,#0]           ;1830
001552  f9b22000          LDRSH    r2,[r2,#0]            ;1829
001556  f9b71000          LDRSH    r1,[r7,#0]            ;1529
00155a  e00b              B        |L1.5492|
                  |L1.5468|
00155c  ebc003c0          RSB      r3,r0,r0,LSL #3       ;1876
001560  eb030343          ADD      r3,r3,r3,LSL #1       ;1876
001564  eb040383          ADD      r3,r4,r3,LSL #2       ;1876
001568  1c40              ADDS     r0,r0,#1              ;1874
00156a  e9c32c0b          STRD     r2,r12,[r3,#0x2c]     ;1876
00156e  f8835028          STRB     r5,[r3,#0x28]         ;1878
001572  b2c0              UXTB     r0,r0                 ;1874
                  |L1.5492|
001574  4288              CMP      r0,r1                 ;1874
001576  dbf1              BLT      |L1.5468|
001578  e2bc              B        |L1.6900|
                  |L1.5498|
00157a  48fb              LDR      r0,|L1.6504|
00157c  f9b01000          LDRSH    r1,[r0,#0]            ;1887  ; CURR_FADE_IN
001580  b151              CBZ      r1,|L1.5528|
001582  48fa              LDR      r0,|L1.6508|
001584  6803              LDR      r3,[r0,#0]            ;1887  ; time_proc
001586  428b              CMP      r3,r1                 ;1887
001588  da06              BGE      |L1.5528|
00158a  4af9              LDR      r2,|L1.6512|
00158c  f9b20000          LDRSH    r0,[r2,#0]            ;1891  ; I_ug_temp
001590  4358              MULS     r0,r3,r0              ;1892
001592  fb90f0f1          SDIV     r0,r0,r1              ;1893
001596  8010              STRH     r0,[r2,#0]            ;1897
                  |L1.5528|
001598  79b0              LDRB     r0,[r6,#6]            ;1900  ; b1Hz_sh
00159a  b398              CBZ      r0,|L1.5636|
00159c  48f5              LDR      r0,|L1.6516|
00159e  8800              LDRH     r0,[r0,#0]            ;1905  ; REV_IS_ON
0015a0  b140              CBZ      r0,|L1.5556|
0015a2  48f5              LDR      r0,|L1.6520|
0015a4  8800              LDRH     r0,[r0,#0]            ;1905  ; AVT_REV_IS_ON
0015a6  b128              CBZ      r0,|L1.5556|
0015a8  48f4              LDR      r0,|L1.6524|
0015aa  7800              LDRB     r0,[r0,#0]            ;1905  ; proc_phase
0015ac  2801              CMP      r0,#1                 ;1905
0015ae  d036              BEQ      |L1.5662|
0015b0  2803              CMP      r0,#3                 ;1905
0015b2  d034              BEQ      |L1.5662|
                  |L1.5556|
0015b4  48f2              LDR      r0,|L1.6528|
0015b6  f9b01000          LDRSH    r1,[r0,#0]            ;1906  ; load_I
0015ba  48ed              LDR      r0,|L1.6512|
0015bc  f9b00000          LDRSH    r0,[r0,#0]            ;1906  ; I_ug_temp
0015c0  4281              CMP      r1,r0                 ;1906
0015c2  da06              BGE      |L1.5586|
0015c4  f8bb1000          LDRH     r1,[r11,#0]           ;1906  ; _x_
0015c8  f1010101          ADD      r1,r1,#1              ;1906
0015cc  f8ab1000          STRH     r1,[r11,#0]           ;1906
0015d0  e006              B        |L1.5600|
                  |L1.5586|
0015d2  dd05              BLE      |L1.5600|
0015d4  f8bb0000          LDRH     r0,[r11,#0]           ;1907  ; _x_
0015d8  f1a00001          SUB      r0,r0,#1              ;1907
0015dc  f8ab0000          STRH     r0,[r11,#0]           ;1907
                  |L1.5600|
0015e0  2232              MOVS     r2,#0x32              ;1909
0015e2  4251              RSBS     r1,r2,#0              ;1909
0015e4  48e7              LDR      r0,|L1.6532|
0015e6  f7fffffe          BL       gran
0015ea  48e7              LDR      r0,|L1.6536|
0015ec  f9b01000          LDRSH    r1,[r0,#0]            ;1911  ; load_U
0015f0  48e6              LDR      r0,|L1.6540|
0015f2  f9b00000          LDRSH    r0,[r0,#0]            ;1911  ; U_maxg
0015f6  4281              CMP      r1,r0                 ;1911
0015f8  da05              BGE      |L1.5638|
0015fa  f8ba1000          LDRH     r1,[r10,#0]           ;1911  ; _xu_
0015fe  f1010101          ADD      r1,r1,#1              ;1911
001602  e005              B        |L1.5648|
                  |L1.5636|
001604  e00b              B        |L1.5662|
                  |L1.5638|
001606  dd05              BLE      |L1.5652|
001608  f8ba1000          LDRH     r1,[r10,#0]           ;1912  ; _xu_
00160c  f1a10101          SUB      r1,r1,#1              ;1912
                  |L1.5648|
001610  f8aa1000          STRH     r1,[r10,#0]           ;1912
                  |L1.5652|
001614  2232              MOVS     r2,#0x32              ;1914
001616  4251              RSBS     r1,r2,#0              ;1914
001618  48dd              LDR      r0,|L1.6544|
00161a  f7fffffe          BL       gran
                  |L1.5662|
00161e  48db              LDR      r0,|L1.6540|
001620  49dc              LDR      r1,|L1.6548|
001622  f9b00000          LDRSH    r0,[r0,#0]            ;1919  ; U_maxg
001626  f9b11000          LDRSH    r1,[r1,#0]            ;1920  ; U_MAX
00162a  ebc02040          RSB      r0,r0,r0,LSL #9       ;1919
00162e  0040              LSLS     r0,r0,#1              ;1919
001630  fb90f0f1          SDIV     r0,r0,r1              ;1920
001634  9000              STR      r0,[sp,#0]            ;1924
001636  48ce              LDR      r0,|L1.6512|
001638  49d7              LDR      r1,|L1.6552|
00163a  f9b00000          LDRSH    r0,[r0,#0]            ;1924  ; I_ug_temp
00163e  f9b11000          LDRSH    r1,[r1,#0]            ;1925  ; I_MAX_IPS
001642  ebc02040          RSB      r0,r0,r0,LSL #9       ;1924
001646  0040              LSLS     r0,r0,#1              ;1924
001648  fb90f0f1          SDIV     r0,r0,r1              ;1925
00164c  4680              MOV      r8,r0                 ;1925
00164e  20ac              MOVS     r0,#0xac              ;1927
001650  f7fffffe          BL       lc640_read_int
001654  f5a0412b          SUB      r1,r0,#0xab00         ;1927
001658  39cd              SUBS     r1,r1,#0xcd           ;1927
00165a  d107              BNE      |L1.5740|
00165c  48cb              LDR      r0,|L1.6540|
00165e  f9b00000          LDRSH    r0,[r0,#0]            ;1929  ; U_maxg
001662  f7fffffe          BL       find_U_curve
001666  eb000080          ADD      r0,r0,r0,LSL #2       ;1929
00166a  9000              STR      r0,[sp,#0]            ;1929
                  |L1.5740|
00166c  20ae              MOVS     r0,#0xae              ;1932
00166e  f7fffffe          BL       lc640_read_int
001672  f5a0412b          SUB      r1,r0,#0xab00         ;1932
001676  39cd              SUBS     r1,r1,#0xcd           ;1932
001678  d107              BNE      |L1.5770|
00167a  48bd              LDR      r0,|L1.6512|
00167c  f9b00000          LDRSH    r0,[r0,#0]            ;1934  ; I_ug_temp
001680  f7fffffe          BL       find_I_curve
001684  eb000080          ADD      r0,r0,r0,LSL #2       ;1934
001688  4680              MOV      r8,r0                 ;1934
                  |L1.5770|
00168a  2000              MOVS     r0,#0                 ;1937
00168c  f9b7c000          LDRSH    r12,[r7,#0]           ;1529
001690  e03c              B        |L1.5900|
                  |L1.5778|
001692  49b8              LDR      r1,|L1.6516|
001694  8809              LDRH     r1,[r1,#0]            ;1939  ; REV_IS_ON
001696  b141              CBZ      r1,|L1.5802|
001698  49b7              LDR      r1,|L1.6520|
00169a  8809              LDRH     r1,[r1,#0]            ;1939  ; AVT_REV_IS_ON
00169c  b129              CBZ      r1,|L1.5802|
00169e  49b7              LDR      r1,|L1.6524|
0016a0  7809              LDRB     r1,[r1,#0]            ;1939  ; proc_phase
0016a2  2901              CMP      r1,#1                 ;1939
0016a4  d010              BEQ      |L1.5832|
0016a6  2903              CMP      r1,#3                 ;1939
0016a8  d00e              BEQ      |L1.5832|
                  |L1.5802|
0016aa  9900              LDR      r1,[sp,#0]            ;1944
0016ac  b20a              SXTH     r2,r1                 ;1944
0016ae  f9ba1000          LDRSH    r1,[r10,#0]           ;1944  ; _xu_
0016b2  1852              ADDS     r2,r2,r1              ;1944
0016b4  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1944
0016b8  eb010141          ADD      r1,r1,r1,LSL #1       ;1944
0016bc  eb040181          ADD      r1,r4,r1,LSL #2       ;1944
0016c0  62ca              STR      r2,[r1,#0x2c]         ;1945
0016c2  d50c              BPL      |L1.5854|
0016c4  62cd              STR      r5,[r1,#0x2c]         ;1945
0016c6  e00f              B        |L1.5864|
                  |L1.5832|
0016c8  ebc001c0          RSB      r1,r0,r0,LSL #3       ;1940
0016cc  eb010141          ADD      r1,r1,r1,LSL #1       ;1940
0016d0  eb040181          ADD      r1,r4,r1,LSL #2       ;1940
0016d4  62cd              STR      r5,[r1,#0x2c]         ;1941
0016d6  630d              STR      r5,[r1,#0x30]         ;1942
0016d8  f8819028          STRB     r9,[r1,#0x28]         ;1942
0016dc  e014              B        |L1.5896|
                  |L1.5854|
0016de  f24033fe          MOV      r3,#0x3fe             ;1946
0016e2  429a              CMP      r2,r3                 ;1946
0016e4  dd00              BLE      |L1.5864|
0016e6  62cb              STR      r3,[r1,#0x2c]         ;1946
                  |L1.5864|
0016e8  f9bb2000          LDRSH    r2,[r11,#0]           ;1947  ; _x_
0016ec  fa0ff388          SXTH     r3,r8                 ;1947
0016f0  189a              ADDS     r2,r3,r2              ;1947
0016f2  630a              STR      r2,[r1,#0x30]         ;1948
0016f4  d501              BPL      |L1.5882|
0016f6  630d              STR      r5,[r1,#0x30]         ;1948
0016f8  e004              B        |L1.5892|
                  |L1.5882|
0016fa  f24033fe          MOV      r3,#0x3fe             ;1949
0016fe  429a              CMP      r2,r3                 ;1949
001700  dd00              BLE      |L1.5892|
001702  630b              STR      r3,[r1,#0x30]         ;1949
                  |L1.5892|
001704  f8815028          STRB     r5,[r1,#0x28]         ;1950
                  |L1.5896|
001708  1c40              ADDS     r0,r0,#1              ;1937
00170a  b2c0              UXTB     r0,r0                 ;1937
                  |L1.5900|
00170c  4560              CMP      r0,r12                ;1937
00170e  dbc0              BLT      |L1.5778|
001710  e1f0              B        |L1.6900|
                  |L1.5906|
001712  4ba2              LDR      r3,|L1.6556|
001714  f9b30000          LDRSH    r0,[r3,#0]            ;1961  ; load_U_
001718  2805              CMP      r0,#5                 ;1961
00171a  dd02              BLE      |L1.5922|
00171c  f8869009          STRB     r9,[r6,#9]            ;1961
001720  e000              B        |L1.5924|
                  |L1.5922|
001722  7275              STRB     r5,[r6,#9]            ;1962
                  |L1.5924|
001724  f8dfc278          LDR      r12,|L1.6560|
001728  2264              MOVS     r2,#0x64              ;1964
00172a  f9bc1000          LDRSH    r1,[r12,#0]           ;1964  ; U_up_temp
00172e  fb91f2f2          SDIV     r2,r1,r2              ;1964
001732  9200              STR      r2,[sp,#0]            ;1965
001734  2a00              CMP      r2,#0                 ;1965
001736  dc01              BGT      |L1.5948|
001738  2201              MOVS     r2,#1                 ;1965
00173a  9200              STR      r2,[sp,#0]            ;1965
                  |L1.5948|
00173c  1a40              SUBS     r0,r0,r1              ;1966
00173e  b200              SXTH     r0,r0                 ;1966
001740  f7fffffe          BL       abs
001744  9900              LDR      r1,[sp,#0]            ;1966
001746  b209              SXTH     r1,r1                 ;1966
001748  4288              CMP      r0,r1                 ;1966
00174a  da02              BGE      |L1.5970|
00174c  f886900a          STRB     r9,[r6,#0xa]          ;1966
001750  e000              B        |L1.5972|
                  |L1.5970|
001752  72b5              STRB     r5,[r6,#0xa]          ;1967
                  |L1.5972|
001754  7235              STRB     r5,[r6,#8]            ;1971
001756  7ab0              LDRB     r0,[r6,#0xa]          ;1973  ; bU_VALID_VALID
001758  b178              CBZ      r0,|L1.6010|
00175a  7af0              LDRB     r0,[r6,#0xb]          ;1975  ; bPRECESSION_REG
00175c  b3b0              CBZ      r0,|L1.6092|
00175e  488f              LDR      r0,|L1.6556|
001760  72f5              STRB     r5,[r6,#0xb]          ;1977
001762  f9b01000          LDRSH    r1,[r0,#0]            ;1978  ; load_U_
001766  488e              LDR      r0,|L1.6560|
001768  f9b00000          LDRSH    r0,[r0,#0]            ;1978  ; U_up_temp
00176c  4281              CMP      r1,r0                 ;1978
00176e  db29              BLT      |L1.6084|
001770  dc2e              BGT      |L1.6096|
001772  e031              B        |L1.6104|
                  |L1.6004|
001774  f8aa1000          STRH     r1,[r10,#0]           ;1979
001778  e02e              B        |L1.6104|
                  |L1.6010|
00177a  79b0              LDRB     r0,[r6,#6]            ;1983  ; b1Hz_sh
00177c  b330              CBZ      r0,|L1.6092|
00177e  7a70              LDRB     r0,[r6,#9]            ;1983  ; bU_VALID
001780  b320              CBZ      r0,|L1.6092|
001782  487f              LDR      r0,|L1.6528|
001784  f9b01000          LDRSH    r1,[r0,#0]            ;1985  ; load_I
001788  4886              LDR      r0,|L1.6564|
00178a  f9b00000          LDRSH    r0,[r0,#0]            ;1985  ; I_maxp
00178e  4281              CMP      r1,r0                 ;1985
001790  da04              BGE      |L1.6044|
001792  f8bb1000          LDRH     r1,[r11,#0]           ;1985  ; _x_
001796  f1010101          ADD      r1,r1,#1              ;1985
00179a  e004              B        |L1.6054|
                  |L1.6044|
00179c  dd05              BLE      |L1.6058|
00179e  f8bb1000          LDRH     r1,[r11,#0]           ;1986  ; _x_
0017a2  f1a10101          SUB      r1,r1,#1              ;1986
                  |L1.6054|
0017a6  f8ab1000          STRH     r1,[r11,#0]           ;1986
                  |L1.6058|
0017aa  2232              MOVS     r2,#0x32              ;1987
0017ac  4251              RSBS     r1,r2,#0              ;1987
0017ae  4875              LDR      r0,|L1.6532|
0017b0  f7fffffe          BL       gran
0017b4  4879              LDR      r0,|L1.6556|
0017b6  f9b01000          LDRSH    r1,[r0,#0]            ;1989  ; load_U_
0017ba  4879              LDR      r0,|L1.6560|
0017bc  f9b00000          LDRSH    r0,[r0,#0]            ;1989  ; U_up_temp
0017c0  4281              CMP      r1,r0                 ;1989
0017c2  da04              BGE      |L1.6094|
                  |L1.6084|
0017c4  f8ba1000          LDRH     r1,[r10,#0]           ;1989  ; _xu_
0017c8  1c49              ADDS     r1,r1,#1              ;1989
0017ca  e7d3              B        |L1.6004|
                  |L1.6092|
0017cc  e009              B        |L1.6114|
                  |L1.6094|
0017ce  dd03              BLE      |L1.6104|
                  |L1.6096|
0017d0  f8ba1000          LDRH     r1,[r10,#0]           ;1990  ; _xu_
0017d4  1e49              SUBS     r1,r1,#1              ;1990
0017d6  e7cd              B        |L1.6004|
                  |L1.6104|
0017d8  2232              MOVS     r2,#0x32              ;1991
0017da  4251              RSBS     r1,r2,#0              ;1991
0017dc  486c              LDR      r0,|L1.6544|
0017de  f7fffffe          BL       gran
                  |L1.6114|
0017e2  486f              LDR      r0,|L1.6560|
0017e4  f44f7161          MOV      r1,#0x384             ;1997
0017e8  f9b00000          LDRSH    r0,[r0,#0]            ;1997  ; U_up_temp
0017ec  4348              MULS     r0,r1,r0              ;1997
0017ee  4969              LDR      r1,|L1.6548|
0017f0  f9b11000          LDRSH    r1,[r1,#0]            ;1998  ; U_MAX
0017f4  fb90f0f1          SDIV     r0,r0,r1              ;1998
0017f8  3032              ADDS     r0,r0,#0x32           ;1999
0017fa  9000              STR      r0,[sp,#0]            ;2001
0017fc  20ac              MOVS     r0,#0xac              ;2001
0017fe  f7fffffe          BL       lc640_read_int
001802  f5a0412b          SUB      r1,r0,#0xab00         ;2001
001806  39cd              SUBS     r1,r1,#0xcd           ;2001
001808  d107              BNE      |L1.6170|
00180a  4865              LDR      r0,|L1.6560|
00180c  f9b00000          LDRSH    r0,[r0,#0]            ;2003  ; U_up_temp
001810  f7fffffe          BL       find_U_curve
001814  eb000080          ADD      r0,r0,r0,LSL #2       ;2003
001818  9000              STR      r0,[sp,#0]            ;2003
                  |L1.6170|
00181a  f8df8188          LDR      r8,|L1.6564|
00181e  495e              LDR      r1,|L1.6552|
001820  f9b80000          LDRSH    r0,[r8,#0]            ;2009  ; I_maxp
001824  f9b11000          LDRSH    r1,[r1,#0]            ;2010  ; I_MAX_IPS
001828  ebc02040          RSB      r0,r0,r0,LSL #9       ;2009
00182c  0040              LSLS     r0,r0,#1              ;2009
00182e  fb90f0f1          SDIV     r0,r0,r1              ;2010
001832  9001              STR      r0,[sp,#4]            ;2012
001834  20ae              MOVS     r0,#0xae              ;2012
001836  f7fffffe          BL       lc640_read_int
00183a  f5a0412b          SUB      r1,r0,#0xab00         ;2012
00183e  39cd              SUBS     r1,r1,#0xcd           ;2012
001840  d106              BNE      |L1.6224|
001842  f9b80000          LDRSH    r0,[r8,#0]            ;2014  ; I_maxp
001846  f7fffffe          BL       find_I_curve
00184a  eb000080          ADD      r0,r0,r0,LSL #2       ;2014
00184e  9001              STR      r0,[sp,#4]            ;2014
                  |L1.6224|
001850  2000              MOVS     r0,#0                 ;2017
001852  f9b78000          LDRSH    r8,[r7,#0]            ;1529
001856  e046              B        |L1.6374|
                  |L1.6232|
001858  4946              LDR      r1,|L1.6516|
00185a  8809              LDRH     r1,[r1,#0]            ;2019  ; REV_IS_ON
00185c  b141              CBZ      r1,|L1.6256|
00185e  4946              LDR      r1,|L1.6520|
001860  8809              LDRH     r1,[r1,#0]            ;2019  ; AVT_REV_IS_ON
001862  b129              CBZ      r1,|L1.6256|
001864  4945              LDR      r1,|L1.6524|
001866  7809              LDRB     r1,[r1,#0]            ;2019  ; proc_phase
001868  2901              CMP      r1,#1                 ;2019
00186a  d015              BEQ      |L1.6296|
00186c  2903              CMP      r1,#3                 ;2019
00186e  d013              BEQ      |L1.6296|
                  |L1.6256|
001870  ebc001c0          RSB      r1,r0,r0,LSL #3       ;2024
001874  eb010141          ADD      r1,r1,r1,LSL #1       ;2024
001878  eb040c81          ADD      r12,r4,r1,LSL #2      ;2024
00187c  9900              LDR      r1,[sp,#0]            ;2024
00187e  f9bc2050          LDRSH    r2,[r12,#0x50]        ;2024
001882  b20b              SXTH     r3,r1                 ;2024
001884  f9ba1000          LDRSH    r1,[r10,#0]           ;2024  ; _xu_
001888  4419              ADD      r1,r1,r3              ;2024
00188a  1851              ADDS     r1,r2,r1              ;2024
00188c  f8cc102c          STR      r1,[r12,#0x2c]        ;2025
001890  d50d              BPL      |L1.6318|
001892  f8cc502c          STR      r5,[r12,#0x2c]        ;2025
001896  e010              B        |L1.6330|
                  |L1.6296|
001898  ebc001c0          RSB      r1,r0,r0,LSL #3       ;2020
00189c  eb010141          ADD      r1,r1,r1,LSL #1       ;2020
0018a0  eb040181          ADD      r1,r4,r1,LSL #2       ;2020
0018a4  62cd              STR      r5,[r1,#0x2c]         ;2021
0018a6  630d              STR      r5,[r1,#0x30]         ;2022
0018a8  f8819028          STRB     r9,[r1,#0x28]         ;2022
0018ac  e019              B        |L1.6370|
                  |L1.6318|
0018ae  f24032fe          MOV      r2,#0x3fe             ;2026
0018b2  4291              CMP      r1,r2                 ;2026
0018b4  dd01              BLE      |L1.6330|
0018b6  f8cc202c          STR      r2,[r12,#0x2c]        ;2026
                  |L1.6330|
0018ba  9901              LDR      r1,[sp,#4]            ;2027
0018bc  b20a              SXTH     r2,r1                 ;2027
0018be  f9bb1000          LDRSH    r1,[r11,#0]           ;2027  ; _x_
0018c2  1851              ADDS     r1,r2,r1              ;2027
0018c4  f8cc1030          STR      r1,[r12,#0x30]        ;2028
0018c8  d503              BPL      |L1.6354|
0018ca  f8cc5030          STR      r5,[r12,#0x30]        ;2028
0018ce  e006              B        |L1.6366|
                  |L1.6352|
0018d0  e10a              B        |L1.6888|
                  |L1.6354|
0018d2  f24032fe          MOV      r2,#0x3fe             ;2029
0018d6  4291              CMP      r1,r2                 ;2029
0018d8  dd01              BLE      |L1.6366|
0018da  f8cc2030          STR      r2,[r12,#0x30]        ;2029
                  |L1.6366|
0018de  f88c5028          STRB     r5,[r12,#0x28]        ;2030
                  |L1.6370|
0018e2  1c40              ADDS     r0,r0,#1              ;2017
0018e4  b2c0              UXTB     r0,r0                 ;2017
                  |L1.6374|
0018e6  4540              CMP      r0,r8                 ;2017
0018e8  dbb6              BLT      |L1.6232|
0018ea  492f              LDR      r1,|L1.6568|
0018ec  9800              LDR      r0,[sp,#0]            ;2042
0018ee  8008              STRH     r0,[r1,#0]            ;2042
0018f0  492e              LDR      r1,|L1.6572|
0018f2  6ae0              LDR      r0,[r4,#0x2c]         ;2043  ; bps
0018f4  8008              STRH     r0,[r1,#0]            ;2043
0018f6  e0fd              B        |L1.6900|
                  |L1.6392|
0018f8  79b0              LDRB     r0,[r6,#6]            ;2055  ; b1Hz_sh
0018fa  b398              CBZ      r0,|L1.6500|
0018fc  482c              LDR      r0,|L1.6576|
0018fe  7800              LDRB     r0,[r0,#0]            ;2056  ; bOFF
001900  bb80              CBNZ     r0,|L1.6500|
001902  482c              LDR      r0,|L1.6580|
001904  f9b00000          LDRSH    r0,[r0,#0]            ;2057  ; CAP_WRK_CURR
001908  eb000180          ADD      r1,r0,r0,LSL #2       ;2057
00190c  481c              LDR      r0,|L1.6528|
00190e  f9b00000          LDRSH    r0,[r0,#0]            ;2057  ; load_I
001912  ebb00f41          CMP      r0,r1,LSL #1          ;2057
001916  da04              BGE      |L1.6434|
001918  f8bb1000          LDRH     r1,[r11,#0]           ;2057  ; _x_
00191c  f1010101          ADD      r1,r1,#1              ;2057
001920  e004              B        |L1.6444|
                  |L1.6434|
001922  dd05              BLE      |L1.6448|
001924  f8bb1000          LDRH     r1,[r11,#0]           ;2058  ; _x_
001928  f1a10101          SUB      r1,r1,#1              ;2058
                  |L1.6444|
00192c  f8ab1000          STRH     r1,[r11,#0]           ;2058
                  |L1.6448|
001930  4642              MOV      r2,r8                 ;2059
001932  4629              MOV      r1,r5                 ;2059
001934  4813              LDR      r0,|L1.6532|
001936  f7fffffe          BL       gran
00193a  2232              MOVS     r2,#0x32              ;2060
00193c  4251              RSBS     r1,r2,#0              ;2060
00193e  4811              LDR      r0,|L1.6532|
001940  f7fffffe          BL       gran
001944  481c              LDR      r0,|L1.6584|
001946  f9b00000          LDRSH    r0,[r0,#0]            ;2062  ; CAP_MAX_VOLT
00194a  eb000180          ADD      r1,r0,r0,LSL #2       ;2062
00194e  480e              LDR      r0,|L1.6536|
001950  f9b00000          LDRSH    r0,[r0,#0]            ;2062  ; load_U
001954  ebb00f41          CMP      r0,r1,LSL #1          ;2062
001958  da30              BGE      |L1.6588|
00195a  f8ba1000          LDRH     r1,[r10,#0]           ;2062  ; _xu_
00195e  f1010101          ADD      r1,r1,#1              ;2062
001962  e030              B        |L1.6598|
                  |L1.6500|
001964  e03b              B        |L1.6622|
001966  0000              DCW      0x0000
                  |L1.6504|
                          DCD      CURR_FADE_IN
                  |L1.6508|
                          DCD      time_proc
                  |L1.6512|
                          DCD      I_ug_temp
                  |L1.6516|
                          DCD      REV_IS_ON
                  |L1.6520|
                          DCD      AVT_REV_IS_ON
                  |L1.6524|
                          DCD      proc_phase
                  |L1.6528|
                          DCD      load_I
                  |L1.6532|
                          DCD      _x_
                  |L1.6536|
                          DCD      load_U
                  |L1.6540|
                          DCD      U_maxg
                  |L1.6544|
                          DCD      _xu_
                  |L1.6548|
                          DCD      U_MAX
                  |L1.6552|
                          DCD      I_MAX_IPS
                  |L1.6556|
                          DCD      load_U_
                  |L1.6560|
                          DCD      U_up_temp
                  |L1.6564|
                          DCD      I_maxp
                  |L1.6568|
                          DCD      plazma_vol_u_0
                  |L1.6572|
                          DCD      plazma_vol_u_1
                  |L1.6576|
                          DCD      bOFF
                  |L1.6580|
                          DCD      CAP_WRK_CURR
                  |L1.6584|
                          DCD      CAP_MAX_VOLT
                  |L1.6588|
0019bc  dd05              BLE      |L1.6602|
0019be  f8ba1000          LDRH     r1,[r10,#0]           ;2063  ; _xu_
0019c2  f1a10101          SUB      r1,r1,#1              ;2063
                  |L1.6598|
0019c6  f8aa1000          STRH     r1,[r10,#0]           ;2063
                  |L1.6602|
0019ca  4642              MOV      r2,r8                 ;2064
0019cc  4629              MOV      r1,r5                 ;2064
0019ce  48fc              LDR      r0,|L1.7616|
0019d0  f7fffffe          BL       gran
0019d4  2232              MOVS     r2,#0x32              ;2065
0019d6  4251              RSBS     r1,r2,#0              ;2065
0019d8  48fa              LDR      r0,|L1.7620|
0019da  f7fffffe          BL       gran
                  |L1.6622|
0019de  48fa              LDR      r0,|L1.7624|
0019e0  f24271ec          MOV      r1,#0x27ec            ;2070
0019e4  f9b00000          LDRSH    r0,[r0,#0]            ;2070  ; CAP_MAX_VOLT
0019e8  4348              MULS     r0,r1,r0              ;2070
0019ea  49f8              LDR      r1,|L1.7628|
0019ec  f9b11000          LDRSH    r1,[r1,#0]            ;2071  ; U_MAX
0019f0  fb90f0f1          SDIV     r0,r0,r1              ;2071
0019f4  9000              STR      r0,[sp,#0]            ;2075
0019f6  48f6              LDR      r0,|L1.7632|
0019f8  f24271ec          MOV      r1,#0x27ec            ;2075
0019fc  f9b00000          LDRSH    r0,[r0,#0]            ;2075  ; CAP_WRK_CURR
001a00  4348              MULS     r0,r1,r0              ;2075
001a02  49f4              LDR      r1,|L1.7636|
001a04  f9b11000          LDRSH    r1,[r1,#0]            ;2076  ; I_MAX_IPS
001a08  fb90f0f1          SDIV     r0,r0,r1              ;2076
001a0c  9001              STR      r0,[sp,#4]            ;2078
001a0e  20ac              MOVS     r0,#0xac              ;2078
001a10  f7fffffe          BL       lc640_read_int
001a14  f5a0412b          SUB      r1,r0,#0xab00         ;2078
001a18  39cd              SUBS     r1,r1,#0xcd           ;2078
001a1a  d10a              BNE      |L1.6706|
001a1c  48ea              LDR      r0,|L1.7624|
001a1e  8800              LDRH     r0,[r0,#0]            ;2080  ; CAP_MAX_VOLT
001a20  eb000080          ADD      r0,r0,r0,LSL #2       ;2080
001a24  0040              LSLS     r0,r0,#1              ;2080
001a26  b200              SXTH     r0,r0                 ;2080
001a28  f7fffffe          BL       find_U_curve
001a2c  eb000080          ADD      r0,r0,r0,LSL #2       ;2080
001a30  9000              STR      r0,[sp,#0]            ;2080
                  |L1.6706|
001a32  20ae              MOVS     r0,#0xae              ;2083
001a34  f7fffffe          BL       lc640_read_int
001a38  f5a0412b          SUB      r1,r0,#0xab00         ;2083
001a3c  39cd              SUBS     r1,r1,#0xcd           ;2083
001a3e  d10a              BNE      |L1.6742|
001a40  48e3              LDR      r0,|L1.7632|
001a42  8800              LDRH     r0,[r0,#0]            ;2085  ; CAP_WRK_CURR
001a44  eb000080          ADD      r0,r0,r0,LSL #2       ;2085
001a48  0040              LSLS     r0,r0,#1              ;2085
001a4a  b200              SXTH     r0,r0                 ;2085
001a4c  f7fffffe          BL       find_I_curve
001a50  eb000080          ADD      r0,r0,r0,LSL #2       ;2085
001a54  9001              STR      r0,[sp,#4]            ;2085
                  |L1.6742|
001a56  2000              MOVS     r0,#0                 ;2090
001a58  f9b71000          LDRSH    r1,[r7,#0]            ;1529
001a5c  e035              B        |L1.6858|
                  |L1.6750|
001a5e  4ade              LDR      r2,|L1.7640|
001a60  7812              LDRB     r2,[r2,#0]            ;2092  ; bOFF
001a62  b152              CBZ      r2,|L1.6778|
001a64  ebc002c0          RSB      r2,r0,r0,LSL #3       ;2093
001a68  eb020242          ADD      r2,r2,r2,LSL #1       ;2093
001a6c  eb040282          ADD      r2,r4,r2,LSL #2       ;2093
001a70  62d5              STR      r5,[r2,#0x2c]         ;2094
001a72  6315              STR      r5,[r2,#0x30]         ;2095
001a74  f8829028          STRB     r9,[r2,#0x28]         ;2095
001a78  e025              B        |L1.6854|
                  |L1.6778|
001a7a  9a00              LDR      r2,[sp,#0]            ;2097
001a7c  b213              SXTH     r3,r2                 ;2097
001a7e  f9ba2000          LDRSH    r2,[r10,#0]           ;2097  ; _xu_
001a82  189a              ADDS     r2,r3,r2              ;2097
001a84  ebc003c0          RSB      r3,r0,r0,LSL #3       ;2097
001a88  eb030343          ADD      r3,r3,r3,LSL #1       ;2097
001a8c  eb040c83          ADD      r12,r4,r3,LSL #2      ;2097
001a90  f8cc202c          STR      r2,[r12,#0x2c]        ;2098
001a94  d502              BPL      |L1.6812|
001a96  f8cc502c          STR      r5,[r12,#0x2c]        ;2098
001a9a  e003              B        |L1.6820|
                  |L1.6812|
001a9c  4542              CMP      r2,r8                 ;2099
001a9e  dd01              BLE      |L1.6820|
001aa0  f8cc802c          STR      r8,[r12,#0x2c]        ;2099
                  |L1.6820|
001aa4  9a01              LDR      r2,[sp,#4]            ;2100
001aa6  b213              SXTH     r3,r2                 ;2100
001aa8  f9bb2000          LDRSH    r2,[r11,#0]           ;2100  ; _x_
001aac  189a              ADDS     r2,r3,r2              ;2100
001aae  f8cc2030          STR      r2,[r12,#0x30]        ;2101
001ab2  d502              BPL      |L1.6842|
001ab4  f8cc5030          STR      r5,[r12,#0x30]        ;2101
001ab8  e003              B        |L1.6850|
                  |L1.6842|
001aba  4542              CMP      r2,r8                 ;2102
001abc  dd01              BLE      |L1.6850|
001abe  f8cc8030          STR      r8,[r12,#0x30]        ;2102
                  |L1.6850|
001ac2  f88c5028          STRB     r5,[r12,#0x28]        ;2103
                  |L1.6854|
001ac6  1c40              ADDS     r0,r0,#1              ;2090
001ac8  b2c0              UXTB     r0,r0                 ;2090
                  |L1.6858|
001aca  4288              CMP      r0,r1                 ;2090
001acc  dbc7              BLT      |L1.6750|
001ace  e011              B        |L1.6900|
                  |L1.6864|
;;;2113   		{
;;;2114   		bps[i]._vol_u=0;
001ad0  ebc002c0          RSB      r2,r0,r0,LSL #3
001ad4  eb020242          ADD      r2,r2,r2,LSL #1
001ad8  eb040282          ADD      r2,r4,r2,LSL #2
001adc  1c40              ADDS     r0,r0,#1              ;2112
;;;2115   		bps[i]._vol_i=0;
001ade  62d5              STR      r5,[r2,#0x2c]
;;;2116   		bps[i]._flags_tu=1;
001ae0  6315              STR      r5,[r2,#0x30]
001ae2  f8823028          STRB     r3,[r2,#0x28]
001ae6  b2c0              UXTB     r0,r0                 ;2112
                  |L1.6888|
001ae8  4288              CMP      r0,r1                 ;2112
001aea  dbf1              BLT      |L1.6864|
;;;2117   		}
;;;2118   	_x_=0;
001aec  f8ab5000          STRH     r5,[r11,#0]
;;;2119   	_xu_=0;
001af0  f8aa5000          STRH     r5,[r10,#0]
                  |L1.6900|
;;;2120   	}
;;;2121   
;;;2122   //gran(&bps[0]._vol_u,10,1010);
;;;2123   //gran(&bps[0]._vol_i,10,1010);
;;;2124   
;;;2125   if(pwm_t_reg)
001af4  49b9              LDR      r1,|L1.7644|
001af6  f9b10000          LDRSH    r0,[r1,#0]  ; pwm_t_reg
001afa  b1e8              CBZ      r0,|L1.6968|
;;;2126   	{
;;;2127   	if(--pwm_t_reg==0)
001afc  1e40              SUBS     r0,r0,#1
001afe  b200              SXTH     r0,r0
001b00  8008              STRH     r0,[r1,#0]
;;;2128   		{
;;;2129   		pwm_u_reg=0;
001b02  4ab7              LDR      r2,|L1.7648|
;;;2130   		pwm_i_reg=0;
001b04  49b7              LDR      r1,|L1.7652|
001b06  b908              CBNZ     r0,|L1.6924|
001b08  8015              STRH     r5,[r2,#0]            ;2129
001b0a  800d              STRH     r5,[r1,#0]
                  |L1.6924|
;;;2131   		}
;;;2132   	for(i=0;i<NUMIST;i++) 
001b0c  f9b1c000          LDRSH    r12,[r1,#0]
001b10  2000              MOVS     r0,#0
001b12  f9b22000          LDRSH    r2,[r2,#0]
001b16  f9b71000          LDRSH    r1,[r7,#0]            ;1529
001b1a  e00b              B        |L1.6964|
                  |L1.6940|
;;;2133   		{
;;;2134   		bps[i]._vol_u=pwm_u_reg;
001b1c  ebc003c0          RSB      r3,r0,r0,LSL #3
001b20  eb030343          ADD      r3,r3,r3,LSL #1
001b24  eb040383          ADD      r3,r4,r3,LSL #2
001b28  1c40              ADDS     r0,r0,#1              ;2132
001b2a  e9c32c0b          STRD     r2,r12,[r3,#0x2c]
;;;2135   		bps[i]._vol_i=pwm_i_reg;
;;;2136   		bps[i]._flags_tu=0;
001b2e  f8835028          STRB     r5,[r3,#0x28]
001b32  b2c0              UXTB     r0,r0                 ;2132
                  |L1.6964|
001b34  4288              CMP      r0,r1                 ;2132
001b36  dbf1              BLT      |L1.6940|
                  |L1.6968|
;;;2137   		}
;;;2138   	}
;;;2139   
;;;2140   
;;;2141   for(i=0;i<NUMIST;i++) 
001b38  2000              MOVS     r0,#0
001b3a  464b              MOV      r3,r9                 ;1481
001b3c  f9b71000          LDRSH    r1,[r7,#0]            ;1529
001b40  e010              B        |L1.7012|
;;;2142   	{
;;;2143   	if(bps[i]._av&0x8f)
001b42  bf00              NOP      
                  |L1.6980|
001b44  ebc002c0          RSB      r2,r0,r0,LSL #3
001b48  eb020242          ADD      r2,r2,r2,LSL #1
001b4c  eb040282          ADD      r2,r4,r2,LSL #2
001b50  7857              LDRB     r7,[r2,#1]
001b52  f0170f8f          TST      r7,#0x8f
001b56  d003              BEQ      |L1.7008|
;;;2144   		{
;;;2145   		bps[i]._vol_u=0;
;;;2146   		bps[i]._vol_i=0;
001b58  62d5              STR      r5,[r2,#0x2c]
;;;2147   		bps[i]._flags_tu=1;
001b5a  6315              STR      r5,[r2,#0x30]
001b5c  f8823028          STRB     r3,[r2,#0x28]
                  |L1.7008|
001b60  1c40              ADDS     r0,r0,#1              ;2141
001b62  b2c0              UXTB     r0,r0                 ;2141
                  |L1.7012|
001b64  4288              CMP      r0,r1                 ;2141
001b66  dbed              BLT      |L1.6980|
;;;2148   		}
;;;2149   	}
;;;2150   
;;;2151   b1Hz_sh=0;
001b68  71b5              STRB     r5,[r6,#6]
;;;2152   }
001b6a  e8bd9ffc          POP      {r2-r12,pc}
;;;2153   
                          ENDP

                  bps_drv PROC
;;;2162   //-----------------------------------------------
;;;2163   void bps_drv(char in)
001b6e  ebc000c0          RSB      r0,r0,r0,LSL #3
;;;2164   {
;;;2165   char temp;
;;;2166   
;;;2167   if (bps[in]._device!=dSRC) return;
001b72  eb000140          ADD      r1,r0,r0,LSL #1
001b76  489c              LDR      r0,|L1.7656|
001b78  b510              PUSH     {r4,lr}               ;2164
001b7a  f8102021          LDRB     r2,[r0,r1,LSL #2]
001b7e  2a03              CMP      r2,#3
001b80  d17e              BNE      |L1.7296|
;;;2168   temp=bps[in]._flags_tm;
001b82  eb000081          ADD      r0,r0,r1,LSL #2
;;;2169   if(temp&(1<<AV_T))
;;;2170   	{
;;;2171   	if(bps[in]._temp_av_cnt<10) 
;;;2172   		{
;;;2173   		bps[in]._temp_av_cnt++;
;;;2174   		if(bps[in]._temp_av_cnt>=10)
;;;2175   			{
;;;2176   			bps[in]._temp_av_cnt=10;
001b86  f04f010a          MOV      r1,#0xa
001b8a  f890203e          LDRB     r2,[r0,#0x3e]         ;2168
001b8e  0793              LSLS     r3,r2,#30             ;2169
;;;2177   			bps[in]._av|=(1<<0);
;;;2178   		   	//if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
;;;2179   			}
;;;2180   		}
;;;2181   	}
;;;2182   
;;;2183   else if(!(temp&(1<<AV_T)))
;;;2184   	{
;;;2185   	if(bps[in]._temp_av_cnt) 
001b90  f9b03042          LDRSH    r3,[r0,#0x42]
001b94  d50d              BPL      |L1.7090|
001b96  2b0a              CMP      r3,#0xa               ;2171
001b98  da16              BGE      |L1.7112|
001b9a  1c5b              ADDS     r3,r3,#1              ;2173
001b9c  b21b              SXTH     r3,r3                 ;2173
001b9e  f8a03042          STRH     r3,[r0,#0x42]         ;2173
001ba2  2b0a              CMP      r3,#0xa               ;2174
001ba4  db10              BLT      |L1.7112|
001ba6  f8a01042          STRH     r1,[r0,#0x42]         ;2176
001baa  7843              LDRB     r3,[r0,#1]            ;2177
001bac  f0430301          ORR      r3,r3,#1              ;2177
001bb0  e009              B        |L1.7110|
                  |L1.7090|
001bb2  b14b              CBZ      r3,|L1.7112|
;;;2186   		{
;;;2187   		bps[in]._temp_av_cnt--;
001bb4  f1a30301          SUB      r3,r3,#1
001bb8  b21b              SXTH     r3,r3
001bba  f8a03042          STRH     r3,[r0,#0x42]
;;;2188   		if(!bps[in]._temp_av_cnt)
001bbe  b91b              CBNZ     r3,|L1.7112|
;;;2189   			{
;;;2190   			bps[in]._av&=~(1<<0);
001bc0  7843              LDRB     r3,[r0,#1]
001bc2  f0230301          BIC      r3,r3,#1
                  |L1.7110|
001bc6  7043              STRB     r3,[r0,#1]
                  |L1.7112|
;;;2191   			//if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
;;;2192   			}
;;;2193   		} 	
;;;2194   
;;;2195   	}
;;;2196   
;;;2197   if((temp&(1<<AVUMAX)))
001bc8  0713              LSLS     r3,r2,#28
;;;2198   	{
;;;2199   	if(bps[in]._umax_av_cnt<10) 
;;;2200   		{
;;;2201   		bps[in]._umax_av_cnt++;
;;;2202   		if(bps[in]._umax_av_cnt>=10)
;;;2203   			{ 
;;;2204   			bps[in]._umax_av_cnt=10;
;;;2205   			bps[in]._av|=(1<<1);
;;;2206   			//if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
;;;2207   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;2208   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2209   				{
;;;2210   				apv_cnt[in,0]=APV_INIT;
;;;2211   				apv_cnt[in,1]=APV_INIT;
;;;2212   				apv_cnt[in,2]=APV_INIT;
;;;2213   				apv_flags[in]=afOFF;
;;;2214   				}				*/
;;;2215   						
;;;2216   			}
;;;2217   		} 
;;;2218   	}		
;;;2219   else if(!(temp&(1<<AVUMAX)))
;;;2220   	{
;;;2221   	if(bps[in]._umax_av_cnt>0) 
001bca  f9b03044          LDRSH    r3,[r0,#0x44]
001bce  f04f0400          MOV      r4,#0                 ;2171
001bd2  d50d              BPL      |L1.7152|
001bd4  2b0a              CMP      r3,#0xa               ;2199
001bd6  da1b              BGE      |L1.7184|
001bd8  1c5b              ADDS     r3,r3,#1              ;2201
001bda  b21b              SXTH     r3,r3                 ;2201
001bdc  f8a03044          STRH     r3,[r0,#0x44]         ;2201
001be0  2b0a              CMP      r3,#0xa               ;2202
001be2  db15              BLT      |L1.7184|
001be4  f8a01044          STRH     r1,[r0,#0x44]         ;2204
001be8  7843              LDRB     r3,[r0,#1]            ;2205
001bea  f0430302          ORR      r3,r3,#2              ;2205
001bee  e00a              B        |L1.7174|
                  |L1.7152|
001bf0  2b00              CMP      r3,#0
001bf2  dd0a              BLE      |L1.7178|
;;;2222   		{
;;;2223   		bps[in]._umax_av_cnt--;
001bf4  f1a30301          SUB      r3,r3,#1
001bf8  b21b              SXTH     r3,r3
001bfa  f8a03044          STRH     r3,[r0,#0x44]
;;;2224   		if(bps[in]._umax_av_cnt==0)
001bfe  b93b              CBNZ     r3,|L1.7184|
;;;2225   			{
;;;2226   			bps[in]._umax_av_cnt=0;
;;;2227   			bps[in]._av&=~(1<<1);
001c00  7843              LDRB     r3,[r0,#1]
001c02  f0230302          BIC      r3,r3,#2
                  |L1.7174|
001c06  7043              STRB     r3,[r0,#1]
001c08  e002              B        |L1.7184|
                  |L1.7178|
;;;2228   			//avar_bps_hndl(in,1,0);
;;;2229   	 //		apv_cnt[in,0]=0;
;;;2230   	//		apv_cnt[in,1]=0;
;;;2231   	 //		apv_cnt[in,2]=0;			
;;;2232   			}
;;;2233   		}
;;;2234   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
001c0a  da01              BGE      |L1.7184|
001c0c  f8a04044          STRH     r4,[r0,#0x44]
                  |L1.7184|
;;;2235   	}
;;;2236   
;;;2237   if(temp&(1<<AVUMIN))
001c10  06d3              LSLS     r3,r2,#27
001c12  d50f              BPL      |L1.7220|
;;;2238   	{
;;;2239   	if(bps[in]._umin_av_cnt<10) 
001c14  f9b03046          LDRSH    r3,[r0,#0x46]
001c18  2b0a              CMP      r3,#0xa
001c1a  da17              BGE      |L1.7244|
;;;2240   		{
;;;2241   		bps[in]._umin_av_cnt++;
001c1c  1c5b              ADDS     r3,r3,#1
001c1e  b21b              SXTH     r3,r3
001c20  f8a03046          STRH     r3,[r0,#0x46]
;;;2242   		if(bps[in]._umin_av_cnt>=10)
001c24  2b0a              CMP      r3,#0xa
001c26  db11              BLT      |L1.7244|
;;;2243   			{ 
;;;2244   			bps[in]._umin_av_cnt=10;
001c28  f8a01046          STRH     r1,[r0,#0x46]
;;;2245   			bps[in]._av|=(1<<2);
001c2c  7841              LDRB     r1,[r0,#1]
001c2e  f0410104          ORR      r1,r1,#4
001c32  e00a              B        |L1.7242|
                  |L1.7220|
;;;2246   			//if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
;;;2247   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;2248   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;2249   				{
;;;2250   				apv_cnt[in,0]=APV_INIT;
;;;2251   				apv_cnt[in,1]=APV_INIT;
;;;2252   				apv_cnt[in,2]=APV_INIT;
;;;2253   				apv_flags[in]=afOFF;
;;;2254   				}*/				
;;;2255   			}
;;;2256   		} 
;;;2257   	}	
;;;2258   	
;;;2259   else if(!(temp&(1<<AVUMIN)))
;;;2260   	{
;;;2261   	if(bps[in]._umin_av_cnt) 
001c34  f9b01046          LDRSH    r1,[r0,#0x46]
001c38  b141              CBZ      r1,|L1.7244|
;;;2262   		{
;;;2263   		bps[in]._umin_av_cnt--;
001c3a  1e49              SUBS     r1,r1,#1
001c3c  b209              SXTH     r1,r1
001c3e  f8a01046          STRH     r1,[r0,#0x46]
;;;2264   		if(bps[in]._umin_av_cnt==0)
001c42  b919              CBNZ     r1,|L1.7244|
;;;2265   			{
;;;2266   			bps[in]._umin_av_cnt=0;
;;;2267   			bps[in]._av&=~(1<<2);
001c44  7841              LDRB     r1,[r0,#1]
001c46  f0210104          BIC      r1,r1,#4
                  |L1.7242|
001c4a  7041              STRB     r1,[r0,#1]
                  |L1.7244|
;;;2268   		//	avar_bps_hndl(in,2,0);
;;;2269   		//	apv_cnt[in,0]=0;
;;;2270   		//	apv_cnt[in,1]=0;
;;;2271   		//	apv_cnt[in,2]=0;
;;;2272   			}
;;;2273   		}
;;;2274   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;2275   	}
;;;2276   
;;;2277   //bps[in]._state=bsOFF;
;;;2278   
;;;2279   
;;;2280   if(((work_stat==wsGS) || (work_stat==wsPS))&&(UOUT_OFF_EN))
001c4c  4967              LDR      r1,|L1.7660|
001c4e  780b              LDRB     r3,[r1,#0]  ; work_stat
001c50  2b01              CMP      r3,#1
001c52  d001              BEQ      |L1.7256|
001c54  2b02              CMP      r3,#2
001c56  d134              BNE      |L1.7362|
                  |L1.7256|
001c58  4965              LDR      r1,|L1.7664|
001c5a  8809              LDRH     r1,[r1,#0]  ; UOUT_OFF_EN
001c5c  b361              CBZ      r1,|L1.7352|
;;;2281   	{
;;;2282   	short tempU;
;;;2283   	long tempL;
;;;2284   
;;;2285   	tempU= U_maxg;
001c5e  4965              LDR      r1,|L1.7668|
;;;2286   	if(work_stat==wsPS)tempU= U_up_temp;
001c60  2b02              CMP      r3,#2
001c62  f9b11000          LDRSH    r1,[r1,#0]            ;2285  ; U_maxg
001c66  d102              BNE      |L1.7278|
001c68  4963              LDR      r1,|L1.7672|
001c6a  f9b11000          LDRSH    r1,[r1,#0]  ; U_up_temp
                  |L1.7278|
;;;2287   
;;;2288   	tempL=((long)tempU)*((long)(100+UOUT_OFF_LEVEL));
001c6e  4b63              LDR      r3,|L1.7676|
001c70  f9b33000          LDRSH    r3,[r3,#0]  ; UOUT_OFF_LEVEL
001c74  3364              ADDS     r3,r3,#0x64
001c76  4359              MULS     r1,r3,r1
;;;2289   	tempL/=100L;
001c78  2364              MOVS     r3,#0x64
001c7a  fb91f1f3          SDIV     r1,r1,r3
;;;2290   
;;;2291   	tempU=(short)tempL;
001c7e  e000              B        |L1.7298|
                  |L1.7296|
001c80  e050              B        |L1.7460|
                  |L1.7298|
;;;2292   	plazma_umax=tempU;
001c82  4b5f              LDR      r3,|L1.7680|
001c84  b209              SXTH     r1,r1                 ;2291
001c86  8019              STRH     r1,[r3,#0]
;;;2293   
;;;2294   	if(bps[in]._Uii>tempU)
001c88  6983              LDR      r3,[r0,#0x18]
001c8a  428b              CMP      r3,r1
;;;2295   		{
;;;2296   		if(bps[in]._uout_avar_cnt<(UOUT_OFF_DELAY*10))
;;;2297   			{
;;;2298   			bps[in]._uout_avar_cnt++;
;;;2299   			if(bps[in]._uout_avar_cnt>=(UOUT_OFF_DELAY*10))
;;;2300   				{
;;;2301   				bps[in]._av|=0x80;
;;;2302   				}
;;;2303   			}
;;;2304   		}
;;;2305   	else 
;;;2306   		{
;;;2307   		if(bps[in]._uout_avar_cnt) bps[in]._uout_avar_cnt--;
001c8c  f8901052          LDRB     r1,[r0,#0x52]
001c90  dd13              BLE      |L1.7354|
001c92  4b5c              LDR      r3,|L1.7684|
001c94  f9b33000          LDRSH    r3,[r3,#0]            ;2296  ; UOUT_OFF_DELAY
001c98  eb030383          ADD      r3,r3,r3,LSL #2       ;2296
001c9c  ebb10f43          CMP      r1,r3,LSL #1          ;2296
001ca0  da0f              BGE      |L1.7362|
001ca2  1c49              ADDS     r1,r1,#1              ;2298
001ca4  b2c9              UXTB     r1,r1                 ;2298
001ca6  f8801052          STRB     r1,[r0,#0x52]         ;2298
001caa  ebb10f43          CMP      r1,r3,LSL #1          ;2299
001cae  db08              BLT      |L1.7362|
001cb0  7841              LDRB     r1,[r0,#1]            ;2301
001cb2  f0410180          ORR      r1,r1,#0x80           ;2301
001cb6  7041              STRB     r1,[r0,#1]            ;2301
                  |L1.7352|
001cb8  e003              B        |L1.7362|
                  |L1.7354|
001cba  b111              CBZ      r1,|L1.7362|
001cbc  1e49              SUBS     r1,r1,#1
001cbe  f8801052          STRB     r1,[r0,#0x52]
                  |L1.7362|
;;;2308   		}
;;;2309   
;;;2310   
;;;2311   
;;;2312   
;;;2313   
;;;2314   	}
;;;2315   
;;;2316   
;;;2317   
;;;2318   if (bps[in]._av&0x8f)					bps[in]._state=bsAV;
001cc2  7841              LDRB     r1,[r0,#1]
001cc4  f0110f8f          TST      r1,#0x8f
001cc8  d001              BEQ      |L1.7374|
001cca  2204              MOVS     r2,#4
001ccc  e00f              B        |L1.7406|
                  |L1.7374|
;;;2319   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
001cce  4b4e              LDR      r3,|L1.7688|
001cd0  781b              LDRB     r3,[r3,#0]  ; net_av
001cd2  b123              CBZ      r3,|L1.7390|
001cd4  78c3              LDRB     r3,[r0,#3]
001cd6  2b14              CMP      r3,#0x14
001cd8  d901              BLS      |L1.7390|
;;;2320   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
001cda  2205              MOVS     r2,#5
001cdc  e007              B        |L1.7406|
                  |L1.7390|
;;;2321   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
001cde  0692              LSLS     r2,r2,#26
001ce0  d501              BPL      |L1.7398|
001ce2  2202              MOVS     r2,#2
001ce4  e003              B        |L1.7406|
                  |L1.7398|
;;;2322   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
001ce6  78c2              LDRB     r2,[r0,#3]
001ce8  2a14              CMP      r2,#0x14
001cea  d201              BCS      |L1.7408|
001cec  2201              MOVS     r2,#1
                  |L1.7406|
001cee  7082              STRB     r2,[r0,#2]
                  |L1.7408|
;;;2323   
;;;2324   
;;;2325   
;;;2326   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;2327   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;2328   //else bps[0]._state=ssNOT;
;;;2329   
;;;2330   //bps[in]._is_ready=0;
;;;2331   //bps[in]._is_wrk=0;
;;;2332   //if(bps[in]._av_net) bps[in]._flags_bp='N';// не подключен
;;;2333   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// завышено напряжение(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;2334   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// занижено напряжение
;;;2335   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// температура
;;;2336   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;2337   //	{
;;;2338   //	bps[in]._flags_bp='B';// заблокирован
;;;2339   //	bps[in]._is_ready=1;
;;;2340   //	}
;;;2341   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;2342   //     {
;;;2343   //     bps[in]._flags_bp='W';// работает
;;;2344   //     bps[in]._is_ready=1;
;;;2345   //     bps[in]._is_wrk=1;
;;;2346        
;;;2347   //     }
;;;2348   //else bps[in]._is_ready=1;     
;;;2349   
;;;2350   
;;;2351   
;;;2352   
;;;2353   
;;;2354   /*
;;;2355   bps[in]._flags_tu&=BIN8(11111110);
;;;2356   if(bps[in]._ist_blok_cnt)
;;;2357   	{
;;;2358   	bps[in]._ist_blok_cnt--;
;;;2359   	bps[in]._flags_tu|=BIN8(1);
;;;2360   	}
;;;2361   
;;;2362   	   */ 
;;;2363   
;;;2364   //Пересброс БПСа при потере связи
;;;2365   if(bps[in]._cnt>=10) 
001cf0  78c2              LDRB     r2,[r0,#3]
001cf2  2a0a              CMP      r2,#0xa
;;;2366   	{
;;;2367   	bps[in]._flags_tu|=BIN8(10000000);
;;;2368   	bps[in]._av|=(1<<3);
;;;2369   	}
;;;2370   else 
;;;2371   	{
;;;2372   	bps[in]._flags_tu&=BIN8(1111111);
001cf4  f8902028          LDRB     r2,[r0,#0x28]
001cf8  d306              BCC      |L1.7432|
001cfa  f0420280          ORR      r2,r2,#0x80           ;2367
001cfe  f8802028          STRB     r2,[r0,#0x28]         ;2367
001d02  f0410108          ORR      r1,r1,#8              ;2368
001d06  e005              B        |L1.7444|
                  |L1.7432|
001d08  f002027f          AND      r2,r2,#0x7f
001d0c  f8802028          STRB     r2,[r0,#0x28]
;;;2373   	bps[in]._av&=~(1<<3);
001d10  f0210108          BIC      r1,r1,#8
                  |L1.7444|
001d14  7041              STRB     r1,[r0,#1]
;;;2374   	}
;;;2375   bps[in]._vol_u=cntrl_stat_U;	
001d16  493d              LDR      r1,|L1.7692|
001d18  f9b12014          LDRSH    r2,[r1,#0x14]  ; cntrl_stat_U
;;;2376   bps[in]._vol_i=cntrl_stat_I;
001d1c  62c2              STR      r2,[r0,#0x2c]
001d1e  f9b11016          LDRSH    r1,[r1,#0x16]  ; cntrl_stat_I
001d22  6301              STR      r1,[r0,#0x30]
                  |L1.7460|
;;;2377    
;;;2378   }
001d24  bd10              POP      {r4,pc}
;;;2379   
                          ENDP

                  zar_superviser_start PROC
;;;2382   //-----------------------------------------------
;;;2383   void zar_superviser_start(void)
001d26  493a              LDR      r1,|L1.7696|
;;;2384   {
;;;2385   sign_U[0]=1;
;;;2386   sign_I[0]=1;
001d28  4a3a              LDR      r2,|L1.7700|
001d2a  2001              MOVS     r0,#1                 ;2385
001d2c  7008              STRB     r0,[r1,#0]            ;2385
001d2e  7010              STRB     r0,[r2,#0]
;;;2387   sign_U[1]=1;
001d30  7048              STRB     r0,[r1,#1]
;;;2388   sign_I[1]=1;
001d32  7050              STRB     r0,[r2,#1]
;;;2389   
;;;2390   }
001d34  4770              BX       lr
;;;2391   
                          ENDP

                  volt_contr_hndl PROC
;;;2392   //-----------------------------------------------
;;;2393   void volt_contr_hndl(void)
001d36  e92d47f0          PUSH     {r4-r10,lr}
;;;2394   {
;;;2395   if(work_stat==wsOFF)
001d3a  482c              LDR      r0,|L1.7660|
;;;2396   	{
;;;2397   	cnt_volt_contr=0;
;;;2398   	}
;;;2399   else 
;;;2400   	{
;;;2401   	if(cnt_volt_contr<(T_DEL_REL_VOLT_START*10))
001d3c  4e36              LDR      r6,|L1.7704|
001d3e  4c33              LDR      r4,|L1.7692|
001d40  7800              LDRB     r0,[r0,#0]            ;2395  ; work_stat
001d42  2500              MOVS     r5,#0                 ;2395
001d44  b310              CBZ      r0,|L1.7564|
001d46  f9b60000          LDRSH    r0,[r6,#0]  ; T_DEL_REL_VOLT_START
001d4a  eb000180          ADD      r1,r0,r0,LSL #2
001d4e  f9b40028          LDRSH    r0,[r4,#0x28]  ; cnt_volt_contr
001d52  ebb00f41          CMP      r0,r1,LSL #1
001d56  da01              BGE      |L1.7516|
;;;2402   		{
;;;2403   		cnt_volt_contr++;
001d58  1c40              ADDS     r0,r0,#1
001d5a  8520              STRH     r0,[r4,#0x28]
                  |L1.7516|
;;;2404   		}
;;;2405   	}
;;;2406   
;;;2407   	
;;;2408   	if(load_U>REL_VOLT_UMIN*10)
001d5c  482f              LDR      r0,|L1.7708|
001d5e  f8df80c0          LDR      r8,|L1.7712|
;;;2409   		{
;;;2410   		cnt_rel_volt_umin++;
;;;2411   		gran(&cnt_rel_volt_umin,0,30000);
001d62  f2475a30          MOV      r10,#0x7530
001d66  f9b00000          LDRSH    r0,[r0,#0]            ;2408  ; REL_VOLT_UMIN
001d6a  eb000180          ADD      r1,r0,r0,LSL #2       ;2408
001d6e  f9b80000          LDRSH    r0,[r8,#0]            ;2408  ; load_U
001d72  ebb00f41          CMP      r0,r1,LSL #1          ;2408
001d76  dd0b              BLE      |L1.7568|
001d78  8d60              LDRH     r0,[r4,#0x2a]         ;2410  ; cnt_rel_volt_umin
001d7a  4652              MOV      r2,r10
001d7c  1c40              ADDS     r0,r0,#1              ;2410
001d7e  8560              STRH     r0,[r4,#0x2a]         ;2410
001d80  4822              LDR      r0,|L1.7692|
001d82  2100              MOVS     r1,#0
001d84  302a              ADDS     r0,r0,#0x2a
001d86  f7fffffe          BL       gran
001d8a  e002              B        |L1.7570|
                  |L1.7564|
001d8c  8525              STRH     r5,[r4,#0x28]         ;2397
001d8e  e7e5              B        |L1.7516|
                  |L1.7568|
;;;2412   		}
;;;2413   	else cnt_rel_volt_umin=0;
001d90  8565              STRH     r5,[r4,#0x2a]
                  |L1.7570|
;;;2414   	if((cnt_rel_volt_umin>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_DOWN=1;
001d92  f8df9090          LDR      r9,|L1.7716|
001d96  2701              MOVS     r7,#1
001d98  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
001d9c  eb000180          ADD      r1,r0,r0,LSL #2
001da0  f9b4002a          LDRSH    r0,[r4,#0x2a]  ; cnt_rel_volt_umin
001da4  ebb00f41          CMP      r0,r1,LSL #1
001da8  db3e              BLT      |L1.7720|
001daa  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
001dae  f9b42028          LDRSH    r2,[r4,#0x28]  ; cnt_volt_contr
001db2  eb010181          ADD      r1,r1,r1,LSL #2
001db6  ebb20f41          CMP      r2,r1,LSL #1
001dba  db35              BLT      |L1.7720|
001dbc  7327              STRB     r7,[r4,#0xc]
001dbe  e035              B        |L1.7724|
                  |L1.7616|
                          DCD      _x_
                  |L1.7620|
                          DCD      _xu_
                  |L1.7624|
                          DCD      CAP_MAX_VOLT
                  |L1.7628|
                          DCD      U_MAX
                  |L1.7632|
                          DCD      CAP_WRK_CURR
                  |L1.7636|
                          DCD      I_MAX_IPS
                  |L1.7640|
                          DCD      bOFF
                  |L1.7644|
                          DCD      pwm_t_reg
                  |L1.7648|
                          DCD      pwm_u_reg
                  |L1.7652|
                          DCD      pwm_i_reg
                  |L1.7656|
                          DCD      bps
                  |L1.7660|
                          DCD      work_stat
                  |L1.7664|
                          DCD      UOUT_OFF_EN
                  |L1.7668|
                          DCD      U_maxg
                  |L1.7672|
                          DCD      U_up_temp
                  |L1.7676|
                          DCD      UOUT_OFF_LEVEL
                  |L1.7680|
                          DCD      plazma_umax
                  |L1.7684|
                          DCD      UOUT_OFF_DELAY
                  |L1.7688|
                          DCD      net_av
                  |L1.7692|
                          DCD      ||area_number.18||
                  |L1.7696|
                          DCD      sign_U
                  |L1.7700|
                          DCD      sign_I
                  |L1.7704|
                          DCD      T_DEL_REL_VOLT_START
                  |L1.7708|
                          DCD      REL_VOLT_UMIN
                  |L1.7712|
                          DCD      load_U
                  |L1.7716|
                          DCD      T_DEL_REL_VOLT_WRK
                  |L1.7720|
;;;2415   	else if(cnt_rel_volt_umin==0)							  							bVOLT_IS_NOT_DOWN=0;
001e28  b900              CBNZ     r0,|L1.7724|
001e2a  7325              STRB     r5,[r4,#0xc]
                  |L1.7724|
;;;2416   
;;;2417   	if(load_U<REL_VOLT_UMAX*10)
001e2c  48e1              LDR      r0,|L1.8628|
001e2e  f9b00000          LDRSH    r0,[r0,#0]  ; REL_VOLT_UMAX
001e32  eb000180          ADD      r1,r0,r0,LSL #2
001e36  f9b80000          LDRSH    r0,[r8,#0]  ; load_U
001e3a  ebb00f41          CMP      r0,r1,LSL #1
001e3e  da08              BGE      |L1.7762|
;;;2418   		{
;;;2419   		cnt_rel_volt_umax++;
001e40  8da0              LDRH     r0,[r4,#0x2c]  ; cnt_rel_volt_umax
;;;2420   		gran(&cnt_rel_volt_umax,0,30000);
001e42  4652              MOV      r2,r10
001e44  1c40              ADDS     r0,r0,#1              ;2419
001e46  85a0              STRH     r0,[r4,#0x2c]         ;2419
001e48  2100              MOVS     r1,#0
001e4a  48db              LDR      r0,|L1.8632|
001e4c  f7fffffe          BL       gran
001e50  e000              B        |L1.7764|
                  |L1.7762|
;;;2421   		}
;;;2422   	else cnt_rel_volt_umax=0;
001e52  85a5              STRH     r5,[r4,#0x2c]
                  |L1.7764|
;;;2423   	if((cnt_rel_volt_umax>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_UP=1;
001e54  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
001e58  eb000180          ADD      r1,r0,r0,LSL #2
001e5c  f9b4002c          LDRSH    r0,[r4,#0x2c]  ; cnt_rel_volt_umax
001e60  ebb00f41          CMP      r0,r1,LSL #1
001e64  db0a              BLT      |L1.7804|
001e66  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
001e6a  f9b42028          LDRSH    r2,[r4,#0x28]  ; cnt_volt_contr
001e6e  eb010181          ADD      r1,r1,r1,LSL #2
001e72  ebb20f41          CMP      r2,r1,LSL #1
001e76  db01              BLT      |L1.7804|
001e78  7367              STRB     r7,[r4,#0xd]
001e7a  e002              B        |L1.7810|
                  |L1.7804|
;;;2424   	else if(cnt_rel_volt_umax==0)							  							bVOLT_IS_NOT_UP=0;
001e7c  b130              CBZ      r0,|L1.7820|
;;;2425   	
;;;2426   	if(bVOLT_IS_NOT_UP && bVOLT_IS_NOT_DOWN) bVOLT_IS_NORM=1;
001e7e  7b60              LDRB     r0,[r4,#0xd]  ; bVOLT_IS_NOT_UP
001e80  b128              CBZ      r0,|L1.7822|
                  |L1.7810|
001e82  7b20              LDRB     r0,[r4,#0xc]  ; bVOLT_IS_NOT_DOWN
001e84  b118              CBZ      r0,|L1.7822|
001e86  73a7              STRB     r7,[r4,#0xe]
                  |L1.7816|
;;;2427   	else bVOLT_IS_NORM=0;
;;;2428   
;;;2429   
;;;2430   }
001e88  e8bd87f0          POP      {r4-r10,pc}
                  |L1.7820|
001e8c  7365              STRB     r5,[r4,#0xd]          ;2424
                  |L1.7822|
001e8e  73a5              STRB     r5,[r4,#0xe]          ;2427
001e90  e7fa              B        |L1.7816|
;;;2431   
                          ENDP

                  current_stab_hndl PROC
;;;2432   //-----------------------------------------------
;;;2433   void current_stab_hndl(void)
001e92  e92d5ff0          PUSH     {r4-r12,lr}
;;;2434   {
;;;2435   
;;;2436   if(work_stat==wsPS)
001e96  48c9              LDR      r0,|L1.8636|
;;;2437   	{
;;;2438   	delta_U_abs=abs_pal(load_U-U_up);
001e98  f8df8328          LDR      r8,|L1.8644|
;;;2439   	delta_U_rel=(delta_U_abs*100)/U_up;
;;;2440   
;;;2441   	delta_I_abs=abs_pal(load_I-I_maxp);
001e9c  f8dfb328          LDR      r11,|L1.8648|
001ea0  7801              LDRB     r1,[r0,#0]            ;2436  ; work_stat
001ea2  48c7              LDR      r0,|L1.8640|
001ea4  f8dfa324          LDR      r10,|L1.8652|
001ea8  4dc9              LDR      r5,|L1.8656|
001eaa  f9b00000          LDRSH    r0,[r0,#0]            ;2438
;;;2442   	delta_I_rel=(delta_I_abs*100)/I_maxp;
001eae  4ec9              LDR      r6,|L1.8660|
;;;2443   	}
;;;2444   
;;;2445   else if(work_stat==wsGS)
;;;2446   	{
;;;2447   	delta_U_abs=abs_pal(load_U-U_maxg);
;;;2448   	delta_U_rel=(delta_U_abs*100)/U_maxg;
;;;2449   
;;;2450   	delta_I_abs=abs_pal(load_I-I_ug_temp);
;;;2451   	delta_I_rel=(delta_I_abs*100)/I_ug_temp;
;;;2452   	}
;;;2453   else 
;;;2454   	{
;;;2455   	cnt_del_rel=0;
001eb0  2700              MOVS     r7,#0
001eb2  4cc9              LDR      r4,|L1.8664|
001eb4  2902              CMP      r1,#2                 ;2436
001eb6  d011              BEQ      |L1.7900|
001eb8  2901              CMP      r1,#1                 ;2445
001eba  d025              BEQ      |L1.7944|
001ebc  8027              STRH     r7,[r4,#0]
                  |L1.7870|
;;;2456   	}
;;;2457   
;;;2458   if((delta_U_rel>DELT_REL_CURR_U)&&(delta_I_rel<DELT_REL_CURR_I))
001ebe  49c7              LDR      r1,|L1.8668|
001ec0  6828              LDR      r0,[r5,#0]  ; delta_U_rel
001ec2  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_U
001ec6  4288              CMP      r0,r1
001ec8  dd43              BLE      |L1.8018|
001eca  49c5              LDR      r1,|L1.8672|
001ecc  6830              LDR      r0,[r6,#0]  ; delta_I_rel
001ece  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_I
001ed2  4288              CMP      r0,r1
001ed4  da3d              BGE      |L1.8018|
;;;2459   	{
;;;2460   	cnt_del_rel++;
001ed6  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001ed8  1c40              ADDS     r0,r0,#1
001eda  e03c              B        |L1.8022|
                  |L1.7900|
001edc  f8df9304          LDR      r9,|L1.8676|
001ee0  f8b91000          LDRH     r1,[r9,#0]            ;2438  ; U_up
001ee4  1a40              SUBS     r0,r0,r1              ;2438
001ee6  b200              SXTH     r0,r0                 ;2438
001ee8  f7fffffe          BL       abs_pal
001eec  f8c80000          STR      r0,[r8,#0]            ;2439  ; delta_U_abs
001ef0  2164              MOVS     r1,#0x64              ;2439
001ef2  4348              MULS     r0,r1,r0              ;2439
001ef4  f9b91000          LDRSH    r1,[r9,#0]            ;2439  ; U_up
001ef8  f8df82ec          LDR      r8,|L1.8680|
001efc  fb90f0f1          SDIV     r0,r0,r1              ;2439
001f00  6028              STR      r0,[r5,#0]            ;2441  ; delta_U_rel
001f02  f8bb1000          LDRH     r1,[r11,#0]           ;2441  ; load_I
001f06  e014              B        |L1.7986|
                  |L1.7944|
001f08  f8df92e0          LDR      r9,|L1.8684|
001f0c  f8b91000          LDRH     r1,[r9,#0]            ;2447  ; U_maxg
001f10  1a40              SUBS     r0,r0,r1              ;2447
001f12  b200              SXTH     r0,r0                 ;2447
001f14  f7fffffe          BL       abs_pal
001f18  f8c80000          STR      r0,[r8,#0]            ;2448  ; delta_U_abs
001f1c  2164              MOVS     r1,#0x64              ;2448
001f1e  4348              MULS     r0,r1,r0              ;2448
001f20  f9b91000          LDRSH    r1,[r9,#0]            ;2448  ; U_maxg
001f24  f8df82c8          LDR      r8,|L1.8688|
001f28  fb90f0f1          SDIV     r0,r0,r1              ;2448
001f2c  6028              STR      r0,[r5,#0]            ;2450  ; delta_U_rel
001f2e  f8bb1000          LDRH     r1,[r11,#0]           ;2450  ; load_I
                  |L1.7986|
001f32  f8b80000          LDRH     r0,[r8,#0]            ;2450  ; I_ug_temp
001f36  1a08              SUBS     r0,r1,r0              ;2450
001f38  b200              SXTH     r0,r0                 ;2450
001f3a  f7fffffe          BL       abs_pal
001f3e  2164              MOVS     r1,#0x64              ;2451
001f40  f8ca0000          STR      r0,[r10,#0]           ;2451  ; delta_I_abs
001f44  4348              MULS     r0,r1,r0              ;2451
001f46  f9b81000          LDRSH    r1,[r8,#0]            ;2451  ; I_ug_temp
001f4a  fb90f0f1          SDIV     r0,r0,r1              ;2451
001f4e  6030              STR      r0,[r6,#0]            ;2451  ; delta_I_rel
001f50  e7b5              B        |L1.7870|
                  |L1.8018|
;;;2461   	}
;;;2462   else
;;;2463   	{
;;;2464   	cnt_del_rel--;
001f52  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001f54  1e40              SUBS     r0,r0,#1
                  |L1.8022|
;;;2465   	}
;;;2466   
;;;2467   gran(&cnt_del_rel,0,(T_DEL_REL_CURR_WRK*10)+10);
001f56  4da7              LDR      r5,|L1.8692|
001f58  8020              STRH     r0,[r4,#0]            ;2464
001f5a  210a              MOVS     r1,#0xa
001f5c  8828              LDRH     r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
001f5e  eb000080          ADD      r0,r0,r0,LSL #2
001f62  eb010040          ADD      r0,r1,r0,LSL #1
001f66  b202              SXTH     r2,r0
001f68  2100              MOVS     r1,#0
001f6a  489b              LDR      r0,|L1.8664|
001f6c  f7fffffe          BL       gran
;;;2468   
;;;2469   if(work_stat==wsOFF) cnt_del_rel=0;
001f70  4892              LDR      r0,|L1.8636|
001f72  7800              LDRB     r0,[r0,#0]  ; work_stat
001f74  b900              CBNZ     r0,|L1.8056|
001f76  8027              STRH     r7,[r4,#0]
                  |L1.8056|
;;;2470   
;;;2471   
;;;2472   if ( (time_proc>=(T_DEL_REL_CURR_START)) &&
001f78  489f              LDR      r0,|L1.8696|
001f7a  49a0              LDR      r1,|L1.8700|
;;;2473   	(cnt_del_rel>(T_DEL_REL_CURR_WRK*10)) )
;;;2474   	{
;;;2475   	bCURRENT_STAB=1;
001f7c  4aa0              LDR      r2,|L1.8704|
001f7e  6800              LDR      r0,[r0,#0]            ;2472  ; time_proc
001f80  f9b11000          LDRSH    r1,[r1,#0]            ;2472  ; T_DEL_REL_CURR_START
001f84  4288              CMP      r0,r1                 ;2472
001f86  db0a              BLT      |L1.8094|
001f88  f9b53000          LDRSH    r3,[r5,#0]            ;2473  ; T_DEL_REL_CURR_WRK
001f8c  f9b46000          LDRSH    r6,[r4,#0]            ;2473  ; cnt_del_rel
001f90  eb030383          ADD      r3,r3,r3,LSL #2       ;2473
001f94  ebb60f43          CMP      r6,r3,LSL #1          ;2473
001f98  dd01              BLE      |L1.8094|
001f9a  2301              MOVS     r3,#1
001f9c  7013              STRB     r3,[r2,#0]
                  |L1.8094|
;;;2476   	}
;;;2477   if ( (time_proc<(T_DEL_REL_CURR_START)) ||
001f9e  4288              CMP      r0,r1
001fa0  db08              BLT      |L1.8116|
;;;2478   	(cnt_del_rel<=(T_DEL_REL_CURR_WRK*10)) )
001fa2  f9b50000          LDRSH    r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
001fa6  f9b41000          LDRSH    r1,[r4,#0]  ; cnt_del_rel
001faa  eb000080          ADD      r0,r0,r0,LSL #2
001fae  ebb10f40          CMP      r1,r0,LSL #1
001fb2  dc00              BGT      |L1.8118|
                  |L1.8116|
;;;2479   	{
;;;2480   	bCURRENT_STAB=0;
001fb4  7017              STRB     r7,[r2,#0]
                  |L1.8118|
;;;2481   	}
;;;2482   
;;;2483   /*
;;;2484   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
;;;2485   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
;;;2486   //SET_REG(LPC_GPIO0->FIOSET,1,5,1);
;;;2487   
;;;2488   if(RELE_LOG_CURR==0)
;;;2489   	{
;;;2490   	SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2491   	}
;;;2492   else if(RELE_LOG_CURR==1)
;;;2493   	{
;;;2494   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2495   	else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2496   	}
;;;2497   else
;;;2498   	{
;;;2499   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2500   	else SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2501   	}*/
;;;2502   
;;;2503   }
001fb6  e8bd9ff0          POP      {r4-r12,pc}
;;;2504   
                          ENDP

                  revers_hndl PROC
;;;2505   //-----------------------------------------------
;;;2506   void revers_hndl(void)
001fba  4892              LDR      r0,|L1.8708|
;;;2507   {
;;;2508   SET_REG(LPC_PINCON->PINSEL0,0,4*2,2);
001fbc  6801              LDR      r1,[r0,#0]
001fbe  f4217140          BIC      r1,r1,#0x300
001fc2  6001              STR      r1,[r0,#0]
;;;2509   SET_REG(LPC_GPIO0->FIODIR,1,4,1);
001fc4  4890              LDR      r0,|L1.8712|
001fc6  6801              LDR      r1,[r0,#0]
001fc8  f0410110          ORR      r1,r1,#0x10
001fcc  6001              STR      r1,[r0,#0]
;;;2510   //SET_REG(LPC_GPIO0->FIOSET,1,5,1);
;;;2511   
;;;2512   if(work_stat==wsCAP) 
001fce  497b              LDR      r1,|L1.8636|
001fd0  7809              LDRB     r1,[r1,#0]  ; work_stat
001fd2  2903              CMP      r1,#3
001fd4  d003              BEQ      |L1.8158|
;;;2513   	{
;;;2514   	if(bRAZR) SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
;;;2515   	else SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2516   	} 
;;;2517   else 
;;;2518   	{
;;;2519   	if(REV_STAT==rsREW)
001fd6  498d              LDR      r1,|L1.8716|
001fd8  7809              LDRB     r1,[r1,#0]  ; REV_STAT
001fda  b119              CBZ      r1,|L1.8164|
001fdc  e007              B        |L1.8174|
                  |L1.8158|
001fde  498c              LDR      r1,|L1.8720|
001fe0  7809              LDRB     r1,[r1,#0]            ;2514  ; bRAZR
001fe2  b121              CBZ      r1,|L1.8174|
                  |L1.8164|
;;;2520   		{
;;;2521   		SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
001fe4  6941              LDR      r1,[r0,#0x14]
001fe6  f0210110          BIC      r1,r1,#0x10
                  |L1.8170|
001fea  6141              STR      r1,[r0,#0x14]         ;2515
;;;2522   		}
;;;2523   	else 	
;;;2524   		{
;;;2525   		SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2526   		}
;;;2527   	}
;;;2528   }
001fec  4770              BX       lr
                  |L1.8174|
001fee  6941              LDR      r1,[r0,#0x14]         ;2525
001ff0  f0410110          ORR      r1,r1,#0x10           ;2525
001ff4  e7f9              B        |L1.8170|
;;;2529   
                          ENDP

                  rele_hndl PROC
;;;2530   //-----------------------------------------------
;;;2531   void rele_hndl(void)
001ff6  e92d4ff0          PUSH     {r4-r11,lr}
;;;2532   {
;;;2533   //Реле1
;;;2534   if(RELE_FUNC[0]==0)rele_stat[0]=rsOFF; 		//Выключено
;;;2535   else if(RELE_FUNC[0]==1)					//Реверс
;;;2536   	{
;;;2537   	if(work_stat==wsCAP) 
001ffa  4870              LDR      r0,|L1.8636|
001ffc  f8dfe1b8          LDR      lr,|L1.8632|
;;;2538   		{
;;;2539   		if(bRAZR) rele_stat[0]=rsOFF;
;;;2540   		else 	rele_stat[0]=rsON;
;;;2541   		} 
;;;2542   	else 
;;;2543   		{
;;;2544   		if(REV_STAT==rsREW)	rele_stat[0]=rsOFF;
;;;2545   		else 			rele_stat[0]=rsON;
;;;2546   		}
;;;2547   	}
;;;2548   else if(RELE_FUNC[0]==2)					//Токоограничение
;;;2549   	{
;;;2550   	if(RELE_LOG_CURR==0)
002000  4b84              LDR      r3,|L1.8724|
002002  f890c000          LDRB     r12,[r0,#0]           ;2537
002006  4882              LDR      r0,|L1.8720|
002008  f10e0e06          ADD      lr,lr,#6              ;2534
00200c  f9b36000          LDRSH    r6,[r3,#0]
002010  7800              LDRB     r0,[r0,#0]            ;2539
;;;2551   		{
;;;2552   		if(bCURRENT_STAB==0)	rele_stat[0]=rsON;
;;;2553   		else 				rele_stat[0]=rsOFF;
;;;2554   		}
;;;2555   	else if(RELE_LOG_CURR==1)
;;;2556   		{
;;;2557   		if(bCURRENT_STAB==0)	rele_stat[0]=rsOFF;
;;;2558   		else 				rele_stat[0]=rsON;
;;;2559   		}
;;;2560   	}									
;;;2561   else if(RELE_FUNC[0]==3)					//Напряжение в норме
;;;2562   	{
;;;2563   	if(RELE_LOG_VOLT==0)
002012  4b81              LDR      r3,|L1.8728|
002014  4682              MOV      r10,r0                ;2539
002016  487d              LDR      r0,|L1.8716|
002018  f9be4000          LDRSH    r4,[lr,#0]            ;2534  ; RELE_FUNC
00201c  2201              MOVS     r2,#1                 ;2534
00201e  7800              LDRB     r0,[r0,#0]            ;2544
002020  f9b33000          LDRSH    r3,[r3,#0]
002024  4683              MOV      r11,r0                ;2544
002026  4876              LDR      r0,|L1.8704|
002028  2100              MOVS     r1,#0                 ;2534
00202a  7805              LDRB     r5,[r0,#0]            ;2552
;;;2564   		{
;;;2565   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsON;
00202c  f1ae0032          SUB      r0,lr,#0x32
002030  7b87              LDRB     r7,[r0,#0xe]
;;;2566   		else 				rele_stat[0]=rsOFF;
;;;2567   		}
;;;2568   	else if(RELE_LOG_VOLT==1)
;;;2569   		{
;;;2570   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsOFF;
;;;2571   		else 				rele_stat[0]=rsON;
;;;2572   		}
;;;2573   	}
;;;2574   else if(RELE_FUNC[0]==4)					//Напряжение не выше
;;;2575   	{
;;;2576   	if(RELE_LOG_VOLT==0)
;;;2577   		{
;;;2578   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsON;
002032  f890800d          LDRB     r8,[r0,#0xd]
;;;2579   		else 				rele_stat[0]=rsOFF;
;;;2580   		}
;;;2581   	else if(RELE_LOG_VOLT==1)
;;;2582   		{
;;;2583   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsOFF;
;;;2584   		else 				rele_stat[0]=rsON;
;;;2585   		}
;;;2586   	}
;;;2587   else if(RELE_FUNC[0]==5)					//Напряжение не ниже
;;;2588   	{
;;;2589   	if(RELE_LOG_VOLT==0)
;;;2590   		{
;;;2591   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsON;
002036  7b00              LDRB     r0,[r0,#0xc]
002038  4681              MOV      r9,r0
00203a  f1ae0004          SUB      r0,lr,#4              ;2534
00203e  b324              CBZ      r4,|L1.8330|
002040  2c01              CMP      r4,#1                 ;2535
002042  d00a              BEQ      |L1.8282|
002044  2c02              CMP      r4,#2                 ;2548
002046  d013              BEQ      |L1.8304|
002048  2c03              CMP      r4,#3                 ;2561
00204a  d019              BEQ      |L1.8320|
00204c  2c04              CMP      r4,#4                 ;2574
00204e  d01f              BEQ      |L1.8336|
002050  2c05              CMP      r4,#5                 ;2587
002052  d029              BEQ      |L1.8360|
;;;2592   		else 				rele_stat[0]=rsOFF;
;;;2593   		}
;;;2594   	else if(RELE_LOG_VOLT==1)
;;;2595   		{
;;;2596   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsOFF;
;;;2597   		else 				rele_stat[0]=rsON;
;;;2598   		}
;;;2599   	}
;;;2600   else if(RELE_FUNC[0]==6)					//Внешнее управление
002054  2c06              CMP      r4,#6
002056  d033              BEQ      |L1.8384|
002058  e039              B        |L1.8398|
                  |L1.8282|
00205a  f1bc0f03          CMP      r12,#3                ;2537
00205e  d003              BEQ      |L1.8296|
002060  f1bb0f00          CMP      r11,#0                ;2544
002064  d032              BEQ      |L1.8396|
002066  e02f              B        |L1.8392|
                  |L1.8296|
002068  f1ba0f00          CMP      r10,#0                ;2539
00206c  d12e              BNE      |L1.8396|
00206e  e02b              B        |L1.8392|
                  |L1.8304|
002070  b116              CBZ      r6,|L1.8312|
002072  2e01              CMP      r6,#1                 ;2555
002074  d002              BEQ      |L1.8316|
002076  e02a              B        |L1.8398|
                  |L1.8312|
002078  b30d              CBZ      r5,|L1.8382|
00207a  e027              B        |L1.8396|
                  |L1.8316|
00207c  b12d              CBZ      r5,|L1.8330|
00207e  e023              B        |L1.8392|
                  |L1.8320|
002080  b113              CBZ      r3,|L1.8328|
002082  2b01              CMP      r3,#1                 ;2568
002084  d002              BEQ      |L1.8332|
002086  e022              B        |L1.8398|
                  |L1.8328|
002088  b1cf              CBZ      r7,|L1.8382|
                  |L1.8330|
00208a  e01f              B        |L1.8396|
                  |L1.8332|
00208c  b1f7              CBZ      r7,|L1.8396|
00208e  e01b              B        |L1.8392|
                  |L1.8336|
002090  b113              CBZ      r3,|L1.8344|
002092  2b01              CMP      r3,#1                 ;2581
002094  d004              BEQ      |L1.8352|
002096  e01a              B        |L1.8398|
                  |L1.8344|
002098  f1b80f00          CMP      r8,#0                 ;2578
00209c  d014              BEQ      |L1.8392|
00209e  e015              B        |L1.8396|
                  |L1.8352|
0020a0  f1b80f00          CMP      r8,#0                 ;2583
0020a4  d012              BEQ      |L1.8396|
0020a6  e00f              B        |L1.8392|
                  |L1.8360|
0020a8  b113              CBZ      r3,|L1.8368|
0020aa  2b01              CMP      r3,#1                 ;2594
0020ac  d004              BEQ      |L1.8376|
0020ae  e00e              B        |L1.8398|
                  |L1.8368|
0020b0  f1b90f00          CMP      r9,#0                 ;2591
0020b4  d008              BEQ      |L1.8392|
0020b6  e009              B        |L1.8396|
                  |L1.8376|
0020b8  f1b90f00          CMP      r9,#0                 ;2596
0020bc  d006              BEQ      |L1.8396|
                  |L1.8382|
0020be  e003              B        |L1.8392|
                  |L1.8384|
;;;2601   	{
;;;2602   	if(rele_ext_cntrl[0])	rele_stat[0]=rsON;
0020c0  4c3d              LDR      r4,|L1.8632|
0020c2  1d24              ADDS     r4,r4,#4
0020c4  7824              LDRB     r4,[r4,#0]  ; rele_ext_cntrl
0020c6  b10c              CBZ      r4,|L1.8396|
                  |L1.8392|
0020c8  7002              STRB     r2,[r0,#0]
0020ca  e000              B        |L1.8398|
                  |L1.8396|
;;;2603   	else 				rele_stat[0]=rsOFF;
0020cc  7001              STRB     r1,[r0,#0]
                  |L1.8398|
;;;2604   	}											
;;;2605   //Реле2
;;;2606   if(RELE_FUNC[1]==0)rele_stat[1]=rsOFF; 		//Выключено
0020ce  f9be4002          LDRSH    r4,[lr,#2]  ; RELE_FUNC
0020d2  b17c              CBZ      r4,|L1.8436|
;;;2607   else if(RELE_FUNC[1]==1)					//Реверс
0020d4  2c01              CMP      r4,#1
0020d6  d010              BEQ      |L1.8442|
;;;2608   	{
;;;2609   	if(work_stat==wsCAP) 
;;;2610   		{
;;;2611   		if(bRAZR) 		rele_stat[1]=rsOFF;
;;;2612   		else 			rele_stat[1]=rsON;
;;;2613   		} 
;;;2614   	else 
;;;2615   		{
;;;2616   		if(REV_STAT==rsREW)	rele_stat[1]=rsOFF;
;;;2617   		else 			rele_stat[1]=rsON;
;;;2618   		}
;;;2619   	}
;;;2620   else if(RELE_FUNC[1]==2)					//Токоограничение
0020d8  2c02              CMP      r4,#2
0020da  d01a              BEQ      |L1.8466|
;;;2621   	{
;;;2622   	if(RELE_LOG_CURR==0)
;;;2623   		{
;;;2624   		if(bCURRENT_STAB==0)rele_stat[1]=rsON;
;;;2625   		else 			rele_stat[1]=rsOFF;
;;;2626   		}
;;;2627   	else if(RELE_LOG_CURR==1)
;;;2628   		{
;;;2629   		if(bCURRENT_STAB==0)rele_stat[1]=rsOFF;
;;;2630   		else 			rele_stat[1]=rsON;
;;;2631   		}
;;;2632   	}									
;;;2633   else if(RELE_FUNC[1]==3)					//Напряжение в норме
0020dc  2c03              CMP      r4,#3
0020de  d021              BEQ      |L1.8484|
;;;2634   	{
;;;2635   	if(RELE_LOG_VOLT==0)
;;;2636   		{
;;;2637   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsON;
;;;2638   		else 				rele_stat[1]=rsOFF;
;;;2639   		}
;;;2640   	else if(RELE_LOG_VOLT==1)
;;;2641   		{
;;;2642   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsOFF;
;;;2643   		else 				rele_stat[1]=rsON;
;;;2644   		}
;;;2645   	}
;;;2646   else if(RELE_FUNC[1]==4)					//Напряжение не выше
0020e0  2c04              CMP      r4,#4
0020e2  d028              BEQ      |L1.8502|
;;;2647   	{
;;;2648   	if(RELE_LOG_VOLT==0)
;;;2649   		{
;;;2650   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsON;
;;;2651   		else 				rele_stat[1]=rsOFF;
;;;2652   		}
;;;2653   	else if(RELE_LOG_VOLT==1)
;;;2654   		{
;;;2655   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsOFF;
;;;2656   		else 				rele_stat[1]=rsON;
;;;2657   		}
;;;2658   	}
;;;2659   else if(RELE_FUNC[1]==5)					//Напряжение не ниже
0020e4  2c05              CMP      r4,#5
0020e6  d031              BEQ      |L1.8524|
;;;2660   	{
;;;2661   	if(RELE_LOG_VOLT==0)
;;;2662   		{
;;;2663   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsON;
;;;2664   		else 				rele_stat[1]=rsOFF;
;;;2665   		}
;;;2666   	else if(RELE_LOG_VOLT==1)
;;;2667   		{
;;;2668   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsOFF;
;;;2669   		else 				rele_stat[1]=rsON;
;;;2670   		}
;;;2671   	}
;;;2672   else if(RELE_FUNC[1]==6)					//Внешнее управление
0020e8  2c06              CMP      r4,#6
0020ea  d104              BNE      |L1.8438|
;;;2673   	{
;;;2674   	if(rele_ext_cntrl[1])	rele_stat[1]=rsON;
0020ec  4b32              LDR      r3,|L1.8632|
0020ee  1d1b              ADDS     r3,r3,#4
0020f0  785b              LDRB     r3,[r3,#1]  ; rele_ext_cntrl
0020f2  b943              CBNZ     r3,|L1.8454|
                  |L1.8436|
0020f4  7041              STRB     r1,[r0,#1]            ;2606
                  |L1.8438|
;;;2675   	else 				rele_stat[1]=rsOFF;
;;;2676   	}	
;;;2677   
;;;2678   //rele_stat[0]=rsON;
;;;2679   //rele_stat[1]=rsON;
;;;2680   										
;;;2681   }
0020f6  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.8442|
0020fa  f1bc0f03          CMP      r12,#3                ;2609
0020fe  d004              BEQ      |L1.8458|
002100  f1bb0f00          CMP      r11,#0                ;2616
002104  d0f6              BEQ      |L1.8436|
                  |L1.8454|
002106  7042              STRB     r2,[r0,#1]            ;2617
002108  e7f5              B        |L1.8438|
                  |L1.8458|
00210a  f1ba0f00          CMP      r10,#0                ;2611
00210e  d1f1              BNE      |L1.8436|
002110  e7f9              B        |L1.8454|
                  |L1.8466|
002112  b126              CBZ      r6,|L1.8478|
002114  2e01              CMP      r6,#1                 ;2627
002116  d1ee              BNE      |L1.8438|
002118  2d00              CMP      r5,#0                 ;2629
00211a  d1f4              BNE      |L1.8454|
00211c  e7ea              B        |L1.8436|
                  |L1.8478|
00211e  2d00              CMP      r5,#0                 ;2624
002120  d0f1              BEQ      |L1.8454|
002122  e7e7              B        |L1.8436|
                  |L1.8484|
002124  b123              CBZ      r3,|L1.8496|
002126  2b01              CMP      r3,#1                 ;2640
002128  d1e5              BNE      |L1.8438|
00212a  2f00              CMP      r7,#0                 ;2642
00212c  d1eb              BNE      |L1.8454|
00212e  e7e1              B        |L1.8436|
                  |L1.8496|
002130  2f00              CMP      r7,#0                 ;2637
002132  d0e8              BEQ      |L1.8454|
002134  e7de              B        |L1.8436|
                  |L1.8502|
002136  b12b              CBZ      r3,|L1.8516|
002138  2b01              CMP      r3,#1                 ;2653
00213a  d1dc              BNE      |L1.8438|
00213c  f1b80f00          CMP      r8,#0                 ;2655
002140  d1e1              BNE      |L1.8454|
002142  e7d7              B        |L1.8436|
                  |L1.8516|
002144  f1b80f00          CMP      r8,#0                 ;2650
002148  d0dd              BEQ      |L1.8454|
00214a  e7d3              B        |L1.8436|
                  |L1.8524|
00214c  b12b              CBZ      r3,|L1.8538|
00214e  2b01              CMP      r3,#1                 ;2666
002150  d1d1              BNE      |L1.8438|
002152  f1b90f00          CMP      r9,#0                 ;2668
002156  d1d6              BNE      |L1.8454|
002158  e7cc              B        |L1.8436|
                  |L1.8538|
00215a  f1b90f00          CMP      r9,#0                 ;2663
00215e  d0d2              BEQ      |L1.8454|
002160  e7c8              B        |L1.8436|
;;;2682    
                          ENDP

                  rele_drv PROC
;;;2683   //-----------------------------------------------
;;;2684   void rele_drv(void)
002162  4928              LDR      r1,|L1.8708|
;;;2685   {
;;;2686   #ifdef EXT_BOARD_V_1
;;;2687   SET_REG(LPC_PINCON->PINSEL0,0,4*2,2);
;;;2688   SET_REG(LPC_GPIO0->FIODIR,1,4,1);
;;;2689   
;;;2690   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
;;;2691   else SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2692   #endif
;;;2693   
;;;2694   #ifdef EXT_BOARD_V_2
;;;2695   SET_REG(LPC_PINCON->PINSEL0,0,7*2,2);
002164  6808              LDR      r0,[r1,#0]
002166  f4204040          BIC      r0,r0,#0xc000
00216a  6008              STR      r0,[r1,#0]
;;;2696   SET_REG(LPC_GPIO0->FIODIR,1,7,1);
00216c  4826              LDR      r0,|L1.8712|
00216e  6802              LDR      r2,[r0,#0]
002170  f0420280          ORR      r2,r2,#0x80
002174  6002              STR      r2,[r0,#0]
;;;2697   
;;;2698   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,7,1);
002176  4a10              LDR      r2,|L1.8632|
002178  1c92              ADDS     r2,r2,#2
00217a  7813              LDRB     r3,[r2,#0]  ; rele_stat
00217c  2b01              CMP      r3,#1
;;;2699   else SET_REG(LPC_GPIO0->FIOPIN,1,7,1);
00217e  6943              LDR      r3,[r0,#0x14]
002180  d012              BEQ      |L1.8616|
002182  f0430380          ORR      r3,r3,#0x80
                  |L1.8582|
002186  6143              STR      r3,[r0,#0x14]
;;;2700   #endif
;;;2701   
;;;2702   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
002188  680b              LDR      r3,[r1,#0]
00218a  f4236340          BIC      r3,r3,#0xc00
00218e  600b              STR      r3,[r1,#0]
;;;2703   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
002190  6801              LDR      r1,[r0,#0]
002192  f0410120          ORR      r1,r1,#0x20
002196  6001              STR      r1,[r0,#0]
;;;2704   
;;;2705   if(rele_stat[1]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
002198  7851              LDRB     r1,[r2,#1]  ; rele_stat
00219a  2901              CMP      r1,#1
;;;2706   else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
00219c  6941              LDR      r1,[r0,#0x14]
00219e  d006              BEQ      |L1.8622|
0021a0  f0410120          ORR      r1,r1,#0x20
                  |L1.8612|
0021a4  6141              STR      r1,[r0,#0x14]         ;2705
;;;2707   
;;;2708   
;;;2709   }
0021a6  4770              BX       lr
                  |L1.8616|
0021a8  f0230380          BIC      r3,r3,#0x80           ;2698
0021ac  e7eb              B        |L1.8582|
                  |L1.8622|
0021ae  f0210120          BIC      r1,r1,#0x20           ;2705
0021b2  e7f7              B        |L1.8612|
;;;2710   
                          ENDP

                  |L1.8628|
                          DCD      REL_VOLT_UMAX
                  |L1.8632|
                          DCD      ||area_number.18||+0x2c
                  |L1.8636|
                          DCD      work_stat
                  |L1.8640|
                          DCD      load_U
                  |L1.8644|
                          DCD      delta_U_abs
                  |L1.8648|
                          DCD      load_I
                  |L1.8652|
                          DCD      delta_I_abs
                  |L1.8656|
                          DCD      delta_U_rel
                  |L1.8660|
                          DCD      delta_I_rel
                  |L1.8664|
                          DCD      cnt_del_rel
                  |L1.8668|
                          DCD      DELT_REL_CURR_U
                  |L1.8672|
                          DCD      DELT_REL_CURR_I
                  |L1.8676|
                          DCD      U_up
                  |L1.8680|
                          DCD      I_maxp
                  |L1.8684|
                          DCD      U_maxg
                  |L1.8688|
                          DCD      I_ug_temp
                  |L1.8692|
                          DCD      T_DEL_REL_CURR_WRK
                  |L1.8696|
                          DCD      time_proc
                  |L1.8700|
                          DCD      T_DEL_REL_CURR_START
                  |L1.8704|
                          DCD      bCURRENT_STAB
                  |L1.8708|
                          DCD      0x4002c000
                  |L1.8712|
                          DCD      0x2009c000
                  |L1.8716|
                          DCD      REV_STAT
                  |L1.8720|
                          DCD      bRAZR
                  |L1.8724|
                          DCD      RELE_LOG_CURR
                  |L1.8728|
                          DCD      RELE_LOG_VOLT

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        2048
                  adc_buff_
                          %        32
                  adc_buff__
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.4||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.4||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.5||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.5||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.8||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.8||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.9||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.10||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.10||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.11||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.11||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.12||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.12||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.14||, DATA, ALIGN=1

                          EXPORTAS ||area_number.14||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.15||, DATA, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.16||, DATA, ALIGN=1

                          EXPORTAS ||area_number.16||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.17||, DATA, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.data||
                  vent_stat
000000  00                DCB      0x00

                          AREA ||area_number.18||, DATA, ALIGN=1

                          EXPORTAS ||area_number.18||, ||.data||
                  adc_self_ch_cnt
000000  00                DCB      0x00
                  adc_ch_net
000001  00                DCB      0x00
                  adc_ch
000002  00                DCB      0x00
                  adc_ch_cnt
000003  00                DCB      0x00
                  adc_window_flag
000004  00                DCB      0x00
                  sh_cnt0
000005  00                DCB      0x00
                  b1Hz_sh
000006  00                DCB      0x00
                  sh_cnt1
000007  00                DCB      0x00
                  bFAST_REG
000008  00                DCB      0x00
                  bU_VALID
000009  00                DCB      0x00
                  bU_VALID_VALID
00000a  00                DCB      0x00
                  bPRECESSION_REG
00000b  00                DCB      0x00
                  bVOLT_IS_NOT_DOWN
00000c  00                DCB      0x00
                  bVOLT_IS_NOT_UP
00000d  00                DCB      0x00
                  bVOLT_IS_NORM
00000e  00                DCB      0x00
                  net_in_drv_cnt_B
00000f  00                DCB      0x00
                  net_in_drv_cnt_C
000010  00                DCB      0x00
                  net_in_drv_stat_B
000011  00                DCB      0x00
                  net_in_drv_stat_C
000012  0000              DCB      0x00,0x00
                  cntrl_stat_U
000014  03e8              DCW      0x03e8
                  cntrl_stat_I
000016  03e8              DCW      0x03e8
                  net_buff_
000018  0000              DCB      0x00,0x00
                  adc_result
00001a  0000              DCB      0x00,0x00
                  adc_gorb_cnt
00001c  0000              DCB      0x00,0x00
                  adc_zero_cnt
00001e  0000              DCB      0x00,0x00
                  adc_window_cnt
000020  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
000022  0000              DCB      0x00,0x00
                  samokalibr_cnt
000024  0000              DCB      0x00,0x00
                  main_kb_cnt
000026  0000              DCB      0x00,0x00
                  cnt_volt_contr
000028  0000              DCB      0x00,0x00
                  cnt_rel_volt_umin
00002a  0000              DCB      0x00,0x00
                  cnt_rel_volt_umax
00002c  0000              DCB      0x00,0x00
                  rele_stat
00002e  0000              DCB      0x00,0x00
                  rele_ext_cntrl
000030  0000              DCB      0x00,0x00
                  RELE_FUNC
000032  0000              DCB      0x00,0x00
000034  0000              DCB      0x00,0x00
                  adc_self_ch_buff
000036  0000              DCB      0x00,0x00
                          DCDU     0x00000000
                  adc_self_ch_disp
                          DCDU     0x00000000
000040  0000              DCB      0x00,0x00

                          AREA ||area_number.19||, DATA, ALIGN=1

                          EXPORTAS ||area_number.19||, ||.data||
                  cntrl_stat_old
000000  0258              DCW      0x0258

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.21||, DATA, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.22||, DATA, ALIGN=0

                          EXPORTAS ||area_number.22||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.23||, DATA, ALIGN=1

                          EXPORTAS ||area_number.23||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.24||, DATA, ALIGN=0

                          EXPORTAS ||area_number.24||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.26||, DATA, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=2

                          EXPORTAS ||area_number.29||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=1

                          EXPORTAS ||area_number.31||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  plazma_sk
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  cntrl_stat_new
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=1

                          EXPORTAS ||area_number.35||, ||.data||
                  Ibmax
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.36||, DATA, ALIGN=0

                          EXPORTAS ||area_number.36||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.37||, DATA, ALIGN=0

                          EXPORTAS ||area_number.37||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.38||, DATA, ALIGN=0

                          EXPORTAS ||area_number.38||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.39||, DATA, ALIGN=0

                          EXPORTAS ||area_number.39||, ||.data||
                  ch_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.40||, DATA, ALIGN=0

                          EXPORTAS ||area_number.40||, ||.data||
                  b1Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.41||, DATA, ALIGN=0

                          EXPORTAS ||area_number.41||, ||.data||
                  i
000000  00                DCB      0x00

                          AREA ||area_number.42||, DATA, ALIGN=0

                          EXPORTAS ||area_number.42||, ||.data||
                  iiii
000000  00                DCB      0x00

                          AREA ||area_number.43||, DATA, ALIGN=1

                          EXPORTAS ||area_number.43||, ||.data||
                  IZMAX_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.44||, DATA, ALIGN=1

                          EXPORTAS ||area_number.44||, ||.data||
                  kb_cnt_1lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.45||, DATA, ALIGN=1

                          EXPORTAS ||area_number.45||, ||.data||
                  kb_cnt_2lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  kb_full_ver
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  kb_start
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  num_of_wrks_bps
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=0

                          EXPORTAS ||area_number.50||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.51||, DATA, ALIGN=0

                          EXPORTAS ||area_number.51||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.52||, DATA, ALIGN=0

                          EXPORTAS ||area_number.52||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.53||, DATA, ALIGN=1

                          EXPORTAS ||area_number.53||, ||.data||
                  bps_on_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.54||, DATA, ALIGN=1

                          EXPORTAS ||area_number.54||, ||.data||
                  bps_off_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.55||, DATA, ALIGN=0

                          EXPORTAS ||area_number.55||, ||.data||
                  num_necc_up
000000  00                DCB      0x00

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  num_necc_down
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=0

                          EXPORTAS ||area_number.57||, ||.data||
                  spc_stat
000000  00                DCB      0x00

                          AREA ||area_number.58||, DATA, ALIGN=0

                          EXPORTAS ||area_number.58||, ||.data||
                  spc_bat
000000  00                DCB      0x00

                          AREA ||area_number.59||, DATA, ALIGN=0

                          EXPORTAS ||area_number.59||, ||.data||
                  spc_phase
000000  00                DCB      0x00

                          AREA ||area_number.60||, DATA, ALIGN=1

                          EXPORTAS ||area_number.60||, ||.data||
                  vz_cnt_s
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.61||, DATA, ALIGN=1

                          EXPORTAS ||area_number.61||, ||.data||
                  vz_cnt_s_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.62||, DATA, ALIGN=1

                          EXPORTAS ||area_number.62||, ||.data||
                  vz_cnt_h
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.63||, DATA, ALIGN=1

                          EXPORTAS ||area_number.63||, ||.data||
                  vz_cnt_h_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.64||, DATA, ALIGN=0

                          EXPORTAS ||area_number.64||, ||.data||
                  bAVZ
000000  00                DCB      0x00

                          AREA ||area_number.65||, DATA, ALIGN=0

                          EXPORTAS ||area_number.65||, ||.data||
                  ke_start_stat
000000  00                DCB      0x00

                          AREA ||area_number.66||, DATA, ALIGN=1

                          EXPORTAS ||area_number.66||, ||.data||
                  cnt_end_ke
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.67||, DATA, ALIGN=2

                          EXPORTAS ||area_number.67||, ||.data||
                  ke_date
                          %        8

                          AREA ||area_number.68||, DATA, ALIGN=1

                          EXPORTAS ||area_number.68||, ||.data||
                  __ee_vz_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.69||, DATA, ALIGN=1

                          EXPORTAS ||area_number.69||, ||.data||
                  __ee_spc_stat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.70||, DATA, ALIGN=1

                          EXPORTAS ||area_number.70||, ||.data||
                  __ee_spc_bat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.71||, DATA, ALIGN=1

                          EXPORTAS ||area_number.71||, ||.data||
                  __ee_spc_phase
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.72||, DATA, ALIGN=1

                          EXPORTAS ||area_number.72||, ||.data||
                  cntrl_stat_blok_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.73||, DATA, ALIGN=1

                          EXPORTAS ||area_number.73||, ||.data||
                  cntrl_stat_blok_cnt_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.74||, DATA, ALIGN=1

                          EXPORTAS ||area_number.74||, ||.data||
                  cntrl_stat_blok_cnt_plus
                          DCDU     0x00000000

                          AREA ||area_number.75||, DATA, ALIGN=1

                          EXPORTAS ||area_number.75||, ||.data||
                  cntrl_stat_blok_cnt_minus
                          DCDU     0x00000000

                          AREA ||area_number.76||, DATA, ALIGN=0

                          EXPORTAS ||area_number.76||, ||.data||
                  plazma_inv
                          DCDU     0x00000000

                          AREA ||area_number.77||, DATA, ALIGN=0

                          EXPORTAS ||area_number.77||, ||.data||
                  plazma_bat
000000  00                DCB      0x00

                          AREA ||area_number.78||, DATA, ALIGN=2

                          EXPORTAS ||area_number.78||, ||.data||
                  temp_temp_SL
                          DCD      0x00000000
