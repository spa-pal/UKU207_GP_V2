; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\control.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\control.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\control.crf control.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  kb_init PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  4805              LDR      r0,|L1.24|
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f06f013b          MVN      r1,#0x3b
000006  8800              LDRH     r0,[r0,#0]  ; TBAT
000008  ebc01000          RSB      r0,r0,r0,LSL #4
00000c  eb010080          ADD      r0,r1,r0,LSL #2
000010  4902              LDR      r1,|L1.28|
000012  83c8              STRH     r0,[r1,#0x1e]
;;;230    }
000014  4770              BX       lr
;;;231    
                          ENDP

000016  0000              DCW      0x0000
                  |L1.24|
                          DCD      TBAT
                  |L1.28|
                          DCD      ||area_number.24||

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  samokalibr_init PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  4902              LDR      r1,|L2.12|
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  f24060f9          MOV      r0,#0x6f9
000006  8388              STRH     r0,[r1,#0x1c]
000008  4770              BX       lr
;;;230    }
;;;231    
                          ENDP

00000a  0000              DCW      0x0000
                  |L2.12|
                          DCD      ||area_number.24||

                          AREA ||area_number.3||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.3||, ||.text||
                  samokalibr_hndl PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  b510              PUSH     {r4,lr}
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  4c1a              LDR      r4,|L3.108|
000004  8ba0              LDRH     r0,[r4,#0x1c]  ; samokalibr_cnt
000006  1c40              ADDS     r0,r0,#1
000008  b200              SXTH     r0,r0
00000a  83a0              STRH     r0,[r4,#0x1c]
00000c  f5b06fe1          CMP      r0,#0x708
000010  db02              BLT      |L3.24|
000012  2000              MOVS     r0,#0
;;;230    }
000014  83a0              STRH     r0,[r4,#0x1c]
                  |L3.22|
000016  bd10              POP      {r4,pc}
                  |L3.24|
000018  f5b06fdf          CMP      r0,#0x6f8
00001c  d911              BLS      |L3.66|
00001e  230f              MOVS     r3,#0xf
000020  2201              MOVS     r2,#1
000022  2164              MOVS     r1,#0x64
000024  20d2              MOVS     r0,#0xd2
000026  f7fffffe          BL       mess_send
00002a  230f              MOVS     r3,#0xf
00002c  2200              MOVS     r2,#0
00002e  21d8              MOVS     r1,#0xd8
000030  20d7              MOVS     r0,#0xd7
000032  f7fffffe          BL       mess_send
000036  230f              MOVS     r3,#0xf
000038  2200              MOVS     r2,#0
00003a  21d8              MOVS     r1,#0xd8
00003c  20dc              MOVS     r0,#0xdc
00003e  f7fffffe          BL       mess_send
                  |L3.66|
000042  f9b4001c          LDRSH    r0,[r4,#0x1c]  ; samokalibr_cnt
000046  f5a061e0          SUB      r1,r0,#0x700
00004a  3907              SUBS     r1,#7
00004c  d1e3              BNE      |L3.22|
00004e  4808              LDR      r0,|L3.112|
000050  4a08              LDR      r2,|L3.116|
000052  8801              LDRH     r1,[r0,#0]  ; ad7705_buff_
000054  f9b22000          LDRSH    r2,[r2,#0]  ; Kiload0
000058  4291              CMP      r1,r2
00005a  d0dc              BEQ      |L3.22|
00005c  f9b01000          LDRSH    r1,[r0,#0]  ; ad7705_buff_
000060  e8bd4010          POP      {r4,lr}
000064  2014              MOVS     r0,#0x14
000066  f7ffbffe          B.W      lc640_write_int
;;;231    
                          ENDP

00006a  0000              DCW      0x0000
                  |L3.108|
                          DCD      ||area_number.24||
                  |L3.112|
                          DCD      ad7705_buff_
                  |L3.116|
                          DCD      Kiload0

                          AREA ||area_number.4||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.4||, ||.text||
                  ubat_old_drv PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  b510              PUSH     {r4,lr}
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  4cfd              LDR      r4,|L4.1016|
000004  2208              MOVS     r2,#8
000006  2100              MOVS     r1,#0
000008  8820              LDRH     r0,[r4,#0]  ; bat_u_old_cnt
00000a  1c40              ADDS     r0,r0,#1
00000c  8020              STRH     r0,[r4,#0]
00000e  4620              MOV      r0,r4
000010  f7fffffe          BL       gran_ring
;;;230    }
000014  48f9              LDR      r0,|L4.1020|
000016  f9b41000          LDRSH    r1,[r4,#0]  ; bat_u_old_cnt
00001a  eb000141          ADD      r1,r0,r1,LSL #1
00001e  8842              LDRH     r2,[r0,#2]  ; bat
000020  840a              STRH     r2,[r1,#0x20]
000022  f8b0004e          LDRH     r0,[r0,#0x4e]  ; bat
000026  f8a1006c          STRH     r0,[r1,#0x6c]
00002a  bd10              POP      {r4,pc}
;;;231    
                          ENDP

                  unet_drv PROC
;;;242    //-----------------------------------------------
;;;243    void samokalibr_hndl(void)
;;;244    {
;;;245    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
;;;246    
;;;247    if(samokalibr_cnt>=1785U)
;;;248    	{
;;;249    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
;;;250    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
00002c  4af4              LDR      r2,|L4.1024|
00002e  b430              PUSH     {r4,r5}
000030  49f4              LDR      r1,|L4.1028|
000032  f9b2400a          LDRSH    r4,[r2,#0xa]  ; adc_buff_
;;;251    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
000036  f64053ac          MOV      r3,#0xdac
00003a  f9b10000          LDRSH    r0,[r1,#0]
00003e  429c              CMP      r4,r3
000040  dc03              BGT      |L4.74|
;;;252    	} 
;;;253    
;;;254    if(samokalibr_cnt==1799U)
000042  f9b22014          LDRSH    r2,[r2,#0x14]  ; adc_buff_
000046  429a              CMP      r2,r3
000048  dd03              BLE      |L4.82|
                  |L4.74|
00004a  2814              CMP      r0,#0x14
00004c  da04              BGE      |L4.88|
;;;255    	{
;;;256    	if(Kiload0!=ad7705_buff_[0]) lc640_write_int(EE_KILOAD0,ad7705_buff_[0]);
00004e  1c40              ADDS     r0,r0,#1
000050  e001              B        |L4.86|
                  |L4.82|
000052  b108              CBZ      r0,|L4.88|
000054  1e40              SUBS     r0,r0,#1
                  |L4.86|
000056  8008              STRH     r0,[r1,#0]
                  |L4.88|
000058  2214              MOVS     r2,#0x14
00005a  bc30              POP      {r4,r5}
00005c  2100              MOVS     r1,#0
00005e  48e9              LDR      r0,|L4.1028|
000060  f7ffbffe          B.W      gran
;;;257    	}	 	
;;;258    }
;;;259    
                          ENDP

                  matemat PROC
;;;242    //-----------------------------------------------
;;;243    void samokalibr_hndl(void)
;;;244    {
;;;245    if(++samokalibr_cnt>=1800)samokalibr_cnt=0;
;;;246    
;;;247    if(samokalibr_cnt>=1785U)
;;;248    	{
;;;249    	mess_send(MESS2RELE_HNDL,PARAM_RELE_SAMOKALIBR,1,15);
;;;250    	mess_send(MESS2IND_HNDL,PARAM_SAMOKALIBR,0,15);
;;;251    	mess_send(MESS2MATEMAT,PARAM_SAMOKALIBR,0,15);
;;;252    	} 
;;;253    
;;;254    if(samokalibr_cnt==1799U)
;;;255    	{
;;;256    	if(Kiload0!=ad7705_buff_[0]) lc640_write_int(EE_KILOAD0,ad7705_buff_[0]);
000064  b5f0              PUSH     {r4-r7,lr}
000066  48e6              LDR      r0,|L4.1024|
000068  49e7              LDR      r1,|L4.1032|
00006a  f44f722f          MOV      r2,#0x2bc
00006e  f9b00000          LDRSH    r0,[r0,#0]  ; adc_buff_
000072  f9b11000          LDRSH    r1,[r1,#0]  ; Kuload
000076  4be5              LDR      r3,|L4.1036|
000078  4348              MULS     r0,r1,r0
00007a  fb90f0f2          SDIV     r0,r0,r2
00007e  8018              STRH     r0,[r3,#0]
000080  48df              LDR      r0,|L4.1024|
000082  f2427310          MOV      r3,#0x2710
000086  3020              ADDS     r0,r0,#0x20
000088  f9b00000          LDRSH    r0,[r0,#0]  ; adc_buff__
00008c  4348              MULS     r0,r1,r0
00008e  fb90f0f2          SDIV     r0,r0,r2
000092  49df              LDR      r1,|L4.1040|
000094  4ae2              LDR      r2,|L4.1056|
000096  8008              STRH     r0,[r1,#0]
000098  49df              LDR      r1,|L4.1048|
00009a  48de              LDR      r0,|L4.1044|
00009c  f9b14000          LDRSH    r4,[r1,#0]  ; Kiload0
0000a0  49de              LDR      r1,|L4.1052|
0000a2  8800              LDRH     r0,[r0,#0]  ; ad7705_buff_
0000a4  f9b11000          LDRSH    r1,[r1,#0]  ; Kiload1
0000a8  1b00              SUBS     r0,r0,r4
0000aa  4348              MULS     r0,r1,r0
0000ac  fb90f0f3          SDIV     r0,r0,r3
0000b0  8010              STRH     r0,[r2,#0]
0000b2  1b00              SUBS     r0,r0,r4
0000b4  4348              MULS     r0,r1,r0
0000b6  fb90f0f3          SDIV     r0,r0,r3
0000ba  49da              LDR      r1,|L4.1060|
0000bc  4cdc              LDR      r4,|L4.1072|
0000be  8008              STRH     r0,[r1,#0]
0000c0  48d9              LDR      r0,|L4.1064|
0000c2  8801              LDRH     r1,[r0,#0]  ; I_LOAD_MODE
0000c4  48d9              LDR      r0,|L4.1068|
0000c6  f9b03000          LDRSH    r3,[r0,#0]
0000ca  b971              CBNZ     r1,|L4.234|
0000cc  2100              MOVS     r1,#0
0000ce  4608              MOV      r0,r1
0000d0  e008              B        |L4.228|
0000d2  bf00              NOP      
                  |L4.212|
0000d4  eb000580          ADD      r5,r0,r0,LSL #2
0000d8  eb041505          ADD      r5,r4,r5,LSL #4
0000dc  1c40              ADDS     r0,r0,#1
0000de  6a2d              LDR      r5,[r5,#0x20]
0000e0  b2c0              UXTB     r0,r0
0000e2  4429              ADD      r1,r1,r5
                  |L4.228|
0000e4  4298              CMP      r0,r3
0000e6  dbf5              BLT      |L4.212|
0000e8  8011              STRH     r1,[r2,#0]
                  |L4.234|
0000ea  f9b20000          LDRSH    r0,[r2,#0]  ; load_I
0000ee  2100              MOVS     r1,#0
0000f0  2800              CMP      r0,#0
0000f2  da00              BGE      |L4.246|
0000f4  8011              STRH     r1,[r2,#0]
                  |L4.246|
0000f6  2200              MOVS     r2,#0
                  |L4.248|
0000f8  eb020082          ADD      r0,r2,r2,LSL #2
0000fc  eb041000          ADD      r0,r4,r0,LSL #4
000100  78c5              LDRB     r5,[r0,#3]
000102  2d19              CMP      r5,#0x19
000104  d21b              BCS      |L4.318|
000106  7985              LDRB     r5,[r0,#6]
000108  79c6              LDRB     r6,[r0,#7]
00010a  eb052606          ADD      r6,r5,r6,LSL #8
00010e  6206              STR      r6,[r0,#0x20]
000110  7a06              LDRB     r6,[r0,#8]
000112  7a47              LDRB     r7,[r0,#9]
000114  eb062607          ADD      r6,r6,r7,LSL #8
000118  61c6              STR      r6,[r0,#0x1c]
00011a  7a86              LDRB     r6,[r0,#0xa]
00011c  7ac7              LDRB     r7,[r0,#0xb]
00011e  eb062607          ADD      r6,r6,r7,LSL #8
000122  6186              STR      r6,[r0,#0x18]
000124  7b06              LDRB     r6,[r0,#0xc]
000126  6246              STR      r6,[r0,#0x24]
000128  f880504e          STRB     r5,[r0,#0x4e]
00012c  7b85              LDRB     r5,[r0,#0xe]
00012e  f880503e          STRB     r5,[r0,#0x3e]
000132  7c05              LDRB     r5,[r0,#0x10]
000134  7c46              LDRB     r6,[r0,#0x11]
000136  eb052506          ADD      r5,r5,r6,LSL #8
00013a  6485              STR      r5,[r0,#0x48]
00013c  e006              B        |L4.332|
                  |L4.318|
00013e  6181              STR      r1,[r0,#0x18]
000140  6201              STR      r1,[r0,#0x20]
000142  61c1              STR      r1,[r0,#0x1c]
000144  6241              STR      r1,[r0,#0x24]
000146  f880103e          STRB     r1,[r0,#0x3e]
00014a  6481              STR      r1,[r0,#0x48]
                  |L4.332|
00014c  1c52              ADDS     r2,r2,#1
00014e  b2d2              UXTB     r2,r2
000150  2a0c              CMP      r2,#0xc
000152  d3d1              BCC      |L4.248|
000154  48b7              LDR      r0,|L4.1076|
000156  49b8              LDR      r1,|L4.1080|
000158  8800              LDRH     r0,[r0,#0]  ; I_MAX
00015a  4358              MULS     r0,r3,r0
00015c  8008              STRH     r0,[r1,#0]
00015e  48b7              LDR      r0,|L4.1084|
000160  49b7              LDR      r1,|L4.1088|
000162  8800              LDRH     r0,[r0,#0]  ; I_MIN
000164  4358              MULS     r0,r3,r0
000166  8008              STRH     r0,[r1,#0]
000168  bdf0              POP      {r4-r7,pc}
;;;257    	}	 	
;;;258    }
;;;259    
                          ENDP

                  adc_init PROC
;;;358    //-----------------------------------------------
;;;359    void adc_init(void)
00016a  48b6              LDR      r0,|L4.1092|
;;;360    {
;;;361    
;;;362    SET_REG(LPC_PINCON->PINSEL1,1,(25-16)*2,2);
00016c  6841              LDR      r1,[r0,#4]
00016e  f4212140          BIC      r1,r1,#0xc0000
000172  f4412180          ORR      r1,r1,#0x40000
000176  6041              STR      r1,[r0,#4]
;;;363    SET_REG(LPC_PINCON->PINSEL1,1,(24-16)*2,2);
000178  6841              LDR      r1,[r0,#4]
00017a  f4213140          BIC      r1,r1,#0x30000
00017e  f4413180          ORR      r1,r1,#0x10000
000182  6041              STR      r1,[r0,#4]
;;;364    SET_REG(LPC_PINCON->PINSEL1,1,(23-16)*2,2);
000184  6841              LDR      r1,[r0,#4]
000186  f4214140          BIC      r1,r1,#0xc000
00018a  f4414180          ORR      r1,r1,#0x4000
00018e  6041              STR      r1,[r0,#4]
;;;365    
;;;366    
;;;367    SET_REG(LPC_PINCON->PINMODE1,2,(25-16)*2,2);
000190  6c41              LDR      r1,[r0,#0x44]
000192  f4212140          BIC      r1,r1,#0xc0000
000196  f4412100          ORR      r1,r1,#0x80000
00019a  6441              STR      r1,[r0,#0x44]
;;;368    SET_REG(LPC_PINCON->PINMODE1,2,(24-16)*2,2);
00019c  6c41              LDR      r1,[r0,#0x44]
00019e  f4213140          BIC      r1,r1,#0x30000
0001a2  f4413100          ORR      r1,r1,#0x20000
0001a6  6441              STR      r1,[r0,#0x44]
;;;369    SET_REG(LPC_PINCON->PINMODE1,2,(23-16)*2,2);
0001a8  6c41              LDR      r1,[r0,#0x44]
0001aa  f4214140          BIC      r1,r1,#0xc000
0001ae  f4414100          ORR      r1,r1,#0x8000
0001b2  6441              STR      r1,[r0,#0x44]
;;;370    
;;;371    SET_REG(LPC_ADC->ADCR,0,24,3);
0001b4  48a4              LDR      r0,|L4.1096|
0001b6  6801              LDR      r1,[r0,#0]
0001b8  f02161e0          BIC      r1,r1,#0x7000000
0001bc  6001              STR      r1,[r0,#0]
;;;372    
;;;373    SET_REG(LPC_ADC->ADCR,1,21,1);
0001be  6801              LDR      r1,[r0,#0]
0001c0  f4411100          ORR      r1,r1,#0x200000
0001c4  6001              STR      r1,[r0,#0]
;;;374    SET_REG(LPC_ADC->ADCR,0,16,1);
0001c6  6801              LDR      r1,[r0,#0]
0001c8  f4213180          BIC      r1,r1,#0x10000
0001cc  6001              STR      r1,[r0,#0]
;;;375    SET_REG(LPC_ADC->ADCR,1,8,8);
0001ce  6801              LDR      r1,[r0,#0]
0001d0  f421417f          BIC      r1,r1,#0xff00
0001d4  f4417180          ORR      r1,r1,#0x100
0001d8  6001              STR      r1,[r0,#0]
;;;376    
;;;377    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;378    //SET_REG(LPC_GPIO0->FIOPIN,4,5,3);
;;;379    	
;;;380    	/*if(adc_ch<=7)*///SET_REG(LPC_ADC->ADCR,1<<5,0,8);
;;;381         /*else if(adc_ch==8) SET_REG(LPC_ADC->ADCR,1<<2,0,8);
;;;382         else SET_REG(LPC_ADC->ADCR,1<<4,0,8);*/
;;;383    
;;;384    LPC_ADC->ADINTEN     =  (1<< 8);      /* global enable interrupt            */
0001da  1581              ASRS     r1,r0,#22
0001dc  60c1              STR      r1,[r0,#0xc]
0001de  489b              LDR      r0,|L4.1100|
0001e0  0389              LSLS     r1,r1,#14
0001e2  6001              STR      r1,[r0,#0]
;;;385    
;;;386    NVIC_EnableIRQ(ADC_IRQn);             /* enable ADC Interrupt               */
;;;387    
;;;388    
;;;389    }
0001e4  4770              BX       lr
;;;390    
                          ENDP

                  adc_drv7 PROC
;;;391    //-----------------------------------------------
;;;392    void adc_drv7(void) //(Uсети - постоянка)
0001e6  e92d41f0          PUSH     {r4-r8,lr}
;;;393    {
;;;394    //int temp_S;
;;;395    //char i;
;;;396    //signed short temp_SS;
;;;397    
;;;398    adc_self_ch_disp[0]=abs_pal(adc_self_ch_buff[1]-adc_self_ch_buff[0]);//adc_self_ch_buff[0]&0x0f80;
0001ea  4c99              LDR      r4,|L4.1104|
0001ec  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
0001ee  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
0001f0  1a40              SUBS     r0,r0,r1
0001f2  b200              SXTH     r0,r0
0001f4  f7fffffe          BL       abs_pal
0001f8  1da5              ADDS     r5,r4,#6
0001fa  8028              STRH     r0,[r5,#0]
;;;399    adc_self_ch_disp[1]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[1]);//adc_self_ch_buff[1]&0x0f80;
0001fc  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
0001fe  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
000200  1a40              SUBS     r0,r0,r1
000202  b200              SXTH     r0,r0
000204  f7fffffe          BL       abs_pal
000208  8068              STRH     r0,[r5,#2]
;;;400    adc_self_ch_disp[2]=abs_pal(adc_self_ch_buff[2]-adc_self_ch_buff[0]);//adc_self_ch_buff[2]&0x0f80;
00020a  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
00020c  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00020e  1a40              SUBS     r0,r0,r1
000210  b200              SXTH     r0,r0
000212  f7fffffe          BL       abs_pal
;;;401    
;;;402    //adc_self_ch_disp[0]=adc_self_ch_buff[0]&0x0ff0;
;;;403    //adc_self_ch_disp[1]=adc_self_ch_buff[1]&0x0ff0;
;;;404    //adc_self_ch_disp[2]=adc_self_ch_buff[2]&0x0ff0;
;;;405    
;;;406    
;;;407    if(adc_self_ch_disp[2]<300)//==adc_self_ch_disp[2])
000216  f44f7296          MOV      r2,#0x12c
00021a  80a8              STRH     r0,[r5,#4]            ;400
;;;408    	{
;;;409    	adc_result=adc_self_ch_buff[2];
00021c  f1a40128          SUB      r1,r4,#0x28
000220  4290              CMP      r0,r2                 ;407
000222  da01              BGE      |L4.552|
000224  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000226  e00a              B        |L4.574|
                  |L4.552|
;;;410    	} 
;;;411    else if(adc_self_ch_disp[1]<300)//==adc_self_ch_disp[2])
000228  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
00022c  4290              CMP      r0,r2
00022e  da01              BGE      |L4.564|
;;;412    	{
;;;413    	adc_result=adc_self_ch_buff[1];
000230  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000232  e004              B        |L4.574|
                  |L4.564|
;;;414    	}
;;;415    else if(adc_self_ch_disp[0]<300)//==adc_self_ch_disp[1])
000234  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
000238  4290              CMP      r0,r2
00023a  da01              BGE      |L4.576|
;;;416    	{
;;;417    	adc_result=adc_self_ch_buff[0];
00023c  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L4.574|
00023e  8248              STRH     r0,[r1,#0x12]
                  |L4.576|
;;;418    	}
;;;419        //adc_result=92;
;;;420    
;;;421    if(adc_ch_net)
000240  784c              LDRB     r4,[r1,#1]  ; adc_ch_net
000242  2300              MOVS     r3,#0
000244  b31c              CBZ      r4,|L4.654|
;;;422    	{
;;;423    
;;;424    	main_power_buffer[0]+=(long)(adc_result);
000246  486e              LDR      r0,|L4.1024|
000248  f9b12012          LDRSH    r2,[r1,#0x12]  ; adc_result
00024c  3040              ADDS     r0,r0,#0x40
00024e  6805              LDR      r5,[r0,#0]  ; main_power_buffer
000250  4415              ADD      r5,r5,r2
;;;425    	main_power_buffer[1]+=(long)(adc_result);
000252  6005              STR      r5,[r0,#0]  ; main_power_buffer
000254  6845              LDR      r5,[r0,#4]  ; main_power_buffer
000256  4415              ADD      r5,r5,r2
;;;426    	main_power_buffer[2]+=(long)(adc_result);
000258  6045              STR      r5,[r0,#4]  ; main_power_buffer
00025a  6885              LDR      r5,[r0,#8]  ; main_power_buffer
00025c  4415              ADD      r5,r5,r2
;;;427    	main_power_buffer[3]+=(long)(adc_result);
00025e  6085              STR      r5,[r0,#8]  ; main_power_buffer
000260  68c5              LDR      r5,[r0,#0xc]  ; main_power_buffer
000262  442a              ADD      r2,r2,r5
;;;428    
;;;429    	adc_net_buff_cnt++;
000264  60c2              STR      r2,[r0,#0xc]  ; main_power_buffer
000266  8b4a              LDRH     r2,[r1,#0x1a]  ; adc_net_buff_cnt
000268  1c52              ADDS     r2,r2,#1
00026a  b212              SXTH     r2,r2
00026c  834a              STRH     r2,[r1,#0x1a]
;;;430    	if(adc_net_buff_cnt>=0x1000)
00026e  f5b25f80          CMP      r2,#0x1000
000272  db00              BLT      |L4.630|
;;;431    		{
;;;432    		adc_net_buff_cnt=0;
000274  834b              STRH     r3,[r1,#0x1a]
                  |L4.630|
;;;433    		}
;;;434    	if((adc_net_buff_cnt&0x03ff)==0)
000276  f9b1201a          LDRSH    r2,[r1,#0x1a]  ; adc_net_buff_cnt
00027a  0595              LSLS     r5,r2,#22
00027c  d135              BNE      |L4.746|
;;;435    		{
;;;436    		#ifdef UKU_220
;;;437    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>11);
;;;438    		#else
;;;439    		net_buff_=(short)((main_power_buffer[adc_net_buff_cnt>>10])>>8);
00027e  1292              ASRS     r2,r2,#10
000280  f8505022          LDR      r5,[r0,r2,LSL #2]
000284  122d              ASRS     r5,r5,#8
000286  820d              STRH     r5,[r1,#0x10]
;;;440    		#endif
;;;441    		main_power_buffer[adc_net_buff_cnt>>10]=0;
000288  f8403022          STR      r3,[r0,r2,LSL #2]
00028c  e02d              B        |L4.746|
                  |L4.654|
;;;442    		}
;;;443    
;;;444    
;;;445    	} 
;;;446    else if(!adc_ch_net)
;;;447    	{
;;;448    	adc_buff[adc_ch][adc_ch_cnt]=(long)adc_result;
00028e  4f71              LDR      r7,|L4.1108|
000290  7888              LDRB     r0,[r1,#2]  ; adc_ch
000292  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
000296  eb0712c0          ADD      r2,r7,r0,LSL #7
00029a  f9b1e012          LDRSH    lr,[r1,#0x12]  ; adc_result
00029e  f842e02c          STR      lr,[r2,r12,LSL #2]
;;;449    	
;;;450    	if((adc_ch_cnt&0x03)==0)
0002a2  ea5f728c          LSLS     r2,r12,#30
0002a6  d112              BNE      |L4.718|
;;;451    		{
;;;452    		long temp_L;
;;;453    		char i;
;;;454    		temp_L=0;
0002a8  2500              MOVS     r5,#0
;;;455    		for(i=0;i<32;i++)
0002aa  462a              MOV      r2,r5
;;;456    			{
;;;457    			temp_L+=adc_buff[adc_ch][i];
0002ac  eb0716c0          ADD      r6,r7,r0,LSL #7
                  |L4.688|
0002b0  f8567022          LDR      r7,[r6,r2,LSL #2]
0002b4  1c52              ADDS     r2,r2,#1              ;455
0002b6  b2d2              UXTB     r2,r2                 ;455
0002b8  443d              ADD      r5,r5,r7
0002ba  2a20              CMP      r2,#0x20              ;455
0002bc  d3f8              BCC      |L4.688|
;;;458    			}
;;;459    		adc_buff_[adc_ch]= (short)(temp_L>>5);
0002be  116a              ASRS     r2,r5,#5
0002c0  4d4f              LDR      r5,|L4.1024|
0002c2  f8252010          STRH     r2,[r5,r0,LSL #1]
;;;460    		adc_buff__[adc_ch]= adc_buff[adc_ch][adc_ch_cnt];
0002c6  f1050220          ADD      r2,r5,#0x20
0002ca  f822e010          STRH     lr,[r2,r0,LSL #1]
                  |L4.718|
;;;461    		//adc_buff_[3]=346;
;;;462    		}
;;;463    	if(++adc_ch>=16) 
0002ce  1c40              ADDS     r0,r0,#1
0002d0  b2c0              UXTB     r0,r0
0002d2  7088              STRB     r0,[r1,#2]
0002d4  2810              CMP      r0,#0x10
0002d6  d308              BCC      |L4.746|
;;;464    		{
;;;465    		adc_ch=0;
;;;466    		adc_ch_cnt++;
0002d8  f10c0c01          ADD      r12,r12,#1
0002dc  f00c00ff          AND      r0,r12,#0xff
0002e0  708b              STRB     r3,[r1,#2]            ;465
0002e2  70c8              STRB     r0,[r1,#3]
;;;467    		if(adc_ch_cnt>=32)adc_ch_cnt=0;
0002e4  2820              CMP      r0,#0x20
0002e6  d300              BCC      |L4.746|
0002e8  70cb              STRB     r3,[r1,#3]
                  |L4.746|
;;;468    		}
;;;469    	}
;;;470    
;;;471      
;;;472    
;;;473    adc_self_ch_cnt=0;
;;;474    
;;;475    adc_ch_net++;
0002ea  1c64              ADDS     r4,r4,#1
0002ec  700b              STRB     r3,[r1,#0]            ;473
;;;476    adc_ch_net&=1;
0002ee  f0140001          ANDS     r0,r4,#1
;;;477    
;;;478    //SET_REG(LPC_GPIO0->FIODIR,7,5,3);
;;;479    //SET_REG(LPC_GPIO0->FIOPIN,adc_ch,5,3);
;;;480    
;;;481    if(adc_ch_net)
;;;482    	{
;;;483    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;484    	//LPC_GPIO2->FIOPIN|=(1<<7);
;;;485    	SET_REG(LPC_ADC->ADCR,1<<2,0,8);
0002f2  4a55              LDR      r2,|L4.1096|
0002f4  7048              STRB     r0,[r1,#1]            ;476
0002f6  d005              BEQ      |L4.772|
0002f8  6810              LDR      r0,[r2,#0]
0002fa  f02000ff          BIC      r0,r0,#0xff
0002fe  1d00              ADDS     r0,r0,#4
000300  6010              STR      r0,[r2,#0]
000302  e034              B        |L4.878|
                  |L4.772|
;;;486    	}
;;;487    else
;;;488    	{
;;;489    	//LPC_GPIO2->FIODIR|=(1<<7);
;;;490    	//LPC_GPIO2->FIOPIN&=~(1<<7);
;;;491    	if(!(adc_ch&(1<<3)))SET_REG(LPC_ADC->ADCR,1<<0,0,8);
000304  7889              LDRB     r1,[r1,#2]  ; adc_ch
000306  0708              LSLS     r0,r1,#28
000308  2800              CMP      r0,#0
;;;492    	else 			SET_REG(LPC_ADC->ADCR,1<<1,0,8);
00030a  6810              LDR      r0,[r2,#0]
00030c  f02000ff          BIC      r0,r0,#0xff
000310  db02              BLT      |L4.792|
000312  f1000001          ADD      r0,r0,#1              ;491
000316  e001              B        |L4.796|
                  |L4.792|
000318  f1000002          ADD      r0,r0,#2
                  |L4.796|
00031c  6010              STR      r0,[r2,#0]
;;;493    
;;;494    
;;;495    	SET_REG(LPC_GPIO0->FIODIR,1,28,1);
00031e  484e              LDR      r0,|L4.1112|
000320  6803              LDR      r3,[r0,#0]
000322  f0435380          ORR      r3,r3,#0x10000000
000326  6003              STR      r3,[r0,#0]
;;;496    	SET_REG(LPC_GPIO1->FIODIR,1,30,1);
000328  6a03              LDR      r3,[r0,#0x20]
00032a  f0434380          ORR      r3,r3,#0x40000000
00032e  6203              STR      r3,[r0,#0x20]
;;;497    	SET_REG(LPC_GPIO3->FIODIR,1,26,1);
000330  6e03              LDR      r3,[r0,#0x60]
000332  f0436380          ORR      r3,r3,#0x4000000
000336  6603              STR      r3,[r0,#0x60]
;;;498    
;;;499    	if(!(adc_ch&(1<<0)))SET_REG(LPC_GPIO0->FIOPIN,0,28,1);
000338  07cb              LSLS     r3,r1,#31
;;;500    	else 			SET_REG(LPC_GPIO0->FIOPIN,1,28,1);
00033a  6943              LDR      r3,[r0,#0x14]
00033c  d008              BEQ      |L4.848|
00033e  f0435380          ORR      r3,r3,#0x10000000
                  |L4.834|
000342  6143              STR      r3,[r0,#0x14]
;;;501    
;;;502    	if(!(adc_ch&(1<<1)))SET_REG(LPC_GPIO1->FIOPIN,0,30,1);
000344  078b              LSLS     r3,r1,#30
;;;503    	else 			SET_REG(LPC_GPIO1->FIOPIN,1,30,1);
000346  6b43              LDR      r3,[r0,#0x34]
000348  d405              BMI      |L4.854|
00034a  f0234380          BIC      r3,r3,#0x40000000     ;502
00034e  e004              B        |L4.858|
                  |L4.848|
000350  f0235380          BIC      r3,r3,#0x10000000     ;499
000354  e7f5              B        |L4.834|
                  |L4.854|
000356  f0434380          ORR      r3,r3,#0x40000000
                  |L4.858|
00035a  6343              STR      r3,[r0,#0x34]
;;;504    
;;;505    	if(!(adc_ch&(1<<2)))SET_REG(LPC_GPIO3->FIOPIN,0,26,1);
00035c  0749              LSLS     r1,r1,#29
;;;506    	else 			SET_REG(LPC_GPIO3->FIOPIN,1,26,1);
00035e  6f41              LDR      r1,[r0,#0x74]
000360  d402              BMI      |L4.872|
000362  f0216180          BIC      r1,r1,#0x4000000      ;505
000366  e001              B        |L4.876|
                  |L4.872|
000368  f0416180          ORR      r1,r1,#0x4000000
                  |L4.876|
00036c  6741              STR      r1,[r0,#0x74]         ;505
                  |L4.878|
;;;507    	}
;;;508    	
;;;509    
;;;510    
;;;511    
;;;512    LPC_ADC->ADCR |=  (1<<24);
00036e  6810              LDR      r0,[r2,#0]
000370  f0407080          ORR      r0,r0,#0x1000000
000374  6010              STR      r0,[r2,#0]
                  |L4.886|
;;;513    
;;;514    }
000376  e8bd81f0          POP      {r4-r8,pc}
;;;515    
                          ENDP

                  restart_off PROC
;;;1031   //-----------------------------------------------
;;;1032   void restart_off(void)
00037a  b510              PUSH     {r4,lr}
;;;1033   {
;;;1034   lc640_write_long(EE_TIME_PROC_GS_RESTART,0);
00037c  2100              MOVS     r1,#0
00037e  20d0              MOVS     r0,#0xd0
000380  f7fffffe          BL       lc640_write_long
;;;1035   lc640_write_long(EE_TIME_PROC_PS_RESTART,0);
000384  2100              MOVS     r1,#0
000386  e8bd4010          POP      {r4,lr}
00038a  20d4              MOVS     r0,#0xd4
00038c  f7ffbffe          B.W      lc640_write_long
;;;1036   }
;;;1037   
                          ENDP

                  ach_off_hndl PROC
;;;787    //драйвер функции выключения по амперчасам
;;;788    void ach_off_hndl(void)
000390  b570              PUSH     {r4-r6,lr}
;;;789    {
;;;790    
;;;791    if((work_stat!=wsOFF)&&(ACH_OFF_EN))
000392  4c32              LDR      r4,|L4.1116|
;;;792    	{
;;;793    	milliAmperSecunda+=((long)load_I);
000394  4832              LDR      r0,|L4.1120|
000396  2500              MOVS     r5,#0                 ;791
000398  7821              LDRB     r1,[r4,#0]            ;791  ; work_stat
00039a  b351              CBZ      r1,|L4.1010|
00039c  4931              LDR      r1,|L4.1124|
00039e  8809              LDRH     r1,[r1,#0]            ;791  ; ACH_OFF_EN
0003a0  b339              CBZ      r1,|L4.1010|
0003a2  4a1f              LDR      r2,|L4.1056|
0003a4  6801              LDR      r1,[r0,#0]  ; milliAmperSecunda
0003a6  f9b22000          LDRSH    r2,[r2,#0]  ; load_I
0003aa  4411              ADD      r1,r1,r2
;;;794    	if(milliAmperSecunda>=3600L)
0003ac  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
0003ae  f5b16f61          CMP      r1,#0xe10
0003b2  db1f              BLT      |L4.1012|
;;;795    		{
;;;796    		milliAmperSecunda-=3600L;
;;;797    		AMPERCHAS+=1;
0003b4  4e2c              LDR      r6,|L4.1128|
0003b6  f5a16161          SUB      r1,r1,#0xe10          ;796
0003ba  6001              STR      r1,[r0,#0]  ; milliAmperSecunda
0003bc  6831              LDR      r1,[r6,#0]  ; AMPERCHAS
;;;798    		lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
0003be  f44f709e          MOV      r0,#0x13c
0003c2  1c49              ADDS     r1,r1,#1              ;797
0003c4  6031              STR      r1,[r6,#0]  ; AMPERCHAS
0003c6  f7fffffe          BL       lc640_write_long
;;;799    
;;;800    		if(AMPERCHAS>=ACH_OFF_LEVEL)
0003ca  4928              LDR      r1,|L4.1132|
0003cc  6830              LDR      r0,[r6,#0]  ; AMPERCHAS
0003ce  f9b11000          LDRSH    r1,[r1,#0]  ; ACH_OFF_LEVEL
0003d2  4288              CMP      r0,r1
0003d4  db0e              BLT      |L4.1012|
;;;801    			{
;;;802    			work_stat=wsOFF;
0003d6  7025              STRB     r5,[r4,#0]
;;;803    			restart_off();
0003d8  f7fffffe          BL       restart_off
;;;804    			tree_up(iProcIsComplete,1,0,0);
0003dc  2300              MOVS     r3,#0
0003de  461a              MOV      r2,r3
0003e0  2101              MOVS     r1,#1
0003e2  2078              MOVS     r0,#0x78
0003e4  f7fffffe          BL       tree_up
;;;805    			ret(0);
0003e8  e8bd4070          POP      {r4-r6,lr}
0003ec  2000              MOVS     r0,#0
0003ee  f7ffbffe          B.W      ||ret||
                  |L4.1010|
;;;806    			}
;;;807    		}
;;;808    	}
;;;809    else 
;;;810    	{
;;;811    	milliAmperSecunda=0;
0003f2  6005              STR      r5,[r0,#0]  ; milliAmperSecunda
                  |L4.1012|
;;;812    	}
;;;813    
;;;814    }
0003f4  bd70              POP      {r4-r6,pc}
0003f6  0000              DCW      0x0000
                  |L4.1016|
                          DCD      bat_u_old_cnt
                  |L4.1020|
                          DCD      bat
                  |L4.1024|
                          DCD      ||.bss||+0x800
                  |L4.1028|
                          DCD      unet_drv_cnt
                  |L4.1032|
                          DCD      Kuload
                  |L4.1036|
                          DCD      load_U
                  |L4.1040|
                          DCD      load_U_
                  |L4.1044|
                          DCD      ad7705_buff_
                  |L4.1048|
                          DCD      Kiload0
                  |L4.1052|
                          DCD      Kiload1
                  |L4.1056|
                          DCD      load_I
                  |L4.1060|
                          DCD      load_I_
                  |L4.1064|
                          DCD      I_LOAD_MODE
                  |L4.1068|
                          DCD      NUMIST
                  |L4.1072|
                          DCD      bps
                  |L4.1076|
                          DCD      I_MAX
                  |L4.1080|
                          DCD      I_MAX_IPS
                  |L4.1084|
                          DCD      I_MIN
                  |L4.1088|
                          DCD      I_MIN_IPS
                  |L4.1092|
                          DCD      0x4002c000
                  |L4.1096|
                          DCD      0x40034000
                  |L4.1100|
                          DCD      0xe000e100
                  |L4.1104|
                          DCD      ||area_number.24||+0x28
                  |L4.1108|
                          DCD      ||.bss||
                  |L4.1112|
                          DCD      0x2009c000
                  |L4.1116|
                          DCD      work_stat
                  |L4.1120|
                          DCD      milliAmperSecunda
                  |L4.1124|
                          DCD      ACH_OFF_EN
                  |L4.1128|
                          DCD      AMPERCHAS
                  |L4.1132|
                          DCD      ACH_OFF_LEVEL
                          ENDP

                  curr_off_hndl PROC
;;;817    //драйвер функции выключения по снижению тока
;;;818    void curr_off_hndl(void)
000470  b570              PUSH     {r4-r6,lr}
;;;819    {
;;;820    
;;;821    if((work_stat!=wsOFF)&&(CURR_OFF_EN))
000472  4cff              LDR      r4,|L4.2160|
;;;822    	{
;;;823    	if(curr_off_start_cnt<CUR_OFF_T_OFF)curr_off_start_cnt++;
;;;824    	else
;;;825    		{
;;;826    		signed int temp_I=0;
;;;827    		if(work_stat==wsGS)
;;;828    			{
;;;829    			temp_I=(signed int)I_ug_temp;
;;;830    			}
;;;831    		else if(work_stat==wsPS)
;;;832    			{
;;;833    			temp_I=(signed int)I_maxp;
;;;834    			}
;;;835    		temp_I*=(signed int)CUR_OFF_LEVEL_RELATIV;
;;;836    		temp_I/=100;
;;;837    		curr_off_temp=(short)temp_I;
;;;838    		if(load_I<curr_off_temp)
;;;839    			{
;;;840    			curr_off_stop_cnt++;
000474  4aff              LDR      r2,|L4.2164|
000476  2100              MOVS     r1,#0                 ;821
000478  7825              LDRB     r5,[r4,#0]            ;821  ; work_stat
00047a  48ff              LDR      r0,|L4.2168|
00047c  b3f5              CBZ      r5,|L4.1276|
00047e  4bff              LDR      r3,|L4.2172|
000480  881b              LDRH     r3,[r3,#0]            ;821  ; CURR_OFF_EN
000482  b3db              CBZ      r3,|L4.1276|
000484  4efe              LDR      r6,|L4.2176|
000486  f9b03000          LDRSH    r3,[r0,#0]            ;823  ; curr_off_start_cnt
00048a  f9b66000          LDRSH    r6,[r6,#0]            ;823  ; CUR_OFF_T_OFF
00048e  42b3              CMP      r3,r6                 ;823
000490  da02              BGE      |L4.1176|
000492  1c5b              ADDS     r3,r3,#1              ;823
000494  8003              STRH     r3,[r0,#0]            ;823
;;;841    			if(curr_off_stop_cnt>=CUR_OFF_T_ON)
;;;842    				{
;;;843    				work_stat=wsOFF;
;;;844    				restart_off();
;;;845    				tree_up(iProcIsComplete,2,0,0);
;;;846    				ret(0);
;;;847    				}
;;;848    			}
;;;849    		else curr_off_stop_cnt=0;
;;;850    		}
;;;851    	}
;;;852    else 
;;;853    	{
;;;854    	curr_off_start_cnt=0;
;;;855    	curr_off_stop_cnt=0;
;;;856    	}
;;;857    }	
000496  e7ad              B        |L4.1012|
                  |L4.1176|
000498  2000              MOVS     r0,#0                 ;826
00049a  2d01              CMP      r5,#1                 ;827
00049c  d002              BEQ      |L4.1188|
00049e  2d02              CMP      r5,#2                 ;831
0004a0  d002              BEQ      |L4.1192|
0004a2  e004              B        |L4.1198|
                  |L4.1188|
0004a4  48f7              LDR      r0,|L4.2180|
0004a6  e000              B        |L4.1194|
                  |L4.1192|
0004a8  48f7              LDR      r0,|L4.2184|
                  |L4.1194|
0004aa  f9b00000          LDRSH    r0,[r0,#0]            ;833  ; I_maxp
                  |L4.1198|
0004ae  4bf7              LDR      r3,|L4.2188|
0004b0  f9b33000          LDRSH    r3,[r3,#0]            ;835  ; CUR_OFF_LEVEL_RELATIV
0004b4  4358              MULS     r0,r3,r0              ;835
0004b6  2364              MOVS     r3,#0x64              ;836
0004b8  fb90f0f3          SDIV     r0,r0,r3              ;836
0004bc  4bf4              LDR      r3,|L4.2192|
0004be  b200              SXTH     r0,r0                 ;837
0004c0  8018              STRH     r0,[r3,#0]            ;837
0004c2  4bf4              LDR      r3,|L4.2196|
0004c4  f9b33000          LDRSH    r3,[r3,#0]            ;838  ; load_I
0004c8  4283              CMP      r3,r0                 ;838
0004ca  da16              BGE      |L4.1274|
0004cc  8810              LDRH     r0,[r2,#0]            ;840  ; curr_off_stop_cnt
0004ce  1c40              ADDS     r0,r0,#1              ;840
0004d0  b200              SXTH     r0,r0                 ;840
0004d2  8010              STRH     r0,[r2,#0]            ;840
0004d4  4af0              LDR      r2,|L4.2200|
0004d6  f9b22000          LDRSH    r2,[r2,#0]            ;841  ; CUR_OFF_T_ON
0004da  4290              CMP      r0,r2                 ;841
0004dc  db8a              BLT      |L4.1012|
0004de  7021              STRB     r1,[r4,#0]            ;843
0004e0  f7fffffe          BL       restart_off
0004e4  2300              MOVS     r3,#0                 ;845
0004e6  461a              MOV      r2,r3                 ;845
0004e8  2102              MOVS     r1,#2                 ;845
0004ea  2078              MOVS     r0,#0x78              ;845
0004ec  f7fffffe          BL       tree_up
0004f0  e8bd4070          POP      {r4-r6,lr}            ;846
0004f4  2000              MOVS     r0,#0                 ;846
0004f6  f7ffbffe          B.W      ||ret||
                  |L4.1274|
0004fa  e000              B        |L4.1278|
                  |L4.1276|
0004fc  e001              B        |L4.1282|
                  |L4.1278|
0004fe  8011              STRH     r1,[r2,#0]            ;849
000500  e778              B        |L4.1012|
                  |L4.1282|
000502  8001              STRH     r1,[r0,#0]            ;854
000504  e7f9              B        |L4.1274|
;;;858    
                          ENDP

                  time_hndl PROC
;;;859    //-----------------------------------------------
;;;860    void time_hndl(void) /*ГЦ раз в секунду*/
000506  e92d5ff0          PUSH     {r4-r12,lr}
;;;861    {
;;;862    if((REV_IS_ON)&&(AVT_REV_IS_ON))
;;;863    	{
;;;864    
;;;865    	}
;;;866    
;;;867    
;;;868    
;;;869    
;;;870    if(work_stat==wsGS)
00050a  f8df8364          LDR      r8,|L4.2160|
;;;871    	{
;;;872    	time_proc++;
;;;873    	if(((time_proc%600L)==0)&&(restart_enable==reON))
;;;874    		{
;;;875    		lc640_write_long(EE_TIME_PROC_GS_RESTART,time_proc);
;;;876    		}
;;;877    	if(time_proc_remain)
;;;878    		{
;;;879    		time_proc_remain--;
;;;880    		}
;;;881    	if((!time_proc_remain)&&(!T_PROC_GS_MODE))
;;;882    		{
;;;883    		work_stat=wsOFF;
;;;884    		restart_off();
;;;885    		tree_up(iProcIsComplete,0,0,0);
;;;886    		ret(0);
;;;887    		}
;;;888    	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
00050e  f8dfb38c          LDR      r11,|L4.2204|
;;;889    		time_proc_phase++;
;;;890    		
;;;891    		if(proc_phase==ppFF) {
;;;892    			REV_STAT=rsFF;
000512  4de3              LDR      r5,|L4.2208|
000514  f8980000          LDRB     r0,[r8,#0]            ;870  ; work_stat
;;;893    			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;894    				proc_phase=ppFF_P_REW;	
;;;895    				time_proc_phase=0;
;;;896    			}
;;;897    		} else if(proc_phase==ppFF_P_REW) {
;;;898    			if(time_proc_phase==0)REV_STAT=rsFF;
;;;899    			else REV_STAT=rsREW;
;;;900    			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
000518  4fe2              LDR      r7,|L4.2212|
00051a  f8df938c          LDR      r9,|L4.2216|
00051e  2601              MOVS     r6,#1                 ;870
000520  2400              MOVS     r4,#0                 ;877
000522  f44f7a16          MOV      r10,#0x258            ;873
000526  2801              CMP      r0,#1                 ;870
000528  d162              BNE      |L4.1520|
00052a  48e0              LDR      r0,|L4.2220|
00052c  6801              LDR      r1,[r0,#0]            ;872  ; time_proc
00052e  1c49              ADDS     r1,r1,#1              ;872
000530  fb91f2fa          SDIV     r2,r1,r10             ;873
000534  6001              STR      r1,[r0,#0]            ;873  ; time_proc
000536  fb0a1012          MLS      r0,r10,r2,r1          ;873
00053a  b930              CBNZ     r0,|L4.1354|
00053c  48dc              LDR      r0,|L4.2224|
00053e  7800              LDRB     r0,[r0,#0]            ;873  ; restart_enable
000540  2801              CMP      r0,#1                 ;873
000542  d102              BNE      |L4.1354|
000544  20d0              MOVS     r0,#0xd0              ;875
000546  f7fffffe          BL       lc640_write_long
                  |L4.1354|
00054a  f8d91000          LDR      r1,[r9,#0]            ;877  ; time_proc_remain
00054e  4648              MOV      r0,r9                 ;877
000550  b109              CBZ      r1,|L4.1366|
000552  1e49              SUBS     r1,r1,#1              ;879
000554  6001              STR      r1,[r0,#0]            ;879  ; time_proc_remain
                  |L4.1366|
000556  4608              MOV      r0,r1                 ;881
000558  49d6              LDR      r1,|L4.2228|
00055a  f9b11000          LDRSH    r1,[r1,#0]            ;881  ; T_PROC_GS_MODE
00055e  4308              ORRS     r0,r0,r1              ;881
000560  d10c              BNE      |L4.1404|
000562  f8884000          STRB     r4,[r8,#0]            ;883
000566  f7fffffe          BL       restart_off
00056a  2300              MOVS     r3,#0                 ;885
00056c  461a              MOV      r2,r3                 ;885
00056e  4619              MOV      r1,r3                 ;885
000570  2078              MOVS     r0,#0x78              ;885
000572  f7fffffe          BL       tree_up
000576  2000              MOVS     r0,#0                 ;886
000578  f7fffffe          BL       ||ret||
                  |L4.1404|
00057c  48ce              LDR      r0,|L4.2232|
00057e  8800              LDRH     r0,[r0,#0]            ;888  ; REV_IS_ON
000580  b3b0              CBZ      r0,|L4.1520|
000582  f8bb0000          LDRH     r0,[r11,#0]           ;888  ; AVT_REV_IS_ON
000586  b398              CBZ      r0,|L4.1520|
000588  4bcc              LDR      r3,|L4.2236|
00058a  8818              LDRH     r0,[r3,#0]            ;889  ; time_proc_phase
00058c  1c40              ADDS     r0,r0,#1              ;889
00058e  b201              SXTH     r1,r0                 ;889
000590  48cb              LDR      r0,|L4.2240|
000592  8019              STRH     r1,[r3,#0]            ;889
000594  7802              LDRB     r2,[r0,#0]            ;891  ; proc_phase
000596  b132              CBZ      r2,|L4.1446|
000598  2a01              CMP      r2,#1                 ;897
00059a  d00c              BEQ      |L4.1462|
;;;901    				proc_phase=ppREW;	
;;;902    				time_proc_phase=0;
;;;903    			}
;;;904    		} else if(proc_phase==ppREW) {
00059c  2a02              CMP      r2,#2
00059e  d015              BEQ      |L4.1484|
;;;905    			REV_STAT=rsREW;
;;;906    			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;907    				proc_phase=ppREW_P_FF;	
;;;908    				time_proc_phase=0;
;;;909    			}
;;;910    		} else if(proc_phase==ppREW_P_FF) {
0005a0  2a03              CMP      r2,#3
0005a2  d01c              BEQ      |L4.1502|
0005a4  e024              B        |L4.1520|
                  |L4.1446|
0005a6  4ac7              LDR      r2,|L4.2244|
0005a8  702e              STRB     r6,[r5,#0]            ;892
0005aa  f9b22000          LDRSH    r2,[r2,#0]            ;893  ; AVT_REV_TIME_FF
0005ae  4291              CMP      r1,r2                 ;893
0005b0  db1e              BLT      |L4.1520|
0005b2  7006              STRB     r6,[r0,#0]            ;894
0005b4  e01b              B        |L4.1518|
                  |L4.1462|
0005b6  b139              CBZ      r1,|L4.1480|
0005b8  f8854000          STRB.W   r4,[r5,#0]            ;899
                  |L4.1468|
0005bc  f9b72000          LDRSH    r2,[r7,#0]            ;900  ; AVT_REV_TIME_PAUSE
0005c0  4291              CMP      r1,r2                 ;900
0005c2  db15              BLT      |L4.1520|
0005c4  2102              MOVS     r1,#2                 ;901
0005c6  e008              B        |L4.1498|
                  |L4.1480|
0005c8  702e              STRB     r6,[r5,#0]            ;898
0005ca  e7f7              B        |L4.1468|
                  |L4.1484|
0005cc  4abe              LDR      r2,|L4.2248|
0005ce  702c              STRB     r4,[r5,#0]            ;905
0005d0  f9b22000          LDRSH    r2,[r2,#0]            ;906  ; AVT_REV_TIME_REW
0005d4  4291              CMP      r1,r2                 ;906
0005d6  db0b              BLT      |L4.1520|
0005d8  2103              MOVS     r1,#3                 ;907
                  |L4.1498|
0005da  7001              STRB     r1,[r0,#0]            ;901
0005dc  e007              B        |L4.1518|
                  |L4.1502|
;;;911    			if(time_proc_phase==0)REV_STAT=rsREW;
0005de  b1a9              CBZ      r1,|L4.1548|
;;;912    			else REV_STAT=rsFF;
0005e0  f8856000          STRB.W   r6,[r5,#0]
                  |L4.1508|
;;;913    			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
0005e4  f9b72000          LDRSH    r2,[r7,#0]  ; AVT_REV_TIME_PAUSE
0005e8  4291              CMP      r1,r2
0005ea  db01              BLT      |L4.1520|
;;;914    				proc_phase=ppFF;	
0005ec  7004              STRB     r4,[r0,#0]
                  |L4.1518|
;;;915    				time_proc_phase=0;
0005ee  801c              STRH     r4,[r3,#0]
                  |L4.1520|
;;;916    			}
;;;917    		}
;;;918    	}
;;;919    	}
;;;920    
;;;921    
;;;922    if(work_stat==wsPS)
0005f0  f8980000          LDRB     r0,[r8,#0]  ; work_stat
0005f4  2802              CMP      r0,#2
0005f6  d15c              BNE      |L4.1714|
;;;923    	{
;;;924    	time_proc++;
0005f8  48ac              LDR      r0,|L4.2220|
0005fa  6801              LDR      r1,[r0,#0]  ; time_proc
0005fc  1c49              ADDS     r1,r1,#1
;;;925    	if(((time_proc%600L)==0)&&(restart_enable==reON))
0005fe  fb91f2fa          SDIV     r2,r1,r10
000602  6001              STR      r1,[r0,#0]  ; time_proc
000604  fb0a1012          MLS      r0,r10,r2,r1
000608  b110              CBZ      r0,|L4.1552|
00060a  e008              B        |L4.1566|
                  |L4.1548|
00060c  702c              STRB     r4,[r5,#0]            ;911
00060e  e7e9              B        |L4.1508|
                  |L4.1552|
000610  48a7              LDR      r0,|L4.2224|
000612  7800              LDRB     r0,[r0,#0]  ; restart_enable
000614  2801              CMP      r0,#1
000616  d102              BNE      |L4.1566|
;;;926    		{
;;;927    		lc640_write_long(EE_TIME_PROC_PS_RESTART,time_proc);
000618  20d4              MOVS     r0,#0xd4
00061a  f7fffffe          BL       lc640_write_long
                  |L4.1566|
;;;928    		}
;;;929    	if(time_proc_remain)
00061e  f8d91000          LDR      r1,[r9,#0]  ; time_proc_remain
000622  4648              MOV      r0,r9
000624  b109              CBZ      r1,|L4.1578|
;;;930    		{
;;;931    		time_proc_remain--;
000626  1e49              SUBS     r1,r1,#1
000628  6001              STR      r1,[r0,#0]  ; time_proc_remain
                  |L4.1578|
;;;932    		}
;;;933    	if((!time_proc_remain)&&(!T_PROC_PS_MODE))
00062a  4608              MOV      r0,r1
00062c  49a7              LDR      r1,|L4.2252|
00062e  f9b11000          LDRSH    r1,[r1,#0]  ; T_PROC_PS_MODE
000632  4308              ORRS     r0,r0,r1
000634  d10c              BNE      |L4.1616|
;;;934    		{
;;;935    		work_stat=wsOFF;
000636  f8884000          STRB     r4,[r8,#0]
;;;936    		restart_off();
00063a  f7fffffe          BL       restart_off
;;;937    		tree_up(iProcIsComplete,0,0,0);
00063e  2300              MOVS     r3,#0
000640  461a              MOV      r2,r3
000642  4619              MOV      r1,r3
000644  2078              MOVS     r0,#0x78
000646  f7fffffe          BL       tree_up
;;;938    		ret(0);
00064a  2000              MOVS     r0,#0
00064c  f7fffffe          BL       ||ret||
                  |L4.1616|
;;;939    		}
;;;940    	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000650  4899              LDR      r0,|L4.2232|
000652  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000654  2800              CMP      r0,#0
000656  d02c              BEQ      |L4.1714|
000658  f8bb0000          LDRH     r0,[r11,#0]  ; AVT_REV_IS_ON
00065c  2800              CMP      r0,#0
00065e  d028              BEQ      |L4.1714|
;;;941    		time_proc_phase++;
000660  4896              LDR      r0,|L4.2236|
000662  8801              LDRH     r1,[r0,#0]  ; time_proc_phase
000664  1c49              ADDS     r1,r1,#1
000666  b20a              SXTH     r2,r1
;;;942    		
;;;943    		if(proc_phase==ppFF) {
000668  4995              LDR      r1,|L4.2240|
00066a  8002              STRH     r2,[r0,#0]            ;941
00066c  780b              LDRB     r3,[r1,#0]  ; proc_phase
00066e  b16b              CBZ      r3,|L4.1676|
;;;944    			REV_STAT=rsFF;
;;;945    			if(time_proc_phase>=AVT_REV_TIME_FF) {
;;;946    				proc_phase=ppFF_P_REW;	
;;;947    				time_proc_phase=0;
;;;948    			}
;;;949    		} else if(proc_phase==ppFF_P_REW) {
000670  2b01              CMP      r3,#1
000672  d013              BEQ      |L4.1692|
;;;950    			if(time_proc_phase==0)REV_STAT=rsFF;
;;;951    			else REV_STAT=rsREW;
;;;952    			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
;;;953    				proc_phase=ppREW;	
;;;954    				time_proc_phase=0;
;;;955    			}
;;;956    		} else if(proc_phase==ppREW) {
000674  2b02              CMP      r3,#2
000676  d01e              BEQ      |L4.1718|
;;;957    			REV_STAT=rsREW;
;;;958    			if(time_proc_phase>=AVT_REV_TIME_REW) {
;;;959    				proc_phase=ppREW_P_FF;	
;;;960    				time_proc_phase=0;
;;;961    			}
;;;962    		} else if(proc_phase==ppREW_P_FF) {
000678  2b03              CMP      r3,#3
00067a  d11a              BNE      |L4.1714|
;;;963    			if(time_proc_phase==0)REV_STAT=rsREW;
00067c  b322              CBZ      r2,|L4.1736|
;;;964    			else REV_STAT=rsFF;
00067e  702e              STRB     r6,[r5,#0]
                  |L4.1664|
;;;965    			if(time_proc_phase>=AVT_REV_TIME_PAUSE) {
000680  f9b73000          LDRSH    r3,[r7,#0]  ; AVT_REV_TIME_PAUSE
000684  429a              CMP      r2,r3
000686  db14              BLT      |L4.1714|
;;;966    				proc_phase=ppFF;	
000688  700c              STRB     r4,[r1,#0]
;;;967    				time_proc_phase=0;
00068a  e011              B        |L4.1712|
                  |L4.1676|
00068c  4b8d              LDR      r3,|L4.2244|
00068e  702e              STRB     r6,[r5,#0]            ;944
000690  f9b33000          LDRSH    r3,[r3,#0]            ;945  ; AVT_REV_TIME_FF
000694  429a              CMP      r2,r3                 ;945
000696  db0c              BLT      |L4.1714|
000698  700e              STRB     r6,[r1,#0]            ;946
00069a  e009              B        |L4.1712|
                  |L4.1692|
00069c  b132              CBZ      r2,|L4.1708|
00069e  702c              STRB     r4,[r5,#0]            ;951
                  |L4.1696|
0006a0  f9b73000          LDRSH    r3,[r7,#0]            ;952  ; AVT_REV_TIME_PAUSE
0006a4  429a              CMP      r2,r3                 ;952
0006a6  db04              BLT      |L4.1714|
0006a8  2202              MOVS     r2,#2                 ;953
0006aa  e00b              B        |L4.1732|
                  |L4.1708|
0006ac  702e              STRB     r6,[r5,#0]            ;950
0006ae  e7f7              B        |L4.1696|
                  |L4.1712|
0006b0  8004              STRH     r4,[r0,#0]            ;947
                  |L4.1714|
;;;968    			}
;;;969    		}
;;;970    	}
;;;971    	}
;;;972    
;;;973    
;;;974    
;;;975    }
0006b2  e8bd9ff0          POP      {r4-r12,pc}
                  |L4.1718|
0006b6  4b84              LDR      r3,|L4.2248|
0006b8  702c              STRB     r4,[r5,#0]            ;957
0006ba  f9b33000          LDRSH    r3,[r3,#0]            ;958  ; AVT_REV_TIME_REW
0006be  429a              CMP      r2,r3                 ;958
0006c0  dbf7              BLT      |L4.1714|
0006c2  2203              MOVS     r2,#3                 ;959
                  |L4.1732|
0006c4  700a              STRB     r2,[r1,#0]            ;959
0006c6  e7f3              B        |L4.1712|
                  |L4.1736|
0006c8  702c              STRB     r4,[r5,#0]            ;963
0006ca  e7d9              B        |L4.1664|
;;;976    
                          ENDP

                  cap_time_hndl PROC
;;;977    //-----------------------------------------------
;;;978    void cap_time_hndl(void) /*10 раз в секунду*/
0006cc  b570              PUSH     {r4-r6,lr}
;;;979    {
;;;980    
;;;981    if(work_stat==wsCAP)
0006ce  4868              LDR      r0,|L4.2160|
0006d0  7800              LDRB     r0,[r0,#0]  ; work_stat
0006d2  2803              CMP      r0,#3
0006d4  d143              BNE      |L4.1886|
;;;982    	{
;;;983    	cap_time_proc++;
0006d6  497e              LDR      r1,|L4.2256|
;;;984    	if(cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME+CAP_PAUSE2_TIME))
0006d8  487e              LDR      r0,|L4.2260|
0006da  680a              LDR      r2,[r1,#0]            ;983  ; cap_time_proc
0006dc  1c52              ADDS     r2,r2,#1              ;983
0006de  600a              STR      r2,[r1,#0]  ; cap_time_proc
0006e0  f9b05000          LDRSH    r5,[r0,#0]  ; CAP_ZAR_TIME
0006e4  487c              LDR      r0,|L4.2264|
0006e6  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
0006ea  182b              ADDS     r3,r5,r0
0006ec  487b              LDR      r0,|L4.2268|
0006ee  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
0006f2  181c              ADDS     r4,r3,r0
0006f4  487a              LDR      r0,|L4.2272|
0006f6  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
0006fa  1826              ADDS     r6,r4,r0
;;;985    		{
;;;986    		cap_time_proc=0;
0006fc  2000              MOVS     r0,#0
0006fe  4296              CMP      r6,r2                 ;984
000700  dc04              BGT      |L4.1804|
;;;987    		CAP_COUNTER++;
000702  4e78              LDR      r6,|L4.2276|
000704  6008              STR      r0,[r1,#0]  ; cap_time_proc
000706  8832              LDRH     r2,[r6,#0]  ; CAP_COUNTER
000708  1c52              ADDS     r2,r2,#1
00070a  8032              STRH     r2,[r6,#0]
                  |L4.1804|
;;;988    		}
;;;989    
;;;990    	if(cap_time_proc>=CAP_ZAR_TIME)bOFF=1;
00070c  6809              LDR      r1,[r1,#0]  ; cap_time_proc
00070e  4e76              LDR      r6,|L4.2280|
000710  2201              MOVS     r2,#1
000712  42a9              CMP      r1,r5
000714  db01              BLT      |L4.1818|
000716  7032              STRB     r2,[r6,#0]
000718  e000              B        |L4.1820|
                  |L4.1818|
;;;991    	else bOFF=0;
00071a  7030              STRB     r0,[r6,#0]
                  |L4.1820|
;;;992    
;;;993    	if((cap_time_proc>=(CAP_ZAR_TIME+CAP_PAUSE1_TIME))&&(cap_time_proc<(CAP_ZAR_TIME+CAP_PAUSE1_TIME+CAP_RAZR_TIME)))bRAZR=1;
00071c  4d73              LDR      r5,|L4.2284|
00071e  428b              CMP      r3,r1
000720  dc03              BGT      |L4.1834|
000722  428c              CMP      r4,r1
000724  dd01              BLE      |L4.1834|
000726  702a              STRB     r2,[r5,#0]
000728  e000              B        |L4.1836|
                  |L4.1834|
;;;994    	else bRAZR=0;
00072a  7028              STRB     r0,[r5,#0]
                  |L4.1836|
;;;995    
;;;996    
;;;997    	CAP_TIME_SEC++;
00072c  4970              LDR      r1,|L4.2288|
00072e  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_SEC
000730  1c52              ADDS     r2,r2,#1
000732  b212              SXTH     r2,r2
000734  800a              STRH     r2,[r1,#0]
;;;998    	if(CAP_TIME_SEC>=600)
000736  f5b27f16          CMP      r2,#0x258
00073a  db10              BLT      |L4.1886|
;;;999    		{
;;;1000   		CAP_TIME_SEC=0;
00073c  8008              STRH     r0,[r1,#0]
;;;1001   		
;;;1002   		CAP_TIME_MIN++;
00073e  496d              LDR      r1,|L4.2292|
000740  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_MIN
000742  1c52              ADDS     r2,r2,#1
000744  b212              SXTH     r2,r2
000746  800a              STRH     r2,[r1,#0]
;;;1003   		if(CAP_TIME_MIN>=60)
000748  2a3c              CMP      r2,#0x3c
00074a  db08              BLT      |L4.1886|
;;;1004   			{
;;;1005   			CAP_TIME_MIN=0;
00074c  8008              STRH     r0,[r1,#0]
;;;1006   	
;;;1007   			CAP_TIME_HOUR++;
00074e  496a              LDR      r1,|L4.2296|
000750  880a              LDRH     r2,[r1,#0]  ; CAP_TIME_HOUR
000752  1c52              ADDS     r2,r2,#1
000754  b212              SXTH     r2,r2
000756  800a              STRH     r2,[r1,#0]
;;;1008   			if(CAP_TIME_HOUR>=24)
000758  2a18              CMP      r2,#0x18
00075a  db00              BLT      |L4.1886|
;;;1009   				{
;;;1010   				CAP_TIME_HOUR=0;
00075c  8008              STRH     r0,[r1,#0]
                  |L4.1886|
;;;1011   				}
;;;1012   			}
;;;1013   		}
;;;1014   	}
;;;1015   
;;;1016   }
00075e  e649              B        |L4.1012|
;;;1017   
                          ENDP

                  restart_on_GS PROC
;;;1019   //-----------------------------------------------
;;;1020   void restart_on_GS(void)
000760  2101              MOVS     r1,#1
;;;1021   {
;;;1022   lc640_write_long(EE_TIME_PROC_GS_RESTART,1);
000762  20d0              MOVS     r0,#0xd0
000764  f7ffbffe          B.W      lc640_write_long
;;;1023   }
;;;1024   
                          ENDP

                  restart_on_PS PROC
;;;1025   //-----------------------------------------------
;;;1026   void restart_on_PS(void)
000768  2101              MOVS     r1,#1
;;;1027   {
;;;1028   lc640_write_long(EE_TIME_PROC_PS_RESTART,1);
00076a  20d4              MOVS     r0,#0xd4
00076c  f7ffbffe          B.W      lc640_write_long
;;;1029   }
;;;1030   
                          ENDP

                  start_GS PROC
;;;1038   //-----------------------------------------------
;;;1039   void start_GS(void) {
000770  b570              PUSH     {r4-r6,lr}
;;;1040   	work_stat=wsGS;
000772  483f              LDR      r0,|L4.2160|
000774  2501              MOVS     r5,#1
;;;1041   	time_proc=0;
000776  2400              MOVS     r4,#0
000778  7005              STRB     r5,[r0,#0]            ;1040
00077a  484c              LDR      r0,|L4.2220|
;;;1042   	time_proc_remain=T_PROC_GS;
00077c  494a              LDR      r1,|L4.2216|
00077e  6004              STR      r4,[r0,#0]  ; time_proc
000780  485e              LDR      r0,|L4.2300|
000782  6800              LDR      r0,[r0,#0]  ; T_PROC_GS
;;;1043   	//index_set=0;
;;;1044   	restart_on_GS();
000784  6008              STR      r0,[r1,#0]  ; time_proc_remain
000786  f7fffffe          BL       restart_on_GS
;;;1045   	bFAST_REG=1;
00078a  485d              LDR      r0,|L4.2304|
00078c  71c5              STRB     r5,[r0,#7]
;;;1046   	bU_VALID=0;
00078e  7204              STRB     r4,[r0,#8]
;;;1047   	
;;;1048   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
000790  4849              LDR      r0,|L4.2232|
000792  8800              LDRH     r0,[r0,#0]  ; REV_IS_ON
000794  b140              CBZ      r0,|L4.1960|
000796  4841              LDR      r0,|L4.2204|
000798  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
00079a  b128              CBZ      r0,|L4.1960|
;;;1049   		time_proc_phase=0;
00079c  4847              LDR      r0,|L4.2236|
00079e  8004              STRH     r4,[r0,#0]
;;;1050   		proc_phase=ppFF;
0007a0  4847              LDR      r0,|L4.2240|
0007a2  7004              STRB     r4,[r0,#0]
;;;1051   		REV_STAT=rsFF;	
0007a4  483e              LDR      r0,|L4.2208|
0007a6  7005              STRB     r5,[r0,#0]
                  |L4.1960|
;;;1052   	}
;;;1053   
;;;1054   	milliAmperSecunda=0L;
0007a8  4856              LDR      r0,|L4.2308|
0007aa  4621              MOV      r1,r4
;;;1055   	AMPERCHAS=0L;
0007ac  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
0007ae  4856              LDR      r0,|L4.2312|
;;;1056   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
0007b0  6004              STR      r4,[r0,#0]  ; AMPERCHAS
0007b2  e8bd4070          POP      {r4-r6,lr}
0007b6  f44f709e          MOV      r0,#0x13c
0007ba  f7ffbffe          B.W      lc640_write_long
;;;1057   }
;;;1058   
                          ENDP

                  start_PS PROC
;;;1060   //-----------------------------------------------
;;;1061   void start_PS(void) {
0007be  492c              LDR      r1,|L4.2160|
0007c0  b510              PUSH     {r4,lr}
;;;1062   	work_stat=wsPS;
0007c2  2002              MOVS     r0,#2
0007c4  7008              STRB     r0,[r1,#0]
;;;1063   	time_proc=0;
0007c6  4839              LDR      r0,|L4.2220|
0007c8  2400              MOVS     r4,#0
;;;1064   	time_proc_remain=T_PROC_PS;
0007ca  4937              LDR      r1,|L4.2216|
0007cc  6004              STR      r4,[r0,#0]  ; time_proc
0007ce  484f              LDR      r0,|L4.2316|
0007d0  6800              LDR      r0,[r0,#0]  ; T_PROC_PS
;;;1065   	//index_set=0;
;;;1066   	restart_on_PS();
0007d2  6008              STR      r0,[r1,#0]  ; time_proc_remain
0007d4  f7fffffe          BL       restart_on_PS
;;;1067   	bFAST_REG=1;
0007d8  4949              LDR      r1,|L4.2304|
0007da  2001              MOVS     r0,#1
0007dc  71c8              STRB     r0,[r1,#7]
;;;1068   	bU_VALID=0;
0007de  720c              STRB     r4,[r1,#8]
;;;1069   	
;;;1070   	if((REV_IS_ON)&&(AVT_REV_IS_ON)){
0007e0  4935              LDR      r1,|L4.2232|
0007e2  8809              LDRH     r1,[r1,#0]  ; REV_IS_ON
0007e4  b141              CBZ      r1,|L4.2040|
0007e6  492d              LDR      r1,|L4.2204|
0007e8  8809              LDRH     r1,[r1,#0]  ; AVT_REV_IS_ON
0007ea  b129              CBZ      r1,|L4.2040|
;;;1071   		time_proc_phase=0;
0007ec  4933              LDR      r1,|L4.2236|
0007ee  800c              STRH     r4,[r1,#0]
;;;1072   		proc_phase=ppFF;
0007f0  4933              LDR      r1,|L4.2240|
0007f2  700c              STRB     r4,[r1,#0]
;;;1073   		REV_STAT=rsFF;	
0007f4  492a              LDR      r1,|L4.2208|
0007f6  7008              STRB     r0,[r1,#0]
                  |L4.2040|
;;;1074   	}
;;;1075   	milliAmperSecunda=0L;
0007f8  4842              LDR      r0,|L4.2308|
0007fa  4621              MOV      r1,r4
;;;1076   	AMPERCHAS=0L;
0007fc  6004              STR      r4,[r0,#0]  ; milliAmperSecunda
0007fe  4842              LDR      r0,|L4.2312|
;;;1077   	lc640_write_long(EE_AMPERCHAS,AMPERCHAS);
000800  6004              STR      r4,[r0,#0]  ; AMPERCHAS
000802  e8bd4010          POP      {r4,lr}
000806  f44f709e          MOV      r0,#0x13c
00080a  f7ffbffe          B.W      lc640_write_long
;;;1078   }
;;;1079   
                          ENDP

                  start_CAP PROC
;;;1080   //-----------------------------------------------
;;;1081   void start_CAP(void) {
00080e  4918              LDR      r1,|L4.2160|
;;;1082   	work_stat=wsCAP;
000810  2003              MOVS     r0,#3
000812  7008              STRB     r0,[r1,#0]
;;;1083   }
000814  4770              BX       lr
;;;1084   
                          ENDP

                  pause_CAP PROC
;;;1085   //-----------------------------------------------
;;;1086   void pause_CAP(void) {
000816  4916              LDR      r1,|L4.2160|
;;;1087   	work_stat=wsOFF;
000818  2000              MOVS     r0,#0
00081a  7008              STRB     r0,[r1,#0]
;;;1088   }
00081c  4770              BX       lr
;;;1089   
                          ENDP

                  stop_CAP PROC
;;;1090   //-----------------------------------------------
;;;1091   void stop_CAP(void) {
00081e  4914              LDR      r1,|L4.2160|
;;;1092   	work_stat=wsOFF;
000820  2000              MOVS     r0,#0
000822  7008              STRB     r0,[r1,#0]
;;;1093   
;;;1094   }
000824  4770              BX       lr
;;;1095   
                          ENDP

                  reset_CAP PROC
;;;1096   //-----------------------------------------------
;;;1097   void reset_CAP(void) {
000826  4912              LDR      r1,|L4.2160|
;;;1098   	work_stat=wsOFF;
000828  2000              MOVS     r0,#0
00082a  7008              STRB     r0,[r1,#0]
;;;1099   	cap_time_proc=0;
00082c  4928              LDR      r1,|L4.2256|
;;;1100   	CAP_COUNTER=0;
00082e  6008              STR      r0,[r1,#0]  ; cap_time_proc
000830  492c              LDR      r1,|L4.2276|
000832  8008              STRH     r0,[r1,#0]
;;;1101   	CAP_TIME_SEC=0;
000834  492e              LDR      r1,|L4.2288|
000836  8008              STRH     r0,[r1,#0]
;;;1102   	CAP_TIME_MIN=0;
000838  492e              LDR      r1,|L4.2292|
00083a  8008              STRH     r0,[r1,#0]
;;;1103   	CAP_TIME_HOUR=0;
00083c  492e              LDR      r1,|L4.2296|
00083e  8008              STRH     r0,[r1,#0]
;;;1104   }
000840  4770              BX       lr
;;;1105   
                          ENDP

                  stop_proc PROC
;;;1106   //-----------------------------------------------
;;;1107   void stop_proc(void)
000842  490b              LDR      r1,|L4.2160|
;;;1108   {
;;;1109   work_stat=wsOFF;
000844  2000              MOVS     r0,#0
000846  7008              STRB     r0,[r1,#0]
;;;1110   restart_off();
000848  e7fe              B        restart_off
;;;1111   }
;;;1112   
                          ENDP

                  find_U_curve PROC
;;;1113   //-----------------------------------------------
;;;1114   short find_U_curve(signed short in)
00084a  e92d41f0          PUSH     {r4-r8,lr}
;;;1115   {
;;;1116   short ii,i=0,out=0;
00084e  2400              MOVS     r4,#0
000850  4606              MOV      r6,r0                 ;1115
;;;1117   
;;;1118   ii=0;
;;;1119   
;;;1120   if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) >= in)
000852  f44f75fa          MOV      r5,#0x1f4
000856  46a0              MOV      r8,r4                 ;1116
000858  4627              MOV      r7,r4                 ;1118
00085a  4628              MOV      r0,r5
00085c  f7fffffe          BL       lc640_read_int
000860  42b0              CMP      r0,r6
000862  da7a              BGE      |L4.2394|
                  |L4.2148|
;;;1121   	{
;;;1122   	out=0;
;;;1123   	}
;;;1124   else 
;;;1125   	{
;;;1126   	for (ii=0;ii<=200;ii+=10)
;;;1127   		{
;;;1128   		if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000864  eb050047          ADD      r0,r5,r7,LSL #1
000868  f7fffffe          BL       lc640_read_int
00086c  42b0              CMP      r0,r6
00086e  e04f              B        |L4.2320|
                  |L4.2160|
                          DCD      work_stat
                  |L4.2164|
                          DCD      curr_off_stop_cnt
                  |L4.2168|
                          DCD      curr_off_start_cnt
                  |L4.2172|
                          DCD      CURR_OFF_EN
                  |L4.2176|
                          DCD      CUR_OFF_T_OFF
                  |L4.2180|
                          DCD      I_ug_temp
                  |L4.2184|
                          DCD      I_maxp
                  |L4.2188|
                          DCD      CUR_OFF_LEVEL_RELATIV
                  |L4.2192|
                          DCD      curr_off_temp
                  |L4.2196|
                          DCD      load_I
                  |L4.2200|
                          DCD      CUR_OFF_T_ON
                  |L4.2204|
                          DCD      AVT_REV_IS_ON
                  |L4.2208|
                          DCD      REV_STAT
                  |L4.2212|
                          DCD      AVT_REV_TIME_PAUSE
                  |L4.2216|
                          DCD      time_proc_remain
                  |L4.2220|
                          DCD      time_proc
                  |L4.2224|
                          DCD      restart_enable
                  |L4.2228|
                          DCD      T_PROC_GS_MODE
                  |L4.2232|
                          DCD      REV_IS_ON
                  |L4.2236|
                          DCD      time_proc_phase
                  |L4.2240|
                          DCD      proc_phase
                  |L4.2244|
                          DCD      AVT_REV_TIME_FF
                  |L4.2248|
                          DCD      AVT_REV_TIME_REW
                  |L4.2252|
                          DCD      T_PROC_PS_MODE
                  |L4.2256|
                          DCD      cap_time_proc
                  |L4.2260|
                          DCD      CAP_ZAR_TIME
                  |L4.2264|
                          DCD      CAP_PAUSE1_TIME
                  |L4.2268|
                          DCD      CAP_RAZR_TIME
                  |L4.2272|
                          DCD      CAP_PAUSE2_TIME
                  |L4.2276|
                          DCD      CAP_COUNTER
                  |L4.2280|
                          DCD      bOFF
                  |L4.2284|
                          DCD      bRAZR
                  |L4.2288|
                          DCD      CAP_TIME_SEC
                  |L4.2292|
                          DCD      CAP_TIME_MIN
                  |L4.2296|
                          DCD      CAP_TIME_HOUR
                  |L4.2300|
                          DCD      T_PROC_GS
                  |L4.2304|
                          DCD      ||area_number.24||
                  |L4.2308|
                          DCD      milliAmperSecunda
                  |L4.2312|
                          DCD      AMPERCHAS
                  |L4.2316|
                          DCD      T_PROC_PS
                  |L4.2320|
000910  dc00              BGT      |L4.2324|
;;;1129   			{
;;;1130   			i=ii;
000912  463c              MOV      r4,r7
                  |L4.2324|
000914  370a              ADDS     r7,r7,#0xa            ;1126
000916  b23f              SXTH     r7,r7                 ;1126
000918  2fc8              CMP      r7,#0xc8              ;1126
00091a  dda3              BLE      |L4.2148|
;;;1131   			}
;;;1132   		else continue;
;;;1133   		}
;;;1134   	if(i<200)
00091c  2cc8              CMP      r4,#0xc8
00091e  da0f              BGE      |L4.2368|
;;;1135   		{
;;;1136   		for (ii=i;ii<i+10;ii++)
000920  f104070a          ADD      r7,r4,#0xa
000924  e009              B        |L4.2362|
;;;1137   			{
;;;1138   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000926  bf00              NOP      
                  |L4.2344|
000928  eb050044          ADD      r0,r5,r4,LSL #1
00092c  f7fffffe          BL       lc640_read_int
000930  42b0              CMP      r0,r6
000932  dc00              BGT      |L4.2358|
;;;1139   				{
;;;1140   				out=ii;
000934  46a0              MOV      r8,r4
                  |L4.2358|
000936  1c64              ADDS     r4,r4,#1              ;1136
000938  b224              SXTH     r4,r4                 ;1136
                  |L4.2362|
00093a  42bc              CMP      r4,r7                 ;1136
00093c  dbf4              BLT      |L4.2344|
00093e  e00c              B        |L4.2394|
                  |L4.2368|
;;;1141   				}
;;;1142   			else continue;
;;;1143   			}
;;;1144   		}
;;;1145   	else 
;;;1146   		{
;;;1147   		for (ii=200;ii<=202;ii++)
000940  f05f04c8          MOVS.W   r4,#0xc8
                  |L4.2372|
;;;1148   			{
;;;1149   			if(lc640_read_int(SEKTOR_KURVE_U+(ii*2)) <= in)
000944  eb050044          ADD      r0,r5,r4,LSL #1
000948  f7fffffe          BL       lc640_read_int
00094c  42b0              CMP      r0,r6
00094e  dc00              BGT      |L4.2386|
;;;1150   				{
;;;1151   				out=ii;
000950  46a0              MOV      r8,r4
                  |L4.2386|
000952  1c64              ADDS     r4,r4,#1              ;1147
000954  b224              SXTH     r4,r4                 ;1147
000956  2cca              CMP      r4,#0xca              ;1147
000958  ddf4              BLE      |L4.2372|
                  |L4.2394|
;;;1152   				}
;;;1153   			else continue;
;;;1154   			}
;;;1155   	
;;;1156   	
;;;1157   		}
;;;1158   	}
;;;1159   
;;;1160   return out;
00095a  4640              MOV      r0,r8
;;;1161   }
00095c  e50b              B        |L4.886|
;;;1162   
                          ENDP

                  find_I_curve PROC
;;;1163   //-----------------------------------------------
;;;1164   short find_I_curve(signed short in)
00095e  e92d41f0          PUSH     {r4-r8,lr}
;;;1165   {
;;;1166   short ii,i=0,out=0;
000962  2400              MOVS     r4,#0
000964  4606              MOV      r6,r0                 ;1165
;;;1167   
;;;1168   ii=0;
;;;1169   
;;;1170   if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) >= in)
000966  f44f757a          MOV      r5,#0x3e8
00096a  46a0              MOV      r8,r4                 ;1166
00096c  4627              MOV      r7,r4                 ;1168
00096e  4628              MOV      r0,r5
000970  f7fffffe          BL       lc640_read_int
000974  42b0              CMP      r0,r6
000976  da28              BGE      |L4.2506|
                  |L4.2424|
;;;1171   	{
;;;1172   	out=0;
;;;1173   	}
;;;1174   else 
;;;1175   	{
;;;1176   	for (ii=0;ii<=200;ii+=10)
;;;1177   		{
;;;1178   		if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000978  eb050047          ADD      r0,r5,r7,LSL #1
00097c  f7fffffe          BL       lc640_read_int
000980  42b0              CMP      r0,r6
000982  dc00              BGT      |L4.2438|
;;;1179   			{
;;;1180   			i=ii;
000984  463c              MOV      r4,r7
                  |L4.2438|
000986  370a              ADDS     r7,r7,#0xa            ;1176
000988  b23f              SXTH     r7,r7                 ;1176
00098a  2fc8              CMP      r7,#0xc8              ;1176
00098c  ddf4              BLE      |L4.2424|
;;;1181   			}
;;;1182   		else continue;
;;;1183   		}
;;;1184   	
;;;1185   	if(i<200)
00098e  2cc8              CMP      r4,#0xc8
000990  da0e              BGE      |L4.2480|
;;;1186   		{
;;;1187   		for (ii=i;ii<i+10;ii++)
000992  f104070a          ADD      r7,r4,#0xa
000996  e008              B        |L4.2474|
                  |L4.2456|
;;;1188   			{
;;;1189   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
000998  eb050044          ADD      r0,r5,r4,LSL #1
00099c  f7fffffe          BL       lc640_read_int
0009a0  42b0              CMP      r0,r6
0009a2  dc00              BGT      |L4.2470|
;;;1190   				{
;;;1191   				out=ii;
0009a4  46a0              MOV      r8,r4
                  |L4.2470|
0009a6  1c64              ADDS     r4,r4,#1              ;1187
0009a8  b224              SXTH     r4,r4                 ;1187
                  |L4.2474|
0009aa  42bc              CMP      r4,r7                 ;1187
0009ac  dbf4              BLT      |L4.2456|
0009ae  e00c              B        |L4.2506|
                  |L4.2480|
;;;1192   				}
;;;1193   			else continue;
;;;1194   			}
;;;1195   		}
;;;1196   	else 
;;;1197   		{
;;;1198   		for (ii=200;ii<=202;ii++)
0009b0  f05f04c8          MOVS.W   r4,#0xc8
                  |L4.2484|
;;;1199   			{
;;;1200   			if(lc640_read_int(SEKTOR_KURVE_I+(ii*2)) <= in)
0009b4  eb050044          ADD      r0,r5,r4,LSL #1
0009b8  f7fffffe          BL       lc640_read_int
0009bc  42b0              CMP      r0,r6
0009be  dc00              BGT      |L4.2498|
;;;1201   				{
;;;1202   				out=ii;
0009c0  46a0              MOV      r8,r4
                  |L4.2498|
0009c2  1c64              ADDS     r4,r4,#1              ;1198
0009c4  b224              SXTH     r4,r4                 ;1198
0009c6  2cca              CMP      r4,#0xca              ;1198
0009c8  ddf4              BLE      |L4.2484|
                  |L4.2506|
;;;1203   				}
;;;1204   			else continue;
;;;1205   			}
;;;1206   		}
;;;1207   	}
;;;1208   return out;
0009ca  4640              MOV      r0,r8
;;;1209   }
0009cc  e4d3              B        |L4.886|
;;;1210   
                          ENDP

                  viz_hndl PROC
;;;1212   //-----------------------------------------------
;;;1213   void viz_hndl(void)
0009ce  e92d5ff0          PUSH     {r4-r12,lr}
;;;1214   {
;;;1215   if(ind==iK_viz_u)
0009d2  f8df9408          LDR      r9,|L4.3548|
;;;1216   	{
;;;1217   	if(viz_stat==vsON)
;;;1218   		{
;;;1219   		viz_stat_cnt++;
;;;1220   		if(viz_stat_cnt>=10221)
0009d6  f24278ed          MOV      r8,#0x27ed
;;;1221   			{
;;;1222   			viz_stat=vsOFF;
0009da  f04f0a00          MOV      r10,#0
0009de  f8990000          LDRB     r0,[r9,#0]            ;1215  ; a_ind
;;;1223   			lc640_write_int(EE_U_CURVE_IS_ON,0xabcd);
;;;1224   			//ind=iK_viz_sel;
;;;1225   			tree_down(0,0);
;;;1226   			}
;;;1227   		tst_pwm_i=1022;
0009e2  f2403bfe          MOV      r11,#0x3fe
;;;1228   		tst_pwm_u=(viz_stat_cnt/50)*5;
0009e6  4ffe              LDR      r7,|L4.3552|
0009e8  4efe              LDR      r6,|L4.3556|
0009ea  4cff              LDR      r4,|L4.3560|
0009ec  2532              MOVS     r5,#0x32
0009ee  2845              CMP      r0,#0x45              ;1215
0009f0  d12a              BNE      |L4.2632|
0009f2  7830              LDRB     r0,[r6,#0]            ;1217  ; viz_stat
0009f4  2801              CMP      r0,#1                 ;1217
0009f6  d158              BNE      |L4.2730|
0009f8  8820              LDRH     r0,[r4,#0]            ;1219  ; viz_stat_cnt
0009fa  1c40              ADDS     r0,r0,#1              ;1219
0009fc  b200              SXTH     r0,r0                 ;1219
0009fe  8020              STRH     r0,[r4,#0]            ;1219
000a00  4540              CMP      r0,r8                 ;1220
000a02  db09              BLT      |L4.2584|
000a04  f886a000          STRB     r10,[r6,#0]           ;1222
000a08  49f8              LDR      r1,|L4.3564|
000a0a  20ac              MOVS     r0,#0xac              ;1223
000a0c  f7fffffe          BL       lc640_write_int
000a10  2100              MOVS     r1,#0                 ;1225
000a12  4608              MOV      r0,r1                 ;1225
000a14  f7fffffe          BL       tree_down
                  |L4.2584|
000a18  49f5              LDR      r1,|L4.3568|
000a1a  f8a1b000          STRH     r11,[r1,#0]           ;1227
000a1e  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000a22  fb91f0f5          SDIV     r0,r1,r5
;;;1229   		if(viz_stat_cnt%50==49)
000a26  fb051110          MLS      r1,r5,r0,r1
000a2a  eb000280          ADD      r2,r0,r0,LSL #2       ;1228
000a2e  803a              STRH     r2,[r7,#0]            ;1228
000a30  2931              CMP      r1,#0x31
000a32  d109              BNE      |L4.2632|
;;;1230   			{
;;;1231   			lc640_write_int(SEKTOR_KURVE_U+((viz_stat_cnt/50)*2),load_U);
000a34  f44f71fa          MOV      r1,#0x1f4
000a38  eb010040          ADD      r0,r1,r0,LSL #1
000a3c  49ed              LDR      r1,|L4.3572|
000a3e  b200              SXTH     r0,r0
000a40  f9b11000          LDRSH    r1,[r1,#0]  ; load_U
000a44  f7fffffe          BL       lc640_write_int
                  |L4.2632|
;;;1232   			}
;;;1233   		}
;;;1234   	}
;;;1235   
;;;1236   if(ind==iK_viz_i)
000a48  f8990000          LDRB     r0,[r9,#0]  ; a_ind
000a4c  2844              CMP      r0,#0x44
000a4e  d12c              BNE      |L4.2730|
;;;1237   	{
;;;1238   	if(viz_stat==vsON)
000a50  7830              LDRB     r0,[r6,#0]  ; viz_stat
000a52  2801              CMP      r0,#1
000a54  d129              BNE      |L4.2730|
;;;1239   		{
;;;1240   		viz_stat_cnt++;
000a56  8820              LDRH     r0,[r4,#0]  ; viz_stat_cnt
000a58  1c40              ADDS     r0,r0,#1
000a5a  b200              SXTH     r0,r0
000a5c  8020              STRH     r0,[r4,#0]
;;;1241   		if(viz_stat_cnt>=10221)
000a5e  4540              CMP      r0,r8
000a60  db09              BLT      |L4.2678|
;;;1242   			{
;;;1243   			viz_stat=vsOFF;
000a62  f886a000          STRB     r10,[r6,#0]
;;;1244   			lc640_write_int(EE_I_CURVE_IS_ON,0xabcd);
000a66  49e1              LDR      r1,|L4.3564|
000a68  20ae              MOVS     r0,#0xae
000a6a  f7fffffe          BL       lc640_write_int
;;;1245   			//ind=iK_viz_sel;
;;;1246   			tree_down(0,0);
000a6e  2100              MOVS     r1,#0
000a70  4608              MOV      r0,r1
000a72  f7fffffe          BL       tree_down
                  |L4.2678|
;;;1247   			}
;;;1248   		tst_pwm_u=1022;
000a76  f8a7b000          STRH     r11,[r7,#0]
;;;1249   		tst_pwm_i=(viz_stat_cnt/50)*5;
000a7a  f9b41000          LDRSH    r1,[r4,#0]  ; viz_stat_cnt
000a7e  4bdc              LDR      r3,|L4.3568|
000a80  fb91f0f5          SDIV     r0,r1,r5
;;;1250   		if(viz_stat_cnt%50==49)
000a84  fb051110          MLS      r1,r5,r0,r1
000a88  eb000280          ADD      r2,r0,r0,LSL #2       ;1249
000a8c  801a              STRH     r2,[r3,#0]            ;1249
000a8e  2931              CMP      r1,#0x31
000a90  d10b              BNE      |L4.2730|
;;;1251   			{
;;;1252   			lc640_write_int(SEKTOR_KURVE_I+((viz_stat_cnt/50)*2),load_I);
000a92  f44f717a          MOV      r1,#0x3e8
000a96  eb010040          ADD      r0,r1,r0,LSL #1
000a9a  49d7              LDR      r1,|L4.3576|
000a9c  b200              SXTH     r0,r0
000a9e  f9b11000          LDRSH    r1,[r1,#0]  ; load_I
000aa2  e8bd5ff0          POP      {r4-r12,lr}
000aa6  f7ffbffe          B.W      lc640_write_int
                  |L4.2730|
;;;1253   			}
;;;1254   		}
;;;1255   	}
;;;1256   }
000aaa  e602              B        |L4.1714|
;;;1257   
                          ENDP

                  bps_hndl PROC
;;;1260   //-----------------------------------------------
;;;1261   void bps_hndl(void) /*ГЦ, 10 раз в секунду*/
000aac  e92d5ffc          PUSH     {r2-r12,lr}
;;;1262   {
;;;1263   char /*ptr__,*/i;
;;;1264   
;;;1265   if((REV_IS_ON)&&(AVT_REV_IS_ON)) {
000ab0  48d2              LDR      r0,|L4.3580|
;;;1266   	if(work_stat==wsGS) {
000ab2  f8dfa34c          LDR      r10,|L4.3584|
000ab6  8800              LDRH     r0,[r0,#0]            ;1265  ; REV_IS_ON
000ab8  b338              CBZ      r0,|L4.2826|
000aba  48d2              LDR      r0,|L4.3588|
000abc  8800              LDRH     r0,[r0,#0]            ;1265  ; AVT_REV_IS_ON
000abe  b320              CBZ      r0,|L4.2826|
;;;1267   		if(REV_STAT==rsFF) 	I_ug_temp=AVT_REV_I_NOM_FF;
000ac0  48d1              LDR      r0,|L4.3592|
000ac2  f89a3000          LDRB     r3,[r10,#0]           ;1266  ; work_stat
000ac6  f9b01000          LDRSH    r1,[r0,#0]
000aca  48d0              LDR      r0,|L4.3596|
000acc  2b01              CMP      r3,#1                 ;1266
000ace  7800              LDRB     r0,[r0,#0]
000ad0  d007              BEQ      |L4.2786|
;;;1268   		else if (REV_STAT==rsREW) I_ug_temp=AVT_REV_I_NOM_REW;
;;;1269   	} else if (work_stat==wsPS) {
;;;1270   		if(REV_STAT==rsFF) 	U_up_temp=AVT_REV_U_NOM_FF;
000ad2  4acf              LDR      r2,|L4.3600|
000ad4  2b02              CMP      r3,#2                 ;1269
000ad6  f9b22000          LDRSH    r2,[r2,#0]
000ada  d00d              BEQ      |L4.2808|
;;;1271   		else if (REV_STAT==rsREW) U_up_temp=AVT_REV_U_NOM_REW;
;;;1272   	} else {
;;;1273   		U_up_temp=AVT_REV_U_NOM_FF;
000adc  48cd              LDR      r0,|L4.3604|
000ade  8002              STRH     r2,[r0,#0]
;;;1274   		I_ug_temp=AVT_REV_I_NOM_FF;
000ae0  e003              B        |L4.2794|
                  |L4.2786|
000ae2  2801              CMP      r0,#1                 ;1267
000ae4  d001              BEQ      |L4.2794|
000ae6  b110              CBZ      r0,|L4.2798|
000ae8  e025              B        |L4.2870|
                  |L4.2794|
000aea  48cb              LDR      r0,|L4.3608|
000aec  e022              B        |L4.2868|
                  |L4.2798|
000aee  48cb              LDR      r0,|L4.3612|
000af0  49c9              LDR      r1,|L4.3608|
000af2  8800              LDRH     r0,[r0,#0]            ;1268  ; AVT_REV_I_NOM_REW
000af4  8008              STRH     r0,[r1,#0]            ;1268
000af6  e01e              B        |L4.2870|
                  |L4.2808|
000af8  2801              CMP      r0,#1                 ;1270
000afa  d001              BEQ      |L4.2816|
000afc  b118              CBZ      r0,|L4.2822|
000afe  e01a              B        |L4.2870|
                  |L4.2816|
000b00  48c4              LDR      r0,|L4.3604|
000b02  8002              STRH     r2,[r0,#0]            ;1270
000b04  e017              B        |L4.2870|
                  |L4.2822|
000b06  48c6              LDR      r0,|L4.3616|
000b08  e012              B        |L4.2864|
                  |L4.2826|
;;;1275   	}
;;;1276   } else {
;;;1277   
;;;1278   if(fiks_stat_I==2)I_ug_temp=I_ug3;
000b0a  48c6              LDR      r0,|L4.3620|
000b0c  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_I
000b10  2802              CMP      r0,#2
000b12  d05a              BEQ      |L4.3018|
;;;1279   else if(fiks_stat_I==1)I_ug_temp=I_ug2;
000b14  2801              CMP      r0,#1
000b16  d05a              BEQ      |L4.3022|
;;;1280   else I_ug_temp=I_ug;
000b18  48c3              LDR      r0,|L4.3624|
                  |L4.2842|
000b1a  8801              LDRH     r1,[r0,#0]            ;1279  ; I_ug2
000b1c  48be              LDR      r0,|L4.3608|
000b1e  8001              STRH     r1,[r0,#0]            ;1279
;;;1281   
;;;1282   if(fiks_stat_U==2)U_up_temp=U_up3;
000b20  48c2              LDR      r0,|L4.3628|
000b22  f9b00000          LDRSH    r0,[r0,#0]  ; fiks_stat_U
000b26  2802              CMP      r0,#2
000b28  d053              BEQ      |L4.3026|
;;;1283   	else if(fiks_stat_U==1)U_up_temp=U_up2;
000b2a  2801              CMP      r0,#1
000b2c  d053              BEQ      |L4.3030|
;;;1284   	else U_up_temp=U_up;
000b2e  48c0              LDR      r0,|L4.3632|
                  |L4.2864|
000b30  8801              LDRH     r1,[r0,#0]            ;1283  ; U_up2
000b32  48b8              LDR      r0,|L4.3604|
                  |L4.2868|
000b34  8001              STRH     r1,[r0,#0]            ;1283
                  |L4.2870|
;;;1285   
;;;1286   }
;;;1287   	
;;;1288   gran(&I_ug_temp,I_MIN_IPS,I_MAX_IPS);
000b36  48bf              LDR      r0,|L4.3636|
000b38  f9b02000          LDRSH    r2,[r0,#0]  ; I_MAX_IPS
000b3c  48be              LDR      r0,|L4.3640|
000b3e  f9b01000          LDRSH    r1,[r0,#0]  ; I_MIN_IPS
000b42  48b5              LDR      r0,|L4.3608|
000b44  f7fffffe          BL       gran
;;;1289   gran(&U_up_temp,U_MIN,U_MAX);
000b48  48bc              LDR      r0,|L4.3644|
000b4a  f9b02000          LDRSH    r2,[r0,#0]  ; U_MAX
000b4e  48bc              LDR      r0,|L4.3648|
000b50  f9b01000          LDRSH    r1,[r0,#0]  ; U_MIN
000b54  48af              LDR      r0,|L4.3604|
000b56  f7fffffe          BL       gran
;;;1290   
;;;1291   if(sh_cnt0<10) {
000b5a  4eba              LDR      r6,|L4.3652|
000b5c  2500              MOVS     r5,#0                 ;1265
000b5e  f04f0801          MOV      r8,#1                 ;1266
000b62  7970              LDRB     r0,[r6,#5]  ; sh_cnt0
000b64  280a              CMP      r0,#0xa
000b66  d207              BCS      |L4.2936|
;;;1292   	sh_cnt0++;
000b68  1c40              ADDS     r0,r0,#1
000b6a  b2c0              UXTB     r0,r0
000b6c  7170              STRB     r0,[r6,#5]
;;;1293   	if(sh_cnt0>=10) {
000b6e  280a              CMP      r0,#0xa
000b70  d302              BCC      |L4.2936|
;;;1294   		sh_cnt0=0;
000b72  7175              STRB     r5,[r6,#5]
;;;1295   		b1Hz_sh=1;
000b74  f8868006          STRB     r8,[r6,#6]
                  |L4.2936|
;;;1296   	}
;;;1297   }
;;;1298   
;;;1299   if(ind==iK_load)
000b78  4898              LDR      r0,|L4.3548|
;;;1300   	{
;;;1301   	if(sub_ind==0)
;;;1302   		{
;;;1303   		cntrl_stat_U=1022;
;;;1304   		cntrl_stat_I=1022;
;;;1305   		bps_stat=stON;
000b7a  49b3              LDR      r1,|L4.3656|
;;;1306   
;;;1307   		for(i=0;i<NUMIST;i++)
;;;1308   			{
;;;1309   			bps[i]._vol_u=1022;
;;;1310   			bps[i]._vol_i=1022;
;;;1311   			bps[i]._flags_tu=0;
;;;1312   			}
;;;1313   		}
;;;1314   	else if(sub_ind==1)
;;;1315   		{
;;;1316   		if(phase==0)
000b7c  4ab3              LDR      r2,|L4.3660|
000b7e  7803              LDRB     r3,[r0,#0]            ;1299  ; a_ind
000b80  4cb3              LDR      r4,|L4.3664|
000b82  4fb4              LDR      r7,|L4.3668|
000b84  f24039fe          MOV      r9,#0x3fe             ;1303
000b88  2b30              CMP      r3,#0x30              ;1299
000b8a  d026              BEQ      |L4.3034|
;;;1317   			{
;;;1318     			cntrl_stat_U=0;
;;;1319   			cntrl_stat_I=0;
;;;1320   			bps_stat=stOFF;
;;;1321   
;;;1322   			for(i=0;i<NUMIST;i++)
;;;1323   				{
;;;1324   				bps[i]._vol_u=0;
;;;1325   				bps[i]._vol_i=0;
;;;1326   				bps[i]._flags_tu=1;
;;;1327   				}
;;;1328   			}
;;;1329   		else if(phase==1)
;;;1330   			{
;;;1331     			cntrl_stat_U=1022;
;;;1332   			cntrl_stat_I=1022;
;;;1333   			bps_stat=stON;
;;;1334   
;;;1335   			for(i=0;i<NUMIST;i++)
;;;1336   				{
;;;1337   				bps[i]._vol_u=1022;
;;;1338   				bps[i]._vol_i=1022;
;;;1339   				bps[i]._flags_tu=0;
;;;1340   				}
;;;1341   			}
;;;1342   		}
;;;1343   	else 
;;;1344   		{
;;;1345   		bps_stat=stOFF;
;;;1346   
;;;1347   		bps[0]._vol_u=0;
;;;1348   		bps[0]._vol_i=0;
;;;1349   		bps[0]._flags_tu=1;
;;;1350   		}
;;;1351   	}
;;;1352   else if(ind==iK_bps)
000b8c  2b2b              CMP      r3,#0x2b
000b8e  d07a              BEQ      |L4.3206|
;;;1353   	{
;;;1354   	if(sub_ind==0)
;;;1355   		{
;;;1356   		cntrl_stat_U=1022;
;;;1357   		cntrl_stat_I=1022;
;;;1358   		bps_stat=stON;
;;;1359   
;;;1360   		bps[0]._vol_u=0;
;;;1361   		bps[0]._vol_i=0;
;;;1362   		bps[0]._flags_tu=1;
;;;1363   
;;;1364   		bps[1]._vol_u=0;
;;;1365   		bps[1]._vol_i=0;
;;;1366   		bps[1]._flags_tu=1;
;;;1367   
;;;1368   		bps[1]._vol_u=0;
;;;1369   		bps[1]._vol_i=0;
;;;1370   		bps[1]._flags_tu=1;
;;;1371   
;;;1372   		bps[2]._vol_u=0;
;;;1373   		bps[2]._vol_i=0;
;;;1374   		bps[2]._flags_tu=1;
;;;1375   
;;;1376   		bps[3]._vol_u=0;
;;;1377   		bps[3]._vol_i=0;
;;;1378   		bps[3]._flags_tu=1;
;;;1379   
;;;1380   		bps[4]._vol_u=0;
;;;1381   		bps[4]._vol_i=0;
;;;1382   		bps[4]._flags_tu=1;
;;;1383   
;;;1384   		bps[5]._vol_u=0;
;;;1385   		bps[5]._vol_i=0;
;;;1386   		bps[5]._flags_tu=1;
;;;1387   
;;;1388   		bps[6]._vol_u=0;
;;;1389   		bps[6]._vol_i=0;
;;;1390   		bps[6]._flags_tu=1;
;;;1391   
;;;1392   		bps[7]._vol_u=0;
;;;1393   		bps[7]._vol_i=0;
;;;1394   		bps[7]._flags_tu=1;
;;;1395   
;;;1396   		bps[8]._vol_u=0;
;;;1397   		bps[8]._vol_i=0;
;;;1398   		bps[8]._flags_tu=1;
;;;1399   		
;;;1400   		bps[9]._vol_u=0;
;;;1401   		bps[9]._vol_i=0;
;;;1402   		bps[9]._flags_tu=1;
;;;1403   
;;;1404   		bps[10]._vol_u=0;
;;;1405   		bps[10]._vol_i=0;
;;;1406   		bps[10]._flags_tu=1;
;;;1407   
;;;1408   		bps[11]._vol_u=0;
;;;1409   		bps[11]._vol_i=0;
;;;1410   		bps[11]._flags_tu=1;
;;;1411    		
;;;1412   		bps[sub_ind1]._vol_u=1022;
;;;1413   		bps[sub_ind1]._vol_i=1022;
;;;1414   		bps[sub_ind1]._flags_tu=0;
;;;1415   		}
;;;1416   
;;;1417   	else if(sub_ind==3)
;;;1418   		{
;;;1419   		if(phase==0)
;;;1420   			{
;;;1421     			cntrl_stat_U=0;
;;;1422   			cntrl_stat_I=0;
;;;1423   			bps_stat=stOFF;
;;;1424   			bps[0]._vol_u=0;
;;;1425   			bps[0]._vol_i=0;
;;;1426   			bps[0]._flags_tu=1;
;;;1427   	
;;;1428   			bps[1]._vol_u=0;
;;;1429   			bps[1]._vol_i=0;
;;;1430   			bps[1]._flags_tu=1;
;;;1431   	
;;;1432   			bps[1]._vol_u=0;
;;;1433   			bps[1]._vol_i=0;
;;;1434   			bps[1]._flags_tu=1;
;;;1435   	
;;;1436   			bps[2]._vol_u=0;
;;;1437   			bps[2]._vol_i=0;
;;;1438   			bps[2]._flags_tu=1;
;;;1439   	
;;;1440   			bps[3]._vol_u=0;
;;;1441   			bps[3]._vol_i=0;
;;;1442   			bps[3]._flags_tu=1;
;;;1443   	
;;;1444   			bps[4]._vol_u=0;
;;;1445   			bps[4]._vol_i=0;
;;;1446   			bps[4]._flags_tu=1;
;;;1447   	
;;;1448   			bps[5]._vol_u=0;
;;;1449   			bps[5]._vol_i=0;
;;;1450   			bps[5]._flags_tu=1;
;;;1451   	
;;;1452   			bps[6]._vol_u=0;
;;;1453   			bps[6]._vol_i=0;
;;;1454   			bps[6]._flags_tu=1;
;;;1455   	
;;;1456   			bps[7]._vol_u=0;
;;;1457   			bps[7]._vol_i=0;
;;;1458   			bps[7]._flags_tu=1;
;;;1459   	
;;;1460   			bps[8]._vol_u=0;
;;;1461   			bps[8]._vol_i=0;
;;;1462   			bps[8]._flags_tu=1;
;;;1463   			
;;;1464   			bps[9]._vol_u=0;
;;;1465   			bps[9]._vol_i=0;
;;;1466   			bps[9]._flags_tu=1;
;;;1467   	
;;;1468   			bps[10]._vol_u=0;
;;;1469   			bps[10]._vol_i=0;
;;;1470   			bps[10]._flags_tu=1;
;;;1471   	
;;;1472   			bps[11]._vol_u=0;
;;;1473   			bps[11]._vol_i=0;
;;;1474   			bps[11]._flags_tu=1;
;;;1475   
;;;1476   			}
;;;1477   		else if(phase==1)
;;;1478   			{
;;;1479     			cntrl_stat_U=1022;
;;;1480   			cntrl_stat_I=1022;
;;;1481   			bps_stat=stON;
;;;1482   
;;;1483   			bps[0]._vol_u=0;
;;;1484   			bps[0]._vol_i=0;
;;;1485   			bps[0]._flags_tu=1;
;;;1486   	
;;;1487   			bps[1]._vol_u=0;
;;;1488   			bps[1]._vol_i=0;
;;;1489   			bps[1]._flags_tu=1;
;;;1490   	
;;;1491   			bps[1]._vol_u=0;
;;;1492   			bps[1]._vol_i=0;
;;;1493   			bps[1]._flags_tu=1;
;;;1494   	
;;;1495   			bps[2]._vol_u=0;
;;;1496   			bps[2]._vol_i=0;
;;;1497   			bps[2]._flags_tu=1;
;;;1498   	
;;;1499   			bps[3]._vol_u=0;
;;;1500   			bps[3]._vol_i=0;
;;;1501   			bps[3]._flags_tu=1;
;;;1502   	
;;;1503   			bps[4]._vol_u=0;
;;;1504   			bps[4]._vol_i=0;
;;;1505   			bps[4]._flags_tu=1;
;;;1506   	
;;;1507   			bps[5]._vol_u=0;
;;;1508   			bps[5]._vol_i=0;
;;;1509   			bps[5]._flags_tu=1;
;;;1510   	
;;;1511   			bps[6]._vol_u=0;
;;;1512   			bps[6]._vol_i=0;
;;;1513   			bps[6]._flags_tu=1;
;;;1514   	
;;;1515   			bps[7]._vol_u=0;
;;;1516   			bps[7]._vol_i=0;
;;;1517   			bps[7]._flags_tu=1;
;;;1518   	
;;;1519   			bps[8]._vol_u=0;
;;;1520   			bps[8]._vol_i=0;
;;;1521   			bps[8]._flags_tu=1;
;;;1522   			
;;;1523   			bps[9]._vol_u=0;
;;;1524   			bps[9]._vol_i=0;
;;;1525   			bps[9]._flags_tu=1;
;;;1526   	
;;;1527   			bps[10]._vol_u=0;
;;;1528   			bps[10]._vol_i=0;
;;;1529   			bps[10]._flags_tu=1;
;;;1530   	
;;;1531   			bps[11]._vol_u=0;
;;;1532   			bps[11]._vol_i=0;
;;;1533   			bps[11]._flags_tu=1;
;;;1534   
;;;1535   
;;;1536   
;;;1537   			bps[sub_ind1]._vol_u=1022;
;;;1538   			bps[sub_ind1]._vol_i=1022;
;;;1539   			bps[sub_ind1]._flags_tu=0;
;;;1540   			}
;;;1541   		}
;;;1542   	else 
;;;1543   		{
;;;1544   		bps_stat=stOFF;
;;;1545   
;;;1546   		bps[0]._vol_u=0;
;;;1547   		bps[0]._vol_i=0;
;;;1548   		bps[0]._flags_tu=1;
;;;1549   
;;;1550   		bps[1]._vol_u=0;
;;;1551   		bps[1]._vol_i=0;
;;;1552   		bps[1]._flags_tu=1;
;;;1553   
;;;1554   		bps[1]._vol_u=0;
;;;1555   		bps[1]._vol_i=0;
;;;1556   		bps[1]._flags_tu=1;
;;;1557   
;;;1558   		bps[2]._vol_u=0;
;;;1559   		bps[2]._vol_i=0;
;;;1560   		bps[2]._flags_tu=1;
;;;1561   
;;;1562   		bps[3]._vol_u=0;
;;;1563   		bps[3]._vol_i=0;
;;;1564   		bps[3]._flags_tu=1;
;;;1565   
;;;1566   		bps[4]._vol_u=0;
;;;1567   		bps[4]._vol_i=0;
;;;1568   		bps[4]._flags_tu=1;
;;;1569   
;;;1570   		bps[5]._vol_u=0;
;;;1571   		bps[5]._vol_i=0;
;;;1572   		bps[5]._flags_tu=1;
;;;1573   
;;;1574   		bps[6]._vol_u=0;
;;;1575   		bps[6]._vol_i=0;
;;;1576   		bps[6]._flags_tu=1;
;;;1577   
;;;1578   		bps[7]._vol_u=0;
;;;1579   		bps[7]._vol_i=0;
;;;1580   		bps[7]._flags_tu=1;
;;;1581   
;;;1582   		bps[8]._vol_u=0;
;;;1583   		bps[8]._vol_i=0;
;;;1584   		bps[8]._flags_tu=1;
;;;1585   		
;;;1586   		bps[9]._vol_u=0;
;;;1587   		bps[9]._vol_i=0;
;;;1588   		bps[9]._flags_tu=1;
;;;1589   
;;;1590   		bps[10]._vol_u=0;
;;;1591   		bps[10]._vol_i=0;
;;;1592   		bps[10]._flags_tu=1;
;;;1593   
;;;1594   		bps[11]._vol_u=0;
;;;1595   		bps[11]._vol_i=0;
;;;1596   		bps[11]._flags_tu=1;
;;;1597   
;;;1598   		}
;;;1599   	}
;;;1600   
;;;1601   else if(ind==iTst_pwm)
;;;1602   	{
;;;1603   	char i;
;;;1604   
;;;1605   	for(i=0;i<NUMIST;i++)
;;;1606   		{
;;;1607   		bps[i]._vol_u=tst_pwm_u;
000b90  4893              LDR      r0,|L4.3552|
;;;1608   		bps[i]._vol_i=tst_pwm_i;
000b92  4a97              LDR      r2,|L4.3568|
000b94  2b33              CMP      r3,#0x33              ;1601
000b96  d077              BEQ      |L4.3208|
;;;1609   		bps[i]._flags_tu=0;
;;;1610   		}
;;;1611   	}
;;;1612   
;;;1613   else if(ind==iK_viz_u)
;;;1614   	{
;;;1615   	char i;
;;;1616   
;;;1617   	if(viz_stat!=vsON)
000b98  f8dfc248          LDR      r12,|L4.3556|
000b9c  2b45              CMP      r3,#0x45              ;1613
000b9e  d074              BEQ      |L4.3210|
;;;1618   		{
;;;1619   		for(i=0;i<NUMIST;i++)
;;;1620   			{
;;;1621   			bps[i]._vol_u=1022;
;;;1622   			bps[i]._vol_i=1022;
;;;1623   			bps[i]._flags_tu=0;
;;;1624   			}
;;;1625   		}
;;;1626   	else 
;;;1627   		{
;;;1628   		for(i=0;i<NUMIST;i++)
;;;1629   			{
;;;1630   			bps[i]._vol_u=tst_pwm_u;
;;;1631   			bps[i]._vol_i=tst_pwm_i;
;;;1632   			bps[i]._flags_tu=0;
;;;1633   			}
;;;1634   		}
;;;1635   	}
;;;1636   
;;;1637   else if(ind==iK_viz_i)
000ba0  2b44              CMP      r3,#0x44
000ba2  d073              BEQ      |L4.3212|
;;;1638   	{
;;;1639   	char i;
;;;1640   
;;;1641   	if(viz_stat!=vsON)
;;;1642   		{
;;;1643   		for(i=0;i<NUMIST;i++)
;;;1644   			{
;;;1645   			bps[i]._vol_u=1022;
;;;1646   			bps[i]._vol_i=1022;
;;;1647   			bps[i]._flags_tu=0;
;;;1648   			}
;;;1649   		}
;;;1650   	else 
;;;1651   		{
;;;1652   		for(i=0;i<NUMIST;i++)
;;;1653   			{
;;;1654   			bps[i]._vol_u=tst_pwm_u;
;;;1655   			bps[i]._vol_i=tst_pwm_i;
;;;1656   			bps[i]._flags_tu=0;
;;;1657   			}
;;;1658   		}
;;;1659   	}
;;;1660   
;;;1661   else if(work_stat==wsGS)
000ba4  f89a2000          LDRB     r2,[r10,#0]  ; work_stat
;;;1662   	{
;;;1663   	signed long temp_SL_U,temp_SL_I;
;;;1664   	
;;;1665   	if((CURR_FADE_IN) && (time_proc<CURR_FADE_IN))
;;;1666   		{
;;;1667   		signed long temp_SL_;
;;;1668   		
;;;1669   		temp_SL_=	(signed long)I_ug_temp;
;;;1670   		temp_SL_*= (signed long)time_proc;
;;;1671   		temp_SL_/= (signed long)CURR_FADE_IN;
;;;1672   
;;;1673   		//I_ug_temp= (signed short)((signed long)I_ug_temp*(signed long)time_proc)/(signed long)CURR_FADE_IN;
;;;1674   
;;;1675   		I_ug_temp= (signed short)temp_SL_;
;;;1676   		}	
;;;1677   	
;;;1678   	if(b1Hz_sh) {
;;;1679   
;;;1680   
;;;1681   
;;;1682   
;;;1683   		if(!((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF)))) {
;;;1684   	 		if(load_I<I_ug_temp)_x_++;
000ba8  4893              LDR      r0,|L4.3576|
;;;1685      			else if(load_I>I_ug_temp)_x_--;
;;;1686   			//gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;1687   			gran(&_x_,-50,50); 
;;;1688   
;;;1689   	 		if(load_U<U_maxg)_xu_++;
000baa  f8dfa2ac          LDR      r10,|L4.3672|
000bae  f8dfb2ac          LDR      r11,|L4.3676|
000bb2  2a01              CMP      r2,#1                 ;1661
000bb4  d06b              BEQ      |L4.3214|
;;;1690      			else if(load_U>U_maxg)_xu_--;
;;;1691   			//gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;1692   			gran(&_xu_,-50,50); 
;;;1693   		}
;;;1694   	}
;;;1695   
;;;1696   	temp_SL_U=1022;
;;;1697   	temp_SL_U*=(signed long)U_maxg;
;;;1698   	temp_SL_U/=(signed long)U_MAX;
;;;1699   
;;;1700   	temp_SL_I=1022;
;;;1701   	//temp_SL_I*=NUMIST;
;;;1702   	temp_SL_I*=(signed long)I_ug_temp;
;;;1703   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1704   
;;;1705   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1706   		{
;;;1707   		temp_SL_U=find_U_curve(U_maxg)*5;
;;;1708   		}
;;;1709   	 
;;;1710   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1711   		{
;;;1712   		temp_SL_I=find_I_curve(I_ug_temp)*5;
;;;1713   		}
;;;1714   
;;;1715   	for(i=0;i<NUMIST;i++)
;;;1716   		{
;;;1717   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;1718   		 	bps[i]._vol_u=0;
;;;1719   			bps[i]._vol_i=0;
;;;1720   			bps[i]._flags_tu=1;
;;;1721   		} else {
;;;1722   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;1723   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1724   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1725   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1726   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1727   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1728   			bps[i]._flags_tu=0;
;;;1729   		}
;;;1730   	}
;;;1731   
;;;1732   	}
;;;1733   else if(work_stat==wsPS)
000bb6  2a02              CMP      r2,#2
000bb8  d06a              BEQ      |L4.3216|
;;;1734   	{
;;;1735   	signed long temp_SL_U,temp_SL_I;
;;;1736   
;;;1737   /*	U_up_d=U_up/100;
;;;1738   	if(U_up_d<5) U_up_d=5;
;;;1739   	*/
;;;1740   	if(load_U_>5)bU_VALID=1;
;;;1741   	else bU_VALID=0;
;;;1742   /*	if( (load_U_>(U_up-U_up_d))&&(load_U_<(U_up+U_up_d)) )bFAST_REG=0;
;;;1743   	else bFAST_REG=1;*/
;;;1744   
;;;1745   	bFAST_REG=0;
;;;1746   	if((b1Hz_sh&&bU_VALID)||(bFAST_REG&&bU_VALID))
;;;1747   		{
;;;1748   	 	if(load_I<I_maxp)_x_++;
;;;1749      		else if(load_I>I_maxp)_x_--;
;;;1750   		gran(&_x_,-50,50); 
;;;1751   
;;;1752   	 	if(load_U_<U_up_temp)_xu_++;
;;;1753      		else if(load_U_>U_up_temp)_xu_--;
;;;1754   		gran(&_xu_,-50,50); 
;;;1755   
;;;1756   		}
;;;1757   
;;;1758   
;;;1759   	temp_SL_U=900;
;;;1760   	temp_SL_U*=(signed long)U_up_temp;
;;;1761   	temp_SL_U/=(signed long)U_MAX;
;;;1762   	temp_SL_U+=50;
;;;1763   
;;;1764   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1765   		{	
;;;1766   		temp_SL_U=find_U_curve(U_up_temp)*5;
;;;1767   		}
;;;1768   	//temp_SL_U=lc640_read_int(SEKTOR_KURVE_U+(temp_SL_U*2));
;;;1769   	 
;;;1770   	temp_SL_I=1022;
;;;1771   	//temp_SL_I*=NUMIST;
;;;1772   	temp_SL_I*=(signed long)I_maxp;
;;;1773   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1774   
;;;1775   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1776   		{
;;;1777   		temp_SL_I=find_I_curve(I_maxp)*5;
;;;1778   		}
;;;1779   
;;;1780   	for(i=0;i<NUMIST;i++) {
;;;1781   
;;;1782   		if((REV_IS_ON)&&(AVT_REV_IS_ON)&&((proc_phase==ppFF_P_REW)||(proc_phase==ppREW_P_FF))) {
;;;1783   		 	bps[i]._vol_u=0;
;;;1784   			bps[i]._vol_i=0;
;;;1785   			bps[i]._flags_tu=1;
;;;1786   		} else {
;;;1787   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;1788   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1789   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1790   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1791   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1792   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1793   			bps[i]._flags_tu=0;
;;;1794   		}
;;;1795   	}
;;;1796   
;;;1797   
;;;1798   /*	for(i=0;i<NUMIST;i++)
;;;1799   		{
;;;1800   		bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;1801   	 	bps[i]._vol_i=((short)temp_SL_I+ _x_);//NUMIST;
;;;1802   		bps[i]._flags_tu=0;
;;;1803   		}*/
;;;1804   	//bps[0]._vol_i+= _x_;
;;;1805   	plazma_vol_u_0=temp_SL_U;
;;;1806   	plazma_vol_u_1=bps[0]._vol_u;
;;;1807   	}
;;;1808   
;;;1809   else if(work_stat==wsCAP)
000bba  2a03              CMP      r2,#3
000bbc  d069              BEQ      |L4.3218|
;;;1810   	{
;;;1811   	signed long temp_SL_U=0,temp_SL_I=0;
;;;1812   
;;;1813   
;;;1814   
;;;1815   
;;;1816   
;;;1817   
;;;1818   	if(b1Hz_sh) {
;;;1819   		if(!bOFF) {
;;;1820   	 		if(load_I<(CAP_WRK_CURR*10))_x_++;
;;;1821      			else if(load_I>(CAP_WRK_CURR*10))_x_--;
;;;1822   			gran(&_x_,-temp_SL_I,1022-temp_SL_I);
;;;1823   			gran(&_x_,-50,50); 
;;;1824   
;;;1825   	 		if(load_U<(CAP_MAX_VOLT*10))_xu_++;
;;;1826      			else if(load_U>(CAP_MAX_VOLT*10))_xu_--;
;;;1827   			gran(&_x_,-temp_SL_U,1022-temp_SL_U);
;;;1828   			gran(&_xu_,-50,50); 
;;;1829   		}
;;;1830   	}
;;;1831   
;;;1832   	temp_SL_U=10220L;
;;;1833   	temp_SL_U*=(signed long)CAP_MAX_VOLT;
;;;1834   	temp_SL_U/=(signed long)U_MAX;
;;;1835   
;;;1836   	temp_SL_I=10220L;
;;;1837   	//temp_SL_I*=NUMIST;
;;;1838   	temp_SL_I*=(signed long)CAP_WRK_CURR;
;;;1839   	temp_SL_I/=(signed long)I_MAX_IPS;
;;;1840   
;;;1841   	if(lc640_read_int(EE_U_CURVE_IS_ON)==0xabcd)
;;;1842   		{
;;;1843   		temp_SL_U=find_U_curve(CAP_MAX_VOLT*10)*5;
;;;1844   		}
;;;1845   	 
;;;1846   	if(lc640_read_int(EE_I_CURVE_IS_ON)==0xabcd)
;;;1847   		{
;;;1848   		temp_SL_I=find_I_curve(CAP_WRK_CURR*10)*5;
;;;1849   		} 
;;;1850   
;;;1851   //temp_SL_U=1000;
;;;1852   
;;;1853   	for(i=0;i<NUMIST;i++)
;;;1854   		{
;;;1855   		if(bOFF) {
;;;1856   		 	bps[i]._vol_u=0;
;;;1857   			bps[i]._vol_i=0;
;;;1858   			bps[i]._flags_tu=1;
;;;1859   		} else {
;;;1860   			bps[i]._vol_u=(short)temp_SL_U + _xu_;
;;;1861   			if(bps[i]._vol_u<0)bps[i]._vol_u=0;
;;;1862   			if(bps[i]._vol_u>1022)bps[i]._vol_u=1022;
;;;1863   			bps[i]._vol_i=((short)temp_SL_I + _x_);///NUMIST;
;;;1864   			if(bps[i]._vol_i<0)bps[i]._vol_i=0;
;;;1865   			if(bps[i]._vol_i>1022)bps[i]._vol_i=1022;
;;;1866   			bps[i]._flags_tu=0;
;;;1867   		}
;;;1868   	}
;;;1869   
;;;1870   	}
;;;1871   else 
;;;1872   	{
;;;1873   	bps_stat=stOFF;
000bbe  700d              STRB     r5,[r1,#0]
;;;1874   
;;;1875   	for(i=0;i<NUMIST;i++)
000bc0  2000              MOVS     r0,#0
000bc2  4643              MOV      r3,r8                 ;1266
000bc4  f9b72000          LDRSH    r2,[r7,#0]            ;1307
000bc8  e3f2              B        |L4.5040|
                  |L4.3018|
000bca  48a5              LDR      r0,|L4.3680|
000bcc  e7a5              B        |L4.2842|
                  |L4.3022|
000bce  48a5              LDR      r0,|L4.3684|
000bd0  e7a3              B        |L4.2842|
                  |L4.3026|
000bd2  48a5              LDR      r0,|L4.3688|
000bd4  e7ac              B        |L4.2864|
                  |L4.3030|
000bd6  48a5              LDR      r0,|L4.3692|
000bd8  e7aa              B        |L4.2864|
                  |L4.3034|
000bda  f9900001          LDRSB    r0,[r0,#1]            ;1301  ; a_ind
000bde  b138              CBZ      r0,|L4.3056|
000be0  2801              CMP      r0,#1                 ;1314
000be2  d01e              BEQ      |L4.3106|
000be4  700d              STRB     r5,[r1,#0]            ;1345
000be6  62e5              STR      r5,[r4,#0x2c]         ;1348  ; bps
000be8  6325              STR      r5,[r4,#0x30]         ;1349  ; bps
000bea  f8848028          STRB     r8,[r4,#0x28]         ;1349
000bee  e27e              B        |L4.4334|
                  |L4.3056|
000bf0  f8a6900c          STRH     r9,[r6,#0xc]          ;1303
000bf4  f8a6900e          STRH     r9,[r6,#0xe]          ;1304
000bf8  f8818000          STRB     r8,[r1,#0]            ;1305
000bfc  464a              MOV      r2,r9                 ;1303
000bfe  2000              MOVS     r0,#0                 ;1307
000c00  f9b71000          LDRSH    r1,[r7,#0]            ;1307
000c04  e00a              B        |L4.3100|
000c06  bf00              NOP                            ;1309
                  |L4.3080|
000c08  eb000380          ADD      r3,r0,r0,LSL #2       ;1309
000c0c  eb041303          ADD      r3,r4,r3,LSL #4       ;1309
000c10  1c40              ADDS     r0,r0,#1              ;1307
000c12  62da              STR      r2,[r3,#0x2c]         ;1310
000c14  631a              STR      r2,[r3,#0x30]         ;1311
000c16  f8835028          STRB     r5,[r3,#0x28]         ;1311
000c1a  b2c0              UXTB     r0,r0                 ;1307
                  |L4.3100|
000c1c  4288              CMP      r0,r1                 ;1307
000c1e  dbf3              BLT      |L4.3080|
000c20  e265              B        |L4.4334|
                  |L4.3106|
000c22  7810              LDRB     r0,[r2,#0]            ;1316  ; phase
000c24  b110              CBZ      r0,|L4.3116|
000c26  2801              CMP      r0,#1                 ;1329
000c28  d015              BEQ      |L4.3158|
000c2a  e260              B        |L4.4334|
                  |L4.3116|
000c2c  81b5              STRH     r5,[r6,#0xc]          ;1318
000c2e  81f5              STRH     r5,[r6,#0xe]          ;1319
000c30  700d              STRB     r5,[r1,#0]            ;1320
000c32  2000              MOVS     r0,#0                 ;1322
000c34  4643              MOV      r3,r8                 ;1266
000c36  f9b72000          LDRSH    r2,[r7,#0]            ;1307
000c3a  e009              B        |L4.3152|
                  |L4.3132|
000c3c  eb000180          ADD      r1,r0,r0,LSL #2       ;1324
000c40  eb041101          ADD      r1,r4,r1,LSL #4       ;1324
000c44  1c40              ADDS     r0,r0,#1              ;1322
000c46  62cd              STR      r5,[r1,#0x2c]         ;1325
000c48  630d              STR      r5,[r1,#0x30]         ;1326
000c4a  f8813028          STRB     r3,[r1,#0x28]         ;1326
000c4e  b2c0              UXTB     r0,r0                 ;1322
                  |L4.3152|
000c50  4290              CMP      r0,r2                 ;1322
000c52  dbf3              BLT      |L4.3132|
000c54  e3fc              B        |L4.5200|
                  |L4.3158|
000c56  f8a6900c          STRH     r9,[r6,#0xc]          ;1331
000c5a  f8a6900e          STRH     r9,[r6,#0xe]          ;1332
000c5e  f8818000          STRB     r8,[r1,#0]            ;1333
000c62  464a              MOV      r2,r9                 ;1331
000c64  2000              MOVS     r0,#0                 ;1335
000c66  f9b71000          LDRSH    r1,[r7,#0]            ;1307
000c6a  e009              B        |L4.3200|
                  |L4.3180|
000c6c  eb000380          ADD      r3,r0,r0,LSL #2       ;1337
000c70  eb041303          ADD      r3,r4,r3,LSL #4       ;1337
000c74  1c40              ADDS     r0,r0,#1              ;1335
000c76  62da              STR      r2,[r3,#0x2c]         ;1338
000c78  631a              STR      r2,[r3,#0x30]         ;1339
000c7a  f8835028          STRB     r5,[r3,#0x28]         ;1339
000c7e  b2c0              UXTB     r0,r0                 ;1335
                  |L4.3200|
000c80  4288              CMP      r0,r1                 ;1335
000c82  dbf3              BLT      |L4.3180|
000c84  e3e4              B        |L4.5200|
                  |L4.3206|
000c86  e005              B        |L4.3220|
                  |L4.3208|
000c88  e0fd              B        |L4.3718|
                  |L4.3210|
000c8a  e112              B        |L4.3762|
                  |L4.3212|
000c8c  e13d              B        |L4.3850|
                  |L4.3214|
000c8e  e168              B        |L4.3938|
                  |L4.3216|
000c90  e22e              B        |L4.4336|
                  |L4.3218|
000c92  e2e9              B        |L4.4712|
                  |L4.3220|
000c94  f9903001          LDRSB    r3,[r0,#1]            ;1354  ; a_ind
000c98  b113              CBZ      r3,|L4.3232|
000c9a  2b03              CMP      r3,#3                 ;1417
000c9c  d058              BEQ      |L4.3408|
000c9e  e05e              B        |L4.3422|
                  |L4.3232|
000ca0  f8a6900c          STRH     r9,[r6,#0xc]          ;1356
000ca4  f8a6900e          STRH     r9,[r6,#0xe]          ;1357
000ca8  f8818000          STRB     r8,[r1,#0]            ;1358
000cac  62e5              STR      r5,[r4,#0x2c]         ;1361  ; bps
000cae  6325              STR      r5,[r4,#0x30]         ;1362  ; bps
000cb0  f8848028          STRB     r8,[r4,#0x28]         ;1362
000cb4  67e5              STR      r5,[r4,#0x7c]         ;1365  ; bps
000cb6  f8c45080          STR      r5,[r4,#0x80]         ;1366  ; bps
000cba  f8848078          STRB     r8,[r4,#0x78]         ;1366
000cbe  f8c450cc          STR      r5,[r4,#0xcc]         ;1373  ; bps
000cc2  f8c450d0          STR      r5,[r4,#0xd0]         ;1374  ; bps
000cc6  f88480c8          STRB     r8,[r4,#0xc8]         ;1374
000cca  f8c4511c          STR      r5,[r4,#0x11c]        ;1377  ; bps
000cce  f8c45120          STR      r5,[r4,#0x120]        ;1378  ; bps
000cd2  f8848118          STRB     r8,[r4,#0x118]        ;1378
000cd6  f8c4516c          STR      r5,[r4,#0x16c]        ;1381  ; bps
000cda  f8c45170          STR      r5,[r4,#0x170]        ;1382  ; bps
000cde  f8848168          STRB     r8,[r4,#0x168]        ;1382
000ce2  f8c451bc          STR      r5,[r4,#0x1bc]        ;1385  ; bps
000ce6  4642              MOV      r2,r8                 ;1358
000ce8  f8c451c0          STR      r5,[r4,#0x1c0]        ;1386  ; bps
000cec  f88421b8          STRB     r2,[r4,#0x1b8]        ;1386
000cf0  f8c4520c          STR      r5,[r4,#0x20c]        ;1389  ; bps
000cf4  f8c45210          STR      r5,[r4,#0x210]        ;1390  ; bps
000cf8  f8842208          STRB     r2,[r4,#0x208]        ;1390
000cfc  f8c4525c          STR      r5,[r4,#0x25c]        ;1393  ; bps
000d00  f8c45260          STR      r5,[r4,#0x260]        ;1394  ; bps
000d04  f8842258          STRB     r2,[r4,#0x258]        ;1394
000d08  f8c452ac          STR      r5,[r4,#0x2ac]        ;1397  ; bps
000d0c  f8c452b0          STR      r5,[r4,#0x2b0]        ;1398  ; bps
000d10  f88422a8          STRB     r2,[r4,#0x2a8]        ;1398
000d14  f8c452fc          STR      r5,[r4,#0x2fc]        ;1401  ; bps
000d18  f8c45300          STR      r5,[r4,#0x300]        ;1402  ; bps
000d1c  f88422f8          STRB     r2,[r4,#0x2f8]        ;1402
000d20  f8c4534c          STR      r5,[r4,#0x34c]        ;1405  ; bps
000d24  f8c45350          STR      r5,[r4,#0x350]        ;1406  ; bps
000d28  f8842348          STRB     r2,[r4,#0x348]        ;1406
000d2c  f8c4539c          STR      r5,[r4,#0x39c]        ;1409  ; bps
000d30  f8c453a0          STR      r5,[r4,#0x3a0]        ;1410  ; bps
000d34  f8842398          STRB     r2,[r4,#0x398]        ;1410
000d38  f9900002          LDRSB    r0,[r0,#2]            ;1412  ; a_ind
000d3c  464b              MOV      r3,r9                 ;1356
000d3e  eb000080          ADD      r0,r0,r0,LSL #2       ;1412
000d42  eb041000          ADD      r0,r4,r0,LSL #4       ;1412
000d46  62c3              STR      r3,[r0,#0x2c]         ;1413
000d48  6303              STR      r3,[r0,#0x30]         ;1414
000d4a  f8805028          STRB     r5,[r0,#0x28]         ;1414
000d4e  e37f              B        |L4.5200|
                  |L4.3408|
000d50  7812              LDRB     r2,[r2,#0]            ;1419  ; phase
000d52  b112              CBZ      r2,|L4.3418|
000d54  2a01              CMP      r2,#1                 ;1477
000d56  d0a3              BEQ      |L4.3232|
000d58  e37a              B        |L4.5200|
                  |L4.3418|
000d5a  81b5              STRH     r5,[r6,#0xc]          ;1421
000d5c  81f5              STRH     r5,[r6,#0xe]          ;1422
                  |L4.3422|
000d5e  f1040428          ADD      r4,r4,#0x28           ;1544
000d62  700d              STRB     r5,[r1,#0]            ;1544
000d64  6065              STR      r5,[r4,#4]            ;1547  ; bps
000d66  60a5              STR      r5,[r4,#8]            ;1548  ; bps
000d68  f8848000          STRB     r8,[r4,#0]            ;1548
000d6c  6565              STR      r5,[r4,#0x54]         ;1551  ; bps
000d6e  65a5              STR      r5,[r4,#0x58]         ;1552  ; bps
000d70  f8848050          STRB     r8,[r4,#0x50]         ;1552
000d74  f8c450a4          STR      r5,[r4,#0xa4]         ;1559  ; bps
000d78  f8c450a8          STR      r5,[r4,#0xa8]         ;1560  ; bps
000d7c  f88480a0          STRB     r8,[r4,#0xa0]         ;1560
000d80  f8c450f4          STR      r5,[r4,#0xf4]         ;1563  ; bps
000d84  f8c450f8          STR      r5,[r4,#0xf8]         ;1564  ; bps
000d88  f88480f0          STRB     r8,[r4,#0xf0]         ;1564
000d8c  f8c45144          STR      r5,[r4,#0x144]        ;1567  ; bps
000d90  f8c45148          STR      r5,[r4,#0x148]        ;1568  ; bps
000d94  f8848140          STRB     r8,[r4,#0x140]        ;1568
000d98  f8c45194          STR      r5,[r4,#0x194]        ;1571  ; bps
000d9c  f8c45198          STR      r5,[r4,#0x198]        ;1572  ; bps
000da0  f8848190          STRB     r8,[r4,#0x190]        ;1572
000da4  f8c451e4          STR      r5,[r4,#0x1e4]        ;1575  ; bps
000da8  4640              MOV      r0,r8                 ;1548
000daa  f8c451e8          STR      r5,[r4,#0x1e8]        ;1576  ; bps
000dae  f88401e0          STRB     r0,[r4,#0x1e0]        ;1576
000db2  f8c45234          STR      r5,[r4,#0x234]        ;1579  ; bps
000db6  f8c45238          STR      r5,[r4,#0x238]        ;1580  ; bps
000dba  f8840230          STRB     r0,[r4,#0x230]        ;1580
000dbe  f8c45284          STR      r5,[r4,#0x284]        ;1583  ; bps
000dc2  f8c45288          STR      r5,[r4,#0x288]        ;1584  ; bps
000dc6  f8840280          STRB     r0,[r4,#0x280]        ;1584
000dca  f8c452d4          STR      r5,[r4,#0x2d4]        ;1587  ; bps
000dce  f8c452d8          STR      r5,[r4,#0x2d8]        ;1588  ; bps
000dd2  f88402d0          STRB     r0,[r4,#0x2d0]        ;1588
000dd6  f8c45324          STR      r5,[r4,#0x324]        ;1591  ; bps
000dda  e049              B        |L4.3696|
                  |L4.3548|
                          DCD      a_ind
                  |L4.3552|
                          DCD      tst_pwm_u
                  |L4.3556|
                          DCD      viz_stat
                  |L4.3560|
                          DCD      viz_stat_cnt
                  |L4.3564|
                          DCD      0xffffabcd
                  |L4.3568|
                          DCD      tst_pwm_i
                  |L4.3572|
                          DCD      load_U
                  |L4.3576|
                          DCD      load_I
                  |L4.3580|
                          DCD      REV_IS_ON
                  |L4.3584|
                          DCD      work_stat
                  |L4.3588|
                          DCD      AVT_REV_IS_ON
                  |L4.3592|
                          DCD      AVT_REV_I_NOM_FF
                  |L4.3596|
                          DCD      REV_STAT
                  |L4.3600|
                          DCD      AVT_REV_U_NOM_FF
                  |L4.3604|
                          DCD      U_up_temp
                  |L4.3608|
                          DCD      I_ug_temp
                  |L4.3612|
                          DCD      AVT_REV_I_NOM_REW
                  |L4.3616|
                          DCD      AVT_REV_U_NOM_REW
                  |L4.3620|
                          DCD      fiks_stat_I
                  |L4.3624|
                          DCD      I_ug
                  |L4.3628|
                          DCD      fiks_stat_U
                  |L4.3632|
                          DCD      U_up
                  |L4.3636|
                          DCD      I_MAX_IPS
                  |L4.3640|
                          DCD      I_MIN_IPS
                  |L4.3644|
                          DCD      U_MAX
                  |L4.3648|
                          DCD      U_MIN
                  |L4.3652|
                          DCD      ||area_number.24||
                  |L4.3656|
                          DCD      bps_stat
                  |L4.3660|
                          DCD      phase
                  |L4.3664|
                          DCD      bps
                  |L4.3668|
                          DCD      NUMIST
                  |L4.3672|
                          DCD      _xu_
                  |L4.3676|
                          DCD      _x_
                  |L4.3680|
                          DCD      I_ug3
                  |L4.3684|
                          DCD      I_ug2
                  |L4.3688|
                          DCD      U_up3
                  |L4.3692|
                          DCD      U_up2
                  |L4.3696|
000e70  f8c45328          STR      r5,[r4,#0x328]        ;1592  ; bps
000e74  f8840320          STRB     r0,[r4,#0x320]        ;1592
000e78  f8c45374          STR      r5,[r4,#0x374]        ;1595  ; bps
000e7c  f8c45378          STR      r5,[r4,#0x378]        ;1596  ; bps
000e80  f8840370          STRB     r0,[r4,#0x370]        ;1596
000e84  e2e4              B        |L4.5200|
                  |L4.3718|
000e86  2100              MOVS     r1,#0                 ;1605
000e88  f9b00000          LDRSH    r0,[r0,#0]            ;1607
000e8c  f9b22000          LDRSH    r2,[r2,#0]            ;1608
000e90  f9b73000          LDRSH    r3,[r7,#0]            ;1307
000e94  e00a              B        |L4.3756|
000e96  bf00              NOP                            ;1607
                  |L4.3736|
000e98  eb010781          ADD      r7,r1,r1,LSL #2       ;1607
000e9c  eb041707          ADD      r7,r4,r7,LSL #4       ;1607
000ea0  1c49              ADDS     r1,r1,#1              ;1605
000ea2  e9c7020b          STRD     r0,r2,[r7,#0x2c]      ;1607
000ea6  f8875028          STRB     r5,[r7,#0x28]         ;1609
000eaa  b2c9              UXTB     r1,r1                 ;1605
                  |L4.3756|
000eac  4299              CMP      r1,r3                 ;1605
000eae  dbf3              BLT      |L4.3736|
000eb0  e2ce              B        |L4.5200|
                  |L4.3762|
000eb2  f89c1000          LDRB     r1,[r12,#0]           ;1617  ; viz_stat
000eb6  2901              CMP      r1,#1                 ;1617
000eb8  d011              BEQ      |L4.3806|
000eba  2000              MOVS     r0,#0                 ;1619
000ebc  4649              MOV      r1,r9                 ;1303
000ebe  f9b72000          LDRSH    r2,[r7,#0]            ;1307
000ec2  e009              B        |L4.3800|
                  |L4.3780|
000ec4  eb000380          ADD      r3,r0,r0,LSL #2       ;1621
000ec8  eb041303          ADD      r3,r4,r3,LSL #4       ;1621
000ecc  1c40              ADDS     r0,r0,#1              ;1619
000ece  62d9              STR      r1,[r3,#0x2c]         ;1622
000ed0  6319              STR      r1,[r3,#0x30]         ;1623
000ed2  f8835028          STRB     r5,[r3,#0x28]         ;1623
000ed6  b2c0              UXTB     r0,r0                 ;1619
                  |L4.3800|
000ed8  4290              CMP      r0,r2                 ;1619
000eda  dbf3              BLT      |L4.3780|
000edc  e2b8              B        |L4.5200|
                  |L4.3806|
000ede  2100              MOVS     r1,#0                 ;1628
000ee0  f9b00000          LDRSH    r0,[r0,#0]            ;1607
000ee4  f9b22000          LDRSH    r2,[r2,#0]            ;1608
000ee8  f9b73000          LDRSH    r3,[r7,#0]            ;1307
000eec  e00a              B        |L4.3844|
000eee  bf00              NOP                            ;1630
                  |L4.3824|
000ef0  eb010781          ADD      r7,r1,r1,LSL #2       ;1630
000ef4  eb041707          ADD      r7,r4,r7,LSL #4       ;1630
000ef8  1c49              ADDS     r1,r1,#1              ;1628
000efa  e9c7020b          STRD     r0,r2,[r7,#0x2c]      ;1630
000efe  f8875028          STRB     r5,[r7,#0x28]         ;1632
000f02  b2c9              UXTB     r1,r1                 ;1628
                  |L4.3844|
000f04  4299              CMP      r1,r3                 ;1628
000f06  dbf3              BLT      |L4.3824|
000f08  e2a2              B        |L4.5200|
                  |L4.3850|
000f0a  f89c1000          LDRB     r1,[r12,#0]           ;1641  ; viz_stat
000f0e  2901              CMP      r1,#1                 ;1641
000f10  d011              BEQ      |L4.3894|
000f12  2000              MOVS     r0,#0                 ;1643
000f14  4649              MOV      r1,r9                 ;1303
000f16  f9b72000          LDRSH    r2,[r7,#0]            ;1307
000f1a  e009              B        |L4.3888|
                  |L4.3868|
000f1c  eb000380          ADD      r3,r0,r0,LSL #2       ;1645
000f20  eb041303          ADD      r3,r4,r3,LSL #4       ;1645
000f24  1c40              ADDS     r0,r0,#1              ;1643
000f26  62d9              STR      r1,[r3,#0x2c]         ;1646
000f28  6319              STR      r1,[r3,#0x30]         ;1647
000f2a  f8835028          STRB     r5,[r3,#0x28]         ;1647
000f2e  b2c0              UXTB     r0,r0                 ;1643
                  |L4.3888|
000f30  4290              CMP      r0,r2                 ;1643
000f32  dbf3              BLT      |L4.3868|
000f34  e28c              B        |L4.5200|
                  |L4.3894|
000f36  2100              MOVS     r1,#0                 ;1652
000f38  f9b00000          LDRSH    r0,[r0,#0]            ;1607
000f3c  f9b22000          LDRSH    r2,[r2,#0]            ;1608
000f40  f9b73000          LDRSH    r3,[r7,#0]            ;1307
000f44  e00a              B        |L4.3932|
000f46  bf00              NOP                            ;1654
                  |L4.3912|
000f48  eb010781          ADD      r7,r1,r1,LSL #2       ;1654
000f4c  eb041707          ADD      r7,r4,r7,LSL #4       ;1654
000f50  1c49              ADDS     r1,r1,#1              ;1652
000f52  e9c7020b          STRD     r0,r2,[r7,#0x2c]      ;1654
000f56  f8875028          STRB     r5,[r7,#0x28]         ;1656
000f5a  b2c9              UXTB     r1,r1                 ;1652
                  |L4.3932|
000f5c  4299              CMP      r1,r3                 ;1652
000f5e  dbf3              BLT      |L4.3912|
000f60  e276              B        |L4.5200|
                  |L4.3938|
000f62  49ff              LDR      r1,|L4.4960|
000f64  f9b12000          LDRSH    r2,[r1,#0]            ;1665  ; CURR_FADE_IN
000f68  b162              CBZ      r2,|L4.3972|
000f6a  49fe              LDR      r1,|L4.4964|
000f6c  680b              LDR      r3,[r1,#0]            ;1665  ; time_proc
000f6e  4293              CMP      r3,r2                 ;1665
000f70  da08              BGE      |L4.3972|
000f72  f8dfc3f4          LDR      r12,|L4.4968|
000f76  f9bc1000          LDRSH    r1,[r12,#0]           ;1669  ; I_ug_temp
000f7a  4359              MULS     r1,r3,r1              ;1670
000f7c  fb91f1f2          SDIV     r1,r1,r2              ;1671
000f80  f8ac1000          STRH     r1,[r12,#0]           ;1675
                  |L4.3972|
000f84  79b1              LDRB     r1,[r6,#6]            ;1678  ; b1Hz_sh
000f86  b381              CBZ      r1,|L4.4074|
000f88  49f8              LDR      r1,|L4.4972|
000f8a  8809              LDRH     r1,[r1,#0]            ;1683  ; REV_IS_ON
000f8c  b141              CBZ      r1,|L4.4000|
000f8e  49f8              LDR      r1,|L4.4976|
000f90  8809              LDRH     r1,[r1,#0]            ;1683  ; AVT_REV_IS_ON
000f92  b129              CBZ      r1,|L4.4000|
000f94  49f7              LDR      r1,|L4.4980|
000f96  7809              LDRB     r1,[r1,#0]            ;1683  ; proc_phase
000f98  2901              CMP      r1,#1                 ;1683
000f9a  d033              BEQ      |L4.4100|
000f9c  2903              CMP      r1,#3                 ;1683
000f9e  d031              BEQ      |L4.4100|
                  |L4.4000|
000fa0  f9b01000          LDRSH    r1,[r0,#0]            ;1684  ; load_I
000fa4  48f0              LDR      r0,|L4.4968|
000fa6  f9b00000          LDRSH    r0,[r0,#0]            ;1684  ; I_ug_temp
000faa  4281              CMP      r1,r0                 ;1684
000fac  da04              BGE      |L4.4024|
000fae  f8bb1000          LDRH     r1,[r11,#0]           ;1684  ; _x_
000fb2  f1010101          ADD      r1,r1,#1              ;1684
000fb6  e004              B        |L4.4034|
                  |L4.4024|
000fb8  dd05              BLE      |L4.4038|
000fba  f8bb1000          LDRH     r1,[r11,#0]           ;1685  ; _x_
000fbe  f1a10101          SUB      r1,r1,#1              ;1685
                  |L4.4034|
000fc2  f8ab1000          STRH     r1,[r11,#0]           ;1685
                  |L4.4038|
000fc6  2232              MOVS     r2,#0x32              ;1687
000fc8  4251              RSBS     r1,r2,#0              ;1687
000fca  48eb              LDR      r0,|L4.4984|
000fcc  f7fffffe          BL       gran
000fd0  48ea              LDR      r0,|L4.4988|
000fd2  f9b01000          LDRSH    r1,[r0,#0]            ;1689  ; load_U
000fd6  48ea              LDR      r0,|L4.4992|
000fd8  f9b00000          LDRSH    r0,[r0,#0]            ;1689  ; U_maxg
000fdc  4281              CMP      r1,r0                 ;1689
000fde  da05              BGE      |L4.4076|
000fe0  f8ba1000          LDRH     r1,[r10,#0]           ;1689  ; _xu_
000fe4  f1010101          ADD      r1,r1,#1              ;1689
000fe8  e005              B        |L4.4086|
                  |L4.4074|
000fea  e00b              B        |L4.4100|
                  |L4.4076|
000fec  dd05              BLE      |L4.4090|
000fee  f8ba1000          LDRH     r1,[r10,#0]           ;1690  ; _xu_
000ff2  f1a10101          SUB      r1,r1,#1              ;1690
                  |L4.4086|
000ff6  f8aa1000          STRH     r1,[r10,#0]           ;1690
                  |L4.4090|
000ffa  2232              MOVS     r2,#0x32              ;1692
000ffc  4251              RSBS     r1,r2,#0              ;1692
000ffe  48e1              LDR      r0,|L4.4996|
001000  f7fffffe          BL       gran
                  |L4.4100|
001004  48de              LDR      r0,|L4.4992|
001006  49e0              LDR      r1,|L4.5000|
001008  f9b00000          LDRSH    r0,[r0,#0]            ;1697  ; U_maxg
00100c  f9b11000          LDRSH    r1,[r1,#0]            ;1698  ; U_MAX
001010  ebc02040          RSB      r0,r0,r0,LSL #9       ;1697
001014  0040              LSLS     r0,r0,#1              ;1697
001016  fb90f0f1          SDIV     r0,r0,r1              ;1698
00101a  9000              STR      r0,[sp,#0]            ;1702
00101c  48d2              LDR      r0,|L4.4968|
00101e  49db              LDR      r1,|L4.5004|
001020  f9b00000          LDRSH    r0,[r0,#0]            ;1702  ; I_ug_temp
001024  f9b11000          LDRSH    r1,[r1,#0]            ;1703  ; I_MAX_IPS
001028  ebc02040          RSB      r0,r0,r0,LSL #9       ;1702
00102c  0040              LSLS     r0,r0,#1              ;1702
00102e  fb90f0f1          SDIV     r0,r0,r1              ;1703
001032  4681              MOV      r9,r0                 ;1703
001034  20ac              MOVS     r0,#0xac              ;1705
001036  f7fffffe          BL       lc640_read_int
00103a  f5a0412b          SUB      r1,r0,#0xab00         ;1705
00103e  39cd              SUBS     r1,r1,#0xcd           ;1705
001040  d107              BNE      |L4.4178|
001042  48cf              LDR      r0,|L4.4992|
001044  f9b00000          LDRSH    r0,[r0,#0]            ;1707  ; U_maxg
001048  f7fffffe          BL       find_U_curve
00104c  eb000080          ADD      r0,r0,r0,LSL #2       ;1707
001050  9000              STR      r0,[sp,#0]            ;1707
                  |L4.4178|
001052  20ae              MOVS     r0,#0xae              ;1710
001054  f7fffffe          BL       lc640_read_int
001058  f5a0412b          SUB      r1,r0,#0xab00         ;1710
00105c  39cd              SUBS     r1,r1,#0xcd           ;1710
00105e  d107              BNE      |L4.4208|
001060  48c1              LDR      r0,|L4.4968|
001062  f9b00000          LDRSH    r0,[r0,#0]            ;1712  ; I_ug_temp
001066  f7fffffe          BL       find_I_curve
00106a  eb000080          ADD      r0,r0,r0,LSL #2       ;1712
00106e  4681              MOV      r9,r0                 ;1712
                  |L4.4208|
001070  2000              MOVS     r0,#0                 ;1715
001072  f9b73000          LDRSH    r3,[r7,#0]            ;1307
001076  e038              B        |L4.4330|
                  |L4.4216|
001078  49bc              LDR      r1,|L4.4972|
00107a  8809              LDRH     r1,[r1,#0]            ;1717  ; REV_IS_ON
00107c  b141              CBZ      r1,|L4.4240|
00107e  49bc              LDR      r1,|L4.4976|
001080  8809              LDRH     r1,[r1,#0]            ;1717  ; AVT_REV_IS_ON
001082  b129              CBZ      r1,|L4.4240|
001084  49bb              LDR      r1,|L4.4980|
001086  7809              LDRB     r1,[r1,#0]            ;1717  ; proc_phase
001088  2901              CMP      r1,#1                 ;1717
00108a  d00e              BEQ      |L4.4266|
00108c  2903              CMP      r1,#3                 ;1717
00108e  d00c              BEQ      |L4.4266|
                  |L4.4240|
001090  9900              LDR      r1,[sp,#0]            ;1722
001092  b20a              SXTH     r2,r1                 ;1722
001094  f9ba1000          LDRSH    r1,[r10,#0]           ;1722  ; _xu_
001098  1852              ADDS     r2,r2,r1              ;1722
00109a  eb000180          ADD      r1,r0,r0,LSL #2       ;1722
00109e  eb041101          ADD      r1,r4,r1,LSL #4       ;1722
0010a2  62ca              STR      r2,[r1,#0x2c]         ;1723
0010a4  d50a              BPL      |L4.4284|
0010a6  62cd              STR      r5,[r1,#0x2c]         ;1723
0010a8  e00d              B        |L4.4294|
                  |L4.4266|
0010aa  eb000180          ADD      r1,r0,r0,LSL #2       ;1718
0010ae  eb041101          ADD      r1,r4,r1,LSL #4       ;1718
0010b2  62cd              STR      r5,[r1,#0x2c]         ;1719
0010b4  630d              STR      r5,[r1,#0x30]         ;1720
0010b6  f8818028          STRB     r8,[r1,#0x28]         ;1720
0010ba  e014              B        |L4.4326|
                  |L4.4284|
0010bc  f24037fe          MOV      r7,#0x3fe             ;1724
0010c0  42ba              CMP      r2,r7                 ;1724
0010c2  dd00              BLE      |L4.4294|
0010c4  62cf              STR      r7,[r1,#0x2c]         ;1724
                  |L4.4294|
0010c6  f9bb2000          LDRSH    r2,[r11,#0]           ;1725  ; _x_
0010ca  fa0ff789          SXTH     r7,r9                 ;1725
0010ce  18ba              ADDS     r2,r7,r2              ;1725
0010d0  630a              STR      r2,[r1,#0x30]         ;1726
0010d2  d501              BPL      |L4.4312|
0010d4  630d              STR      r5,[r1,#0x30]         ;1726
0010d6  e004              B        |L4.4322|
                  |L4.4312|
0010d8  f24037fe          MOV      r7,#0x3fe             ;1727
0010dc  42ba              CMP      r2,r7                 ;1727
0010de  dd00              BLE      |L4.4322|
0010e0  630f              STR      r7,[r1,#0x30]         ;1727
                  |L4.4322|
0010e2  f8815028          STRB     r5,[r1,#0x28]         ;1728
                  |L4.4326|
0010e6  1c40              ADDS     r0,r0,#1              ;1715
0010e8  b2c0              UXTB     r0,r0                 ;1715
                  |L4.4330|
0010ea  4298              CMP      r0,r3                 ;1715
0010ec  dbc4              BLT      |L4.4216|
                  |L4.4334|
0010ee  e1af              B        |L4.5200|
                  |L4.4336|
0010f0  49a7              LDR      r1,|L4.5008|
0010f2  f9b11000          LDRSH    r1,[r1,#0]            ;1740  ; load_U_
0010f6  2905              CMP      r1,#5                 ;1740
0010f8  dd02              BLE      |L4.4352|
0010fa  f8868008          STRB     r8,[r6,#8]            ;1740
0010fe  e000              B        |L4.4354|
                  |L4.4352|
001100  7235              STRB     r5,[r6,#8]            ;1741
                  |L4.4354|
001102  71f5              STRB     r5,[r6,#7]            ;1745
001104  79b1              LDRB     r1,[r6,#6]            ;1746  ; b1Hz_sh
001106  b391              CBZ      r1,|L4.4462|
001108  7a31              LDRB     r1,[r6,#8]            ;1746  ; bU_VALID
00110a  b381              CBZ      r1,|L4.4462|
00110c  f9b01000          LDRSH    r1,[r0,#0]            ;1748  ; load_I
001110  48a0              LDR      r0,|L4.5012|
001112  f9b00000          LDRSH    r0,[r0,#0]            ;1748  ; I_maxp
001116  4281              CMP      r1,r0                 ;1748
001118  da04              BGE      |L4.4388|
00111a  f8bb1000          LDRH     r1,[r11,#0]           ;1748  ; _x_
00111e  f1010101          ADD      r1,r1,#1              ;1748
001122  e004              B        |L4.4398|
                  |L4.4388|
001124  dd05              BLE      |L4.4402|
001126  f8bb1000          LDRH     r1,[r11,#0]           ;1749  ; _x_
00112a  f1a10101          SUB      r1,r1,#1              ;1749
                  |L4.4398|
00112e  f8ab1000          STRH     r1,[r11,#0]           ;1749
                  |L4.4402|
001132  2232              MOVS     r2,#0x32              ;1750
001134  4251              RSBS     r1,r2,#0              ;1750
001136  4890              LDR      r0,|L4.4984|
001138  f7fffffe          BL       gran
00113c  4894              LDR      r0,|L4.5008|
00113e  f9b01000          LDRSH    r1,[r0,#0]            ;1752  ; load_U_
001142  4895              LDR      r0,|L4.5016|
001144  f9b00000          LDRSH    r0,[r0,#0]            ;1752  ; U_up_temp
001148  4281              CMP      r1,r0                 ;1752
00114a  da04              BGE      |L4.4438|
00114c  f8ba1000          LDRH     r1,[r10,#0]           ;1752  ; _xu_
001150  f1010101          ADD      r1,r1,#1              ;1752
001154  e004              B        |L4.4448|
                  |L4.4438|
001156  dd05              BLE      |L4.4452|
001158  f8ba1000          LDRH     r1,[r10,#0]           ;1753  ; _xu_
00115c  f1a10101          SUB      r1,r1,#1              ;1753
                  |L4.4448|
001160  f8aa1000          STRH     r1,[r10,#0]           ;1753
                  |L4.4452|
001164  2232              MOVS     r2,#0x32              ;1754
001166  4251              RSBS     r1,r2,#0              ;1754
001168  4886              LDR      r0,|L4.4996|
00116a  f7fffffe          BL       gran
                  |L4.4462|
00116e  488a              LDR      r0,|L4.5016|
001170  f44f7161          MOV      r1,#0x384             ;1760
001174  f9b00000          LDRSH    r0,[r0,#0]            ;1760  ; U_up_temp
001178  4348              MULS     r0,r1,r0              ;1760
00117a  4983              LDR      r1,|L4.5000|
00117c  f9b11000          LDRSH    r1,[r1,#0]            ;1761  ; U_MAX
001180  fb90f0f1          SDIV     r0,r0,r1              ;1761
001184  3032              ADDS     r0,r0,#0x32           ;1762
001186  9000              STR      r0,[sp,#0]            ;1764
001188  20ac              MOVS     r0,#0xac              ;1764
00118a  f7fffffe          BL       lc640_read_int
00118e  f5a0412b          SUB      r1,r0,#0xab00         ;1764
001192  39cd              SUBS     r1,r1,#0xcd           ;1764
001194  d107              BNE      |L4.4518|
001196  4880              LDR      r0,|L4.5016|
001198  f9b00000          LDRSH    r0,[r0,#0]            ;1766  ; U_up_temp
00119c  f7fffffe          BL       find_U_curve
0011a0  eb000080          ADD      r0,r0,r0,LSL #2       ;1766
0011a4  9000              STR      r0,[sp,#0]            ;1766
                  |L4.4518|
0011a6  487b              LDR      r0,|L4.5012|
0011a8  4978              LDR      r1,|L4.5004|
0011aa  f9b00000          LDRSH    r0,[r0,#0]            ;1772  ; I_maxp
0011ae  f9b11000          LDRSH    r1,[r1,#0]            ;1773  ; I_MAX_IPS
0011b2  ebc02040          RSB      r0,r0,r0,LSL #9       ;1772
0011b6  0040              LSLS     r0,r0,#1              ;1772
0011b8  fb90f0f1          SDIV     r0,r0,r1              ;1773
0011bc  4681              MOV      r9,r0                 ;1773
0011be  20ae              MOVS     r0,#0xae              ;1775
0011c0  f7fffffe          BL       lc640_read_int
0011c4  f5a0412b          SUB      r1,r0,#0xab00         ;1775
0011c8  39cd              SUBS     r1,r1,#0xcd           ;1775
0011ca  d107              BNE      |L4.4572|
0011cc  4871              LDR      r0,|L4.5012|
0011ce  f9b00000          LDRSH    r0,[r0,#0]            ;1777  ; I_maxp
0011d2  f7fffffe          BL       find_I_curve
0011d6  eb000080          ADD      r0,r0,r0,LSL #2       ;1777
0011da  4681              MOV      r9,r0                 ;1777
                  |L4.4572|
0011dc  2000              MOVS     r0,#0                 ;1780
0011de  f9b73000          LDRSH    r3,[r7,#0]            ;1307
0011e2  e038              B        |L4.4694|
                  |L4.4580|
0011e4  4961              LDR      r1,|L4.4972|
0011e6  8809              LDRH     r1,[r1,#0]            ;1782  ; REV_IS_ON
0011e8  b141              CBZ      r1,|L4.4604|
0011ea  4961              LDR      r1,|L4.4976|
0011ec  8809              LDRH     r1,[r1,#0]            ;1782  ; AVT_REV_IS_ON
0011ee  b129              CBZ      r1,|L4.4604|
0011f0  4960              LDR      r1,|L4.4980|
0011f2  7809              LDRB     r1,[r1,#0]            ;1782  ; proc_phase
0011f4  2901              CMP      r1,#1                 ;1782
0011f6  d00e              BEQ      |L4.4630|
0011f8  2903              CMP      r1,#3                 ;1782
0011fa  d00c              BEQ      |L4.4630|
                  |L4.4604|
0011fc  9900              LDR      r1,[sp,#0]            ;1787
0011fe  b20a              SXTH     r2,r1                 ;1787
001200  f9ba1000          LDRSH    r1,[r10,#0]           ;1787  ; _xu_
001204  1852              ADDS     r2,r2,r1              ;1787
001206  eb000180          ADD      r1,r0,r0,LSL #2       ;1787
00120a  eb041101          ADD      r1,r4,r1,LSL #4       ;1787
00120e  62ca              STR      r2,[r1,#0x2c]         ;1788
001210  d50a              BPL      |L4.4648|
001212  62cd              STR      r5,[r1,#0x2c]         ;1788
001214  e00d              B        |L4.4658|
                  |L4.4630|
001216  eb000180          ADD      r1,r0,r0,LSL #2       ;1783
00121a  eb041101          ADD      r1,r4,r1,LSL #4       ;1783
00121e  62cd              STR      r5,[r1,#0x2c]         ;1784
001220  630d              STR      r5,[r1,#0x30]         ;1785
001222  f8818028          STRB     r8,[r1,#0x28]         ;1785
001226  e014              B        |L4.4690|
                  |L4.4648|
001228  f24037fe          MOV      r7,#0x3fe             ;1789
00122c  42ba              CMP      r2,r7                 ;1789
00122e  dd00              BLE      |L4.4658|
001230  62cf              STR      r7,[r1,#0x2c]         ;1789
                  |L4.4658|
001232  f9bb2000          LDRSH    r2,[r11,#0]           ;1790  ; _x_
001236  fa0ff789          SXTH     r7,r9                 ;1790
00123a  18ba              ADDS     r2,r7,r2              ;1790
00123c  630a              STR      r2,[r1,#0x30]         ;1791
00123e  d501              BPL      |L4.4676|
001240  630d              STR      r5,[r1,#0x30]         ;1791
001242  e004              B        |L4.4686|
                  |L4.4676|
001244  f24037fe          MOV      r7,#0x3fe             ;1792
001248  42ba              CMP      r2,r7                 ;1792
00124a  dd00              BLE      |L4.4686|
00124c  630f              STR      r7,[r1,#0x30]         ;1792
                  |L4.4686|
00124e  f8815028          STRB     r5,[r1,#0x28]         ;1793
                  |L4.4690|
001252  1c40              ADDS     r0,r0,#1              ;1780
001254  b2c0              UXTB     r0,r0                 ;1780
                  |L4.4694|
001256  4298              CMP      r0,r3                 ;1780
001258  dbc4              BLT      |L4.4580|
00125a  4950              LDR      r1,|L4.5020|
00125c  9800              LDR      r0,[sp,#0]            ;1805
00125e  8008              STRH     r0,[r1,#0]            ;1805
001260  494f              LDR      r1,|L4.5024|
001262  6ae0              LDR      r0,[r4,#0x2c]         ;1806  ; bps
001264  8008              STRH     r0,[r1,#0]            ;1806
001266  e0f3              B        |L4.5200|
                  |L4.4712|
001268  79b1              LDRB     r1,[r6,#6]            ;1818  ; b1Hz_sh
00126a  b3a1              CBZ      r1,|L4.4822|
00126c  494d              LDR      r1,|L4.5028|
00126e  7809              LDRB     r1,[r1,#0]            ;1819  ; bOFF
001270  bb89              CBNZ     r1,|L4.4822|
001272  494d              LDR      r1,|L4.5032|
001274  f9b00000          LDRSH    r0,[r0,#0]            ;1820  ; load_I
001278  f9b11000          LDRSH    r1,[r1,#0]            ;1820  ; CAP_WRK_CURR
00127c  eb010181          ADD      r1,r1,r1,LSL #2       ;1820
001280  ebb00f41          CMP      r0,r1,LSL #1          ;1820
001284  da06              BGE      |L4.4756|
001286  f8bb1000          LDRH     r1,[r11,#0]           ;1820  ; _x_
00128a  f1010101          ADD      r1,r1,#1              ;1820
00128e  f8ab1000          STRH     r1,[r11,#0]           ;1820
001292  e006              B        |L4.4770|
                  |L4.4756|
001294  dd05              BLE      |L4.4770|
001296  f8bb0000          LDRH     r0,[r11,#0]           ;1821  ; _x_
00129a  f1a00001          SUB      r0,r0,#1              ;1821
00129e  f8ab0000          STRH     r0,[r11,#0]           ;1821
                  |L4.4770|
0012a2  464a              MOV      r2,r9                 ;1822
0012a4  4629              MOV      r1,r5                 ;1822
0012a6  4834              LDR      r0,|L4.4984|
0012a8  f7fffffe          BL       gran
0012ac  2232              MOVS     r2,#0x32              ;1823
0012ae  4251              RSBS     r1,r2,#0              ;1823
0012b0  4831              LDR      r0,|L4.4984|
0012b2  f7fffffe          BL       gran
0012b6  483d              LDR      r0,|L4.5036|
0012b8  4930              LDR      r1,|L4.4988|
0012ba  f9b00000          LDRSH    r0,[r0,#0]            ;1825  ; CAP_MAX_VOLT
0012be  f9b11000          LDRSH    r1,[r1,#0]            ;1825  ; load_U
0012c2  eb000080          ADD      r0,r0,r0,LSL #2       ;1825
0012c6  ebb10f40          CMP      r1,r0,LSL #1          ;1825
0012ca  da05              BGE      |L4.4824|
0012cc  f8ba1000          LDRH     r1,[r10,#0]           ;1825  ; _xu_
0012d0  f1010101          ADD      r1,r1,#1              ;1825
0012d4  e005              B        |L4.4834|
                  |L4.4822|
0012d6  e010              B        |L4.4858|
                  |L4.4824|
0012d8  dd05              BLE      |L4.4838|
0012da  f8ba1000          LDRH     r1,[r10,#0]           ;1826  ; _xu_
0012de  f1a10101          SUB      r1,r1,#1              ;1826
                  |L4.4834|
0012e2  f8aa1000          STRH     r1,[r10,#0]           ;1826
                  |L4.4838|
0012e6  464a              MOV      r2,r9                 ;1827
0012e8  4629              MOV      r1,r5                 ;1827
0012ea  4823              LDR      r0,|L4.4984|
0012ec  f7fffffe          BL       gran
0012f0  2232              MOVS     r2,#0x32              ;1828
0012f2  4251              RSBS     r1,r2,#0              ;1828
0012f4  4823              LDR      r0,|L4.4996|
0012f6  f7fffffe          BL       gran
                  |L4.4858|
0012fa  482c              LDR      r0,|L4.5036|
0012fc  f24271ec          MOV      r1,#0x27ec            ;1833
001300  f9b00000          LDRSH    r0,[r0,#0]            ;1833  ; CAP_MAX_VOLT
001304  4348              MULS     r0,r1,r0              ;1833
001306  4920              LDR      r1,|L4.5000|
001308  f9b11000          LDRSH    r1,[r1,#0]            ;1834  ; U_MAX
00130c  fb90f0f1          SDIV     r0,r0,r1              ;1834
001310  9000              STR      r0,[sp,#0]            ;1838
001312  4825              LDR      r0,|L4.5032|
001314  f24271ec          MOV      r1,#0x27ec            ;1838
001318  f9b00000          LDRSH    r0,[r0,#0]            ;1838  ; CAP_WRK_CURR
00131c  4348              MULS     r0,r1,r0              ;1838
00131e  491b              LDR      r1,|L4.5004|
001320  f9b11000          LDRSH    r1,[r1,#0]            ;1839  ; I_MAX_IPS
001324  fb90f0f1          SDIV     r0,r0,r1              ;1839
001328  9001              STR      r0,[sp,#4]            ;1841
00132a  20ac              MOVS     r0,#0xac              ;1841
00132c  f7fffffe          BL       lc640_read_int
001330  f5a0412b          SUB      r1,r0,#0xab00         ;1841
001334  39cd              SUBS     r1,r1,#0xcd           ;1841
001336  d10a              BNE      |L4.4942|
001338  481c              LDR      r0,|L4.5036|
00133a  8800              LDRH     r0,[r0,#0]            ;1843  ; CAP_MAX_VOLT
00133c  eb000080          ADD      r0,r0,r0,LSL #2       ;1843
001340  0040              LSLS     r0,r0,#1              ;1843
001342  b200              SXTH     r0,r0                 ;1843
001344  f7fffffe          BL       find_U_curve
001348  eb000080          ADD      r0,r0,r0,LSL #2       ;1843
00134c  9000              STR      r0,[sp,#0]            ;1843
                  |L4.4942|
00134e  20ae              MOVS     r0,#0xae              ;1846
001350  f7fffffe          BL       lc640_read_int
001354  f5a0412b          SUB      r1,r0,#0xab00         ;1846
001358  39cd              SUBS     r1,r1,#0xcd           ;1846
00135a  d134              BNE      |L4.5062|
00135c  4812              LDR      r0,|L4.5032|
00135e  e028              B        |L4.5042|
                  |L4.4960|
                          DCD      CURR_FADE_IN
                  |L4.4964|
                          DCD      time_proc
                  |L4.4968|
                          DCD      I_ug_temp
                  |L4.4972|
                          DCD      REV_IS_ON
                  |L4.4976|
                          DCD      AVT_REV_IS_ON
                  |L4.4980|
                          DCD      proc_phase
                  |L4.4984|
                          DCD      _x_
                  |L4.4988|
                          DCD      load_U
                  |L4.4992|
                          DCD      U_maxg
                  |L4.4996|
                          DCD      _xu_
                  |L4.5000|
                          DCD      U_MAX
                  |L4.5004|
                          DCD      I_MAX_IPS
                  |L4.5008|
                          DCD      load_U_
                  |L4.5012|
                          DCD      I_maxp
                  |L4.5016|
                          DCD      U_up_temp
                  |L4.5020|
                          DCD      plazma_vol_u_0
                  |L4.5024|
                          DCD      plazma_vol_u_1
                  |L4.5028|
                          DCD      bOFF
                  |L4.5032|
                          DCD      CAP_WRK_CURR
                  |L4.5036|
                          DCD      CAP_MAX_VOLT
                  |L4.5040|
0013b0  e048              B        |L4.5188|
                  |L4.5042|
0013b2  8800              LDRH     r0,[r0,#0]            ;1848  ; CAP_WRK_CURR
0013b4  eb000080          ADD      r0,r0,r0,LSL #2       ;1848
0013b8  0040              LSLS     r0,r0,#1              ;1848
0013ba  b200              SXTH     r0,r0                 ;1848
0013bc  f7fffffe          BL       find_I_curve
0013c0  eb000080          ADD      r0,r0,r0,LSL #2       ;1848
0013c4  9001              STR      r0,[sp,#4]            ;1848
                  |L4.5062|
0013c6  2000              MOVS     r0,#0                 ;1853
0013c8  f9b72000          LDRSH    r2,[r7,#0]            ;1307
0013cc  e02d              B        |L4.5162|
                  |L4.5070|
0013ce  49ff              LDR      r1,|L4.6092|
0013d0  7809              LDRB     r1,[r1,#0]            ;1855  ; bOFF
0013d2  b141              CBZ      r1,|L4.5094|
0013d4  eb000180          ADD      r1,r0,r0,LSL #2       ;1856
0013d8  eb041101          ADD      r1,r4,r1,LSL #4       ;1856
0013dc  62cd              STR      r5,[r1,#0x2c]         ;1857
0013de  630d              STR      r5,[r1,#0x30]         ;1858
0013e0  f8818028          STRB     r8,[r1,#0x28]         ;1858
0013e4  e01f              B        |L4.5158|
                  |L4.5094|
0013e6  9900              LDR      r1,[sp,#0]            ;1860
0013e8  b20b              SXTH     r3,r1                 ;1860
0013ea  f9ba1000          LDRSH    r1,[r10,#0]           ;1860  ; _xu_
0013ee  185b              ADDS     r3,r3,r1              ;1860
0013f0  eb000180          ADD      r1,r0,r0,LSL #2       ;1860
0013f4  eb041101          ADD      r1,r4,r1,LSL #4       ;1860
0013f8  62cb              STR      r3,[r1,#0x2c]         ;1861
0013fa  d501              BPL      |L4.5120|
0013fc  62cd              STR      r5,[r1,#0x2c]         ;1861
0013fe  e003              B        |L4.5128|
                  |L4.5120|
001400  454b              CMP      r3,r9                 ;1862
001402  dd01              BLE      |L4.5128|
001404  f8c1902c          STR      r9,[r1,#0x2c]         ;1862
                  |L4.5128|
001408  9b01              LDR      r3,[sp,#4]            ;1863
00140a  b21f              SXTH     r7,r3                 ;1863
00140c  f9bb3000          LDRSH    r3,[r11,#0]           ;1863  ; _x_
001410  18fb              ADDS     r3,r7,r3              ;1863
001412  630b              STR      r3,[r1,#0x30]         ;1864
001414  d501              BPL      |L4.5146|
001416  630d              STR      r5,[r1,#0x30]         ;1864
001418  e003              B        |L4.5154|
                  |L4.5146|
00141a  454b              CMP      r3,r9                 ;1865
00141c  dd01              BLE      |L4.5154|
00141e  f8c19030          STR      r9,[r1,#0x30]         ;1865
                  |L4.5154|
001422  f8815028          STRB     r5,[r1,#0x28]         ;1866
                  |L4.5158|
001426  1c40              ADDS     r0,r0,#1              ;1853
001428  b2c0              UXTB     r0,r0                 ;1853
                  |L4.5162|
00142a  4290              CMP      r0,r2                 ;1853
00142c  dbcf              BLT      |L4.5070|
00142e  e00f              B        |L4.5200|
                  |L4.5168|
;;;1876   		{
;;;1877   		bps[i]._vol_u=0;
001430  eb000180          ADD      r1,r0,r0,LSL #2
001434  eb041101          ADD      r1,r4,r1,LSL #4
001438  1c40              ADDS     r0,r0,#1              ;1875
;;;1878   		bps[i]._vol_i=0;
00143a  62cd              STR      r5,[r1,#0x2c]
;;;1879   		bps[i]._flags_tu=1;
00143c  630d              STR      r5,[r1,#0x30]
00143e  f8813028          STRB     r3,[r1,#0x28]
001442  b2c0              UXTB     r0,r0                 ;1875
                  |L4.5188|
001444  4290              CMP      r0,r2                 ;1875
001446  dbf3              BLT      |L4.5168|
;;;1880   		}
;;;1881   	_x_=0;
001448  f8ab5000          STRH     r5,[r11,#0]
;;;1882   	_xu_=0;
00144c  f8aa5000          STRH     r5,[r10,#0]
                  |L4.5200|
;;;1883   	}
;;;1884   
;;;1885   //gran(&bps[0]._vol_u,10,1010);
;;;1886   //gran(&bps[0]._vol_i,10,1010);
;;;1887   
;;;1888   b1Hz_sh=0;
001450  71b5              STRB     r5,[r6,#6]
;;;1889   }
001452  e8bd9ffc          POP      {r2-r12,pc}
;;;1890   
                          ENDP

                  bps_drv PROC
;;;1899   //-----------------------------------------------
;;;1900   void bps_drv(char in)
001456  eb000180          ADD      r1,r0,r0,LSL #2
;;;1901   {
;;;1902   char temp;
;;;1903   
;;;1904   if (bps[in]._device!=dSRC) return;
00145a  48dd              LDR      r0,|L4.6096|
00145c  b510              PUSH     {r4,lr}               ;1901
00145e  eb001001          ADD      r0,r0,r1,LSL #4
001462  7801              LDRB     r1,[r0,#0]
001464  2903              CMP      r1,#3
001466  d172              BNE      |L4.5454|
;;;1905   temp=bps[in]._flags_tm;
001468  f890103e          LDRB     r1,[r0,#0x3e]
;;;1906   if(temp&(1<<AV_T))
00146c  078a              LSLS     r2,r1,#30
;;;1907   	{
;;;1908   	if(bps[in]._temp_av_cnt<1200) 
;;;1909   		{
;;;1910   		bps[in]._temp_av_cnt++;
;;;1911   		if(bps[in]._temp_av_cnt>=1200)
;;;1912   			{
;;;1913   			bps[in]._temp_av_cnt=1200;
;;;1914   		   	//if(!(bps[in]._av&(1<<0)))avar_bps_hndl(in,0,1);
;;;1915   			}
;;;1916   		}
;;;1917   	}
;;;1918   
;;;1919   else if(!(temp&(1<<AV_T)))
;;;1920   	{
;;;1921   	if(bps[in]._temp_av_cnt) 
00146e  f9b02042          LDRSH    r2,[r0,#0x42]
001472  d50c              BPL      |L4.5262|
001474  f44f6396          MOV      r3,#0x4b0             ;1908
001478  429a              CMP      r2,r3                 ;1908
00147a  da0d              BGE      |L4.5272|
00147c  1c52              ADDS     r2,r2,#1              ;1910
00147e  b212              SXTH     r2,r2                 ;1910
001480  f8a02042          STRH     r2,[r0,#0x42]         ;1910
001484  429a              CMP      r2,r3                 ;1911
001486  db07              BLT      |L4.5272|
001488  f8a03042          STRH     r3,[r0,#0x42]         ;1913
00148c  e004              B        |L4.5272|
                  |L4.5262|
00148e  b11a              CBZ      r2,|L4.5272|
;;;1922   		{
;;;1923   		bps[in]._temp_av_cnt--;
001490  f1a20201          SUB      r2,r2,#1
001494  f8a02042          STRH     r2,[r0,#0x42]
                  |L4.5272|
;;;1924   		if(!bps[in]._temp_av_cnt)
;;;1925   			{
;;;1926   			//if(bps[in]._av&(1<<0))avar_bps_hndl(in,0,0);
;;;1927   			}
;;;1928   		} 	
;;;1929   
;;;1930   	}
;;;1931   
;;;1932   if((temp&(1<<AVUMAX)))
001498  070a              LSLS     r2,r1,#28
;;;1933   	{
;;;1934   	if(bps[in]._umax_av_cnt<10) 
;;;1935   		{
;;;1936   		bps[in]._umax_av_cnt++;
;;;1937   		if(bps[in]._umax_av_cnt>=10)
;;;1938   			{ 
;;;1939   			bps[in]._umax_av_cnt=10;
;;;1940   			//if(!(bps[in]._av&(1<<1)))avar_bps_hndl(in,1,1);
;;;1941   		  	/*if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,1,1);
;;;1942   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;1943   				{
;;;1944   				apv_cnt[in,0]=APV_INIT;
;;;1945   				apv_cnt[in,1]=APV_INIT;
;;;1946   				apv_cnt[in,2]=APV_INIT;
;;;1947   				apv_flags[in]=afOFF;
;;;1948   				}				*/
;;;1949   						
;;;1950   			}
;;;1951   		} 
;;;1952   	}		
;;;1953   else if(!(temp&(1<<AVUMAX)))
;;;1954   	{
;;;1955   	if(bps[in]._umax_av_cnt>0) 
00149a  f9b02044          LDRSH    r2,[r0,#0x44]
00149e  f04f030a          MOV      r3,#0xa               ;1939
0014a2  f04f0400          MOV      r4,#0                 ;1908
0014a6  d50a              BPL      |L4.5310|
0014a8  2a0a              CMP      r2,#0xa               ;1934
0014aa  da13              BGE      |L4.5332|
0014ac  1c52              ADDS     r2,r2,#1              ;1936
0014ae  b212              SXTH     r2,r2                 ;1936
0014b0  f8a02044          STRH     r2,[r0,#0x44]         ;1936
0014b4  2a0a              CMP      r2,#0xa               ;1937
0014b6  db0d              BLT      |L4.5332|
0014b8  f8a03044          STRH     r3,[r0,#0x44]         ;1939
0014bc  e00a              B        |L4.5332|
                  |L4.5310|
0014be  2a00              CMP      r2,#0
0014c0  dd05              BLE      |L4.5326|
;;;1956   		{
;;;1957   		bps[in]._umax_av_cnt--;
0014c2  f1a20201          SUB      r2,r2,#1
0014c6  b212              SXTH     r2,r2
0014c8  f8a02044          STRH     r2,[r0,#0x44]
;;;1958   		if(bps[in]._umax_av_cnt==0)
0014cc  e002              B        |L4.5332|
                  |L4.5326|
;;;1959   			{
;;;1960   			bps[in]._umax_av_cnt=0;
;;;1961   			//avar_bps_hndl(in,1,0);
;;;1962   	 //		apv_cnt[in,0]=0;
;;;1963   	//		apv_cnt[in,1]=0;
;;;1964   	 //		apv_cnt[in,2]=0;			
;;;1965   			}
;;;1966   		}
;;;1967   	else if(bps[in]._umax_av_cnt<0) bps[in]._umax_av_cnt=0;		 
0014ce  da01              BGE      |L4.5332|
0014d0  f8a04044          STRH     r4,[r0,#0x44]
                  |L4.5332|
;;;1968   	}
;;;1969   
;;;1970   if(temp&(1<<AVUMIN))
0014d4  06ca              LSLS     r2,r1,#27
;;;1971   	{
;;;1972   	if(bps[in]._umin_av_cnt<10) 
;;;1973   		{
;;;1974   		bps[in]._umin_av_cnt++;
;;;1975   		if(bps[in]._umin_av_cnt>=10)
;;;1976   			{ 
;;;1977   			bps[in]._umin_av_cnt=10;
;;;1978   			//if(!(bps[in]._av&(1<<2)))avar_bps_hndl(in,2,1);
;;;1979   		  	/*	if((K[APV]!=ON)||((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afOFF)))avar_s_hndl(in,2,1);
;;;1980   			if((apv_cnt[in,0]==0)&&(apv_cnt[in,1]==0)&&(apv_cnt[in,2]==0)&&(apv_flags[in]==afON))
;;;1981   				{
;;;1982   				apv_cnt[in,0]=APV_INIT;
;;;1983   				apv_cnt[in,1]=APV_INIT;
;;;1984   				apv_cnt[in,2]=APV_INIT;
;;;1985   				apv_flags[in]=afOFF;
;;;1986   				}*/				
;;;1987   			}
;;;1988   		} 
;;;1989   	}	
;;;1990   	
;;;1991   else if(!(temp&(1<<AVUMIN)))
;;;1992   	{
;;;1993   	if(bps[in]._umin_av_cnt) 
0014d6  f9b02046          LDRSH    r2,[r0,#0x46]
0014da  d50a              BPL      |L4.5362|
0014dc  2a0a              CMP      r2,#0xa               ;1972
0014de  da0d              BGE      |L4.5372|
0014e0  1c52              ADDS     r2,r2,#1              ;1974
0014e2  b212              SXTH     r2,r2                 ;1974
0014e4  f8a02046          STRH     r2,[r0,#0x46]         ;1974
0014e8  2a0a              CMP      r2,#0xa               ;1975
0014ea  db07              BLT      |L4.5372|
0014ec  f8a03046          STRH     r3,[r0,#0x46]         ;1977
0014f0  e004              B        |L4.5372|
                  |L4.5362|
0014f2  b11a              CBZ      r2,|L4.5372|
;;;1994   		{
;;;1995   		bps[in]._umin_av_cnt--;
0014f4  1e52              SUBS     r2,r2,#1
0014f6  b212              SXTH     r2,r2
0014f8  f8a02046          STRH     r2,[r0,#0x46]
                  |L4.5372|
;;;1996   		if(bps[in]._umin_av_cnt==0)
;;;1997   			{
;;;1998   			bps[in]._umin_av_cnt=0;
;;;1999   		//	avar_bps_hndl(in,2,0);
;;;2000   		//	apv_cnt[in,0]=0;
;;;2001   		//	apv_cnt[in,1]=0;
;;;2002   		//	apv_cnt[in,2]=0;
;;;2003   			}
;;;2004   		}
;;;2005   	else if(bps[in]._umin_av_cnt>10)bps[in]._umin_av_cnt--;	 
;;;2006   	}
;;;2007   
;;;2008   //bps[in]._state=bsOFF;
;;;2009   
;;;2010   if (bps[in]._av&0x0f)					bps[in]._state=bsAV;
0014fc  7842              LDRB     r2,[r0,#1]
0014fe  0712              LSLS     r2,r2,#28
001500  d001              BEQ      |L4.5382|
001502  2104              MOVS     r1,#4
001504  e00f              B        |L4.5414|
                  |L4.5382|
;;;2011   else if ( (net_av) && (bps[in]._cnt>20)/*&& 
001506  4ab3              LDR      r2,|L4.6100|
001508  7812              LDRB     r2,[r2,#0]  ; net_av
00150a  b122              CBZ      r2,|L4.5398|
00150c  78c2              LDRB     r2,[r0,#3]
00150e  2a14              CMP      r2,#0x14
001510  d901              BLS      |L4.5398|
;;;2012   		(bps[in]._Uii<200)*/)				bps[in]._state=bsOFF_AV_NET;
001512  2105              MOVS     r1,#5
001514  e007              B        |L4.5414|
                  |L4.5398|
;;;2013   else if (bps[in]._flags_tm&BIN8(100000))	bps[in]._state=bsRDY;
001516  0689              LSLS     r1,r1,#26
001518  d501              BPL      |L4.5406|
00151a  2102              MOVS     r1,#2
00151c  e003              B        |L4.5414|
                  |L4.5406|
;;;2014   else if (bps[in]._cnt<20)				bps[in]._state=bsWRK;
00151e  78c1              LDRB     r1,[r0,#3]
001520  2914              CMP      r1,#0x14
001522  d201              BCS      |L4.5416|
001524  2101              MOVS     r1,#1
                  |L4.5414|
001526  7081              STRB     r1,[r0,#2]
                  |L4.5416|
;;;2015   
;;;2016   
;;;2017   
;;;2018   //else if(bps[in]._flags_tm&BIN8(100000)) bps[in]._state=ssBL;
;;;2019   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))bps[in]._state=ssWRK;
;;;2020   //else bps[0]._state=ssNOT;
;;;2021   
;;;2022   //bps[in]._is_ready=0;
;;;2023   //bps[in]._is_wrk=0;
;;;2024   //if(bps[in]._av_net) bps[in]._flags_bp='N';// не подключен
;;;2025   //else if(bps[in]._av_u_max) bps[in]._flags_bp='P';// завышено напряжение(u_.av_.bAS1T)) bps_state[0]=ssAV;
;;;2026   //else if(bps[in]._av_u_min) bps[in]._flags_bp='M';// занижено напряжение
;;;2027   //else if(bps[in]._av_temper) bps[in]._flags_bp='T';// температура
;;;2028   //else if(bps[in]._flags_tm&BIN8(100000)) 
;;;2029   //	{
;;;2030   //	bps[in]._flags_bp='B';// заблокирован
;;;2031   //	bps[in]._is_ready=1;
;;;2032   //	}
;;;2033   //else if((!(bps[in]._flags_tm&BIN8(100000)))&&(net_U>100))
;;;2034   //     {
;;;2035   //     bps[in]._flags_bp='W';// работает
;;;2036   //     bps[in]._is_ready=1;
;;;2037   //     bps[in]._is_wrk=1;
;;;2038        
;;;2039   //     }
;;;2040   //else bps[in]._is_ready=1;     
;;;2041   
;;;2042   
;;;2043   
;;;2044   
;;;2045   
;;;2046   /*
;;;2047   bps[in]._flags_tu&=BIN8(11111110);
;;;2048   if(bps[in]._ist_blok_cnt)
;;;2049   	{
;;;2050   	bps[in]._ist_blok_cnt--;
;;;2051   	bps[in]._flags_tu|=BIN8(1);
;;;2052   	}
;;;2053   
;;;2054   	   */ 
;;;2055   
;;;2056   //Пересброс БПСа при потере связи
;;;2057   if(bps[in]._cnt>=10) bps[in]._flags_tu|=BIN8(10000000);
001528  78c1              LDRB     r1,[r0,#3]
00152a  290a              CMP      r1,#0xa
;;;2058   else bps[in]._flags_tu&=BIN8(1111111);
00152c  f8901028          LDRB     r1,[r0,#0x28]
001530  d302              BCC      |L4.5432|
001532  f0410180          ORR      r1,r1,#0x80           ;2057
001536  e001              B        |L4.5436|
                  |L4.5432|
001538  f001017f          AND      r1,r1,#0x7f
                  |L4.5436|
00153c  f8801028          STRB     r1,[r0,#0x28]
;;;2059   	
;;;2060   bps[in]._vol_u=cntrl_stat_U;	
001540  49a5              LDR      r1,|L4.6104|
001542  f9b1200c          LDRSH    r2,[r1,#0xc]  ; cntrl_stat_U
;;;2061   bps[in]._vol_i=cntrl_stat_I;
001546  62c2              STR      r2,[r0,#0x2c]
001548  f9b1100e          LDRSH    r1,[r1,#0xe]  ; cntrl_stat_I
00154c  6301              STR      r1,[r0,#0x30]
                  |L4.5454|
;;;2062    
;;;2063   }
00154e  bd10              POP      {r4,pc}
;;;2064   
                          ENDP

                  volt_contr_hndl PROC
;;;2077   //-----------------------------------------------
;;;2078   void volt_contr_hndl(void)
001550  e92d47f0          PUSH     {r4-r10,lr}
;;;2079   {
;;;2080   if(work_stat==wsOFF)
001554  48a1              LDR      r0,|L4.6108|
;;;2081   	{
;;;2082   	cnt_volt_contr=0;
;;;2083   	}
;;;2084   else 
;;;2085   	{
;;;2086   	if(cnt_volt_contr<(T_DEL_REL_VOLT_START*10))
001556  4ea2              LDR      r6,|L4.6112|
001558  4c9f              LDR      r4,|L4.6104|
00155a  7800              LDRB     r0,[r0,#0]            ;2080  ; work_stat
00155c  2500              MOVS     r5,#0                 ;2080
00155e  b310              CBZ      r0,|L4.5542|
001560  f9b60000          LDRSH    r0,[r6,#0]  ; T_DEL_REL_VOLT_START
001564  eb000180          ADD      r1,r0,r0,LSL #2
001568  f9b40020          LDRSH    r0,[r4,#0x20]  ; cnt_volt_contr
00156c  ebb00f41          CMP      r0,r1,LSL #1
001570  da01              BGE      |L4.5494|
;;;2087   		{
;;;2088   		cnt_volt_contr++;
001572  1c40              ADDS     r0,r0,#1
001574  8420              STRH     r0,[r4,#0x20]
                  |L4.5494|
;;;2089   		}
;;;2090   	}
;;;2091   
;;;2092   	
;;;2093   	if(load_U>REL_VOLT_UMIN*10)
001576  489b              LDR      r0,|L4.6116|
001578  f8df826c          LDR      r8,|L4.6120|
;;;2094   		{
;;;2095   		cnt_rel_volt_umin++;
;;;2096   		gran(&cnt_rel_volt_umin,0,30000);
00157c  f2475a30          MOV      r10,#0x7530
001580  f9b00000          LDRSH    r0,[r0,#0]            ;2093  ; REL_VOLT_UMIN
001584  eb000180          ADD      r1,r0,r0,LSL #2       ;2093
001588  f9b80000          LDRSH    r0,[r8,#0]            ;2093  ; load_U
00158c  ebb00f41          CMP      r0,r1,LSL #1          ;2093
001590  dd0b              BLE      |L4.5546|
001592  8c60              LDRH     r0,[r4,#0x22]         ;2095  ; cnt_rel_volt_umin
001594  4652              MOV      r2,r10
001596  1c40              ADDS     r0,r0,#1              ;2095
001598  8460              STRH     r0,[r4,#0x22]         ;2095
00159a  488f              LDR      r0,|L4.6104|
00159c  2100              MOVS     r1,#0
00159e  3022              ADDS     r0,r0,#0x22
0015a0  f7fffffe          BL       gran
0015a4  e002              B        |L4.5548|
                  |L4.5542|
0015a6  8425              STRH     r5,[r4,#0x20]         ;2082
0015a8  e7e5              B        |L4.5494|
                  |L4.5546|
;;;2097   		}
;;;2098   	else cnt_rel_volt_umin=0;
0015aa  8465              STRH     r5,[r4,#0x22]
                  |L4.5548|
;;;2099   	if((cnt_rel_volt_umin>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_DOWN=1;
0015ac  f8df923c          LDR      r9,|L4.6124|
0015b0  2701              MOVS     r7,#1
0015b2  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
0015b6  eb000180          ADD      r1,r0,r0,LSL #2
0015ba  f9b40022          LDRSH    r0,[r4,#0x22]  ; cnt_rel_volt_umin
0015be  ebb00f41          CMP      r0,r1,LSL #1
0015c2  db0a              BLT      |L4.5594|
0015c4  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
0015c8  f9b42020          LDRSH    r2,[r4,#0x20]  ; cnt_volt_contr
0015cc  eb010181          ADD      r1,r1,r1,LSL #2
0015d0  ebb20f41          CMP      r2,r1,LSL #1
0015d4  db01              BLT      |L4.5594|
0015d6  7267              STRB     r7,[r4,#9]
0015d8  e001              B        |L4.5598|
                  |L4.5594|
;;;2100   	else if(cnt_rel_volt_umin==0)							  							bVOLT_IS_NOT_DOWN=0;
0015da  b900              CBNZ     r0,|L4.5598|
0015dc  7265              STRB     r5,[r4,#9]
                  |L4.5598|
;;;2101   
;;;2102   	if(load_U<REL_VOLT_UMAX*10)
0015de  4884              LDR      r0,|L4.6128|
0015e0  f9b00000          LDRSH    r0,[r0,#0]  ; REL_VOLT_UMAX
0015e4  eb000180          ADD      r1,r0,r0,LSL #2
0015e8  f9b80000          LDRSH    r0,[r8,#0]  ; load_U
0015ec  ebb00f41          CMP      r0,r1,LSL #1
0015f0  da09              BGE      |L4.5638|
;;;2103   		{
;;;2104   		cnt_rel_volt_umax++;
0015f2  8ca0              LDRH     r0,[r4,#0x24]  ; cnt_rel_volt_umax
;;;2105   		gran(&cnt_rel_volt_umax,0,30000);
0015f4  4652              MOV      r2,r10
0015f6  1c40              ADDS     r0,r0,#1              ;2104
0015f8  84a0              STRH     r0,[r4,#0x24]         ;2104
0015fa  4877              LDR      r0,|L4.6104|
0015fc  2100              MOVS     r1,#0
0015fe  3024              ADDS     r0,r0,#0x24
001600  f7fffffe          BL       gran
001604  e000              B        |L4.5640|
                  |L4.5638|
;;;2106   		}
;;;2107   	else cnt_rel_volt_umax=0;
001606  84a5              STRH     r5,[r4,#0x24]
                  |L4.5640|
;;;2108   	if((cnt_rel_volt_umax>=T_DEL_REL_VOLT_WRK*10)&&(cnt_volt_contr>=(T_DEL_REL_VOLT_START*10))) 	bVOLT_IS_NOT_UP=1;
001608  f9b90000          LDRSH    r0,[r9,#0]  ; T_DEL_REL_VOLT_WRK
00160c  eb000180          ADD      r1,r0,r0,LSL #2
001610  f9b40024          LDRSH    r0,[r4,#0x24]  ; cnt_rel_volt_umax
001614  ebb00f41          CMP      r0,r1,LSL #1
001618  db0a              BLT      |L4.5680|
00161a  f9b61000          LDRSH    r1,[r6,#0]  ; T_DEL_REL_VOLT_START
00161e  f9b42020          LDRSH    r2,[r4,#0x20]  ; cnt_volt_contr
001622  eb010181          ADD      r1,r1,r1,LSL #2
001626  ebb20f41          CMP      r2,r1,LSL #1
00162a  db01              BLT      |L4.5680|
00162c  72a7              STRB     r7,[r4,#0xa]
00162e  e002              B        |L4.5686|
                  |L4.5680|
;;;2109   	else if(cnt_rel_volt_umax==0)							  							bVOLT_IS_NOT_UP=0;
001630  b130              CBZ      r0,|L4.5696|
;;;2110   	
;;;2111   	if(bVOLT_IS_NOT_UP && bVOLT_IS_NOT_DOWN) bVOLT_IS_NORM=1;
001632  7aa0              LDRB     r0,[r4,#0xa]  ; bVOLT_IS_NOT_UP
001634  b128              CBZ      r0,|L4.5698|
                  |L4.5686|
001636  7a60              LDRB     r0,[r4,#9]  ; bVOLT_IS_NOT_DOWN
001638  b118              CBZ      r0,|L4.5698|
00163a  72e7              STRB     r7,[r4,#0xb]
                  |L4.5692|
;;;2112   	else bVOLT_IS_NORM=0;
;;;2113   
;;;2114   
;;;2115   }
00163c  e8bd87f0          POP      {r4-r10,pc}
                  |L4.5696|
001640  72a5              STRB     r5,[r4,#0xa]          ;2109
                  |L4.5698|
001642  72e5              STRB     r5,[r4,#0xb]          ;2112
001644  e7fa              B        |L4.5692|
;;;2116   
                          ENDP

                  current_stab_hndl PROC
;;;2117   //-----------------------------------------------
;;;2118   void current_stab_hndl(void)
001646  e92d5ff0          PUSH     {r4-r12,lr}
;;;2119   {
;;;2120   
;;;2121   if(work_stat==wsPS)
00164a  4864              LDR      r0,|L4.6108|
;;;2122   	{
;;;2123   	delta_U_abs=abs_pal(load_U-U_up);
00164c  f8df81a4          LDR      r8,|L4.6132|
;;;2124   	delta_U_rel=(delta_U_abs*100)/U_up;
;;;2125   
;;;2126   	delta_I_abs=abs_pal(load_I-I_maxp);
001650  f8dfb1a4          LDR      r11,|L4.6136|
001654  7801              LDRB     r1,[r0,#0]            ;2121  ; work_stat
001656  4864              LDR      r0,|L4.6120|
001658  f8dfa1a0          LDR      r10,|L4.6140|
00165c  4d68              LDR      r5,|L4.6144|
00165e  f9b00000          LDRSH    r0,[r0,#0]            ;2123
;;;2127   	delta_I_rel=(delta_I_abs*100)/I_maxp;
001662  4e68              LDR      r6,|L4.6148|
;;;2128   	}
;;;2129   
;;;2130   else if(work_stat==wsGS)
;;;2131   	{
;;;2132   	delta_U_abs=abs_pal(load_U-U_maxg);
;;;2133   	delta_U_rel=(delta_U_abs*100)/U_maxg;
;;;2134   
;;;2135   	delta_I_abs=abs_pal(load_I-I_ug_temp);
;;;2136   	delta_I_rel=(delta_I_abs*100)/I_ug_temp;
;;;2137   	}
;;;2138   else 
;;;2139   	{
;;;2140   	cnt_del_rel=0;
001664  2700              MOVS     r7,#0
001666  4c68              LDR      r4,|L4.6152|
001668  2902              CMP      r1,#2                 ;2121
00166a  d011              BEQ      |L4.5776|
00166c  2901              CMP      r1,#1                 ;2130
00166e  d025              BEQ      |L4.5820|
001670  8027              STRH     r7,[r4,#0]
                  |L4.5746|
;;;2141   	}
;;;2142   
;;;2143   if((delta_U_rel>DELT_REL_CURR_U)&&(delta_I_rel<DELT_REL_CURR_I))
001672  4966              LDR      r1,|L4.6156|
001674  6828              LDR      r0,[r5,#0]  ; delta_U_rel
001676  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_U
00167a  4288              CMP      r0,r1
00167c  dd43              BLE      |L4.5894|
00167e  4964              LDR      r1,|L4.6160|
001680  6830              LDR      r0,[r6,#0]  ; delta_I_rel
001682  f9b11000          LDRSH    r1,[r1,#0]  ; DELT_REL_CURR_I
001686  4288              CMP      r0,r1
001688  da3d              BGE      |L4.5894|
;;;2144   	{
;;;2145   	cnt_del_rel++;
00168a  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
00168c  1c40              ADDS     r0,r0,#1
00168e  e03c              B        |L4.5898|
                  |L4.5776|
001690  f8df9180          LDR      r9,|L4.6164|
001694  f8b91000          LDRH     r1,[r9,#0]            ;2123  ; U_up
001698  1a40              SUBS     r0,r0,r1              ;2123
00169a  b200              SXTH     r0,r0                 ;2123
00169c  f7fffffe          BL       abs_pal
0016a0  f8c80000          STR      r0,[r8,#0]            ;2124  ; delta_U_abs
0016a4  2164              MOVS     r1,#0x64              ;2124
0016a6  4348              MULS     r0,r1,r0              ;2124
0016a8  f9b91000          LDRSH    r1,[r9,#0]            ;2124  ; U_up
0016ac  f8df8168          LDR      r8,|L4.6168|
0016b0  fb90f0f1          SDIV     r0,r0,r1              ;2124
0016b4  6028              STR      r0,[r5,#0]            ;2126  ; delta_U_rel
0016b6  f8bb1000          LDRH     r1,[r11,#0]           ;2126  ; load_I
0016ba  e014              B        |L4.5862|
                  |L4.5820|
0016bc  f8df915c          LDR      r9,|L4.6172|
0016c0  f8b91000          LDRH     r1,[r9,#0]            ;2132  ; U_maxg
0016c4  1a40              SUBS     r0,r0,r1              ;2132
0016c6  b200              SXTH     r0,r0                 ;2132
0016c8  f7fffffe          BL       abs_pal
0016cc  f8c80000          STR      r0,[r8,#0]            ;2133  ; delta_U_abs
0016d0  2164              MOVS     r1,#0x64              ;2133
0016d2  4348              MULS     r0,r1,r0              ;2133
0016d4  f9b91000          LDRSH    r1,[r9,#0]            ;2133  ; U_maxg
0016d8  f8df8144          LDR      r8,|L4.6176|
0016dc  fb90f0f1          SDIV     r0,r0,r1              ;2133
0016e0  6028              STR      r0,[r5,#0]            ;2135  ; delta_U_rel
0016e2  f8bb1000          LDRH     r1,[r11,#0]           ;2135  ; load_I
                  |L4.5862|
0016e6  f8b80000          LDRH     r0,[r8,#0]            ;2135  ; I_ug_temp
0016ea  1a08              SUBS     r0,r1,r0              ;2135
0016ec  b200              SXTH     r0,r0                 ;2135
0016ee  f7fffffe          BL       abs_pal
0016f2  2164              MOVS     r1,#0x64              ;2136
0016f4  f8ca0000          STR      r0,[r10,#0]           ;2136  ; delta_I_abs
0016f8  4348              MULS     r0,r1,r0              ;2136
0016fa  f9b81000          LDRSH    r1,[r8,#0]            ;2136  ; I_ug_temp
0016fe  fb90f0f1          SDIV     r0,r0,r1              ;2136
001702  6030              STR      r0,[r6,#0]            ;2136  ; delta_I_rel
001704  e7b5              B        |L4.5746|
                  |L4.5894|
;;;2146   	}
;;;2147   else
;;;2148   	{
;;;2149   	cnt_del_rel--;
001706  8820              LDRH     r0,[r4,#0]  ; cnt_del_rel
001708  1e40              SUBS     r0,r0,#1
                  |L4.5898|
;;;2150   	}
;;;2151   
;;;2152   gran(&cnt_del_rel,0,(T_DEL_REL_CURR_WRK*10)+10);
00170a  4d46              LDR      r5,|L4.6180|
00170c  8020              STRH     r0,[r4,#0]            ;2149
00170e  210a              MOVS     r1,#0xa
001710  8828              LDRH     r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
001712  eb000080          ADD      r0,r0,r0,LSL #2
001716  eb010040          ADD      r0,r1,r0,LSL #1
00171a  b202              SXTH     r2,r0
00171c  2100              MOVS     r1,#0
00171e  483a              LDR      r0,|L4.6152|
001720  f7fffffe          BL       gran
;;;2153   
;;;2154   if(work_stat==wsOFF) cnt_del_rel=0;
001724  482d              LDR      r0,|L4.6108|
001726  7800              LDRB     r0,[r0,#0]  ; work_stat
001728  b900              CBNZ     r0,|L4.5932|
00172a  8027              STRH     r7,[r4,#0]
                  |L4.5932|
;;;2155   
;;;2156   
;;;2157   if ( (time_proc>=(T_DEL_REL_CURR_START)) &&
00172c  483e              LDR      r0,|L4.6184|
00172e  493f              LDR      r1,|L4.6188|
;;;2158   	(cnt_del_rel>(T_DEL_REL_CURR_WRK*10)) )
;;;2159   	{
;;;2160   	bCURRENT_STAB=1;
001730  4a3f              LDR      r2,|L4.6192|
001732  6800              LDR      r0,[r0,#0]            ;2157  ; time_proc
001734  f9b11000          LDRSH    r1,[r1,#0]            ;2157  ; T_DEL_REL_CURR_START
001738  4288              CMP      r0,r1                 ;2157
00173a  db0a              BLT      |L4.5970|
00173c  f9b53000          LDRSH    r3,[r5,#0]            ;2158  ; T_DEL_REL_CURR_WRK
001740  f9b46000          LDRSH    r6,[r4,#0]            ;2158  ; cnt_del_rel
001744  eb030383          ADD      r3,r3,r3,LSL #2       ;2158
001748  ebb60f43          CMP      r6,r3,LSL #1          ;2158
00174c  dd01              BLE      |L4.5970|
00174e  2301              MOVS     r3,#1
001750  7013              STRB     r3,[r2,#0]
                  |L4.5970|
;;;2161   	}
;;;2162   if ( (time_proc<(T_DEL_REL_CURR_START)) ||
001752  4288              CMP      r0,r1
001754  db08              BLT      |L4.5992|
;;;2163   	(cnt_del_rel<=(T_DEL_REL_CURR_WRK*10)) )
001756  f9b50000          LDRSH    r0,[r5,#0]  ; T_DEL_REL_CURR_WRK
00175a  f9b41000          LDRSH    r1,[r4,#0]  ; cnt_del_rel
00175e  eb000080          ADD      r0,r0,r0,LSL #2
001762  ebb10f40          CMP      r1,r0,LSL #1
001766  dc00              BGT      |L4.5994|
                  |L4.5992|
;;;2164   	{
;;;2165   	bCURRENT_STAB=0;
001768  7017              STRB     r7,[r2,#0]
                  |L4.5994|
;;;2166   	}
;;;2167   
;;;2168   /*
;;;2169   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
;;;2170   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
;;;2171   //SET_REG(LPC_GPIO0->FIOSET,1,5,1);
;;;2172   
;;;2173   if(RELE_LOG_CURR==0)
;;;2174   	{
;;;2175   	SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2176   	}
;;;2177   else if(RELE_LOG_CURR==1)
;;;2178   	{
;;;2179   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2180   	else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2181   	}
;;;2182   else
;;;2183   	{
;;;2184   	if(bCURRENT_STAB==0)SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
;;;2185   	else SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
;;;2186   	}*/
;;;2187   
;;;2188   }
00176a  e8bd9ff0          POP      {r4-r12,pc}
;;;2189   
                          ENDP

                  rele_hndl PROC
;;;2213   //-----------------------------------------------
;;;2214   void rele_hndl(void)
00176e  e92d4ff0          PUSH     {r4-r11,lr}
;;;2215   {
;;;2216   //Реле1
;;;2217   if(RELE_FUNC[0]==0)rele_stat[0]=rsOFF; 		//Выключено
;;;2218   else if(RELE_FUNC[0]==1)					//Реверс
;;;2219   	{
;;;2220   	if(work_stat==wsCAP) 
001772  481a              LDR      r0,|L4.6108|
;;;2221   		{
;;;2222   		if(bRAZR) rele_stat[0]=rsOFF;
;;;2223   		else 	rele_stat[0]=rsON;
;;;2224   		} 
;;;2225   	else 
;;;2226   		{
;;;2227   		if(REV_STAT==rsREW)	rele_stat[0]=rsOFF;
;;;2228   		else 			rele_stat[0]=rsON;
;;;2229   		}
;;;2230   	}
;;;2231   else if(RELE_FUNC[0]==2)					//Токоограничение
;;;2232   	{
;;;2233   	if(RELE_LOG_CURR==0)
001774  4b32              LDR      r3,|L4.6208|
001776  f8dfe0bc          LDR      lr,|L4.6196|
00177a  f890c000          LDRB     r12,[r0,#0]           ;2220
00177e  482e              LDR      r0,|L4.6200|
001780  f9b36000          LDRSH    r6,[r3,#0]
;;;2234   		{
;;;2235   		if(bCURRENT_STAB==0)	rele_stat[0]=rsON;
;;;2236   		else 				rele_stat[0]=rsOFF;
;;;2237   		}
;;;2238   	else if(RELE_LOG_CURR==1)
;;;2239   		{
;;;2240   		if(bCURRENT_STAB==0)	rele_stat[0]=rsOFF;
;;;2241   		else 				rele_stat[0]=rsON;
;;;2242   		}
;;;2243   	}									
;;;2244   else if(RELE_FUNC[0]==3)					//Напряжение в норме
;;;2245   	{
;;;2246   	if(RELE_LOG_VOLT==0)
001784  4b2f              LDR      r3,|L4.6212|
001786  7800              LDRB     r0,[r0,#0]            ;2222
001788  f9be4000          LDRSH    r4,[lr,#0]            ;2217  ; RELE_FUNC
00178c  4682              MOV      r10,r0                ;2222
00178e  482b              LDR      r0,|L4.6204|
001790  2100              MOVS     r1,#0                 ;2217
001792  f9b33000          LDRSH    r3,[r3,#0]
001796  7800              LDRB     r0,[r0,#0]            ;2227
001798  4683              MOV      r11,r0                ;2227
00179a  4825              LDR      r0,|L4.6192|
00179c  7805              LDRB     r5,[r0,#0]            ;2235
;;;2247   		{
;;;2248   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsON;
00179e  480e              LDR      r0,|L4.6104|
0017a0  7ac7              LDRB     r7,[r0,#0xb]
;;;2249   		else 				rele_stat[0]=rsOFF;
;;;2250   		}
;;;2251   	else if(RELE_LOG_VOLT==1)
;;;2252   		{
;;;2253   		if(bVOLT_IS_NORM==0)	rele_stat[0]=rsOFF;
;;;2254   		else 				rele_stat[0]=rsON;
;;;2255   		}
;;;2256   	}
;;;2257   else if(RELE_FUNC[0]==4)					//Напряжение не выше
;;;2258   	{
;;;2259   	if(RELE_LOG_VOLT==0)
;;;2260   		{
;;;2261   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsON;
0017a2  f890800a          LDRB     r8,[r0,#0xa]
;;;2262   		else 				rele_stat[0]=rsOFF;
;;;2263   		}
;;;2264   	else if(RELE_LOG_VOLT==1)
;;;2265   		{
;;;2266   		if(bVOLT_IS_NOT_UP==0)	rele_stat[0]=rsOFF;
;;;2267   		else 				rele_stat[0]=rsON;
;;;2268   		}
;;;2269   	}
;;;2270   else if(RELE_FUNC[0]==5)					//Напряжение не ниже
;;;2271   	{
;;;2272   	if(RELE_LOG_VOLT==0)
;;;2273   		{
;;;2274   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsON;
0017a6  7a40              LDRB     r0,[r0,#9]
0017a8  4681              MOV      r9,r0
0017aa  480b              LDR      r0,|L4.6104|
0017ac  3026              ADDS     r0,r0,#0x26           ;2217
0017ae  2201              MOVS     r2,#1                 ;2217
0017b0  b154              CBZ      r4,|L4.6088|
0017b2  2c01              CMP      r4,#1                 ;2218
0017b4  d048              BEQ      |L4.6216|
0017b6  2c02              CMP      r4,#2                 ;2231
0017b8  d051              BEQ      |L4.6238|
0017ba  2c03              CMP      r4,#3                 ;2244
0017bc  d057              BEQ      |L4.6254|
0017be  2c04              CMP      r4,#4                 ;2257
0017c0  d05d              BEQ      |L4.6270|
0017c2  2c05              CMP      r4,#5                 ;2270
0017c4  d067              BEQ      |L4.6294|
0017c6  e072              B        |L4.6318|
                  |L4.6088|
0017c8  e04e              B        |L4.6248|
0017ca  0000              DCW      0x0000
                  |L4.6092|
                          DCD      bOFF
                  |L4.6096|
                          DCD      bps
                  |L4.6100|
                          DCD      net_av
                  |L4.6104|
                          DCD      ||area_number.24||
                  |L4.6108|
                          DCD      work_stat
                  |L4.6112|
                          DCD      T_DEL_REL_VOLT_START
                  |L4.6116|
                          DCD      REL_VOLT_UMIN
                  |L4.6120|
                          DCD      load_U
                  |L4.6124|
                          DCD      T_DEL_REL_VOLT_WRK
                  |L4.6128|
                          DCD      REL_VOLT_UMAX
                  |L4.6132|
                          DCD      delta_U_abs
                  |L4.6136|
                          DCD      load_I
                  |L4.6140|
                          DCD      delta_I_abs
                  |L4.6144|
                          DCD      delta_U_rel
                  |L4.6148|
                          DCD      delta_I_rel
                  |L4.6152|
                          DCD      cnt_del_rel
                  |L4.6156|
                          DCD      DELT_REL_CURR_U
                  |L4.6160|
                          DCD      DELT_REL_CURR_I
                  |L4.6164|
                          DCD      U_up
                  |L4.6168|
                          DCD      I_maxp
                  |L4.6172|
                          DCD      U_maxg
                  |L4.6176|
                          DCD      I_ug_temp
                  |L4.6180|
                          DCD      T_DEL_REL_CURR_WRK
                  |L4.6184|
                          DCD      time_proc
                  |L4.6188|
                          DCD      T_DEL_REL_CURR_START
                  |L4.6192|
                          DCD      bCURRENT_STAB
                  |L4.6196|
                          DCD      RELE_FUNC
                  |L4.6200|
                          DCD      bRAZR
                  |L4.6204|
                          DCD      REV_STAT
                  |L4.6208|
                          DCD      RELE_LOG_CURR
                  |L4.6212|
                          DCD      RELE_LOG_VOLT
                  |L4.6216|
001848  f1bc0f03          CMP      r12,#3                ;2220
00184c  d003              BEQ      |L4.6230|
00184e  f1bb0f00          CMP      r11,#0                ;2227
001852  d041              BEQ      |L4.6360|
001854  e02a              B        |L4.6316|
                  |L4.6230|
001856  f1ba0f00          CMP      r10,#0                ;2222
00185a  d13d              BNE      |L4.6360|
00185c  e026              B        |L4.6316|
                  |L4.6238|
00185e  b116              CBZ      r6,|L4.6246|
001860  2e01              CMP      r6,#1                 ;2238
001862  d002              BEQ      |L4.6250|
001864  e023              B        |L4.6318|
                  |L4.6246|
001866  b30d              CBZ      r5,|L4.6316|
                  |L4.6248|
001868  e036              B        |L4.6360|
                  |L4.6250|
00186a  b3a5              CBZ      r5,|L4.6358|
00186c  e01e              B        |L4.6316|
                  |L4.6254|
00186e  b113              CBZ      r3,|L4.6262|
001870  2b01              CMP      r3,#1                 ;2251
001872  d002              BEQ      |L4.6266|
001874  e01b              B        |L4.6318|
                  |L4.6262|
001876  b1cf              CBZ      r7,|L4.6316|
001878  e02e              B        |L4.6360|
                  |L4.6266|
00187a  b367              CBZ      r7,|L4.6358|
00187c  e016              B        |L4.6316|
                  |L4.6270|
00187e  b113              CBZ      r3,|L4.6278|
001880  2b01              CMP      r3,#1                 ;2264
001882  d004              BEQ      |L4.6286|
001884  e013              B        |L4.6318|
                  |L4.6278|
001886  f1b80f00          CMP      r8,#0                 ;2261
00188a  d00f              BEQ      |L4.6316|
00188c  e024              B        |L4.6360|
                  |L4.6286|
00188e  f1b80f00          CMP      r8,#0                 ;2266
001892  d021              BEQ      |L4.6360|
001894  e00a              B        |L4.6316|
                  |L4.6294|
001896  b113              CBZ      r3,|L4.6302|
;;;2275   		else 				rele_stat[0]=rsOFF;
;;;2276   		}
;;;2277   	else if(RELE_LOG_VOLT==1)
001898  2b01              CMP      r3,#1
00189a  d004              BEQ      |L4.6310|
00189c  e007              B        |L4.6318|
                  |L4.6302|
00189e  f1b90f00          CMP      r9,#0                 ;2274
0018a2  d003              BEQ      |L4.6316|
0018a4  e018              B        |L4.6360|
                  |L4.6310|
;;;2278   		{
;;;2279   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[0]=rsOFF;
0018a6  f1b90f00          CMP      r9,#0
0018aa  d015              BEQ      |L4.6360|
                  |L4.6316|
;;;2280   		else 				rele_stat[0]=rsON;
0018ac  7002              STRB     r2,[r0,#0]
                  |L4.6318|
;;;2281   		}
;;;2282   	}
;;;2283   											
;;;2284   //Реле2
;;;2285   if(RELE_FUNC[1]==0)rele_stat[1]=rsOFF; 		//Выключено
0018ae  f9be4002          LDRSH    r4,[lr,#2]  ; RELE_FUNC
0018b2  b19c              CBZ      r4,|L4.6364|
;;;2286   else if(RELE_FUNC[1]==1)					//Реверс
0018b4  2c01              CMP      r4,#1
0018b6  d014              BEQ      |L4.6370|
;;;2287   	{
;;;2288   	if(work_stat==wsCAP) 
;;;2289   		{
;;;2290   		if(bRAZR) 		rele_stat[1]=rsOFF;
;;;2291   		else 			rele_stat[1]=rsON;
;;;2292   		} 
;;;2293   	else 
;;;2294   		{
;;;2295   		if(REV_STAT==rsREW)	rele_stat[1]=rsOFF;
;;;2296   		else 			rele_stat[1]=rsON;
;;;2297   		}
;;;2298   	}
;;;2299   else if(RELE_FUNC[1]==2)					//Токоограничение
0018b8  2c02              CMP      r4,#2
0018ba  d01e              BEQ      |L4.6394|
;;;2300   	{
;;;2301   	if(RELE_LOG_CURR==0)
;;;2302   		{
;;;2303   		if(bCURRENT_STAB==0)rele_stat[1]=rsON;
;;;2304   		else 			rele_stat[1]=rsOFF;
;;;2305   		}
;;;2306   	else if(RELE_LOG_CURR==1)
;;;2307   		{
;;;2308   		if(bCURRENT_STAB==0)rele_stat[1]=rsOFF;
;;;2309   		else 			rele_stat[1]=rsON;
;;;2310   		}
;;;2311   	}									
;;;2312   else if(RELE_FUNC[1]==3)					//Напряжение в норме
0018bc  2c03              CMP      r4,#3
0018be  d025              BEQ      |L4.6412|
;;;2313   	{
;;;2314   	if(RELE_LOG_VOLT==0)
;;;2315   		{
;;;2316   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsON;
;;;2317   		else 				rele_stat[1]=rsOFF;
;;;2318   		}
;;;2319   	else if(RELE_LOG_VOLT==1)
;;;2320   		{
;;;2321   		if(bVOLT_IS_NORM==0)	rele_stat[1]=rsOFF;
;;;2322   		else 				rele_stat[1]=rsON;
;;;2323   		}
;;;2324   	}
;;;2325   else if(RELE_FUNC[1]==4)					//Напряжение не выше
0018c0  2c04              CMP      r4,#4
0018c2  d02c              BEQ      |L4.6430|
;;;2326   	{
;;;2327   	if(RELE_LOG_VOLT==0)
;;;2328   		{
;;;2329   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsON;
;;;2330   		else 				rele_stat[1]=rsOFF;
;;;2331   		}
;;;2332   	else if(RELE_LOG_VOLT==1)
;;;2333   		{
;;;2334   		if(bVOLT_IS_NOT_UP==0)	rele_stat[1]=rsOFF;
;;;2335   		else 				rele_stat[1]=rsON;
;;;2336   		}
;;;2337   	}
;;;2338   else if(RELE_FUNC[1]==5)					//Напряжение не ниже
0018c4  2c05              CMP      r4,#5
0018c6  d10a              BNE      |L4.6366|
;;;2339   	{
;;;2340   	if(RELE_LOG_VOLT==0)
0018c8  b383              CBZ      r3,|L4.6444|
;;;2341   		{
;;;2342   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsON;
;;;2343   		else 				rele_stat[1]=rsOFF;
;;;2344   		}
;;;2345   	else if(RELE_LOG_VOLT==1)
0018ca  2b01              CMP      r3,#1
0018cc  d107              BNE      |L4.6366|
;;;2346   		{
;;;2347   		if(bVOLT_IS_NOT_DOWN==0)	rele_stat[1]=rsOFF;
0018ce  f1b90f00          CMP      r9,#0
0018d2  d10c              BNE      |L4.6382|
0018d4  e002              B        |L4.6364|
                  |L4.6358|
0018d6  e7ff              B        |L4.6360|
                  |L4.6360|
0018d8  7001              STRB     r1,[r0,#0]            ;2279
0018da  e7e8              B        |L4.6318|
                  |L4.6364|
0018dc  7041              STRB     r1,[r0,#1]            ;2285
                  |L4.6366|
;;;2348   		else 				rele_stat[1]=rsON;
;;;2349   		}
;;;2350   	}
;;;2351   	
;;;2352   
;;;2353   //rele_stat[0]=rsON;
;;;2354   //rele_stat[1]=rsON;
;;;2355   										
;;;2356   }
0018de  e8bd8ff0          POP      {r4-r11,pc}
                  |L4.6370|
0018e2  f1bc0f03          CMP      r12,#3                ;2288
0018e6  d004              BEQ      |L4.6386|
0018e8  f1bb0f00          CMP      r11,#0                ;2295
0018ec  d0f6              BEQ      |L4.6364|
                  |L4.6382|
0018ee  7042              STRB     r2,[r0,#1]            ;2296
0018f0  e7f5              B        |L4.6366|
                  |L4.6386|
0018f2  f1ba0f00          CMP      r10,#0                ;2290
0018f6  d1f1              BNE      |L4.6364|
0018f8  e7f9              B        |L4.6382|
                  |L4.6394|
0018fa  b126              CBZ      r6,|L4.6406|
0018fc  2e01              CMP      r6,#1                 ;2306
0018fe  d1ee              BNE      |L4.6366|
001900  2d00              CMP      r5,#0                 ;2308
001902  d1f4              BNE      |L4.6382|
001904  e7ea              B        |L4.6364|
                  |L4.6406|
001906  2d00              CMP      r5,#0                 ;2303
001908  d0f1              BEQ      |L4.6382|
00190a  e7e7              B        |L4.6364|
                  |L4.6412|
00190c  b123              CBZ      r3,|L4.6424|
00190e  2b01              CMP      r3,#1                 ;2319
001910  d1e5              BNE      |L4.6366|
001912  2f00              CMP      r7,#0                 ;2321
001914  d1eb              BNE      |L4.6382|
001916  e7e1              B        |L4.6364|
                  |L4.6424|
001918  2f00              CMP      r7,#0                 ;2316
00191a  d0e8              BEQ      |L4.6382|
00191c  e7de              B        |L4.6364|
                  |L4.6430|
00191e  b133              CBZ      r3,|L4.6446|
001920  2b01              CMP      r3,#1                 ;2332
001922  d1dc              BNE      |L4.6366|
001924  f1b80f00          CMP      r8,#0                 ;2334
001928  d1e1              BNE      |L4.6382|
00192a  e7d7              B        |L4.6364|
                  |L4.6444|
00192c  e003              B        |L4.6454|
                  |L4.6446|
00192e  f1b80f00          CMP      r8,#0                 ;2329
001932  d0dc              BEQ      |L4.6382|
001934  e7d2              B        |L4.6364|
                  |L4.6454|
001936  f1b90f00          CMP      r9,#0                 ;2342
00193a  d0d8              BEQ      |L4.6382|
00193c  e7ce              B        |L4.6364|
;;;2357    
                          ENDP

                  rele_drv PROC
;;;2358   //-----------------------------------------------
;;;2359   void rele_drv(void)
00193e  4914              LDR      r1,|L4.6544|
;;;2360   {
;;;2361   #ifdef EXT_BOARD_V_1
;;;2362   SET_REG(LPC_PINCON->PINSEL0,0,4*2,2);
;;;2363   SET_REG(LPC_GPIO0->FIODIR,1,4,1);
;;;2364   
;;;2365   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,4,1);
;;;2366   else SET_REG(LPC_GPIO0->FIOPIN,1,4,1);
;;;2367   #endif
;;;2368   
;;;2369   #ifdef EXT_BOARD_V_2
;;;2370   SET_REG(LPC_PINCON->PINSEL0,0,7*2,2);
001940  6808              LDR      r0,[r1,#0]
001942  f4204040          BIC      r0,r0,#0xc000
001946  6008              STR      r0,[r1,#0]
;;;2371   SET_REG(LPC_GPIO0->FIODIR,1,7,1);
001948  4812              LDR      r0,|L4.6548|
00194a  6802              LDR      r2,[r0,#0]
00194c  f0420280          ORR      r2,r2,#0x80
001950  6002              STR      r2,[r0,#0]
;;;2372   
;;;2373   if(rele_stat[0]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,7,1);
001952  4a11              LDR      r2,|L4.6552|
001954  7813              LDRB     r3,[r2,#0]  ; rele_stat
001956  2b01              CMP      r3,#1
;;;2374   else SET_REG(LPC_GPIO0->FIOPIN,1,7,1);
001958  6943              LDR      r3,[r0,#0x14]
00195a  d012              BEQ      |L4.6530|
00195c  f0430380          ORR      r3,r3,#0x80
                  |L4.6496|
001960  6143              STR      r3,[r0,#0x14]
;;;2375   #endif
;;;2376   
;;;2377   SET_REG(LPC_PINCON->PINSEL0,0,5*2,2);
001962  680b              LDR      r3,[r1,#0]
001964  f4236340          BIC      r3,r3,#0xc00
001968  600b              STR      r3,[r1,#0]
;;;2378   SET_REG(LPC_GPIO0->FIODIR,1,5,1);
00196a  6801              LDR      r1,[r0,#0]
00196c  f0410120          ORR      r1,r1,#0x20
001970  6001              STR      r1,[r0,#0]
;;;2379   
;;;2380   if(rele_stat[1]==rsON) SET_REG(LPC_GPIO0->FIOPIN,0,5,1);
001972  7851              LDRB     r1,[r2,#1]  ; rele_stat
001974  2901              CMP      r1,#1
;;;2381   else SET_REG(LPC_GPIO0->FIOPIN,1,5,1);
001976  6941              LDR      r1,[r0,#0x14]
001978  d006              BEQ      |L4.6536|
00197a  f0410120          ORR      r1,r1,#0x20
                  |L4.6526|
00197e  6141              STR      r1,[r0,#0x14]         ;2380
;;;2382   
;;;2383   
;;;2384   }
001980  4770              BX       lr
                  |L4.6530|
001982  f0230380          BIC      r3,r3,#0x80           ;2373
001986  e7eb              B        |L4.6496|
                  |L4.6536|
001988  f0210120          BIC      r1,r1,#0x20           ;2380
00198c  e7f7              B        |L4.6526|
;;;2385   
                          ENDP

00198e  0000              DCW      0x0000
                  |L4.6544|
                          DCD      0x4002c000
                  |L4.6548|
                          DCD      0x2009c000
                  |L4.6552|
                          DCD      ||area_number.24||+0x26

                          AREA ||area_number.5||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.5||, ||.text||
                  adc_drv6 PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000004  4c77              LDR      r4,|L5.484|
000006  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
000008  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
00000a  1a40              SUBS     r0,r0,r1
00000c  b200              SXTH     r0,r0
00000e  f7fffffe          BL       abs_pal
000012  1da5              ADDS     r5,r4,#6
;;;230    }
000014  8028              STRH     r0,[r5,#0]
000016  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000018  8861              LDRH     r1,[r4,#2]  ; adc_self_ch_buff
00001a  1a40              SUBS     r0,r0,r1
00001c  b200              SXTH     r0,r0
00001e  f7fffffe          BL       abs_pal
000022  8068              STRH     r0,[r5,#2]
000024  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000026  8821              LDRH     r1,[r4,#0]  ; adc_self_ch_buff
000028  1a40              SUBS     r0,r0,r1
00002a  b200              SXTH     r0,r0
00002c  f7fffffe          BL       abs_pal
000030  f44f7296          MOV      r2,#0x12c
000034  80a8              STRH     r0,[r5,#4]
000036  f1a40128          SUB      r1,r4,#0x28
00003a  4290              CMP      r0,r2
00003c  da01              BGE      |L5.66|
00003e  88a0              LDRH     r0,[r4,#4]  ; adc_self_ch_buff
000040  e00a              B        |L5.88|
                  |L5.66|
000042  f9b50002          LDRSH    r0,[r5,#2]  ; adc_self_ch_disp
000046  4290              CMP      r0,r2
000048  da01              BGE      |L5.78|
00004a  8860              LDRH     r0,[r4,#2]  ; adc_self_ch_buff
00004c  e004              B        |L5.88|
                  |L5.78|
00004e  f9b50000          LDRSH    r0,[r5,#0]  ; adc_self_ch_disp
000052  4290              CMP      r0,r2
000054  da01              BGE      |L5.90|
000056  8820              LDRH     r0,[r4,#0]  ; adc_self_ch_buff
                  |L5.88|
000058  8248              STRH     r0,[r1,#0x12]
                  |L5.90|
00005a  784e              LDRB     r6,[r1,#1]  ; adc_ch_net
00005c  2000              MOVS     r0,#0
00005e  b3f6              CBZ      r6,|L5.222|
000060  790c              LDRB     r4,[r1,#4]  ; adc_window_flag
000062  4a61              LDR      r2,|L5.488|
000064  b18c              CBZ      r4,|L5.138|
000066  f9b13012          LDRSH    r3,[r1,#0x12]  ; adc_result
00006a  6815              LDR      r5,[r2,#0]  ; main_power_buffer
00006c  eb0505a3          ADD      r5,r5,r3,ASR #2
000070  6015              STR      r5,[r2,#0]  ; main_power_buffer
000072  6855              LDR      r5,[r2,#4]  ; main_power_buffer
000074  eb0505a3          ADD      r5,r5,r3,ASR #2
000078  6055              STR      r5,[r2,#4]  ; main_power_buffer
00007a  6895              LDR      r5,[r2,#8]  ; main_power_buffer
00007c  eb0505a3          ADD      r5,r5,r3,ASR #2
000080  6095              STR      r5,[r2,#8]  ; main_power_buffer
000082  68d5              LDR      r5,[r2,#0xc]  ; main_power_buffer
000084  eb0503a3          ADD      r3,r5,r3,ASR #2
000088  60d3              STR      r3,[r2,#0xc]  ; main_power_buffer
                  |L5.138|
00008a  f9b13012          LDRSH    r3,[r1,#0x12]  ; adc_result
00008e  2b64              CMP      r3,#0x64
000090  da0e              BGE      |L5.176|
000092  8acb              LDRH     r3,[r1,#0x16]  ; adc_zero_cnt
000094  f44f65fa          MOV      r5,#0x7d0
000098  1c5b              ADDS     r3,r3,#1
00009a  b21b              SXTH     r3,r3
00009c  82cb              STRH     r3,[r1,#0x16]
00009e  42ab              CMP      r3,r5
0000a0  db08              BLT      |L5.180|
0000a2  82cd              STRH     r5,[r1,#0x16]
0000a4  6010              STR      r0,[r2,#0]  ; main_power_buffer
0000a6  6050              STR      r0,[r2,#4]  ; main_power_buffer
0000a8  6090              STR      r0,[r2,#8]  ; main_power_buffer
0000aa  60d0              STR      r0,[r2,#0xc]  ; main_power_buffer
0000ac  8208              STRH     r0,[r1,#0x10]
0000ae  e053              B        |L5.344|
                  |L5.176|
0000b0  82c8              STRH     r0,[r1,#0x16]
0000b2  e051              B        |L5.344|
                  |L5.180|
0000b4  2b05              CMP      r3,#5
0000b6  d14f              BNE      |L5.344|
0000b8  b1a4              CBZ      r4,|L5.228|
0000ba  8a8b              LDRH     r3,[r1,#0x14]  ; adc_gorb_cnt
0000bc  1c5b              ADDS     r3,r3,#1
0000be  b21b              SXTH     r3,r3
0000c0  828b              STRH     r3,[r1,#0x14]
0000c2  f5b37f00          CMP      r3,#0x200
0000c6  db00              BLT      |L5.202|
0000c8  8288              STRH     r0,[r1,#0x14]
                  |L5.202|
0000ca  f9b13014          LDRSH    r3,[r1,#0x14]  ; adc_gorb_cnt
0000ce  065d              LSLS     r5,r3,#25
0000d0  d108              BNE      |L5.228|
0000d2  11db              ASRS     r3,r3,#7
0000d4  f8525023          LDR      r5,[r2,r3,LSL #2]
0000d8  122d              ASRS     r5,r5,#8
0000da  820d              STRH     r5,[r1,#0x10]
0000dc  e000              B        |L5.224|
                  |L5.222|
0000de  e00f              B        |L5.256|
                  |L5.224|
0000e0  f8420023          STR      r0,[r2,r3,LSL #2]
                  |L5.228|
0000e4  f9b12018          LDRSH    r2,[r1,#0x18]  ; adc_window_cnt
0000e8  2a96              CMP      r2,#0x96
0000ea  dd01              BLE      |L5.240|
0000ec  b104              CBZ      r4,|L5.240|
0000ee  7108              STRB     r0,[r1,#4]
                  |L5.240|
0000f0  3a1f              SUBS     r2,r2,#0x1f
0000f2  2a27              CMP      r2,#0x27
0000f4  d230              BCS      |L5.344|
0000f6  790a              LDRB     r2,[r1,#4]  ; adc_window_flag
0000f8  bb72              CBNZ     r2,|L5.344|
0000fa  2201              MOVS     r2,#1
0000fc  710a              STRB     r2,[r1,#4]
0000fe  e02b              B        |L5.344|
                  |L5.256|
000100  4f3a              LDR      r7,|L5.492|
000102  788a              LDRB     r2,[r1,#2]  ; adc_ch
000104  f891c003          LDRB     r12,[r1,#3]  ; adc_ch_cnt
000108  eb0714c2          ADD      r4,r7,r2,LSL #7
00010c  f9b13012          LDRSH    r3,[r1,#0x12]  ; adc_result
000110  f844302c          STR      r3,[r4,r12,LSL #2]
000114  ea5f738c          LSLS     r3,r12,#30
000118  d110              BNE      |L5.316|
00011a  2400              MOVS     r4,#0
00011c  4623              MOV      r3,r4
00011e  eb0715c2          ADD      r5,r7,r2,LSL #7
000122  bf00              NOP      
                  |L5.292|
000124  f8557023          LDR      r7,[r5,r3,LSL #2]
000128  1c5b              ADDS     r3,r3,#1
00012a  b2db              UXTB     r3,r3
00012c  443c              ADD      r4,r4,r7
00012e  2b10              CMP      r3,#0x10
000130  d3f8              BCC      |L5.292|
000132  1123              ASRS     r3,r4,#4
000134  4c2c              LDR      r4,|L5.488|
000136  3c40              SUBS     r4,r4,#0x40
000138  f8243012          STRH     r3,[r4,r2,LSL #1]
                  |L5.316|
00013c  1c52              ADDS     r2,r2,#1
00013e  b2d2              UXTB     r2,r2
000140  708a              STRB     r2,[r1,#2]
000142  2a10              CMP      r2,#0x10
000144  d308              BCC      |L5.344|
000146  f10c0c01          ADD      r12,r12,#1
00014a  f00c02ff          AND      r2,r12,#0xff
00014e  7088              STRB     r0,[r1,#2]
000150  70ca              STRB     r2,[r1,#3]
000152  2a10              CMP      r2,#0x10
000154  d300              BCC      |L5.344|
000156  70c8              STRB     r0,[r1,#3]
                  |L5.344|
000158  7008              STRB     r0,[r1,#0]
00015a  1c76              ADDS     r6,r6,#1
00015c  f0160001          ANDS     r0,r6,#1
000160  4a23              LDR      r2,|L5.496|
000162  7048              STRB     r0,[r1,#1]
000164  d005              BEQ      |L5.370|
000166  6810              LDR      r0,[r2,#0]
000168  f02000ff          BIC      r0,r0,#0xff
00016c  1d00              ADDS     r0,r0,#4
00016e  6010              STR      r0,[r2,#0]
000170  e032              B        |L5.472|
                  |L5.370|
000172  7889              LDRB     r1,[r1,#2]  ; adc_ch
000174  0708              LSLS     r0,r1,#28
000176  2800              CMP      r0,#0
000178  6810              LDR      r0,[r2,#0]
00017a  f02000ff          BIC      r0,r0,#0xff
00017e  db01              BLT      |L5.388|
000180  1c40              ADDS     r0,r0,#1
000182  e000              B        |L5.390|
                  |L5.388|
000184  1c80              ADDS     r0,r0,#2
                  |L5.390|
000186  6010              STR      r0,[r2,#0]
000188  481a              LDR      r0,|L5.500|
00018a  6803              LDR      r3,[r0,#0]
00018c  f0435380          ORR      r3,r3,#0x10000000
000190  6003              STR      r3,[r0,#0]
000192  6a03              LDR      r3,[r0,#0x20]
000194  f0434380          ORR      r3,r3,#0x40000000
000198  6203              STR      r3,[r0,#0x20]
00019a  6e03              LDR      r3,[r0,#0x60]
00019c  f0436380          ORR      r3,r3,#0x4000000
0001a0  6603              STR      r3,[r0,#0x60]
0001a2  07cb              LSLS     r3,r1,#31
0001a4  6943              LDR      r3,[r0,#0x14]
0001a6  d008              BEQ      |L5.442|
0001a8  f0435380          ORR      r3,r3,#0x10000000
                  |L5.428|
0001ac  6143              STR      r3,[r0,#0x14]
0001ae  078b              LSLS     r3,r1,#30
0001b0  6b43              LDR      r3,[r0,#0x34]
0001b2  d405              BMI      |L5.448|
0001b4  f0234380          BIC      r3,r3,#0x40000000
0001b8  e004              B        |L5.452|
                  |L5.442|
0001ba  f0235380          BIC      r3,r3,#0x10000000
0001be  e7f5              B        |L5.428|
                  |L5.448|
0001c0  f0434380          ORR      r3,r3,#0x40000000
                  |L5.452|
0001c4  6343              STR      r3,[r0,#0x34]
0001c6  0749              LSLS     r1,r1,#29
0001c8  6f41              LDR      r1,[r0,#0x74]
0001ca  d402              BMI      |L5.466|
0001cc  f0216180          BIC      r1,r1,#0x4000000
0001d0  e001              B        |L5.470|
                  |L5.466|
0001d2  f0416180          ORR      r1,r1,#0x4000000
                  |L5.470|
0001d6  6741              STR      r1,[r0,#0x74]
                  |L5.472|
0001d8  6810              LDR      r0,[r2,#0]
0001da  f0407080          ORR      r0,r0,#0x1000000
0001de  6010              STR      r0,[r2,#0]
0001e0  e8bd81f0          POP      {r4-r8,pc}
;;;231    
                          ENDP

                  |L5.484|
                          DCD      ||area_number.24||+0x28
                  |L5.488|
                          DCD      ||.bss||+0x840
                  |L5.492|
                          DCD      ||.bss||
                  |L5.496|
                          DCD      0x40034000
                  |L5.500|
                          DCD      0x2009c000

                          AREA ||area_number.6||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.6||, ||.text||
                  zar_superviser_start PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  4903              LDR      r1,|L6.16|
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  4a04              LDR      r2,|L6.20|
000004  2001              MOVS     r0,#1
000006  7008              STRB     r0,[r1,#0]
000008  7010              STRB     r0,[r2,#0]
00000a  7048              STRB     r0,[r1,#1]
00000c  7050              STRB     r0,[r2,#1]
00000e  4770              BX       lr
;;;230    }
;;;231    
                          ENDP

                  |L6.16|
                          DCD      sign_U
                  |L6.20|
                          DCD      sign_I

                          AREA ||area_number.7||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.7||, ||.text||
                  revers_hndl PROC
;;;226    //-----------------------------------------------
;;;227    void kb_init(void)
000000  480e              LDR      r0,|L7.60|
;;;228    {
;;;229    main_kb_cnt=(TBAT*60)-60/*120*/;
000002  6801              LDR      r1,[r0,#0]
000004  f4217140          BIC      r1,r1,#0x300
000008  6001              STR      r1,[r0,#0]
00000a  480d              LDR      r0,|L7.64|
00000c  6801              LDR      r1,[r0,#0]
00000e  f0410110          ORR      r1,r1,#0x10
000012  6001              STR      r1,[r0,#0]
;;;230    }
000014  490b              LDR      r1,|L7.68|
000016  7809              LDRB     r1,[r1,#0]  ; work_stat
000018  2903              CMP      r1,#3
00001a  d003              BEQ      |L7.36|
00001c  490a              LDR      r1,|L7.72|
00001e  7809              LDRB     r1,[r1,#0]  ; REV_STAT
000020  b119              CBZ      r1,|L7.42|
000022  e007              B        |L7.52|
                  |L7.36|
000024  4909              LDR      r1,|L7.76|
000026  7809              LDRB     r1,[r1,#0]  ; bRAZR
000028  b121              CBZ      r1,|L7.52|
                  |L7.42|
00002a  6941              LDR      r1,[r0,#0x14]
00002c  f0210110          BIC      r1,r1,#0x10
                  |L7.48|
000030  6141              STR      r1,[r0,#0x14]
000032  4770              BX       lr
                  |L7.52|
000034  6941              LDR      r1,[r0,#0x14]
000036  f0410110          ORR      r1,r1,#0x10
00003a  e7f9              B        |L7.48|
;;;231    
                          ENDP

                  |L7.60|
                          DCD      0x4002c000
                  |L7.64|
                          DCD      0x2009c000
                  |L7.68|
                          DCD      work_stat
                  |L7.72|
                          DCD      REV_STAT
                  |L7.76|
                          DCD      bRAZR

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  adc_buff
                          %        2048
                  adc_buff_
                          %        32
                  adc_buff__
                          %        32
                  main_power_buffer
                          %        32

                          AREA ||area_number.10||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.bss||
                  adc_buff_max
                          %        24

                          AREA ||area_number.11||, DATA, NOINIT, ALIGN=1

                          EXPORTAS ||area_number.11||, ||.bss||
                  net_buff
                          %        64

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  sk_buff_KONTUR
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.14||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.14||, ||.constdata||
                  sk_buff_RSTKM
000000  0d0b0f0e          DCB      0x0d,0x0b,0x0f,0x0e

                          AREA ||area_number.15||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.15||, ||.constdata||
                  sk_buff_GLONASS
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.16||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.16||, ||.constdata||
                  sk_buff_3U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.17||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.17||, ||.constdata||
                  sk_buff_6U
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||area_number.18||, DATA, READONLY, ALIGN=0

                          EXPORTAS ||area_number.18||, ||.constdata||
                  sk_buff_220
000000  0b0d0f0e          DCB      0x0b,0x0d,0x0f,0x0e

                          AREA ||.data||, DATA, ALIGN=1

                  adc_buff_min
000000  13881388          DCW      0x1388,0x1388
000004  13881388          DCW      0x1388,0x1388
000008  13881388          DCW      0x1388,0x1388
00000c  13881388          DCW      0x1388,0x1388
000010  13881388          DCW      0x1388,0x1388
                          DCDU     0x00000000

                          AREA ||area_number.20||, DATA, ALIGN=1

                          EXPORTAS ||area_number.20||, ||.data||
                  unet_buff_min
000000  1388              DCW      0x1388

                          AREA ||area_number.21||, DATA, ALIGN=0

                          EXPORTAS ||area_number.21||, ||.data||
                  adc_stat
000000  01                DCB      0x01

                          AREA ||area_number.22||, DATA, ALIGN=1

                          EXPORTAS ||area_number.22||, ||.data||
                  bat_ver_cnt
000000  0096              DCW      0x0096

                          AREA ||area_number.23||, DATA, ALIGN=0

                          EXPORTAS ||area_number.23||, ||.data||
                  vent_stat
000000  00                DCB      0x00

                          AREA ||area_number.24||, DATA, ALIGN=1

                          EXPORTAS ||area_number.24||, ||.data||
                  adc_self_ch_cnt
000000  00                DCB      0x00
                  adc_ch_net
000001  00                DCB      0x00
                  adc_ch
000002  00                DCB      0x00
                  adc_ch_cnt
000003  00                DCB      0x00
                  adc_window_flag
000004  00                DCB      0x00
                  sh_cnt0
000005  00                DCB      0x00
                  b1Hz_sh
000006  00                DCB      0x00
                  bFAST_REG
000007  00                DCB      0x00
                  bU_VALID
000008  00                DCB      0x00
                  bVOLT_IS_NOT_DOWN
000009  00                DCB      0x00
                  bVOLT_IS_NOT_UP
00000a  00                DCB      0x00
                  bVOLT_IS_NORM
00000b  00                DCB      0x00
                  cntrl_stat_U
00000c  03e8              DCW      0x03e8
                  cntrl_stat_I
00000e  03e8              DCW      0x03e8
                  net_buff_
000010  0000              DCB      0x00,0x00
                  adc_result
000012  0000              DCB      0x00,0x00
                  adc_gorb_cnt
000014  0000              DCB      0x00,0x00
                  adc_zero_cnt
000016  0000              DCB      0x00,0x00
                  adc_window_cnt
000018  0000              DCB      0x00,0x00
                  adc_net_buff_cnt
00001a  0000              DCB      0x00,0x00
                  samokalibr_cnt
00001c  0000              DCB      0x00,0x00
                  main_kb_cnt
00001e  0000              DCB      0x00,0x00
                  cnt_volt_contr
000020  0000              DCB      0x00,0x00
                  cnt_rel_volt_umin
000022  0000              DCB      0x00,0x00
                  cnt_rel_volt_umax
000024  0000              DCB      0x00,0x00
                  rele_stat
000026  0000              DCB      0x00,0x00
                  adc_self_ch_buff
                          DCDU     0x00000000
00002c  0000              DCB      0x00,0x00
                  adc_self_ch_disp
00002e  0000              DCB      0x00,0x00
                          DCDU     0x00000000

                          AREA ||area_number.25||, DATA, ALIGN=1

                          EXPORTAS ||area_number.25||, ||.data||
                  cntrl_stat_old
000000  0258              DCW      0x0258

                          AREA ||area_number.26||, DATA, ALIGN=1

                          EXPORTAS ||area_number.26||, ||.data||
                  avg_main_cnt
000000  0014              DCW      0x0014

                          AREA ||area_number.27||, DATA, ALIGN=1

                          EXPORTAS ||area_number.27||, ||.data||
                  unet_buff_max
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.28||, DATA, ALIGN=0

                          EXPORTAS ||area_number.28||, ||.data||
                  adc_cnt
000000  00                DCB      0x00

                          AREA ||area_number.29||, DATA, ALIGN=0

                          EXPORTAS ||area_number.29||, ||.data||
                  adc_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.30||, DATA, ALIGN=1

                          EXPORTAS ||area_number.30||, ||.data||
                  zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.31||, DATA, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.data||
                  net_buff_cnt
000000  00                DCB      0x00

                          AREA ||area_number.32||, DATA, ALIGN=1

                          EXPORTAS ||area_number.32||, ||.data||
                  ADWR
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.33||, DATA, ALIGN=1

                          EXPORTAS ||area_number.33||, ||.data||
                  period_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=1

                          EXPORTAS ||area_number.34||, ||.data||
                  non_zero_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.35||, DATA, ALIGN=0

                          EXPORTAS ||area_number.35||, ||.data||
                  bRELE_OUT
000000  00                DCB      0x00

                          AREA ||area_number.36||, DATA, ALIGN=2

                          EXPORTAS ||area_number.36||, ||.data||
                  main_power_buffer_
                          DCD      0x00000000

                          AREA ||area_number.37||, DATA, ALIGN=1

                          EXPORTAS ||area_number.37||, ||.data||
                  main_power_buffer_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.38||, DATA, ALIGN=1

                          EXPORTAS ||area_number.38||, ||.data||
                  adc_buff_out_
                          DCDU     0x00000000
000004  0000              DCB      0x00,0x00

                          AREA ||area_number.39||, DATA, ALIGN=1

                          EXPORTAS ||area_number.39||, ||.data||
                  plazma_adc_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.40||, DATA, ALIGN=1

                          EXPORTAS ||area_number.40||, ||.data||
                  plazma_sk
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.41||, DATA, ALIGN=1

                          EXPORTAS ||area_number.41||, ||.data||
                  cntrl_stat_new
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.42||, DATA, ALIGN=1

                          EXPORTAS ||area_number.42||, ||.data||
                  Ibmax
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.43||, DATA, ALIGN=0

                          EXPORTAS ||area_number.43||, ||.data||
                  unh_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.44||, DATA, ALIGN=0

                          EXPORTAS ||area_number.44||, ||.data||
                  unh_cnt1
000000  00                DCB      0x00

                          AREA ||area_number.45||, DATA, ALIGN=0

                          EXPORTAS ||area_number.45||, ||.data||
                  b1Hz_unh
000000  00                DCB      0x00

                          AREA ||area_number.46||, DATA, ALIGN=0

                          EXPORTAS ||area_number.46||, ||.data||
                  ch_cnt0
000000  00                DCB      0x00

                          AREA ||area_number.47||, DATA, ALIGN=0

                          EXPORTAS ||area_number.47||, ||.data||
                  b1Hz_ch
000000  00                DCB      0x00

                          AREA ||area_number.48||, DATA, ALIGN=0

                          EXPORTAS ||area_number.48||, ||.data||
                  i
000000  00                DCB      0x00

                          AREA ||area_number.49||, DATA, ALIGN=0

                          EXPORTAS ||area_number.49||, ||.data||
                  iiii
000000  00                DCB      0x00

                          AREA ||area_number.50||, DATA, ALIGN=1

                          EXPORTAS ||area_number.50||, ||.data||
                  IZMAX_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.51||, DATA, ALIGN=2

                          EXPORTAS ||area_number.51||, ||.data||
                  i_avg_max
                          DCD      0x00000000

                          AREA ||area_number.52||, DATA, ALIGN=2

                          EXPORTAS ||area_number.52||, ||.data||
                  i_avg_min
                          DCD      0x00000000

                          AREA ||area_number.53||, DATA, ALIGN=2

                          EXPORTAS ||area_number.53||, ||.data||
                  i_avg_summ
                          DCD      0x00000000

                          AREA ||area_number.54||, DATA, ALIGN=2

                          EXPORTAS ||area_number.54||, ||.data||
                  i_avg
                          DCD      0x00000000

                          AREA ||area_number.55||, DATA, ALIGN=2

                          EXPORTAS ||area_number.55||, ||.data||
                  avg
                          DCD      0x00000000

                          AREA ||area_number.56||, DATA, ALIGN=0

                          EXPORTAS ||area_number.56||, ||.data||
                  bAVG
000000  00                DCB      0x00

                          AREA ||area_number.57||, DATA, ALIGN=0

                          EXPORTAS ||area_number.57||, ||.data||
                  avg_cnt
000000  00                DCB      0x00

                          AREA ||area_number.58||, DATA, ALIGN=1

                          EXPORTAS ||area_number.58||, ||.data||
                  kb_cnt_1lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.59||, DATA, ALIGN=1

                          EXPORTAS ||area_number.59||, ||.data||
                  kb_cnt_2lev
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.60||, DATA, ALIGN=0

                          EXPORTAS ||area_number.60||, ||.data||
                  kb_full_ver
000000  00                DCB      0x00

                          AREA ||area_number.61||, DATA, ALIGN=0

                          EXPORTAS ||area_number.61||, ||.data||
                  kb_start
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.62||, DATA, ALIGN=0

                          EXPORTAS ||area_number.62||, ||.data||
                  num_of_wrks_bps
000000  00                DCB      0x00

                          AREA ||area_number.63||, DATA, ALIGN=0

                          EXPORTAS ||area_number.63||, ||.data||
                  bps_all_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.64||, DATA, ALIGN=0

                          EXPORTAS ||area_number.64||, ||.data||
                  bps_mask_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.65||, DATA, ALIGN=0

                          EXPORTAS ||area_number.65||, ||.data||
                  bps_mask_on_off_cnt
000000  00                DCB      0x00

                          AREA ||area_number.66||, DATA, ALIGN=0

                          EXPORTAS ||area_number.66||, ||.data||
                  bps_hndl_2sec_cnt
000000  00                DCB      0x00

                          AREA ||area_number.67||, DATA, ALIGN=1

                          EXPORTAS ||area_number.67||, ||.data||
                  bps_on_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.68||, DATA, ALIGN=1

                          EXPORTAS ||area_number.68||, ||.data||
                  bps_off_mask
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.69||, DATA, ALIGN=0

                          EXPORTAS ||area_number.69||, ||.data||
                  num_necc_up
000000  00                DCB      0x00

                          AREA ||area_number.70||, DATA, ALIGN=0

                          EXPORTAS ||area_number.70||, ||.data||
                  num_necc_down
000000  00                DCB      0x00

                          AREA ||area_number.71||, DATA, ALIGN=0

                          EXPORTAS ||area_number.71||, ||.data||
                  spc_stat
000000  00                DCB      0x00

                          AREA ||area_number.72||, DATA, ALIGN=0

                          EXPORTAS ||area_number.72||, ||.data||
                  spc_bat
000000  00                DCB      0x00

                          AREA ||area_number.73||, DATA, ALIGN=0

                          EXPORTAS ||area_number.73||, ||.data||
                  spc_phase
000000  00                DCB      0x00

                          AREA ||area_number.74||, DATA, ALIGN=1

                          EXPORTAS ||area_number.74||, ||.data||
                  vz_cnt_s
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.75||, DATA, ALIGN=1

                          EXPORTAS ||area_number.75||, ||.data||
                  vz_cnt_s_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.76||, DATA, ALIGN=1

                          EXPORTAS ||area_number.76||, ||.data||
                  vz_cnt_h
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.77||, DATA, ALIGN=1

                          EXPORTAS ||area_number.77||, ||.data||
                  vz_cnt_h_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.78||, DATA, ALIGN=0

                          EXPORTAS ||area_number.78||, ||.data||
                  bAVZ
000000  00                DCB      0x00

                          AREA ||area_number.79||, DATA, ALIGN=0

                          EXPORTAS ||area_number.79||, ||.data||
                  ke_start_stat
000000  00                DCB      0x00

                          AREA ||area_number.80||, DATA, ALIGN=1

                          EXPORTAS ||area_number.80||, ||.data||
                  cnt_end_ke
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.81||, DATA, ALIGN=2

                          EXPORTAS ||area_number.81||, ||.data||
                  ke_date
                          %        8

                          AREA ||area_number.82||, DATA, ALIGN=1

                          EXPORTAS ||area_number.82||, ||.data||
                  __ee_vz_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.83||, DATA, ALIGN=1

                          EXPORTAS ||area_number.83||, ||.data||
                  __ee_spc_stat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.84||, DATA, ALIGN=1

                          EXPORTAS ||area_number.84||, ||.data||
                  __ee_spc_bat
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.85||, DATA, ALIGN=1

                          EXPORTAS ||area_number.85||, ||.data||
                  __ee_spc_phase
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.86||, DATA, ALIGN=1

                          EXPORTAS ||area_number.86||, ||.data||
                  cntrl_stat_blok_cnt
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.87||, DATA, ALIGN=1

                          EXPORTAS ||area_number.87||, ||.data||
                  cntrl_stat_blok_cnt_
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.88||, DATA, ALIGN=1

                          EXPORTAS ||area_number.88||, ||.data||
                  cntrl_stat_blok_cnt_plus
                          DCDU     0x00000000

                          AREA ||area_number.89||, DATA, ALIGN=1

                          EXPORTAS ||area_number.89||, ||.data||
                  cntrl_stat_blok_cnt_minus
                          DCDU     0x00000000

                          AREA ||area_number.90||, DATA, ALIGN=0

                          EXPORTAS ||area_number.90||, ||.data||
                  plazma_inv
                          DCDU     0x00000000

                          AREA ||area_number.91||, DATA, ALIGN=0

                          EXPORTAS ||area_number.91||, ||.data||
                  plazma_bat
000000  00                DCB      0x00
