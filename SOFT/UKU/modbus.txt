; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\modbus.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\modbus.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\modbus.crf modbus.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CRC16_2 PROC
;;;37     //-----------------------------------------------
;;;38     unsigned short CRC16_2(char* buf, short len)
000000  b570              PUSH     {r4-r6,lr}
;;;39     {
000002  4604              MOV      r4,r0
;;;40     unsigned short crc = 0xFFFF;
000004  f64f70ff          MOV      r0,#0xffff
;;;41     short pos;
;;;42     short i;
;;;43     
;;;44     for (pos = 0; pos < len; pos++)
000008  2200              MOVS     r2,#0
;;;45       	{
;;;46         	crc ^= (unsigned short)buf[pos];          // XOR byte into least sig. byte of crc
;;;47     
;;;48         	for ( i = 8; i != 0; i--) 
;;;49     		{    // Loop over each bit
;;;50           	if ((crc & 0x0001) != 0) 
;;;51     			{      // If the LSB is set
;;;52             		crc >>= 1;                    // Shift right and XOR 0xA001
;;;53             		crc ^= 0xA001;
00000a  f24a0501          MOV      r5,#0xa001
00000e  e00d              B        |L1.44|
                  |L1.16|
000010  5ca3              LDRB     r3,[r4,r2]            ;46
000012  4058              EORS     r0,r0,r3              ;46
000014  2308              MOVS     r3,#8                 ;48
                  |L1.22|
000016  07c6              LSLS     r6,r0,#31             ;50
;;;54           		}
;;;55           	else  crc >>= 1;                    // Just shift right
000018  ea4f0050          LSR      r0,r0,#1
00001c  d000              BEQ      |L1.32|
00001e  4068              EORS     r0,r0,r5              ;53
                  |L1.32|
000020  1e5b              SUBS     r3,r3,#1              ;48
000022  b21b              SXTH     r3,r3                 ;48
000024  2b00              CMP      r3,#0                 ;48
000026  d1f6              BNE      |L1.22|
000028  1c52              ADDS     r2,r2,#1              ;44
00002a  b212              SXTH     r2,r2                 ;44
                  |L1.44|
00002c  428a              CMP      r2,r1                 ;44
00002e  dbef              BLT      |L1.16|
;;;56         		}
;;;57       	}
;;;58       // Note, this number has low and high bytes swapped, so use it accordingly (or swap bytes)
;;;59     return crc;
;;;60     }
000030  bd70              POP      {r4-r6,pc}
;;;61     
                          ENDP

                  modbus_hold_register_transmit PROC
;;;1428   //-----------------------------------------------
;;;1429   void modbus_hold_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000032  e92d43f0          PUSH     {r4-r9,lr}
;;;1430   {
000036  4681              MOV      r9,r0
;;;1431   char modbus_registers[120];
;;;1432   char modbus_tx_buff[100];
;;;1433   unsigned short crc_temp;
;;;1434   char i;
;;;1435   
;;;1436   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
000038  48f9              LDR      r0,|L1.1056|
00003a  b0b7              SUB      sp,sp,#0xdc           ;1430
;;;1437   modbus_registers[1]=(char)(I_ug%256);
;;;1438   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
;;;1439   modbus_registers[3]=(char)(U_up%256);
;;;1440   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
;;;1441   modbus_registers[5]=(char)(U_maxg%256);
;;;1442   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1443   modbus_registers[7]=(char)(I_maxp%256);
;;;1444   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1445   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1446   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1447   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1448   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
;;;1449   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00003c  f44f6861          MOV      r8,#0xe10
000040  f9b00000          LDRSH    r0,[r0,#0]            ;1436  ; I_ug
000044  17c3              ASRS     r3,r0,#31             ;1436
000046  eb006313          ADD      r3,r0,r3,LSR #24      ;1436
00004a  121c              ASRS     r4,r3,#8              ;1436
00004c  f88d4000          STRB     r4,[sp,#0]            ;1436
000050  f88d0001          STRB     r0,[sp,#1]            ;1437
000054  48f3              LDR      r0,|L1.1060|
000056  f9b00000          LDRSH    r0,[r0,#0]            ;1438  ; U_up
00005a  17c3              ASRS     r3,r0,#31             ;1438
00005c  eb006313          ADD      r3,r0,r3,LSR #24      ;1438
000060  121c              ASRS     r4,r3,#8              ;1438
000062  f88d4002          STRB     r4,[sp,#2]            ;1438
000066  f88d0003          STRB     r0,[sp,#3]            ;1439
00006a  48ef              LDR      r0,|L1.1064|
00006c  f9b00000          LDRSH    r0,[r0,#0]            ;1440  ; U_maxg
000070  17c3              ASRS     r3,r0,#31             ;1440
000072  eb006313          ADD      r3,r0,r3,LSR #24      ;1440
000076  121c              ASRS     r4,r3,#8              ;1440
000078  f88d4004          STRB     r4,[sp,#4]            ;1440
00007c  f88d0005          STRB     r0,[sp,#5]            ;1441
000080  48ea              LDR      r0,|L1.1068|
000082  f9b00000          LDRSH    r0,[r0,#0]            ;1442  ; I_maxp
000086  17c3              ASRS     r3,r0,#31             ;1442
000088  eb006313          ADD      r3,r0,r3,LSR #24      ;1442
00008c  121c              ASRS     r4,r3,#8              ;1442
00008e  f88d4006          STRB     r4,[sp,#6]            ;1442
000092  f88d0007          STRB     r0,[sp,#7]            ;1443
000096  48e6              LDR      r0,|L1.1072|
000098  233c              MOVS     r3,#0x3c              ;1444
00009a  6804              LDR      r4,[r0,#0]            ;1444  ; T_PROC_GS
00009c  fb94f5f3          SDIV     r5,r4,r3              ;1444
0000a0  fb034015          MLS      r0,r3,r5,r4           ;1444
0000a4  17c6              ASRS     r6,r0,#31             ;1444
0000a6  eb006616          ADD      r6,r0,r6,LSR #24      ;1444
0000aa  1237              ASRS     r7,r6,#8              ;1444
0000ac  f88d7008          STRB     r7,[sp,#8]            ;1444
0000b0  f88d0009          STRB     r0,[sp,#9]            ;1445
0000b4  fb95f0f3          SDIV     r0,r5,r3              ;1446
0000b8  fb035010          MLS      r0,r3,r0,r5           ;1446
0000bc  17c5              ASRS     r5,r0,#31             ;1446
0000be  eb006515          ADD      r5,r0,r5,LSR #24      ;1446
0000c2  122e              ASRS     r6,r5,#8              ;1446
0000c4  f88d600a          STRB     r6,[sp,#0xa]          ;1446
0000c8  f88d000b          STRB     r0,[sp,#0xb]          ;1447
0000cc  f44f2761          MOV      r7,#0xe1000           ;1448
0000d0  fb94f0f7          SDIV     r0,r4,r7              ;1448
0000d4  f88d000c          STRB     r0,[sp,#0xc]          ;1448
0000d8  fb94f0f8          SDIV     r0,r4,r8
0000dc  f88d000d          STRB     r0,[sp,#0xd]
;;;1450   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0000e0  48d4              LDR      r0,|L1.1076|
0000e2  6804              LDR      r4,[r0,#0]  ; T_PROC_PS
0000e4  fb94f5f3          SDIV     r5,r4,r3
0000e8  fb034015          MLS      r0,r3,r5,r4
0000ec  17c6              ASRS     r6,r0,#31
0000ee  eb006616          ADD      r6,r0,r6,LSR #24
0000f2  ea4f2c26          ASR      r12,r6,#8
0000f6  f88dc00e          STRB     r12,[sp,#0xe]
;;;1451   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0000fa  f88d000f          STRB     r0,[sp,#0xf]
;;;1452   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0000fe  fb95f0f3          SDIV     r0,r5,r3
000102  fb035010          MLS      r0,r3,r0,r5
000106  17c3              ASRS     r3,r0,#31
000108  eb006313          ADD      r3,r0,r3,LSR #24
00010c  121d              ASRS     r5,r3,#8
00010e  f88d5010          STRB     r5,[sp,#0x10]
;;;1453   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
000112  f88d0011          STRB     r0,[sp,#0x11]
;;;1454   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
000116  fb94f0f7          SDIV     r0,r4,r7
00011a  f88d0012          STRB     r0,[sp,#0x12]
;;;1455   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
00011e  fb94f0f8          SDIV     r0,r4,r8
000122  f88d0013          STRB     r0,[sp,#0x13]
;;;1456   modbus_registers[20]=0;								//Πεγ60
000126  2000              MOVS     r0,#0
;;;1457   modbus_registers[21]=0;
;;;1458   if(work_stat==wsPS)modbus_registers[21]=1;
000128  4bc3              LDR      r3,|L1.1080|
00012a  f88d0014          STRB     r0,[sp,#0x14]         ;1456
00012e  f88d0015          STRB     r0,[sp,#0x15]         ;1457
000132  781c              LDRB     r4,[r3,#0]  ; work_stat
000134  2301              MOVS     r3,#1
000136  2c02              CMP      r4,#2
000138  d101              BNE      |L1.318|
00013a  f88d3015          STRB     r3,[sp,#0x15]
                  |L1.318|
;;;1459   modbus_registers[22]=0;								//Πεγ61
00013e  f88d0016          STRB     r0,[sp,#0x16]
;;;1460   modbus_registers[23]=0;
000142  f88d0017          STRB     r0,[sp,#0x17]
;;;1461   if(work_stat==wsGS)modbus_registers[23]=1;
000146  2c01              CMP      r4,#1
000148  d101              BNE      |L1.334|
00014a  f88d3017          STRB     r3,[sp,#0x17]
                  |L1.334|
;;;1462   modbus_registers[24]=0;								//Πεγ62
;;;1463   modbus_registers[25]=0;
;;;1464   if(REV_STAT==rsREW)modbus_registers[25]=1;
00014e  4cbb              LDR      r4,|L1.1084|
000150  f88d0018          STRB     r0,[sp,#0x18]         ;1462
000154  f88d0019          STRB     r0,[sp,#0x19]         ;1463
000158  7824              LDRB     r4,[r4,#0]  ; REV_STAT
00015a  b90c              CBNZ     r4,|L1.352|
00015c  f88d3019          STRB     r3,[sp,#0x19]
                  |L1.352|
;;;1465   modbus_registers[26]=0;								//Πεγ63
000160  f88d001a          STRB     r0,[sp,#0x1a]
;;;1466   modbus_registers[27]=0;
000164  f88d001b          STRB     r0,[sp,#0x1b]
;;;1467   if(AVT_REV_IS_ON)modbus_registers[27]=1;
000168  48b5              LDR      r0,|L1.1088|
00016a  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
00016c  b108              CBZ      r0,|L1.370|
00016e  f88d301b          STRB     r3,[sp,#0x1b]
                  |L1.370|
;;;1468   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000172  48b4              LDR      r0,|L1.1092|
000174  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_FF
000178  17c3              ASRS     r3,r0,#31
00017a  eb006313          ADD      r3,r0,r3,LSR #24
00017e  121c              ASRS     r4,r3,#8
000180  f88d401c          STRB     r4,[sp,#0x1c]
;;;1469   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
000184  f88d001d          STRB     r0,[sp,#0x1d]
;;;1470   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
000188  48af              LDR      r0,|L1.1096|
00018a  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_REW
00018e  17c3              ASRS     r3,r0,#31
000190  eb006313          ADD      r3,r0,r3,LSR #24
000194  121c              ASRS     r4,r3,#8
000196  f88d401e          STRB     r4,[sp,#0x1e]
;;;1471   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00019a  f88d001f          STRB     r0,[sp,#0x1f]
;;;1472   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00019e  48ab              LDR      r0,|L1.1100|
0001a0  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_PAUSE
0001a4  17c3              ASRS     r3,r0,#31
0001a6  eb006313          ADD      r3,r0,r3,LSR #24
0001aa  121c              ASRS     r4,r3,#8
0001ac  f88d4020          STRB     r4,[sp,#0x20]
;;;1473   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
0001b0  f88d0021          STRB     r0,[sp,#0x21]
;;;1474   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
0001b4  48a6              LDR      r0,|L1.1104|
0001b6  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_FF
0001ba  17c3              ASRS     r3,r0,#31
0001bc  eb006313          ADD      r3,r0,r3,LSR #24
0001c0  121c              ASRS     r4,r3,#8
0001c2  f88d4022          STRB     r4,[sp,#0x22]
;;;1475   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
0001c6  f88d0023          STRB     r0,[sp,#0x23]
;;;1476   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
0001ca  48a2              LDR      r0,|L1.1108|
0001cc  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_REW
0001d0  17c3              ASRS     r3,r0,#31
0001d2  eb006313          ADD      r3,r0,r3,LSR #24
0001d6  121c              ASRS     r4,r3,#8
0001d8  f88d4024          STRB     r4,[sp,#0x24]
;;;1477   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
0001dc  f88d0025          STRB     r0,[sp,#0x25]
;;;1478   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
0001e0  489d              LDR      r0,|L1.1112|
0001e2  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_FF
0001e6  17c3              ASRS     r3,r0,#31
0001e8  eb006313          ADD      r3,r0,r3,LSR #24
0001ec  121c              ASRS     r4,r3,#8
0001ee  f88d4026          STRB     r4,[sp,#0x26]
;;;1479   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
0001f2  f88d0027          STRB     r0,[sp,#0x27]
;;;1480   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
0001f6  4899              LDR      r0,|L1.1116|
0001f8  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_REW
0001fc  17c3              ASRS     r3,r0,#31
0001fe  eb006313          ADD      r3,r0,r3,LSR #24
000202  121c              ASRS     r4,r3,#8
000204  f88d4028          STRB     r4,[sp,#0x28]
;;;1481   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
000208  f88d0029          STRB     r0,[sp,#0x29]
;;;1482   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
00020c  4894              LDR      r0,|L1.1120|
00020e  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_ZAR_TIME
000212  17c3              ASRS     r3,r0,#31
000214  eb006313          ADD      r3,r0,r3,LSR #24
000218  121c              ASRS     r4,r3,#8
00021a  f88d402a          STRB     r4,[sp,#0x2a]
;;;1483   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
00021e  f88d002b          STRB     r0,[sp,#0x2b]
;;;1484   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
000222  4890              LDR      r0,|L1.1124|
000224  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
000228  17c3              ASRS     r3,r0,#31
00022a  eb006313          ADD      r3,r0,r3,LSR #24
00022e  121c              ASRS     r4,r3,#8
000230  f88d402c          STRB     r4,[sp,#0x2c]
;;;1485   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
000234  f88d002d          STRB     r0,[sp,#0x2d]
;;;1486   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
000238  488b              LDR      r0,|L1.1128|
00023a  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
00023e  17c3              ASRS     r3,r0,#31
000240  eb006313          ADD      r3,r0,r3,LSR #24
000244  121c              ASRS     r4,r3,#8
000246  f88d402e          STRB     r4,[sp,#0x2e]
;;;1487   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
00024a  f88d002f          STRB     r0,[sp,#0x2f]
;;;1488   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
00024e  4887              LDR      r0,|L1.1132|
000250  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
000254  17c3              ASRS     r3,r0,#31
000256  eb006313          ADD      r3,r0,r3,LSR #24
00025a  121c              ASRS     r4,r3,#8
00025c  f88d4030          STRB     r4,[sp,#0x30]
;;;1489   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
000260  f88d0031          STRB     r0,[sp,#0x31]
;;;1490   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
000264  4882              LDR      r0,|L1.1136|
000266  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_MAX_VOLT
00026a  17c3              ASRS     r3,r0,#31
00026c  eb006313          ADD      r3,r0,r3,LSR #24
000270  121c              ASRS     r4,r3,#8
000272  f88d4032          STRB     r4,[sp,#0x32]
;;;1491   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
000276  f88d0033          STRB     r0,[sp,#0x33]
;;;1492   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
00027a  487e              LDR      r0,|L1.1140|
00027c  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_WRK_CURR
;;;1493   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
;;;1494   
;;;1495   modbus_tx_buff[0]=adr;
000280  f88d9078          STRB     r9,[sp,#0x78]
000284  17c3              ASRS     r3,r0,#31             ;1492
000286  eb006313          ADD      r3,r0,r3,LSR #24      ;1492
00028a  121c              ASRS     r4,r3,#8              ;1492
00028c  f88d4034          STRB     r4,[sp,#0x34]         ;1492
000290  f88d0035          STRB     r0,[sp,#0x35]         ;1493
;;;1496   modbus_tx_buff[1]=func;
000294  f88d1079          STRB     r1,[sp,#0x79]
;;;1497   modbus_tx_buff[2]=(char)(reg_adr/256);
000298  0a10              LSRS     r0,r2,#8
00029a  f88d007a          STRB     r0,[sp,#0x7a]
;;;1498   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1499   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1500   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1501   
;;;1502   
;;;1503   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
00029e  4668              MOV      r0,sp
0002a0  eb000042          ADD      r0,r0,r2,LSL #1
0002a4  f88d207b          STRB     r2,[sp,#0x7b]         ;1498
0002a8  f8300c02          LDRH     r0,[r0,#-2]
0002ac  f8ad007c          STRH     r0,[sp,#0x7c]
;;;1504   
;;;1505   crc_temp=CRC16_2(modbus_tx_buff,6);
0002b0  2106              MOVS     r1,#6
0002b2  a81e              ADD      r0,sp,#0x78
0002b4  f7fffffe          BL       CRC16_2
;;;1506   
;;;1507   modbus_tx_buff[6]=crc_temp%256;
0002b8  f88d007e          STRB     r0,[sp,#0x7e]
;;;1508   modbus_tx_buff[7]=crc_temp/256;
0002bc  0a00              LSRS     r0,r0,#8
0002be  f88d007f          STRB     r0,[sp,#0x7f]
;;;1509   
;;;1510   for (i=0;i<8;i++)
0002c2  2400              MOVS     r4,#0
0002c4  ad1e              ADD      r5,sp,#0x78           ;1432
                  |L1.710|
;;;1511   	{
;;;1512   	putchar0(modbus_tx_buff[i]);
0002c6  5d28              LDRB     r0,[r5,r4]
0002c8  f7fffffe          BL       putchar0
0002cc  1c64              ADDS     r4,r4,#1              ;1510
0002ce  b2e4              UXTB     r4,r4                 ;1510
0002d0  2c08              CMP      r4,#8                 ;1510
0002d2  d3f8              BCC      |L1.710|
;;;1513   	}
;;;1514   for (i=0;i<8;i++)
0002d4  2400              MOVS     r4,#0
                  |L1.726|
;;;1515   	{
;;;1516   	putchar_sc16is700(modbus_tx_buff[i]);
0002d6  5d28              LDRB     r0,[r5,r4]
0002d8  f7fffffe          BL       putchar_sc16is700
0002dc  1c64              ADDS     r4,r4,#1              ;1514
0002de  b2e4              UXTB     r4,r4                 ;1514
0002e0  2c08              CMP      r4,#8                 ;1514
0002e2  d3f8              BCC      |L1.726|
;;;1517   	}
;;;1518   }	
0002e4  b037              ADD      sp,sp,#0xdc
0002e6  e8bd83f0          POP      {r4-r9,pc}
;;;1519   
                          ENDP

                  modbus_input_registers_transmit PROC
;;;1184   //-----------------------------------------------
;;;1185   void modbus_input_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
0002ea  e92d4ff0          PUSH     {r4-r11,lr}
;;;1186   {
0002ee  4683              MOV      r11,r0
;;;1187   //char modbus_registers[110];
;;;1188   char modbus_tx_buff[200];
;;;1189   unsigned short crc_temp;
;;;1190   char i;
;;;1191   /*
;;;1192   load_U=1234;
;;;1193   load_I=5678;
;;;1194   time_proc=361233UL;//1357;
;;;1195   time_proc_remain=722444UL;//1357;
;;;1196   
;;;1197   bVOLT_IS_NOT_DOWN=0;
;;;1198   bVOLT_IS_NOT_UP=1;	*/
;;;1199   
;;;1200   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
0002f0  4861              LDR      r0,|L1.1144|
0002f2  468e              MOV      lr,r1                 ;1186
0002f4  4692              MOV      r10,r2                ;1186
0002f6  f9b01000          LDRSH    r1,[r0,#0]  ; load_U
0002fa  b0b3              SUB      sp,sp,#0xcc           ;1186
0002fc  17c8              ASRS     r0,r1,#31
0002fe  eb016210          ADD      r2,r1,r0,LSR #24
000302  485e              LDR      r0,|L1.1148|
000304  461c              MOV      r4,r3                 ;1186
000306  1213              ASRS     r3,r2,#8
000308  f8ddc0f0          LDR      r12,[sp,#0xf0]
00030c  7003              STRB     r3,[r0,#0]
;;;1201   modbus_registers[1]=(char)(load_U%256);
00030e  7041              STRB     r1,[r0,#1]
;;;1202   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
000310  495b              LDR      r1,|L1.1152|
;;;1203   modbus_registers[3]=(char)(load_I%256);
;;;1204   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
;;;1205   modbus_registers[5]=(char)((time_proc%60)%256);
;;;1206   modbus_registers[6]=(char)(((time_proc/60)%60)/256);		//Πεγ4
;;;1207   modbus_registers[7]=(char)(((time_proc/60)%60)%256);
;;;1208   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
000312  f44f2961          MOV      r9,#0xe1000
;;;1209   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000316  f44f6861          MOV      r8,#0xe10
00031a  f9b11000          LDRSH    r1,[r1,#0]            ;1202  ; load_I
00031e  17ca              ASRS     r2,r1,#31             ;1202
000320  eb016212          ADD      r2,r1,r2,LSR #24      ;1202
000324  1213              ASRS     r3,r2,#8              ;1202
000326  7083              STRB     r3,[r0,#2]            ;1202
000328  70c1              STRB     r1,[r0,#3]            ;1203
00032a  4956              LDR      r1,|L1.1156|
00032c  223c              MOVS     r2,#0x3c              ;1204
00032e  680b              LDR      r3,[r1,#0]            ;1204  ; time_proc
000330  fb93f5f2          SDIV     r5,r3,r2              ;1204
000334  fb023115          MLS      r1,r2,r5,r3           ;1204
000338  17ce              ASRS     r6,r1,#31             ;1204
00033a  eb016716          ADD      r7,r1,r6,LSR #24      ;1204
00033e  123e              ASRS     r6,r7,#8              ;1204
000340  7106              STRB     r6,[r0,#4]            ;1204
000342  7141              STRB     r1,[r0,#5]            ;1205
000344  fb95f1f2          SDIV     r1,r5,r2              ;1206
000348  fb025111          MLS      r1,r2,r1,r5           ;1206
00034c  17cd              ASRS     r5,r1,#31             ;1206
00034e  eb016515          ADD      r5,r1,r5,LSR #24      ;1206
000352  122e              ASRS     r6,r5,#8              ;1206
000354  7186              STRB     r6,[r0,#6]            ;1206
000356  71c1              STRB     r1,[r0,#7]            ;1207
000358  fb93f1f9          SDIV     r1,r3,r9              ;1208
00035c  7201              STRB     r1,[r0,#8]            ;1208
00035e  fb93f1f8          SDIV     r1,r3,r8
000362  7241              STRB     r1,[r0,#9]
;;;1210   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
000364  4948              LDR      r1,|L1.1160|
000366  680b              LDR      r3,[r1,#0]  ; time_proc_remain
000368  fb93f7f2          SDIV     r7,r3,r2
00036c  fb023117          MLS      r1,r2,r7,r3
000370  17cd              ASRS     r5,r1,#31
000372  eb016515          ADD      r5,r1,r5,LSR #24
000376  122e              ASRS     r6,r5,#8
000378  7286              STRB     r6,[r0,#0xa]
;;;1211   modbus_registers[11]=(char)((time_proc_remain%60)%256);
00037a  72c1              STRB     r1,[r0,#0xb]
;;;1212   modbus_registers[12]=(char)(((time_proc_remain/60)%60)/256);//Πεγ7
00037c  fb97f1f2          SDIV     r1,r7,r2
000380  fb027111          MLS      r1,r2,r1,r7
000384  17ca              ASRS     r2,r1,#31
000386  eb016212          ADD      r2,r1,r2,LSR #24
00038a  1215              ASRS     r5,r2,#8
00038c  7305              STRB     r5,[r0,#0xc]
;;;1213   modbus_registers[13]=(char)(((time_proc_remain/60)%60)%256);
00038e  7341              STRB     r1,[r0,#0xd]
;;;1214   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
000390  fb93f1f9          SDIV     r1,r3,r9
000394  7381              STRB     r1,[r0,#0xe]
;;;1215   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
000396  fb93f1f8          SDIV     r1,r3,r8
00039a  73c1              STRB     r1,[r0,#0xf]
;;;1216   modbus_registers[16]=(char)((CAP_COUNTER)/256);			//Πεγ9
00039c  493b              LDR      r1,|L1.1164|
00039e  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_COUNTER
0003a2  17ca              ASRS     r2,r1,#31
0003a4  eb016212          ADD      r2,r1,r2,LSR #24
0003a8  1213              ASRS     r3,r2,#8
0003aa  7403              STRB     r3,[r0,#0x10]
;;;1217   modbus_registers[17]=(char)((CAP_COUNTER)%256);
0003ac  7441              STRB     r1,[r0,#0x11]
;;;1218   modbus_registers[18]=(char)((CAP_TIME_SEC)/256);			//Πεγ10
0003ae  4938              LDR      r1,|L1.1168|
0003b0  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_SEC
0003b4  17ca              ASRS     r2,r1,#31
0003b6  eb016212          ADD      r2,r1,r2,LSR #24
0003ba  1213              ASRS     r3,r2,#8
0003bc  7483              STRB     r3,[r0,#0x12]
;;;1219   modbus_registers[19]=(char)((CAP_TIME_SEC)%256);
0003be  74c1              STRB     r1,[r0,#0x13]
;;;1220   modbus_registers[20]=(char)((CAP_TIME_MIN)/256);			//Πεγ11
0003c0  4934              LDR      r1,|L1.1172|
0003c2  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_MIN
0003c6  17ca              ASRS     r2,r1,#31
0003c8  eb016212          ADD      r2,r1,r2,LSR #24
0003cc  1213              ASRS     r3,r2,#8
0003ce  7503              STRB     r3,[r0,#0x14]
;;;1221   modbus_registers[21]=(char)((CAP_TIME_MIN)%256);
0003d0  7541              STRB     r1,[r0,#0x15]
;;;1222   modbus_registers[22]=(char)((CAP_TIME_HOUR)/256);			//Πεγ12
0003d2  4931              LDR      r1,|L1.1176|
0003d4  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_HOUR
0003d8  17ca              ASRS     r2,r1,#31
0003da  eb016212          ADD      r2,r1,r2,LSR #24
0003de  1213              ASRS     r3,r2,#8
0003e0  7583              STRB     r3,[r0,#0x16]
;;;1223   modbus_registers[23]=(char)((CAP_TIME_HOUR)%256);
0003e2  75c1              STRB     r1,[r0,#0x17]
;;;1224   modbus_registers[24]=0;
0003e4  2100              MOVS     r1,#0
;;;1225   modbus_registers[25]=0;										//Πεγ13
;;;1226   if(bVOLT_IS_NOT_DOWN)	modbus_registers[25]=1;
0003e6  4a2d              LDR      r2,|L1.1180|
0003e8  7601              STRB     r1,[r0,#0x18]         ;1224
0003ea  7641              STRB     r1,[r0,#0x19]         ;1225
0003ec  7813              LDRB     r3,[r2,#0]  ; bVOLT_IS_NOT_DOWN
0003ee  2201              MOVS     r2,#1
0003f0  b103              CBZ      r3,|L1.1012|
0003f2  7642              STRB     r2,[r0,#0x19]
                  |L1.1012|
;;;1227   modbus_registers[26]=0;
0003f4  7681              STRB     r1,[r0,#0x1a]
;;;1228   modbus_registers[27]=0;										//Πεγ14
0003f6  76c1              STRB     r1,[r0,#0x1b]
;;;1229   if(bVOLT_IS_NOT_UP)	modbus_registers[27]=1;
0003f8  4929              LDR      r1,|L1.1184|
0003fa  7809              LDRB     r1,[r1,#0]  ; bVOLT_IS_NOT_UP
0003fc  b101              CBZ      r1,|L1.1024|
0003fe  76c2              STRB     r2,[r0,#0x1b]
                  |L1.1024|
000400  491e              LDR      r1,|L1.1148|
;;;1230   								
;;;1231   /*
;;;1232   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
;;;1233   modbus_registers[17]=(char)(I_ug%256);
;;;1234   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
;;;1235   modbus_registers[19]=(char)(U_up%256);
;;;1236   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
;;;1237   modbus_registers[21]=(char)(U_maxg%256);
;;;1238   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
;;;1239   modbus_registers[23]=(char)(I_maxp%256);
;;;1240   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
;;;1241   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
;;;1242   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
;;;1243   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
;;;1244   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
;;;1245   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
;;;1246   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
;;;1247   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
;;;1248   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
;;;1249   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
;;;1250   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
;;;1251   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
;;;1252   modbus_registers[36]=0;								//Πεγ19
;;;1253   modbus_registers[37]=0;
;;;1254   if(work_stat==wsPS)modbus_registers[37]=1;
;;;1255   modbus_registers[38]=0;								//Πεγ20
;;;1256   modbus_registers[39]=0;
;;;1257   if(work_stat==wsGS)modbus_registers[39]=1;
;;;1258   modbus_registers[40]=0;								//Πεγ21
;;;1259   modbus_registers[41]=0;
;;;1260   if(REV_STAT==rsREW)modbus_registers[41]=1;
;;;1261   modbus_registers[42]=0;								//Πεγ22
;;;1262   modbus_registers[43]=0;
;;;1263   if(AVT_REV_IS_ON)modbus_registers[42]=1;
;;;1264   */
;;;1265   if(prot==MODBUS_RTU_PROT)
000402  f1bc0f00          CMP      r12,#0
;;;1266   	{
;;;1267   	modbus_tx_buff[0]=adr;
;;;1268   	modbus_tx_buff[1]=func;
;;;1269   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1270   	
;;;1271   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-1)*2],reg_quantity*2);
000406  eb01014a          ADD      r1,r1,r10,LSL #1
00040a  d04d              BEQ      |L1.1192|
;;;1272   	
;;;1273   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1274   	
;;;1275   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1276   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1277   	
;;;1278   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1279   		{
;;;1280   		putchar0(modbus_tx_buff[i]);
;;;1281   		}
;;;1282   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1283   		{
;;;1284   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1285   		}
;;;1286   	}
;;;1287   else if(prot==MODBUS_TCP_PROT)
00040c  f1bc0f01          CMP      r12,#1
000410  d102              BNE      |L1.1048|
;;;1288   	{
;;;1289   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-1)*2];
000412  4824              LDR      r0,|L1.1188|
000414  1e89              SUBS     r1,r1,#2
000416  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1048|
;;;1290   	}
;;;1291   }
000418  b033              ADD      sp,sp,#0xcc
                  |L1.1050|
00041a  e8bd8ff0          POP      {r4-r11,pc}
00041e  0000              DCW      0x0000
                  |L1.1056|
                          DCD      I_ug
                  |L1.1060|
                          DCD      U_up
                  |L1.1064|
                          DCD      U_maxg
                  |L1.1068|
                          DCD      I_maxp
                  |L1.1072|
                          DCD      T_PROC_GS
                  |L1.1076|
                          DCD      T_PROC_PS
                  |L1.1080|
                          DCD      work_stat
                  |L1.1084|
                          DCD      REV_STAT
                  |L1.1088|
                          DCD      AVT_REV_IS_ON
                  |L1.1092|
                          DCD      AVT_REV_TIME_FF
                  |L1.1096|
                          DCD      AVT_REV_TIME_REW
                  |L1.1100|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.1104|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.1108|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.1112|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.1116|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.1120|
                          DCD      CAP_ZAR_TIME
                  |L1.1124|
                          DCD      CAP_PAUSE1_TIME
                  |L1.1128|
                          DCD      CAP_RAZR_TIME
                  |L1.1132|
                          DCD      CAP_PAUSE2_TIME
                  |L1.1136|
                          DCD      CAP_MAX_VOLT
                  |L1.1140|
                          DCD      CAP_WRK_CURR
                  |L1.1144|
                          DCD      load_U
                  |L1.1148|
                          DCD      ||area_number.4||+0x3c
                  |L1.1152|
                          DCD      load_I
                  |L1.1156|
                          DCD      time_proc
                  |L1.1160|
                          DCD      time_proc_remain
                  |L1.1164|
                          DCD      CAP_COUNTER
                  |L1.1168|
                          DCD      CAP_TIME_SEC
                  |L1.1172|
                          DCD      CAP_TIME_MIN
                  |L1.1176|
                          DCD      CAP_TIME_HOUR
                  |L1.1180|
                          DCD      bVOLT_IS_NOT_DOWN
                  |L1.1184|
                          DCD      bVOLT_IS_NOT_UP
                  |L1.1188|
                          DCD      modbus_tcp_out_ptr
                  |L1.1192|
0004a8  f88db000          STRB     r11,[sp,#0]           ;1267
0004ac  f88de001          STRB     lr,[sp,#1]            ;1268
0004b0  0062              LSLS     r2,r4,#1              ;1269
0004b2  466d              MOV      r5,sp                 ;1271
0004b4  f88d2002          STRB     r2,[sp,#2]            ;1269
0004b8  1e89              SUBS     r1,r1,#2              ;1271
0004ba  1ce8              ADDS     r0,r5,#3              ;1271
0004bc  f7fffffe          BL       __aeabi_memcpy
0004c0  2003              MOVS     r0,#3                 ;1273
0004c2  eb000044          ADD      r0,r0,r4,LSL #1       ;1273
0004c6  b201              SXTH     r1,r0                 ;1273
0004c8  4668              MOV      r0,sp                 ;1273
0004ca  f7fffffe          BL       CRC16_2
0004ce  eb050144          ADD      r1,r5,r4,LSL #1       ;1275
0004d2  2600              MOVS     r6,#0                 ;1278
0004d4  70c8              STRB     r0,[r1,#3]            ;1275
0004d6  0a00              LSRS     r0,r0,#8              ;1276
0004d8  7108              STRB     r0,[r1,#4]            ;1276
0004da  2005              MOVS     r0,#5                 ;1278
0004dc  eb000744          ADD      r7,r0,r4,LSL #1       ;1278
0004e0  e004              B        |L1.1260|
                  |L1.1250|
0004e2  5da8              LDRB     r0,[r5,r6]            ;1280
0004e4  f7fffffe          BL       putchar0
0004e8  1c76              ADDS     r6,r6,#1              ;1278
0004ea  b2f6              UXTB     r6,r6                 ;1278
                  |L1.1260|
0004ec  42b7              CMP      r7,r6                 ;1278
0004ee  d8f8              BHI      |L1.1250|
0004f0  2400              MOVS     r4,#0                 ;1282
0004f2  e004              B        |L1.1278|
                  |L1.1268|
0004f4  5d28              LDRB     r0,[r5,r4]            ;1284
0004f6  f7fffffe          BL       putchar_sc16is700
0004fa  1c64              ADDS     r4,r4,#1              ;1282
0004fc  b2e4              UXTB     r4,r4                 ;1282
                  |L1.1278|
0004fe  42a7              CMP      r7,r4                 ;1282
000500  d8f8              BHI      |L1.1268|
000502  e789              B        |L1.1048|
;;;1292   
                          ENDP

                  modbus_hold_registers_transmit PROC
;;;1521   //-----------------------------------------------
;;;1522   void modbus_hold_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
000504  e92d4fff          PUSH     {r0-r11,lr}
;;;1523   {
000508  b0b3              SUB      sp,sp,#0xcc
00050a  4682              MOV      r10,r0
00050c  4693              MOV      r11,r2
00050e  461d              MOV      r5,r3
;;;1524   //char modbus_registers[110];
;;;1525   char modbus_tx_buff[200];
;;;1526   unsigned short crc_temp;
;;;1527   char i;
;;;1528   
;;;1529   //reg_adr=45;
;;;1530   //I_ug=reg_adr;
;;;1531   //U_up=5678;
;;;1532   
;;;1533   modbus_registers[0]=(char)(lc640_read_int(EE_I_UG)/256);//Πεγ50
000510  2020              MOVS     r0,#0x20
000512  f8dd9100          LDR      r9,[sp,#0x100]
000516  f7fffffe          BL       lc640_read_int
00051a  17c1              ASRS     r1,r0,#31
00051c  eb006011          ADD      r0,r0,r1,LSR #24
000520  1200              ASRS     r0,r0,#8
000522  4cff              LDR      r4,|L1.2336|
000524  7020              STRB     r0,[r4,#0]
;;;1534   modbus_registers[1]=(char)(lc640_read_int(EE_I_UG)%256);
000526  2020              MOVS     r0,#0x20
000528  f7fffffe          BL       lc640_read_int
00052c  7060              STRB     r0,[r4,#1]
;;;1535   modbus_registers[2]=(char)(lc640_read_int(EE_U_UP)/256);//Πεγ51
00052e  2022              MOVS     r0,#0x22
000530  f7fffffe          BL       lc640_read_int
000534  17c1              ASRS     r1,r0,#31
000536  eb006011          ADD      r0,r0,r1,LSR #24
00053a  1200              ASRS     r0,r0,#8
00053c  70a0              STRB     r0,[r4,#2]
;;;1536   modbus_registers[3]=(char)(lc640_read_int(EE_U_UP)%256);
00053e  2022              MOVS     r0,#0x22
000540  f7fffffe          BL       lc640_read_int
000544  70e0              STRB     r0,[r4,#3]
;;;1537   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
000546  48f7              LDR      r0,|L1.2340|
;;;1538   modbus_registers[5]=(char)(U_maxg%256);
;;;1539   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1540   modbus_registers[7]=(char)(I_maxp%256);
;;;1541   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1542   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1543   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1544   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1545   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
000548  f44f2861          MOV      r8,#0xe1000
;;;1546   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00054c  f44f6c61          MOV      r12,#0xe10
000550  f9b00000          LDRSH    r0,[r0,#0]            ;1537  ; U_maxg
000554  17c1              ASRS     r1,r0,#31             ;1537
000556  eb006111          ADD      r1,r0,r1,LSR #24      ;1537
00055a  120a              ASRS     r2,r1,#8              ;1537
00055c  7122              STRB     r2,[r4,#4]            ;1537
00055e  7160              STRB     r0,[r4,#5]            ;1538
000560  48f1              LDR      r0,|L1.2344|
000562  f9b00000          LDRSH    r0,[r0,#0]            ;1539  ; I_maxp
000566  17c1              ASRS     r1,r0,#31             ;1539
000568  eb006111          ADD      r1,r0,r1,LSR #24      ;1539
00056c  120a              ASRS     r2,r1,#8              ;1539
00056e  71a2              STRB     r2,[r4,#6]            ;1539
000570  71e0              STRB     r0,[r4,#7]            ;1540
000572  48ee              LDR      r0,|L1.2348|
000574  213c              MOVS     r1,#0x3c              ;1541
000576  6802              LDR      r2,[r0,#0]            ;1541  ; T_PROC_GS
000578  fb92f7f1          SDIV     r7,r2,r1              ;1541
00057c  fb012017          MLS      r0,r1,r7,r2           ;1541
000580  17c3              ASRS     r3,r0,#31             ;1541
000582  eb006313          ADD      r3,r0,r3,LSR #24      ;1541
000586  121e              ASRS     r6,r3,#8              ;1541
000588  7226              STRB     r6,[r4,#8]            ;1541
00058a  7260              STRB     r0,[r4,#9]            ;1542
00058c  fb97f0f1          SDIV     r0,r7,r1              ;1543
000590  fb017010          MLS      r0,r1,r0,r7           ;1543
000594  17c3              ASRS     r3,r0,#31             ;1543
000596  eb006313          ADD      r3,r0,r3,LSR #24      ;1543
00059a  121e              ASRS     r6,r3,#8              ;1543
00059c  72a6              STRB     r6,[r4,#0xa]          ;1543
00059e  72e0              STRB     r0,[r4,#0xb]          ;1544
0005a0  fb92f0f8          SDIV     r0,r2,r8              ;1545
0005a4  7320              STRB     r0,[r4,#0xc]          ;1545
0005a6  fb92f0fc          SDIV     r0,r2,r12
0005aa  7360              STRB     r0,[r4,#0xd]
;;;1547   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0005ac  48e0              LDR      r0,|L1.2352|
0005ae  6802              LDR      r2,[r0,#0]  ; T_PROC_PS
0005b0  fb92f7f1          SDIV     r7,r2,r1
0005b4  fb012017          MLS      r0,r1,r7,r2
0005b8  17c3              ASRS     r3,r0,#31
0005ba  eb006313          ADD      r3,r0,r3,LSR #24
0005be  121e              ASRS     r6,r3,#8
0005c0  73a6              STRB     r6,[r4,#0xe]
;;;1548   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0005c2  73e0              STRB     r0,[r4,#0xf]
;;;1549   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0005c4  fb97f0f1          SDIV     r0,r7,r1
0005c8  fb017010          MLS      r0,r1,r0,r7
0005cc  17c1              ASRS     r1,r0,#31
0005ce  eb006111          ADD      r1,r0,r1,LSR #24
0005d2  120b              ASRS     r3,r1,#8
0005d4  7423              STRB     r3,[r4,#0x10]
;;;1550   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
0005d6  7460              STRB     r0,[r4,#0x11]
;;;1551   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
0005d8  fb92f0f8          SDIV     r0,r2,r8
0005dc  74a0              STRB     r0,[r4,#0x12]
;;;1552   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
0005de  fb92f0fc          SDIV     r0,r2,r12
0005e2  74e0              STRB     r0,[r4,#0x13]
;;;1553   modbus_registers[20]=0;								//Πεγ60
0005e4  2000              MOVS     r0,#0
;;;1554   modbus_registers[21]=0;
;;;1555   if(work_stat==wsPS)modbus_registers[21]=1;
0005e6  49d3              LDR      r1,|L1.2356|
0005e8  7520              STRB     r0,[r4,#0x14]         ;1553
0005ea  7560              STRB     r0,[r4,#0x15]         ;1554
0005ec  780a              LDRB     r2,[r1,#0]  ; work_stat
0005ee  2101              MOVS     r1,#1
0005f0  2a02              CMP      r2,#2
0005f2  d100              BNE      |L1.1526|
0005f4  7561              STRB     r1,[r4,#0x15]
                  |L1.1526|
;;;1556   modbus_registers[22]=0;								//Πεγ61
0005f6  75a0              STRB     r0,[r4,#0x16]
;;;1557   modbus_registers[23]=0;
0005f8  75e0              STRB     r0,[r4,#0x17]
;;;1558   if(work_stat==wsGS)modbus_registers[23]=1;
0005fa  2a01              CMP      r2,#1
0005fc  d100              BNE      |L1.1536|
0005fe  75e1              STRB     r1,[r4,#0x17]
                  |L1.1536|
;;;1559   modbus_registers[24]=0;								//Πεγ62
;;;1560   modbus_registers[25]=0;
;;;1561   if(REV_STAT==rsREW)modbus_registers[25]=1;
000600  4acd              LDR      r2,|L1.2360|
000602  7620              STRB     r0,[r4,#0x18]         ;1559
000604  7660              STRB     r0,[r4,#0x19]         ;1560
000606  7812              LDRB     r2,[r2,#0]  ; REV_STAT
000608  b902              CBNZ     r2,|L1.1548|
00060a  7661              STRB     r1,[r4,#0x19]
                  |L1.1548|
;;;1562   modbus_registers[26]=0;								//Πεγ63
00060c  76a0              STRB     r0,[r4,#0x1a]
;;;1563   modbus_registers[27]=0;
00060e  76e0              STRB     r0,[r4,#0x1b]
;;;1564   if(AVT_REV_IS_ON)modbus_registers[27]=1;
000610  48ca              LDR      r0,|L1.2364|
000612  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
000614  b100              CBZ      r0,|L1.1560|
000616  76e1              STRB     r1,[r4,#0x1b]
                  |L1.1560|
;;;1565   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000618  48c9              LDR      r0,|L1.2368|
00061a  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_FF
00061e  17c1              ASRS     r1,r0,#31
000620  eb006111          ADD      r1,r0,r1,LSR #24
000624  120a              ASRS     r2,r1,#8
000626  f8042f1c          STRB     r2,[r4,#0x1c]!
;;;1566   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
00062a  7060              STRB     r0,[r4,#1]
;;;1567   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
00062c  48c5              LDR      r0,|L1.2372|
00062e  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_REW
000632  17c1              ASRS     r1,r0,#31
000634  eb006111          ADD      r1,r0,r1,LSR #24
000638  120a              ASRS     r2,r1,#8
00063a  70a2              STRB     r2,[r4,#2]
;;;1568   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00063c  70e0              STRB     r0,[r4,#3]
;;;1569   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00063e  48c2              LDR      r0,|L1.2376|
000640  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_PAUSE
000644  17c1              ASRS     r1,r0,#31
000646  eb006111          ADD      r1,r0,r1,LSR #24
00064a  120a              ASRS     r2,r1,#8
00064c  7122              STRB     r2,[r4,#4]
;;;1570   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
00064e  7160              STRB     r0,[r4,#5]
;;;1571   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
000650  48be              LDR      r0,|L1.2380|
000652  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_FF
000656  17c1              ASRS     r1,r0,#31
000658  eb006111          ADD      r1,r0,r1,LSR #24
00065c  120a              ASRS     r2,r1,#8
00065e  71a2              STRB     r2,[r4,#6]
;;;1572   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
000660  71e0              STRB     r0,[r4,#7]
;;;1573   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
000662  48bb              LDR      r0,|L1.2384|
000664  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_REW
000668  17c1              ASRS     r1,r0,#31
00066a  eb006111          ADD      r1,r0,r1,LSR #24
00066e  120a              ASRS     r2,r1,#8
000670  7222              STRB     r2,[r4,#8]
;;;1574   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
000672  7260              STRB     r0,[r4,#9]
;;;1575   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
000674  48b7              LDR      r0,|L1.2388|
000676  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_FF
00067a  17c1              ASRS     r1,r0,#31
00067c  eb006111          ADD      r1,r0,r1,LSR #24
000680  120a              ASRS     r2,r1,#8
000682  72a2              STRB     r2,[r4,#0xa]
;;;1576   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
000684  72e0              STRB     r0,[r4,#0xb]
;;;1577   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
000686  48b4              LDR      r0,|L1.2392|
000688  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_REW
00068c  17c1              ASRS     r1,r0,#31
00068e  eb006111          ADD      r1,r0,r1,LSR #24
000692  120a              ASRS     r2,r1,#8
000694  7322              STRB     r2,[r4,#0xc]
;;;1578   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
000696  7360              STRB     r0,[r4,#0xd]
;;;1579   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
000698  48b0              LDR      r0,|L1.2396|
00069a  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_ZAR_TIME
00069e  17c1              ASRS     r1,r0,#31
0006a0  eb006111          ADD      r1,r0,r1,LSR #24
0006a4  120a              ASRS     r2,r1,#8
0006a6  73a2              STRB     r2,[r4,#0xe]
;;;1580   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
0006a8  73e0              STRB     r0,[r4,#0xf]
;;;1581   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
0006aa  48ad              LDR      r0,|L1.2400|
0006ac  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
0006b0  17c1              ASRS     r1,r0,#31
0006b2  eb006111          ADD      r1,r0,r1,LSR #24
0006b6  120a              ASRS     r2,r1,#8
0006b8  7422              STRB     r2,[r4,#0x10]
;;;1582   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
0006ba  7460              STRB     r0,[r4,#0x11]
;;;1583   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
0006bc  48a9              LDR      r0,|L1.2404|
0006be  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
0006c2  17c1              ASRS     r1,r0,#31
0006c4  eb006111          ADD      r1,r0,r1,LSR #24
0006c8  120a              ASRS     r2,r1,#8
0006ca  74a2              STRB     r2,[r4,#0x12]
;;;1584   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
0006cc  74e0              STRB     r0,[r4,#0x13]
;;;1585   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
0006ce  48a6              LDR      r0,|L1.2408|
0006d0  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
0006d4  17c1              ASRS     r1,r0,#31
0006d6  eb006111          ADD      r1,r0,r1,LSR #24
0006da  120a              ASRS     r2,r1,#8
0006dc  7522              STRB     r2,[r4,#0x14]
;;;1586   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
0006de  7560              STRB     r0,[r4,#0x15]
;;;1587   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
0006e0  48a2              LDR      r0,|L1.2412|
0006e2  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_MAX_VOLT
0006e6  17c1              ASRS     r1,r0,#31
0006e8  eb006111          ADD      r1,r0,r1,LSR #24
0006ec  120a              ASRS     r2,r1,#8
0006ee  75a2              STRB     r2,[r4,#0x16]
;;;1588   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
0006f0  75e0              STRB     r0,[r4,#0x17]
;;;1589   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
0006f2  489f              LDR      r0,|L1.2416|
0006f4  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_WRK_CURR
0006f8  17c1              ASRS     r1,r0,#31
0006fa  eb006111          ADD      r1,r0,r1,LSR #24
0006fe  120a              ASRS     r2,r1,#8
000700  7622              STRB     r2,[r4,#0x18]
;;;1590   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
000702  7660              STRB     r0,[r4,#0x19]
;;;1591   
;;;1592   modbus_registers[80]=(char)((I_ug_ram)/256);			//Πεγ90
000704  489b              LDR      r0,|L1.2420|
000706  f9b00000          LDRSH    r0,[r0,#0]  ; I_ug_ram
00070a  17c1              ASRS     r1,r0,#31
00070c  eb006111          ADD      r1,r0,r1,LSR #24
000710  120a              ASRS     r2,r1,#8
000712  f8842034          STRB     r2,[r4,#0x34]
;;;1593   modbus_registers[81]=(char)((I_ug_ram)%256);
000716  f8840035          STRB     r0,[r4,#0x35]
;;;1594   modbus_registers[82]=(char)((U_up_ram)/256);			//Πεγ91
00071a  4897              LDR      r0,|L1.2424|
00071c  f9b00000          LDRSH    r0,[r0,#0]  ; U_up_ram
000720  17c1              ASRS     r1,r0,#31
000722  eb006111          ADD      r1,r0,r1,LSR #24
000726  120a              ASRS     r2,r1,#8
000728  f8842036          STRB     r2,[r4,#0x36]
00072c  4a7c              LDR      r2,|L1.2336|
;;;1595   modbus_registers[83]=(char)((U_up_ram)%256);
00072e  f8840037          STRB     r0,[r4,#0x37]
;;;1596   
;;;1597   if(prot==MODBUS_RTU_PROT)
;;;1598   	{
;;;1599   	modbus_tx_buff[0]=adr;
;;;1600   	modbus_tx_buff[1]=func;
;;;1601   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1602   	
;;;1603   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-50)*2],reg_quantity*2);
000732  eb02014b          ADD      r1,r2,r11,LSL #1
000736  3964              SUBS     r1,r1,#0x64
000738  f1b90f00          CMP      r9,#0                 ;1597
00073c  d006              BEQ      |L1.1868|
;;;1604   							   
;;;1605   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1606   	
;;;1607   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1608   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1609   	
;;;1610   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1611   		{
;;;1612   		putchar0(modbus_tx_buff[i]);
;;;1613   		}
;;;1614   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1615   		{
;;;1616   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1617   		}
;;;1618   	}
;;;1619   else if(prot==MODBUS_TCP_PROT)
00073e  f1b90f01          CMP      r9,#1
000742  d101              BNE      |L1.1864|
;;;1620   	{
;;;1621   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
000744  488d              LDR      r0,|L1.2428|
000746  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1864|
;;;1622   	}
;;;1623   // modbus_tcp_out_ptr=(char*)(&modbus_registers[0]);
;;;1624   //modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
;;;1625   }
000748  b037              ADD      sp,sp,#0xdc
00074a  e666              B        |L1.1050|
                  |L1.1868|
00074c  f88da000          STRB     r10,[sp,#0]           ;1599
000750  9834              LDR      r0,[sp,#0xd0]         ;1600
000752  f88d0001          STRB     r0,[sp,#1]            ;1600
000756  006a              LSLS     r2,r5,#1              ;1601
000758  466e              MOV      r6,sp                 ;1603
00075a  f88d2002          STRB     r2,[sp,#2]            ;1601
00075e  1cf0              ADDS     r0,r6,#3              ;1603
000760  f7fffffe          BL       __aeabi_memcpy
000764  2003              MOVS     r0,#3                 ;1605
000766  eb000045          ADD      r0,r0,r5,LSL #1       ;1605
00076a  b201              SXTH     r1,r0                 ;1605
00076c  4668              MOV      r0,sp                 ;1605
00076e  f7fffffe          BL       CRC16_2
000772  eb060145          ADD      r1,r6,r5,LSL #1       ;1607
000776  2400              MOVS     r4,#0                 ;1610
000778  70c8              STRB     r0,[r1,#3]            ;1607
00077a  0a00              LSRS     r0,r0,#8              ;1608
00077c  7108              STRB     r0,[r1,#4]            ;1608
00077e  2005              MOVS     r0,#5                 ;1610
000780  eb000545          ADD      r5,r0,r5,LSL #1       ;1610
000784  e004              B        |L1.1936|
                  |L1.1926|
000786  5d30              LDRB     r0,[r6,r4]            ;1612
000788  f7fffffe          BL       putchar0
00078c  1c64              ADDS     r4,r4,#1              ;1610
00078e  b2e4              UXTB     r4,r4                 ;1610
                  |L1.1936|
000790  42a5              CMP      r5,r4                 ;1610
000792  d8f8              BHI      |L1.1926|
000794  2400              MOVS     r4,#0                 ;1614
000796  e004              B        |L1.1954|
                  |L1.1944|
000798  5d30              LDRB     r0,[r6,r4]            ;1616
00079a  f7fffffe          BL       putchar_sc16is700
00079e  1c64              ADDS     r4,r4,#1              ;1614
0007a0  b2e4              UXTB     r4,r4                 ;1614
                  |L1.1954|
0007a2  42a5              CMP      r5,r4                 ;1614
0007a4  d8f8              BHI      |L1.1944|
0007a6  e7cf              B        |L1.1864|
;;;1626   
                          ENDP

                  modbus_for_pult_registers_transmit PROC
;;;1294   //-----------------------------------------------
;;;1295   void modbus_for_pult_registers_transmit(unsigned short reg_quantity)
0007a8  b570              PUSH     {r4-r6,lr}
;;;1296   {
0007aa  4606              MOV      r6,r0
;;;1297   char modbus_registers[20];
;;;1298   char modbus_tx_buff[30];
;;;1299   unsigned short crc_temp;
;;;1300   char i;
;;;1301   //char reg_quantity=4;
;;;1302   
;;;1303   //pult_time_set=0xffff;
;;;1304   
;;;1305   modbus_registers[0]=(char)(pult_u%256);
0007ac  4874              LDR      r0,|L1.2432|
0007ae  b090              SUB      sp,sp,#0x40           ;1296
;;;1306   modbus_registers[1]=(char)(pult_u/256);					//Πεγ1
;;;1307   modbus_registers[2]=(char)(pult_i%256);
;;;1308   modbus_registers[3]=(char)(pult_i/256);					//Πεγ2
;;;1309   modbus_registers[4]=(char)(pult_work_stat%256);
;;;1310   modbus_registers[5]=(char)(pult_work_stat/256);			//Πεγ3
;;;1311   modbus_registers[6]=(char)(pult_u_set%256);
;;;1312   modbus_registers[7]=(char)(pult_u_set/256);				//Πεγ4
;;;1313   modbus_registers[8]=(char)(pult_time%256);
;;;1314   modbus_registers[9]=(char)(pult_time/256);				//Πεγ5
;;;1315   modbus_registers[10]=(char)(pult_time_set%256);		 	
;;;1316   modbus_registers[11]=(char)(pult_time_set/256);			//Πεγ6
;;;1317   modbus_registers[12]=(char)(pult_i_set%256);
;;;1318   modbus_registers[13]=(char)(pult_i_set/256);				//Πεγ7
;;;1319   
;;;1320   
;;;1321   modbus_tx_buff[0]=201;
;;;1322   modbus_tx_buff[1]=4;
;;;1323   modbus_tx_buff[2]=(char)(reg_quantity*2);
0007b0  0072              LSLS     r2,r6,#1
0007b2  f9b00000          LDRSH    r0,[r0,#0]            ;1305  ; pult_u
0007b6  f88d0024          STRB     r0,[sp,#0x24]         ;1305
0007ba  17c1              ASRS     r1,r0,#31             ;1305
0007bc  eb006111          ADD      r1,r0,r1,LSR #24      ;1305
0007c0  1208              ASRS     r0,r1,#8              ;1306
0007c2  f88d0025          STRB     r0,[sp,#0x25]         ;1306
0007c6  486f              LDR      r0,|L1.2436|
;;;1324   
;;;1325   memcpy((char*)&modbus_tx_buff[3],(char*)modbus_registers,reg_quantity*2);
0007c8  466c              MOV      r4,sp
0007ca  f9b00000          LDRSH    r0,[r0,#0]            ;1307  ; pult_i
0007ce  f88d0026          STRB     r0,[sp,#0x26]         ;1307
0007d2  17c1              ASRS     r1,r0,#31             ;1307
0007d4  eb006111          ADD      r1,r0,r1,LSR #24      ;1307
0007d8  1208              ASRS     r0,r1,#8              ;1308
0007da  f88d0027          STRB     r0,[sp,#0x27]         ;1308
0007de  486a              LDR      r0,|L1.2440|
0007e0  7800              LDRB     r0,[r0,#0]            ;1309  ; pult_work_stat
0007e2  f88d0028          STRB     r0,[sp,#0x28]         ;1309
0007e6  2000              MOVS     r0,#0                 ;1310
0007e8  f88d0029          STRB     r0,[sp,#0x29]         ;1310
0007ec  4867              LDR      r0,|L1.2444|
0007ee  f9b00000          LDRSH    r0,[r0,#0]            ;1311  ; pult_u_set
0007f2  f88d002a          STRB     r0,[sp,#0x2a]         ;1311
0007f6  17c1              ASRS     r1,r0,#31             ;1311
0007f8  eb006111          ADD      r1,r0,r1,LSR #24      ;1311
0007fc  1208              ASRS     r0,r1,#8              ;1312
0007fe  f88d002b          STRB     r0,[sp,#0x2b]         ;1312
000802  4863              LDR      r0,|L1.2448|
000804  f9b00000          LDRSH    r0,[r0,#0]            ;1313  ; pult_time
000808  f88d002c          STRB     r0,[sp,#0x2c]         ;1313
00080c  17c1              ASRS     r1,r0,#31             ;1313
00080e  eb006111          ADD      r1,r0,r1,LSR #24      ;1313
000812  1208              ASRS     r0,r1,#8              ;1314
000814  f88d002d          STRB     r0,[sp,#0x2d]         ;1314
000818  485e              LDR      r0,|L1.2452|
00081a  8800              LDRH     r0,[r0,#0]            ;1315  ; pult_time_set
00081c  f88d002e          STRB     r0,[sp,#0x2e]         ;1315
000820  0a00              LSRS     r0,r0,#8              ;1316
000822  f88d002f          STRB     r0,[sp,#0x2f]         ;1316
000826  485c              LDR      r0,|L1.2456|
000828  f9b00000          LDRSH    r0,[r0,#0]            ;1317  ; pult_i_set
00082c  f88d0030          STRB     r0,[sp,#0x30]         ;1317
000830  17c1              ASRS     r1,r0,#31             ;1317
000832  eb006111          ADD      r1,r0,r1,LSR #24      ;1317
000836  1208              ASRS     r0,r1,#8              ;1318
000838  f88d0031          STRB     r0,[sp,#0x31]         ;1318
00083c  20c9              MOVS     r0,#0xc9              ;1321
00083e  f88d0000          STRB     r0,[sp,#0]            ;1321
000842  2004              MOVS     r0,#4                 ;1322
000844  f88d0001          STRB     r0,[sp,#1]            ;1322
000848  f88d2002          STRB     r2,[sp,#2]            ;1323
00084c  a909              ADD      r1,sp,#0x24
00084e  1ce0              ADDS     r0,r4,#3
000850  f7fffffe          BL       __aeabi_memcpy
;;;1326   
;;;1327   crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
000854  2003              MOVS     r0,#3
000856  eb000046          ADD      r0,r0,r6,LSL #1
00085a  b201              SXTH     r1,r0
00085c  4668              MOV      r0,sp
00085e  f7fffffe          BL       CRC16_2
;;;1328   
;;;1329   modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
000862  eb040146          ADD      r1,r4,r6,LSL #1
;;;1330   modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1331   
;;;1332   for (i=0;i<(5+(reg_quantity*2));i++)
000866  2500              MOVS     r5,#0
000868  70c8              STRB     r0,[r1,#3]            ;1329
00086a  0a00              LSRS     r0,r0,#8              ;1330
00086c  7108              STRB     r0,[r1,#4]            ;1330
00086e  2005              MOVS     r0,#5
000870  eb000646          ADD      r6,r0,r6,LSL #1
000874  e004              B        |L1.2176|
                  |L1.2166|
;;;1333   	{
;;;1334   	putchar0(modbus_tx_buff[i]);
000876  5d60              LDRB     r0,[r4,r5]
000878  f7fffffe          BL       putchar0
00087c  1c6d              ADDS     r5,r5,#1              ;1332
00087e  b2ed              UXTB     r5,r5                 ;1332
                  |L1.2176|
000880  42ae              CMP      r6,r5                 ;1332
000882  d8f8              BHI      |L1.2166|
;;;1335   	}
;;;1336   for (i=0;i<(5+(reg_quantity*2));i++)
000884  2500              MOVS     r5,#0
000886  e004              B        |L1.2194|
                  |L1.2184|
;;;1337   	{
;;;1338   	putchar_sc16is700(modbus_tx_buff[i]);
000888  5d60              LDRB     r0,[r4,r5]
00088a  f7fffffe          BL       putchar_sc16is700
00088e  1c6d              ADDS     r5,r5,#1              ;1336
000890  b2ed              UXTB     r5,r5                 ;1336
                  |L1.2194|
000892  42ae              CMP      r6,r5                 ;1336
000894  d8f8              BHI      |L1.2184|
;;;1339   	}
;;;1340   //modbus_plazma1++;
;;;1341   }
000896  b010              ADD      sp,sp,#0x40
000898  bd70              POP      {r4-r6,pc}
;;;1342   
                          ENDP

                  modbus_in PROC
;;;62     //-----------------------------------------------
;;;63     void modbus_in(void)
00089a  e92d4ff0          PUSH     {r4-r11,lr}
;;;64     {
;;;65     short crc16_calculated;		//βϋχθρλεμΰ θη οπθνςϋυ δΰννϋυ CRC
;;;66     short crc16_incapsulated;	//βρςπξενννΰ β οξρϋλκσ CRC
;;;67     unsigned short modbus_rx_arg0;		//βρςπξεννϋι β οξρϋλκσ οεπβϋι ΰπγσμενς
;;;68     unsigned short modbus_rx_arg1;		//βρςπξεννϋι β οξρϋλκσ βςξπξι ΰπγσμενς
;;;69     //unsigned short modbus_rx_arg2;		//βρςπξεννϋι β οξρϋλκσ ςπεςθι ΰπγσμενς
;;;70     //unsigned short modbus_rx_arg3;		//βρςπξεννϋι β οξρϋλκσ χεςβεπςϋι ΰπγσμενς
;;;71     unsigned char modbus_func;			//βρςπξεννϋι β οξρϋλκσ κξδ τσνκφθθ
;;;72     
;;;73     //modbus_plazma++;
;;;74     
;;;75     memcpy(modbus_an_buffer,modbus_rx_buffer,modbus_rx_buffer_ptr);
00089e  4c3f              LDR      r4,|L1.2460|
0008a0  491f              LDR      r1,|L1.2336|
0008a2  b08b              SUB      sp,sp,#0x2c           ;64
0008a4  78a2              LDRB     r2,[r4,#2]  ; modbus_rx_buffer_ptr
0008a6  393c              SUBS     r1,r1,#0x3c
0008a8  4615              MOV      r5,r2
0008aa  f101001e          ADD      r0,r1,#0x1e
0008ae  f7fffffe          BL       __aeabi_memcpy
;;;76     modbus_rx_counter=modbus_rx_buffer_ptr;
0008b2  70e5              STRB     r5,[r4,#3]
;;;77     modbus_rx_buffer_ptr=0;
0008b4  2600              MOVS     r6,#0
;;;78     bMODBUS_TIMEOUT=0;
;;;79     
;;;80     	
;;;81     crc16_calculated  = CRC16_2((char*)modbus_an_buffer, modbus_rx_counter-2);
0008b6  481a              LDR      r0,|L1.2336|
0008b8  70a6              STRB     r6,[r4,#2]            ;77
0008ba  7066              STRB     r6,[r4,#1]            ;78
0008bc  1ea9              SUBS     r1,r5,#2
0008be  381e              SUBS     r0,r0,#0x1e
0008c0  f7fffffe          BL       CRC16_2
0008c4  b200              SXTH     r0,r0
0008c6  4680              MOV      r8,r0
;;;82     crc16_incapsulated = *((short*)&modbus_an_buffer[modbus_rx_counter-2]);
0008c8  4d15              LDR      r5,|L1.2336|
0008ca  78e0              LDRB     r0,[r4,#3]  ; modbus_rx_counter
0008cc  3d1e              SUBS     r5,r5,#0x1e
0008ce  4428              ADD      r0,r0,r5
;;;83     
;;;84     //modbus_plazma=modbus_rx_counter;
;;;85     //modbus_plazma2=crc16_calculated;
;;;86     //modbus_plazma3=crc16_incapsulated;
;;;87     
;;;88     pvlk=0;
0008d0  4c33              LDR      r4,|L1.2464|
0008d2  f9300c02          LDRSH    r0,[r0,#-2]           ;82
;;;89     
;;;90     
;;;91     if(modbus_an_buffer[0]=='r')
;;;92     	{
;;;93     	pvlk=1;
;;;94     	if(modbus_an_buffer[1]=='e')
;;;95     		{
;;;96     		pvlk=2;
;;;97     		if(modbus_an_buffer[2]=='a')
;;;98     			{
;;;99     			pvlk=3;
0008d6  f04f0b03          MOV      r11,#3
0008da  4681              MOV      r9,r0                 ;82
0008dc  8026              STRH     r6,[r4,#0]            ;88
0008de  7828              LDRB     r0,[r5,#0]            ;91  ; modbus_an_buffer
;;;100    			if(modbus_an_buffer[3]=='d')
;;;101    				{
;;;102    				pvlk=4;
;;;103    				/*if(modbus_an_buffer[6]==crc_87(modbus_an_buffer,6))
;;;104    					{
;;;105    					pvlk=5;
;;;106    					if(modbus_an_buffer[7]==crc_95(modbus_an_buffer,6))
;;;107    						{
;;;108    						pvlk=6;*/	
;;;109    
;;;110    							{
;;;111    							unsigned short ptr;
;;;112    							unsigned long data1,data2;
;;;113    							char temp_out[20];
;;;114    							pvlk++;
;;;115    							ptr=modbus_an_buffer[4]+(modbus_an_buffer[5]*256U);
;;;116    							data1=lc640_read_long(ptr);
;;;117    							data2=lc640_read_long(ptr+4);
;;;118    							temp_out[0]='r';
;;;119    							temp_out[1]='e';
;;;120    							temp_out[2]='a';
;;;121    							temp_out[3]='d';
;;;122    							temp_out[4]=*((char*)&ptr);
;;;123    							temp_out[5]=*(((char*)&ptr)+1);	
;;;124    							temp_out[6]=*((char*)&data1);
;;;125    							temp_out[7]=*(((char*)&data1)+1);		
;;;126    							temp_out[8]=*(((char*)&data1)+2);	
;;;127    							temp_out[9]=*(((char*)&data1)+3);		
;;;128    							temp_out[10]=*((char*)&data2);
;;;129    							temp_out[11]=*(((char*)&data2)+1);		
;;;130    							temp_out[12]=*(((char*)&data2)+2);	
;;;131    							temp_out[13]=*(((char*)&data2)+3);	
;;;132    							temp_out[14]=crc_87(temp_out,14);	
;;;133    							temp_out[15]=crc_95(temp_out,14);			
;;;134    							
;;;135    							temp_out[17]=0;
;;;136    							for (i=0;i<16;i++)
0008e0  4e30              LDR      r6,|L1.2468|
0008e2  f04f0a05          MOV      r10,#5                ;114
0008e6  2872              CMP      r0,#0x72              ;91
0008e8  d17e              BNE      |L1.2536|
0008ea  2001              MOVS     r0,#1                 ;93
0008ec  8020              STRH     r0,[r4,#0]            ;93
0008ee  7868              LDRB     r0,[r5,#1]            ;94  ; modbus_an_buffer
0008f0  2865              CMP      r0,#0x65              ;94
                  |L1.2290|
0008f2  d17a              BNE      |L1.2538|
0008f4  2002              MOVS     r0,#2                 ;96
0008f6  8020              STRH     r0,[r4,#0]            ;96
0008f8  78a8              LDRB     r0,[r5,#2]            ;97  ; modbus_an_buffer
0008fa  2861              CMP      r0,#0x61              ;97
0008fc  d1f9              BNE      |L1.2290|
0008fe  f8a4b000          STRH     r11,[r4,#0]           ;99
000902  78e8              LDRB     r0,[r5,#3]            ;100  ; modbus_an_buffer
000904  2864              CMP      r0,#0x64              ;100
000906  d1f4              BNE      |L1.2290|
000908  f8a4a000          STRH     r10,[r4,#0]           ;114
00090c  7928              LDRB     r0,[r5,#4]            ;115  ; modbus_an_buffer
00090e  7969              LDRB     r1,[r5,#5]            ;115  ; modbus_an_buffer
000910  eb002001          ADD      r0,r0,r1,LSL #8       ;115
000914  b280              UXTH     r0,r0                 ;115
000916  f8ad0014          STRH     r0,[sp,#0x14]         ;115
00091a  4607              MOV      r7,r0                 ;115
00091c  e044              B        |L1.2472|
00091e  0000              DCW      0x0000
                  |L1.2336|
                          DCD      ||area_number.4||+0x3c
                  |L1.2340|
                          DCD      U_maxg
                  |L1.2344|
                          DCD      I_maxp
                  |L1.2348|
                          DCD      T_PROC_GS
                  |L1.2352|
                          DCD      T_PROC_PS
                  |L1.2356|
                          DCD      work_stat
                  |L1.2360|
                          DCD      REV_STAT
                  |L1.2364|
                          DCD      AVT_REV_IS_ON
                  |L1.2368|
                          DCD      AVT_REV_TIME_FF
                  |L1.2372|
                          DCD      AVT_REV_TIME_REW
                  |L1.2376|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.2380|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.2384|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.2388|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.2392|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.2396|
                          DCD      CAP_ZAR_TIME
                  |L1.2400|
                          DCD      CAP_PAUSE1_TIME
                  |L1.2404|
                          DCD      CAP_RAZR_TIME
                  |L1.2408|
                          DCD      CAP_PAUSE2_TIME
                  |L1.2412|
                          DCD      CAP_MAX_VOLT
                  |L1.2416|
                          DCD      CAP_WRK_CURR
                  |L1.2420|
                          DCD      I_ug_ram
                  |L1.2424|
                          DCD      U_up_ram
                  |L1.2428|
                          DCD      modbus_tcp_out_ptr
                  |L1.2432|
                          DCD      pult_u
                  |L1.2436|
                          DCD      pult_i
                  |L1.2440|
                          DCD      pult_work_stat
                  |L1.2444|
                          DCD      pult_u_set
                  |L1.2448|
                          DCD      pult_time
                  |L1.2452|
                          DCD      pult_time_set
                  |L1.2456|
                          DCD      pult_i_set
                  |L1.2460|
                          DCD      ||.data||
                  |L1.2464|
                          DCD      pvlk
                  |L1.2468|
                          DCD      i
                  |L1.2472|
0009a8  f7fffffe          BL       lc640_read_long
0009ac  9007              STR      r0,[sp,#0x1c]         ;117
0009ae  1d38              ADDS     r0,r7,#4              ;117
0009b0  f7fffffe          BL       lc640_read_long
0009b4  9006              STR      r0,[sp,#0x18]         ;118
0009b6  2072              MOVS     r0,#0x72              ;118
0009b8  f88d0000          STRB     r0,[sp,#0]            ;118
0009bc  2065              MOVS     r0,#0x65              ;119
0009be  f88d0001          STRB     r0,[sp,#1]            ;119
0009c2  2061              MOVS     r0,#0x61              ;120
0009c4  f88d0002          STRB     r0,[sp,#2]            ;120
0009c8  2064              MOVS     r0,#0x64              ;121
0009ca  f88d0003          STRB     r0,[sp,#3]            ;121
0009ce  f89d0014          LDRB     r0,[sp,#0x14]         ;122
0009d2  f88d0004          STRB     r0,[sp,#4]            ;122
0009d6  f89d0015          LDRB     r0,[sp,#0x15]         ;123
0009da  f88d0005          STRB     r0,[sp,#5]            ;123
0009de  f89d001c          LDRB     r0,[sp,#0x1c]         ;124
0009e2  f88d0006          STRB     r0,[sp,#6]            ;124
0009e6  e001              B        |L1.2540|
                  |L1.2536|
0009e8  e049              B        |L1.2686|
                  |L1.2538|
0009ea  e0ca              B        |L1.2946|
                  |L1.2540|
0009ec  f89d001d          LDRB     r0,[sp,#0x1d]         ;125
0009f0  f88d0007          STRB     r0,[sp,#7]            ;125
0009f4  f89d001e          LDRB     r0,[sp,#0x1e]         ;126
0009f8  f88d0008          STRB     r0,[sp,#8]            ;126
0009fc  f89d001f          LDRB     r0,[sp,#0x1f]         ;127
000a00  f88d0009          STRB     r0,[sp,#9]            ;127
000a04  f89d0018          LDRB     r0,[sp,#0x18]         ;128
000a08  f88d000a          STRB     r0,[sp,#0xa]          ;128
000a0c  f89d0019          LDRB     r0,[sp,#0x19]         ;129
000a10  f88d000b          STRB     r0,[sp,#0xb]          ;129
000a14  f89d001a          LDRB     r0,[sp,#0x1a]         ;130
000a18  f88d000c          STRB     r0,[sp,#0xc]          ;130
000a1c  f89d001b          LDRB     r0,[sp,#0x1b]         ;131
000a20  f88d000d          STRB     r0,[sp,#0xd]          ;131
000a24  210e              MOVS     r1,#0xe               ;132
000a26  4668              MOV      r0,sp                 ;132
000a28  f7fffffe          BL       crc_87
000a2c  f88d000e          STRB     r0,[sp,#0xe]          ;132
000a30  210e              MOVS     r1,#0xe               ;133
000a32  4668              MOV      r0,sp                 ;133
000a34  f7fffffe          BL       crc_95
000a38  f88d000f          STRB     r0,[sp,#0xf]          ;133
000a3c  2000              MOVS     r0,#0                 ;135
000a3e  f88d0011          STRB     r0,[sp,#0x11]         ;135
000a42  7030              STRB     r0,[r6,#0]
000a44  466f              MOV      r7,sp                 ;113
                  |L1.2630|
;;;137    								{
;;;138    								putchar_sc16is700(temp_out[i]);
000a46  b2c0              UXTB     r0,r0
000a48  5c38              LDRB     r0,[r7,r0]
000a4a  f7fffffe          BL       putchar_sc16is700
;;;139    								temp_out[17]^=temp_out[i];
000a4e  7830              LDRB     r0,[r6,#0]  ; i
000a50  f89d1011          LDRB     r1,[sp,#0x11]
000a54  5c3a              LDRB     r2,[r7,r0]
000a56  1c40              ADDS     r0,r0,#1              ;136
000a58  4051              EORS     r1,r1,r2
000a5a  b2c0              UXTB     r0,r0                 ;136
000a5c  f88d1011          STRB     r1,[sp,#0x11]
000a60  7030              STRB     r0,[r6,#0]            ;136
000a62  2810              CMP      r0,#0x10              ;136
000a64  d3ef              BCC      |L1.2630|
;;;140    								}
;;;141    							putchar_sc16is700(16);
000a66  2010              MOVS     r0,#0x10
000a68  f7fffffe          BL       putchar_sc16is700
;;;142    							putchar_sc16is700(temp_out[17]^16);
000a6c  f89d0011          LDRB     r0,[sp,#0x11]
000a70  f0800010          EOR      r0,r0,#0x10
000a74  f7fffffe          BL       putchar_sc16is700
;;;143    							putchar_sc16is700(0x0a);
000a78  200a              MOVS     r0,#0xa
000a7a  f7fffffe          BL       putchar_sc16is700
                  |L1.2686|
;;;144    							}
;;;145    						}
;;;146    					}
;;;147    				}/*
;;;148    			} 
;;;149    		}*/	 
;;;150    	} 
;;;151    
;;;152    if(modbus_an_buffer[0]=='w')
000a7e  7828              LDRB     r0,[r5,#0]  ; modbus_an_buffer
000a80  2877              CMP      r0,#0x77
000a82  d17e              BNE      |L1.2946|
;;;153    	{
;;;154    	pvlk=1;
000a84  2001              MOVS     r0,#1
000a86  8020              STRH     r0,[r4,#0]
;;;155    	if(modbus_an_buffer[1]=='r')
000a88  7868              LDRB     r0,[r5,#1]  ; modbus_an_buffer
000a8a  2872              CMP      r0,#0x72
000a8c  d179              BNE      |L1.2946|
;;;156    		{
;;;157    		pvlk=2;
000a8e  2002              MOVS     r0,#2
000a90  8020              STRH     r0,[r4,#0]
;;;158    		if(modbus_an_buffer[2]=='i')
000a92  78a8              LDRB     r0,[r5,#2]  ; modbus_an_buffer
000a94  2869              CMP      r0,#0x69
000a96  d174              BNE      |L1.2946|
;;;159    			{
;;;160    			pvlk=3;
000a98  f8a4b000          STRH     r11,[r4,#0]
;;;161    			if(modbus_an_buffer[3]=='t')
000a9c  78e8              LDRB     r0,[r5,#3]  ; modbus_an_buffer
000a9e  2874              CMP      r0,#0x74
000aa0  d16f              BNE      |L1.2946|
;;;162    				{
;;;163    				pvlk=4;
000aa2  2004              MOVS     r0,#4
000aa4  8020              STRH     r0,[r4,#0]
;;;164    				if(modbus_an_buffer[4]=='e')
000aa6  7928              LDRB     r0,[r5,#4]  ; modbus_an_buffer
000aa8  2865              CMP      r0,#0x65
000aaa  d16a              BNE      |L1.2946|
;;;165    					{
;;;166    					pvlk=5;
000aac  f8a4a000          STRH     r10,[r4,#0]
;;;167    					if(modbus_an_buffer[15]==crc_87(modbus_an_buffer,15))
000ab0  210f              MOVS     r1,#0xf
000ab2  48f9              LDR      r0,|L1.3736|
000ab4  f7fffffe          BL       crc_87
000ab8  7be9              LDRB     r1,[r5,#0xf]  ; modbus_an_buffer
000aba  4288              CMP      r0,r1
000abc  d177              BNE      |L1.2990|
;;;168    						{
;;;169    						pvlk=6;
000abe  2006              MOVS     r0,#6
000ac0  8020              STRH     r0,[r4,#0]
;;;170    						if(modbus_an_buffer[16]==crc_95(modbus_an_buffer,15))
000ac2  210f              MOVS     r1,#0xf
000ac4  48f4              LDR      r0,|L1.3736|
000ac6  f7fffffe          BL       crc_95
000aca  7c29              LDRB     r1,[r5,#0x10]  ; modbus_an_buffer
000acc  4288              CMP      r0,r1
000ace  d16e              BNE      |L1.2990|
;;;171    
;;;172    							{
;;;173    							unsigned short ptr;
;;;174    							unsigned long data1,data2;
;;;175    							char temp_out[20];
;;;176    							pvlk=7;
000ad0  2007              MOVS     r0,#7
000ad2  8020              STRH     r0,[r4,#0]
;;;177    							ptr=modbus_an_buffer[5]+(modbus_an_buffer[6]*256U);
000ad4  7968              LDRB     r0,[r5,#5]  ; modbus_an_buffer
000ad6  79a9              LDRB     r1,[r5,#6]  ; modbus_an_buffer
000ad8  eb002001          ADD      r0,r0,r1,LSL #8
000adc  b284              UXTH     r4,r0
000ade  f8ad4008          STRH     r4,[sp,#8]
;;;178    							*((char*)&data1)=modbus_an_buffer[7];
000ae2  79e8              LDRB     r0,[r5,#7]  ; modbus_an_buffer
000ae4  f88d0004          STRB     r0,[sp,#4]
;;;179    							*(((char*)&data1)+1)=modbus_an_buffer[8];
000ae8  7a28              LDRB     r0,[r5,#8]  ; modbus_an_buffer
000aea  f88d0005          STRB     r0,[sp,#5]
;;;180    							*(((char*)&data1)+2)=modbus_an_buffer[9];
000aee  7a68              LDRB     r0,[r5,#9]  ; modbus_an_buffer
000af0  f88d0006          STRB     r0,[sp,#6]
;;;181    							*(((char*)&data1)+3)=modbus_an_buffer[10];
000af4  7aa8              LDRB     r0,[r5,#0xa]  ; modbus_an_buffer
000af6  f88d0007          STRB     r0,[sp,#7]
;;;182    							*((char*)&data2)=modbus_an_buffer[11];
000afa  7ae8              LDRB     r0,[r5,#0xb]  ; modbus_an_buffer
000afc  f88d0028          STRB     r0,[sp,#0x28]
;;;183    							*(((char*)&data2)+1)=modbus_an_buffer[12];
000b00  7b28              LDRB     r0,[r5,#0xc]  ; modbus_an_buffer
000b02  f88d0029          STRB     r0,[sp,#0x29]
;;;184    							*(((char*)&data2)+2)=modbus_an_buffer[13];
000b06  7b68              LDRB     r0,[r5,#0xd]  ; modbus_an_buffer
000b08  f88d002a          STRB     r0,[sp,#0x2a]
;;;185    							*(((char*)&data2)+3)=modbus_an_buffer[14];	
000b0c  7ba8              LDRB     r0,[r5,#0xe]  ; modbus_an_buffer
000b0e  f88d002b          STRB     r0,[sp,#0x2b]
;;;186    							lc640_write_long(ptr,data1);
000b12  4620              MOV      r0,r4
000b14  9901              LDR      r1,[sp,#4]
000b16  f7fffffe          BL       lc640_write_long
;;;187    							lc640_write_long(ptr+4,data2);
000b1a  1d20              ADDS     r0,r4,#4
000b1c  990a              LDR      r1,[sp,#0x28]
000b1e  f7fffffe          BL       lc640_write_long
;;;188    							
;;;189    							//data1=lc640_read_long(ptr);
;;;190    							//data2=lc640_read_long(ptr+4);
;;;191    							temp_out[0]='w';
000b22  2077              MOVS     r0,#0x77
000b24  f88d000c          STRB     r0,[sp,#0xc]
;;;192    							temp_out[1]='r';
000b28  2072              MOVS     r0,#0x72
000b2a  f88d000d          STRB     r0,[sp,#0xd]
;;;193    							temp_out[2]='i';
000b2e  2069              MOVS     r0,#0x69
000b30  f88d000e          STRB     r0,[sp,#0xe]
;;;194    							temp_out[3]='t';
000b34  2074              MOVS     r0,#0x74
000b36  f88d000f          STRB     r0,[sp,#0xf]
;;;195    							temp_out[4]='e';
000b3a  2065              MOVS     r0,#0x65
000b3c  f88d0010          STRB     r0,[sp,#0x10]
;;;196    							temp_out[5]=*((char*)&ptr);
000b40  f89d0008          LDRB     r0,[sp,#8]
000b44  f88d0011          STRB     r0,[sp,#0x11]
;;;197    							temp_out[6]=*(((char*)&ptr)+1);	
000b48  f89d0009          LDRB     r0,[sp,#9]
000b4c  f88d0012          STRB     r0,[sp,#0x12]
;;;198    						
;;;199    							temp_out[7]=crc_87(temp_out,7);	
000b50  2107              MOVS     r1,#7
000b52  a803              ADD      r0,sp,#0xc
000b54  f7fffffe          BL       crc_87
000b58  f88d0013          STRB     r0,[sp,#0x13]
;;;200    							temp_out[8]=crc_95(temp_out,7);			
000b5c  2107              MOVS     r1,#7
000b5e  a803              ADD      r0,sp,#0xc
000b60  f7fffffe          BL       crc_95
000b64  f88d0014          STRB     r0,[sp,#0x14]
;;;201    							
;;;202    							temp_out[10]=0;
000b68  2000              MOVS     r0,#0
000b6a  f88d0016          STRB     r0,[sp,#0x16]
;;;203    							for (i=0;i<9;i++)
000b6e  7030              STRB     r0,[r6,#0]
000b70  ac03              ADD      r4,sp,#0xc            ;175
                  |L1.2930|
;;;204    								{
;;;205    								putchar_sc16is700(temp_out[i]);
000b72  b2c0              UXTB     r0,r0
000b74  5c20              LDRB     r0,[r4,r0]
000b76  f7fffffe          BL       putchar_sc16is700
;;;206    								temp_out[10]^=temp_out[i];
000b7a  f89d1016          LDRB     r1,[sp,#0x16]
000b7e  7830              LDRB     r0,[r6,#0]  ; i
000b80  e000              B        |L1.2948|
                  |L1.2946|
000b82  e014              B        |L1.2990|
                  |L1.2948|
000b84  5c22              LDRB     r2,[r4,r0]
000b86  1c40              ADDS     r0,r0,#1              ;203
000b88  4051              EORS     r1,r1,r2
000b8a  b2c0              UXTB     r0,r0                 ;203
000b8c  f88d1016          STRB     r1,[sp,#0x16]
000b90  7030              STRB     r0,[r6,#0]            ;203
000b92  2809              CMP      r0,#9                 ;203
000b94  d3ed              BCC      |L1.2930|
;;;207    								}
;;;208    							putchar_sc16is700(9);
000b96  2009              MOVS     r0,#9
000b98  f7fffffe          BL       putchar_sc16is700
;;;209    							putchar_sc16is700(temp_out[10]^9);
000b9c  f89d0016          LDRB     r0,[sp,#0x16]
000ba0  f0800009          EOR      r0,r0,#9
000ba4  f7fffffe          BL       putchar_sc16is700
;;;210    							putchar_sc16is700(0x0a);
000ba8  200a              MOVS     r0,#0xa
000baa  f7fffffe          BL       putchar_sc16is700
                  |L1.2990|
;;;211    							}
;;;212    						}
;;;213    					}
;;;214    				}
;;;215    		   	}
;;;216    		}
;;;217    	}
;;;218    
;;;219    modbus_func=modbus_an_buffer[1];
000bae  7868              LDRB     r0,[r5,#1]  ; modbus_an_buffer
;;;220    modbus_rx_arg0=(((unsigned short)modbus_an_buffer[2])*((unsigned short)256))+((unsigned short)modbus_an_buffer[3]);
000bb0  9004              STR      r0,[sp,#0x10]
000bb2  78e9              LDRB     r1,[r5,#3]  ; modbus_an_buffer
000bb4  78a8              LDRB     r0,[r5,#2]  ; modbus_an_buffer
;;;221    modbus_rx_arg1=(((unsigned short)modbus_an_buffer[4])*((unsigned short)256))+((unsigned short)modbus_an_buffer[5]);
;;;222    //modbus_rx_arg2=(((unsigned short)modbus_an_buffer[6])*((unsigned short)256))+((unsigned short)modbus_an_buffer[7]);
;;;223    //modbus_rx_arg3=(((unsigned short)modbus_an_buffer[8])*((unsigned short)256))+((unsigned short)modbus_an_buffer[9]);
;;;224    modbus_cmnd=(modbus_rx_arg1>>8)&0x7f;
;;;225    modbus_cmnd_cnt=(modbus_rx_arg1)&0x0f;
;;;226    
;;;227    modbus_plazma3=modbus_cmnd;
;;;228    modbus_plazma2=modbus_cmnd_cnt;
;;;229    modbus_plazma1=modbus_self_cmnd_cnt;
;;;230    
;;;231    if(crc16_calculated==crc16_incapsulated)
000bb6  45c8              CMP      r8,r9
000bb8  eb012000          ADD      r0,r1,r0,LSL #8       ;220
000bbc  b287              UXTH     r7,r0                 ;220
000bbe  7968              LDRB     r0,[r5,#5]            ;221  ; modbus_an_buffer
000bc0  7929              LDRB     r1,[r5,#4]            ;221  ; modbus_an_buffer
000bc2  eb002001          ADD      r0,r0,r1,LSL #8       ;221
000bc6  b284              UXTH     r4,r0                 ;221
000bc8  48b4              LDR      r0,|L1.3740|
000bca  f3c42206          UBFX     r2,r4,#8,#7           ;224
000bce  f004010f          AND      r1,r4,#0xf            ;225
000bd2  7142              STRB     r2,[r0,#5]            ;224
000bd4  7101              STRB     r1,[r0,#4]            ;225
000bd6  8182              STRH     r2,[r0,#0xc]          ;227
000bd8  8141              STRH     r1,[r0,#0xa]          ;228
000bda  7802              LDRB     r2,[r0,#0]            ;229  ; modbus_self_cmnd_cnt
000bdc  8102              STRH     r2,[r0,#8]            ;229
000bde  d170              BNE      |L1.3266|
;;;232    	{
;;;233    	if(modbus_self_cmnd_cnt==33)modbus_self_cmnd_cnt=modbus_cmnd_cnt;
000be0  2a21              CMP      r2,#0x21
000be2  d100              BNE      |L1.3046|
000be4  7001              STRB     r1,[r0,#0]
                  |L1.3046|
;;;234    	modbus_plazma=modbus_an_buffer[0];
000be6  49ac              LDR      r1,|L1.3736|
;;;235    	if(modbus_an_buffer[0]==200)	 //ερλθ ηΰοπξρ ξς οσλόςΰ
;;;236    		{
;;;237    		if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
;;;238    			{
;;;239    			modbus_for_pult_registers_transmit(7);
;;;240    			}
;;;241    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
;;;242    			{
;;;243    			//if(modbus_rx_arg0==1)		//
;;;244    				{
;;;245    				modbus_for_pult_registers_transmit(7);
;;;246    				tumbler_stat=(enum_tumbler_stat)(modbus_rx_arg1>>15);
;;;247    				if((tumbler_stat!=tumbler_stat_old))
;;;248    					{
;;;249    					if(tumbler_stat==tsU)
;;;250    						{
;;;251    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;252    						}
;;;253    					else lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;254    					
;;;255    					if(main_cnt>3)
;;;256    						{
;;;257    						work_stat=wsOFF;
;;;258    						restart_off();
;;;259    						}
;;;260    					}
;;;261    				tumbler_stat_old=tumbler_stat;
;;;262    				
;;;263    				}
;;;264    			 //else if(modbus_rx_arg0==0)
;;;265    			 	{
;;;266    				//modbus_plazma++;		
;;;267    				if((modbus_cmnd==61)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;268    					{
;;;269    					if(I_ug<1000)I_ug++;
;;;270    					else I_ug=((I_ug/10)+1)*10;
;;;271    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
000be8  f8dfb2b4          LDR      r11,|L1.3744|
000bec  4dad              LDR      r5,|L1.3748|
000bee  7809              LDRB     r1,[r1,#0]            ;234  ; modbus_an_buffer
000bf0  4682              MOV      r10,r0                ;234
000bf2  80c1              STRH     r1,[r0,#6]            ;234
;;;272    					I_ug_block_cnt=10;
;;;273    					//lc640_write_int(EE_I_UG,I_ug);
;;;274    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;275    					}
;;;276    				
;;;277    				else if((modbus_cmnd==62)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;278    					{
;;;279    					if(I_ug<1000)I_ug--;
;;;280    					else I_ug=((I_ug/10)-1)*10;
;;;281    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;282    					I_ug_block_cnt=10;
;;;283    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;284    					}
;;;285    				else if((modbus_cmnd==63)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;286    					{
;;;287    					if(I_ug<1000)I_ug=((I_ug/10)+1)*10;
;;;288    					else I_ug=((I_ug/10)+5)*10;
;;;289    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;290    					I_ug_block_cnt=10;
;;;291    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;292    					}
;;;293    				
;;;294    				else if((modbus_cmnd==64)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;295    					{
;;;296    					if(I_ug<1000)I_ug=((I_ug/10)-1)*10;
;;;297    					else I_ug=((I_ug/10)-5)*10;
;;;298    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;299    					I_ug_block_cnt=10;
;;;300    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;301    					}
;;;302    				
;;;303    				else if((modbus_cmnd==71)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;304    					{
;;;305    					U_up++;
;;;306    					gran(&U_up,U_MIN,U_MAX);
;;;307    					U_up_block_cnt=10;
;;;308    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;309    					}
;;;310    				
;;;311    				else if((modbus_cmnd==72)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;312    					{
;;;313    					U_up--;
;;;314    					gran(&U_up,U_MIN,U_MAX);
;;;315    					U_up_block_cnt=10;
;;;316    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;317    				
;;;318    					}
;;;319    				else if((modbus_cmnd==73)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;320    					{
;;;321    					U_up=((U_up/10)+1)*10;
;;;322    					gran(&U_up,U_MIN,U_MAX);
;;;323    					U_up_block_cnt=10;
;;;324    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;325    					}
;;;326    				
;;;327    				else if((modbus_cmnd==74)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;328    					{
;;;329    					U_up=((U_up/10)-1)*10;
;;;330    					gran(&U_up,U_MIN,U_MAX);
;;;331    					U_up_block_cnt=10;
;;;332    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;333    					}
;;;334    				
;;;335    				
;;;336    				else if((modbus_cmnd==51)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ+
;;;337    					{
;;;338    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;339    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;340    						{
;;;341    						if(TIME_VISION_PULT)
;;;342    							{
;;;343    							T_PROC_GS=(((T_PROC_GS/60L)+1L)*60L);
000bf4  f04f093c          MOV      r9,#0x3c
000bf8  29c8              CMP      r1,#0xc8              ;235
000bfa  d104              BNE      |L1.3078|
000bfc  9804              LDR      r0,[sp,#0x10]         ;237
000bfe  2804              CMP      r0,#4                 ;237
000c00  d002              BEQ      |L1.3080|
000c02  2806              CMP      r0,#6                 ;241
000c04  d004              BEQ      |L1.3088|
                  |L1.3078|
000c06  e243              B        |L1.4240|
                  |L1.3080|
000c08  2007              MOVS     r0,#7                 ;239
000c0a  f7fffffe          BL       modbus_for_pult_registers_transmit
000c0e  e23f              B        |L1.4240|
                  |L1.3088|
000c10  2007              MOVS     r0,#7                 ;245
000c12  f7fffffe          BL       modbus_for_pult_registers_transmit
000c16  f8df8290          LDR      r8,|L1.3752|
000c1a  4ea4              LDR      r6,|L1.3756|
000c1c  0be0              LSRS     r0,r4,#15             ;246
000c1e  f8880000          STRB     r0,[r8,#0]            ;246
000c22  7831              LDRB     r1,[r6,#0]            ;247  ; tumbler_stat_old
000c24  4288              CMP      r0,r1                 ;247
000c26  d00e              BEQ      |L1.3142|
000c28  2801              CMP      r0,#1                 ;249
000c2a  d03c              BEQ      |L1.3238|
000c2c  2100              MOVS     r1,#0                 ;253
                  |L1.3118|
000c2e  20ea              MOVS     r0,#0xea              ;253
000c30  f7fffffe          BL       lc640_write_int
000c34  489e              LDR      r0,|L1.3760|
000c36  f9b00000          LDRSH    r0,[r0,#0]            ;255  ; main_cnt
000c3a  2803              CMP      r0,#3                 ;255
000c3c  dd03              BLE      |L1.3142|
000c3e  2000              MOVS     r0,#0                 ;257
000c40  7028              STRB     r0,[r5,#0]            ;257
000c42  f7fffffe          BL       restart_off
                  |L1.3142|
000c46  f898c000          LDRB     r12,[r8,#0]           ;261  ; tumbler_stat
000c4a  f886c000          STRB     r12,[r6,#0]           ;261
000c4e  46c6              MOV      lr,r8                 ;261
000c50  f89a3005          LDRB     r3,[r10,#5]           ;267  ; modbus_cmnd
000c54  f8df825c          LDR      r8,|L1.3764|
000c58  260a              MOVS     r6,#0xa               ;143
000c5a  4650              MOV      r0,r10                ;267
000c5c  f44f717a          MOV      r1,#0x3e8             ;269
000c60  2b3d              CMP      r3,#0x3d              ;267
000c62  d022              BEQ      |L1.3242|
000c64  2b3e              CMP      r3,#0x3e              ;277
000c66  d038              BEQ      |L1.3290|
000c68  2b3f              CMP      r3,#0x3f              ;285
000c6a  d047              BEQ      |L1.3324|
000c6c  2b40              CMP      r3,#0x40              ;294
000c6e  d053              BEQ      |L1.3352|
000c70  f8df8244          LDR      r8,|L1.3768|
000c74  2b47              CMP      r3,#0x47              ;303
000c76  d061              BEQ      |L1.3388|
000c78  2b48              CMP      r3,#0x48              ;311
000c7a  d068              BEQ      |L1.3406|
000c7c  2b49              CMP      r3,#0x49              ;319
000c7e  d072              BEQ      |L1.3430|
000c80  2b4a              CMP      r3,#0x4a              ;327
000c82  d06e              BEQ      |L1.3426|
000c84  498d              LDR      r1,|L1.3772|
;;;344    							T_PROC_GS_block_cnt=10;
000c86  4a8e              LDR      r2,|L1.3776|
;;;345    							}
;;;346    						else
;;;347    							{
;;;348    							T_PROC_GS++;
;;;349    							T_PROC_GS_block_cnt=10;
;;;350    							}
;;;351    				
;;;352    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;353    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;354    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;355    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;356    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;357    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;358    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;359    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;360    							}												//(T_PROC_GS_MODE=0)
;;;361    					
;;;362    						else if(T_PROC_GS<30)
;;;363    							{
;;;364    							T_PROC_GS=29;
;;;365    							if(T_PROC_GS_MODE!=1)
;;;366    								{
;;;367    								T_PROC_GS_MODE=1;
;;;368    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;369    								}
;;;370    							}
;;;371    						else 
;;;372    							{
;;;373    							if(T_PROC_GS_MODE!=0)
;;;374    								{
;;;375    								T_PROC_GS_MODE=0;
;;;376    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;377    								}
;;;378    							}			
;;;379    						}
;;;380    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;381    						{
;;;382    						if(TIME_VISION_PULT)
;;;383    							{
;;;384    							T_PROC_PS=(((T_PROC_PS/60L)+1L)*60L);
;;;385    							T_PROC_PS_block_cnt=10;
000c88  f8dfa238          LDR      r10,|L1.3780|
000c8c  f8df8238          LDR      r8,|L1.3784|
000c90  2b33              CMP      r3,#0x33              ;336
000c92  d067              BEQ      |L1.3428|
;;;386    							}
;;;387    						else
;;;388    							{
;;;389    							T_PROC_PS++;
;;;390    							T_PROC_PS_block_cnt=10;
;;;391    							}
;;;392    				
;;;393    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;394    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;395    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;396    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;397    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;398    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;399    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;400    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;401    							}												//(T_PROC_PS_MODE=0)
;;;402    					
;;;403    						else if(T_PROC_PS<30)
;;;404    							{
;;;405    							T_PROC_PS=29;
;;;406    							if(T_PROC_PS_MODE!=1)
;;;407    								{
;;;408    								T_PROC_PS_MODE=1;
;;;409    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;410    								}
;;;411    							}
;;;412    						else 
;;;413    							{
;;;414    							if(T_PROC_PS_MODE!=0)
;;;415    								{
;;;416    								T_PROC_PS_MODE=0;
;;;417    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;418    								}
;;;419    							}			
;;;420    						}
;;;421    					}
;;;422    				else if((modbus_cmnd==53)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ++
000c94  2b35              CMP      r3,#0x35
000c96  d072              BEQ      |L1.3454|
;;;423    					{
;;;424    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;425    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;426    						{
;;;427    						if(TIME_VISION_PULT)
;;;428    							{
;;;429    							T_PROC_GS=(((T_PROC_GS/600L)+1L)*600L);
;;;430    							T_PROC_GS_block_cnt=10;
;;;431    							}
;;;432    						else
;;;433    							{
;;;434    							T_PROC_GS=(((T_PROC_GS/10L)+1L)*10L);
;;;435    							T_PROC_GS_block_cnt=10;
;;;436    							}
;;;437    				
;;;438    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;439    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;440    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;441    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;442    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;443    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;444    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;445    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;446    							}												//(T_PROC_GS_MODE=0)
;;;447    					
;;;448    						else if(T_PROC_GS<30)
;;;449    							{
;;;450    							T_PROC_GS=29;
;;;451    							if(T_PROC_GS_MODE!=1)
;;;452    								{
;;;453    								T_PROC_GS_MODE=1;
;;;454    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;455    								}
;;;456    							}
;;;457    						else 
;;;458    							{
;;;459    							if(T_PROC_GS_MODE!=0)
;;;460    								{
;;;461    								T_PROC_GS_MODE=0;
;;;462    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;463    								}
;;;464    							}			
;;;465    						}
;;;466    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;467    						{
;;;468    						if(TIME_VISION_PULT)
;;;469    							{
;;;470    							T_PROC_PS=(((T_PROC_PS/600L)+1L)*600L);
;;;471    							T_PROC_PS_block_cnt=10;
;;;472    							}
;;;473    						else
;;;474    							{
;;;475    							T_PROC_PS=(((T_PROC_PS/10L)+1L)*10L);
;;;476    							T_PROC_PS_block_cnt=10;
;;;477    							}
;;;478    				
;;;479    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;480    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;481    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;482    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;483    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;484    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;485    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;486    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;487    							}												//(T_PROC_PS_MODE=0)
;;;488    					
;;;489    						else if(T_PROC_PS<30)
;;;490    							{
;;;491    							T_PROC_PS=29;
;;;492    							if(T_PROC_PS_MODE!=1)
;;;493    								{
;;;494    								T_PROC_PS_MODE=1;
;;;495    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;496    								}
;;;497    							}
;;;498    						else 
;;;499    							{
;;;500    							if(T_PROC_PS_MODE!=0)
;;;501    								{
;;;502    								T_PROC_PS_MODE=0;
;;;503    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;504    								}
;;;505    							}				
;;;506    						}
;;;507    					}
;;;508    				
;;;509    				else if((modbus_cmnd==52)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ-
000c98  2b34              CMP      r3,#0x34
000c9a  d071              BEQ      |L1.3456|
;;;510    					{
;;;511    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;512    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;513    						{
;;;514    						if(TIME_VISION_PULT)
;;;515    							{
;;;516    							T_PROC_GS=(((T_PROC_GS/60L)-1L)*60L);
;;;517    							T_PROC_GS_block_cnt=10;
;;;518    							}
;;;519    						else
;;;520    							{
;;;521    							T_PROC_GS--;
;;;522    							T_PROC_GS_block_cnt=10;
;;;523    							}
;;;524    				
;;;525    							
;;;526    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;527    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;528    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;529    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;530    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;531    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;532    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;533    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;534    							}												//(T_PROC_GS_MODE=0)
;;;535    					
;;;536    						else if(T_PROC_GS<30)
;;;537    							{
;;;538    							T_PROC_GS=29;
;;;539    							if(T_PROC_GS_MODE!=1)
;;;540    								{
;;;541    								T_PROC_GS_MODE=1;
;;;542    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;543    								}
;;;544    							}
;;;545    						else 
;;;546    							{
;;;547    							if(T_PROC_GS_MODE!=0)
;;;548    								{
;;;549    								T_PROC_GS_MODE=0;
;;;550    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;551    								}
;;;552    							}
;;;553    							
;;;554    						}
;;;555    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;556    						{
;;;557    						if(TIME_VISION_PULT)
;;;558    							{
;;;559    							T_PROC_PS=(((T_PROC_PS/60L)-1L)*60L);
;;;560    							T_PROC_PS_block_cnt=10;
;;;561    							}
;;;562    						else
;;;563    							{
;;;564    							T_PROC_PS--;
;;;565    							T_PROC_PS_block_cnt=10;
;;;566    							}
;;;567    				
;;;568    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;569    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;570    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;571    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;572    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;573    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;574    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;575    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;576    							}												//(T_PROC_PS_MODE=0)
;;;577    					
;;;578    						else if(T_PROC_PS<30)
;;;579    							{
;;;580    							T_PROC_PS=29;
;;;581    							if(T_PROC_PS_MODE!=1)
;;;582    								{
;;;583    								T_PROC_PS_MODE=1;
;;;584    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;585    								}
;;;586    							}
;;;587    						else 
;;;588    							{
;;;589    							if(T_PROC_PS_MODE!=0)
;;;590    								{
;;;591    								T_PROC_PS_MODE=0;
;;;592    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;593    								}
;;;594    							}			
;;;595    						}
;;;596    					}
;;;597    				else if((modbus_cmnd==54)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ--
000c9c  2b36              CMP      r3,#0x36
000c9e  d070              BEQ      |L1.3458|
;;;598    					{
;;;599    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;600    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;601    						{
;;;602    						if(TIME_VISION_PULT)
;;;603    							{
;;;604    							T_PROC_GS=(((T_PROC_GS/600L)-1L)*600L);
;;;605    							T_PROC_GS_block_cnt=10;
;;;606    							}
;;;607    						else
;;;608    							{
;;;609    							T_PROC_GS=(((T_PROC_GS/10L)-1L)*10L);
;;;610    							T_PROC_GS_block_cnt=10;
;;;611    							}
;;;612    				
;;;613    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;614    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;615    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;616    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;617    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;618    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;619    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;620    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;621    							}												//(T_PROC_GS_MODE=0)
;;;622    					
;;;623    						else if(T_PROC_GS<30)
;;;624    							{
;;;625    							T_PROC_GS=29;
;;;626    							if(T_PROC_GS_MODE!=1)
;;;627    								{
;;;628    								T_PROC_GS_MODE=1;
;;;629    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;630    								}
;;;631    							}
;;;632    						else 
;;;633    							{
;;;634    							if(T_PROC_GS_MODE!=0)
;;;635    								{
;;;636    								T_PROC_GS_MODE=0;
;;;637    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;638    								}
;;;639    							}
;;;640    										
;;;641    						}
;;;642    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;643    						{
;;;644    						if(TIME_VISION_PULT)
;;;645    							{
;;;646    							T_PROC_PS=(((T_PROC_PS/600L)-1L)*600L);
;;;647    							T_PROC_PS_block_cnt=10;
;;;648    							}
;;;649    						else
;;;650    							{
;;;651    							T_PROC_PS=(((T_PROC_PS/10L)-1L)*10L);
;;;652    							T_PROC_PS_block_cnt=10;
;;;653    							}
;;;654    				
;;;655    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;656    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;657    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;658    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;659    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;660    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;661    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;662    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;663    							}												//(T_PROC_PS_MODE=0)
;;;664    					
;;;665    						else if(T_PROC_PS<30)
;;;666    							{
;;;667    							T_PROC_PS=29;
;;;668    							if(T_PROC_PS_MODE!=1)
;;;669    								{
;;;670    								T_PROC_PS_MODE=1;
;;;671    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;672    								}
;;;673    							}
;;;674    						else 
;;;675    							{
;;;676    							if(T_PROC_PS_MODE!=0)
;;;677    								{
;;;678    								T_PROC_PS_MODE=0;
;;;679    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;680    								}
;;;681    							}	
;;;682    						}
;;;683    					}
;;;684    				
;;;685    				
;;;686    			//	else if((modbus_rx_arg1>>8)==90)
;;;687    			else if((modbus_cmnd==1)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
000ca0  2b01              CMP      r3,#1
000ca2  d06f              BEQ      |L1.3460|
                  |L1.3236|
000ca4  e1f4              B        |L1.4240|
                  |L1.3238|
000ca6  2101              MOVS     r1,#1                 ;251
000ca8  e7c1              B        |L1.3118|
                  |L1.3242|
000caa  7902              LDRB     r2,[r0,#4]            ;267  ; modbus_cmnd_cnt
000cac  f89a0000          LDRB     r0,[r10,#0]           ;267  ; modbus_self_cmnd_cnt
000cb0  4282              CMP      r2,r0                 ;267
000cb2  d0a8              BEQ      |L1.3078|
000cb4  4885              LDR      r0,|L1.3788|
000cb6  f9b02000          LDRSH    r2,[r0,#0]            ;269  ; I_ug
000cba  428a              CMP      r2,r1                 ;269
000cbc  da02              BGE      |L1.3268|
000cbe  1c52              ADDS     r2,r2,#1              ;269
000cc0  e016              B        |L1.3312|
                  |L1.3266|
000cc2  e246              B        |L1.4434|
                  |L1.3268|
000cc4  fb92f1f6          SDIV     r1,r2,r6              ;270
000cc8  1c49              ADDS     r1,r1,#1              ;270
000cca  e032              B        |L1.3378|
                  |L1.3276|
000ccc  4880              LDR      r0,|L1.3792|
000cce  f9bb2000          LDRSH    r2,[r11,#0]           ;271  ; I_MAX_IPS
000cd2  f9b01000          LDRSH    r1,[r0,#0]            ;271  ; I_MIN_IPS
000cd6  487d              LDR      r0,|L1.3788|
000cd8  e06b              B        |L1.3506|
                  |L1.3290|
000cda  7902              LDRB     r2,[r0,#4]            ;277  ; modbus_cmnd_cnt
000cdc  f89a0000          LDRB     r0,[r10,#0]           ;277  ; modbus_self_cmnd_cnt
000ce0  4282              CMP      r2,r0                 ;277
000ce2  d090              BEQ      |L1.3078|
000ce4  4879              LDR      r0,|L1.3788|
000ce6  f9b02000          LDRSH    r2,[r0,#0]            ;279  ; I_ug
000cea  428a              CMP      r2,r1                 ;279
000cec  da02              BGE      |L1.3316|
000cee  1e52              SUBS     r2,r2,#1              ;279
                  |L1.3312|
000cf0  8002              STRH     r2,[r0,#0]            ;279
000cf2  e7eb              B        |L1.3276|
                  |L1.3316|
000cf4  fb92f1f6          SDIV     r1,r2,r6              ;280
000cf8  1e49              SUBS     r1,r1,#1              ;280
000cfa  e01a              B        |L1.3378|
                  |L1.3324|
000cfc  7902              LDRB     r2,[r0,#4]            ;285  ; modbus_cmnd_cnt
000cfe  f89a0000          LDRB     r0,[r10,#0]           ;285  ; modbus_self_cmnd_cnt
000d02  4282              CMP      r2,r0                 ;285
000d04  d0ce              BEQ      |L1.3236|
000d06  4871              LDR      r0,|L1.3788|
000d08  f9b02000          LDRSH    r2,[r0,#0]            ;287  ; I_ug
000d0c  428a              CMP      r2,r1                 ;287
000d0e  dbd9              BLT      |L1.3268|
000d10  fb92f1f6          SDIV     r1,r2,r6              ;288
000d14  1d49              ADDS     r1,r1,#5              ;288
000d16  e00c              B        |L1.3378|
                  |L1.3352|
000d18  7902              LDRB     r2,[r0,#4]            ;294  ; modbus_cmnd_cnt
000d1a  f89a0000          LDRB     r0,[r10,#0]           ;294  ; modbus_self_cmnd_cnt
000d1e  4282              CMP      r2,r0                 ;294
000d20  d0c0              BEQ      |L1.3236|
000d22  486a              LDR      r0,|L1.3788|
000d24  f9b02000          LDRSH    r2,[r0,#0]            ;296  ; I_ug
000d28  428a              CMP      r2,r1                 ;296
000d2a  dbe3              BLT      |L1.3316|
000d2c  fb92f1f6          SDIV     r1,r2,r6              ;297
000d30  1f49              SUBS     r1,r1,#5              ;297
                  |L1.3378|
000d32  eb010181          ADD      r1,r1,r1,LSL #2       ;297
000d36  0049              LSLS     r1,r1,#1              ;297
000d38  8001              STRH     r1,[r0,#0]            ;297
000d3a  e7c7              B        |L1.3276|
                  |L1.3388|
000d3c  7901              LDRB     r1,[r0,#4]            ;303  ; modbus_cmnd_cnt
000d3e  f89a0000          LDRB     r0,[r10,#0]           ;303  ; modbus_self_cmnd_cnt
000d42  4281              CMP      r1,r0                 ;303
000d44  d0ae              BEQ      |L1.3236|
000d46  4863              LDR      r0,|L1.3796|
000d48  8801              LDRH     r1,[r0,#0]            ;305  ; U_up
000d4a  1c49              ADDS     r1,r1,#1              ;305
000d4c  e029              B        |L1.3490|
                  |L1.3406|
000d4e  7901              LDRB     r1,[r0,#4]            ;311  ; modbus_cmnd_cnt
000d50  f89a0000          LDRB     r0,[r10,#0]           ;311  ; modbus_self_cmnd_cnt
000d54  4281              CMP      r1,r0                 ;311
000d56  d0a5              BEQ      |L1.3236|
000d58  485e              LDR      r0,|L1.3796|
000d5a  8801              LDRH     r1,[r0,#0]            ;313  ; U_up
000d5c  1e49              SUBS     r1,r1,#1              ;313
000d5e  e020              B        |L1.3490|
000d60  e001              B        |L1.3430|
                  |L1.3426|
000d62  e010              B        |L1.3462|
                  |L1.3428|
000d64  e02e              B        |L1.3524|
                  |L1.3430|
000d66  7901              LDRB     r1,[r0,#4]            ;319  ; modbus_cmnd_cnt
000d68  f89a0000          LDRB     r0,[r10,#0]           ;319  ; modbus_self_cmnd_cnt
000d6c  4281              CMP      r1,r0                 ;319
000d6e  d099              BEQ      |L1.3236|
000d70  4858              LDR      r0,|L1.3796|
000d72  f9b01000          LDRSH    r1,[r0,#0]            ;321  ; U_up
000d76  fb91f1f6          SDIV     r1,r1,r6              ;321
000d7a  1c49              ADDS     r1,r1,#1              ;321
000d7c  e00e              B        |L1.3484|
                  |L1.3454|
000d7e  e06b              B        |L1.3672|
                  |L1.3456|
000d80  e0c7              B        |L1.3858|
                  |L1.3458|
000d82  e0f5              B        |L1.3952|
                  |L1.3460|
000d84  e14d              B        |L1.4130|
                  |L1.3462|
000d86  7901              LDRB     r1,[r0,#4]            ;327  ; modbus_cmnd_cnt
000d88  f89a0000          LDRB     r0,[r10,#0]           ;327  ; modbus_self_cmnd_cnt
000d8c  4281              CMP      r1,r0                 ;327
000d8e  d089              BEQ      |L1.3236|
000d90  4850              LDR      r0,|L1.3796|
000d92  f9b01000          LDRSH    r1,[r0,#0]            ;329  ; U_up
000d96  fb91f1f6          SDIV     r1,r1,r6              ;329
000d9a  1e49              SUBS     r1,r1,#1              ;329
                  |L1.3484|
000d9c  eb010181          ADD      r1,r1,r1,LSL #2       ;329
000da0  0049              LSLS     r1,r1,#1              ;329
                  |L1.3490|
000da2  8001              STRH     r1,[r0,#0]            ;329
000da4  484c              LDR      r0,|L1.3800|
000da6  f9b02000          LDRSH    r2,[r0,#0]            ;330  ; U_MAX
000daa  484c              LDR      r0,|L1.3804|
000dac  f9b01000          LDRSH    r1,[r0,#0]            ;330  ; U_MIN
000db0  4848              LDR      r0,|L1.3796|
                  |L1.3506|
000db2  f7fffffe          BL       gran
000db6  f8a86000          STRH     r6,[r8,#0]            ;331
000dba  f89a1004          LDRB     r1,[r10,#4]           ;332  ; modbus_cmnd_cnt
000dbe  f88a1000          STRB     r1,[r10,#0]           ;332
                  |L1.3522|
000dc2  e165              B        |L1.4240|
                  |L1.3524|
000dc4  7903              LDRB     r3,[r0,#4]            ;336  ; modbus_cmnd_cnt
000dc6  f890c000          LDRB     r12,[r0,#0]           ;336  ; modbus_self_cmnd_cnt
000dca  4563              CMP      r3,r12                ;336
000dcc  d0f9              BEQ      |L1.3522|
000dce  7003              STRB     r3,[r0,#0]            ;338
000dd0  f8980000          LDRB     r0,[r8,#0]            ;339  ; main_menu_mode
000dd4  782b              LDRB     r3,[r5,#0]            ;339  ; work_stat
000dd6  ea500c03          ORRS     r12,r0,r3             ;339
000dda  d002              BEQ      |L1.3554|
000ddc  2801              CMP      r0,#1                 ;380
000dde  d01b              BEQ      |L1.3608|
000de0  e156              B        |L1.4240|
                  |L1.3554|
000de2  8808              LDRH     r0,[r1,#0]            ;341  ; TIME_VISION_PULT
000de4  2800              CMP      r0,#0                 ;341
000de6  483e              LDR      r0,|L1.3808|
000de8  d004              BEQ      |L1.3572|
000dea  6803              LDR      r3,[r0,#0]            ;343  ; T_PROC_GS
000dec  fb93f1f9          SDIV     r1,r3,r9              ;343
000df0  1c49              ADDS     r1,r1,#1              ;343
000df2  e0a5              B        |L1.3904|
                  |L1.3572|
000df4  6801              LDR      r1,[r0,#0]            ;348  ; T_PROC_GS
000df6  1c49              ADDS     r1,r1,#1              ;348
000df8  e0de              B        |L1.4024|
                  |L1.3578|
000dfa  6001              STR      r1,[r0,#0]            ;365  ; T_PROC_GS
000dfc  4839              LDR      r0,|L1.3812|
000dfe  8801              LDRH     r1,[r0,#0]            ;365  ; T_PROC_GS_MODE
000e00  2901              CMP      r1,#1                 ;365
000e02  d028              BEQ      |L1.3670|
000e04  2101              MOVS     r1,#1                 ;618
000e06  e004              B        |L1.3602|
                  |L1.3592|
000e08  4836              LDR      r0,|L1.3812|
000e0a  8801              LDRH     r1,[r0,#0]            ;373  ; T_PROC_GS_MODE
000e0c  2900              CMP      r1,#0                 ;373
000e0e  d022              BEQ      |L1.3670|
000e10  2100              MOVS     r1,#0                 ;636
                  |L1.3602|
000e12  8001              STRH     r1,[r0,#0]            ;357
000e14  20ee              MOVS     r0,#0xee              ;358
000e16  e01c              B        |L1.3666|
                  |L1.3608|
000e18  2b00              CMP      r3,#0                 ;380
000e1a  d11c              BNE      |L1.3670|
000e1c  8808              LDRH     r0,[r1,#0]            ;382  ; TIME_VISION_PULT
000e1e  2800              CMP      r0,#0                 ;382
000e20  4831              LDR      r0,|L1.3816|
000e22  d004              BEQ      |L1.3630|
000e24  6802              LDR      r2,[r0,#0]            ;384  ; T_PROC_PS
000e26  fb92f1f9          SDIV     r1,r2,r9              ;384
000e2a  1c49              ADDS     r1,r1,#1              ;384
000e2c  e098              B        |L1.3936|
                  |L1.3630|
000e2e  6801              LDR      r1,[r0,#0]            ;389  ; T_PROC_PS
000e30  1c49              ADDS     r1,r1,#1              ;389
                  |L1.3634|
000e32  6001              STR      r1,[r0,#0]            ;389  ; T_PROC_PS
000e34  e0dd              B        |L1.4082|
                  |L1.3638|
000e36  6001              STR      r1,[r0,#0]            ;406  ; T_PROC_PS
000e38  482c              LDR      r0,|L1.3820|
000e3a  8801              LDRH     r1,[r0,#0]            ;406  ; T_PROC_PS_MODE
000e3c  2901              CMP      r1,#1                 ;406
000e3e  d00a              BEQ      |L1.3670|
000e40  2101              MOVS     r1,#1                 ;660
000e42  e004              B        |L1.3662|
                  |L1.3652|
000e44  4829              LDR      r0,|L1.3820|
000e46  8801              LDRH     r1,[r0,#0]            ;414  ; T_PROC_PS_MODE
000e48  2900              CMP      r1,#0                 ;414
000e4a  d004              BEQ      |L1.3670|
000e4c  2100              MOVS     r1,#0                 ;678
                  |L1.3662|
000e4e  8001              STRH     r1,[r0,#0]            ;416
000e50  20f0              MOVS     r0,#0xf0              ;417
                  |L1.3666|
000e52  f7fffffe          BL       lc640_write_int
                  |L1.3670|
000e56  e11b              B        |L1.4240|
                  |L1.3672|
000e58  7903              LDRB     r3,[r0,#4]            ;422  ; modbus_cmnd_cnt
000e5a  f890c000          LDRB     r12,[r0,#0]           ;422  ; modbus_self_cmnd_cnt
000e5e  4563              CMP      r3,r12                ;422
000e60  d008              BEQ      |L1.3700|
000e62  7003              STRB     r3,[r0,#0]            ;424
000e64  f8980000          LDRB     r0,[r8,#0]            ;425  ; main_menu_mode
000e68  782b              LDRB     r3,[r5,#0]            ;425  ; work_stat
000e6a  ea500c03          ORRS     r12,r0,r3             ;425
000e6e  d002              BEQ      |L1.3702|
000e70  2801              CMP      r0,#1                 ;466
000e72  d03d              BEQ      |L1.3824|
                  |L1.3700|
000e74  e10c              B        |L1.4240|
                  |L1.3702|
000e76  8808              LDRH     r0,[r1,#0]            ;427  ; TIME_VISION_PULT
000e78  2800              CMP      r0,#0                 ;427
000e7a  4819              LDR      r0,|L1.3808|
000e7c  d006              BEQ      |L1.3724|
000e7e  6803              LDR      r3,[r0,#0]            ;429  ; T_PROC_GS
000e80  f44f7116          MOV      r1,#0x258             ;429
000e84  fb93f1f1          SDIV     r1,r3,r1              ;429
000e88  1c49              ADDS     r1,r1,#1              ;429
000e8a  e08a              B        |L1.4002|
                  |L1.3724|
000e8c  6801              LDR      r1,[r0,#0]            ;434  ; T_PROC_GS
000e8e  fb91f1f6          SDIV     r1,r1,r6              ;434
000e92  1c49              ADDS     r1,r1,#1              ;434
000e94  e08d              B        |L1.4018|
000e96  0000              DCW      0x0000
                  |L1.3736|
                          DCD      ||area_number.4||+0x1e
                  |L1.3740|
                          DCD      ||.data||
                  |L1.3744|
                          DCD      I_MAX_IPS
                  |L1.3748|
                          DCD      work_stat
                  |L1.3752|
                          DCD      tumbler_stat
                  |L1.3756|
                          DCD      tumbler_stat_old
                  |L1.3760|
                          DCD      main_cnt
                  |L1.3764|
                          DCD      I_ug_block_cnt
                  |L1.3768|
                          DCD      U_up_block_cnt
                  |L1.3772|
                          DCD      TIME_VISION_PULT
                  |L1.3776|
                          DCD      T_PROC_GS_block_cnt
                  |L1.3780|
                          DCD      T_PROC_PS_block_cnt
                  |L1.3784|
                          DCD      main_menu_mode
                  |L1.3788|
                          DCD      I_ug
                  |L1.3792|
                          DCD      I_MIN_IPS
                  |L1.3796|
                          DCD      U_up
                  |L1.3800|
                          DCD      U_MAX
                  |L1.3804|
                          DCD      U_MIN
                  |L1.3808|
                          DCD      T_PROC_GS
                  |L1.3812|
                          DCD      T_PROC_GS_MODE
                  |L1.3816|
                          DCD      T_PROC_PS
                  |L1.3820|
                          DCD      T_PROC_PS_MODE
                  |L1.3824|
000ef0  bbd3              CBNZ     r3,|L1.3944|
000ef2  8808              LDRH     r0,[r1,#0]            ;468  ; TIME_VISION_PULT
000ef4  b138              CBZ      r0,|L1.3846|
000ef6  49f9              LDR      r1,|L1.4828|
000ef8  f44f7016          MOV      r0,#0x258             ;470
000efc  680a              LDR      r2,[r1,#0]            ;470  ; T_PROC_PS
000efe  fb92f0f0          SDIV     r0,r2,r0              ;470
000f02  1c40              ADDS     r0,r0,#1              ;470
000f04  e071              B        |L1.4074|
                  |L1.3846|
000f06  48f5              LDR      r0,|L1.4828|
000f08  6801              LDR      r1,[r0,#0]            ;475  ; T_PROC_PS
000f0a  fb91f1f6          SDIV     r1,r1,r6              ;475
000f0e  1c49              ADDS     r1,r1,#1              ;475
000f10  e07e              B        |L1.4112|
                  |L1.3858|
000f12  7903              LDRB     r3,[r0,#4]            ;509  ; modbus_cmnd_cnt
000f14  f890c000          LDRB     r12,[r0,#0]           ;509  ; modbus_self_cmnd_cnt
000f18  4563              CMP      r3,r12                ;509
000f1a  d025              BEQ      |L1.3944|
000f1c  7003              STRB     r3,[r0,#0]            ;511
000f1e  f8980000          LDRB     r0,[r8,#0]            ;512  ; main_menu_mode
000f22  782b              LDRB     r3,[r5,#0]            ;512  ; work_stat
000f24  ea500c03          ORRS     r12,r0,r3             ;512
000f28  d002              BEQ      |L1.3888|
000f2a  2801              CMP      r0,#1                 ;555
000f2c  d00f              BEQ      |L1.3918|
000f2e  e0af              B        |L1.4240|
                  |L1.3888|
000f30  8808              LDRH     r0,[r1,#0]            ;514  ; TIME_VISION_PULT
000f32  2800              CMP      r0,#0                 ;514
000f34  48ea              LDR      r0,|L1.4832|
000f36  d007              BEQ      |L1.3912|
000f38  6803              LDR      r3,[r0,#0]            ;516  ; T_PROC_GS
000f3a  fb93f1f9          SDIV     r1,r3,r9              ;516
000f3e  1e49              SUBS     r1,r1,#1              ;516
                  |L1.3904|
000f40  ebc11101          RSB      r1,r1,r1,LSL #4       ;343
000f44  0089              LSLS     r1,r1,#2              ;343
000f46  e037              B        |L1.4024|
                  |L1.3912|
000f48  6801              LDR      r1,[r0,#0]            ;521  ; T_PROC_GS
000f4a  1e49              SUBS     r1,r1,#1              ;521
000f4c  e034              B        |L1.4024|
                  |L1.3918|
000f4e  b95b              CBNZ     r3,|L1.3944|
000f50  8808              LDRH     r0,[r1,#0]            ;557  ; TIME_VISION_PULT
000f52  2800              CMP      r0,#0                 ;557
000f54  48e1              LDR      r0,|L1.4828|
000f56  d008              BEQ      |L1.3946|
000f58  6802              LDR      r2,[r0,#0]            ;559  ; T_PROC_PS
000f5a  fb92f1f9          SDIV     r1,r2,r9              ;559
000f5e  1e49              SUBS     r1,r1,#1              ;559
                  |L1.3936|
000f60  ebc11101          RSB      r1,r1,r1,LSL #4       ;559
000f64  0089              LSLS     r1,r1,#2              ;559
000f66  e764              B        |L1.3634|
                  |L1.3944|
000f68  e010              B        |L1.3980|
                  |L1.3946|
000f6a  6801              LDR      r1,[r0,#0]            ;564  ; T_PROC_PS
000f6c  1e49              SUBS     r1,r1,#1              ;564
000f6e  e760              B        |L1.3634|
                  |L1.3952|
000f70  7903              LDRB     r3,[r0,#4]            ;597  ; modbus_cmnd_cnt
000f72  f890c000          LDRB     r12,[r0,#0]           ;597  ; modbus_self_cmnd_cnt
000f76  4563              CMP      r3,r12                ;597
000f78  d008              BEQ      |L1.3980|
000f7a  7003              STRB     r3,[r0,#0]            ;599
000f7c  f8980000          LDRB     r0,[r8,#0]            ;600  ; main_menu_mode
000f80  782b              LDRB     r3,[r5,#0]            ;600  ; work_stat
000f82  ea500c03          ORRS     r12,r0,r3             ;600
000f86  d002              BEQ      |L1.3982|
000f88  2801              CMP      r0,#1                 ;642
000f8a  d024              BEQ      |L1.4054|
                  |L1.3980|
000f8c  e080              B        |L1.4240|
                  |L1.3982|
000f8e  8808              LDRH     r0,[r1,#0]            ;602  ; TIME_VISION_PULT
000f90  2800              CMP      r0,#0                 ;602
000f92  48d3              LDR      r0,|L1.4832|
000f94  d009              BEQ      |L1.4010|
000f96  6803              LDR      r3,[r0,#0]            ;604  ; T_PROC_GS
000f98  f44f7116          MOV      r1,#0x258             ;604
000f9c  fb93f1f1          SDIV     r1,r3,r1              ;604
000fa0  1e49              SUBS     r1,r1,#1              ;604
                  |L1.4002|
000fa2  f44f7316          MOV      r3,#0x258             ;429
000fa6  4359              MULS     r1,r3,r1              ;429
000fa8  e006              B        |L1.4024|
                  |L1.4010|
000faa  6801              LDR      r1,[r0,#0]            ;609  ; T_PROC_GS
000fac  fb91f1f6          SDIV     r1,r1,r6              ;609
000fb0  1e49              SUBS     r1,r1,#1              ;609
                  |L1.4018|
000fb2  eb010181          ADD      r1,r1,r1,LSL #2       ;434
000fb6  0049              LSLS     r1,r1,#1              ;434
                  |L1.4024|
000fb8  6001              STR      r1,[r0,#0]            ;610  ; T_PROC_GS
000fba  48c9              LDR      r0,|L1.4832|
000fbc  49c9              LDR      r1,|L1.4836|
000fbe  8016              STRH     r6,[r2,#0]            ;610
000fc0  6802              LDR      r2,[r0,#0]            ;352  ; T_PROC_GS
000fc2  6809              LDR      r1,[r1,#0]            ;352  ; T_PROC_MAX
000fc4  428a              CMP      r2,r1                 ;352
000fc6  dd01              BLE      |L1.4044|
000fc8  1c49              ADDS     r1,r1,#1              ;615
000fca  e716              B        |L1.3578|
                  |L1.4044|
000fcc  2a1e              CMP      r2,#0x1e              ;623
000fce  f6bfaf1b          BGE      |L1.3592|
000fd2  211d              MOVS     r1,#0x1d              ;625
000fd4  e711              B        |L1.3578|
                  |L1.4054|
000fd6  bbf3              CBNZ     r3,|L1.4182|
000fd8  8808              LDRH     r0,[r1,#0]            ;644  ; TIME_VISION_PULT
000fda  b1a0              CBZ      r0,|L1.4102|
000fdc  49bf              LDR      r1,|L1.4828|
000fde  f44f7016          MOV      r0,#0x258             ;646
000fe2  680a              LDR      r2,[r1,#0]            ;646  ; T_PROC_PS
000fe4  fb92f0f0          SDIV     r0,r2,r0              ;646
000fe8  1e40              SUBS     r0,r0,#1              ;646
                  |L1.4074|
000fea  f44f7216          MOV      r2,#0x258             ;470
000fee  4350              MULS     r0,r2,r0              ;470
000ff0  6008              STR      r0,[r1,#0]            ;470  ; T_PROC_PS
                  |L1.4082|
000ff2  48ba              LDR      r0,|L1.4828|
000ff4  49bb              LDR      r1,|L1.4836|
000ff6  f8aa6000          STRH     r6,[r10,#0]           ;652
000ffa  6802              LDR      r2,[r0,#0]            ;393  ; T_PROC_PS
000ffc  6809              LDR      r1,[r1,#0]            ;393  ; T_PROC_MAX
000ffe  428a              CMP      r2,r1                 ;393
001000  dd0a              BLE      |L1.4120|
001002  1c49              ADDS     r1,r1,#1              ;657
001004  e717              B        |L1.3638|
                  |L1.4102|
001006  48b5              LDR      r0,|L1.4828|
001008  6801              LDR      r1,[r0,#0]            ;651  ; T_PROC_PS
00100a  fb91f1f6          SDIV     r1,r1,r6              ;651
00100e  1e49              SUBS     r1,r1,#1              ;651
                  |L1.4112|
001010  eb010181          ADD      r1,r1,r1,LSL #2       ;651
001014  0049              LSLS     r1,r1,#1              ;651
001016  e70c              B        |L1.3634|
                  |L1.4120|
001018  2a1e              CMP      r2,#0x1e              ;665
00101a  f6bfaf13          BGE      |L1.3652|
00101e  211d              MOVS     r1,#0x1d              ;667
001020  e709              B        |L1.3638|
                  |L1.4130|
001022  7901              LDRB     r1,[r0,#4]  ; modbus_cmnd_cnt
001024  7802              LDRB     r2,[r0,#0]  ; modbus_self_cmnd_cnt
001026  4291              CMP      r1,r2
001028  d032              BEQ      |L1.4240|
;;;688    					{
;;;689    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;690    					if(tumbler_stat==tsI)
;;;691    						{
;;;692    						if(work_stat!=wsGS)
;;;693    							{
;;;694    							work_stat=wsGS;
;;;695    							time_proc=0;
;;;696    							time_proc_remain=T_PROC_GS;
;;;697    							index_set=0;
00102a  4eaf              LDR      r6,|L1.4840|
00102c  7001              STRB     r1,[r0,#0]            ;689
00102e  46f0              MOV      r8,lr                 ;690
001030  f1bc0f00          CMP      r12,#0                ;690
001034  d114              BNE      |L1.4192|
001036  7828              LDRB     r0,[r5,#0]            ;692  ; work_stat
001038  2801              CMP      r0,#1                 ;692
00103a  d00d              BEQ      |L1.4184|
00103c  2001              MOVS     r0,#1                 ;694
00103e  49ab              LDR      r1,|L1.4844|
001040  7028              STRB     r0,[r5,#0]            ;694
001042  2000              MOVS     r0,#0                 ;695
001044  6008              STR      r0,[r1,#0]            ;696  ; time_proc
001046  49a6              LDR      r1,|L1.4832|
001048  680a              LDR      r2,[r1,#0]            ;696  ; T_PROC_GS
00104a  49a9              LDR      r1,|L1.4848|
00104c  600a              STR      r2,[r1,#0]  ; time_proc_remain
00104e  7130              STRB     r0,[r6,#4]
;;;698    							restart_on_GS();
001050  f7fffffe          BL       restart_on_GS
001054  e004              B        |L1.4192|
                  |L1.4182|
001056  e016              B        |L1.4230|
                  |L1.4184|
;;;699    							}			
;;;700    						else 
;;;701    							{
;;;702    							work_stat=wsOFF;
001058  2000              MOVS     r0,#0
00105a  7028              STRB     r0,[r5,#0]
;;;703    							restart_off();
00105c  f7fffffe          BL       restart_off
                  |L1.4192|
;;;704    							}
;;;705    						}
;;;706    				
;;;707    					if(tumbler_stat==tsU)
001060  f8980000          LDRB     r0,[r8,#0]  ; tumbler_stat
001064  2801              CMP      r0,#1
001066  d113              BNE      |L1.4240|
;;;708    						{
;;;709    						if(work_stat!=wsPS)
001068  7828              LDRB     r0,[r5,#0]  ; work_stat
00106a  2802              CMP      r0,#2
00106c  d00c              BEQ      |L1.4232|
;;;710    							{
;;;711    							work_stat=wsPS;
00106e  2002              MOVS     r0,#2
;;;712    							time_proc=0;
001070  499e              LDR      r1,|L1.4844|
001072  7028              STRB     r0,[r5,#0]            ;711
001074  2000              MOVS     r0,#0
;;;713    							time_proc_remain=T_PROC_PS;
001076  6008              STR      r0,[r1,#0]  ; time_proc
001078  4998              LDR      r1,|L1.4828|
00107a  680a              LDR      r2,[r1,#0]  ; T_PROC_PS
00107c  499c              LDR      r1,|L1.4848|
;;;714    							index_set=0;
00107e  600a              STR      r2,[r1,#0]  ; time_proc_remain
001080  7130              STRB     r0,[r6,#4]
;;;715    							restart_on_PS();
001082  f7fffffe          BL       restart_on_PS
                  |L1.4230|
001086  e003              B        |L1.4240|
                  |L1.4232|
;;;716    							}			
;;;717    						else
;;;718    							{
;;;719    							work_stat=wsOFF;
001088  2000              MOVS     r0,#0
00108a  7028              STRB     r0,[r5,#0]
;;;720    							restart_off();
00108c  f7fffffe          BL       restart_off
                  |L1.4240|
;;;721    							}
;;;722    						}
;;;723    					}
;;;724    				}
;;;725    			}
;;;726    		}
;;;727    
;;;728    	if(modbus_an_buffer[0]==MODBUS_ADRESS)
001090  4898              LDR      r0,|L1.4852|
001092  7801              LDRB     r1,[r0,#0]  ; modbus_an_buffer
001094  4898              LDR      r0,|L1.4856|
001096  f9b00000          LDRSH    r0,[r0,#0]  ; MODBUS_ADRESS
00109a  4281              CMP      r1,r0
00109c  d159              BNE      |L1.4434|
;;;729    		{
;;;730    		if(modbus_func==3)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
00109e  9904              LDR      r1,[sp,#0x10]
0010a0  2903              CMP      r1,#3
0010a2  d04a              BEQ      |L1.4410|
;;;731    			{
;;;732    			if((modbus_rx_arg0>=50)&&(modbus_rx_arg0<80)) modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func, modbus_rx_arg0,modbus_rx_arg1, MODBUS_RTU_PROT);
;;;733    			}
;;;734    		else if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ	βυξδξβ
0010a4  2904              CMP      r1,#4
0010a6  d057              BEQ      |L1.4440|
;;;735    			{
;;;736    			modbus_input_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0, modbus_rx_arg1, MODBUS_RTU_PROT);
;;;737    			}
;;;738    
;;;739    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
0010a8  2906              CMP      r1,#6
0010aa  d152              BNE      |L1.4434|
;;;740    			{
;;;741    			if(modbus_rx_arg0==50)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
0010ac  2f32              CMP      r7,#0x32
0010ae  d05c              BEQ      |L1.4458|
;;;742    				{
;;;743    				I_ug=modbus_rx_arg1;
;;;744    				lc640_write_int(EE_I_UG,I_ug);
;;;745    				}
;;;746    			if(modbus_rx_arg0==51)		//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
0010b0  2f33              CMP      r7,#0x33
0010b2  d05f              BEQ      |L1.4468|
;;;747    				{
;;;748    				U_up=modbus_rx_arg1;
;;;749    				lc640_write_int(EE_U_UP,U_up);
;;;750    				}
;;;751    			if(modbus_rx_arg0==52)		//μΰκρθμΰολόνξε νΰοπζενθε δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
0010b4  2f34              CMP      r7,#0x34
0010b6  d062              BEQ      |L1.4478|
;;;752    				{
;;;753    				U_maxg=modbus_rx_arg1;
;;;754    				lc640_write_int(EE_U_MAX_G,U_maxg);
;;;755    				}
;;;756    			if(modbus_rx_arg0==53)		//μΰκρθμΰλόνϋι ςξκ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
0010b8  2f35              CMP      r7,#0x35
0010ba  d065              BEQ      |L1.4488|
;;;757    				{
;;;758    				I_maxp=modbus_rx_arg1;
;;;759    				lc640_write_int(EE_I_MAX_P,I_maxp);
;;;760    				}								
;;;761    			if(modbus_rx_arg0==54)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.ρεκσνδϋ
;;;762    				{
;;;763    				signed long sec,min,hour;
;;;764    				sec=(signed long)modbus_rx_arg1;
;;;765    				min=(T_PROC_GS/60L)%60L;
;;;766    				hour=T_PROC_GS/3600L;
0010bc  f44f6061          MOV      r0,#0xe10
0010c0  2f36              CMP      r7,#0x36              ;761
0010c2  d066              BEQ      |L1.4498|
;;;767    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;768    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;769    				}
;;;770    			if(modbus_rx_arg0==55)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.μθνσςϋ
0010c4  2f37              CMP      r7,#0x37
0010c6  d078              BEQ      |L1.4538|
;;;771    				{
;;;772    				signed long sec,min,hour;
;;;773    				sec=T_PROC_GS%60L;
;;;774    				min=(signed long)modbus_rx_arg1;
;;;775    				hour=T_PROC_GS/3600L;
;;;776    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;777    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;778    				}
;;;779    			if(modbus_rx_arg0==56)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.χΰρϋ
0010c8  2f38              CMP      r7,#0x38
0010ca  d077              BEQ      |L1.4540|
;;;780    				{
;;;781    				signed long sec,min,hour;
;;;782    				sec=T_PROC_GS%60L;
;;;783    				min=(T_PROC_GS/60L)%60L;
;;;784    				hour=(signed long)modbus_rx_arg1;
;;;785    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;786    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;787    				}
;;;788    			if(modbus_rx_arg0==57)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.ρεκσνδϋ
0010cc  2f39              CMP      r7,#0x39
0010ce  d076              BEQ      |L1.4542|
;;;789    				{
;;;790    				signed long sec,min,hour;
;;;791    				sec=(signed long)modbus_rx_arg1;
;;;792    				min=(T_PROC_PS/60L)%60L;
;;;793    				hour=T_PROC_PS/3600L;
;;;794    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;795    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;796    				}
;;;797    
;;;798    			if(modbus_rx_arg0==58)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.μθνσςϋ
0010d0  2f3a              CMP      r7,#0x3a
0010d2  d075              BEQ      |L1.4544|
;;;799    				{
;;;800    				signed long sec,min,hour;
;;;801    				sec=T_PROC_PS%60L;
;;;802    				min=(signed long)modbus_rx_arg1;
;;;803    				hour=T_PROC_PS/3600L;
;;;804    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;805    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;806    				}
;;;807    
;;;808    			if(modbus_rx_arg0==59)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.χΰρϋ
0010d4  2f3b              CMP      r7,#0x3b
0010d6  d074              BEQ      |L1.4546|
;;;809    				{
;;;810    				signed long sec,min,hour;
;;;811    				sec=T_PROC_PS%60L;
;;;812    				min=(T_PROC_PS/60L)%60L;
;;;813    				hour=(signed long)modbus_rx_arg1;
;;;814    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;815    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;816    				}
;;;817    
;;;818    			if(modbus_rx_arg0==60)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
0010d8  2f3c              CMP      r7,#0x3c
0010da  d073              BEQ      |L1.4548|
;;;819    				{
;;;820    				if(modbus_rx_arg1==1)
;;;821    					{
;;;822    					if(work_stat!=wsPS)
;;;823    						{
;;;824    						work_stat=wsPS;
;;;825    						time_proc=0;
;;;826    						time_proc_remain=T_PROC_PS;
;;;827    						restart_on_PS();
;;;828    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;829    						}
;;;830    					}
;;;831    				if(modbus_rx_arg1==0)
;;;832    					{
;;;833    					if(work_stat==wsPS)
;;;834    						{
;;;835    						work_stat=wsOFF;
;;;836    						restart_off();
;;;837    						}
;;;838    					}
;;;839    				}
;;;840    			if(modbus_rx_arg0==61)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
0010dc  2f3d              CMP      r7,#0x3d
0010de  d072              BEQ      |L1.4550|
;;;841    				{
;;;842    				if(modbus_rx_arg1==1)
;;;843    					{
;;;844    					if(work_stat!=wsGS)
;;;845    						{
;;;846    						work_stat=wsGS;
;;;847    						time_proc=0;
;;;848    						time_proc_remain=T_PROC_GS;
;;;849    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;850    						}
;;;851    					}
;;;852    				if(modbus_rx_arg1==0)
;;;853    					{
;;;854    					if(work_stat==wsGS)
;;;855    						{
;;;856    						work_stat=wsOFF;
;;;857    						restart_off();
;;;858    						}
;;;859    					}
;;;860    				}
;;;861    
;;;862    			if(modbus_rx_arg0==62)		//οεπεκλώχενθε πελε πεβεπρΰ
0010e0  2f3e              CMP      r7,#0x3e
0010e2  d071              BEQ      |L1.4552|
;;;863    				{
;;;864    					{
;;;865    					if(work_stat==wsOFF)
;;;866    						{
;;;867    						if(modbus_rx_arg1==0)REV_STAT=rsFF;
;;;868    						if(modbus_rx_arg1==1)REV_STAT=rsREW;
;;;869    						}
;;;870    					}
;;;871    				}
;;;872    			if(modbus_rx_arg0==63)		//βκλώχενθε-βϋκλώχενθε ΰβςξπεβεπρΰ
0010e4  2f3f              CMP      r7,#0x3f
0010e6  d070              BEQ      |L1.4554|
;;;873    				{
;;;874    					{
;;;875    					if((work_stat==wsOFF)&&(REV_IS_ON))
;;;876    						{
;;;877    						if(modbus_rx_arg1==1)AVT_REV_IS_ON=1;
;;;878    						if(modbus_rx_arg1==0)AVT_REV_IS_ON=0;
;;;879    						lc640_write_int(EE_AVT_REV_IS_ON,AVT_REV_IS_ON);
;;;880    						}
;;;881    					}
;;;882    				}
;;;883    			if(modbus_rx_arg0==64)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ οπμξε, ρεκ
0010e8  2f40              CMP      r7,#0x40
0010ea  d06f              BEQ      |L1.4556|
;;;884    				{
;;;885    				if(work_stat==wsOFF)
;;;886    					{
;;;887    					AVT_REV_TIME_FF=modbus_rx_arg1;
;;;888    					gran(&AVT_REV_TIME_FF,30,T_PROC_MAX);
;;;889    					lc640_write_int(EE_AVT_REV_TIME_FF,AVT_REV_TIME_FF);	
;;;890    					}
;;;891    				}
;;;892    			if(modbus_rx_arg0==65)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ ξαπΰςνξε, ρεκ
0010ec  2f41              CMP      r7,#0x41
0010ee  d06e              BEQ      |L1.4558|
;;;893    				{
;;;894    				if(work_stat==wsOFF)
;;;895    					{
;;;896    					AVT_REV_TIME_REW=modbus_rx_arg1;
;;;897    					gran(&AVT_REV_TIME_REW,30,T_PROC_MAX);
;;;898    					lc640_write_int(EE_AVT_REV_TIME_REW,AVT_REV_TIME_REW);	
;;;899    					}
;;;900    				}
;;;901    			if(modbus_rx_arg0==66)		//ΐβςξπεβεπρ, βπεμ οΰσηϋ οπθ οεπεκλώχενθθ, ρεκ
0010f0  2f42              CMP      r7,#0x42
0010f2  d06d              BEQ      |L1.4560|
;;;902    				{
;;;903    				if(work_stat==wsOFF)
;;;904    					{
;;;905    					AVT_REV_TIME_PAUSE=modbus_rx_arg1;
;;;906    					gran(&AVT_REV_TIME_PAUSE,2,600);
;;;907    					lc640_write_int(EE_AVT_REV_TIME_PAUSE,AVT_REV_TIME_PAUSE);	
;;;908    					}
;;;909    				}
;;;910    
;;;911    			if(modbus_rx_arg0==67)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ οπμξι, 0.1ΐ
0010f4  2f43              CMP      r7,#0x43
0010f6  d06c              BEQ      |L1.4562|
;;;912    				{
;;;913    				if(work_stat==wsOFF)
;;;914    					{
;;;915    					AVT_REV_I_NOM_FF=modbus_rx_arg1;
;;;916    		    			gran(&AVT_REV_I_NOM_FF,I_MIN_IPS,I_MAX_IPS);
;;;917    					lc640_write_int(EE_AVT_REV_I_NOM_FF,AVT_REV_I_NOM_FF);	
;;;918    					}
;;;919    				}
;;;920    
;;;921    			if(modbus_rx_arg0==68)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ ξαπΰςνϋι, 0.1ΐ
0010f8  2f44              CMP      r7,#0x44
0010fa  d06b              BEQ      |L1.4564|
;;;922    				{
;;;923    				if(work_stat==wsOFF)
;;;924    					{
;;;925    					AVT_REV_I_NOM_REW=modbus_rx_arg1;
;;;926    		    			gran(&AVT_REV_I_NOM_REW,I_MIN_IPS,I_MAX_IPS);
;;;927    					lc640_write_int(EE_AVT_REV_I_NOM_REW,AVT_REV_I_NOM_REW);	
;;;928    					}
;;;929    				}
;;;930    			if(modbus_rx_arg0==69)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ οπμξε, 0.1Β 
0010fc  2f45              CMP      r7,#0x45
0010fe  d06a              BEQ      |L1.4566|
;;;931    				{
;;;932    				if(work_stat==wsOFF)
;;;933    					{
;;;934    					AVT_REV_U_NOM_FF=modbus_rx_arg1;
;;;935    		    			gran(&AVT_REV_U_NOM_FF,U_MIN,U_MAX);
;;;936    					lc640_write_int(EE_AVT_REV_U_NOM_FF,AVT_REV_U_NOM_FF);					
;;;937    					}
;;;938    				}
;;;939    
;;;940    			if(modbus_rx_arg0==70)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ ξαπΰςνξε, 0.1Β
001100  2f46              CMP      r7,#0x46
001102  d069              BEQ      |L1.4568|
;;;941    				{
;;;942    				if(work_stat==wsOFF)
;;;943    					{
;;;944    					AVT_REV_U_NOM_REW=modbus_rx_arg1;
;;;945    		    			gran(&AVT_REV_U_NOM_REW,U_MIN,U_MAX);
;;;946    					lc640_write_int(EE_AVT_REV_U_NOM_REW,AVT_REV_U_NOM_REW);					
;;;947    					}
;;;948    				}
;;;949    
;;;950    			if(modbus_rx_arg0==71)		//Βπεμ ηΰπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;951    				{
;;;952    				if(work_stat==wsOFF)
;;;953    					{
;;;954    					CAP_ZAR_TIME=modbus_rx_arg1;
001104  4e7d              LDR      r6,|L1.4860|
;;;955    		    			gran(&CAP_ZAR_TIME,10,9999);
001106  f242720f          MOV      r2,#0x270f
00110a  2f47              CMP      r7,#0x47              ;950
00110c  d078              BEQ      |L1.4608|
;;;956    					lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;957    					}
;;;958    				}
;;;959    			if(modbus_rx_arg0==72)		//Βπεμ οΰσηϋ1 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;960    				{
;;;961    				if(work_stat==wsOFF)
;;;962    					{
;;;963    					CAP_PAUSE1_TIME=modbus_rx_arg1;
00110e  f8df81f0          LDR      r8,|L1.4864|
001112  2f48              CMP      r7,#0x48              ;959
001114  d075              BEQ      |L1.4610|
;;;964    		    			gran(&CAP_PAUSE1_TIME,10,9999);
;;;965    					lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;966    					}
;;;967    				}
;;;968    			if(modbus_rx_arg0==73)		//Βπεμ πΰηπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;969    				{
;;;970    				if(work_stat==wsOFF)
;;;971    					{
;;;972    					CAP_RAZR_TIME=modbus_rx_arg1;
001116  f8df91ec          LDR      r9,|L1.4868|
00111a  2f49              CMP      r7,#0x49              ;968
00111c  d072              BEQ      |L1.4612|
;;;973    		    			gran(&CAP_RAZR_TIME,10,9999);
;;;974    					lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;975    					}
;;;976    				}
;;;977    			if(modbus_rx_arg0==74)		//Βπεμ οΰσηϋ2 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;978    				{
;;;979    				if(work_stat==wsOFF)
;;;980    					{
;;;981    					CAP_PAUSE2_TIME=modbus_rx_arg1;
00111e  497a              LDR      r1,|L1.4872|
001120  2f4a              CMP      r7,#0x4a              ;977
001122  d070              BEQ      |L1.4614|
;;;982    		    			gran(&CAP_PAUSE2_TIME,10,9999);
;;;983    					lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;984    					}
;;;985    				}
;;;986    
;;;987    			if(modbus_rx_arg0==75)		//Μΰκρθμΰλόνξε νΰοπζενθε θροϋςΰςελόνξγξ φθκλΰ, 1Β  
;;;988    				{
;;;989    				if(work_stat==wsOFF)
;;;990    					{
;;;991    					CAP_MAX_VOLT=modbus_rx_arg1;
001124  f8dfa1e4          LDR      r10,|L1.4876|
001128  2f4b              CMP      r7,#0x4b              ;987
00112a  d06d              BEQ      |L1.4616|
;;;992    		    			gran(&CAP_MAX_VOLT,1,100);
;;;993    					lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;994    					}
;;;995    				}
;;;996    			if(modbus_rx_arg0==76)		//Πΰαξχθι ςξκ θροϋςΰςελόνξγξ φθκλΰ, 1ΐ 
;;;997    				{
;;;998    				if(work_stat==wsOFF)
;;;999    					{
;;;1000   					CAP_WRK_CURR=modbus_rx_arg1;
00112c  f8dfb1e0          LDR      r11,|L1.4880|
001130  2f4c              CMP      r7,#0x4c              ;996
001132  d06a              BEQ      |L1.4618|
;;;1001   		    			gran(&CAP_WRK_CURR,1,150);
;;;1002   					lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1003   					}
;;;1004   				}
;;;1005   
;;;1006   			if(modbus_rx_arg0==77)		//Πεγθρςπ δλ ηΰοθρθ κξμΰνδ 
001134  2f4d              CMP      r7,#0x4d
001136  d069              BEQ      |L1.4620|
001138  e27b              B        |L1.5682|
                  |L1.4410|
00113a  f1a70132          SUB      r1,r7,#0x32           ;732
00113e  291e              CMP      r1,#0x1e              ;732
001140  d207              BCS      |L1.4434|
001142  2100              MOVS     r1,#0                 ;732
001144  9100              STR      r1,[sp,#0]            ;732
001146  4623              MOV      r3,r4                 ;732
001148  463a              MOV      r2,r7                 ;732
00114a  b2c0              UXTB     r0,r0                 ;732
00114c  9904              LDR      r1,[sp,#0x10]         ;732
00114e  f7fffffe          BL       modbus_hold_registers_transmit
                  |L1.4434|
;;;1007   				{
;;;1008   				if(modbus_rx_arg1==0x11)
;;;1009   					{
;;;1010   					start_CAP();
;;;1011   					}
;;;1012   				if(modbus_rx_arg1==0x12)
;;;1013   					{
;;;1014   					pause_CAP();
;;;1015   					}
;;;1016   				if(modbus_rx_arg1==0x13)
;;;1017   					{
;;;1018   					stop_CAP();
;;;1019   					}
;;;1020   				if(modbus_rx_arg1==0x14)
;;;1021   					{
;;;1022   					reset_CAP();
;;;1023   					}
;;;1024   
;;;1025   				if(modbus_rx_arg1==0x21)
;;;1026   					{
;;;1027   					if(work_stat==wsOFF)
;;;1028   						{
;;;1029   						CAP_ZAR_TIME++;
;;;1030   		    				gran(&CAP_ZAR_TIME,10,9999);
;;;1031   						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;1032   						}
;;;1033   					}
;;;1034   				if(modbus_rx_arg1==0x22)
;;;1035   					{
;;;1036   					if(work_stat==wsOFF)
;;;1037   						{
;;;1038   						CAP_ZAR_TIME--;
;;;1039   		    				gran(&CAP_ZAR_TIME,10,9999);
;;;1040   						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;1041   						}
;;;1042   					}
;;;1043   
;;;1044   				if(modbus_rx_arg1==0x31)
;;;1045   					{
;;;1046   					if(work_stat==wsOFF)
;;;1047   						{
;;;1048   						CAP_PAUSE1_TIME++;
;;;1049   		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;1050   						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;1051   						}
;;;1052   					}
;;;1053   				if(modbus_rx_arg1==0x32)
;;;1054   					{
;;;1055   					if(work_stat==wsOFF)
;;;1056   						{
;;;1057   						CAP_PAUSE1_TIME--;
;;;1058   		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;1059   						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;1060   						}
;;;1061   					}
;;;1062   
;;;1063   				if(modbus_rx_arg1==0x41)
;;;1064   					{
;;;1065   					if(work_stat==wsOFF)
;;;1066   						{
;;;1067   						CAP_RAZR_TIME++;
;;;1068   		    				gran(&CAP_RAZR_TIME,10,9999);
;;;1069   						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;1070   						}
;;;1071   					}
;;;1072   				if(modbus_rx_arg1==0x42)
;;;1073   					{
;;;1074   					if(work_stat==wsOFF)
;;;1075   						{
;;;1076   						CAP_RAZR_TIME--;
;;;1077   		    				gran(&CAP_RAZR_TIME,10,9999);
;;;1078   						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;1079   						}
;;;1080   					}
;;;1081   
;;;1082   				if(modbus_rx_arg1==0x51)
;;;1083   					{
;;;1084   					if(work_stat==wsOFF)
;;;1085   						{
;;;1086   						CAP_PAUSE2_TIME++;
;;;1087   		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;1088   						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;1089   						}
;;;1090   					}
;;;1091   				if(modbus_rx_arg1==0x52)
;;;1092   					{
;;;1093   					if(work_stat==wsOFF)
;;;1094   						{
;;;1095   						CAP_PAUSE2_TIME--;
;;;1096   		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;1097   						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;1098   						}
;;;1099   					}
;;;1100   
;;;1101   				if(modbus_rx_arg1==0x61)
;;;1102   					{
;;;1103   					if(work_stat==wsOFF)
;;;1104   						{
;;;1105   						CAP_MAX_VOLT++;
;;;1106   		    				gran(&CAP_MAX_VOLT,1,100);
;;;1107   						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;1108   						}
;;;1109   					}
;;;1110   				if(modbus_rx_arg1==0x62)
;;;1111   					{
;;;1112   					if(work_stat==wsOFF)
;;;1113   						{
;;;1114   						CAP_MAX_VOLT--;
;;;1115   		    				gran(&CAP_MAX_VOLT,1,100);
;;;1116   						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;1117   						}
;;;1118   					}
;;;1119   
;;;1120   				if(modbus_rx_arg1==0x71)
;;;1121   					{
;;;1122   					if(work_stat==wsOFF)
;;;1123   						{
;;;1124   						CAP_WRK_CURR++;
;;;1125   		    				gran(&CAP_WRK_CURR,1,150);
;;;1126   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1127   						}
;;;1128   					}
;;;1129   				if(modbus_rx_arg1==0x72)
;;;1130   					{
;;;1131   					if(work_stat==wsOFF)
;;;1132   						{
;;;1133   						CAP_WRK_CURR--;
;;;1134   		    				gran(&CAP_WRK_CURR,1,150);
;;;1135   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1136   						}
;;;1137   					}
;;;1138   
;;;1139   				}
;;;1140   
;;;1141   			
;;;1142   			if((T_PROC_GS>T_PROC_MAX)||(T_PROC_GS<30))
;;;1143   				{
;;;1144   				if(T_PROC_GS>T_PROC_MAX)T_PROC_GS=T_PROC_MAX+1;
;;;1145   				else if(T_PROC_GS<30)T_PROC_GS=29;
;;;1146   				lc640_write_int(EE_T_PROC_GS,T_PROC_GS);
;;;1147   				T_PROC_GS_MODE=1;	
;;;1148   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1149   				}
;;;1150   			if((T_PROC_GS<=T_PROC_MAX)&&(T_PROC_GS>=30))
;;;1151   				{
;;;1152   				T_PROC_GS_MODE=0;	
;;;1153   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1154   				}
;;;1155   			
;;;1156   			if((T_PROC_PS>T_PROC_MAX)||(T_PROC_PS<30))
;;;1157   				{
;;;1158   				if(T_PROC_PS>T_PROC_MAX)T_PROC_PS=T_PROC_MAX+1;
;;;1159   				else if(T_PROC_PS<30)T_PROC_PS=29;
;;;1160   				lc640_write_int(EE_T_PROC_PS,T_PROC_PS);
;;;1161   				T_PROC_PS_MODE=1;	
;;;1162   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1163   				}
;;;1164   			if((T_PROC_PS<=T_PROC_MAX)&&(T_PROC_PS>=30))
;;;1165   				{
;;;1166   				T_PROC_PS_MODE=0;	
;;;1167   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1168   				}
;;;1169   
;;;1170   			modbus_hold_register_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0);
;;;1171   
;;;1172   
;;;1173   			//modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,2);
;;;1174   
;;;1175   
;;;1176   			}
;;;1177   		} 
;;;1178   	//;
;;;1179   	}
;;;1180   // modbus_plazma++;
;;;1181   
;;;1182   }
001152  b00b              ADD      sp,sp,#0x2c
001154  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.4440|
001158  2100              MOVS     r1,#0                 ;736
00115a  9100              STR      r1,[sp,#0]            ;736
00115c  4623              MOV      r3,r4                 ;736
00115e  463a              MOV      r2,r7                 ;736
001160  b2c0              UXTB     r0,r0                 ;736
001162  9904              LDR      r1,[sp,#0x10]         ;736
001164  f7fffffe          BL       modbus_input_registers_transmit
001168  e7f3              B        |L1.4434|
                  |L1.4458|
00116a  486a              LDR      r0,|L1.4884|
00116c  b221              SXTH     r1,r4                 ;743
00116e  8001              STRH     r1,[r0,#0]            ;743
001170  2020              MOVS     r0,#0x20              ;744
001172  e259              B        |L1.5672|
                  |L1.4468|
001174  4868              LDR      r0,|L1.4888|
001176  b221              SXTH     r1,r4                 ;748
001178  8001              STRH     r1,[r0,#0]            ;748
00117a  2022              MOVS     r0,#0x22              ;749
00117c  e254              B        |L1.5672|
                  |L1.4478|
00117e  4867              LDR      r0,|L1.4892|
001180  b221              SXTH     r1,r4                 ;753
001182  8001              STRH     r1,[r0,#0]            ;753
001184  2076              MOVS     r0,#0x76              ;754
001186  e24f              B        |L1.5672|
                  |L1.4488|
001188  4865              LDR      r0,|L1.4896|
00118a  b221              SXTH     r1,r4                 ;758
00118c  8001              STRH     r1,[r0,#0]            ;758
00118e  2078              MOVS     r0,#0x78              ;759
001190  e24a              B        |L1.5672|
                  |L1.4498|
001192  4a53              LDR      r2,|L1.4832|
001194  4649              MOV      r1,r9                 ;765
001196  6813              LDR      r3,[r2,#0]            ;765  ; T_PROC_GS
001198  fb93f5f1          SDIV     r5,r3,r1              ;765
00119c  fb95f6f9          SDIV     r6,r5,r9              ;765
0011a0  fb93f0f0          SDIV     r0,r3,r0              ;766
0011a4  fb095116          MLS      r1,r9,r6,r5           ;765
0011a8  f44f6361          MOV      r3,#0xe10             ;767
0011ac  4358              MULS     r0,r3,r0              ;767
0011ae  ebc11101          RSB      r1,r1,r1,LSL #4       ;767
0011b2  eb000081          ADD      r0,r0,r1,LSL #2       ;767
0011b6  1901              ADDS     r1,r0,r4              ;767
0011b8  e01f              B        |L1.4602|
                  |L1.4538|
0011ba  e00e              B        |L1.4570|
                  |L1.4540|
0011bc  e027              B        |L1.4622|
                  |L1.4542|
0011be  e03b              B        |L1.4664|
                  |L1.4544|
0011c0  e04e              B        |L1.4704|
                  |L1.4546|
0011c2  e05e              B        |L1.4738|
                  |L1.4548|
0011c4  e075              B        |L1.4786|
                  |L1.4550|
0011c6  e0b1              B        |L1.4908|
                  |L1.4552|
0011c8  e0cb              B        |L1.4962|
                  |L1.4554|
0011ca  e0d6              B        |L1.4986|
                  |L1.4556|
0011cc  e0e8              B        |L1.5024|
                  |L1.4558|
0011ce  e0f7              B        |L1.5056|
                  |L1.4560|
0011d0  e107              B        |L1.5090|
                  |L1.4562|
0011d2  e115              B        |L1.5120|
                  |L1.4564|
0011d4  e125              B        |L1.5154|
                  |L1.4566|
0011d6  e135              B        |L1.5188|
                  |L1.4568|
0011d8  e148              B        |L1.5228|
                  |L1.4570|
0011da  4a41              LDR      r2,|L1.4832|
0011dc  6813              LDR      r3,[r2,#0]            ;773  ; T_PROC_GS
0011de  fb93f5f9          SDIV     r5,r3,r9              ;773
0011e2  fb93f0f0          SDIV     r0,r3,r0              ;775
0011e6  fb093115          MLS      r1,r9,r5,r3           ;773
0011ea  f44f6361          MOV      r3,#0xe10             ;776
0011ee  4358              MULS     r0,r3,r0              ;776
0011f0  ebc41304          RSB      r3,r4,r4,LSL #4       ;776
0011f4  eb000083          ADD      r0,r0,r3,LSL #2       ;776
0011f8  4401              ADD      r1,r1,r0              ;776
                  |L1.4602|
0011fa  6011              STR      r1,[r2,#0]            ;767  ; T_PROC_GS
                  |L1.4604|
0011fc  20d8              MOVS     r0,#0xd8              ;768
0011fe  e055              B        |L1.4780|
                  |L1.4608|
001200  e146              B        |L1.5264|
                  |L1.4610|
001202  e149              B        |L1.5272|
                  |L1.4612|
001204  e14d              B        |L1.5282|
                  |L1.4614|
001206  e151              B        |L1.5292|
                  |L1.4616|
001208  e15b              B        |L1.5314|
                  |L1.4618|
00120a  e15f              B        |L1.5324|
                  |L1.4620|
00120c  e164              B        |L1.5336|
                  |L1.4622|
00120e  4834              LDR      r0,|L1.4832|
001210  4649              MOV      r1,r9                 ;782
001212  6803              LDR      r3,[r0,#0]            ;782  ; T_PROC_GS
001214  fb93f2f1          SDIV     r2,r3,r1              ;782
001218  fb92f5f9          SDIV     r5,r2,r9              ;783
00121c  fb092115          MLS      r1,r9,r5,r2           ;783
001220  fb093312          MLS      r3,r9,r2,r3           ;782
001224  f44f6261          MOV      r2,#0xe10             ;785
001228  4354              MULS     r4,r2,r4              ;785
00122a  ebc11101          RSB      r1,r1,r1,LSL #4       ;785
00122e  eb040181          ADD      r1,r4,r1,LSL #2       ;785
001232  4419              ADD      r1,r1,r3              ;785
001234  6001              STR      r1,[r0,#0]            ;787  ; T_PROC_GS
001236  e7e1              B        |L1.4604|
                  |L1.4664|
001238  4a28              LDR      r2,|L1.4828|
00123a  4649              MOV      r1,r9                 ;792
00123c  6813              LDR      r3,[r2,#0]            ;792  ; T_PROC_PS
00123e  fb93f5f1          SDIV     r5,r3,r1              ;792
001242  fb95f6f9          SDIV     r6,r5,r9              ;792
001246  fb93f0f0          SDIV     r0,r3,r0              ;793
00124a  fb095116          MLS      r1,r9,r6,r5           ;792
00124e  f44f6361          MOV      r3,#0xe10             ;794
001252  4358              MULS     r0,r3,r0              ;794
001254  ebc11101          RSB      r1,r1,r1,LSL #4       ;794
001258  eb000081          ADD      r0,r0,r1,LSL #2       ;794
00125c  1901              ADDS     r1,r0,r4              ;794
00125e  e023              B        |L1.4776|
                  |L1.4704|
001260  4a1e              LDR      r2,|L1.4828|
001262  6813              LDR      r3,[r2,#0]            ;801  ; T_PROC_PS
001264  fb93f5f9          SDIV     r5,r3,r9              ;801
001268  fb93f0f0          SDIV     r0,r3,r0              ;803
00126c  fb093115          MLS      r1,r9,r5,r3           ;801
001270  f44f6361          MOV      r3,#0xe10             ;804
001274  4358              MULS     r0,r3,r0              ;804
001276  ebc41304          RSB      r3,r4,r4,LSL #4       ;804
00127a  eb000083          ADD      r0,r0,r3,LSL #2       ;804
00127e  4401              ADD      r1,r1,r0              ;804
001280  e012              B        |L1.4776|
                  |L1.4738|
001282  4a16              LDR      r2,|L1.4828|
001284  4648              MOV      r0,r9                 ;811
001286  6813              LDR      r3,[r2,#0]            ;811  ; T_PROC_PS
001288  fb93f1f0          SDIV     r1,r3,r0              ;811
00128c  fb91f5f9          SDIV     r5,r1,r9              ;812
001290  fb091015          MLS      r0,r9,r5,r1           ;812
001294  fb093311          MLS      r3,r9,r1,r3           ;811
001298  f44f6161          MOV      r1,#0xe10             ;814
00129c  434c              MULS     r4,r1,r4              ;814
00129e  ebc01000          RSB      r0,r0,r0,LSL #4       ;814
0012a2  eb040080          ADD      r0,r4,r0,LSL #2       ;814
0012a6  18c1              ADDS     r1,r0,r3              ;814
                  |L1.4776|
0012a8  20dc              MOVS     r0,#0xdc              ;815
0012aa  6011              STR      r1,[r2,#0]            ;815  ; T_PROC_PS
                  |L1.4780|
0012ac  f7fffffe          BL       lc640_write_long
0012b0  e1bf              B        |L1.5682|
                  |L1.4786|
0012b2  2c01              CMP      r4,#1                 ;820
0012b4  d001              BEQ      |L1.4794|
0012b6  b184              CBZ      r4,|L1.4826|
0012b8  e1bb              B        |L1.5682|
                  |L1.4794|
0012ba  7828              LDRB     r0,[r5,#0]            ;822  ; work_stat
0012bc  2802              CMP      r0,#2                 ;822
0012be  d034              BEQ      |L1.4906|
0012c0  2002              MOVS     r0,#2                 ;824
0012c2  7028              STRB     r0,[r5,#0]            ;824
0012c4  4809              LDR      r0,|L1.4844|
0012c6  2100              MOVS     r1,#0                 ;825
0012c8  6001              STR      r1,[r0,#0]            ;826  ; time_proc
0012ca  4804              LDR      r0,|L1.4828|
0012cc  6801              LDR      r1,[r0,#0]            ;826  ; T_PROC_PS
0012ce  4808              LDR      r0,|L1.4848|
0012d0  6001              STR      r1,[r0,#0]            ;827  ; time_proc_remain
0012d2  f7fffffe          BL       restart_on_PS
0012d6  2101              MOVS     r1,#1                 ;828
0012d8  e039              B        |L1.4942|
                  |L1.4826|
0012da  e023              B        |L1.4900|
                  |L1.4828|
                          DCD      T_PROC_PS
                  |L1.4832|
                          DCD      T_PROC_GS
                  |L1.4836|
                          DCD      T_PROC_MAX
                  |L1.4840|
                          DCD      a_ind
                  |L1.4844|
                          DCD      time_proc
                  |L1.4848|
                          DCD      time_proc_remain
                  |L1.4852|
                          DCD      ||area_number.4||+0x1e
                  |L1.4856|
                          DCD      MODBUS_ADRESS
                  |L1.4860|
                          DCD      CAP_ZAR_TIME
                  |L1.4864|
                          DCD      CAP_PAUSE1_TIME
                  |L1.4868|
                          DCD      CAP_RAZR_TIME
                  |L1.4872|
                          DCD      CAP_PAUSE2_TIME
                  |L1.4876|
                          DCD      CAP_MAX_VOLT
                  |L1.4880|
                          DCD      CAP_WRK_CURR
                  |L1.4884|
                          DCD      I_ug
                  |L1.4888|
                          DCD      U_up
                  |L1.4892|
                          DCD      U_maxg
                  |L1.4896|
                          DCD      I_maxp
                  |L1.4900|
001324  7828              LDRB     r0,[r5,#0]            ;833  ; work_stat
001326  2802              CMP      r0,#2                 ;833
001328  d016              BEQ      |L1.4952|
                  |L1.4906|
00132a  e182              B        |L1.5682|
                  |L1.4908|
00132c  2c01              CMP      r4,#1                 ;842
00132e  d001              BEQ      |L1.4916|
001330  b17c              CBZ      r4,|L1.4946|
001332  e17e              B        |L1.5682|
                  |L1.4916|
001334  7828              LDRB     r0,[r5,#0]            ;844  ; work_stat
001336  2801              CMP      r0,#1                 ;844
001338  d012              BEQ      |L1.4960|
00133a  2001              MOVS     r0,#1                 ;846
00133c  7028              STRB     r0,[r5,#0]            ;846
00133e  48f1              LDR      r0,|L1.5892|
001340  2100              MOVS     r1,#0                 ;847
001342  6001              STR      r1,[r0,#0]            ;848  ; time_proc
001344  48f0              LDR      r0,|L1.5896|
001346  6801              LDR      r1,[r0,#0]            ;848  ; T_PROC_GS
001348  48f0              LDR      r0,|L1.5900|
00134a  6001              STR      r1,[r0,#0]            ;849  ; time_proc_remain
00134c  2100              MOVS     r1,#0                 ;849
                  |L1.4942|
00134e  20ea              MOVS     r0,#0xea              ;828
001350  e16a              B        |L1.5672|
                  |L1.4946|
001352  7828              LDRB     r0,[r5,#0]            ;854  ; work_stat
001354  2801              CMP      r0,#1                 ;854
001356  d103              BNE      |L1.4960|
                  |L1.4952|
001358  2000              MOVS     r0,#0                 ;856
00135a  7028              STRB     r0,[r5,#0]            ;856
00135c  f7fffffe          BL       restart_off
                  |L1.4960|
001360  e167              B        |L1.5682|
                  |L1.4962|
001362  7828              LDRB     r0,[r5,#0]            ;865  ; work_stat
001364  bbe0              CBNZ     r0,|L1.5088|
001366  48ea              LDR      r0,|L1.5904|
001368  b114              CBZ      r4,|L1.4976|
00136a  2c01              CMP      r4,#1                 ;868
00136c  d002              BEQ      |L1.4980|
00136e  e160              B        |L1.5682|
                  |L1.4976|
001370  2101              MOVS     r1,#1                 ;867
001372  e000              B        |L1.4982|
                  |L1.4980|
001374  2100              MOVS     r1,#0                 ;868
                  |L1.4982|
001376  7001              STRB     r1,[r0,#0]            ;868
001378  e15b              B        |L1.5682|
                  |L1.4986|
00137a  7828              LDRB     r0,[r5,#0]            ;875  ; work_stat
00137c  bb80              CBNZ     r0,|L1.5088|
00137e  48e5              LDR      r0,|L1.5908|
001380  8800              LDRH     r0,[r0,#0]            ;875  ; REV_IS_ON
001382  b368              CBZ      r0,|L1.5088|
001384  4ae4              LDR      r2,|L1.5912|
001386  f44f7084          MOV      r0,#0x108             ;879
00138a  2c01              CMP      r4,#1                 ;877
00138c  d003              BEQ      |L1.5014|
00138e  b124              CBZ      r4,|L1.5018|
001390  f9b21000          LDRSH    r1,[r2,#0]            ;879  ; AVT_REV_IS_ON
001394  e148              B        |L1.5672|
                  |L1.5014|
001396  2101              MOVS     r1,#1                 ;877
001398  e000              B        |L1.5020|
                  |L1.5018|
00139a  2100              MOVS     r1,#0                 ;878
                  |L1.5020|
00139c  8011              STRH     r1,[r2,#0]            ;877
00139e  e143              B        |L1.5672|
                  |L1.5024|
0013a0  7828              LDRB     r0,[r5,#0]            ;885  ; work_stat
0013a2  b9e8              CBNZ     r0,|L1.5088|
0013a4  4ddd              LDR      r5,|L1.5916|
0013a6  48de              LDR      r0,|L1.5920|
0013a8  211e              MOVS     r1,#0x1e              ;888
0013aa  802c              STRH     r4,[r5,#0]            ;887
0013ac  6800              LDR      r0,[r0,#0]            ;888  ; T_PROC_MAX
0013ae  b202              SXTH     r2,r0                 ;888
0013b0  4628              MOV      r0,r5                 ;888
0013b2  f7fffffe          BL       gran
0013b6  f9b51000          LDRSH    r1,[r5,#0]            ;889  ; AVT_REV_TIME_FF
0013ba  f44f7085          MOV      r0,#0x10a             ;889
0013be  e133              B        |L1.5672|
                  |L1.5056|
0013c0  7828              LDRB     r0,[r5,#0]            ;894  ; work_stat
0013c2  b968              CBNZ     r0,|L1.5088|
0013c4  4dd7              LDR      r5,|L1.5924|
0013c6  48d6              LDR      r0,|L1.5920|
0013c8  211e              MOVS     r1,#0x1e              ;897
0013ca  802c              STRH     r4,[r5,#0]            ;896
0013cc  6800              LDR      r0,[r0,#0]            ;897  ; T_PROC_MAX
0013ce  b202              SXTH     r2,r0                 ;897
0013d0  4628              MOV      r0,r5                 ;897
0013d2  f7fffffe          BL       gran
0013d6  f9b51000          LDRSH    r1,[r5,#0]            ;898  ; AVT_REV_TIME_REW
0013da  f44f7086          MOV      r0,#0x10c             ;898
0013de  e123              B        |L1.5672|
                  |L1.5088|
0013e0  e040              B        |L1.5220|
                  |L1.5090|
0013e2  7828              LDRB     r0,[r5,#0]            ;903  ; work_stat
0013e4  bbf0              CBNZ     r0,|L1.5220|
0013e6  4dd0              LDR      r5,|L1.5928|
0013e8  f44f7216          MOV      r2,#0x258             ;906
0013ec  2102              MOVS     r1,#2                 ;906
0013ee  802c              STRH     r4,[r5,#0]            ;905
0013f0  4628              MOV      r0,r5                 ;906
0013f2  f7fffffe          BL       gran
0013f6  f9b51000          LDRSH    r1,[r5,#0]            ;907  ; AVT_REV_TIME_PAUSE
0013fa  f44f7087          MOV      r0,#0x10e             ;907
0013fe  e113              B        |L1.5672|
                  |L1.5120|
001400  7828              LDRB     r0,[r5,#0]            ;913  ; work_stat
001402  bb78              CBNZ     r0,|L1.5220|
001404  4dc9              LDR      r5,|L1.5932|
001406  48ca              LDR      r0,|L1.5936|
001408  802c              STRH     r4,[r5,#0]            ;915
00140a  f9b01000          LDRSH    r1,[r0,#0]            ;916  ; I_MIN_IPS
00140e  f9bb2000          LDRSH    r2,[r11,#0]           ;916  ; I_MAX_IPS
001412  4628              MOV      r0,r5                 ;916
001414  f7fffffe          BL       gran
001418  f9b51000          LDRSH    r1,[r5,#0]            ;917  ; AVT_REV_I_NOM_FF
00141c  f44f7088          MOV      r0,#0x110             ;917
001420  e102              B        |L1.5672|
                  |L1.5154|
001422  7828              LDRB     r0,[r5,#0]            ;923  ; work_stat
001424  b9f0              CBNZ     r0,|L1.5220|
001426  4dc3              LDR      r5,|L1.5940|
001428  48c1              LDR      r0,|L1.5936|
00142a  802c              STRH     r4,[r5,#0]            ;925
00142c  f9b01000          LDRSH    r1,[r0,#0]            ;926  ; I_MIN_IPS
001430  f9bb2000          LDRSH    r2,[r11,#0]           ;926  ; I_MAX_IPS
001434  4628              MOV      r0,r5                 ;926
001436  f7fffffe          BL       gran
00143a  f9b51000          LDRSH    r1,[r5,#0]            ;927  ; AVT_REV_I_NOM_REW
00143e  f44f7089          MOV      r0,#0x112             ;927
001442  e0f1              B        |L1.5672|
                  |L1.5188|
001444  7828              LDRB     r0,[r5,#0]            ;932  ; work_stat
001446  b968              CBNZ     r0,|L1.5220|
001448  4dbb              LDR      r5,|L1.5944|
00144a  48bc              LDR      r0,|L1.5948|
00144c  802c              STRH     r4,[r5,#0]            ;934
00144e  f9b02000          LDRSH    r2,[r0,#0]            ;935  ; U_MAX
001452  48bb              LDR      r0,|L1.5952|
001454  f9b01000          LDRSH    r1,[r0,#0]            ;935  ; U_MIN
001458  4628              MOV      r0,r5                 ;935
00145a  f7fffffe          BL       gran
00145e  f9b51000          LDRSH    r1,[r5,#0]            ;936  ; AVT_REV_U_NOM_FF
001462  e000              B        |L1.5222|
                  |L1.5220|
001464  e037              B        |L1.5334|
                  |L1.5222|
001466  f44f708a          MOV      r0,#0x114             ;936
00146a  e0dd              B        |L1.5672|
                  |L1.5228|
00146c  7828              LDRB     r0,[r5,#0]            ;942  ; work_stat
00146e  bb90              CBNZ     r0,|L1.5334|
001470  4db4              LDR      r5,|L1.5956|
001472  48b2              LDR      r0,|L1.5948|
001474  802c              STRH     r4,[r5,#0]            ;944
001476  f9b02000          LDRSH    r2,[r0,#0]            ;945  ; U_MAX
00147a  48b1              LDR      r0,|L1.5952|
00147c  f9b01000          LDRSH    r1,[r0,#0]            ;945  ; U_MIN
001480  4628              MOV      r0,r5                 ;945
001482  f7fffffe          BL       gran
001486  f9b51000          LDRSH    r1,[r5,#0]            ;946  ; AVT_REV_U_NOM_REW
00148a  f44f708b          MOV      r0,#0x116             ;946
00148e  e0cb              B        |L1.5672|
                  |L1.5264|
001490  7828              LDRB     r0,[r5,#0]            ;952  ; work_stat
001492  bb00              CBNZ     r0,|L1.5334|
001494  8034              STRH     r4,[r6,#0]            ;954
001496  e051              B        |L1.5436|
                  |L1.5272|
001498  7828              LDRB     r0,[r5,#0]            ;961  ; work_stat
00149a  b9e0              CBNZ     r0,|L1.5334|
00149c  f8a84000          STRH     r4,[r8,#0]            ;963
0014a0  e061              B        |L1.5478|
                  |L1.5282|
0014a2  7828              LDRB     r0,[r5,#0]            ;970  ; work_stat
0014a4  b9b8              CBNZ     r0,|L1.5334|
0014a6  f8a94000          STRH     r4,[r9,#0]            ;972
0014aa  e073              B        |L1.5524|
                  |L1.5292|
0014ac  7828              LDRB     r0,[r5,#0]            ;979  ; work_stat
0014ae  b990              CBNZ     r0,|L1.5334|
0014b0  460d              MOV      r5,r1                 ;981
0014b2  800c              STRH     r4,[r1,#0]            ;981
0014b4  210a              MOVS     r1,#0xa               ;982
0014b6  48a4              LDR      r0,|L1.5960|
0014b8  f7fffffe          BL       gran
0014bc  f9b51000          LDRSH    r1,[r5,#0]            ;983  ; CAP_PAUSE2_TIME
0014c0  e080              B        |L1.5572|
                  |L1.5314|
0014c2  7828              LDRB     r0,[r5,#0]            ;989  ; work_stat
0014c4  b938              CBNZ     r0,|L1.5334|
0014c6  f8aa4000          STRH     r4,[r10,#0]           ;991
0014ca  e094              B        |L1.5622|
                  |L1.5324|
0014cc  7828              LDRB     r0,[r5,#0]            ;998  ; work_stat
0014ce  b910              CBNZ     r0,|L1.5334|
0014d0  f8ab4000          STRH     r4,[r11,#0]           ;1000
0014d4  e0bf              B        |L1.5718|
                  |L1.5334|
0014d6  e066              B        |L1.5542|
                  |L1.5336|
0014d8  2c11              CMP      r4,#0x11              ;1008
0014da  d01e              BEQ      |L1.5402|
0014dc  2c12              CMP      r4,#0x12              ;1012
0014de  d01f              BEQ      |L1.5408|
0014e0  2c13              CMP      r4,#0x13              ;1016
0014e2  d020              BEQ      |L1.5414|
0014e4  2c14              CMP      r4,#0x14              ;1020
0014e6  d021              BEQ      |L1.5420|
0014e8  2c21              CMP      r4,#0x21              ;1025
0014ea  d022              BEQ      |L1.5426|
0014ec  2c22              CMP      r4,#0x22              ;1034
0014ee  d02e              BEQ      |L1.5454|
0014f0  2c31              CMP      r4,#0x31              ;1044
0014f2  d032              BEQ      |L1.5466|
0014f4  2c32              CMP      r4,#0x32              ;1053
0014f6  d03f              BEQ      |L1.5496|
0014f8  2c41              CMP      r4,#0x41              ;1063
0014fa  d045              BEQ      |L1.5512|
0014fc  2c42              CMP      r4,#0x42              ;1072
0014fe  d053              BEQ      |L1.5544|
001500  2c51              CMP      r4,#0x51              ;1082
001502  d059              BEQ      |L1.5560|
001504  2c52              CMP      r4,#0x52              ;1091
001506  d060              BEQ      |L1.5578|
001508  2c61              CMP      r4,#0x61              ;1101
00150a  d06b              BEQ      |L1.5604|
00150c  2c62              CMP      r4,#0x62              ;1110
00150e  d07c              BEQ      |L1.5642|
001510  2c71              CMP      r4,#0x71              ;1120
001512  d06e              BEQ      |L1.5618|
001514  2c72              CMP      r4,#0x72              ;1129
001516  d06d              BEQ      |L1.5620|
001518  e08b              B        |L1.5682|
                  |L1.5402|
00151a  f7fffffe          BL       start_CAP
00151e  e088              B        |L1.5682|
                  |L1.5408|
001520  f7fffffe          BL       pause_CAP
001524  e085              B        |L1.5682|
                  |L1.5414|
001526  f7fffffe          BL       stop_CAP
00152a  e082              B        |L1.5682|
                  |L1.5420|
00152c  f7fffffe          BL       reset_CAP
001530  e07f              B        |L1.5682|
                  |L1.5426|
001532  7828              LDRB     r0,[r5,#0]            ;1027  ; work_stat
001534  bbb8              CBNZ     r0,|L1.5542|
001536  8830              LDRH     r0,[r6,#0]            ;1029  ; CAP_ZAR_TIME
001538  1c40              ADDS     r0,r0,#1              ;1029
00153a  e00c              B        |L1.5462|
                  |L1.5436|
00153c  210a              MOVS     r1,#0xa               ;955
00153e  4883              LDR      r0,|L1.5964|
001540  f7fffffe          BL       gran
001544  f9b61000          LDRSH    r1,[r6,#0]            ;956  ; CAP_ZAR_TIME
001548  f44f70e9          MOV      r0,#0x1d2             ;956
00154c  e06c              B        |L1.5672|
                  |L1.5454|
00154e  7828              LDRB     r0,[r5,#0]            ;1036  ; work_stat
001550  bb48              CBNZ     r0,|L1.5542|
001552  8830              LDRH     r0,[r6,#0]            ;1038  ; CAP_ZAR_TIME
001554  1e40              SUBS     r0,r0,#1              ;1038
                  |L1.5462|
001556  8030              STRH     r0,[r6,#0]            ;1038
001558  e7f0              B        |L1.5436|
                  |L1.5466|
00155a  7828              LDRB     r0,[r5,#0]            ;1046  ; work_stat
00155c  bb18              CBNZ     r0,|L1.5542|
00155e  f8b80000          LDRH     r0,[r8,#0]            ;1048  ; CAP_PAUSE1_TIME
001562  1c40              ADDS     r0,r0,#1              ;1048
001564  e00d              B        |L1.5506|
                  |L1.5478|
001566  210a              MOVS     r1,#0xa               ;964
001568  4879              LDR      r0,|L1.5968|
00156a  f7fffffe          BL       gran
00156e  f9b81000          LDRSH    r1,[r8,#0]            ;965  ; CAP_PAUSE1_TIME
001572  f44f70ea          MOV      r0,#0x1d4             ;965
001576  e057              B        |L1.5672|
                  |L1.5496|
001578  7828              LDRB     r0,[r5,#0]            ;1055  ; work_stat
00157a  b9a0              CBNZ     r0,|L1.5542|
00157c  f8b80000          LDRH     r0,[r8,#0]            ;1057  ; CAP_PAUSE1_TIME
001580  1e40              SUBS     r0,r0,#1              ;1057
                  |L1.5506|
001582  f8a80000          STRH     r0,[r8,#0]            ;1057
001586  e7ee              B        |L1.5478|
                  |L1.5512|
001588  7828              LDRB     r0,[r5,#0]            ;1065  ; work_stat
00158a  b960              CBNZ     r0,|L1.5542|
00158c  f8b90000          LDRH     r0,[r9,#0]            ;1067  ; CAP_RAZR_TIME
001590  1c40              ADDS     r0,r0,#1              ;1067
001592  e00e              B        |L1.5554|
                  |L1.5524|
001594  210a              MOVS     r1,#0xa               ;973
001596  486f              LDR      r0,|L1.5972|
001598  f7fffffe          BL       gran
00159c  f9b91000          LDRSH    r1,[r9,#0]            ;974  ; CAP_RAZR_TIME
0015a0  f44f70eb          MOV      r0,#0x1d6             ;974
0015a4  e040              B        |L1.5672|
                  |L1.5542|
0015a6  e038              B        |L1.5658|
                  |L1.5544|
0015a8  7828              LDRB     r0,[r5,#0]            ;1074  ; work_stat
0015aa  bbb0              CBNZ     r0,|L1.5658|
0015ac  f8b90000          LDRH     r0,[r9,#0]            ;1076  ; CAP_RAZR_TIME
0015b0  1e40              SUBS     r0,r0,#1              ;1076
                  |L1.5554|
0015b2  f8a90000          STRH     r0,[r9,#0]            ;1076
0015b6  e7ed              B        |L1.5524|
                  |L1.5560|
0015b8  7828              LDRB     r0,[r5,#0]            ;1084  ; work_stat
0015ba  bb70              CBNZ     r0,|L1.5658|
0015bc  8808              LDRH     r0,[r1,#0]            ;1086  ; CAP_PAUSE2_TIME
0015be  460c              MOV      r4,r1                 ;1086
0015c0  1c40              ADDS     r0,r0,#1              ;1086
0015c2  e007              B        |L1.5588|
                  |L1.5572|
0015c4  f44f70ec          MOV      r0,#0x1d8             ;983
0015c8  e02e              B        |L1.5672|
                  |L1.5578|
0015ca  7828              LDRB     r0,[r5,#0]            ;1093  ; work_stat
0015cc  bb28              CBNZ     r0,|L1.5658|
0015ce  8808              LDRH     r0,[r1,#0]            ;1095  ; CAP_PAUSE2_TIME
0015d0  460c              MOV      r4,r1                 ;1095
0015d2  1e40              SUBS     r0,r0,#1              ;1095
                  |L1.5588|
0015d4  8020              STRH     r0,[r4,#0]            ;1095
0015d6  210a              MOVS     r1,#0xa               ;1096
0015d8  485b              LDR      r0,|L1.5960|
0015da  f7fffffe          BL       gran
0015de  f9b41000          LDRSH    r1,[r4,#0]            ;1097  ; CAP_PAUSE2_TIME
0015e2  e7ef              B        |L1.5572|
                  |L1.5604|
0015e4  7828              LDRB     r0,[r5,#0]            ;1103  ; work_stat
0015e6  b9c0              CBNZ     r0,|L1.5658|
0015e8  f8ba0000          LDRH     r0,[r10,#0]           ;1105  ; CAP_MAX_VOLT
0015ec  1c40              ADDS     r0,r0,#1              ;1105
0015ee  e011              B        |L1.5652|
0015f0  e00b              B        |L1.5642|
                  |L1.5618|
0015f2  e013              B        |L1.5660|
                  |L1.5620|
0015f4  e01b              B        |L1.5678|
                  |L1.5622|
0015f6  2264              MOVS     r2,#0x64              ;992
0015f8  2101              MOVS     r1,#1                 ;992
0015fa  4857              LDR      r0,|L1.5976|
0015fc  f7fffffe          BL       gran
001600  f9ba1000          LDRSH    r1,[r10,#0]           ;993  ; CAP_MAX_VOLT
001604  f44f70ed          MOV      r0,#0x1da             ;993
001608  e00e              B        |L1.5672|
                  |L1.5642|
00160a  7828              LDRB     r0,[r5,#0]            ;1112  ; work_stat
00160c  b928              CBNZ     r0,|L1.5658|
00160e  f8ba0000          LDRH     r0,[r10,#0]           ;1114  ; CAP_MAX_VOLT
001612  1e40              SUBS     r0,r0,#1              ;1114
                  |L1.5652|
001614  f8aa0000          STRH     r0,[r10,#0]           ;1114
001618  e7ed              B        |L1.5622|
                  |L1.5658|
00161a  e00a              B        |L1.5682|
                  |L1.5660|
00161c  7828              LDRB     r0,[r5,#0]            ;1122  ; work_stat
00161e  b940              CBNZ     r0,|L1.5682|
001620  f8bb0000          LDRH     r0,[r11,#0]           ;1124  ; CAP_WRK_CURR
001624  1c40              ADDS     r0,r0,#1              ;1124
001626  e014              B        |L1.5714|
                  |L1.5672|
001628  f7fffffe          BL       lc640_write_int
00162c  e001              B        |L1.5682|
                  |L1.5678|
00162e  7828              LDRB     r0,[r5,#0]            ;1131  ; work_stat
001630  b160              CBZ      r0,|L1.5708|
                  |L1.5682|
001632  4c35              LDR      r4,|L1.5896|
001634  4d3a              LDR      r5,|L1.5920|
001636  6820              LDR      r0,[r4,#0]            ;1142  ; T_PROC_GS
001638  6829              LDR      r1,[r5,#0]            ;1142  ; T_PROC_MAX
00163a  4288              CMP      r0,r1                 ;1142
00163c  dc01              BGT      |L1.5698|
00163e  281e              CMP      r0,#0x1e              ;1142
001640  da22              BGE      |L1.5768|
                  |L1.5698|
001642  4288              CMP      r0,r1                 ;1144
001644  dd11              BLE      |L1.5738|
001646  1c49              ADDS     r1,r1,#1              ;1144
001648  6021              STR      r1,[r4,#0]            ;1144  ; T_PROC_GS
00164a  e012              B        |L1.5746|
                  |L1.5708|
00164c  f8bb0000          LDRH     r0,[r11,#0]           ;1133  ; CAP_WRK_CURR
001650  1e40              SUBS     r0,r0,#1              ;1133
                  |L1.5714|
001652  f8ab0000          STRH     r0,[r11,#0]           ;1124
                  |L1.5718|
001656  2296              MOVS     r2,#0x96              ;1134
001658  2101              MOVS     r1,#1                 ;1134
00165a  4840              LDR      r0,|L1.5980|
00165c  f7fffffe          BL       gran
001660  f9bb1000          LDRSH    r1,[r11,#0]           ;1135  ; CAP_WRK_CURR
001664  f44f70ee          MOV      r0,#0x1dc             ;1135
001668  e7de              B        |L1.5672|
                  |L1.5738|
00166a  281e              CMP      r0,#0x1e              ;1145
00166c  da01              BGE      |L1.5746|
00166e  201d              MOVS     r0,#0x1d              ;1145
001670  6020              STR      r0,[r4,#0]            ;1145  ; T_PROC_GS
                  |L1.5746|
001672  6820              LDR      r0,[r4,#0]            ;1146  ; T_PROC_GS
001674  b201              SXTH     r1,r0                 ;1146
001676  20d8              MOVS     r0,#0xd8              ;1146
001678  f7fffffe          BL       lc640_write_int
00167c  4838              LDR      r0,|L1.5984|
00167e  2101              MOVS     r1,#1                 ;1147
001680  8001              STRH     r1,[r0,#0]            ;1147
001682  20ee              MOVS     r0,#0xee              ;1148
001684  f7fffffe          BL       lc640_write_int
                  |L1.5768|
001688  6820              LDR      r0,[r4,#0]            ;1150  ; T_PROC_GS
00168a  6829              LDR      r1,[r5,#0]            ;1150  ; T_PROC_MAX
00168c  4288              CMP      r0,r1                 ;1150
00168e  dc07              BGT      |L1.5792|
001690  281e              CMP      r0,#0x1e              ;1150
001692  db05              BLT      |L1.5792|
001694  4832              LDR      r0,|L1.5984|
001696  2100              MOVS     r1,#0                 ;1152
001698  8001              STRH     r1,[r0,#0]            ;1152
00169a  20ee              MOVS     r0,#0xee              ;1153
00169c  f7fffffe          BL       lc640_write_int
                  |L1.5792|
0016a0  4c30              LDR      r4,|L1.5988|
0016a2  6829              LDR      r1,[r5,#0]            ;1156  ; T_PROC_MAX
0016a4  6820              LDR      r0,[r4,#0]            ;1156  ; T_PROC_PS
0016a6  4288              CMP      r0,r1                 ;1156
0016a8  dc01              BGT      |L1.5806|
0016aa  281e              CMP      r0,#0x1e              ;1156
0016ac  da13              BGE      |L1.5846|
                  |L1.5806|
0016ae  4288              CMP      r0,r1                 ;1158
0016b0  dd02              BLE      |L1.5816|
0016b2  1c49              ADDS     r1,r1,#1              ;1158
0016b4  6021              STR      r1,[r4,#0]            ;1158  ; T_PROC_PS
0016b6  e003              B        |L1.5824|
                  |L1.5816|
0016b8  281e              CMP      r0,#0x1e              ;1159
0016ba  da01              BGE      |L1.5824|
0016bc  201d              MOVS     r0,#0x1d              ;1159
0016be  6020              STR      r0,[r4,#0]            ;1159  ; T_PROC_PS
                  |L1.5824|
0016c0  6820              LDR      r0,[r4,#0]            ;1160  ; T_PROC_PS
0016c2  b201              SXTH     r1,r0                 ;1160
0016c4  20dc              MOVS     r0,#0xdc              ;1160
0016c6  f7fffffe          BL       lc640_write_int
0016ca  4827              LDR      r0,|L1.5992|
0016cc  2101              MOVS     r1,#1                 ;1161
0016ce  8001              STRH     r1,[r0,#0]            ;1161
0016d0  20f0              MOVS     r0,#0xf0              ;1162
0016d2  f7fffffe          BL       lc640_write_int
                  |L1.5846|
0016d6  6820              LDR      r0,[r4,#0]            ;1164  ; T_PROC_PS
0016d8  6829              LDR      r1,[r5,#0]            ;1164  ; T_PROC_MAX
0016da  4288              CMP      r0,r1                 ;1164
0016dc  dc07              BGT      |L1.5870|
0016de  281e              CMP      r0,#0x1e              ;1164
0016e0  db05              BLT      |L1.5870|
0016e2  4821              LDR      r0,|L1.5992|
0016e4  2100              MOVS     r1,#0                 ;1166
0016e6  8001              STRH     r1,[r0,#0]            ;1166
0016e8  20f0              MOVS     r0,#0xf0              ;1167
0016ea  f7fffffe          BL       lc640_write_int
                  |L1.5870|
0016ee  481f              LDR      r0,|L1.5996|
0016f0  9904              LDR      r1,[sp,#0x10]         ;1170
0016f2  463a              MOV      r2,r7                 ;1170
0016f4  8800              LDRH     r0,[r0,#0]            ;1170  ; MODBUS_ADRESS
0016f6  b00b              ADD      sp,sp,#0x2c           ;1170
0016f8  b2c0              UXTB     r0,r0                 ;1170
0016fa  e8bd4ff0          POP      {r4-r11,lr}           ;1170
0016fe  f7ffbffe          B.W      modbus_hold_register_transmit
;;;1183   
                          ENDP

001702  0000              DCW      0x0000
                  |L1.5892|
                          DCD      time_proc
                  |L1.5896|
                          DCD      T_PROC_GS
                  |L1.5900|
                          DCD      time_proc_remain
                  |L1.5904|
                          DCD      REV_STAT
                  |L1.5908|
                          DCD      REV_IS_ON
                  |L1.5912|
                          DCD      AVT_REV_IS_ON
                  |L1.5916|
                          DCD      AVT_REV_TIME_FF
                  |L1.5920|
                          DCD      T_PROC_MAX
                  |L1.5924|
                          DCD      AVT_REV_TIME_REW
                  |L1.5928|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.5932|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.5936|
                          DCD      I_MIN_IPS
                  |L1.5940|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.5944|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.5948|
                          DCD      U_MAX
                  |L1.5952|
                          DCD      U_MIN
                  |L1.5956|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.5960|
                          DCD      CAP_PAUSE2_TIME
                  |L1.5964|
                          DCD      CAP_ZAR_TIME
                  |L1.5968|
                          DCD      CAP_PAUSE1_TIME
                  |L1.5972|
                          DCD      CAP_RAZR_TIME
                  |L1.5976|
                          DCD      CAP_MAX_VOLT
                  |L1.5980|
                          DCD      CAP_WRK_CURR
                  |L1.5984|
                          DCD      T_PROC_GS_MODE
                  |L1.5988|
                          DCD      T_PROC_PS
                  |L1.5992|
                          DCD      T_PROC_PS_MODE
                  |L1.5996|
                          DCD      MODBUS_ADRESS

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  modbus_buf
                          %        20

                          AREA ||area_number.4||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.4||, ||.bss||
                  modbus_rx_buffer
                          %        30
                  modbus_an_buffer
                          %        30
                  modbus_registers
                          %        200

                          AREA ||.data||, DATA, ALIGN=1

                  modbus_self_cmnd_cnt
000000  21                DCB      0x21
                  bMODBUS_TIMEOUT
000001  00                DCB      0x00
                  modbus_rx_buffer_ptr
000002  00                DCB      0x00
                  modbus_rx_counter
000003  00                DCB      0x00
                  modbus_cmnd_cnt
000004  00                DCB      0x00
                  modbus_cmnd
000005  00                DCB      0x00
                  modbus_plazma
000006  0000              DCB      0x00,0x00
                  modbus_plazma1
000008  0000              DCB      0x00,0x00
                  modbus_plazma2
00000a  0000              DCB      0x00,0x00
                  modbus_plazma3
00000c  0000              DCB      0x00,0x00

                          AREA ||area_number.7||, DATA, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.data||
                  modbus_crc16
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.8||, DATA, ALIGN=0

                          EXPORTAS ||area_number.8||, ||.data||
                  modbus_timeout_cnt
000000  00                DCB      0x00

                          AREA ||area_number.9||, DATA, ALIGN=1

                          EXPORTAS ||area_number.9||, ||.data||
                  modbusTimeoutInMills
000000  0000              DCB      0x00,0x00
