; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\modbus.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\modbus.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\modbus.crf modbus.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CRC16_2 PROC
;;;38     //-----------------------------------------------
;;;39     unsigned short CRC16_2(char* buf, short len)
000000  b570              PUSH     {r4-r6,lr}
;;;40     {
000002  4604              MOV      r4,r0
;;;41     unsigned short crc = 0xFFFF;
000004  f64f70ff          MOV      r0,#0xffff
;;;42     short pos;
;;;43     short i;
;;;44     
;;;45     for (pos = 0; pos < len; pos++)
000008  2200              MOVS     r2,#0
;;;46       	{
;;;47         	crc ^= (unsigned short)buf[pos];          // XOR byte into least sig. byte of crc
;;;48     
;;;49         	for ( i = 8; i != 0; i--) 
;;;50     		{    // Loop over each bit
;;;51           	if ((crc & 0x0001) != 0) 
;;;52     			{      // If the LSB is set
;;;53             		crc >>= 1;                    // Shift right and XOR 0xA001
;;;54             		crc ^= 0xA001;
00000a  f24a0501          MOV      r5,#0xa001
00000e  e00d              B        |L1.44|
                  |L1.16|
000010  5ca3              LDRB     r3,[r4,r2]            ;47
000012  4058              EORS     r0,r0,r3              ;47
000014  2308              MOVS     r3,#8                 ;49
                  |L1.22|
000016  07c6              LSLS     r6,r0,#31             ;51
;;;55           		}
;;;56           	else  crc >>= 1;                    // Just shift right
000018  ea4f0050          LSR      r0,r0,#1
00001c  d000              BEQ      |L1.32|
00001e  4068              EORS     r0,r0,r5              ;54
                  |L1.32|
000020  1e5b              SUBS     r3,r3,#1              ;49
000022  b21b              SXTH     r3,r3                 ;49
000024  2b00              CMP      r3,#0                 ;49
000026  d1f6              BNE      |L1.22|
000028  1c52              ADDS     r2,r2,#1              ;45
00002a  b212              SXTH     r2,r2                 ;45
                  |L1.44|
00002c  428a              CMP      r2,r1                 ;45
00002e  dbef              BLT      |L1.16|
;;;57         		}
;;;58       	}
;;;59       // Note, this number has low and high bytes swapped, so use it accordingly (or swap bytes)
;;;60     return crc;
;;;61     }
000030  bd70              POP      {r4-r6,pc}
;;;62     
                          ENDP

                  modbus_hold_register_transmit PROC
;;;1505   //-----------------------------------------------
;;;1506   void modbus_hold_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000032  e92d43f0          PUSH     {r4-r9,lr}
;;;1507   {
000036  4681              MOV      r9,r0
;;;1508   char modbus_registers[120];
;;;1509   char modbus_tx_buff[100];
;;;1510   unsigned short crc_temp;
;;;1511   char i;
;;;1512   
;;;1513   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
000038  48f9              LDR      r0,|L1.1056|
00003a  b0b7              SUB      sp,sp,#0xdc           ;1507
;;;1514   modbus_registers[1]=(char)(I_ug%256);
;;;1515   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
;;;1516   modbus_registers[3]=(char)(U_up%256);
;;;1517   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
;;;1518   modbus_registers[5]=(char)(U_maxg%256);
;;;1519   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1520   modbus_registers[7]=(char)(I_maxp%256);
;;;1521   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1522   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1523   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1524   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1525   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
;;;1526   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00003c  f44f6861          MOV      r8,#0xe10
000040  f9b00000          LDRSH    r0,[r0,#0]            ;1513  ; I_ug
000044  17c3              ASRS     r3,r0,#31             ;1513
000046  eb006313          ADD      r3,r0,r3,LSR #24      ;1513
00004a  121c              ASRS     r4,r3,#8              ;1513
00004c  f88d4000          STRB     r4,[sp,#0]            ;1513
000050  f88d0001          STRB     r0,[sp,#1]            ;1514
000054  48f3              LDR      r0,|L1.1060|
000056  f9b00000          LDRSH    r0,[r0,#0]            ;1515  ; U_up
00005a  17c3              ASRS     r3,r0,#31             ;1515
00005c  eb006313          ADD      r3,r0,r3,LSR #24      ;1515
000060  121c              ASRS     r4,r3,#8              ;1515
000062  f88d4002          STRB     r4,[sp,#2]            ;1515
000066  f88d0003          STRB     r0,[sp,#3]            ;1516
00006a  48ef              LDR      r0,|L1.1064|
00006c  f9b00000          LDRSH    r0,[r0,#0]            ;1517  ; U_maxg
000070  17c3              ASRS     r3,r0,#31             ;1517
000072  eb006313          ADD      r3,r0,r3,LSR #24      ;1517
000076  121c              ASRS     r4,r3,#8              ;1517
000078  f88d4004          STRB     r4,[sp,#4]            ;1517
00007c  f88d0005          STRB     r0,[sp,#5]            ;1518
000080  48ea              LDR      r0,|L1.1068|
000082  f9b00000          LDRSH    r0,[r0,#0]            ;1519  ; I_maxp
000086  17c3              ASRS     r3,r0,#31             ;1519
000088  eb006313          ADD      r3,r0,r3,LSR #24      ;1519
00008c  121c              ASRS     r4,r3,#8              ;1519
00008e  f88d4006          STRB     r4,[sp,#6]            ;1519
000092  f88d0007          STRB     r0,[sp,#7]            ;1520
000096  48e6              LDR      r0,|L1.1072|
000098  233c              MOVS     r3,#0x3c              ;1521
00009a  6804              LDR      r4,[r0,#0]            ;1521  ; T_PROC_GS
00009c  fb94f5f3          SDIV     r5,r4,r3              ;1521
0000a0  fb034015          MLS      r0,r3,r5,r4           ;1521
0000a4  17c6              ASRS     r6,r0,#31             ;1521
0000a6  eb006616          ADD      r6,r0,r6,LSR #24      ;1521
0000aa  1237              ASRS     r7,r6,#8              ;1521
0000ac  f88d7008          STRB     r7,[sp,#8]            ;1521
0000b0  f88d0009          STRB     r0,[sp,#9]            ;1522
0000b4  fb95f0f3          SDIV     r0,r5,r3              ;1523
0000b8  fb035010          MLS      r0,r3,r0,r5           ;1523
0000bc  17c5              ASRS     r5,r0,#31             ;1523
0000be  eb006515          ADD      r5,r0,r5,LSR #24      ;1523
0000c2  122e              ASRS     r6,r5,#8              ;1523
0000c4  f88d600a          STRB     r6,[sp,#0xa]          ;1523
0000c8  f88d000b          STRB     r0,[sp,#0xb]          ;1524
0000cc  f44f2761          MOV      r7,#0xe1000           ;1525
0000d0  fb94f0f7          SDIV     r0,r4,r7              ;1525
0000d4  f88d000c          STRB     r0,[sp,#0xc]          ;1525
0000d8  fb94f0f8          SDIV     r0,r4,r8
0000dc  f88d000d          STRB     r0,[sp,#0xd]
;;;1527   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0000e0  48d4              LDR      r0,|L1.1076|
0000e2  6804              LDR      r4,[r0,#0]  ; T_PROC_PS
0000e4  fb94f5f3          SDIV     r5,r4,r3
0000e8  fb034015          MLS      r0,r3,r5,r4
0000ec  17c6              ASRS     r6,r0,#31
0000ee  eb006616          ADD      r6,r0,r6,LSR #24
0000f2  ea4f2c26          ASR      r12,r6,#8
0000f6  f88dc00e          STRB     r12,[sp,#0xe]
;;;1528   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0000fa  f88d000f          STRB     r0,[sp,#0xf]
;;;1529   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0000fe  fb95f0f3          SDIV     r0,r5,r3
000102  fb035010          MLS      r0,r3,r0,r5
000106  17c3              ASRS     r3,r0,#31
000108  eb006313          ADD      r3,r0,r3,LSR #24
00010c  121d              ASRS     r5,r3,#8
00010e  f88d5010          STRB     r5,[sp,#0x10]
;;;1530   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
000112  f88d0011          STRB     r0,[sp,#0x11]
;;;1531   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
000116  fb94f0f7          SDIV     r0,r4,r7
00011a  f88d0012          STRB     r0,[sp,#0x12]
;;;1532   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
00011e  fb94f0f8          SDIV     r0,r4,r8
000122  f88d0013          STRB     r0,[sp,#0x13]
;;;1533   modbus_registers[20]=0;								//Πεγ60
000126  2000              MOVS     r0,#0
;;;1534   modbus_registers[21]=0;
;;;1535   if(work_stat==wsPS)modbus_registers[21]=1;
000128  4bc3              LDR      r3,|L1.1080|
00012a  f88d0014          STRB     r0,[sp,#0x14]         ;1533
00012e  f88d0015          STRB     r0,[sp,#0x15]         ;1534
000132  781c              LDRB     r4,[r3,#0]  ; work_stat
000134  2301              MOVS     r3,#1
000136  2c02              CMP      r4,#2
000138  d101              BNE      |L1.318|
00013a  f88d3015          STRB     r3,[sp,#0x15]
                  |L1.318|
;;;1536   modbus_registers[22]=0;								//Πεγ61
00013e  f88d0016          STRB     r0,[sp,#0x16]
;;;1537   modbus_registers[23]=0;
000142  f88d0017          STRB     r0,[sp,#0x17]
;;;1538   if(work_stat==wsGS)modbus_registers[23]=1;
000146  2c01              CMP      r4,#1
000148  d101              BNE      |L1.334|
00014a  f88d3017          STRB     r3,[sp,#0x17]
                  |L1.334|
;;;1539   modbus_registers[24]=0;								//Πεγ62
;;;1540   modbus_registers[25]=0;
;;;1541   if(REV_STAT==rsREW)modbus_registers[25]=1;
00014e  4cbb              LDR      r4,|L1.1084|
000150  f88d0018          STRB     r0,[sp,#0x18]         ;1539
000154  f88d0019          STRB     r0,[sp,#0x19]         ;1540
000158  7824              LDRB     r4,[r4,#0]  ; REV_STAT
00015a  b90c              CBNZ     r4,|L1.352|
00015c  f88d3019          STRB     r3,[sp,#0x19]
                  |L1.352|
;;;1542   modbus_registers[26]=0;								//Πεγ63
000160  f88d001a          STRB     r0,[sp,#0x1a]
;;;1543   modbus_registers[27]=0;
000164  f88d001b          STRB     r0,[sp,#0x1b]
;;;1544   if(AVT_REV_IS_ON)modbus_registers[27]=1;
000168  48b5              LDR      r0,|L1.1088|
00016a  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
00016c  b108              CBZ      r0,|L1.370|
00016e  f88d301b          STRB     r3,[sp,#0x1b]
                  |L1.370|
;;;1545   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000172  48b4              LDR      r0,|L1.1092|
000174  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_FF
000178  17c3              ASRS     r3,r0,#31
00017a  eb006313          ADD      r3,r0,r3,LSR #24
00017e  121c              ASRS     r4,r3,#8
000180  f88d401c          STRB     r4,[sp,#0x1c]
;;;1546   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
000184  f88d001d          STRB     r0,[sp,#0x1d]
;;;1547   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
000188  48af              LDR      r0,|L1.1096|
00018a  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_REW
00018e  17c3              ASRS     r3,r0,#31
000190  eb006313          ADD      r3,r0,r3,LSR #24
000194  121c              ASRS     r4,r3,#8
000196  f88d401e          STRB     r4,[sp,#0x1e]
;;;1548   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00019a  f88d001f          STRB     r0,[sp,#0x1f]
;;;1549   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00019e  48ab              LDR      r0,|L1.1100|
0001a0  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_PAUSE
0001a4  17c3              ASRS     r3,r0,#31
0001a6  eb006313          ADD      r3,r0,r3,LSR #24
0001aa  121c              ASRS     r4,r3,#8
0001ac  f88d4020          STRB     r4,[sp,#0x20]
;;;1550   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
0001b0  f88d0021          STRB     r0,[sp,#0x21]
;;;1551   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
0001b4  48a6              LDR      r0,|L1.1104|
0001b6  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_FF
0001ba  17c3              ASRS     r3,r0,#31
0001bc  eb006313          ADD      r3,r0,r3,LSR #24
0001c0  121c              ASRS     r4,r3,#8
0001c2  f88d4022          STRB     r4,[sp,#0x22]
;;;1552   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
0001c6  f88d0023          STRB     r0,[sp,#0x23]
;;;1553   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
0001ca  48a2              LDR      r0,|L1.1108|
0001cc  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_REW
0001d0  17c3              ASRS     r3,r0,#31
0001d2  eb006313          ADD      r3,r0,r3,LSR #24
0001d6  121c              ASRS     r4,r3,#8
0001d8  f88d4024          STRB     r4,[sp,#0x24]
;;;1554   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
0001dc  f88d0025          STRB     r0,[sp,#0x25]
;;;1555   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
0001e0  489d              LDR      r0,|L1.1112|
0001e2  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_FF
0001e6  17c3              ASRS     r3,r0,#31
0001e8  eb006313          ADD      r3,r0,r3,LSR #24
0001ec  121c              ASRS     r4,r3,#8
0001ee  f88d4026          STRB     r4,[sp,#0x26]
;;;1556   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
0001f2  f88d0027          STRB     r0,[sp,#0x27]
;;;1557   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
0001f6  4899              LDR      r0,|L1.1116|
0001f8  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_REW
0001fc  17c3              ASRS     r3,r0,#31
0001fe  eb006313          ADD      r3,r0,r3,LSR #24
000202  121c              ASRS     r4,r3,#8
000204  f88d4028          STRB     r4,[sp,#0x28]
;;;1558   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
000208  f88d0029          STRB     r0,[sp,#0x29]
;;;1559   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
00020c  4894              LDR      r0,|L1.1120|
00020e  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_ZAR_TIME
000212  17c3              ASRS     r3,r0,#31
000214  eb006313          ADD      r3,r0,r3,LSR #24
000218  121c              ASRS     r4,r3,#8
00021a  f88d402a          STRB     r4,[sp,#0x2a]
;;;1560   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
00021e  f88d002b          STRB     r0,[sp,#0x2b]
;;;1561   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
000222  4890              LDR      r0,|L1.1124|
000224  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
000228  17c3              ASRS     r3,r0,#31
00022a  eb006313          ADD      r3,r0,r3,LSR #24
00022e  121c              ASRS     r4,r3,#8
000230  f88d402c          STRB     r4,[sp,#0x2c]
;;;1562   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
000234  f88d002d          STRB     r0,[sp,#0x2d]
;;;1563   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
000238  488b              LDR      r0,|L1.1128|
00023a  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
00023e  17c3              ASRS     r3,r0,#31
000240  eb006313          ADD      r3,r0,r3,LSR #24
000244  121c              ASRS     r4,r3,#8
000246  f88d402e          STRB     r4,[sp,#0x2e]
;;;1564   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
00024a  f88d002f          STRB     r0,[sp,#0x2f]
;;;1565   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
00024e  4887              LDR      r0,|L1.1132|
000250  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
000254  17c3              ASRS     r3,r0,#31
000256  eb006313          ADD      r3,r0,r3,LSR #24
00025a  121c              ASRS     r4,r3,#8
00025c  f88d4030          STRB     r4,[sp,#0x30]
;;;1566   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
000260  f88d0031          STRB     r0,[sp,#0x31]
;;;1567   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
000264  4882              LDR      r0,|L1.1136|
000266  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_MAX_VOLT
00026a  17c3              ASRS     r3,r0,#31
00026c  eb006313          ADD      r3,r0,r3,LSR #24
000270  121c              ASRS     r4,r3,#8
000272  f88d4032          STRB     r4,[sp,#0x32]
;;;1568   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
000276  f88d0033          STRB     r0,[sp,#0x33]
;;;1569   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
00027a  487e              LDR      r0,|L1.1140|
00027c  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_WRK_CURR
;;;1570   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
;;;1571   
;;;1572   modbus_tx_buff[0]=adr;
000280  f88d9078          STRB     r9,[sp,#0x78]
000284  17c3              ASRS     r3,r0,#31             ;1569
000286  eb006313          ADD      r3,r0,r3,LSR #24      ;1569
00028a  121c              ASRS     r4,r3,#8              ;1569
00028c  f88d4034          STRB     r4,[sp,#0x34]         ;1569
000290  f88d0035          STRB     r0,[sp,#0x35]         ;1570
;;;1573   modbus_tx_buff[1]=func;
000294  f88d1079          STRB     r1,[sp,#0x79]
;;;1574   modbus_tx_buff[2]=(char)(reg_adr/256);
000298  0a10              LSRS     r0,r2,#8
00029a  f88d007a          STRB     r0,[sp,#0x7a]
;;;1575   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1576   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1577   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1578   
;;;1579   
;;;1580   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
00029e  4668              MOV      r0,sp
0002a0  eb000042          ADD      r0,r0,r2,LSL #1
0002a4  f88d207b          STRB     r2,[sp,#0x7b]         ;1575
0002a8  f8300c02          LDRH     r0,[r0,#-2]
0002ac  f8ad007c          STRH     r0,[sp,#0x7c]
;;;1581   
;;;1582   crc_temp=CRC16_2(modbus_tx_buff,6);
0002b0  2106              MOVS     r1,#6
0002b2  a81e              ADD      r0,sp,#0x78
0002b4  f7fffffe          BL       CRC16_2
;;;1583   
;;;1584   modbus_tx_buff[6]=crc_temp%256;
0002b8  f88d007e          STRB     r0,[sp,#0x7e]
;;;1585   modbus_tx_buff[7]=crc_temp/256;
0002bc  0a00              LSRS     r0,r0,#8
0002be  f88d007f          STRB     r0,[sp,#0x7f]
;;;1586   
;;;1587   for (i=0;i<8;i++)
0002c2  2400              MOVS     r4,#0
0002c4  ad1e              ADD      r5,sp,#0x78           ;1509
                  |L1.710|
;;;1588   	{
;;;1589   	putchar0(modbus_tx_buff[i]);
0002c6  5d28              LDRB     r0,[r5,r4]
0002c8  f7fffffe          BL       putchar0
0002cc  1c64              ADDS     r4,r4,#1              ;1587
0002ce  b2e4              UXTB     r4,r4                 ;1587
0002d0  2c08              CMP      r4,#8                 ;1587
0002d2  d3f8              BCC      |L1.710|
;;;1590   	}
;;;1591   for (i=0;i<8;i++)
0002d4  2400              MOVS     r4,#0
                  |L1.726|
;;;1592   	{
;;;1593   	putchar_sc16is700(modbus_tx_buff[i]);
0002d6  5d28              LDRB     r0,[r5,r4]
0002d8  f7fffffe          BL       putchar_sc16is700
0002dc  1c64              ADDS     r4,r4,#1              ;1591
0002de  b2e4              UXTB     r4,r4                 ;1591
0002e0  2c08              CMP      r4,#8                 ;1591
0002e2  d3f8              BCC      |L1.726|
;;;1594   	}
;;;1595   }	
0002e4  b037              ADD      sp,sp,#0xdc
0002e6  e8bd83f0          POP      {r4-r9,pc}
;;;1596   
                          ENDP

                  modbus_input_registers_transmit PROC
;;;1261   //-----------------------------------------------
;;;1262   void modbus_input_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
0002ea  e92d4ff0          PUSH     {r4-r11,lr}
;;;1263   {
0002ee  4683              MOV      r11,r0
;;;1264   //char modbus_registers[110];
;;;1265   char modbus_tx_buff[200];
;;;1266   unsigned short crc_temp;
;;;1267   char i;
;;;1268   /*
;;;1269   load_U=1234;
;;;1270   load_I=5678;
;;;1271   time_proc=361233UL;//1357;
;;;1272   time_proc_remain=722444UL;//1357;
;;;1273   
;;;1274   bVOLT_IS_NOT_DOWN=0;
;;;1275   bVOLT_IS_NOT_UP=1;	
;;;1276   */
;;;1277   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
0002f0  4861              LDR      r0,|L1.1144|
0002f2  468e              MOV      lr,r1                 ;1263
0002f4  4692              MOV      r10,r2                ;1263
0002f6  f9b01000          LDRSH    r1,[r0,#0]  ; load_U
0002fa  b0b3              SUB      sp,sp,#0xcc           ;1263
0002fc  17c8              ASRS     r0,r1,#31
0002fe  eb016210          ADD      r2,r1,r0,LSR #24
000302  485e              LDR      r0,|L1.1148|
000304  461c              MOV      r4,r3                 ;1263
000306  1213              ASRS     r3,r2,#8
000308  f8ddc0f0          LDR      r12,[sp,#0xf0]
00030c  7003              STRB     r3,[r0,#0]
;;;1278   modbus_registers[1]=(char)(load_U%256);
00030e  7041              STRB     r1,[r0,#1]
;;;1279   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
000310  495b              LDR      r1,|L1.1152|
;;;1280   modbus_registers[3]=(char)(load_I%256);
;;;1281   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
;;;1282   modbus_registers[5]=(char)((time_proc%60)%256);
;;;1283   modbus_registers[6]=(char)(((time_proc/60)%60)/256);		//Πεγ4
;;;1284   modbus_registers[7]=(char)(((time_proc/60)%60)%256);
;;;1285   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
000312  f44f2961          MOV      r9,#0xe1000
;;;1286   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000316  f44f6861          MOV      r8,#0xe10
00031a  f9b11000          LDRSH    r1,[r1,#0]            ;1279  ; load_I
00031e  17ca              ASRS     r2,r1,#31             ;1279
000320  eb016212          ADD      r2,r1,r2,LSR #24      ;1279
000324  1213              ASRS     r3,r2,#8              ;1279
000326  7083              STRB     r3,[r0,#2]            ;1279
000328  70c1              STRB     r1,[r0,#3]            ;1280
00032a  4956              LDR      r1,|L1.1156|
00032c  223c              MOVS     r2,#0x3c              ;1281
00032e  680b              LDR      r3,[r1,#0]            ;1281  ; time_proc
000330  fb93f5f2          SDIV     r5,r3,r2              ;1281
000334  fb023115          MLS      r1,r2,r5,r3           ;1281
000338  17ce              ASRS     r6,r1,#31             ;1281
00033a  eb016716          ADD      r7,r1,r6,LSR #24      ;1281
00033e  123e              ASRS     r6,r7,#8              ;1281
000340  7106              STRB     r6,[r0,#4]            ;1281
000342  7141              STRB     r1,[r0,#5]            ;1282
000344  fb95f1f2          SDIV     r1,r5,r2              ;1283
000348  fb025111          MLS      r1,r2,r1,r5           ;1283
00034c  17cd              ASRS     r5,r1,#31             ;1283
00034e  eb016515          ADD      r5,r1,r5,LSR #24      ;1283
000352  122e              ASRS     r6,r5,#8              ;1283
000354  7186              STRB     r6,[r0,#6]            ;1283
000356  71c1              STRB     r1,[r0,#7]            ;1284
000358  fb93f1f9          SDIV     r1,r3,r9              ;1285
00035c  7201              STRB     r1,[r0,#8]            ;1285
00035e  fb93f1f8          SDIV     r1,r3,r8
000362  7241              STRB     r1,[r0,#9]
;;;1287   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
000364  4948              LDR      r1,|L1.1160|
000366  680b              LDR      r3,[r1,#0]  ; time_proc_remain
000368  fb93f7f2          SDIV     r7,r3,r2
00036c  fb023117          MLS      r1,r2,r7,r3
000370  17cd              ASRS     r5,r1,#31
000372  eb016515          ADD      r5,r1,r5,LSR #24
000376  122e              ASRS     r6,r5,#8
000378  7286              STRB     r6,[r0,#0xa]
;;;1288   modbus_registers[11]=(char)((time_proc_remain%60)%256);
00037a  72c1              STRB     r1,[r0,#0xb]
;;;1289   modbus_registers[12]=(char)(((time_proc_remain/60)%60)/256);//Πεγ7
00037c  fb97f1f2          SDIV     r1,r7,r2
000380  fb027111          MLS      r1,r2,r1,r7
000384  17ca              ASRS     r2,r1,#31
000386  eb016212          ADD      r2,r1,r2,LSR #24
00038a  1215              ASRS     r5,r2,#8
00038c  7305              STRB     r5,[r0,#0xc]
;;;1290   modbus_registers[13]=(char)(((time_proc_remain/60)%60)%256);
00038e  7341              STRB     r1,[r0,#0xd]
;;;1291   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
000390  fb93f1f9          SDIV     r1,r3,r9
000394  7381              STRB     r1,[r0,#0xe]
;;;1292   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
000396  fb93f1f8          SDIV     r1,r3,r8
00039a  73c1              STRB     r1,[r0,#0xf]
;;;1293   modbus_registers[16]=(char)((CAP_COUNTER)/256);			//Πεγ9
00039c  493b              LDR      r1,|L1.1164|
00039e  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_COUNTER
0003a2  17ca              ASRS     r2,r1,#31
0003a4  eb016212          ADD      r2,r1,r2,LSR #24
0003a8  1213              ASRS     r3,r2,#8
0003aa  7403              STRB     r3,[r0,#0x10]
;;;1294   modbus_registers[17]=(char)((CAP_COUNTER)%256);
0003ac  7441              STRB     r1,[r0,#0x11]
;;;1295   modbus_registers[18]=(char)((CAP_TIME_SEC)/256);			//Πεγ10
0003ae  4938              LDR      r1,|L1.1168|
0003b0  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_SEC
0003b4  17ca              ASRS     r2,r1,#31
0003b6  eb016212          ADD      r2,r1,r2,LSR #24
0003ba  1213              ASRS     r3,r2,#8
0003bc  7483              STRB     r3,[r0,#0x12]
;;;1296   modbus_registers[19]=(char)((CAP_TIME_SEC)%256);
0003be  74c1              STRB     r1,[r0,#0x13]
;;;1297   modbus_registers[20]=(char)((CAP_TIME_MIN)/256);			//Πεγ11
0003c0  4934              LDR      r1,|L1.1172|
0003c2  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_MIN
0003c6  17ca              ASRS     r2,r1,#31
0003c8  eb016212          ADD      r2,r1,r2,LSR #24
0003cc  1213              ASRS     r3,r2,#8
0003ce  7503              STRB     r3,[r0,#0x14]
;;;1298   modbus_registers[21]=(char)((CAP_TIME_MIN)%256);
0003d0  7541              STRB     r1,[r0,#0x15]
;;;1299   modbus_registers[22]=(char)((CAP_TIME_HOUR)/256);			//Πεγ12
0003d2  4931              LDR      r1,|L1.1176|
0003d4  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_HOUR
0003d8  17ca              ASRS     r2,r1,#31
0003da  eb016212          ADD      r2,r1,r2,LSR #24
0003de  1213              ASRS     r3,r2,#8
0003e0  7583              STRB     r3,[r0,#0x16]
;;;1300   modbus_registers[23]=(char)((CAP_TIME_HOUR)%256);
0003e2  75c1              STRB     r1,[r0,#0x17]
;;;1301   modbus_registers[24]=0;
0003e4  2100              MOVS     r1,#0
;;;1302   modbus_registers[25]=0;										//Πεγ13
;;;1303   if(bVOLT_IS_NOT_DOWN)	modbus_registers[25]=1;
0003e6  4a2d              LDR      r2,|L1.1180|
0003e8  7601              STRB     r1,[r0,#0x18]         ;1301
0003ea  7641              STRB     r1,[r0,#0x19]         ;1302
0003ec  7813              LDRB     r3,[r2,#0]  ; bVOLT_IS_NOT_DOWN
0003ee  2201              MOVS     r2,#1
0003f0  b103              CBZ      r3,|L1.1012|
0003f2  7642              STRB     r2,[r0,#0x19]
                  |L1.1012|
;;;1304   modbus_registers[26]=0;
0003f4  7681              STRB     r1,[r0,#0x1a]
;;;1305   modbus_registers[27]=0;										//Πεγ14
0003f6  76c1              STRB     r1,[r0,#0x1b]
;;;1306   if(bVOLT_IS_NOT_UP)	modbus_registers[27]=1;
0003f8  4929              LDR      r1,|L1.1184|
0003fa  7809              LDRB     r1,[r1,#0]  ; bVOLT_IS_NOT_UP
0003fc  b101              CBZ      r1,|L1.1024|
0003fe  76c2              STRB     r2,[r0,#0x1b]
                  |L1.1024|
000400  491e              LDR      r1,|L1.1148|
;;;1307   								
;;;1308   /*
;;;1309   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
;;;1310   modbus_registers[17]=(char)(I_ug%256);
;;;1311   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
;;;1312   modbus_registers[19]=(char)(U_up%256);
;;;1313   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
;;;1314   modbus_registers[21]=(char)(U_maxg%256);
;;;1315   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
;;;1316   modbus_registers[23]=(char)(I_maxp%256);
;;;1317   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
;;;1318   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
;;;1319   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
;;;1320   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
;;;1321   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
;;;1322   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
;;;1323   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
;;;1324   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
;;;1325   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
;;;1326   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
;;;1327   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
;;;1328   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
;;;1329   modbus_registers[36]=0;								//Πεγ19
;;;1330   modbus_registers[37]=0;
;;;1331   if(work_stat==wsPS)modbus_registers[37]=1;
;;;1332   modbus_registers[38]=0;								//Πεγ20
;;;1333   modbus_registers[39]=0;
;;;1334   if(work_stat==wsGS)modbus_registers[39]=1;
;;;1335   modbus_registers[40]=0;								//Πεγ21
;;;1336   modbus_registers[41]=0;
;;;1337   if(REV_STAT==rsREW)modbus_registers[41]=1;
;;;1338   modbus_registers[42]=0;								//Πεγ22
;;;1339   modbus_registers[43]=0;
;;;1340   if(AVT_REV_IS_ON)modbus_registers[42]=1;
;;;1341   */
;;;1342   if(prot==MODBUS_RTU_PROT)
000402  f1bc0f00          CMP      r12,#0
;;;1343   	{
;;;1344   	modbus_tx_buff[0]=adr;
;;;1345   	modbus_tx_buff[1]=func;
;;;1346   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1347   	
;;;1348   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-1)*2],reg_quantity*2);
000406  eb01014a          ADD      r1,r1,r10,LSL #1
00040a  d04d              BEQ      |L1.1192|
;;;1349   	
;;;1350   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1351   	
;;;1352   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1353   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1354   	
;;;1355   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1356   		{
;;;1357   		putchar0(modbus_tx_buff[i]);
;;;1358   		}
;;;1359   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1360   		{
;;;1361   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1362   		}
;;;1363   	}
;;;1364   else if(prot==MODBUS_TCP_PROT)
00040c  f1bc0f01          CMP      r12,#1
000410  d102              BNE      |L1.1048|
;;;1365   	{
;;;1366   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-1)*2];
000412  4824              LDR      r0,|L1.1188|
000414  1e89              SUBS     r1,r1,#2
000416  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1048|
;;;1367   	}
;;;1368   }
000418  b033              ADD      sp,sp,#0xcc
                  |L1.1050|
00041a  e8bd8ff0          POP      {r4-r11,pc}
00041e  0000              DCW      0x0000
                  |L1.1056|
                          DCD      I_ug
                  |L1.1060|
                          DCD      U_up
                  |L1.1064|
                          DCD      U_maxg
                  |L1.1068|
                          DCD      I_maxp
                  |L1.1072|
                          DCD      T_PROC_GS
                  |L1.1076|
                          DCD      T_PROC_PS
                  |L1.1080|
                          DCD      work_stat
                  |L1.1084|
                          DCD      REV_STAT
                  |L1.1088|
                          DCD      AVT_REV_IS_ON
                  |L1.1092|
                          DCD      AVT_REV_TIME_FF
                  |L1.1096|
                          DCD      AVT_REV_TIME_REW
                  |L1.1100|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.1104|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.1108|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.1112|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.1116|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.1120|
                          DCD      CAP_ZAR_TIME
                  |L1.1124|
                          DCD      CAP_PAUSE1_TIME
                  |L1.1128|
                          DCD      CAP_RAZR_TIME
                  |L1.1132|
                          DCD      CAP_PAUSE2_TIME
                  |L1.1136|
                          DCD      CAP_MAX_VOLT
                  |L1.1140|
                          DCD      CAP_WRK_CURR
                  |L1.1144|
                          DCD      load_U
                  |L1.1148|
                          DCD      ||area_number.4||+0x3c
                  |L1.1152|
                          DCD      load_I
                  |L1.1156|
                          DCD      time_proc
                  |L1.1160|
                          DCD      time_proc_remain
                  |L1.1164|
                          DCD      CAP_COUNTER
                  |L1.1168|
                          DCD      CAP_TIME_SEC
                  |L1.1172|
                          DCD      CAP_TIME_MIN
                  |L1.1176|
                          DCD      CAP_TIME_HOUR
                  |L1.1180|
                          DCD      bVOLT_IS_NOT_DOWN
                  |L1.1184|
                          DCD      bVOLT_IS_NOT_UP
                  |L1.1188|
                          DCD      modbus_tcp_out_ptr
                  |L1.1192|
0004a8  f88db000          STRB     r11,[sp,#0]           ;1344
0004ac  f88de001          STRB     lr,[sp,#1]            ;1345
0004b0  0062              LSLS     r2,r4,#1              ;1346
0004b2  466d              MOV      r5,sp                 ;1348
0004b4  f88d2002          STRB     r2,[sp,#2]            ;1346
0004b8  1e89              SUBS     r1,r1,#2              ;1348
0004ba  1ce8              ADDS     r0,r5,#3              ;1348
0004bc  f7fffffe          BL       __aeabi_memcpy
0004c0  2003              MOVS     r0,#3                 ;1350
0004c2  eb000044          ADD      r0,r0,r4,LSL #1       ;1350
0004c6  b201              SXTH     r1,r0                 ;1350
0004c8  4668              MOV      r0,sp                 ;1350
0004ca  f7fffffe          BL       CRC16_2
0004ce  eb050144          ADD      r1,r5,r4,LSL #1       ;1352
0004d2  2600              MOVS     r6,#0                 ;1355
0004d4  70c8              STRB     r0,[r1,#3]            ;1352
0004d6  0a00              LSRS     r0,r0,#8              ;1353
0004d8  7108              STRB     r0,[r1,#4]            ;1353
0004da  2005              MOVS     r0,#5                 ;1355
0004dc  eb000744          ADD      r7,r0,r4,LSL #1       ;1355
0004e0  e004              B        |L1.1260|
                  |L1.1250|
0004e2  5da8              LDRB     r0,[r5,r6]            ;1357
0004e4  f7fffffe          BL       putchar0
0004e8  1c76              ADDS     r6,r6,#1              ;1355
0004ea  b2f6              UXTB     r6,r6                 ;1355
                  |L1.1260|
0004ec  42b7              CMP      r7,r6                 ;1355
0004ee  d8f8              BHI      |L1.1250|
0004f0  2400              MOVS     r4,#0                 ;1359
0004f2  e004              B        |L1.1278|
                  |L1.1268|
0004f4  5d28              LDRB     r0,[r5,r4]            ;1361
0004f6  f7fffffe          BL       putchar_sc16is700
0004fa  1c64              ADDS     r4,r4,#1              ;1359
0004fc  b2e4              UXTB     r4,r4                 ;1359
                  |L1.1278|
0004fe  42a7              CMP      r7,r4                 ;1359
000500  d8f8              BHI      |L1.1268|
000502  e789              B        |L1.1048|
;;;1369   
                          ENDP

                  modbus_hold_registers_transmit PROC
;;;1598   //-----------------------------------------------
;;;1599   void modbus_hold_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
000504  e92d4fff          PUSH     {r0-r11,lr}
;;;1600   {
000508  b0b3              SUB      sp,sp,#0xcc
00050a  4682              MOV      r10,r0
00050c  4693              MOV      r11,r2
00050e  461d              MOV      r5,r3
;;;1601   //char modbus_registers[110];
;;;1602   char modbus_tx_buff[200];
;;;1603   unsigned short crc_temp;
;;;1604   char i;
;;;1605   
;;;1606   //reg_adr=45;
;;;1607   //I_ug=reg_adr;
;;;1608   //U_up=5678;
;;;1609   
;;;1610   modbus_registers[0]=(char)(lc640_read_int(EE_I_UG)/256);//Πεγ50
000510  2020              MOVS     r0,#0x20
000512  f8dd9100          LDR      r9,[sp,#0x100]
000516  f7fffffe          BL       lc640_read_int
00051a  17c1              ASRS     r1,r0,#31
00051c  eb006011          ADD      r0,r0,r1,LSR #24
000520  1200              ASRS     r0,r0,#8
000522  4cff              LDR      r4,|L1.2336|
000524  7020              STRB     r0,[r4,#0]
;;;1611   modbus_registers[1]=(char)(lc640_read_int(EE_I_UG)%256);
000526  2020              MOVS     r0,#0x20
000528  f7fffffe          BL       lc640_read_int
00052c  7060              STRB     r0,[r4,#1]
;;;1612   modbus_registers[2]=(char)(lc640_read_int(EE_U_UP)/256);//Πεγ51
00052e  2022              MOVS     r0,#0x22
000530  f7fffffe          BL       lc640_read_int
000534  17c1              ASRS     r1,r0,#31
000536  eb006011          ADD      r0,r0,r1,LSR #24
00053a  1200              ASRS     r0,r0,#8
00053c  70a0              STRB     r0,[r4,#2]
;;;1613   modbus_registers[3]=(char)(lc640_read_int(EE_U_UP)%256);
00053e  2022              MOVS     r0,#0x22
000540  f7fffffe          BL       lc640_read_int
000544  70e0              STRB     r0,[r4,#3]
;;;1614   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
000546  48f7              LDR      r0,|L1.2340|
;;;1615   modbus_registers[5]=(char)(U_maxg%256);
;;;1616   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1617   modbus_registers[7]=(char)(I_maxp%256);
;;;1618   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1619   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1620   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1621   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1622   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
000548  f44f2861          MOV      r8,#0xe1000
;;;1623   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00054c  f44f6c61          MOV      r12,#0xe10
000550  f9b00000          LDRSH    r0,[r0,#0]            ;1614  ; U_maxg
000554  17c1              ASRS     r1,r0,#31             ;1614
000556  eb006111          ADD      r1,r0,r1,LSR #24      ;1614
00055a  120a              ASRS     r2,r1,#8              ;1614
00055c  7122              STRB     r2,[r4,#4]            ;1614
00055e  7160              STRB     r0,[r4,#5]            ;1615
000560  48f1              LDR      r0,|L1.2344|
000562  f9b00000          LDRSH    r0,[r0,#0]            ;1616  ; I_maxp
000566  17c1              ASRS     r1,r0,#31             ;1616
000568  eb006111          ADD      r1,r0,r1,LSR #24      ;1616
00056c  120a              ASRS     r2,r1,#8              ;1616
00056e  71a2              STRB     r2,[r4,#6]            ;1616
000570  71e0              STRB     r0,[r4,#7]            ;1617
000572  48ee              LDR      r0,|L1.2348|
000574  213c              MOVS     r1,#0x3c              ;1618
000576  6802              LDR      r2,[r0,#0]            ;1618  ; T_PROC_GS
000578  fb92f7f1          SDIV     r7,r2,r1              ;1618
00057c  fb012017          MLS      r0,r1,r7,r2           ;1618
000580  17c3              ASRS     r3,r0,#31             ;1618
000582  eb006313          ADD      r3,r0,r3,LSR #24      ;1618
000586  121e              ASRS     r6,r3,#8              ;1618
000588  7226              STRB     r6,[r4,#8]            ;1618
00058a  7260              STRB     r0,[r4,#9]            ;1619
00058c  fb97f0f1          SDIV     r0,r7,r1              ;1620
000590  fb017010          MLS      r0,r1,r0,r7           ;1620
000594  17c3              ASRS     r3,r0,#31             ;1620
000596  eb006313          ADD      r3,r0,r3,LSR #24      ;1620
00059a  121e              ASRS     r6,r3,#8              ;1620
00059c  72a6              STRB     r6,[r4,#0xa]          ;1620
00059e  72e0              STRB     r0,[r4,#0xb]          ;1621
0005a0  fb92f0f8          SDIV     r0,r2,r8              ;1622
0005a4  7320              STRB     r0,[r4,#0xc]          ;1622
0005a6  fb92f0fc          SDIV     r0,r2,r12
0005aa  7360              STRB     r0,[r4,#0xd]
;;;1624   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0005ac  48e0              LDR      r0,|L1.2352|
0005ae  6802              LDR      r2,[r0,#0]  ; T_PROC_PS
0005b0  fb92f7f1          SDIV     r7,r2,r1
0005b4  fb012017          MLS      r0,r1,r7,r2
0005b8  17c3              ASRS     r3,r0,#31
0005ba  eb006313          ADD      r3,r0,r3,LSR #24
0005be  121e              ASRS     r6,r3,#8
0005c0  73a6              STRB     r6,[r4,#0xe]
;;;1625   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0005c2  73e0              STRB     r0,[r4,#0xf]
;;;1626   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0005c4  fb97f0f1          SDIV     r0,r7,r1
0005c8  fb017010          MLS      r0,r1,r0,r7
0005cc  17c1              ASRS     r1,r0,#31
0005ce  eb006111          ADD      r1,r0,r1,LSR #24
0005d2  120b              ASRS     r3,r1,#8
0005d4  7423              STRB     r3,[r4,#0x10]
;;;1627   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
0005d6  7460              STRB     r0,[r4,#0x11]
;;;1628   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
0005d8  fb92f0f8          SDIV     r0,r2,r8
0005dc  74a0              STRB     r0,[r4,#0x12]
;;;1629   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
0005de  fb92f0fc          SDIV     r0,r2,r12
0005e2  74e0              STRB     r0,[r4,#0x13]
;;;1630   modbus_registers[20]=0;								//Πεγ60
0005e4  2700              MOVS     r7,#0
;;;1631   modbus_registers[21]=0;
;;;1632   if(work_stat==wsPS)modbus_registers[21]=1;
0005e6  48d3              LDR      r0,|L1.2356|
0005e8  7527              STRB     r7,[r4,#0x14]         ;1630
0005ea  7567              STRB     r7,[r4,#0x15]         ;1631
0005ec  7801              LDRB     r1,[r0,#0]  ; work_stat
0005ee  2001              MOVS     r0,#1
0005f0  2902              CMP      r1,#2
0005f2  d100              BNE      |L1.1526|
0005f4  7560              STRB     r0,[r4,#0x15]
                  |L1.1526|
;;;1633   modbus_registers[22]=0;								//Πεγ61
0005f6  75a7              STRB     r7,[r4,#0x16]
;;;1634   modbus_registers[23]=0;
0005f8  75e7              STRB     r7,[r4,#0x17]
;;;1635   if(work_stat==wsGS)modbus_registers[23]=1;
0005fa  2901              CMP      r1,#1
0005fc  d100              BNE      |L1.1536|
0005fe  75e0              STRB     r0,[r4,#0x17]
                  |L1.1536|
;;;1636   modbus_registers[24]=0;								//Πεγ62
;;;1637   modbus_registers[25]=0;
;;;1638   if(REV_STAT==rsREW)modbus_registers[25]=1;
000600  4acd              LDR      r2,|L1.2360|
000602  7627              STRB     r7,[r4,#0x18]         ;1636
000604  7667              STRB     r7,[r4,#0x19]         ;1637
000606  7812              LDRB     r2,[r2,#0]  ; REV_STAT
000608  b902              CBNZ     r2,|L1.1548|
00060a  7660              STRB     r0,[r4,#0x19]
                  |L1.1548|
;;;1639   modbus_registers[26]=0;								//Πεγ63
;;;1640   modbus_registers[27]=0;
;;;1641   if(AVT_REV_IS_ON)modbus_registers[27]=1;
00060c  4acb              LDR      r2,|L1.2364|
00060e  76a7              STRB     r7,[r4,#0x1a]         ;1639
000610  76e7              STRB     r7,[r4,#0x1b]         ;1640
000612  8812              LDRH     r2,[r2,#0]  ; AVT_REV_IS_ON
000614  b102              CBZ      r2,|L1.1560|
000616  76e0              STRB     r0,[r4,#0x1b]
                  |L1.1560|
;;;1642   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000618  4ac9              LDR      r2,|L1.2368|
00061a  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_TIME_FF
00061e  17d3              ASRS     r3,r2,#31
000620  eb026313          ADD      r3,r2,r3,LSR #24
000624  121e              ASRS     r6,r3,#8
000626  f8046f1c          STRB     r6,[r4,#0x1c]!
;;;1643   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
00062a  7062              STRB     r2,[r4,#1]
;;;1644   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
00062c  4ac5              LDR      r2,|L1.2372|
00062e  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_TIME_REW
000632  17d3              ASRS     r3,r2,#31
000634  eb026313          ADD      r3,r2,r3,LSR #24
000638  121e              ASRS     r6,r3,#8
00063a  70a6              STRB     r6,[r4,#2]
;;;1645   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00063c  70e2              STRB     r2,[r4,#3]
;;;1646   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00063e  4ac2              LDR      r2,|L1.2376|
000640  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_TIME_PAUSE
000644  17d3              ASRS     r3,r2,#31
000646  eb026313          ADD      r3,r2,r3,LSR #24
00064a  121e              ASRS     r6,r3,#8
00064c  7126              STRB     r6,[r4,#4]
;;;1647   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
00064e  7162              STRB     r2,[r4,#5]
;;;1648   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
000650  4abe              LDR      r2,|L1.2380|
000652  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_I_NOM_FF
000656  17d3              ASRS     r3,r2,#31
000658  eb026313          ADD      r3,r2,r3,LSR #24
00065c  121e              ASRS     r6,r3,#8
00065e  71a6              STRB     r6,[r4,#6]
;;;1649   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
000660  71e2              STRB     r2,[r4,#7]
;;;1650   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
000662  4abb              LDR      r2,|L1.2384|
000664  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_I_NOM_REW
000668  17d3              ASRS     r3,r2,#31
00066a  eb026313          ADD      r3,r2,r3,LSR #24
00066e  121e              ASRS     r6,r3,#8
000670  7226              STRB     r6,[r4,#8]
;;;1651   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
000672  7262              STRB     r2,[r4,#9]
;;;1652   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
000674  4ab7              LDR      r2,|L1.2388|
000676  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_U_NOM_FF
00067a  17d3              ASRS     r3,r2,#31
00067c  eb026313          ADD      r3,r2,r3,LSR #24
000680  121e              ASRS     r6,r3,#8
000682  72a6              STRB     r6,[r4,#0xa]
;;;1653   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
000684  72e2              STRB     r2,[r4,#0xb]
;;;1654   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
000686  4ab4              LDR      r2,|L1.2392|
000688  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_U_NOM_REW
00068c  17d3              ASRS     r3,r2,#31
00068e  eb026313          ADD      r3,r2,r3,LSR #24
000692  121e              ASRS     r6,r3,#8
000694  7326              STRB     r6,[r4,#0xc]
;;;1655   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
000696  7362              STRB     r2,[r4,#0xd]
;;;1656   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
000698  4ab0              LDR      r2,|L1.2396|
00069a  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_ZAR_TIME
00069e  17d3              ASRS     r3,r2,#31
0006a0  eb026313          ADD      r3,r2,r3,LSR #24
0006a4  121e              ASRS     r6,r3,#8
0006a6  73a6              STRB     r6,[r4,#0xe]
;;;1657   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
0006a8  73e2              STRB     r2,[r4,#0xf]
;;;1658   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
0006aa  4aad              LDR      r2,|L1.2400|
0006ac  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_PAUSE1_TIME
0006b0  17d3              ASRS     r3,r2,#31
0006b2  eb026313          ADD      r3,r2,r3,LSR #24
0006b6  121e              ASRS     r6,r3,#8
0006b8  7426              STRB     r6,[r4,#0x10]
;;;1659   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
0006ba  7462              STRB     r2,[r4,#0x11]
;;;1660   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
0006bc  4aa9              LDR      r2,|L1.2404|
0006be  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_RAZR_TIME
0006c2  17d3              ASRS     r3,r2,#31
0006c4  eb026313          ADD      r3,r2,r3,LSR #24
0006c8  121e              ASRS     r6,r3,#8
0006ca  74a6              STRB     r6,[r4,#0x12]
;;;1661   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
0006cc  74e2              STRB     r2,[r4,#0x13]
;;;1662   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
0006ce  4aa6              LDR      r2,|L1.2408|
0006d0  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_PAUSE2_TIME
0006d4  17d3              ASRS     r3,r2,#31
0006d6  eb026313          ADD      r3,r2,r3,LSR #24
0006da  121e              ASRS     r6,r3,#8
0006dc  7526              STRB     r6,[r4,#0x14]
;;;1663   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
0006de  7562              STRB     r2,[r4,#0x15]
;;;1664   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
0006e0  4aa2              LDR      r2,|L1.2412|
0006e2  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_MAX_VOLT
0006e6  17d3              ASRS     r3,r2,#31
0006e8  eb026313          ADD      r3,r2,r3,LSR #24
0006ec  121e              ASRS     r6,r3,#8
0006ee  75a6              STRB     r6,[r4,#0x16]
;;;1665   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
0006f0  75e2              STRB     r2,[r4,#0x17]
;;;1666   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
0006f2  4a9f              LDR      r2,|L1.2416|
0006f4  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_WRK_CURR
0006f8  17d3              ASRS     r3,r2,#31
0006fa  eb026313          ADD      r3,r2,r3,LSR #24
0006fe  121e              ASRS     r6,r3,#8
000700  7626              STRB     r6,[r4,#0x18]
;;;1667   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
000702  7662              STRB     r2,[r4,#0x19]
;;;1668   
;;;1669   modbus_registers[60]=(char)((pwm_u_reg)/256);			//Πεγ80
000704  4a9b              LDR      r2,|L1.2420|
000706  f9b22000          LDRSH    r2,[r2,#0]  ; pwm_u_reg
00070a  17d3              ASRS     r3,r2,#31
00070c  eb026313          ADD      r3,r2,r3,LSR #24
000710  121e              ASRS     r6,r3,#8
000712  f8846020          STRB     r6,[r4,#0x20]
;;;1670   modbus_registers[61]=(char)((pwm_u_reg)%256);
000716  f8842021          STRB     r2,[r4,#0x21]
;;;1671   modbus_registers[62]=(char)((pwm_i_reg)/256);			//Πεγ81
00071a  4a97              LDR      r2,|L1.2424|
00071c  f9b22000          LDRSH    r2,[r2,#0]  ; pwm_i_reg
000720  17d3              ASRS     r3,r2,#31
000722  eb026313          ADD      r3,r2,r3,LSR #24
000726  121e              ASRS     r6,r3,#8
000728  f8846022          STRB     r6,[r4,#0x22]
;;;1672   modbus_registers[63]=(char)((pwm_i_reg)%256);
00072c  f8842023          STRB     r2,[r4,#0x23]
;;;1673   modbus_registers[64]=(char)((pwm_t_reg/10)/256);			//Πεγ82
000730  4a92              LDR      r2,|L1.2428|
000732  f44f6320          MOV      r3,#0xa00
000736  f9b22000          LDRSH    r2,[r2,#0]  ; pwm_t_reg
00073a  fb92f3f3          SDIV     r3,r2,r3
00073e  f8843024          STRB     r3,[r4,#0x24]
;;;1674   modbus_registers[65]=(char)((pwm_t_reg/10)%256);
000742  230a              MOVS     r3,#0xa
000744  fb92f2f3          SDIV     r2,r2,r3
000748  f8842025          STRB     r2,[r4,#0x25]
;;;1675   
;;;1676   modbus_registers[80]=(char)((I_ug_ram)/256);			//Πεγ90
00074c  4a8c              LDR      r2,|L1.2432|
00074e  f9b22000          LDRSH    r2,[r2,#0]  ; I_ug_ram
000752  17d3              ASRS     r3,r2,#31
000754  eb026313          ADD      r3,r2,r3,LSR #24
000758  121e              ASRS     r6,r3,#8
00075a  f8846034          STRB     r6,[r4,#0x34]
;;;1677   modbus_registers[81]=(char)((I_ug_ram)%256);
00075e  f8042f35          STRB     r2,[r4,#0x35]!
;;;1678   modbus_registers[82]=(char)((U_up_ram)/256);			//Πεγ91
000762  4a88              LDR      r2,|L1.2436|
000764  f9b22000          LDRSH    r2,[r2,#0]  ; U_up_ram
000768  17d3              ASRS     r3,r2,#31
00076a  eb026313          ADD      r3,r2,r3,LSR #24
00076e  121e              ASRS     r6,r3,#8
000770  7066              STRB     r6,[r4,#1]
;;;1679   modbus_registers[83]=(char)((U_up_ram)%256);
000772  70a2              STRB     r2,[r4,#2]
;;;1680   modbus_registers[84]=0;									//Πεγ92
000774  70e7              STRB     r7,[r4,#3]
;;;1681   modbus_registers[85]=0;
000776  7127              STRB     r7,[r4,#4]
000778  f1a40451          SUB      r4,r4,#0x51
;;;1682   if(work_stat==wsPS)modbus_registers[85]=1;
00077c  2902              CMP      r1,#2
00077e  d101              BNE      |L1.1924|
000780  f8840055          STRB     r0,[r4,#0x55]
                  |L1.1924|
;;;1683   modbus_registers[86]=0;									//Πεγ93
000784  f8847056          STRB     r7,[r4,#0x56]
;;;1684   modbus_registers[87]=0;
000788  f8847057          STRB     r7,[r4,#0x57]
;;;1685   if(work_stat==wsGS)modbus_registers[87]=1;
00078c  2901              CMP      r1,#1
00078e  d101              BNE      |L1.1940|
000790  f8840057          STRB     r0,[r4,#0x57]
                  |L1.1940|
000794  4a62              LDR      r2,|L1.2336|
;;;1686   
;;;1687   if(prot==MODBUS_RTU_PROT)
;;;1688   	{
;;;1689   	modbus_tx_buff[0]=adr;
;;;1690   	modbus_tx_buff[1]=func;
;;;1691   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1692   	
;;;1693   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-50)*2],reg_quantity*2);
000796  eb02014b          ADD      r1,r2,r11,LSL #1
00079a  3964              SUBS     r1,r1,#0x64
00079c  f1b90f00          CMP      r9,#0                 ;1687
0007a0  d006              BEQ      |L1.1968|
;;;1694   							   
;;;1695   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1696   	
;;;1697   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1698   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1699   	
;;;1700   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1701   		{
;;;1702   		putchar0(modbus_tx_buff[i]);
;;;1703   		}
;;;1704   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1705   		{
;;;1706   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1707   		}
;;;1708   	}
;;;1709   else if(prot==MODBUS_TCP_PROT)
0007a2  f1b90f01          CMP      r9,#1
0007a6  d101              BNE      |L1.1964|
;;;1710   	{
;;;1711   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
0007a8  4877              LDR      r0,|L1.2440|
0007aa  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1964|
;;;1712   	}
;;;1713   // modbus_tcp_out_ptr=(char*)(&modbus_registers[0]);
;;;1714   //modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
;;;1715   }
0007ac  b037              ADD      sp,sp,#0xdc
0007ae  e634              B        |L1.1050|
                  |L1.1968|
0007b0  f88da000          STRB     r10,[sp,#0]           ;1689
0007b4  9834              LDR      r0,[sp,#0xd0]         ;1690
0007b6  f88d0001          STRB     r0,[sp,#1]            ;1690
0007ba  006a              LSLS     r2,r5,#1              ;1691
0007bc  466c              MOV      r4,sp                 ;1693
0007be  f88d2002          STRB     r2,[sp,#2]            ;1691
0007c2  1ce0              ADDS     r0,r4,#3              ;1693
0007c4  f7fffffe          BL       __aeabi_memcpy
0007c8  2003              MOVS     r0,#3                 ;1695
0007ca  eb000045          ADD      r0,r0,r5,LSL #1       ;1695
0007ce  b201              SXTH     r1,r0                 ;1695
0007d0  4668              MOV      r0,sp                 ;1695
0007d2  f7fffffe          BL       CRC16_2
0007d6  eb040145          ADD      r1,r4,r5,LSL #1       ;1697
0007da  2600              MOVS     r6,#0                 ;1700
0007dc  70c8              STRB     r0,[r1,#3]            ;1697
0007de  0a00              LSRS     r0,r0,#8              ;1698
0007e0  7108              STRB     r0,[r1,#4]            ;1698
0007e2  2005              MOVS     r0,#5                 ;1700
0007e4  eb000745          ADD      r7,r0,r5,LSL #1       ;1700
0007e8  e004              B        |L1.2036|
                  |L1.2026|
0007ea  5da0              LDRB     r0,[r4,r6]            ;1702
0007ec  f7fffffe          BL       putchar0
0007f0  1c76              ADDS     r6,r6,#1              ;1700
0007f2  b2f6              UXTB     r6,r6                 ;1700
                  |L1.2036|
0007f4  42b7              CMP      r7,r6                 ;1700
0007f6  d8f8              BHI      |L1.2026|
0007f8  2500              MOVS     r5,#0                 ;1704
0007fa  e004              B        |L1.2054|
                  |L1.2044|
0007fc  5d60              LDRB     r0,[r4,r5]            ;1706
0007fe  f7fffffe          BL       putchar_sc16is700
000802  1c6d              ADDS     r5,r5,#1              ;1704
000804  b2ed              UXTB     r5,r5                 ;1704
                  |L1.2054|
000806  42af              CMP      r7,r5                 ;1704
000808  d8f8              BHI      |L1.2044|
00080a  e7cf              B        |L1.1964|
;;;1716   
                          ENDP

                  modbus_for_pult_registers_transmit PROC
;;;1371   //-----------------------------------------------
;;;1372   void modbus_for_pult_registers_transmit(unsigned short reg_quantity)
00080c  b570              PUSH     {r4-r6,lr}
;;;1373   {
00080e  4606              MOV      r6,r0
;;;1374   char modbus_registers[20];
;;;1375   char modbus_tx_buff[30];
;;;1376   unsigned short crc_temp;
;;;1377   char i;
;;;1378   //char reg_quantity=4;
;;;1379   
;;;1380   //pult_time_set=0xffff;
;;;1381   
;;;1382   modbus_registers[0]=(char)(pult_u%256);
000810  485e              LDR      r0,|L1.2444|
000812  b090              SUB      sp,sp,#0x40           ;1373
;;;1383   modbus_registers[1]=(char)(pult_u/256);					//Πεγ1
;;;1384   modbus_registers[2]=(char)(pult_i%256);
;;;1385   modbus_registers[3]=(char)(pult_i/256);					//Πεγ2
;;;1386   modbus_registers[4]=(char)(pult_work_stat%256);
;;;1387   modbus_registers[5]=(char)(pult_work_stat/256);			//Πεγ3
;;;1388   modbus_registers[6]=(char)(pult_u_set%256);
;;;1389   modbus_registers[7]=(char)(pult_u_set/256);				//Πεγ4
;;;1390   modbus_registers[8]=(char)(pult_time%256);
;;;1391   modbus_registers[9]=(char)(pult_time/256);				//Πεγ5
;;;1392   modbus_registers[10]=(char)(pult_time_set%256);		 	
;;;1393   modbus_registers[11]=(char)(pult_time_set/256);			//Πεγ6
;;;1394   modbus_registers[12]=(char)(pult_i_set%256);
;;;1395   modbus_registers[13]=(char)(pult_i_set/256);				//Πεγ7
;;;1396   
;;;1397   
;;;1398   modbus_tx_buff[0]=201;
;;;1399   modbus_tx_buff[1]=4;
;;;1400   modbus_tx_buff[2]=(char)(reg_quantity*2);
000814  0072              LSLS     r2,r6,#1
000816  f9b00000          LDRSH    r0,[r0,#0]            ;1382  ; pult_u
00081a  f88d0024          STRB     r0,[sp,#0x24]         ;1382
00081e  17c1              ASRS     r1,r0,#31             ;1382
000820  eb006111          ADD      r1,r0,r1,LSR #24      ;1382
000824  1208              ASRS     r0,r1,#8              ;1383
000826  f88d0025          STRB     r0,[sp,#0x25]         ;1383
00082a  4859              LDR      r0,|L1.2448|
;;;1401   
;;;1402   memcpy((char*)&modbus_tx_buff[3],(char*)modbus_registers,reg_quantity*2);
00082c  466c              MOV      r4,sp
00082e  f9b00000          LDRSH    r0,[r0,#0]            ;1384  ; pult_i
000832  f88d0026          STRB     r0,[sp,#0x26]         ;1384
000836  17c1              ASRS     r1,r0,#31             ;1384
000838  eb006111          ADD      r1,r0,r1,LSR #24      ;1384
00083c  1208              ASRS     r0,r1,#8              ;1385
00083e  f88d0027          STRB     r0,[sp,#0x27]         ;1385
000842  4854              LDR      r0,|L1.2452|
000844  7800              LDRB     r0,[r0,#0]            ;1386  ; pult_work_stat
000846  f88d0028          STRB     r0,[sp,#0x28]         ;1386
00084a  2000              MOVS     r0,#0                 ;1387
00084c  f88d0029          STRB     r0,[sp,#0x29]         ;1387
000850  4851              LDR      r0,|L1.2456|
000852  f9b00000          LDRSH    r0,[r0,#0]            ;1388  ; pult_u_set
000856  f88d002a          STRB     r0,[sp,#0x2a]         ;1388
00085a  17c1              ASRS     r1,r0,#31             ;1388
00085c  eb006111          ADD      r1,r0,r1,LSR #24      ;1388
000860  1208              ASRS     r0,r1,#8              ;1389
000862  f88d002b          STRB     r0,[sp,#0x2b]         ;1389
000866  484d              LDR      r0,|L1.2460|
000868  f9b00000          LDRSH    r0,[r0,#0]            ;1390  ; pult_time
00086c  f88d002c          STRB     r0,[sp,#0x2c]         ;1390
000870  17c1              ASRS     r1,r0,#31             ;1390
000872  eb006111          ADD      r1,r0,r1,LSR #24      ;1390
000876  1208              ASRS     r0,r1,#8              ;1391
000878  f88d002d          STRB     r0,[sp,#0x2d]         ;1391
00087c  4848              LDR      r0,|L1.2464|
00087e  8800              LDRH     r0,[r0,#0]            ;1392  ; pult_time_set
000880  f88d002e          STRB     r0,[sp,#0x2e]         ;1392
000884  0a00              LSRS     r0,r0,#8              ;1393
000886  f88d002f          STRB     r0,[sp,#0x2f]         ;1393
00088a  4846              LDR      r0,|L1.2468|
00088c  f9b00000          LDRSH    r0,[r0,#0]            ;1394  ; pult_i_set
000890  f88d0030          STRB     r0,[sp,#0x30]         ;1394
000894  17c1              ASRS     r1,r0,#31             ;1394
000896  eb006111          ADD      r1,r0,r1,LSR #24      ;1394
00089a  1208              ASRS     r0,r1,#8              ;1395
00089c  f88d0031          STRB     r0,[sp,#0x31]         ;1395
0008a0  20c9              MOVS     r0,#0xc9              ;1398
0008a2  f88d0000          STRB     r0,[sp,#0]            ;1398
0008a6  2004              MOVS     r0,#4                 ;1399
0008a8  f88d0001          STRB     r0,[sp,#1]            ;1399
0008ac  f88d2002          STRB     r2,[sp,#2]            ;1400
0008b0  a909              ADD      r1,sp,#0x24
0008b2  1ce0              ADDS     r0,r4,#3
0008b4  f7fffffe          BL       __aeabi_memcpy
;;;1403   
;;;1404   crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
0008b8  2003              MOVS     r0,#3
0008ba  eb000046          ADD      r0,r0,r6,LSL #1
0008be  b201              SXTH     r1,r0
0008c0  4668              MOV      r0,sp
0008c2  f7fffffe          BL       CRC16_2
;;;1405   
;;;1406   modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
0008c6  eb040146          ADD      r1,r4,r6,LSL #1
;;;1407   modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1408   
;;;1409   for (i=0;i<(5+(reg_quantity*2));i++)
0008ca  2500              MOVS     r5,#0
0008cc  70c8              STRB     r0,[r1,#3]            ;1406
0008ce  0a00              LSRS     r0,r0,#8              ;1407
0008d0  7108              STRB     r0,[r1,#4]            ;1407
0008d2  2005              MOVS     r0,#5
0008d4  eb000646          ADD      r6,r0,r6,LSL #1
0008d8  e004              B        |L1.2276|
                  |L1.2266|
;;;1410   	{
;;;1411   	putchar0(modbus_tx_buff[i]);
0008da  5d60              LDRB     r0,[r4,r5]
0008dc  f7fffffe          BL       putchar0
0008e0  1c6d              ADDS     r5,r5,#1              ;1409
0008e2  b2ed              UXTB     r5,r5                 ;1409
                  |L1.2276|
0008e4  42ae              CMP      r6,r5                 ;1409
0008e6  d8f8              BHI      |L1.2266|
;;;1412   	}
;;;1413   for (i=0;i<(5+(reg_quantity*2));i++)
0008e8  2500              MOVS     r5,#0
0008ea  e004              B        |L1.2294|
                  |L1.2284|
;;;1414   	{
;;;1415   	putchar_sc16is700(modbus_tx_buff[i]);
0008ec  5d60              LDRB     r0,[r4,r5]
0008ee  f7fffffe          BL       putchar_sc16is700
0008f2  1c6d              ADDS     r5,r5,#1              ;1413
0008f4  b2ed              UXTB     r5,r5                 ;1413
                  |L1.2294|
0008f6  42ae              CMP      r6,r5                 ;1413
0008f8  d8f8              BHI      |L1.2284|
;;;1416   	}
;;;1417   //modbus_plazma1++;
;;;1418   }
0008fa  b010              ADD      sp,sp,#0x40
0008fc  bd70              POP      {r4-r6,pc}
;;;1419   
                          ENDP

                  modbus_in PROC
;;;63     //-----------------------------------------------
;;;64     void modbus_in(void)
0008fe  e92d4ff0          PUSH     {r4-r11,lr}
;;;65     {
;;;66     short crc16_calculated;		//βϋχθρλεμΰ θη οπθνςϋυ δΰννϋυ CRC
;;;67     short crc16_incapsulated;	//βρςπξενννΰ β οξρϋλκσ CRC
;;;68     unsigned short modbus_rx_arg0;		//βρςπξεννϋι β οξρϋλκσ οεπβϋι ΰπγσμενς
;;;69     unsigned short modbus_rx_arg1;		//βρςπξεννϋι β οξρϋλκσ βςξπξι ΰπγσμενς
;;;70     //unsigned short modbus_rx_arg2;		//βρςπξεννϋι β οξρϋλκσ ςπεςθι ΰπγσμενς
;;;71     //unsigned short modbus_rx_arg3;		//βρςπξεννϋι β οξρϋλκσ χεςβεπςϋι ΰπγσμενς
;;;72     unsigned char modbus_func;			//βρςπξεννϋι β οξρϋλκσ κξδ τσνκφθθ
;;;73     
;;;74     //modbus_plazma++;
;;;75     
;;;76     memcpy(modbus_an_buffer,modbus_rx_buffer,modbus_rx_buffer_ptr);
000902  4c29              LDR      r4,|L1.2472|
000904  4906              LDR      r1,|L1.2336|
000906  b08b              SUB      sp,sp,#0x2c           ;65
000908  78a2              LDRB     r2,[r4,#2]  ; modbus_rx_buffer_ptr
00090a  393c              SUBS     r1,r1,#0x3c
00090c  4615              MOV      r5,r2
00090e  f101001e          ADD      r0,r1,#0x1e
000912  f7fffffe          BL       __aeabi_memcpy
;;;77     modbus_rx_counter=modbus_rx_buffer_ptr;
000916  70e5              STRB     r5,[r4,#3]
;;;78     modbus_rx_buffer_ptr=0;
000918  2600              MOVS     r6,#0
00091a  70a6              STRB     r6,[r4,#2]
;;;79     bMODBUS_TIMEOUT=0;
00091c  7066              STRB     r6,[r4,#1]
;;;80     
;;;81     	
;;;82     crc16_calculated  = CRC16_2((char*)modbus_an_buffer, modbus_rx_counter-2);
00091e  e045              B        |L1.2476|
                  |L1.2336|
                          DCD      ||area_number.4||+0x3c
                  |L1.2340|
                          DCD      U_maxg
                  |L1.2344|
                          DCD      I_maxp
                  |L1.2348|
                          DCD      T_PROC_GS
                  |L1.2352|
                          DCD      T_PROC_PS
                  |L1.2356|
                          DCD      work_stat
                  |L1.2360|
                          DCD      REV_STAT
                  |L1.2364|
                          DCD      AVT_REV_IS_ON
                  |L1.2368|
                          DCD      AVT_REV_TIME_FF
                  |L1.2372|
                          DCD      AVT_REV_TIME_REW
                  |L1.2376|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.2380|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.2384|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.2388|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.2392|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.2396|
                          DCD      CAP_ZAR_TIME
                  |L1.2400|
                          DCD      CAP_PAUSE1_TIME
                  |L1.2404|
                          DCD      CAP_RAZR_TIME
                  |L1.2408|
                          DCD      CAP_PAUSE2_TIME
                  |L1.2412|
                          DCD      CAP_MAX_VOLT
                  |L1.2416|
                          DCD      CAP_WRK_CURR
                  |L1.2420|
                          DCD      pwm_u_reg
                  |L1.2424|
                          DCD      pwm_i_reg
                  |L1.2428|
                          DCD      pwm_t_reg
                  |L1.2432|
                          DCD      I_ug_ram
                  |L1.2436|
                          DCD      U_up_ram
                  |L1.2440|
                          DCD      modbus_tcp_out_ptr
                  |L1.2444|
                          DCD      pult_u
                  |L1.2448|
                          DCD      pult_i
                  |L1.2452|
                          DCD      pult_work_stat
                  |L1.2456|
                          DCD      pult_u_set
                  |L1.2460|
                          DCD      pult_time
                  |L1.2464|
                          DCD      pult_time_set
                  |L1.2468|
                          DCD      pult_i_set
                  |L1.2472|
                          DCD      ||.data||
                  |L1.2476|
0009ac  1ea9              SUBS     r1,r5,#2
0009ae  48f8              LDR      r0,|L1.3472|
0009b0  f7fffffe          BL       CRC16_2
0009b4  b200              SXTH     r0,r0
0009b6  4681              MOV      r9,r0
;;;83     crc16_incapsulated = *((short*)&modbus_an_buffer[modbus_rx_counter-2]);
0009b8  f8df83d4          LDR      r8,|L1.3472|
0009bc  78e0              LDRB     r0,[r4,#3]  ; modbus_rx_counter
;;;84     
;;;85     //modbus_plazma=modbus_rx_counter;
;;;86     //modbus_plazma2=crc16_calculated;
;;;87     //modbus_plazma3=crc16_incapsulated;
;;;88     
;;;89     pvlk=0;
0009be  4ff5              LDR      r7,|L1.3476|
0009c0  4440              ADD      r0,r0,r8              ;83
;;;90     
;;;91     
;;;92     if(modbus_an_buffer[0]=='r')
;;;93     	{
;;;94     	pvlk=1;
;;;95     	if(modbus_an_buffer[1]=='e')
;;;96     		{
;;;97     		pvlk=2;
;;;98     		if(modbus_an_buffer[2]=='a')
;;;99     			{
;;;100    			pvlk=3;
;;;101    			if(modbus_an_buffer[3]=='d')
;;;102    				{
;;;103    				pvlk=4;
;;;104    				/*if(modbus_an_buffer[6]==crc_87(modbus_an_buffer,6))
;;;105    					{
;;;106    					pvlk=5;
;;;107    					if(modbus_an_buffer[7]==crc_95(modbus_an_buffer,6))
;;;108    						{
;;;109    						pvlk=6;*/	
;;;110    
;;;111    							{
;;;112    							unsigned short ptr;
;;;113    							unsigned long data1,data2;
;;;114    							char temp_out[20];
;;;115    							pvlk++;
;;;116    							ptr=modbus_an_buffer[4]+(modbus_an_buffer[5]*256U);
;;;117    							data1=lc640_read_long(ptr);
;;;118    							data2=lc640_read_long(ptr+4);
;;;119    							temp_out[0]='r';
;;;120    							temp_out[1]='e';
;;;121    							temp_out[2]='a';
;;;122    							temp_out[3]='d';
;;;123    							temp_out[4]=*((char*)&ptr);
;;;124    							temp_out[5]=*(((char*)&ptr)+1);	
;;;125    							temp_out[6]=*((char*)&data1);
;;;126    							temp_out[7]=*(((char*)&data1)+1);		
;;;127    							temp_out[8]=*(((char*)&data1)+2);	
;;;128    							temp_out[9]=*(((char*)&data1)+3);		
;;;129    							temp_out[10]=*((char*)&data2);
;;;130    							temp_out[11]=*(((char*)&data2)+1);		
;;;131    							temp_out[12]=*(((char*)&data2)+2);	
;;;132    							temp_out[13]=*(((char*)&data2)+3);	
;;;133    							temp_out[14]=crc_87(temp_out,14);	
;;;134    							temp_out[15]=crc_95(temp_out,14);			
;;;135    							
;;;136    							temp_out[17]=0;
;;;137    							for (i=0;i<16;i++)
0009c2  4cf5              LDR      r4,|L1.3480|
0009c4  f9300c02          LDRSH    r0,[r0,#-2]           ;83
0009c8  803e              STRH     r6,[r7,#0]            ;89
0009ca  4682              MOV      r10,r0                ;83
0009cc  f8980000          LDRB     r0,[r8,#0]            ;92  ; modbus_an_buffer
0009d0  f04f0b05          MOV      r11,#5                ;115
0009d4  2872              CMP      r0,#0x72              ;92
0009d6  d17d              BNE      |L1.2772|
0009d8  2101              MOVS     r1,#1                 ;94
0009da  8039              STRH     r1,[r7,#0]            ;94
0009dc  f8981001          LDRB     r1,[r8,#1]            ;95  ; modbus_an_buffer
0009e0  4638              MOV      r0,r7                 ;94
0009e2  2965              CMP      r1,#0x65              ;95
                  |L1.2532|
0009e4  d177              BNE      |L1.2774|
0009e6  2102              MOVS     r1,#2                 ;97
0009e8  8001              STRH     r1,[r0,#0]            ;97
0009ea  f8981002          LDRB     r1,[r8,#2]            ;98  ; modbus_an_buffer
0009ee  2961              CMP      r1,#0x61              ;98
0009f0  d1f8              BNE      |L1.2532|
0009f2  2103              MOVS     r1,#3                 ;100
0009f4  8001              STRH     r1,[r0,#0]            ;100
0009f6  f8981003          LDRB     r1,[r8,#3]            ;101  ; modbus_an_buffer
0009fa  2964              CMP      r1,#0x64              ;101
0009fc  d1f2              BNE      |L1.2532|
0009fe  f8a7b000          STRH     r11,[r7,#0]           ;115
000a02  f8980004          LDRB     r0,[r8,#4]            ;116  ; modbus_an_buffer
000a06  f8981005          LDRB     r1,[r8,#5]            ;116  ; modbus_an_buffer
000a0a  eb002001          ADD      r0,r0,r1,LSL #8       ;116
000a0e  b280              UXTH     r0,r0                 ;116
000a10  f8ad0014          STRH     r0,[sp,#0x14]         ;116
000a14  4605              MOV      r5,r0                 ;116
000a16  f7fffffe          BL       lc640_read_long
000a1a  9007              STR      r0,[sp,#0x1c]         ;118
000a1c  1d28              ADDS     r0,r5,#4              ;118
000a1e  f7fffffe          BL       lc640_read_long
000a22  9006              STR      r0,[sp,#0x18]         ;119
000a24  2072              MOVS     r0,#0x72              ;119
000a26  f88d0000          STRB     r0,[sp,#0]            ;119
000a2a  2065              MOVS     r0,#0x65              ;120
000a2c  f88d0001          STRB     r0,[sp,#1]            ;120
000a30  2061              MOVS     r0,#0x61              ;121
000a32  f88d0002          STRB     r0,[sp,#2]            ;121
000a36  2064              MOVS     r0,#0x64              ;122
000a38  f88d0003          STRB     r0,[sp,#3]            ;122
000a3c  f89d0014          LDRB     r0,[sp,#0x14]         ;123
000a40  f88d0004          STRB     r0,[sp,#4]            ;123
000a44  f89d0015          LDRB     r0,[sp,#0x15]         ;124
000a48  f88d0005          STRB     r0,[sp,#5]            ;124
000a4c  f89d001c          LDRB     r0,[sp,#0x1c]         ;125
000a50  f88d0006          STRB     r0,[sp,#6]            ;125
000a54  f89d001d          LDRB     r0,[sp,#0x1d]         ;126
000a58  f88d0007          STRB     r0,[sp,#7]            ;126
000a5c  f89d001e          LDRB     r0,[sp,#0x1e]         ;127
000a60  f88d0008          STRB     r0,[sp,#8]            ;127
000a64  f89d001f          LDRB     r0,[sp,#0x1f]         ;128
000a68  f88d0009          STRB     r0,[sp,#9]            ;128
000a6c  f89d0018          LDRB     r0,[sp,#0x18]         ;129
000a70  f88d000a          STRB     r0,[sp,#0xa]          ;129
000a74  f89d0019          LDRB     r0,[sp,#0x19]         ;130
000a78  f88d000b          STRB     r0,[sp,#0xb]          ;130
000a7c  f89d001a          LDRB     r0,[sp,#0x1a]         ;131
000a80  f88d000c          STRB     r0,[sp,#0xc]          ;131
000a84  f89d001b          LDRB     r0,[sp,#0x1b]         ;132
000a88  f88d000d          STRB     r0,[sp,#0xd]          ;132
000a8c  210e              MOVS     r1,#0xe               ;133
000a8e  4668              MOV      r0,sp                 ;133
000a90  f7fffffe          BL       crc_87
000a94  f88d000e          STRB     r0,[sp,#0xe]          ;133
000a98  210e              MOVS     r1,#0xe               ;134
000a9a  4668              MOV      r0,sp                 ;134
000a9c  f7fffffe          BL       crc_95
000aa0  f88d000f          STRB     r0,[sp,#0xf]          ;134
000aa4  f88d6011          STRB     r6,[sp,#0x11]         ;136
000aa8  7026              STRB     r6,[r4,#0]
000aaa  466d              MOV      r5,sp                 ;114
                  |L1.2732|
;;;138    								{
;;;139    								putchar_sc16is700(temp_out[i]);
000aac  7820              LDRB     r0,[r4,#0]  ; i
000aae  5c28              LDRB     r0,[r5,r0]
000ab0  f7fffffe          BL       putchar_sc16is700
;;;140    								temp_out[17]^=temp_out[i];
000ab4  7820              LDRB     r0,[r4,#0]  ; i
000ab6  f89d1011          LDRB     r1,[sp,#0x11]
000aba  5c2a              LDRB     r2,[r5,r0]
000abc  1c40              ADDS     r0,r0,#1              ;137
000abe  4051              EORS     r1,r1,r2
000ac0  b2c0              UXTB     r0,r0                 ;137
000ac2  f88d1011          STRB     r1,[sp,#0x11]
000ac6  7020              STRB     r0,[r4,#0]            ;137
000ac8  2810              CMP      r0,#0x10              ;137
000aca  d3ef              BCC      |L1.2732|
;;;141    								}
;;;142    							putchar_sc16is700(16);
000acc  2010              MOVS     r0,#0x10
000ace  f7fffffe          BL       putchar_sc16is700
;;;143    							putchar_sc16is700(temp_out[17]^16);
000ad2  e001              B        |L1.2776|
                  |L1.2772|
000ad4  e009              B        |L1.2794|
                  |L1.2774|
000ad6  e08b              B        |L1.3056|
                  |L1.2776|
000ad8  f89d0011          LDRB     r0,[sp,#0x11]
000adc  f0800010          EOR      r0,r0,#0x10
000ae0  f7fffffe          BL       putchar_sc16is700
;;;144    							putchar_sc16is700(0x0a);
000ae4  200a              MOVS     r0,#0xa
000ae6  f7fffffe          BL       putchar_sc16is700
                  |L1.2794|
;;;145    							}
;;;146    						}
;;;147    					}
;;;148    				}/*
;;;149    			} 
;;;150    		}*/	 
;;;151    	} 
;;;152    
;;;153    if(modbus_an_buffer[0]=='w')
000aea  f8980000          LDRB     r0,[r8,#0]  ; modbus_an_buffer
000aee  2877              CMP      r0,#0x77
000af0  d17e              BNE      |L1.3056|
;;;154    	{
;;;155    	pvlk=1;
000af2  2001              MOVS     r0,#1
000af4  8038              STRH     r0,[r7,#0]
;;;156    	if(modbus_an_buffer[1]=='r')
000af6  f8980001          LDRB     r0,[r8,#1]  ; modbus_an_buffer
000afa  463d              MOV      r5,r7                 ;155
000afc  2872              CMP      r0,#0x72
000afe  d177              BNE      |L1.3056|
;;;157    		{
;;;158    		pvlk=2;
000b00  2002              MOVS     r0,#2
000b02  8028              STRH     r0,[r5,#0]
;;;159    		if(modbus_an_buffer[2]=='i')
000b04  f8980002          LDRB     r0,[r8,#2]  ; modbus_an_buffer
000b08  2869              CMP      r0,#0x69
000b0a  d171              BNE      |L1.3056|
;;;160    			{
;;;161    			pvlk=3;
000b0c  2003              MOVS     r0,#3
000b0e  8028              STRH     r0,[r5,#0]
;;;162    			if(modbus_an_buffer[3]=='t')
000b10  f8980003          LDRB     r0,[r8,#3]  ; modbus_an_buffer
000b14  2874              CMP      r0,#0x74
000b16  d16b              BNE      |L1.3056|
;;;163    				{
;;;164    				pvlk=4;
000b18  2004              MOVS     r0,#4
000b1a  8028              STRH     r0,[r5,#0]
;;;165    				if(modbus_an_buffer[4]=='e')
000b1c  f8980004          LDRB     r0,[r8,#4]  ; modbus_an_buffer
000b20  2865              CMP      r0,#0x65
000b22  d165              BNE      |L1.3056|
;;;166    					{
;;;167    					pvlk=5;
000b24  f8a5b000          STRH     r11,[r5,#0]
;;;168    					if(modbus_an_buffer[15]==crc_87(modbus_an_buffer,15))
000b28  210f              MOVS     r1,#0xf
000b2a  4899              LDR      r0,|L1.3472|
000b2c  f7fffffe          BL       crc_87
000b30  f898100f          LDRB     r1,[r8,#0xf]  ; modbus_an_buffer
000b34  4288              CMP      r0,r1
000b36  d15b              BNE      |L1.3056|
;;;169    						{
;;;170    						pvlk=6;
000b38  2006              MOVS     r0,#6
000b3a  8028              STRH     r0,[r5,#0]
;;;171    						if(modbus_an_buffer[16]==crc_95(modbus_an_buffer,15))
000b3c  210f              MOVS     r1,#0xf
000b3e  4894              LDR      r0,|L1.3472|
000b40  f7fffffe          BL       crc_95
000b44  f8981010          LDRB     r1,[r8,#0x10]  ; modbus_an_buffer
000b48  4288              CMP      r0,r1
000b4a  d177              BNE      |L1.3132|
;;;172    
;;;173    							{
;;;174    							unsigned short ptr;
;;;175    							unsigned long data1,data2;
;;;176    							char temp_out[20];
;;;177    							pvlk=7;
000b4c  2007              MOVS     r0,#7
000b4e  8028              STRH     r0,[r5,#0]
;;;178    							ptr=modbus_an_buffer[5]+(modbus_an_buffer[6]*256U);
000b50  f8980005          LDRB     r0,[r8,#5]  ; modbus_an_buffer
000b54  f8981006          LDRB     r1,[r8,#6]  ; modbus_an_buffer
000b58  eb002001          ADD      r0,r0,r1,LSL #8
000b5c  b285              UXTH     r5,r0
000b5e  f8ad5008          STRH     r5,[sp,#8]
;;;179    							*((char*)&data1)=modbus_an_buffer[7];
000b62  f8980007          LDRB     r0,[r8,#7]  ; modbus_an_buffer
000b66  f88d0004          STRB     r0,[sp,#4]
;;;180    							*(((char*)&data1)+1)=modbus_an_buffer[8];
000b6a  f8980008          LDRB     r0,[r8,#8]  ; modbus_an_buffer
000b6e  f88d0005          STRB     r0,[sp,#5]
;;;181    							*(((char*)&data1)+2)=modbus_an_buffer[9];
000b72  f8980009          LDRB     r0,[r8,#9]  ; modbus_an_buffer
000b76  f88d0006          STRB     r0,[sp,#6]
;;;182    							*(((char*)&data1)+3)=modbus_an_buffer[10];
000b7a  f898000a          LDRB     r0,[r8,#0xa]  ; modbus_an_buffer
000b7e  f88d0007          STRB     r0,[sp,#7]
;;;183    							*((char*)&data2)=modbus_an_buffer[11];
000b82  f898000b          LDRB     r0,[r8,#0xb]  ; modbus_an_buffer
000b86  f88d0028          STRB     r0,[sp,#0x28]
;;;184    							*(((char*)&data2)+1)=modbus_an_buffer[12];
000b8a  f898000c          LDRB     r0,[r8,#0xc]  ; modbus_an_buffer
000b8e  f88d0029          STRB     r0,[sp,#0x29]
;;;185    							*(((char*)&data2)+2)=modbus_an_buffer[13];
000b92  f898000d          LDRB     r0,[r8,#0xd]  ; modbus_an_buffer
000b96  f88d002a          STRB     r0,[sp,#0x2a]
;;;186    							*(((char*)&data2)+3)=modbus_an_buffer[14];	
000b9a  f898000e          LDRB     r0,[r8,#0xe]  ; modbus_an_buffer
000b9e  f88d002b          STRB     r0,[sp,#0x2b]
;;;187    							lc640_write_long(ptr,data1);
000ba2  4628              MOV      r0,r5
000ba4  9901              LDR      r1,[sp,#4]
000ba6  f7fffffe          BL       lc640_write_long
;;;188    							lc640_write_long(ptr+4,data2);
000baa  1d28              ADDS     r0,r5,#4
000bac  990a              LDR      r1,[sp,#0x28]
000bae  f7fffffe          BL       lc640_write_long
;;;189    							
;;;190    							//data1=lc640_read_long(ptr);
;;;191    							//data2=lc640_read_long(ptr+4);
;;;192    							temp_out[0]='w';
000bb2  2077              MOVS     r0,#0x77
000bb4  f88d000c          STRB     r0,[sp,#0xc]
;;;193    							temp_out[1]='r';
000bb8  2072              MOVS     r0,#0x72
000bba  f88d000d          STRB     r0,[sp,#0xd]
;;;194    							temp_out[2]='i';
000bbe  2069              MOVS     r0,#0x69
000bc0  f88d000e          STRB     r0,[sp,#0xe]
;;;195    							temp_out[3]='t';
000bc4  2074              MOVS     r0,#0x74
000bc6  f88d000f          STRB     r0,[sp,#0xf]
;;;196    							temp_out[4]='e';
000bca  2065              MOVS     r0,#0x65
000bcc  f88d0010          STRB     r0,[sp,#0x10]
;;;197    							temp_out[5]=*((char*)&ptr);
000bd0  f89d0008          LDRB     r0,[sp,#8]
000bd4  f88d0011          STRB     r0,[sp,#0x11]
;;;198    							temp_out[6]=*(((char*)&ptr)+1);	
000bd8  f89d0009          LDRB     r0,[sp,#9]
000bdc  f88d0012          STRB     r0,[sp,#0x12]
;;;199    						
;;;200    							temp_out[7]=crc_87(temp_out,7);	
000be0  2107              MOVS     r1,#7
000be2  a803              ADD      r0,sp,#0xc
000be4  f7fffffe          BL       crc_87
000be8  f88d0013          STRB     r0,[sp,#0x13]
;;;201    							temp_out[8]=crc_95(temp_out,7);			
000bec  2107              MOVS     r1,#7
000bee  e000              B        |L1.3058|
                  |L1.3056|
000bf0  e024              B        |L1.3132|
                  |L1.3058|
000bf2  a803              ADD      r0,sp,#0xc
000bf4  f7fffffe          BL       crc_95
000bf8  f88d0014          STRB     r0,[sp,#0x14]
;;;202    							
;;;203    							temp_out[10]=0;
000bfc  f88d6016          STRB     r6,[sp,#0x16]
;;;204    							for (i=0;i<9;i++)
000c00  7026              STRB     r6,[r4,#0]
000c02  ad03              ADD      r5,sp,#0xc            ;176
                  |L1.3076|
;;;205    								{
;;;206    								putchar_sc16is700(temp_out[i]);
000c04  7820              LDRB     r0,[r4,#0]  ; i
000c06  5c28              LDRB     r0,[r5,r0]
000c08  f7fffffe          BL       putchar_sc16is700
;;;207    								temp_out[10]^=temp_out[i];
000c0c  7820              LDRB     r0,[r4,#0]  ; i
000c0e  f89d1016          LDRB     r1,[sp,#0x16]
000c12  5c2a              LDRB     r2,[r5,r0]
000c14  1c40              ADDS     r0,r0,#1              ;204
000c16  4051              EORS     r1,r1,r2
000c18  b2c0              UXTB     r0,r0                 ;204
000c1a  f88d1016          STRB     r1,[sp,#0x16]
000c1e  7020              STRB     r0,[r4,#0]            ;204
000c20  2809              CMP      r0,#9                 ;204
000c22  d3ef              BCC      |L1.3076|
;;;208    								}
;;;209    							putchar_sc16is700(9);
000c24  2009              MOVS     r0,#9
000c26  f7fffffe          BL       putchar_sc16is700
;;;210    							putchar_sc16is700(temp_out[10]^9);
000c2a  f89d0016          LDRB     r0,[sp,#0x16]
000c2e  f0800009          EOR      r0,r0,#9
000c32  f7fffffe          BL       putchar_sc16is700
;;;211    							putchar_sc16is700(0x0a);
000c36  200a              MOVS     r0,#0xa
000c38  f7fffffe          BL       putchar_sc16is700
                  |L1.3132|
;;;212    							}
;;;213    						}
;;;214    					}
;;;215    				}
;;;216    		   	}
;;;217    		}
;;;218    	}
;;;219    
;;;220    modbus_func=modbus_an_buffer[1];
000c3c  f8980001          LDRB     r0,[r8,#1]  ; modbus_an_buffer
;;;221    modbus_rx_arg0=(((unsigned short)modbus_an_buffer[2])*((unsigned short)256))+((unsigned short)modbus_an_buffer[3]);
000c40  9004              STR      r0,[sp,#0x10]
000c42  f8981003          LDRB     r1,[r8,#3]  ; modbus_an_buffer
000c46  f8980002          LDRB     r0,[r8,#2]  ; modbus_an_buffer
;;;222    modbus_rx_arg1=(((unsigned short)modbus_an_buffer[4])*((unsigned short)256))+((unsigned short)modbus_an_buffer[5]);
;;;223    //modbus_rx_arg2=(((unsigned short)modbus_an_buffer[6])*((unsigned short)256))+((unsigned short)modbus_an_buffer[7]);
;;;224    //modbus_rx_arg3=(((unsigned short)modbus_an_buffer[8])*((unsigned short)256))+((unsigned short)modbus_an_buffer[9]);
;;;225    modbus_cmnd=(modbus_rx_arg1>>8)&0x7f;
;;;226    modbus_cmnd_cnt=(modbus_rx_arg1)&0x0f;
;;;227    
;;;228    modbus_plazma3=modbus_cmnd;
;;;229    modbus_plazma2=modbus_cmnd_cnt;
;;;230    modbus_plazma1=modbus_self_cmnd_cnt;
;;;231    
;;;232    if(crc16_calculated==crc16_incapsulated)
000c4a  45d1              CMP      r9,r10
000c4c  eb012000          ADD      r0,r1,r0,LSL #8       ;221
000c50  b287              UXTH     r7,r0                 ;221
000c52  f8980005          LDRB     r0,[r8,#5]            ;222  ; modbus_an_buffer
000c56  f8981004          LDRB     r1,[r8,#4]            ;222  ; modbus_an_buffer
000c5a  eb002001          ADD      r0,r0,r1,LSL #8       ;222
000c5e  b284              UXTH     r4,r0                 ;222
000c60  484e              LDR      r0,|L1.3484|
000c62  f3c42206          UBFX     r2,r4,#8,#7           ;225
000c66  f004010f          AND      r1,r4,#0xf            ;226
000c6a  7142              STRB     r2,[r0,#5]            ;225
000c6c  7101              STRB     r1,[r0,#4]            ;226
000c6e  8182              STRH     r2,[r0,#0xc]          ;228
000c70  8141              STRH     r1,[r0,#0xa]          ;229
000c72  7802              LDRB     r2,[r0,#0]            ;230  ; modbus_self_cmnd_cnt
000c74  8102              STRH     r2,[r0,#8]            ;230
000c76  d170              BNE      |L1.3418|
;;;233    	{
;;;234    	if(modbus_self_cmnd_cnt==33)modbus_self_cmnd_cnt=modbus_cmnd_cnt;
000c78  2a21              CMP      r2,#0x21
000c7a  d100              BNE      |L1.3198|
000c7c  7001              STRB     r1,[r0,#0]
                  |L1.3198|
;;;235    	modbus_plazma=modbus_an_buffer[0];
000c7e  4944              LDR      r1,|L1.3472|
;;;236    	if(modbus_an_buffer[0]==200)	 //ερλθ ηΰοπξρ ξς οσλόςΰ
;;;237    		{
;;;238    		if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
;;;239    			{
;;;240    			modbus_for_pult_registers_transmit(7);
;;;241    			}
;;;242    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
;;;243    			{
;;;244    			//if(modbus_rx_arg0==1)		//
;;;245    				{
;;;246    				modbus_for_pult_registers_transmit(7);
;;;247    				tumbler_stat=(enum_tumbler_stat)(modbus_rx_arg1>>15);
;;;248    				if((tumbler_stat!=tumbler_stat_old))
;;;249    					{
;;;250    					if(tumbler_stat==tsU)
;;;251    						{
;;;252    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;253    						}
;;;254    					else lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;255    					
;;;256    					if(main_cnt>3)
;;;257    						{
;;;258    						work_stat=wsOFF;
000c80  4d47              LDR      r5,|L1.3488|
000c82  4681              MOV      r9,r0                 ;235
000c84  7809              LDRB     r1,[r1,#0]            ;235  ; modbus_an_buffer
000c86  80c1              STRH     r1,[r0,#6]            ;235
;;;259    						restart_off();
;;;260    						}
;;;261    					}
;;;262    				tumbler_stat_old=tumbler_stat;
;;;263    				
;;;264    				}
;;;265    			 //else if(modbus_rx_arg0==0)
;;;266    			 	{
;;;267    				//modbus_plazma++;		
;;;268    				if((modbus_cmnd==61)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;269    					{
;;;270    					if(I_ug<1000)I_ug++;
;;;271    					else I_ug=((I_ug/10)+1)*10;
;;;272    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;273    					I_ug_block_cnt=10;
;;;274    					//lc640_write_int(EE_I_UG,I_ug);
;;;275    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;276    					}
;;;277    				
;;;278    				else if((modbus_cmnd==62)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;279    					{
;;;280    					if(I_ug<1000)I_ug--;
;;;281    					else I_ug=((I_ug/10)-1)*10;
;;;282    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;283    					I_ug_block_cnt=10;
;;;284    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;285    					}
;;;286    				else if((modbus_cmnd==63)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;287    					{
;;;288    					if(I_ug<1000)I_ug=((I_ug/10)+1)*10;
;;;289    					else I_ug=((I_ug/10)+5)*10;
;;;290    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;291    					I_ug_block_cnt=10;
;;;292    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;293    					}
;;;294    				
;;;295    				else if((modbus_cmnd==64)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;296    					{
;;;297    					if(I_ug<1000)I_ug=((I_ug/10)-1)*10;
;;;298    					else I_ug=((I_ug/10)-5)*10;
;;;299    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;300    					I_ug_block_cnt=10;
;;;301    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;302    					}
;;;303    				
;;;304    				else if((modbus_cmnd==71)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;305    					{
;;;306    					U_up++;
;;;307    					gran(&U_up,U_MIN,U_MAX);
;;;308    					U_up_block_cnt=10;
;;;309    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;310    					}
;;;311    				
;;;312    				else if((modbus_cmnd==72)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;313    					{
;;;314    					U_up--;
;;;315    					gran(&U_up,U_MIN,U_MAX);
;;;316    					U_up_block_cnt=10;
;;;317    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;318    				
;;;319    					}
;;;320    				else if((modbus_cmnd==73)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;321    					{
;;;322    					U_up=((U_up/10)+1)*10;
;;;323    					gran(&U_up,U_MIN,U_MAX);
;;;324    					U_up_block_cnt=10;
;;;325    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;326    					}
;;;327    				
;;;328    				else if((modbus_cmnd==74)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;329    					{
;;;330    					U_up=((U_up/10)-1)*10;
;;;331    					gran(&U_up,U_MIN,U_MAX);
;;;332    					U_up_block_cnt=10;
;;;333    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;334    					}
;;;335    				
;;;336    				
;;;337    				else if((modbus_cmnd==51)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ+
;;;338    					{
;;;339    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;340    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;341    						{
;;;342    						if(TIME_VISION_PULT)
;;;343    							{
;;;344    							T_PROC_GS=(((T_PROC_GS/60L)+1L)*60L);
000c88  f04f0a3c          MOV      r10,#0x3c
000c8c  29c8              CMP      r1,#0xc8              ;236
000c8e  d104              BNE      |L1.3226|
000c90  9804              LDR      r0,[sp,#0x10]         ;238
000c92  2804              CMP      r0,#4                 ;238
000c94  d002              BEQ      |L1.3228|
000c96  2806              CMP      r0,#6                 ;242
000c98  d004              BEQ      |L1.3236|
                  |L1.3226|
000c9a  e26c              B        |L1.4470|
                  |L1.3228|
000c9c  2007              MOVS     r0,#7                 ;240
000c9e  f7fffffe          BL       modbus_for_pult_registers_transmit
000ca2  e268              B        |L1.4470|
                  |L1.3236|
000ca4  2007              MOVS     r0,#7                 ;246
000ca6  f7fffffe          BL       modbus_for_pult_registers_transmit
000caa  f8df80f8          LDR      r8,|L1.3492|
000cae  f8dfb0f8          LDR      r11,|L1.3496|
000cb2  0be0              LSRS     r0,r4,#15             ;247
000cb4  f8880000          STRB     r0,[r8,#0]            ;247
000cb8  f89b1000          LDRB     r1,[r11,#0]           ;248  ; tumbler_stat_old
000cbc  4288              CMP      r0,r1                 ;248
000cbe  d00d              BEQ      |L1.3292|
000cc0  2801              CMP      r0,#1                 ;250
000cc2  d03c              BEQ      |L1.3390|
000cc4  2100              MOVS     r1,#0                 ;254
                  |L1.3270|
000cc6  20ea              MOVS     r0,#0xea              ;254
000cc8  f7fffffe          BL       lc640_write_int
000ccc  4837              LDR      r0,|L1.3500|
000cce  f9b00000          LDRSH    r0,[r0,#0]            ;256  ; main_cnt
000cd2  2803              CMP      r0,#3                 ;256
000cd4  dd02              BLE      |L1.3292|
000cd6  702e              STRB     r6,[r5,#0]            ;258
000cd8  f7fffffe          BL       restart_off
                  |L1.3292|
000cdc  f898c000          LDRB     r12,[r8,#0]           ;262  ; tumbler_stat
000ce0  f88bc000          STRB     r12,[r11,#0]          ;262
000ce4  46c6              MOV      lr,r8                 ;262
000ce6  f8993005          LDRB     r3,[r9,#5]            ;268  ; modbus_cmnd
000cea  4648              MOV      r0,r9                 ;268
000cec  f8df80c0          LDR      r8,|L1.3504|
000cf0  f44f717a          MOV      r1,#0x3e8             ;270
000cf4  f04f090a          MOV      r9,#0xa               ;144
000cf8  2b3d              CMP      r3,#0x3d              ;268
000cfa  d022              BEQ      |L1.3394|
000cfc  2b3e              CMP      r3,#0x3e              ;278
000cfe  d039              BEQ      |L1.3444|
000d00  2b3f              CMP      r3,#0x3f              ;286
000d02  d06b              BEQ      |L1.3548|
000d04  2b40              CMP      r3,#0x40              ;295
000d06  d077              BEQ      |L1.3576|
000d08  f8df80a8          LDR      r8,|L1.3508|
000d0c  2b47              CMP      r3,#0x47              ;304
000d0e  d074              BEQ      |L1.3578|
000d10  2b48              CMP      r3,#0x48              ;312
000d12  d073              BEQ      |L1.3580|
000d14  2b49              CMP      r3,#0x49              ;320
000d16  d072              BEQ      |L1.3582|
000d18  2b4a              CMP      r3,#0x4a              ;328
000d1a  d071              BEQ      |L1.3584|
000d1c  4926              LDR      r1,|L1.3512|
;;;345    							T_PROC_GS_block_cnt=10;
000d1e  4a27              LDR      r2,|L1.3516|
;;;346    							}
;;;347    						else
;;;348    							{
;;;349    							T_PROC_GS++;
;;;350    							T_PROC_GS_block_cnt=10;
;;;351    							}
;;;352    				
;;;353    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;354    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;355    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;356    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;357    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;358    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;359    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;360    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;361    							}												//(T_PROC_GS_MODE=0)
;;;362    					
;;;363    						else if(T_PROC_GS<30)
;;;364    							{
;;;365    							T_PROC_GS=29;
;;;366    							if(T_PROC_GS_MODE!=1)
;;;367    								{
;;;368    								T_PROC_GS_MODE=1;
;;;369    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;370    								}
;;;371    							}
;;;372    						else 
;;;373    							{
;;;374    							if(T_PROC_GS_MODE!=0)
;;;375    								{
;;;376    								T_PROC_GS_MODE=0;
;;;377    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;378    								}
;;;379    							}			
;;;380    						}
;;;381    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;382    						{
;;;383    						if(TIME_VISION_PULT)
;;;384    							{
;;;385    							T_PROC_PS=(((T_PROC_PS/60L)+1L)*60L);
;;;386    							T_PROC_PS_block_cnt=10;
000d20  f8dfb09c          LDR      r11,|L1.3520|
000d24  f8df809c          LDR      r8,|L1.3524|
000d28  2b33              CMP      r3,#0x33              ;337
000d2a  d06a              BEQ      |L1.3586|
;;;387    							}
;;;388    						else
;;;389    							{
;;;390    							T_PROC_PS++;
;;;391    							T_PROC_PS_block_cnt=10;
;;;392    							}
;;;393    				
;;;394    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;395    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;396    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;397    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;398    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;399    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;400    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;401    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;402    							}												//(T_PROC_PS_MODE=0)
;;;403    					
;;;404    						else if(T_PROC_PS<30)
;;;405    							{
;;;406    							T_PROC_PS=29;
;;;407    							if(T_PROC_PS_MODE!=1)
;;;408    								{
;;;409    								T_PROC_PS_MODE=1;
;;;410    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;411    								}
;;;412    							}
;;;413    						else 
;;;414    							{
;;;415    							if(T_PROC_PS_MODE!=0)
;;;416    								{
;;;417    								T_PROC_PS_MODE=0;
;;;418    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;419    								}
;;;420    							}			
;;;421    						}
;;;422    					}
;;;423    				else if((modbus_cmnd==53)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ++
000d2c  2b35              CMP      r3,#0x35
000d2e  d069              BEQ      |L1.3588|
;;;424    					{
;;;425    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;426    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;427    						{
;;;428    						if(TIME_VISION_PULT)
;;;429    							{
;;;430    							T_PROC_GS=(((T_PROC_GS/600L)+1L)*600L);
;;;431    							T_PROC_GS_block_cnt=10;
;;;432    							}
;;;433    						else
;;;434    							{
;;;435    							T_PROC_GS=(((T_PROC_GS/10L)+1L)*10L);
;;;436    							T_PROC_GS_block_cnt=10;
;;;437    							}
;;;438    				
;;;439    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;440    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;441    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;442    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;443    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;444    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;445    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;446    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;447    							}												//(T_PROC_GS_MODE=0)
;;;448    					
;;;449    						else if(T_PROC_GS<30)
;;;450    							{
;;;451    							T_PROC_GS=29;
;;;452    							if(T_PROC_GS_MODE!=1)
;;;453    								{
;;;454    								T_PROC_GS_MODE=1;
;;;455    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;456    								}
;;;457    							}
;;;458    						else 
;;;459    							{
;;;460    							if(T_PROC_GS_MODE!=0)
;;;461    								{
;;;462    								T_PROC_GS_MODE=0;
;;;463    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;464    								}
;;;465    							}			
;;;466    						}
;;;467    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;468    						{
;;;469    						if(TIME_VISION_PULT)
;;;470    							{
;;;471    							T_PROC_PS=(((T_PROC_PS/600L)+1L)*600L);
;;;472    							T_PROC_PS_block_cnt=10;
;;;473    							}
;;;474    						else
;;;475    							{
;;;476    							T_PROC_PS=(((T_PROC_PS/10L)+1L)*10L);
;;;477    							T_PROC_PS_block_cnt=10;
;;;478    							}
;;;479    				
;;;480    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;481    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;482    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;483    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;484    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;485    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;486    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;487    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;488    							}												//(T_PROC_PS_MODE=0)
;;;489    					
;;;490    						else if(T_PROC_PS<30)
;;;491    							{
;;;492    							T_PROC_PS=29;
;;;493    							if(T_PROC_PS_MODE!=1)
;;;494    								{
;;;495    								T_PROC_PS_MODE=1;
;;;496    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;497    								}
;;;498    							}
;;;499    						else 
;;;500    							{
;;;501    							if(T_PROC_PS_MODE!=0)
;;;502    								{
;;;503    								T_PROC_PS_MODE=0;
;;;504    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;505    								}
;;;506    							}				
;;;507    						}
;;;508    					}
;;;509    				
;;;510    				else if((modbus_cmnd==52)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ-
000d30  2b34              CMP      r3,#0x34
000d32  d068              BEQ      |L1.3590|
;;;511    					{
;;;512    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;513    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;514    						{
;;;515    						if(TIME_VISION_PULT)
;;;516    							{
;;;517    							T_PROC_GS=(((T_PROC_GS/60L)-1L)*60L);
;;;518    							T_PROC_GS_block_cnt=10;
;;;519    							}
;;;520    						else
;;;521    							{
;;;522    							T_PROC_GS--;
;;;523    							T_PROC_GS_block_cnt=10;
;;;524    							}
;;;525    				
;;;526    							
;;;527    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;528    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;529    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;530    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;531    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;532    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;533    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;534    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;535    							}												//(T_PROC_GS_MODE=0)
;;;536    					
;;;537    						else if(T_PROC_GS<30)
;;;538    							{
;;;539    							T_PROC_GS=29;
;;;540    							if(T_PROC_GS_MODE!=1)
;;;541    								{
;;;542    								T_PROC_GS_MODE=1;
;;;543    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;544    								}
;;;545    							}
;;;546    						else 
;;;547    							{
;;;548    							if(T_PROC_GS_MODE!=0)
;;;549    								{
;;;550    								T_PROC_GS_MODE=0;
;;;551    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;552    								}
;;;553    							}
;;;554    							
;;;555    						}
;;;556    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;557    						{
;;;558    						if(TIME_VISION_PULT)
;;;559    							{
;;;560    							T_PROC_PS=(((T_PROC_PS/60L)-1L)*60L);
;;;561    							T_PROC_PS_block_cnt=10;
;;;562    							}
;;;563    						else
;;;564    							{
;;;565    							T_PROC_PS--;
;;;566    							T_PROC_PS_block_cnt=10;
;;;567    							}
;;;568    				
;;;569    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;570    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;571    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;572    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;573    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;574    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;575    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;576    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;577    							}												//(T_PROC_PS_MODE=0)
;;;578    					
;;;579    						else if(T_PROC_PS<30)
;;;580    							{
;;;581    							T_PROC_PS=29;
;;;582    							if(T_PROC_PS_MODE!=1)
;;;583    								{
;;;584    								T_PROC_PS_MODE=1;
;;;585    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;586    								}
;;;587    							}
;;;588    						else 
;;;589    							{
;;;590    							if(T_PROC_PS_MODE!=0)
;;;591    								{
;;;592    								T_PROC_PS_MODE=0;
;;;593    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;594    								}
;;;595    							}			
;;;596    						}
;;;597    					}
;;;598    				else if((modbus_cmnd==54)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ--
000d34  2b36              CMP      r3,#0x36
000d36  d067              BEQ      |L1.3592|
;;;599    					{
;;;600    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;601    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;602    						{
;;;603    						if(TIME_VISION_PULT)
;;;604    							{
;;;605    							T_PROC_GS=(((T_PROC_GS/600L)-1L)*600L);
;;;606    							T_PROC_GS_block_cnt=10;
;;;607    							}
;;;608    						else
;;;609    							{
;;;610    							T_PROC_GS=(((T_PROC_GS/10L)-1L)*10L);
;;;611    							T_PROC_GS_block_cnt=10;
;;;612    							}
;;;613    				
;;;614    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;615    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;616    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;617    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;618    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;619    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;620    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;621    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;622    							}												//(T_PROC_GS_MODE=0)
;;;623    					
;;;624    						else if(T_PROC_GS<30)
;;;625    							{
;;;626    							T_PROC_GS=29;
;;;627    							if(T_PROC_GS_MODE!=1)
;;;628    								{
;;;629    								T_PROC_GS_MODE=1;
;;;630    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;631    								}
;;;632    							}
;;;633    						else 
;;;634    							{
;;;635    							if(T_PROC_GS_MODE!=0)
;;;636    								{
;;;637    								T_PROC_GS_MODE=0;
;;;638    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;639    								}
;;;640    							}
;;;641    										
;;;642    						}
;;;643    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;644    						{
;;;645    						if(TIME_VISION_PULT)
;;;646    							{
;;;647    							T_PROC_PS=(((T_PROC_PS/600L)-1L)*600L);
;;;648    							T_PROC_PS_block_cnt=10;
;;;649    							}
;;;650    						else
;;;651    							{
;;;652    							T_PROC_PS=(((T_PROC_PS/10L)-1L)*10L);
;;;653    							T_PROC_PS_block_cnt=10;
;;;654    							}
;;;655    				
;;;656    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;657    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;658    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;659    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;660    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;661    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;662    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;663    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;664    							}												//(T_PROC_PS_MODE=0)
;;;665    					
;;;666    						else if(T_PROC_PS<30)
;;;667    							{
;;;668    							T_PROC_PS=29;
;;;669    							if(T_PROC_PS_MODE!=1)
;;;670    								{
;;;671    								T_PROC_PS_MODE=1;
;;;672    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;673    								}
;;;674    							}
;;;675    						else 
;;;676    							{
;;;677    							if(T_PROC_PS_MODE!=0)
;;;678    								{
;;;679    								T_PROC_PS_MODE=0;
;;;680    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;681    								}
;;;682    							}	
;;;683    						}
;;;684    					}
;;;685    				
;;;686    				
;;;687    			//	else if((modbus_rx_arg1>>8)==90)
;;;688    			else if((modbus_cmnd==1)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
000d38  2b01              CMP      r3,#1
000d3a  d078              BEQ      |L1.3630|
                  |L1.3388|
000d3c  e21b              B        |L1.4470|
                  |L1.3390|
000d3e  2101              MOVS     r1,#1                 ;252
000d40  e7c1              B        |L1.3270|
                  |L1.3394|
000d42  4683              MOV      r11,r0                ;268
000d44  7902              LDRB     r2,[r0,#4]            ;268  ; modbus_cmnd_cnt
000d46  7800              LDRB     r0,[r0,#0]            ;268  ; modbus_self_cmnd_cnt
000d48  4282              CMP      r2,r0                 ;268
                  |L1.3402|
000d4a  d0a6              BEQ      |L1.3226|
000d4c  481e              LDR      r0,|L1.3528|
000d4e  f9b02000          LDRSH    r2,[r0,#0]            ;270  ; I_ug
000d52  428a              CMP      r2,r1                 ;270
000d54  da02              BGE      |L1.3420|
000d56  1c52              ADDS     r2,r2,#1              ;270
000d58  e017              B        |L1.3466|
                  |L1.3418|
000d5a  e291              B        |L1.4736|
                  |L1.3420|
000d5c  fb92f1f9          SDIV     r1,r2,r9              ;271
000d60  1c49              ADDS     r1,r1,#1              ;271
000d62  e05f              B        |L1.3620|
                  |L1.3428|
000d64  4819              LDR      r0,|L1.3532|
000d66  f9b02000          LDRSH    r2,[r0,#0]            ;272  ; I_MAX_IPS
000d6a  4819              LDR      r0,|L1.3536|
000d6c  f9b01000          LDRSH    r1,[r0,#0]            ;272  ; I_MIN_IPS
000d70  4815              LDR      r0,|L1.3528|
000d72  e091              B        |L1.3736|
                  |L1.3444|
000d74  4683              MOV      r11,r0                ;278
000d76  7902              LDRB     r2,[r0,#4]            ;278  ; modbus_cmnd_cnt
000d78  7800              LDRB     r0,[r0,#0]            ;278  ; modbus_self_cmnd_cnt
000d7a  4282              CMP      r2,r0                 ;278
                  |L1.3452|
000d7c  d08d              BEQ      |L1.3226|
000d7e  4812              LDR      r0,|L1.3528|
000d80  f9b02000          LDRSH    r2,[r0,#0]            ;280  ; I_ug
000d84  428a              CMP      r2,r1                 ;280
000d86  da25              BGE      |L1.3540|
000d88  1e52              SUBS     r2,r2,#1              ;280
                  |L1.3466|
000d8a  8002              STRH     r2,[r0,#0]            ;280
000d8c  e7ea              B        |L1.3428|
000d8e  e025              B        |L1.3548|
                  |L1.3472|
                          DCD      ||area_number.4||+0x1e
                  |L1.3476|
                          DCD      pvlk
                  |L1.3480|
                          DCD      i
                  |L1.3484|
                          DCD      ||.data||
                  |L1.3488|
                          DCD      work_stat
                  |L1.3492|
                          DCD      tumbler_stat
                  |L1.3496|
                          DCD      tumbler_stat_old
                  |L1.3500|
                          DCD      main_cnt
                  |L1.3504|
                          DCD      I_ug_block_cnt
                  |L1.3508|
                          DCD      U_up_block_cnt
                  |L1.3512|
                          DCD      TIME_VISION_PULT
                  |L1.3516|
                          DCD      T_PROC_GS_block_cnt
                  |L1.3520|
                          DCD      T_PROC_PS_block_cnt
                  |L1.3524|
                          DCD      main_menu_mode
                  |L1.3528|
                          DCD      I_ug
                  |L1.3532|
                          DCD      I_MAX_IPS
                  |L1.3536|
                          DCD      I_MIN_IPS
                  |L1.3540|
000dd4  fb92f1f9          SDIV     r1,r2,r9              ;281
000dd8  1e49              SUBS     r1,r1,#1              ;281
000dda  e023              B        |L1.3620|
                  |L1.3548|
000ddc  4683              MOV      r11,r0                ;286
000dde  7902              LDRB     r2,[r0,#4]            ;286  ; modbus_cmnd_cnt
000de0  7800              LDRB     r0,[r0,#0]            ;286  ; modbus_self_cmnd_cnt
000de2  4282              CMP      r2,r0                 ;286
                  |L1.3556|
000de4  d0aa              BEQ      |L1.3388|
000de6  48ff              LDR      r0,|L1.4580|
000de8  f9b02000          LDRSH    r2,[r0,#0]            ;288  ; I_ug
000dec  428a              CMP      r2,r1                 ;288
000dee  dbb5              BLT      |L1.3420|
000df0  fb92f1f9          SDIV     r1,r2,r9              ;289
000df4  1d49              ADDS     r1,r1,#5              ;289
000df6  e015              B        |L1.3620|
                  |L1.3576|
000df8  e007              B        |L1.3594|
                  |L1.3578|
000dfa  e019              B        |L1.3632|
                  |L1.3580|
000dfc  e021              B        |L1.3650|
                  |L1.3582|
000dfe  e029              B        |L1.3668|
                  |L1.3584|
000e00  e034              B        |L1.3692|
                  |L1.3586|
000e02  e052              B        |L1.3754|
                  |L1.3588|
000e04  e0af              B        |L1.3942|
                  |L1.3590|
000e06  e100              B        |L1.4106|
                  |L1.3592|
000e08  e12e              B        |L1.4200|
                  |L1.3594|
000e0a  4683              MOV      r11,r0                ;295
000e0c  7902              LDRB     r2,[r0,#4]            ;295  ; modbus_cmnd_cnt
000e0e  7800              LDRB     r0,[r0,#0]            ;295  ; modbus_self_cmnd_cnt
000e10  4282              CMP      r2,r0                 ;295
000e12  d093              BEQ      |L1.3388|
000e14  48f3              LDR      r0,|L1.4580|
000e16  f9b02000          LDRSH    r2,[r0,#0]            ;297  ; I_ug
000e1a  428a              CMP      r2,r1                 ;297
000e1c  dbda              BLT      |L1.3540|
000e1e  fb92f1f9          SDIV     r1,r2,r9              ;298
000e22  1f49              SUBS     r1,r1,#5              ;298
                  |L1.3620|
000e24  eb010181          ADD      r1,r1,r1,LSL #2       ;298
000e28  0049              LSLS     r1,r1,#1              ;298
000e2a  8001              STRH     r1,[r0,#0]            ;298
000e2c  e79a              B        |L1.3428|
                  |L1.3630|
000e2e  e16c              B        |L1.4362|
                  |L1.3632|
000e30  4683              MOV      r11,r0                ;304
000e32  7901              LDRB     r1,[r0,#4]            ;304  ; modbus_cmnd_cnt
000e34  7800              LDRB     r0,[r0,#0]            ;304  ; modbus_self_cmnd_cnt
000e36  4281              CMP      r1,r0                 ;304
000e38  d087              BEQ      |L1.3402|
000e3a  48eb              LDR      r0,|L1.4584|
000e3c  8801              LDRH     r1,[r0,#0]            ;306  ; U_up
000e3e  1c49              ADDS     r1,r1,#1              ;306
000e40  e022              B        |L1.3720|
                  |L1.3650|
000e42  4683              MOV      r11,r0                ;312
000e44  7901              LDRB     r1,[r0,#4]            ;312  ; modbus_cmnd_cnt
000e46  7800              LDRB     r0,[r0,#0]            ;312  ; modbus_self_cmnd_cnt
000e48  4281              CMP      r1,r0                 ;312
000e4a  d097              BEQ      |L1.3452|
000e4c  48e6              LDR      r0,|L1.4584|
000e4e  8801              LDRH     r1,[r0,#0]            ;314  ; U_up
000e50  1e49              SUBS     r1,r1,#1              ;314
000e52  e019              B        |L1.3720|
                  |L1.3668|
000e54  4683              MOV      r11,r0                ;320
000e56  7901              LDRB     r1,[r0,#4]            ;320  ; modbus_cmnd_cnt
000e58  7800              LDRB     r0,[r0,#0]            ;320  ; modbus_self_cmnd_cnt
000e5a  4281              CMP      r1,r0                 ;320
000e5c  d08e              BEQ      |L1.3452|
000e5e  48e2              LDR      r0,|L1.4584|
000e60  f9b02000          LDRSH    r2,[r0,#0]            ;322  ; U_up
000e64  fb92f1f9          SDIV     r1,r2,r9              ;322
000e68  1c49              ADDS     r1,r1,#1              ;322
000e6a  e00a              B        |L1.3714|
                  |L1.3692|
000e6c  4683              MOV      r11,r0                ;328
000e6e  7901              LDRB     r1,[r0,#4]            ;328  ; modbus_cmnd_cnt
000e70  7800              LDRB     r0,[r0,#0]            ;328  ; modbus_self_cmnd_cnt
000e72  4281              CMP      r1,r0                 ;328
000e74  d0b6              BEQ      |L1.3556|
000e76  48dc              LDR      r0,|L1.4584|
000e78  f9b02000          LDRSH    r2,[r0,#0]            ;330  ; U_up
000e7c  fb92f1f9          SDIV     r1,r2,r9              ;330
000e80  1e49              SUBS     r1,r1,#1              ;330
                  |L1.3714|
000e82  eb010181          ADD      r1,r1,r1,LSL #2       ;330
000e86  0049              LSLS     r1,r1,#1              ;330
                  |L1.3720|
000e88  8001              STRH     r1,[r0,#0]            ;330
000e8a  48d8              LDR      r0,|L1.4588|
000e8c  f9b02000          LDRSH    r2,[r0,#0]            ;331  ; U_MAX
000e90  48d7              LDR      r0,|L1.4592|
000e92  f9b01000          LDRSH    r1,[r0,#0]            ;331  ; U_MIN
000e96  48d4              LDR      r0,|L1.4584|
                  |L1.3736|
000e98  f7fffffe          BL       gran
000e9c  f8a89000          STRH     r9,[r8,#0]            ;332
000ea0  f89b1004          LDRB     r1,[r11,#4]           ;333  ; modbus_cmnd_cnt
000ea4  f88b1000          STRB     r1,[r11,#0]           ;333
                  |L1.3752|
000ea8  e165              B        |L1.4470|
                  |L1.3754|
000eaa  7903              LDRB     r3,[r0,#4]            ;337  ; modbus_cmnd_cnt
000eac  f890c000          LDRB     r12,[r0,#0]           ;337  ; modbus_self_cmnd_cnt
000eb0  4563              CMP      r3,r12                ;337
000eb2  d0f9              BEQ      |L1.3752|
000eb4  7003              STRB     r3,[r0,#0]            ;339
000eb6  f8980000          LDRB     r0,[r8,#0]            ;340  ; main_menu_mode
000eba  782b              LDRB     r3,[r5,#0]            ;340  ; work_stat
000ebc  ea500c03          ORRS     r12,r0,r3             ;340
000ec0  d002              BEQ      |L1.3784|
000ec2  2801              CMP      r0,#1                 ;381
000ec4  d01f              BEQ      |L1.3846|
000ec6  e156              B        |L1.4470|
                  |L1.3784|
000ec8  8808              LDRH     r0,[r1,#0]            ;342  ; TIME_VISION_PULT
000eca  2800              CMP      r0,#0                 ;342
000ecc  48c9              LDR      r0,|L1.4596|
000ece  d004              BEQ      |L1.3802|
000ed0  6803              LDR      r3,[r0,#0]            ;344  ; T_PROC_GS
000ed2  fb93f1fa          SDIV     r1,r3,r10             ;344
000ed6  1c49              ADDS     r1,r1,#1              ;344
000ed8  e0ae              B        |L1.4152|
                  |L1.3802|
000eda  6801              LDR      r1,[r0,#0]            ;349  ; T_PROC_GS
000edc  1c49              ADDS     r1,r1,#1              ;349
                  |L1.3806|
000ede  6001              STR      r1,[r0,#0]            ;349  ; T_PROC_GS
000ee0  e0e6              B        |L1.4272|
                  |L1.3810|
000ee2  1c49              ADDS     r1,r1,#1              ;355
000ee4  e000              B        |L1.3816|
                  |L1.3814|
000ee6  211d              MOVS     r1,#0x1d              ;365
                  |L1.3816|
000ee8  6001              STR      r1,[r0,#0]            ;626  ; T_PROC_GS
                  |L1.3818|
000eea  48c3              LDR      r0,|L1.4600|
000eec  8801              LDRH     r1,[r0,#0]            ;366  ; T_PROC_GS_MODE
000eee  2901              CMP      r1,#1                 ;366
000ef0  d0da              BEQ      |L1.3752|
000ef2  2101              MOVS     r1,#1                 ;619
000ef4  e004              B        |L1.3840|
                  |L1.3830|
000ef6  48c0              LDR      r0,|L1.4600|
000ef8  8801              LDRH     r1,[r0,#0]            ;374  ; T_PROC_GS_MODE
000efa  2900              CMP      r1,#0                 ;374
000efc  d0d4              BEQ      |L1.3752|
000efe  4631              MOV      r1,r6                 ;637
                  |L1.3840|
000f00  8001              STRH     r1,[r0,#0]            ;358
000f02  20ee              MOVS     r0,#0xee              ;359
000f04  e02c              B        |L1.3936|
                  |L1.3846|
000f06  2b00              CMP      r3,#0                 ;381
000f08  d1ce              BNE      |L1.3752|
000f0a  8808              LDRH     r0,[r1,#0]            ;383  ; TIME_VISION_PULT
000f0c  2800              CMP      r0,#0                 ;383
000f0e  48bb              LDR      r0,|L1.4604|
000f10  d007              BEQ      |L1.3874|
000f12  6802              LDR      r2,[r0,#0]            ;385  ; T_PROC_PS
000f14  fb92f1fa          SDIV     r1,r2,r10             ;385
000f18  1c49              ADDS     r1,r1,#1              ;385
000f1a  ebc11101          RSB      r1,r1,r1,LSL #4       ;385
000f1e  0089              LSLS     r1,r1,#2              ;385
000f20  e001              B        |L1.3878|
                  |L1.3874|
000f22  6801              LDR      r1,[r0,#0]            ;390  ; T_PROC_PS
000f24  1c49              ADDS     r1,r1,#1              ;390
                  |L1.3878|
000f26  6001              STR      r1,[r0,#0]            ;391  ; T_PROC_PS
000f28  48b4              LDR      r0,|L1.4604|
000f2a  4ab5              LDR      r2,|L1.4608|
000f2c  f8ab9000          STRH     r9,[r11,#0]           ;391
000f30  6801              LDR      r1,[r0,#0]            ;394  ; T_PROC_PS
000f32  6812              LDR      r2,[r2,#0]            ;394  ; T_PROC_MAX
000f34  4291              CMP      r1,r2                 ;394
000f36  dd02              BLE      |L1.3902|
000f38  1c52              ADDS     r2,r2,#1              ;396
000f3a  6002              STR      r2,[r0,#0]            ;397  ; T_PROC_PS
000f3c  e003              B        |L1.3910|
                  |L1.3902|
000f3e  291e              CMP      r1,#0x1e              ;404
000f40  da07              BGE      |L1.3922|
                  |L1.3906|
000f42  211d              MOVS     r1,#0x1d              ;406
000f44  e05f              B        |L1.4102|
                  |L1.3910|
000f46  48af              LDR      r0,|L1.4612|
000f48  8801              LDRH     r1,[r0,#0]            ;407  ; T_PROC_PS_MODE
000f4a  2901              CMP      r1,#1                 ;407
000f4c  d00a              BEQ      |L1.3940|
000f4e  2101              MOVS     r1,#1                 ;661
000f50  e004              B        |L1.3932|
                  |L1.3922|
000f52  48ac              LDR      r0,|L1.4612|
000f54  8801              LDRH     r1,[r0,#0]            ;415  ; T_PROC_PS_MODE
000f56  2900              CMP      r1,#0                 ;415
000f58  d004              BEQ      |L1.3940|
000f5a  4631              MOV      r1,r6                 ;679
                  |L1.3932|
000f5c  8001              STRH     r1,[r0,#0]            ;417
000f5e  20f0              MOVS     r0,#0xf0              ;418
                  |L1.3936|
000f60  f7fffffe          BL       lc640_write_int
                  |L1.3940|
000f64  e107              B        |L1.4470|
                  |L1.3942|
000f66  7903              LDRB     r3,[r0,#4]            ;423  ; modbus_cmnd_cnt
000f68  f890c000          LDRB     r12,[r0,#0]           ;423  ; modbus_self_cmnd_cnt
000f6c  4563              CMP      r3,r12                ;423
000f6e  d008              BEQ      |L1.3970|
000f70  7003              STRB     r3,[r0,#0]            ;425
000f72  f8980000          LDRB     r0,[r8,#0]            ;426  ; main_menu_mode
000f76  782b              LDRB     r3,[r5,#0]            ;426  ; work_stat
000f78  ea500c03          ORRS     r12,r0,r3             ;426
000f7c  d002              BEQ      |L1.3972|
000f7e  2801              CMP      r0,#1                 ;467
000f80  d025              BEQ      |L1.4046|
                  |L1.3970|
000f82  e0f8              B        |L1.4470|
                  |L1.3972|
000f84  8808              LDRH     r0,[r1,#0]            ;428  ; TIME_VISION_PULT
000f86  b158              CBZ      r0,|L1.4000|
000f88  489a              LDR      r0,|L1.4596|
000f8a  f44f7116          MOV      r1,#0x258             ;430
000f8e  6803              LDR      r3,[r0,#0]            ;430  ; T_PROC_GS
000f90  fb93f1f1          SDIV     r1,r3,r1              ;430
000f94  1c49              ADDS     r1,r1,#1              ;430
000f96  f44f7316          MOV      r3,#0x258             ;430
000f9a  4359              MULS     r1,r3,r1              ;430
000f9c  6001              STR      r1,[r0,#0]            ;431  ; T_PROC_GS
000f9e  e008              B        |L1.4018|
                  |L1.4000|
000fa0  4994              LDR      r1,|L1.4596|
000fa2  680b              LDR      r3,[r1,#0]            ;435  ; T_PROC_GS
000fa4  fb93f3f9          SDIV     r3,r3,r9              ;435
000fa8  1c5b              ADDS     r3,r3,#1              ;435
000faa  eb030383          ADD      r3,r3,r3,LSL #2       ;435
000fae  005b              LSLS     r3,r3,#1              ;435
000fb0  600b              STR      r3,[r1,#0]            ;435  ; T_PROC_GS
                  |L1.4018|
000fb2  f8a29000          STRH     r9,[r2,#0]            ;436
000fb6  488f              LDR      r0,|L1.4596|
000fb8  4a91              LDR      r2,|L1.4608|
000fba  6801              LDR      r1,[r0,#0]            ;439  ; T_PROC_GS
000fbc  6812              LDR      r2,[r2,#0]            ;439  ; T_PROC_MAX
000fbe  4291              CMP      r1,r2                 ;439
000fc0  dd02              BLE      |L1.4040|
000fc2  1c52              ADDS     r2,r2,#1              ;441
000fc4  6002              STR      r2,[r0,#0]            ;442  ; T_PROC_GS
000fc6  e790              B        |L1.3818|
                  |L1.4040|
000fc8  291e              CMP      r1,#0x1e              ;449
000fca  da94              BGE      |L1.3830|
000fcc  e78b              B        |L1.3814|
                  |L1.4046|
000fce  bb53              CBNZ     r3,|L1.4134|
000fd0  8808              LDRH     r0,[r1,#0]            ;469  ; TIME_VISION_PULT
000fd2  498a              LDR      r1,|L1.4604|
000fd4  680a              LDR      r2,[r1,#0]            ;469  ; T_PROC_PS
000fd6  b128              CBZ      r0,|L1.4068|
000fd8  f44f7016          MOV      r0,#0x258             ;471
000fdc  fb92f0f0          SDIV     r0,r2,r0              ;471
000fe0  1c40              ADDS     r0,r0,#1              ;471
000fe2  e07e              B        |L1.4322|
                  |L1.4068|
000fe4  fb92f2f9          SDIV     r2,r2,r9              ;476
000fe8  1c52              ADDS     r2,r2,#1              ;476
000fea  eb020282          ADD      r2,r2,r2,LSL #2       ;476
000fee  0052              LSLS     r2,r2,#1              ;476
000ff0  f8c12000          STR.W    r2,[r1,#0]            ;476
                  |L1.4084|
000ff4  4881              LDR      r0,|L1.4604|
000ff6  4982              LDR      r1,|L1.4608|
000ff8  f8ab9000          STRH     r9,[r11,#0]           ;477
000ffc  6802              LDR      r2,[r0,#0]            ;656  ; T_PROC_PS
000ffe  6809              LDR      r1,[r1,#0]            ;656  ; T_PROC_MAX
001000  428a              CMP      r2,r1                 ;656
001002  dd7e              BLE      |L1.4354|
001004  1c49              ADDS     r1,r1,#1              ;482
                  |L1.4102|
001006  6001              STR      r1,[r0,#0]            ;658  ; T_PROC_PS
001008  e79d              B        |L1.3910|
                  |L1.4106|
00100a  7903              LDRB     r3,[r0,#4]            ;510  ; modbus_cmnd_cnt
00100c  f890c000          LDRB     r12,[r0,#0]           ;510  ; modbus_self_cmnd_cnt
001010  4563              CMP      r3,r12                ;510
001012  d008              BEQ      |L1.4134|
001014  7003              STRB     r3,[r0,#0]            ;512
001016  f8980000          LDRB     r0,[r8,#0]            ;513  ; main_menu_mode
00101a  782b              LDRB     r3,[r5,#0]            ;513  ; work_stat
00101c  ea500c03          ORRS     r12,r0,r3             ;513
001020  d002              BEQ      |L1.4136|
001022  2801              CMP      r0,#1                 ;556
001024  d00f              BEQ      |L1.4166|
                  |L1.4134|
001026  e0a6              B        |L1.4470|
                  |L1.4136|
001028  8808              LDRH     r0,[r1,#0]            ;515  ; TIME_VISION_PULT
00102a  2800              CMP      r0,#0                 ;515
00102c  4871              LDR      r0,|L1.4596|
00102e  d007              BEQ      |L1.4160|
001030  6803              LDR      r3,[r0,#0]            ;517  ; T_PROC_GS
001032  fb93f1fa          SDIV     r1,r3,r10             ;517
001036  1e49              SUBS     r1,r1,#1              ;517
                  |L1.4152|
001038  ebc11101          RSB      r1,r1,r1,LSL #4       ;517
00103c  0089              LSLS     r1,r1,#2              ;517
00103e  e74e              B        |L1.3806|
                  |L1.4160|
001040  6801              LDR      r1,[r0,#0]            ;522  ; T_PROC_GS
001042  1e49              SUBS     r1,r1,#1              ;522
001044  e74b              B        |L1.3806|
                  |L1.4166|
001046  bbf3              CBNZ     r3,|L1.4294|
001048  8808              LDRH     r0,[r1,#0]            ;558  ; TIME_VISION_PULT
00104a  2800              CMP      r0,#0                 ;558
00104c  486b              LDR      r0,|L1.4604|
00104e  d007              BEQ      |L1.4192|
001050  6802              LDR      r2,[r0,#0]            ;560  ; T_PROC_PS
001052  fb92f1fa          SDIV     r1,r2,r10             ;560
001056  1e49              SUBS     r1,r1,#1              ;560
001058  ebc11101          RSB      r1,r1,r1,LSL #4       ;560
00105c  0089              LSLS     r1,r1,#2              ;560
00105e  e001              B        |L1.4196|
                  |L1.4192|
001060  6801              LDR      r1,[r0,#0]            ;565  ; T_PROC_PS
001062  1e49              SUBS     r1,r1,#1              ;565
                  |L1.4196|
001064  6001              STR      r1,[r0,#0]            ;565  ; T_PROC_PS
001066  e7c5              B        |L1.4084|
                  |L1.4200|
001068  7903              LDRB     r3,[r0,#4]            ;598  ; modbus_cmnd_cnt
00106a  f890c000          LDRB     r12,[r0,#0]           ;598  ; modbus_self_cmnd_cnt
00106e  4563              CMP      r3,r12                ;598
001070  d029              BEQ      |L1.4294|
001072  7003              STRB     r3,[r0,#0]            ;600
001074  f8980000          LDRB     r0,[r8,#0]            ;601  ; main_menu_mode
001078  782b              LDRB     r3,[r5,#0]            ;601  ; work_stat
00107a  ea500c03          ORRS     r12,r0,r3             ;601
00107e  d002              BEQ      |L1.4230|
001080  2801              CMP      r0,#1                 ;643
001082  d024              BEQ      |L1.4302|
001084  e077              B        |L1.4470|
                  |L1.4230|
001086  8808              LDRH     r0,[r1,#0]            ;603  ; TIME_VISION_PULT
001088  2800              CMP      r0,#0                 ;603
00108a  485a              LDR      r0,|L1.4596|
00108c  6803              LDR      r3,[r0,#0]            ;603  ; T_PROC_GS
00108e  d008              BEQ      |L1.4258|
001090  f44f7116          MOV      r1,#0x258             ;605
001094  fb93f1f1          SDIV     r1,r3,r1              ;605
001098  1e49              SUBS     r1,r1,#1              ;605
00109a  f44f7316          MOV      r3,#0x258             ;605
00109e  4359              MULS     r1,r3,r1              ;605
0010a0  e71d              B        |L1.3806|
                  |L1.4258|
0010a2  fb93f3f9          SDIV     r3,r3,r9              ;610
0010a6  1e5b              SUBS     r3,r3,#1              ;610
0010a8  eb030383          ADD      r3,r3,r3,LSL #2       ;610
0010ac  005b              LSLS     r3,r3,#1              ;610
0010ae  6003              STR      r3,[r0,#0]            ;610  ; T_PROC_GS
                  |L1.4272|
0010b0  4850              LDR      r0,|L1.4596|
0010b2  4953              LDR      r1,|L1.4608|
0010b4  f8a29000          STRH     r9,[r2,#0]            ;611
0010b8  6802              LDR      r2,[r0,#0]            ;353  ; T_PROC_GS
0010ba  6809              LDR      r1,[r1,#0]            ;353  ; T_PROC_MAX
0010bc  428a              CMP      r2,r1                 ;353
0010be  f73faf10          BGT      |L1.3810|
0010c2  2a1e              CMP      r2,#0x1e              ;624
0010c4  e000              B        |L1.4296|
                  |L1.4294|
0010c6  e03b              B        |L1.4416|
                  |L1.4296|
0010c8  f6bfaf15          BGE      |L1.3830|
0010cc  e70b              B        |L1.3814|
                  |L1.4302|
0010ce  bbbb              CBNZ     r3,|L1.4416|
0010d0  8808              LDRH     r0,[r1,#0]            ;645  ; TIME_VISION_PULT
0010d2  b160              CBZ      r0,|L1.4334|
0010d4  4949              LDR      r1,|L1.4604|
0010d6  f44f7016          MOV      r0,#0x258             ;647
0010da  680a              LDR      r2,[r1,#0]            ;647  ; T_PROC_PS
0010dc  fb92f0f0          SDIV     r0,r2,r0              ;647
0010e0  1e40              SUBS     r0,r0,#1              ;647
                  |L1.4322|
0010e2  f44f7216          MOV      r2,#0x258             ;647
0010e6  4350              MULS     r0,r2,r0              ;647
0010e8  6008              STR      r0,[r1,#0]            ;647  ; T_PROC_PS
0010ea  e783              B        |L1.4084|
0010ec  e009              B        |L1.4354|
                  |L1.4334|
0010ee  4843              LDR      r0,|L1.4604|
0010f0  6802              LDR      r2,[r0,#0]            ;652  ; T_PROC_PS
0010f2  fb92f2f9          SDIV     r2,r2,r9              ;652
0010f6  1e52              SUBS     r2,r2,#1              ;652
0010f8  eb020282          ADD      r2,r2,r2,LSL #2       ;652
0010fc  0052              LSLS     r2,r2,#1              ;652
0010fe  6002              STR      r2,[r0,#0]            ;653  ; T_PROC_PS
001100  e778              B        |L1.4084|
                  |L1.4354|
001102  2a1e              CMP      r2,#0x1e              ;666
001104  f6bfaf25          BGE      |L1.3922|
001108  e71b              B        |L1.3906|
                  |L1.4362|
00110a  7901              LDRB     r1,[r0,#4]  ; modbus_cmnd_cnt
00110c  7802              LDRB     r2,[r0,#0]  ; modbus_self_cmnd_cnt
00110e  4291              CMP      r1,r2
001110  d031              BEQ      |L1.4470|
;;;689    					{
;;;690    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;691    					if(tumbler_stat==tsI)
;;;692    						{
;;;693    						if(work_stat!=wsGS)
;;;694    							{
;;;695    							work_stat=wsGS;
;;;696    							time_proc=0;
;;;697    							time_proc_remain=T_PROC_GS;
;;;698    							index_set=0;
001112  f8df80f4          LDR      r8,|L1.4616|
001116  7001              STRB     r1,[r0,#0]            ;690
001118  46f1              MOV      r9,lr                 ;691
00111a  f1bc0f00          CMP      r12,#0                ;691
00111e  d113              BNE      |L1.4424|
001120  7828              LDRB     r0,[r5,#0]            ;693  ; work_stat
001122  2801              CMP      r0,#1                 ;693
001124  d00d              BEQ      |L1.4418|
001126  2001              MOVS     r0,#1                 ;695
001128  7028              STRB     r0,[r5,#0]            ;695
00112a  4838              LDR      r0,|L1.4620|
00112c  6006              STR      r6,[r0,#0]            ;697  ; time_proc
00112e  4831              LDR      r0,|L1.4596|
001130  6801              LDR      r1,[r0,#0]            ;697  ; T_PROC_GS
001132  4837              LDR      r0,|L1.4624|
001134  6001              STR      r1,[r0,#0]  ; time_proc_remain
001136  f8886004          STRB     r6,[r8,#4]
;;;699    							restart_on_GS();
00113a  f7fffffe          BL       restart_on_GS
00113e  e003              B        |L1.4424|
                  |L1.4416|
001140  e015              B        |L1.4462|
                  |L1.4418|
;;;700    							}			
;;;701    						else 
;;;702    							{
;;;703    							work_stat=wsOFF;
001142  702e              STRB     r6,[r5,#0]
;;;704    							restart_off();
001144  f7fffffe          BL       restart_off
                  |L1.4424|
;;;705    							}
;;;706    						}
;;;707    				
;;;708    					if(tumbler_stat==tsU)
001148  f8990000          LDRB     r0,[r9,#0]  ; tumbler_stat
00114c  2801              CMP      r0,#1
00114e  d112              BNE      |L1.4470|
;;;709    						{
;;;710    						if(work_stat!=wsPS)
001150  7828              LDRB     r0,[r5,#0]  ; work_stat
001152  2802              CMP      r0,#2
001154  d00c              BEQ      |L1.4464|
;;;711    							{
;;;712    							work_stat=wsPS;
001156  2002              MOVS     r0,#2
001158  7028              STRB     r0,[r5,#0]
;;;713    							time_proc=0;
00115a  482c              LDR      r0,|L1.4620|
;;;714    							time_proc_remain=T_PROC_PS;
00115c  6006              STR      r6,[r0,#0]  ; time_proc
00115e  4827              LDR      r0,|L1.4604|
001160  6801              LDR      r1,[r0,#0]  ; T_PROC_PS
001162  482b              LDR      r0,|L1.4624|
;;;715    							index_set=0;
001164  6001              STR      r1,[r0,#0]  ; time_proc_remain
001166  f8886004          STRB     r6,[r8,#4]
;;;716    							restart_on_PS();
00116a  f7fffffe          BL       restart_on_PS
                  |L1.4462|
00116e  e002              B        |L1.4470|
                  |L1.4464|
;;;717    							}			
;;;718    						else
;;;719    							{
;;;720    							work_stat=wsOFF;
001170  702e              STRB     r6,[r5,#0]
;;;721    							restart_off();
001172  f7fffffe          BL       restart_off
                  |L1.4470|
;;;722    							}
;;;723    						}
;;;724    					}
;;;725    				}
;;;726    			}
;;;727    		}
;;;728    
;;;729    	if(modbus_an_buffer[0]==MODBUS_ADRESS)
001176  4827              LDR      r0,|L1.4628|
001178  7801              LDRB     r1,[r0,#0]  ; modbus_an_buffer
00117a  4827              LDR      r0,|L1.4632|
00117c  f9b00000          LDRSH    r0,[r0,#0]  ; MODBUS_ADRESS
001180  4281              CMP      r1,r0
                  |L1.4482|
001182  d17d              BNE      |L1.4736|
;;;730    		{
;;;731    		if(modbus_func==3)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
001184  9904              LDR      r1,[sp,#0x10]
001186  2903              CMP      r1,#3
001188  d07b              BEQ      |L1.4738|
;;;732    			{
;;;733    			if((modbus_rx_arg0>=50)&&(modbus_rx_arg0<100)) modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func, modbus_rx_arg0,modbus_rx_arg1, MODBUS_RTU_PROT);
;;;734    			}
;;;735    		else if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ	βυξδξβ
00118a  2904              CMP      r1,#4
00118c  d07a              BEQ      |L1.4740|
;;;736    			{
;;;737    			modbus_input_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0, modbus_rx_arg1, MODBUS_RTU_PROT);
;;;738    			}
;;;739    
;;;740    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
00118e  2906              CMP      r1,#6
001190  d1f7              BNE      |L1.4482|
;;;741    			{
;;;742    			if(modbus_rx_arg0==50)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
001192  2f32              CMP      r7,#0x32
001194  d077              BEQ      |L1.4742|
;;;743    				{
;;;744    				I_ug=modbus_rx_arg1;
;;;745    				lc640_write_int(EE_I_UG,I_ug);
;;;746    				}
;;;747    			if(modbus_rx_arg0==51)		//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
001196  2f33              CMP      r7,#0x33
001198  d076              BEQ      |L1.4744|
;;;748    				{
;;;749    				U_up=modbus_rx_arg1;
;;;750    				lc640_write_int(EE_U_UP,U_up);
;;;751    				}
;;;752    			if(modbus_rx_arg0==52)		//μΰκρθμΰολόνξε νΰοπζενθε δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
00119a  2f34              CMP      r7,#0x34
00119c  d075              BEQ      |L1.4746|
;;;753    				{
;;;754    				U_maxg=modbus_rx_arg1;
;;;755    				lc640_write_int(EE_U_MAX_G,U_maxg);
;;;756    				}
;;;757    			if(modbus_rx_arg0==53)		//μΰκρθμΰλόνϋι ςξκ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
00119e  2f35              CMP      r7,#0x35
0011a0  d074              BEQ      |L1.4748|
;;;758    				{
;;;759    				I_maxp=modbus_rx_arg1;
;;;760    				lc640_write_int(EE_I_MAX_P,I_maxp);
;;;761    				}								
;;;762    			if(modbus_rx_arg0==54)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.ρεκσνδϋ
;;;763    				{
;;;764    				signed long sec,min,hour;
;;;765    				sec=(signed long)modbus_rx_arg1;
;;;766    				min=(T_PROC_GS/60L)%60L;
;;;767    				hour=T_PROC_GS/3600L;
0011a2  f44f6061          MOV      r0,#0xe10
0011a6  2f36              CMP      r7,#0x36              ;762
0011a8  d071              BEQ      |L1.4750|
;;;768    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;769    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;770    				}
;;;771    			if(modbus_rx_arg0==55)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.μθνσςϋ
0011aa  2f37              CMP      r7,#0x37
0011ac  d070              BEQ      |L1.4752|
;;;772    				{
;;;773    				signed long sec,min,hour;
;;;774    				sec=T_PROC_GS%60L;
;;;775    				min=(signed long)modbus_rx_arg1;
;;;776    				hour=T_PROC_GS/3600L;
;;;777    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;778    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;779    				}
;;;780    			if(modbus_rx_arg0==56)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.χΰρϋ
0011ae  2f38              CMP      r7,#0x38
0011b0  d06f              BEQ      |L1.4754|
;;;781    				{
;;;782    				signed long sec,min,hour;
;;;783    				sec=T_PROC_GS%60L;
;;;784    				min=(T_PROC_GS/60L)%60L;
;;;785    				hour=(signed long)modbus_rx_arg1;
;;;786    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;787    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;788    				}
;;;789    			if(modbus_rx_arg0==57)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.ρεκσνδϋ
0011b2  2f39              CMP      r7,#0x39
0011b4  d06e              BEQ      |L1.4756|
;;;790    				{
;;;791    				signed long sec,min,hour;
;;;792    				sec=(signed long)modbus_rx_arg1;
;;;793    				min=(T_PROC_PS/60L)%60L;
;;;794    				hour=T_PROC_PS/3600L;
;;;795    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;796    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;797    				}
;;;798    
;;;799    			if(modbus_rx_arg0==58)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.μθνσςϋ
0011b6  2f3a              CMP      r7,#0x3a
0011b8  d06d              BEQ      |L1.4758|
;;;800    				{
;;;801    				signed long sec,min,hour;
;;;802    				sec=T_PROC_PS%60L;
;;;803    				min=(signed long)modbus_rx_arg1;
;;;804    				hour=T_PROC_PS/3600L;
;;;805    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;806    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;807    				}
;;;808    
;;;809    			if(modbus_rx_arg0==59)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.χΰρϋ
0011ba  2f3b              CMP      r7,#0x3b
0011bc  d06c              BEQ      |L1.4760|
;;;810    				{
;;;811    				signed long sec,min,hour;
;;;812    				sec=T_PROC_PS%60L;
;;;813    				min=(T_PROC_PS/60L)%60L;
;;;814    				hour=(signed long)modbus_rx_arg1;
;;;815    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;816    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;817    				}
;;;818    
;;;819    			if(modbus_rx_arg0==60)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
0011be  2f3c              CMP      r7,#0x3c
0011c0  d06b              BEQ      |L1.4762|
;;;820    				{
;;;821    				if(modbus_rx_arg1==1)
;;;822    					{
;;;823    					if(work_stat!=wsPS)
;;;824    						{
;;;825    						work_stat=wsPS;
;;;826    						time_proc=0;
;;;827    						time_proc_remain=T_PROC_PS;
;;;828    						restart_on_PS();
;;;829    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;830    						}
;;;831    					}
;;;832    				if(modbus_rx_arg1==0)
;;;833    					{
;;;834    					if(work_stat==wsPS)
;;;835    						{
;;;836    						work_stat=wsOFF;
;;;837    						restart_off();
;;;838    						}
;;;839    					}
;;;840    				}
;;;841    			if(modbus_rx_arg0==61)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
0011c2  2f3d              CMP      r7,#0x3d
0011c4  d06a              BEQ      |L1.4764|
;;;842    				{
;;;843    				if(modbus_rx_arg1==1)
;;;844    					{
;;;845    					if(work_stat!=wsGS)
;;;846    						{
;;;847    						work_stat=wsGS;
;;;848    						time_proc=0;
;;;849    						time_proc_remain=T_PROC_GS;
;;;850    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;851    						}
;;;852    					}
;;;853    				if(modbus_rx_arg1==0)
;;;854    					{
;;;855    					if(work_stat==wsGS)
;;;856    						{
;;;857    						work_stat=wsOFF;
;;;858    						restart_off();
;;;859    						}
;;;860    					}
;;;861    				}
;;;862    
;;;863    			if(modbus_rx_arg0==62)		//οεπεκλώχενθε πελε πεβεπρΰ
0011c6  2f3e              CMP      r7,#0x3e
0011c8  d069              BEQ      |L1.4766|
;;;864    				{
;;;865    					{
;;;866    					if(work_stat==wsOFF)
;;;867    						{
;;;868    						if(modbus_rx_arg1==0)REV_STAT=rsFF;
;;;869    						if(modbus_rx_arg1==1)REV_STAT=rsREW;
;;;870    						}
;;;871    					}
;;;872    				}
;;;873    			if(modbus_rx_arg0==63)		//βκλώχενθε-βϋκλώχενθε ΰβςξπεβεπρΰ
0011ca  2f3f              CMP      r7,#0x3f
0011cc  d068              BEQ      |L1.4768|
;;;874    				{
;;;875    					{
;;;876    					if((work_stat==wsOFF)&&(REV_IS_ON))
;;;877    						{
;;;878    						if(modbus_rx_arg1==1)AVT_REV_IS_ON=1;
;;;879    						if(modbus_rx_arg1==0)AVT_REV_IS_ON=0;
;;;880    						lc640_write_int(EE_AVT_REV_IS_ON,AVT_REV_IS_ON);
;;;881    						}
;;;882    					}
;;;883    				}
;;;884    			if(modbus_rx_arg0==64)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ οπμξε, ρεκ
0011ce  2f40              CMP      r7,#0x40
0011d0  d067              BEQ      |L1.4770|
;;;885    				{
;;;886    				if(work_stat==wsOFF)
;;;887    					{
;;;888    					AVT_REV_TIME_FF=modbus_rx_arg1;
;;;889    					gran(&AVT_REV_TIME_FF,30,T_PROC_MAX);
;;;890    					lc640_write_int(EE_AVT_REV_TIME_FF,AVT_REV_TIME_FF);	
;;;891    					}
;;;892    				}
;;;893    			if(modbus_rx_arg0==65)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ ξαπΰςνξε, ρεκ
0011d2  2f41              CMP      r7,#0x41
0011d4  d074              BEQ      |L1.4800|
;;;894    				{
;;;895    				if(work_stat==wsOFF)
;;;896    					{
;;;897    					AVT_REV_TIME_REW=modbus_rx_arg1;
;;;898    					gran(&AVT_REV_TIME_REW,30,T_PROC_MAX);
;;;899    					lc640_write_int(EE_AVT_REV_TIME_REW,AVT_REV_TIME_REW);	
;;;900    					}
;;;901    				}
;;;902    			if(modbus_rx_arg0==66)		//ΐβςξπεβεπρ, βπεμ οΰσηϋ οπθ οεπεκλώχενθθ, ρεκ
0011d6  2f42              CMP      r7,#0x42
0011d8  d073              BEQ      |L1.4802|
;;;903    				{
;;;904    				if(work_stat==wsOFF)
;;;905    					{
;;;906    					AVT_REV_TIME_PAUSE=modbus_rx_arg1;
;;;907    					gran(&AVT_REV_TIME_PAUSE,2,600);
;;;908    					lc640_write_int(EE_AVT_REV_TIME_PAUSE,AVT_REV_TIME_PAUSE);	
;;;909    					}
;;;910    				}
;;;911    
;;;912    			if(modbus_rx_arg0==67)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ οπμξι, 0.1ΐ
0011da  2f43              CMP      r7,#0x43
0011dc  d072              BEQ      |L1.4804|
;;;913    				{
;;;914    				if(work_stat==wsOFF)
;;;915    					{
;;;916    					AVT_REV_I_NOM_FF=modbus_rx_arg1;
;;;917    		    			gran(&AVT_REV_I_NOM_FF,I_MIN_IPS,I_MAX_IPS);
;;;918    					lc640_write_int(EE_AVT_REV_I_NOM_FF,AVT_REV_I_NOM_FF);	
;;;919    					}
;;;920    				}
;;;921    
;;;922    			if(modbus_rx_arg0==68)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ ξαπΰςνϋι, 0.1ΐ
0011de  2f44              CMP      r7,#0x44
0011e0  d071              BEQ      |L1.4806|
;;;923    				{
;;;924    				if(work_stat==wsOFF)
;;;925    					{
;;;926    					AVT_REV_I_NOM_REW=modbus_rx_arg1;
;;;927    		    			gran(&AVT_REV_I_NOM_REW,I_MIN_IPS,I_MAX_IPS);
;;;928    					lc640_write_int(EE_AVT_REV_I_NOM_REW,AVT_REV_I_NOM_REW);	
;;;929    					}
;;;930    				}
;;;931    			if(modbus_rx_arg0==69)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ οπμξε, 0.1Β 
0011e2  e01b              B        |L1.4636|
                  |L1.4580|
                          DCD      I_ug
                  |L1.4584|
                          DCD      U_up
                  |L1.4588|
                          DCD      U_MAX
                  |L1.4592|
                          DCD      U_MIN
                  |L1.4596|
                          DCD      T_PROC_GS
                  |L1.4600|
                          DCD      T_PROC_GS_MODE
                  |L1.4604|
                          DCD      T_PROC_PS
                  |L1.4608|
                          DCD      T_PROC_MAX
                  |L1.4612|
                          DCD      T_PROC_PS_MODE
                  |L1.4616|
                          DCD      a_ind
                  |L1.4620|
                          DCD      time_proc
                  |L1.4624|
                          DCD      time_proc_remain
                  |L1.4628|
                          DCD      ||area_number.4||+0x1e
                  |L1.4632|
                          DCD      MODBUS_ADRESS
                  |L1.4636|
00121c  2f45              CMP      r7,#0x45
00121e  d07e              BEQ      |L1.4894|
;;;932    				{
;;;933    				if(work_stat==wsOFF)
;;;934    					{
;;;935    					AVT_REV_U_NOM_FF=modbus_rx_arg1;
;;;936    		    			gran(&AVT_REV_U_NOM_FF,U_MIN,U_MAX);
;;;937    					lc640_write_int(EE_AVT_REV_U_NOM_FF,AVT_REV_U_NOM_FF);					
;;;938    					}
;;;939    				}
;;;940    
;;;941    			if(modbus_rx_arg0==70)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ ξαπΰςνξε, 0.1Β
001220  2f46              CMP      r7,#0x46
001222  d07d              BEQ      |L1.4896|
;;;942    				{
;;;943    				if(work_stat==wsOFF)
;;;944    					{
;;;945    					AVT_REV_U_NOM_REW=modbus_rx_arg1;
;;;946    		    			gran(&AVT_REV_U_NOM_REW,U_MIN,U_MAX);
;;;947    					lc640_write_int(EE_AVT_REV_U_NOM_REW,AVT_REV_U_NOM_REW);					
;;;948    					}
;;;949    				}
;;;950    
;;;951    			if(modbus_rx_arg0==71)		//Βπεμ ηΰπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;952    				{
;;;953    				if(work_stat==wsOFF)
;;;954    					{
;;;955    					CAP_ZAR_TIME=modbus_rx_arg1;
001224  f8df8408          LDR      r8,|L1.5680|
;;;956    		    			gran(&CAP_ZAR_TIME,10,9999);
001228  f242720f          MOV      r2,#0x270f
00122c  2f47              CMP      r7,#0x47              ;951
00122e  d078              BEQ      |L1.4898|
;;;957    					lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;958    					}
;;;959    				}
;;;960    			if(modbus_rx_arg0==72)		//Βπεμ οΰσηϋ1 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;961    				{
;;;962    				if(work_stat==wsOFF)
;;;963    					{
;;;964    					CAP_PAUSE1_TIME=modbus_rx_arg1;
001230  f8df9400          LDR      r9,|L1.5684|
001234  2f48              CMP      r7,#0x48              ;960
001236  d075              BEQ      |L1.4900|
;;;965    		    			gran(&CAP_PAUSE1_TIME,10,9999);
;;;966    					lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;967    					}
;;;968    				}
;;;969    			if(modbus_rx_arg0==73)		//Βπεμ πΰηπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;970    				{
;;;971    				if(work_stat==wsOFF)
;;;972    					{
;;;973    					CAP_RAZR_TIME=modbus_rx_arg1;
001238  49ff              LDR      r1,|L1.5688|
00123a  2f49              CMP      r7,#0x49              ;969
00123c  d073              BEQ      |L1.4902|
;;;974    		    			gran(&CAP_RAZR_TIME,10,9999);
;;;975    					lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;976    					}
;;;977    				}
;;;978    			if(modbus_rx_arg0==74)		//Βπεμ οΰσηϋ2 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;979    				{
;;;980    				if(work_stat==wsOFF)
;;;981    					{
;;;982    					CAP_PAUSE2_TIME=modbus_rx_arg1;
00123e  4bff              LDR      r3,|L1.5692|
001240  2f4a              CMP      r7,#0x4a              ;978
001242  d071              BEQ      |L1.4904|
;;;983    		    			gran(&CAP_PAUSE2_TIME,10,9999);
;;;984    					lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;985    					}
;;;986    				}
;;;987    
;;;988    			if(modbus_rx_arg0==75)		//Μΰκρθμΰλόνξε νΰοπζενθε θροϋςΰςελόνξγξ φθκλΰ, 1Β  
;;;989    				{
;;;990    				if(work_stat==wsOFF)
;;;991    					{
;;;992    					CAP_MAX_VOLT=modbus_rx_arg1;
001244  f8dfa3f8          LDR      r10,|L1.5696|
001248  2f4b              CMP      r7,#0x4b              ;988
00124a  d06e              BEQ      |L1.4906|
;;;993    		    			gran(&CAP_MAX_VOLT,1,100);
;;;994    					lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;995    					}
;;;996    				}
;;;997    			if(modbus_rx_arg0==76)		//Πΰαξχθι ςξκ θροϋςΰςελόνξγξ φθκλΰ, 1ΐ 
;;;998    				{
;;;999    				if(work_stat==wsOFF)
;;;1000   					{
;;;1001   					CAP_WRK_CURR=modbus_rx_arg1;
00124c  f8dfb3f4          LDR      r11,|L1.5700|
001250  2f4c              CMP      r7,#0x4c              ;997
001252  d06b              BEQ      |L1.4908|
;;;1002   		    			gran(&CAP_WRK_CURR,1,150);
;;;1003   					lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1004   					}
;;;1005   				}
;;;1006   
;;;1007   			if(modbus_rx_arg0==77)		//Πεγθρςπ δλ ηΰοθρθ κξμΰνδ 
001254  2f4d              CMP      r7,#0x4d
001256  d06a              BEQ      |L1.4910|
;;;1008   				{
;;;1009   				if(modbus_rx_arg1==0x11)
;;;1010   					{
;;;1011   					start_CAP();
;;;1012   					}
;;;1013   				if(modbus_rx_arg1==0x12)
;;;1014   					{
;;;1015   					pause_CAP();
;;;1016   					}
;;;1017   				if(modbus_rx_arg1==0x13)
;;;1018   					{
;;;1019   					stop_CAP();
;;;1020   					}
;;;1021   				if(modbus_rx_arg1==0x14)
;;;1022   					{
;;;1023   					reset_CAP();
;;;1024   					}
;;;1025   
;;;1026   				if(modbus_rx_arg1==0x21)
;;;1027   					{
;;;1028   					if(work_stat==wsOFF)
;;;1029   						{
;;;1030   						CAP_ZAR_TIME++;
;;;1031   		    				gran(&CAP_ZAR_TIME,10,9999);
;;;1032   						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;1033   						}
;;;1034   					}
;;;1035   				if(modbus_rx_arg1==0x22)
;;;1036   					{
;;;1037   					if(work_stat==wsOFF)
;;;1038   						{
;;;1039   						CAP_ZAR_TIME--;
;;;1040   		    				gran(&CAP_ZAR_TIME,10,9999);
;;;1041   						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;1042   						}
;;;1043   					}
;;;1044   
;;;1045   				if(modbus_rx_arg1==0x31)
;;;1046   					{
;;;1047   					if(work_stat==wsOFF)
;;;1048   						{
;;;1049   						CAP_PAUSE1_TIME++;
;;;1050   		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;1051   						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;1052   						}
;;;1053   					}
;;;1054   				if(modbus_rx_arg1==0x32)
;;;1055   					{
;;;1056   					if(work_stat==wsOFF)
;;;1057   						{
;;;1058   						CAP_PAUSE1_TIME--;
;;;1059   		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;1060   						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;1061   						}
;;;1062   					}
;;;1063   
;;;1064   				if(modbus_rx_arg1==0x41)
;;;1065   					{
;;;1066   					if(work_stat==wsOFF)
;;;1067   						{
;;;1068   						CAP_RAZR_TIME++;
;;;1069   		    				gran(&CAP_RAZR_TIME,10,9999);
;;;1070   						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;1071   						}
;;;1072   					}
;;;1073   				if(modbus_rx_arg1==0x42)
;;;1074   					{
;;;1075   					if(work_stat==wsOFF)
;;;1076   						{
;;;1077   						CAP_RAZR_TIME--;
;;;1078   		    				gran(&CAP_RAZR_TIME,10,9999);
;;;1079   						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;1080   						}
;;;1081   					}
;;;1082   
;;;1083   				if(modbus_rx_arg1==0x51)
;;;1084   					{
;;;1085   					if(work_stat==wsOFF)
;;;1086   						{
;;;1087   						CAP_PAUSE2_TIME++;
;;;1088   		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;1089   						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;1090   						}
;;;1091   					}
;;;1092   				if(modbus_rx_arg1==0x52)
;;;1093   					{
;;;1094   					if(work_stat==wsOFF)
;;;1095   						{
;;;1096   						CAP_PAUSE2_TIME--;
;;;1097   		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;1098   						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;1099   						}
;;;1100   					}
;;;1101   
;;;1102   				if(modbus_rx_arg1==0x61)
;;;1103   					{
;;;1104   					if(work_stat==wsOFF)
;;;1105   						{
;;;1106   						CAP_MAX_VOLT++;
;;;1107   		    				gran(&CAP_MAX_VOLT,1,100);
;;;1108   						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;1109   						}
;;;1110   					}
;;;1111   				if(modbus_rx_arg1==0x62)
;;;1112   					{
;;;1113   					if(work_stat==wsOFF)
;;;1114   						{
;;;1115   						CAP_MAX_VOLT--;
;;;1116   		    				gran(&CAP_MAX_VOLT,1,100);
;;;1117   						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;1118   						}
;;;1119   					}
;;;1120   
;;;1121   				if(modbus_rx_arg1==0x71)
;;;1122   					{
;;;1123   					if(work_stat==wsOFF)
;;;1124   						{
;;;1125   						CAP_WRK_CURR++;
;;;1126   		    				gran(&CAP_WRK_CURR,1,150);
;;;1127   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1128   						}
;;;1129   					}
;;;1130   				if(modbus_rx_arg1==0x72)
;;;1131   					{
;;;1132   					if(work_stat==wsOFF)
;;;1133   						{
;;;1134   						CAP_WRK_CURR--;
;;;1135   		    				gran(&CAP_WRK_CURR,1,150);
;;;1136   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1137   						}
;;;1138   					}
;;;1139   
;;;1140   				}
;;;1141   
;;;1142   			if(modbus_rx_arg0==80)		//Ψθμ νΰοπζενθ β πεζθμε νεοξρπεδρςβεννξγξ σοπΰβλενθ 
001258  2f50              CMP      r7,#0x50
00125a  d069              BEQ      |L1.4912|
;;;1143   				{
;;;1144   				pwm_u_reg = modbus_rx_arg1;
;;;1145   				}
;;;1146   
;;;1147   			if(modbus_rx_arg0==81)		//Ψθμ ςξκΰ β πεζθμε νεοξρπεδρςβεννξγξ σοπΰβλενθ 
00125c  2f51              CMP      r7,#0x51
00125e  d068              BEQ      |L1.4914|
;;;1148   				{
;;;1149   				pwm_i_reg = modbus_rx_arg1;
;;;1150   				}
;;;1151   
;;;1152   			if(modbus_rx_arg0==82)		//Πεγθρςπ βπεμενθ β πεζθμε νεοξρπεδρςβεννξγξ σοπΰβλενθ 
001260  2f52              CMP      r7,#0x52
001262  d067              BEQ      |L1.4916|
;;;1153   				{
;;;1154   				pwm_t_reg = modbus_rx_arg1*10;
;;;1155   				}
;;;1156   
;;;1157   			if(modbus_rx_arg0==90)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ, β ΞΗΣ
;;;1158   				{
;;;1159   				I_ug_ram=modbus_rx_arg1;
;;;1160   				eepromRamSwitch=1;
001264  48f8              LDR      r0,|L1.5704|
;;;1161   				ramModbusCnt=300;
001266  f8df93e4          LDR      r9,|L1.5708|
00126a  f44f7896          MOV      r8,#0x12c
00126e  2f5a              CMP      r7,#0x5a              ;1157
001270  d07d              BEQ      |L1.4974|
;;;1162   				}
;;;1163   
;;;1164   			if(modbus_rx_arg0==91)	//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ, β ΞΗΣ
001272  2f5b              CMP      r7,#0x5b
001274  d07c              BEQ      |L1.4976|
;;;1165   				{
;;;1166   				U_up_ram=modbus_rx_arg1;
;;;1167   				eepromRamSwitch=1;
;;;1168   				ramModbusCnt=300;
;;;1169   				}
;;;1170   
;;;1171   			if(modbus_rx_arg0==92)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
001276  2f5c              CMP      r7,#0x5c
001278  d07b              BEQ      |L1.4978|
;;;1172   				{
;;;1173   				if(modbus_rx_arg1==1)
;;;1174   					{
;;;1175   					if(work_stat!=wsPS)
;;;1176   						{
;;;1177   						work_stat=wsPS;
;;;1178   						time_proc=0;
;;;1179   						time_proc_remain=T_PROC_PS;
;;;1180   						restart_on_PS();
;;;1181   						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;1182   						}
;;;1183   					}
;;;1184   				if(modbus_rx_arg1==0)
;;;1185   					{
;;;1186   					if(work_stat==wsPS)
;;;1187   						{
;;;1188   						work_stat=wsOFF;
;;;1189   						restart_off();
;;;1190   						}
;;;1191   					}
;;;1192   				ramModbusCnt=300;
;;;1193   				}
;;;1194   			if(modbus_rx_arg0==93)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
00127a  2f5d              CMP      r7,#0x5d
00127c  d07a              BEQ      |L1.4980|
00127e  e2ea              B        |L1.6230|
                  |L1.4736|
001280  e01b              B        |L1.4794|
                  |L1.4738|
001282  e00f              B        |L1.4772|
                  |L1.4740|
001284  e020              B        |L1.4808|
                  |L1.4742|
001286  e026              B        |L1.4822|
                  |L1.4744|
001288  e02a              B        |L1.4832|
                  |L1.4746|
00128a  e02e              B        |L1.4842|
                  |L1.4748|
00128c  e032              B        |L1.4852|
                  |L1.4750|
00128e  e036              B        |L1.4862|
                  |L1.4752|
001290  e05a              B        |L1.4936|
                  |L1.4754|
001292  e070              B        |L1.4982|
                  |L1.4756|
001294  e084              B        |L1.5024|
                  |L1.4758|
001296  e09b              B        |L1.5072|
                  |L1.4760|
001298  e0ab              B        |L1.5106|
                  |L1.4762|
00129a  e0c2              B        |L1.5154|
                  |L1.4764|
00129c  e0d8              B        |L1.5200|
                  |L1.4766|
00129e  e0f0              B        |L1.5250|
                  |L1.4768|
0012a0  e0fc              B        |L1.5276|
                  |L1.4770|
0012a2  e110              B        |L1.5318|
                  |L1.4772|
0012a4  f1a70132          SUB      r1,r7,#0x32           ;733
0012a8  2932              CMP      r1,#0x32              ;733
0012aa  d206              BCS      |L1.4794|
0012ac  4623              MOV      r3,r4                 ;733
0012ae  463a              MOV      r2,r7                 ;733
0012b0  9600              STR      r6,[sp,#0]            ;733
0012b2  b2c0              UXTB     r0,r0                 ;733
0012b4  9904              LDR      r1,[sp,#0x10]         ;733
0012b6  f7fffffe          BL       modbus_hold_registers_transmit
                  |L1.4794|
;;;1195   				{
;;;1196   				if(modbus_rx_arg1==1)
;;;1197   					{
;;;1198   					if(work_stat!=wsGS)
;;;1199   						{
;;;1200   						work_stat=wsGS;
;;;1201   						time_proc=0;
;;;1202   						time_proc_remain=T_PROC_GS;
;;;1203   						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;1204   						}
;;;1205   					}
;;;1206   				if(modbus_rx_arg1==0)
;;;1207   					{
;;;1208   					if(work_stat==wsGS)
;;;1209   						{
;;;1210   						work_stat=wsOFF;
;;;1211   						restart_off();
;;;1212   						}
;;;1213   					}
;;;1214   				ramModbusCnt=300;
;;;1215   				}
;;;1216   
;;;1217   											
;;;1218   			if((T_PROC_GS>T_PROC_MAX)||(T_PROC_GS<30))
;;;1219   				{
;;;1220   				if(T_PROC_GS>T_PROC_MAX)T_PROC_GS=T_PROC_MAX+1;
;;;1221   				else if(T_PROC_GS<30)T_PROC_GS=29;
;;;1222   				lc640_write_int(EE_T_PROC_GS,T_PROC_GS);
;;;1223   				T_PROC_GS_MODE=1;	
;;;1224   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1225   				}
;;;1226   			if((T_PROC_GS<=T_PROC_MAX)&&(T_PROC_GS>=30))
;;;1227   				{
;;;1228   				T_PROC_GS_MODE=0;	
;;;1229   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1230   				}
;;;1231   			
;;;1232   			if((T_PROC_PS>T_PROC_MAX)||(T_PROC_PS<30))
;;;1233   				{
;;;1234   				if(T_PROC_PS>T_PROC_MAX)T_PROC_PS=T_PROC_MAX+1;
;;;1235   				else if(T_PROC_PS<30)T_PROC_PS=29;
;;;1236   				lc640_write_int(EE_T_PROC_PS,T_PROC_PS);
;;;1237   				T_PROC_PS_MODE=1;	
;;;1238   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1239   				}
;;;1240   			if((T_PROC_PS<=T_PROC_MAX)&&(T_PROC_PS>=30))
;;;1241   				{
;;;1242   				T_PROC_PS_MODE=0;	
;;;1243   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1244   				}
;;;1245   
;;;1246   			modbus_hold_register_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0);
;;;1247   
;;;1248   
;;;1249   			if((modbus_rx_arg0!=90)&&(modbus_rx_arg0!=91)&&(modbus_rx_arg0!=92)&&(modbus_rx_arg0!=93)) lc640_write_int(EE_EE_WRITE_CNT,EE_WRITE_CNT+1);
;;;1250   //modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,2);
;;;1251   
;;;1252   
;;;1253   			}
;;;1254   		} 
;;;1255   	//;
;;;1256   	}
;;;1257   // modbus_plazma++;
;;;1258   
;;;1259   }
0012ba  b00b              ADD      sp,sp,#0x2c
0012bc  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.4800|
0012c0  e111              B        |L1.5350|
                  |L1.4802|
0012c2  e120              B        |L1.5382|
                  |L1.4804|
0012c4  e12e              B        |L1.5412|
                  |L1.4806|
0012c6  e140              B        |L1.5450|
                  |L1.4808|
0012c8  4623              MOV      r3,r4                 ;737
0012ca  463a              MOV      r2,r7                 ;737
0012cc  b2c0              UXTB     r0,r0                 ;737
0012ce  9600              STR      r6,[sp,#0]            ;737
0012d0  f7fffffe          BL       modbus_input_registers_transmit
                  |L1.4820|
0012d4  e7f1              B        |L1.4794|
                  |L1.4822|
0012d6  48de              LDR      r0,|L1.5712|
0012d8  b221              SXTH     r1,r4                 ;744
0012da  8001              STRH     r1,[r0,#0]            ;744
0012dc  2020              MOVS     r0,#0x20              ;745
0012de  e285              B        |L1.6124|
                  |L1.4832|
0012e0  48dc              LDR      r0,|L1.5716|
0012e2  b221              SXTH     r1,r4                 ;749
0012e4  8001              STRH     r1,[r0,#0]            ;749
0012e6  2022              MOVS     r0,#0x22              ;750
0012e8  e280              B        |L1.6124|
                  |L1.4842|
0012ea  48db              LDR      r0,|L1.5720|
0012ec  b221              SXTH     r1,r4                 ;754
0012ee  8001              STRH     r1,[r0,#0]            ;754
0012f0  2076              MOVS     r0,#0x76              ;755
0012f2  e27b              B        |L1.6124|
                  |L1.4852|
0012f4  48d9              LDR      r0,|L1.5724|
0012f6  b221              SXTH     r1,r4                 ;759
0012f8  8001              STRH     r1,[r0,#0]            ;759
0012fa  2078              MOVS     r0,#0x78              ;760
0012fc  e276              B        |L1.6124|
                  |L1.4862|
0012fe  f8dfc360          LDR      r12,|L1.5728|
001302  4651              MOV      r1,r10                ;766
001304  f8dc2000          LDR      r2,[r12,#0]           ;766  ; T_PROC_GS
001308  fb92f3f1          SDIV     r3,r2,r1              ;766
00130c  fb93f5fa          SDIV     r5,r3,r10             ;766
001310  fb92f0f0          SDIV     r0,r2,r0              ;767
001314  fb0a3115          MLS      r1,r10,r5,r3          ;766
001318  f44f6261          MOV      r2,#0xe10             ;768
00131c  e00b              B        |L1.4918|
                  |L1.4894|
00131e  e126              B        |L1.5486|
                  |L1.4896|
001320  e137              B        |L1.5522|
                  |L1.4898|
001322  e149              B        |L1.5560|
                  |L1.4900|
001324  e14d              B        |L1.5570|
                  |L1.4902|
001326  e151              B        |L1.5580|
                  |L1.4904|
001328  e15b              B        |L1.5602|
                  |L1.4906|
00132a  e165              B        |L1.5624|
                  |L1.4908|
00132c  e169              B        |L1.5634|
                  |L1.4910|
00132e  e16d              B        |L1.5644|
                  |L1.4912|
001330  e267              B        |L1.6146|
                  |L1.4914|
001332  e268              B        |L1.6150|
                  |L1.4916|
001334  e26a              B        |L1.6156|
                  |L1.4918|
001336  4350              MULS     r0,r2,r0              ;768
001338  ebc11101          RSB      r1,r1,r1,LSL #4       ;768
00133c  eb000081          ADD      r0,r0,r1,LSL #2       ;768
001340  1901              ADDS     r1,r0,r4              ;768
001342  f8cc1000          STR      r1,[r12,#0]           ;770  ; T_PROC_GS
001346  e010              B        |L1.4970|
                  |L1.4936|
001348  4ac5              LDR      r2,|L1.5728|
00134a  6811              LDR      r1,[r2,#0]            ;774  ; T_PROC_GS
00134c  fb91f5fa          SDIV     r5,r1,r10             ;774
001350  fb91f0f0          SDIV     r0,r1,r0              ;776
001354  fb0a1315          MLS      r3,r10,r5,r1          ;774
001358  f44f6161          MOV      r1,#0xe10             ;777
00135c  4348              MULS     r0,r1,r0              ;777
00135e  ebc41104          RSB      r1,r4,r4,LSL #4       ;777
001362  eb000081          ADD      r0,r0,r1,LSL #2       ;777
001366  18c1              ADDS     r1,r0,r3              ;777
001368  6011              STR      r1,[r2,#0]            ;777  ; T_PROC_GS
                  |L1.4970|
00136a  20d8              MOVS     r0,#0xd8              ;769
00136c  e056              B        |L1.5148|
                  |L1.4974|
00136e  e253              B        |L1.6168|
                  |L1.4976|
001370  e254              B        |L1.6172|
                  |L1.4978|
001372  e258              B        |L1.6182|
                  |L1.4980|
001374  e27c              B        |L1.6256|
                  |L1.4982|
001376  48ba              LDR      r0,|L1.5728|
001378  4653              MOV      r3,r10                ;783
00137a  6802              LDR      r2,[r0,#0]            ;783  ; T_PROC_GS
00137c  fb92f1f3          SDIV     r1,r2,r3              ;783
001380  fb91f5fa          SDIV     r5,r1,r10             ;784
001384  fb0a2211          MLS      r2,r10,r1,r2          ;783
001388  fb0a1115          MLS      r1,r10,r5,r1          ;784
00138c  f44f6361          MOV      r3,#0xe10             ;786
001390  435c              MULS     r4,r3,r4              ;786
001392  ebc11101          RSB      r1,r1,r1,LSL #4       ;786
001396  eb040181          ADD      r1,r4,r1,LSL #2       ;786
00139a  4411              ADD      r1,r1,r2              ;786
00139c  6001              STR      r1,[r0,#0]            ;788  ; T_PROC_GS
00139e  e7e4              B        |L1.4970|
                  |L1.5024|
0013a0  f8dfc2c0          LDR      r12,|L1.5732|
0013a4  4651              MOV      r1,r10                ;793
0013a6  f8dc2000          LDR      r2,[r12,#0]           ;793  ; T_PROC_PS
0013aa  fb92f3f1          SDIV     r3,r2,r1              ;793
0013ae  fb93f5fa          SDIV     r5,r3,r10             ;793
0013b2  fb92f0f0          SDIV     r0,r2,r0              ;794
0013b6  fb0a3115          MLS      r1,r10,r5,r3          ;793
0013ba  f44f6261          MOV      r2,#0xe10             ;795
0013be  4350              MULS     r0,r2,r0              ;795
0013c0  ebc11101          RSB      r1,r1,r1,LSL #4       ;795
0013c4  eb000081          ADD      r0,r0,r1,LSL #2       ;795
0013c8  1901              ADDS     r1,r0,r4              ;795
0013ca  f8cc1000          STR      r1,[r12,#0]           ;797  ; T_PROC_PS
0013ce  e024              B        |L1.5146|
                  |L1.5072|
0013d0  4aa4              LDR      r2,|L1.5732|
0013d2  6811              LDR      r1,[r2,#0]            ;802  ; T_PROC_PS
0013d4  fb91f5fa          SDIV     r5,r1,r10             ;802
0013d8  fb91f0f0          SDIV     r0,r1,r0              ;804
0013dc  fb0a1315          MLS      r3,r10,r5,r1          ;802
0013e0  f44f6161          MOV      r1,#0xe10             ;805
0013e4  4348              MULS     r0,r1,r0              ;805
0013e6  ebc41104          RSB      r1,r4,r4,LSL #4       ;805
0013ea  eb000081          ADD      r0,r0,r1,LSL #2       ;805
0013ee  18c1              ADDS     r1,r0,r3              ;805
0013f0  e012              B        |L1.5144|
                  |L1.5106|
0013f2  4a9c              LDR      r2,|L1.5732|
0013f4  4650              MOV      r0,r10                ;812
0013f6  6811              LDR      r1,[r2,#0]            ;812  ; T_PROC_PS
0013f8  fb91f3f0          SDIV     r3,r1,r0              ;812
0013fc  fb93f5fa          SDIV     r5,r3,r10             ;813
001400  fb0a3015          MLS      r0,r10,r5,r3          ;813
001404  fb0a1113          MLS      r1,r10,r3,r1          ;812
001408  f44f6361          MOV      r3,#0xe10             ;815
00140c  435c              MULS     r4,r3,r4              ;815
00140e  ebc01000          RSB      r0,r0,r0,LSL #4       ;815
001412  eb040080          ADD      r0,r4,r0,LSL #2       ;815
001416  4401              ADD      r1,r1,r0              ;815
                  |L1.5144|
001418  6011              STR      r1,[r2,#0]            ;815  ; T_PROC_PS
                  |L1.5146|
00141a  20dc              MOVS     r0,#0xdc              ;816
                  |L1.5148|
00141c  f7fffffe          BL       lc640_write_long
                  |L1.5152|
001420  e219              B        |L1.6230|
                  |L1.5154|
001422  2c01              CMP      r4,#1                 ;821
001424  d001              BEQ      |L1.5162|
001426  b17c              CBZ      r4,|L1.5192|
001428  e215              B        |L1.6230|
                  |L1.5162|
00142a  7828              LDRB     r0,[r5,#0]            ;823  ; work_stat
00142c  2802              CMP      r0,#2                 ;823
00142e  d0f7              BEQ      |L1.5152|
001430  2002              MOVS     r0,#2                 ;825
001432  7028              STRB     r0,[r5,#0]            ;825
001434  488c              LDR      r0,|L1.5736|
001436  6006              STR      r6,[r0,#0]            ;827  ; time_proc
001438  488a              LDR      r0,|L1.5732|
00143a  6801              LDR      r1,[r0,#0]            ;827  ; T_PROC_PS
00143c  488b              LDR      r0,|L1.5740|
00143e  6001              STR      r1,[r0,#0]            ;828  ; time_proc_remain
001440  f7fffffe          BL       restart_on_PS
001444  2101              MOVS     r1,#1                 ;829
001446  e013              B        |L1.5232|
                  |L1.5192|
001448  7828              LDRB     r0,[r5,#0]            ;834  ; work_stat
00144a  2802              CMP      r0,#2                 ;834
00144c  d015              BEQ      |L1.5242|
00144e  e202              B        |L1.6230|
                  |L1.5200|
001450  2c01              CMP      r4,#1                 ;843
001452  d001              BEQ      |L1.5208|
001454  b174              CBZ      r4,|L1.5236|
001456  e1fe              B        |L1.6230|
                  |L1.5208|
001458  7828              LDRB     r0,[r5,#0]            ;845  ; work_stat
00145a  2801              CMP      r0,#1                 ;845
00145c  d010              BEQ      |L1.5248|
00145e  2001              MOVS     r0,#1                 ;847
001460  7028              STRB     r0,[r5,#0]            ;847
001462  4881              LDR      r0,|L1.5736|
001464  6006              STR      r6,[r0,#0]            ;849  ; time_proc
001466  487e              LDR      r0,|L1.5728|
001468  6801              LDR      r1,[r0,#0]            ;849  ; T_PROC_GS
00146a  4880              LDR      r0,|L1.5740|
00146c  6001              STR      r1,[r0,#0]            ;850  ; time_proc_remain
00146e  2100              MOVS     r1,#0                 ;850
                  |L1.5232|
001470  20ea              MOVS     r0,#0xea              ;829
001472  e1bb              B        |L1.6124|
                  |L1.5236|
001474  7828              LDRB     r0,[r5,#0]            ;855  ; work_stat
001476  2801              CMP      r0,#1                 ;855
001478  d102              BNE      |L1.5248|
                  |L1.5242|
00147a  702e              STRB     r6,[r5,#0]            ;857
00147c  f7fffffe          BL       restart_off
                  |L1.5248|
001480  e1e9              B        |L1.6230|
                  |L1.5250|
001482  7828              LDRB     r0,[r5,#0]            ;866  ; work_stat
001484  2800              CMP      r0,#0                 ;866
001486  d103              BNE      |L1.5264|
001488  4879              LDR      r0,|L1.5744|
00148a  b114              CBZ      r4,|L1.5266|
00148c  2c01              CMP      r4,#1                 ;869
00148e  d003              BEQ      |L1.5272|
                  |L1.5264|
001490  e1e1              B        |L1.6230|
                  |L1.5266|
001492  2101              MOVS     r1,#1                 ;868
001494  7001              STRB     r1,[r0,#0]            ;868
001496  e1de              B        |L1.6230|
                  |L1.5272|
001498  7006              STRB     r6,[r0,#0]            ;869
00149a  e1dc              B        |L1.6230|
                  |L1.5276|
00149c  7828              LDRB     r0,[r5,#0]            ;876  ; work_stat
00149e  2800              CMP      r0,#0                 ;876
0014a0  d152              BNE      |L1.5448|
0014a2  4874              LDR      r0,|L1.5748|
0014a4  8800              LDRH     r0,[r0,#0]            ;876  ; REV_IS_ON
0014a6  2800              CMP      r0,#0                 ;876
0014a8  d04e              BEQ      |L1.5448|
0014aa  4a73              LDR      r2,|L1.5752|
0014ac  f44f7084          MOV      r0,#0x108             ;880
0014b0  2c01              CMP      r4,#1                 ;878
0014b2  d003              BEQ      |L1.5308|
0014b4  b124              CBZ      r4,|L1.5312|
0014b6  f9b21000          LDRSH    r1,[r2,#0]            ;880  ; AVT_REV_IS_ON
0014ba  e197              B        |L1.6124|
                  |L1.5308|
0014bc  2101              MOVS     r1,#1                 ;878
0014be  e000              B        |L1.5314|
                  |L1.5312|
0014c0  4631              MOV      r1,r6                 ;879
                  |L1.5314|
0014c2  8011              STRH     r1,[r2,#0]            ;878
0014c4  e192              B        |L1.6124|
                  |L1.5318|
0014c6  7828              LDRB     r0,[r5,#0]            ;886  ; work_stat
0014c8  bbf0              CBNZ     r0,|L1.5448|
0014ca  4d6c              LDR      r5,|L1.5756|
0014cc  486c              LDR      r0,|L1.5760|
0014ce  211e              MOVS     r1,#0x1e              ;889
0014d0  802c              STRH     r4,[r5,#0]            ;888
0014d2  6800              LDR      r0,[r0,#0]            ;889  ; T_PROC_MAX
0014d4  b202              SXTH     r2,r0                 ;889
0014d6  4628              MOV      r0,r5                 ;889
0014d8  f7fffffe          BL       gran
0014dc  f9b51000          LDRSH    r1,[r5,#0]            ;890  ; AVT_REV_TIME_FF
0014e0  f44f7085          MOV      r0,#0x10a             ;890
0014e4  e182              B        |L1.6124|
                  |L1.5350|
0014e6  7828              LDRB     r0,[r5,#0]            ;895  ; work_stat
0014e8  bb70              CBNZ     r0,|L1.5448|
0014ea  4d66              LDR      r5,|L1.5764|
0014ec  4864              LDR      r0,|L1.5760|
0014ee  211e              MOVS     r1,#0x1e              ;898
0014f0  802c              STRH     r4,[r5,#0]            ;897
0014f2  6800              LDR      r0,[r0,#0]            ;898  ; T_PROC_MAX
0014f4  b202              SXTH     r2,r0                 ;898
0014f6  4628              MOV      r0,r5                 ;898
0014f8  f7fffffe          BL       gran
0014fc  f9b51000          LDRSH    r1,[r5,#0]            ;899  ; AVT_REV_TIME_REW
001500  f44f7086          MOV      r0,#0x10c             ;899
001504  e172              B        |L1.6124|
                  |L1.5382|
001506  7828              LDRB     r0,[r5,#0]            ;904  ; work_stat
001508  b9f0              CBNZ     r0,|L1.5448|
00150a  4d5f              LDR      r5,|L1.5768|
00150c  f44f7216          MOV      r2,#0x258             ;907
001510  2102              MOVS     r1,#2                 ;907
001512  802c              STRH     r4,[r5,#0]            ;906
001514  4628              MOV      r0,r5                 ;907
001516  f7fffffe          BL       gran
00151a  f9b51000          LDRSH    r1,[r5,#0]            ;908  ; AVT_REV_TIME_PAUSE
00151e  f44f7087          MOV      r0,#0x10e             ;908
001522  e163              B        |L1.6124|
                  |L1.5412|
001524  7828              LDRB     r0,[r5,#0]            ;914  ; work_stat
001526  b978              CBNZ     r0,|L1.5448|
001528  4d58              LDR      r5,|L1.5772|
00152a  4859              LDR      r0,|L1.5776|
00152c  802c              STRH     r4,[r5,#0]            ;916
00152e  f9b02000          LDRSH    r2,[r0,#0]            ;917  ; I_MAX_IPS
001532  4858              LDR      r0,|L1.5780|
001534  f9b01000          LDRSH    r1,[r0,#0]            ;917  ; I_MIN_IPS
001538  4628              MOV      r0,r5                 ;917
00153a  f7fffffe          BL       gran
00153e  f9b51000          LDRSH    r1,[r5,#0]            ;918  ; AVT_REV_I_NOM_FF
001542  f44f7088          MOV      r0,#0x110             ;918
001546  e151              B        |L1.6124|
                  |L1.5448|
001548  e035              B        |L1.5558|
                  |L1.5450|
00154a  7828              LDRB     r0,[r5,#0]            ;924  ; work_stat
00154c  bb98              CBNZ     r0,|L1.5558|
00154e  4d52              LDR      r5,|L1.5784|
001550  484f              LDR      r0,|L1.5776|
001552  802c              STRH     r4,[r5,#0]            ;926
001554  f9b02000          LDRSH    r2,[r0,#0]            ;927  ; I_MAX_IPS
001558  484e              LDR      r0,|L1.5780|
00155a  f9b01000          LDRSH    r1,[r0,#0]            ;927  ; I_MIN_IPS
00155e  4628              MOV      r0,r5                 ;927
001560  f7fffffe          BL       gran
001564  f9b51000          LDRSH    r1,[r5,#0]            ;928  ; AVT_REV_I_NOM_REW
001568  f44f7089          MOV      r0,#0x112             ;928
00156c  e13e              B        |L1.6124|
                  |L1.5486|
00156e  7828              LDRB     r0,[r5,#0]            ;933  ; work_stat
001570  bb08              CBNZ     r0,|L1.5558|
001572  4d4a              LDR      r5,|L1.5788|
001574  484a              LDR      r0,|L1.5792|
001576  802c              STRH     r4,[r5,#0]            ;935
001578  f9b02000          LDRSH    r2,[r0,#0]            ;936  ; U_MAX
00157c  4849              LDR      r0,|L1.5796|
00157e  f9b01000          LDRSH    r1,[r0,#0]            ;936  ; U_MIN
001582  4628              MOV      r0,r5                 ;936
001584  f7fffffe          BL       gran
001588  f9b51000          LDRSH    r1,[r5,#0]            ;937  ; AVT_REV_U_NOM_FF
00158c  f44f708a          MOV      r0,#0x114             ;937
001590  e12c              B        |L1.6124|
                  |L1.5522|
001592  7828              LDRB     r0,[r5,#0]            ;943  ; work_stat
001594  b978              CBNZ     r0,|L1.5558|
001596  4d44              LDR      r5,|L1.5800|
001598  4841              LDR      r0,|L1.5792|
00159a  802c              STRH     r4,[r5,#0]            ;945
00159c  f9b02000          LDRSH    r2,[r0,#0]            ;946  ; U_MAX
0015a0  4840              LDR      r0,|L1.5796|
0015a2  f9b01000          LDRSH    r1,[r0,#0]            ;946  ; U_MIN
0015a6  4628              MOV      r0,r5                 ;946
0015a8  f7fffffe          BL       gran
0015ac  f9b51000          LDRSH    r1,[r5,#0]            ;947  ; AVT_REV_U_NOM_REW
0015b0  f44f708b          MOV      r0,#0x116             ;947
0015b4  e11a              B        |L1.6124|
                  |L1.5558|
0015b6  e03a              B        |L1.5678|
                  |L1.5560|
0015b8  7828              LDRB     r0,[r5,#0]            ;953  ; work_stat
0015ba  bbc0              CBNZ     r0,|L1.5678|
0015bc  f8a84000          STRH     r4,[r8,#0]            ;955
0015c0  e09e              B        |L1.5888|
                  |L1.5570|
0015c2  7828              LDRB     r0,[r5,#0]            ;962  ; work_stat
0015c4  bb98              CBNZ     r0,|L1.5678|
0015c6  f8a94000          STRH     r4,[r9,#0]            ;964
0015ca  e0b1              B        |L1.5936|
                  |L1.5580|
0015cc  7828              LDRB     r0,[r5,#0]            ;971  ; work_stat
0015ce  bb70              CBNZ     r0,|L1.5678|
0015d0  460d              MOV      r5,r1                 ;973
0015d2  800c              STRH     r4,[r1,#0]            ;973
0015d4  210a              MOVS     r1,#0xa               ;974
0015d6  4818              LDR      r0,|L1.5688|
0015d8  f7fffffe          BL       gran
0015dc  f9b51000          LDRSH    r1,[r5,#0]            ;975  ; CAP_RAZR_TIME
0015e0  e0c2              B        |L1.5992|
                  |L1.5602|
0015e2  7828              LDRB     r0,[r5,#0]            ;980  ; work_stat
0015e4  bb18              CBNZ     r0,|L1.5678|
0015e6  461d              MOV      r5,r3                 ;982
0015e8  801c              STRH     r4,[r3,#0]            ;982
0015ea  210a              MOVS     r1,#0xa               ;983
0015ec  4813              LDR      r0,|L1.5692|
0015ee  f7fffffe          BL       gran
0015f2  f9b51000          LDRSH    r1,[r5,#0]            ;984  ; CAP_PAUSE2_TIME
0015f6  e0cc              B        |L1.6034|
                  |L1.5624|
0015f8  7828              LDRB     r0,[r5,#0]            ;990  ; work_stat
0015fa  b9c0              CBNZ     r0,|L1.5678|
0015fc  f8aa4000          STRH     r4,[r10,#0]           ;992
001600  e0db              B        |L1.6074|
                  |L1.5634|
001602  7828              LDRB     r0,[r5,#0]            ;999  ; work_stat
001604  b998              CBNZ     r0,|L1.5678|
001606  f8ab4000          STRH     r4,[r11,#0]           ;1001
00160a  e0e6              B        |L1.6106|
                  |L1.5644|
00160c  2c11              CMP      r4,#0x11              ;1009
00160e  d05e              BEQ      |L1.5838|
001610  2c12              CMP      r4,#0x12              ;1013
001612  d05f              BEQ      |L1.5844|
001614  2c13              CMP      r4,#0x13              ;1017
001616  d060              BEQ      |L1.5850|
001618  2c14              CMP      r4,#0x14              ;1021
00161a  d061              BEQ      |L1.5856|
00161c  2c21              CMP      r4,#0x21              ;1026
00161e  d062              BEQ      |L1.5862|
001620  2c22              CMP      r4,#0x22              ;1035
001622  d066              BEQ      |L1.5874|
001624  2c31              CMP      r4,#0x31              ;1045
001626  d076              BEQ      |L1.5910|
001628  2c32              CMP      r4,#0x32              ;1054
00162a  d07a              BEQ      |L1.5922|
00162c  e03e              B        |L1.5804|
                  |L1.5678|
00162e  e08e              B        |L1.5966|
                  |L1.5680|
                          DCD      CAP_ZAR_TIME
                  |L1.5684|
                          DCD      CAP_PAUSE1_TIME
                  |L1.5688|
                          DCD      CAP_RAZR_TIME
                  |L1.5692|
                          DCD      CAP_PAUSE2_TIME
                  |L1.5696|
                          DCD      CAP_MAX_VOLT
                  |L1.5700|
                          DCD      CAP_WRK_CURR
                  |L1.5704|
                          DCD      eepromRamSwitch
                  |L1.5708|
                          DCD      ramModbusCnt
                  |L1.5712|
                          DCD      I_ug
                  |L1.5716|
                          DCD      U_up
                  |L1.5720|
                          DCD      U_maxg
                  |L1.5724|
                          DCD      I_maxp
                  |L1.5728|
                          DCD      T_PROC_GS
                  |L1.5732|
                          DCD      T_PROC_PS
                  |L1.5736|
                          DCD      time_proc
                  |L1.5740|
                          DCD      time_proc_remain
                  |L1.5744|
                          DCD      REV_STAT
                  |L1.5748|
                          DCD      REV_IS_ON
                  |L1.5752|
                          DCD      AVT_REV_IS_ON
                  |L1.5756|
                          DCD      AVT_REV_TIME_FF
                  |L1.5760|
                          DCD      T_PROC_MAX
                  |L1.5764|
                          DCD      AVT_REV_TIME_REW
                  |L1.5768|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.5772|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.5776|
                          DCD      I_MAX_IPS
                  |L1.5780|
                          DCD      I_MIN_IPS
                  |L1.5784|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.5788|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.5792|
                          DCD      U_MAX
                  |L1.5796|
                          DCD      U_MIN
                  |L1.5800|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.5804|
0016ac  2c41              CMP      r4,#0x41              ;1064
0016ae  d048              BEQ      |L1.5954|
0016b0  2c42              CMP      r4,#0x42              ;1073
0016b2  d04d              BEQ      |L1.5968|
0016b4  2c51              CMP      r4,#0x51              ;1083
0016b6  d05a              BEQ      |L1.5998|
0016b8  2c52              CMP      r4,#0x52              ;1092
0016ba  d05e              BEQ      |L1.6010|
0016bc  2c61              CMP      r4,#0x61              ;1102
0016be  d06b              BEQ      |L1.6040|
0016c0  2c62              CMP      r4,#0x62              ;1111
0016c2  d073              BEQ      |L1.6060|
0016c4  2c71              CMP      r4,#0x71              ;1121
0016c6  d06e              BEQ      |L1.6054|
0016c8  2c72              CMP      r4,#0x72              ;1130
0016ca  d06d              BEQ      |L1.6056|
0016cc  e0c3              B        |L1.6230|
                  |L1.5838|
0016ce  f7fffffe          BL       start_CAP
0016d2  e0c0              B        |L1.6230|
                  |L1.5844|
0016d4  f7fffffe          BL       pause_CAP
0016d8  e0bd              B        |L1.6230|
                  |L1.5850|
0016da  f7fffffe          BL       stop_CAP
0016de  e0ba              B        |L1.6230|
                  |L1.5856|
0016e0  f7fffffe          BL       reset_CAP
0016e4  e0b7              B        |L1.6230|
                  |L1.5862|
0016e6  7828              LDRB     r0,[r5,#0]            ;1028  ; work_stat
0016e8  bb88              CBNZ     r0,|L1.5966|
0016ea  f8b80000          LDRH     r0,[r8,#0]            ;1030  ; CAP_ZAR_TIME
0016ee  1c40              ADDS     r0,r0,#1              ;1030
0016f0  e004              B        |L1.5884|
                  |L1.5874|
0016f2  7828              LDRB     r0,[r5,#0]            ;1037  ; work_stat
0016f4  bb58              CBNZ     r0,|L1.5966|
0016f6  f8b80000          LDRH     r0,[r8,#0]            ;1039  ; CAP_ZAR_TIME
0016fa  1e40              SUBS     r0,r0,#1              ;1039
                  |L1.5884|
0016fc  f8a80000          STRH     r0,[r8,#0]            ;1030
                  |L1.5888|
001700  210a              MOVS     r1,#0xa               ;956
001702  4897              LDR      r0,|L1.6496|
001704  f7fffffe          BL       gran
001708  f9b81000          LDRSH    r1,[r8,#0]            ;957  ; CAP_ZAR_TIME
00170c  f44f70e9          MOV      r0,#0x1d2             ;957
001710  e06c              B        |L1.6124|
001712  e000              B        |L1.5910|
001714  e005              B        |L1.5922|
                  |L1.5910|
001716  7828              LDRB     r0,[r5,#0]            ;1047  ; work_stat
001718  b9c8              CBNZ     r0,|L1.5966|
00171a  f8b90000          LDRH     r0,[r9,#0]            ;1049  ; CAP_PAUSE1_TIME
00171e  1c40              ADDS     r0,r0,#1              ;1049
001720  e004              B        |L1.5932|
                  |L1.5922|
001722  7828              LDRB     r0,[r5,#0]            ;1056  ; work_stat
001724  b998              CBNZ     r0,|L1.5966|
001726  f8b90000          LDRH     r0,[r9,#0]            ;1058  ; CAP_PAUSE1_TIME
00172a  1e40              SUBS     r0,r0,#1              ;1058
                  |L1.5932|
00172c  f8a90000          STRH     r0,[r9,#0]            ;1049
                  |L1.5936|
001730  210a              MOVS     r1,#0xa               ;965
001732  488c              LDR      r0,|L1.6500|
001734  f7fffffe          BL       gran
001738  f9b91000          LDRSH    r1,[r9,#0]            ;966  ; CAP_PAUSE1_TIME
00173c  f44f70ea          MOV      r0,#0x1d4             ;966
001740  e054              B        |L1.6124|
                  |L1.5954|
001742  7828              LDRB     r0,[r5,#0]            ;1066  ; work_stat
001744  b918              CBNZ     r0,|L1.5966|
001746  8808              LDRH     r0,[r1,#0]            ;1068  ; CAP_RAZR_TIME
001748  460c              MOV      r4,r1                 ;1068
00174a  1c40              ADDS     r0,r0,#1              ;1068
00174c  e005              B        |L1.5978|
                  |L1.5966|
00174e  e02c              B        |L1.6058|
                  |L1.5968|
001750  7828              LDRB     r0,[r5,#0]            ;1075  ; work_stat
001752  bb50              CBNZ     r0,|L1.6058|
001754  8808              LDRH     r0,[r1,#0]            ;1077  ; CAP_RAZR_TIME
001756  460c              MOV      r4,r1                 ;1077
001758  1e40              SUBS     r0,r0,#1              ;1077
                  |L1.5978|
00175a  8020              STRH     r0,[r4,#0]            ;1068
00175c  210a              MOVS     r1,#0xa               ;1069
00175e  4882              LDR      r0,|L1.6504|
001760  f7fffffe          BL       gran
001764  f9b41000          LDRSH    r1,[r4,#0]            ;1070  ; CAP_RAZR_TIME
                  |L1.5992|
001768  f44f70eb          MOV      r0,#0x1d6             ;975
00176c  e03e              B        |L1.6124|
                  |L1.5998|
00176e  7828              LDRB     r0,[r5,#0]            ;1085  ; work_stat
001770  b9d8              CBNZ     r0,|L1.6058|
001772  8818              LDRH     r0,[r3,#0]            ;1087  ; CAP_PAUSE2_TIME
001774  461c              MOV      r4,r3                 ;1087
001776  1c40              ADDS     r0,r0,#1              ;1087
001778  e004              B        |L1.6020|
                  |L1.6010|
00177a  7828              LDRB     r0,[r5,#0]            ;1094  ; work_stat
00177c  b9a8              CBNZ     r0,|L1.6058|
00177e  8818              LDRH     r0,[r3,#0]            ;1096  ; CAP_PAUSE2_TIME
001780  461c              MOV      r4,r3                 ;1096
001782  1e40              SUBS     r0,r0,#1              ;1096
                  |L1.6020|
001784  8020              STRH     r0,[r4,#0]            ;1087
001786  210a              MOVS     r1,#0xa               ;1088
001788  4878              LDR      r0,|L1.6508|
00178a  f7fffffe          BL       gran
00178e  f9b41000          LDRSH    r1,[r4,#0]            ;1089  ; CAP_PAUSE2_TIME
                  |L1.6034|
001792  f44f70ec          MOV      r0,#0x1d8             ;984
001796  e029              B        |L1.6124|
                  |L1.6040|
001798  7828              LDRB     r0,[r5,#0]            ;1104  ; work_stat
00179a  b930              CBNZ     r0,|L1.6058|
00179c  f8ba0000          LDRH     r0,[r10,#0]           ;1106  ; CAP_MAX_VOLT
0017a0  1c40              ADDS     r0,r0,#1              ;1106
0017a2  e008              B        |L1.6070|
0017a4  e002              B        |L1.6060|
                  |L1.6054|
0017a6  e012              B        |L1.6094|
                  |L1.6056|
0017a8  e023              B        |L1.6130|
                  |L1.6058|
0017aa  e021              B        |L1.6128|
                  |L1.6060|
0017ac  7828              LDRB     r0,[r5,#0]            ;1113  ; work_stat
0017ae  b9f8              CBNZ     r0,|L1.6128|
0017b0  f8ba0000          LDRH     r0,[r10,#0]           ;1115  ; CAP_MAX_VOLT
0017b4  1e40              SUBS     r0,r0,#1              ;1115
                  |L1.6070|
0017b6  f8aa0000          STRH     r0,[r10,#0]           ;1106
                  |L1.6074|
0017ba  2264              MOVS     r2,#0x64              ;993
0017bc  2101              MOVS     r1,#1                 ;993
0017be  486c              LDR      r0,|L1.6512|
0017c0  f7fffffe          BL       gran
0017c4  f9ba1000          LDRSH    r1,[r10,#0]           ;994  ; CAP_MAX_VOLT
0017c8  f44f70ed          MOV      r0,#0x1da             ;994
0017cc  e00e              B        |L1.6124|
                  |L1.6094|
0017ce  7828              LDRB     r0,[r5,#0]            ;1123  ; work_stat
0017d0  b970              CBNZ     r0,|L1.6128|
0017d2  f8bb0000          LDRH     r0,[r11,#0]           ;1125  ; CAP_WRK_CURR
0017d6  1c40              ADDS     r0,r0,#1              ;1125
0017d8  e010              B        |L1.6140|
                  |L1.6106|
0017da  2296              MOVS     r2,#0x96              ;1002
0017dc  2101              MOVS     r1,#1                 ;1002
0017de  4865              LDR      r0,|L1.6516|
0017e0  f7fffffe          BL       gran
0017e4  f9bb1000          LDRSH    r1,[r11,#0]           ;1003  ; CAP_WRK_CURR
0017e8  f44f70ee          MOV      r0,#0x1dc             ;1003
                  |L1.6124|
0017ec  f7fffffe          BL       lc640_write_int
                  |L1.6128|
0017f0  e031              B        |L1.6230|
                  |L1.6130|
0017f2  7828              LDRB     r0,[r5,#0]            ;1132  ; work_stat
0017f4  bb78              CBNZ     r0,|L1.6230|
0017f6  f8bb0000          LDRH     r0,[r11,#0]           ;1134  ; CAP_WRK_CURR
0017fa  1e40              SUBS     r0,r0,#1              ;1134
                  |L1.6140|
0017fc  f8ab0000          STRH     r0,[r11,#0]           ;1134
001800  e7eb              B        |L1.6106|
                  |L1.6146|
001802  485d              LDR      r0,|L1.6520|
001804  e000              B        |L1.6152|
                  |L1.6150|
001806  485d              LDR      r0,|L1.6524|
                  |L1.6152|
001808  8004              STRH     r4,[r0,#0]            ;1149
00180a  e024              B        |L1.6230|
                  |L1.6156|
00180c  495c              LDR      r1,|L1.6528|
00180e  eb040084          ADD      r0,r4,r4,LSL #2       ;1154
001812  0040              LSLS     r0,r0,#1              ;1154
001814  8008              STRH     r0,[r1,#0]            ;1154
001816  e01e              B        |L1.6230|
                  |L1.6168|
001818  495a              LDR      r1,|L1.6532|
00181a  e000              B        |L1.6174|
                  |L1.6172|
00181c  495a              LDR      r1,|L1.6536|
                  |L1.6174|
00181e  800c              STRH     r4,[r1,#0]            ;1159
001820  2101              MOVS     r1,#1                 ;1160
001822  7001              STRB     r1,[r0,#0]            ;1160
001824  e015              B        |L1.6226|
                  |L1.6182|
001826  2c01              CMP      r4,#1                 ;1173
001828  d001              BEQ      |L1.6190|
00182a  b17c              CBZ      r4,|L1.6220|
00182c  e011              B        |L1.6226|
                  |L1.6190|
00182e  7828              LDRB     r0,[r5,#0]            ;1175  ; work_stat
001830  2802              CMP      r0,#2                 ;1175
001832  d00e              BEQ      |L1.6226|
001834  2002              MOVS     r0,#2                 ;1177
001836  7028              STRB     r0,[r5,#0]            ;1177
001838  4854              LDR      r0,|L1.6540|
00183a  6006              STR      r6,[r0,#0]            ;1179  ; time_proc
00183c  4854              LDR      r0,|L1.6544|
00183e  6801              LDR      r1,[r0,#0]            ;1179  ; T_PROC_PS
001840  4854              LDR      r0,|L1.6548|
001842  6001              STR      r1,[r0,#0]            ;1180  ; time_proc_remain
001844  f7fffffe          BL       restart_on_PS
001848  2101              MOVS     r1,#1                 ;1181
00184a  e028              B        |L1.6302|
                  |L1.6220|
00184c  7828              LDRB     r0,[r5,#0]            ;1186  ; work_stat
00184e  2802              CMP      r0,#2                 ;1186
001850  d015              BEQ      |L1.6270|
                  |L1.6226|
001852  f8a98000          STRH     r8,[r9,#0]            ;1192
                  |L1.6230|
001856  4c50              LDR      r4,|L1.6552|
001858  4d50              LDR      r5,|L1.6556|
00185a  6820              LDR      r0,[r4,#0]            ;1218  ; T_PROC_GS
00185c  6829              LDR      r1,[r5,#0]            ;1218  ; T_PROC_MAX
00185e  4288              CMP      r0,r1                 ;1218
001860  dc01              BGT      |L1.6246|
001862  281e              CMP      r0,#0x1e              ;1218
001864  da2e              BGE      |L1.6340|
                  |L1.6246|
001866  4288              CMP      r0,r1                 ;1220
001868  dd1d              BLE      |L1.6310|
00186a  1c49              ADDS     r1,r1,#1              ;1220
00186c  6021              STR      r1,[r4,#0]            ;1220  ; T_PROC_GS
00186e  e01e              B        |L1.6318|
                  |L1.6256|
001870  2c01              CMP      r4,#1                 ;1196
001872  d008              BEQ      |L1.6278|
001874  2c00              CMP      r4,#0                 ;1206
001876  d1ec              BNE      |L1.6226|
001878  7828              LDRB     r0,[r5,#0]            ;1208  ; work_stat
00187a  2801              CMP      r0,#1                 ;1208
00187c  d1e9              BNE      |L1.6226|
                  |L1.6270|
00187e  702e              STRB     r6,[r5,#0]            ;1210
001880  f7fffffe          BL       restart_off
001884  e7e5              B        |L1.6226|
                  |L1.6278|
001886  7828              LDRB     r0,[r5,#0]            ;1198  ; work_stat
001888  2801              CMP      r0,#1                 ;1198
00188a  d0e2              BEQ      |L1.6226|
00188c  2001              MOVS     r0,#1                 ;1200
00188e  7028              STRB     r0,[r5,#0]            ;1200
001890  483e              LDR      r0,|L1.6540|
001892  6006              STR      r6,[r0,#0]            ;1202  ; time_proc
001894  4840              LDR      r0,|L1.6552|
001896  6801              LDR      r1,[r0,#0]            ;1202  ; T_PROC_GS
001898  483e              LDR      r0,|L1.6548|
00189a  6001              STR      r1,[r0,#0]            ;1203  ; time_proc_remain
00189c  2100              MOVS     r1,#0                 ;1203
                  |L1.6302|
00189e  20ea              MOVS     r0,#0xea              ;1203
0018a0  f7fffffe          BL       lc640_write_int
0018a4  e7d5              B        |L1.6226|
                  |L1.6310|
0018a6  281e              CMP      r0,#0x1e              ;1221
0018a8  da01              BGE      |L1.6318|
0018aa  201d              MOVS     r0,#0x1d              ;1221
0018ac  6020              STR      r0,[r4,#0]            ;1221  ; T_PROC_GS
                  |L1.6318|
0018ae  6820              LDR      r0,[r4,#0]            ;1222  ; T_PROC_GS
0018b0  b201              SXTH     r1,r0                 ;1222
0018b2  20d8              MOVS     r0,#0xd8              ;1222
0018b4  f7fffffe          BL       lc640_write_int
0018b8  4839              LDR      r0,|L1.6560|
0018ba  2101              MOVS     r1,#1                 ;1223
0018bc  8001              STRH     r1,[r0,#0]            ;1223
0018be  20ee              MOVS     r0,#0xee              ;1224
0018c0  f7fffffe          BL       lc640_write_int
                  |L1.6340|
0018c4  6820              LDR      r0,[r4,#0]            ;1226  ; T_PROC_GS
0018c6  6829              LDR      r1,[r5,#0]            ;1226  ; T_PROC_MAX
0018c8  4288              CMP      r0,r1                 ;1226
0018ca  dc07              BGT      |L1.6364|
0018cc  281e              CMP      r0,#0x1e              ;1226
0018ce  db05              BLT      |L1.6364|
0018d0  4833              LDR      r0,|L1.6560|
0018d2  4631              MOV      r1,r6                 ;1228
0018d4  8006              STRH     r6,[r0,#0]            ;1228
0018d6  20ee              MOVS     r0,#0xee              ;1229
0018d8  f7fffffe          BL       lc640_write_int
                  |L1.6364|
0018dc  4c2c              LDR      r4,|L1.6544|
0018de  6829              LDR      r1,[r5,#0]            ;1232  ; T_PROC_MAX
0018e0  6820              LDR      r0,[r4,#0]            ;1232  ; T_PROC_PS
0018e2  4288              CMP      r0,r1                 ;1232
0018e4  dc01              BGT      |L1.6378|
0018e6  281e              CMP      r0,#0x1e              ;1232
0018e8  da13              BGE      |L1.6418|
                  |L1.6378|
0018ea  4288              CMP      r0,r1                 ;1234
0018ec  dd02              BLE      |L1.6388|
0018ee  1c49              ADDS     r1,r1,#1              ;1234
0018f0  6021              STR      r1,[r4,#0]            ;1234  ; T_PROC_PS
0018f2  e003              B        |L1.6396|
                  |L1.6388|
0018f4  281e              CMP      r0,#0x1e              ;1235
0018f6  da01              BGE      |L1.6396|
0018f8  201d              MOVS     r0,#0x1d              ;1235
0018fa  6020              STR      r0,[r4,#0]            ;1235  ; T_PROC_PS
                  |L1.6396|
0018fc  6820              LDR      r0,[r4,#0]            ;1236  ; T_PROC_PS
0018fe  b201              SXTH     r1,r0                 ;1236
001900  20dc              MOVS     r0,#0xdc              ;1236
001902  f7fffffe          BL       lc640_write_int
001906  4827              LDR      r0,|L1.6564|
001908  2101              MOVS     r1,#1                 ;1237
00190a  8001              STRH     r1,[r0,#0]            ;1237
00190c  20f0              MOVS     r0,#0xf0              ;1238
00190e  f7fffffe          BL       lc640_write_int
                  |L1.6418|
001912  6820              LDR      r0,[r4,#0]            ;1240  ; T_PROC_PS
001914  6829              LDR      r1,[r5,#0]            ;1240  ; T_PROC_MAX
001916  4288              CMP      r0,r1                 ;1240
001918  dc07              BGT      |L1.6442|
00191a  281e              CMP      r0,#0x1e              ;1240
00191c  db05              BLT      |L1.6442|
00191e  4821              LDR      r0,|L1.6564|
001920  4631              MOV      r1,r6                 ;1242
001922  8006              STRH     r6,[r0,#0]            ;1242
001924  20f0              MOVS     r0,#0xf0              ;1243
001926  f7fffffe          BL       lc640_write_int
                  |L1.6442|
00192a  481f              LDR      r0,|L1.6568|
00192c  463a              MOV      r2,r7                 ;1246
00192e  9904              LDR      r1,[sp,#0x10]         ;1246
001930  8800              LDRH     r0,[r0,#0]            ;1246  ; MODBUS_ADRESS
001932  b2c0              UXTB     r0,r0                 ;1246
001934  f7fffffe          BL       modbus_hold_register_transmit
001938  2f5a              CMP      r7,#0x5a              ;1249
                  |L1.6458|
00193a  f43faccb          BEQ      |L1.4820|
00193e  2f5b              CMP      r7,#0x5b              ;1249
001940  d0fb              BEQ      |L1.6458|
001942  2f5c              CMP      r7,#0x5c              ;1249
001944  d0f9              BEQ      |L1.6458|
001946  2f5d              CMP      r7,#0x5d              ;1249
001948  d0f7              BEQ      |L1.6458|
00194a  4818              LDR      r0,|L1.6572|
00194c  8800              LDRH     r0,[r0,#0]            ;1249  ; EE_WRITE_CNT
00194e  b00b              ADD      sp,sp,#0x2c           ;1249
001950  1c40              ADDS     r0,r0,#1              ;1249
001952  e8bd4ff0          POP      {r4-r11,lr}           ;1249
001956  b201              SXTH     r1,r0                 ;1249
001958  204c              MOVS     r0,#0x4c              ;1249
00195a  f7ffbffe          B.W      lc640_write_int
;;;1260   
                          ENDP

00195e  0000              DCW      0x0000
                  |L1.6496|
                          DCD      CAP_ZAR_TIME
                  |L1.6500|
                          DCD      CAP_PAUSE1_TIME
                  |L1.6504|
                          DCD      CAP_RAZR_TIME
                  |L1.6508|
                          DCD      CAP_PAUSE2_TIME
                  |L1.6512|
                          DCD      CAP_MAX_VOLT
                  |L1.6516|
                          DCD      CAP_WRK_CURR
                  |L1.6520|
                          DCD      pwm_u_reg
                  |L1.6524|
                          DCD      pwm_i_reg
                  |L1.6528|
                          DCD      pwm_t_reg
                  |L1.6532|
                          DCD      I_ug_ram
                  |L1.6536|
                          DCD      U_up_ram
                  |L1.6540|
                          DCD      time_proc
                  |L1.6544|
                          DCD      T_PROC_PS
                  |L1.6548|
                          DCD      time_proc_remain
                  |L1.6552|
                          DCD      T_PROC_GS
                  |L1.6556|
                          DCD      T_PROC_MAX
                  |L1.6560|
                          DCD      T_PROC_GS_MODE
                  |L1.6564|
                          DCD      T_PROC_PS_MODE
                  |L1.6568|
                          DCD      MODBUS_ADRESS
                  |L1.6572|
                          DCD      EE_WRITE_CNT

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  modbus_buf
                          %        20

                          AREA ||area_number.4||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.4||, ||.bss||
                  modbus_rx_buffer
                          %        30
                  modbus_an_buffer
                          %        30
                  modbus_registers
                          %        200

                          AREA ||.data||, DATA, ALIGN=1

                  modbus_self_cmnd_cnt
000000  21                DCB      0x21
                  bMODBUS_TIMEOUT
000001  00                DCB      0x00
                  modbus_rx_buffer_ptr
000002  00                DCB      0x00
                  modbus_rx_counter
000003  00                DCB      0x00
                  modbus_cmnd_cnt
000004  00                DCB      0x00
                  modbus_cmnd
000005  00                DCB      0x00
                  modbus_plazma
000006  0000              DCB      0x00,0x00
                  modbus_plazma1
000008  0000              DCB      0x00,0x00
                  modbus_plazma2
00000a  0000              DCB      0x00,0x00
                  modbus_plazma3
00000c  0000              DCB      0x00,0x00

                          AREA ||area_number.7||, DATA, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.data||
                  modbus_crc16
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.8||, DATA, ALIGN=0

                          EXPORTAS ||area_number.8||, ||.data||
                  modbus_timeout_cnt
000000  00                DCB      0x00

                          AREA ||area_number.9||, DATA, ALIGN=1

                          EXPORTAS ||area_number.9||, ||.data||
                  modbusTimeoutInMills
000000  0000              DCB      0x00,0x00
