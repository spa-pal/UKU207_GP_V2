; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\modbus.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\modbus.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\modbus.crf modbus.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CRC16_2 PROC
;;;37     //-----------------------------------------------
;;;38     unsigned short CRC16_2(char* buf, short len)
000000  b570              PUSH     {r4-r6,lr}
;;;39     {
000002  4604              MOV      r4,r0
;;;40     unsigned short crc = 0xFFFF;
000004  f64f70ff          MOV      r0,#0xffff
;;;41     short pos;
;;;42     short i;
;;;43     
;;;44     for (pos = 0; pos < len; pos++)
000008  2200              MOVS     r2,#0
;;;45       	{
;;;46         	crc ^= (unsigned short)buf[pos];          // XOR byte into least sig. byte of crc
;;;47     
;;;48         	for ( i = 8; i != 0; i--) 
;;;49     		{    // Loop over each bit
;;;50           	if ((crc & 0x0001) != 0) 
;;;51     			{      // If the LSB is set
;;;52             		crc >>= 1;                    // Shift right and XOR 0xA001
;;;53             		crc ^= 0xA001;
00000a  f24a0501          MOV      r5,#0xa001
00000e  e00d              B        |L1.44|
                  |L1.16|
000010  5ca3              LDRB     r3,[r4,r2]            ;46
000012  4058              EORS     r0,r0,r3              ;46
000014  2308              MOVS     r3,#8                 ;48
                  |L1.22|
000016  07c6              LSLS     r6,r0,#31             ;50
;;;54           		}
;;;55           	else  crc >>= 1;                    // Just shift right
000018  ea4f0050          LSR      r0,r0,#1
00001c  d000              BEQ      |L1.32|
00001e  4068              EORS     r0,r0,r5              ;53
                  |L1.32|
000020  1e5b              SUBS     r3,r3,#1              ;48
000022  b21b              SXTH     r3,r3                 ;48
000024  2b00              CMP      r3,#0                 ;48
000026  d1f6              BNE      |L1.22|
000028  1c52              ADDS     r2,r2,#1              ;44
00002a  b212              SXTH     r2,r2                 ;44
                  |L1.44|
00002c  428a              CMP      r2,r1                 ;44
00002e  dbef              BLT      |L1.16|
;;;56         		}
;;;57       	}
;;;58       // Note, this number has low and high bytes swapped, so use it accordingly (or swap bytes)
;;;59     return crc;
;;;60     }
000030  bd70              POP      {r4-r6,pc}
;;;61     
                          ENDP

                  modbus_hold_register_transmit PROC
;;;1300   //-----------------------------------------------
;;;1301   void modbus_hold_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000032  e92d43f0          PUSH     {r4-r9,lr}
;;;1302   {
000036  4681              MOV      r9,r0
;;;1303   char modbus_registers[120];
;;;1304   char modbus_tx_buff[100];
;;;1305   unsigned short crc_temp;
;;;1306   char i;
;;;1307   
;;;1308   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
000038  48f9              LDR      r0,|L1.1056|
00003a  b0b7              SUB      sp,sp,#0xdc           ;1302
;;;1309   modbus_registers[1]=(char)(I_ug%256);
;;;1310   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
;;;1311   modbus_registers[3]=(char)(U_up%256);
;;;1312   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
;;;1313   modbus_registers[5]=(char)(U_maxg%256);
;;;1314   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1315   modbus_registers[7]=(char)(I_maxp%256);
;;;1316   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1317   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1318   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1319   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1320   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
;;;1321   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00003c  f44f6861          MOV      r8,#0xe10
000040  f9b00000          LDRSH    r0,[r0,#0]            ;1308  ; I_ug
000044  17c3              ASRS     r3,r0,#31             ;1308
000046  eb006313          ADD      r3,r0,r3,LSR #24      ;1308
00004a  121c              ASRS     r4,r3,#8              ;1308
00004c  f88d4000          STRB     r4,[sp,#0]            ;1308
000050  f88d0001          STRB     r0,[sp,#1]            ;1309
000054  48f3              LDR      r0,|L1.1060|
000056  f9b00000          LDRSH    r0,[r0,#0]            ;1310  ; U_up
00005a  17c3              ASRS     r3,r0,#31             ;1310
00005c  eb006313          ADD      r3,r0,r3,LSR #24      ;1310
000060  121c              ASRS     r4,r3,#8              ;1310
000062  f88d4002          STRB     r4,[sp,#2]            ;1310
000066  f88d0003          STRB     r0,[sp,#3]            ;1311
00006a  48ef              LDR      r0,|L1.1064|
00006c  f9b00000          LDRSH    r0,[r0,#0]            ;1312  ; U_maxg
000070  17c3              ASRS     r3,r0,#31             ;1312
000072  eb006313          ADD      r3,r0,r3,LSR #24      ;1312
000076  121c              ASRS     r4,r3,#8              ;1312
000078  f88d4004          STRB     r4,[sp,#4]            ;1312
00007c  f88d0005          STRB     r0,[sp,#5]            ;1313
000080  48ea              LDR      r0,|L1.1068|
000082  f9b00000          LDRSH    r0,[r0,#0]            ;1314  ; I_maxp
000086  17c3              ASRS     r3,r0,#31             ;1314
000088  eb006313          ADD      r3,r0,r3,LSR #24      ;1314
00008c  121c              ASRS     r4,r3,#8              ;1314
00008e  f88d4006          STRB     r4,[sp,#6]            ;1314
000092  f88d0007          STRB     r0,[sp,#7]            ;1315
000096  48e6              LDR      r0,|L1.1072|
000098  233c              MOVS     r3,#0x3c              ;1316
00009a  6804              LDR      r4,[r0,#0]            ;1316  ; T_PROC_GS
00009c  fb94f5f3          SDIV     r5,r4,r3              ;1316
0000a0  fb034015          MLS      r0,r3,r5,r4           ;1316
0000a4  17c6              ASRS     r6,r0,#31             ;1316
0000a6  eb006616          ADD      r6,r0,r6,LSR #24      ;1316
0000aa  1237              ASRS     r7,r6,#8              ;1316
0000ac  f88d7008          STRB     r7,[sp,#8]            ;1316
0000b0  f88d0009          STRB     r0,[sp,#9]            ;1317
0000b4  fb95f0f3          SDIV     r0,r5,r3              ;1318
0000b8  fb035010          MLS      r0,r3,r0,r5           ;1318
0000bc  17c5              ASRS     r5,r0,#31             ;1318
0000be  eb006515          ADD      r5,r0,r5,LSR #24      ;1318
0000c2  122e              ASRS     r6,r5,#8              ;1318
0000c4  f88d600a          STRB     r6,[sp,#0xa]          ;1318
0000c8  f88d000b          STRB     r0,[sp,#0xb]          ;1319
0000cc  f44f2761          MOV      r7,#0xe1000           ;1320
0000d0  fb94f0f7          SDIV     r0,r4,r7              ;1320
0000d4  f88d000c          STRB     r0,[sp,#0xc]          ;1320
0000d8  fb94f0f8          SDIV     r0,r4,r8
0000dc  f88d000d          STRB     r0,[sp,#0xd]
;;;1322   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0000e0  48d4              LDR      r0,|L1.1076|
0000e2  6804              LDR      r4,[r0,#0]  ; T_PROC_PS
0000e4  fb94f5f3          SDIV     r5,r4,r3
0000e8  fb034015          MLS      r0,r3,r5,r4
0000ec  17c6              ASRS     r6,r0,#31
0000ee  eb006616          ADD      r6,r0,r6,LSR #24
0000f2  ea4f2c26          ASR      r12,r6,#8
0000f6  f88dc00e          STRB     r12,[sp,#0xe]
;;;1323   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0000fa  f88d000f          STRB     r0,[sp,#0xf]
;;;1324   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0000fe  fb95f0f3          SDIV     r0,r5,r3
000102  fb035010          MLS      r0,r3,r0,r5
000106  17c3              ASRS     r3,r0,#31
000108  eb006313          ADD      r3,r0,r3,LSR #24
00010c  121d              ASRS     r5,r3,#8
00010e  f88d5010          STRB     r5,[sp,#0x10]
;;;1325   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
000112  f88d0011          STRB     r0,[sp,#0x11]
;;;1326   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
000116  fb94f0f7          SDIV     r0,r4,r7
00011a  f88d0012          STRB     r0,[sp,#0x12]
;;;1327   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
00011e  fb94f0f8          SDIV     r0,r4,r8
000122  f88d0013          STRB     r0,[sp,#0x13]
;;;1328   modbus_registers[20]=0;								//Πεγ60
000126  2000              MOVS     r0,#0
;;;1329   modbus_registers[21]=0;
;;;1330   if(work_stat==wsPS)modbus_registers[21]=1;
000128  4bc3              LDR      r3,|L1.1080|
00012a  f88d0014          STRB     r0,[sp,#0x14]         ;1328
00012e  f88d0015          STRB     r0,[sp,#0x15]         ;1329
000132  781c              LDRB     r4,[r3,#0]  ; work_stat
000134  2301              MOVS     r3,#1
000136  2c02              CMP      r4,#2
000138  d101              BNE      |L1.318|
00013a  f88d3015          STRB     r3,[sp,#0x15]
                  |L1.318|
;;;1331   modbus_registers[22]=0;								//Πεγ61
00013e  f88d0016          STRB     r0,[sp,#0x16]
;;;1332   modbus_registers[23]=0;
000142  f88d0017          STRB     r0,[sp,#0x17]
;;;1333   if(work_stat==wsGS)modbus_registers[23]=1;
000146  2c01              CMP      r4,#1
000148  d101              BNE      |L1.334|
00014a  f88d3017          STRB     r3,[sp,#0x17]
                  |L1.334|
;;;1334   modbus_registers[24]=0;								//Πεγ62
;;;1335   modbus_registers[25]=0;
;;;1336   if(REV_STAT==rsREW)modbus_registers[25]=1;
00014e  4cbb              LDR      r4,|L1.1084|
000150  f88d0018          STRB     r0,[sp,#0x18]         ;1334
000154  f88d0019          STRB     r0,[sp,#0x19]         ;1335
000158  7824              LDRB     r4,[r4,#0]  ; REV_STAT
00015a  b90c              CBNZ     r4,|L1.352|
00015c  f88d3019          STRB     r3,[sp,#0x19]
                  |L1.352|
;;;1337   modbus_registers[26]=0;								//Πεγ63
000160  f88d001a          STRB     r0,[sp,#0x1a]
;;;1338   modbus_registers[27]=0;
000164  f88d001b          STRB     r0,[sp,#0x1b]
;;;1339   if(AVT_REV_IS_ON)modbus_registers[27]=1;
000168  48b5              LDR      r0,|L1.1088|
00016a  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
00016c  b108              CBZ      r0,|L1.370|
00016e  f88d301b          STRB     r3,[sp,#0x1b]
                  |L1.370|
;;;1340   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000172  48b4              LDR      r0,|L1.1092|
000174  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_FF
000178  17c3              ASRS     r3,r0,#31
00017a  eb006313          ADD      r3,r0,r3,LSR #24
00017e  121c              ASRS     r4,r3,#8
000180  f88d401c          STRB     r4,[sp,#0x1c]
;;;1341   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
000184  f88d001d          STRB     r0,[sp,#0x1d]
;;;1342   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
000188  48af              LDR      r0,|L1.1096|
00018a  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_REW
00018e  17c3              ASRS     r3,r0,#31
000190  eb006313          ADD      r3,r0,r3,LSR #24
000194  121c              ASRS     r4,r3,#8
000196  f88d401e          STRB     r4,[sp,#0x1e]
;;;1343   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00019a  f88d001f          STRB     r0,[sp,#0x1f]
;;;1344   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00019e  48ab              LDR      r0,|L1.1100|
0001a0  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_PAUSE
0001a4  17c3              ASRS     r3,r0,#31
0001a6  eb006313          ADD      r3,r0,r3,LSR #24
0001aa  121c              ASRS     r4,r3,#8
0001ac  f88d4020          STRB     r4,[sp,#0x20]
;;;1345   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
0001b0  f88d0021          STRB     r0,[sp,#0x21]
;;;1346   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
0001b4  48a6              LDR      r0,|L1.1104|
0001b6  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_FF
0001ba  17c3              ASRS     r3,r0,#31
0001bc  eb006313          ADD      r3,r0,r3,LSR #24
0001c0  121c              ASRS     r4,r3,#8
0001c2  f88d4022          STRB     r4,[sp,#0x22]
;;;1347   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
0001c6  f88d0023          STRB     r0,[sp,#0x23]
;;;1348   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
0001ca  48a2              LDR      r0,|L1.1108|
0001cc  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_REW
0001d0  17c3              ASRS     r3,r0,#31
0001d2  eb006313          ADD      r3,r0,r3,LSR #24
0001d6  121c              ASRS     r4,r3,#8
0001d8  f88d4024          STRB     r4,[sp,#0x24]
;;;1349   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
0001dc  f88d0025          STRB     r0,[sp,#0x25]
;;;1350   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
0001e0  489d              LDR      r0,|L1.1112|
0001e2  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_FF
0001e6  17c3              ASRS     r3,r0,#31
0001e8  eb006313          ADD      r3,r0,r3,LSR #24
0001ec  121c              ASRS     r4,r3,#8
0001ee  f88d4026          STRB     r4,[sp,#0x26]
;;;1351   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
0001f2  f88d0027          STRB     r0,[sp,#0x27]
;;;1352   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
0001f6  4899              LDR      r0,|L1.1116|
0001f8  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_REW
0001fc  17c3              ASRS     r3,r0,#31
0001fe  eb006313          ADD      r3,r0,r3,LSR #24
000202  121c              ASRS     r4,r3,#8
000204  f88d4028          STRB     r4,[sp,#0x28]
;;;1353   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
000208  f88d0029          STRB     r0,[sp,#0x29]
;;;1354   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
00020c  4894              LDR      r0,|L1.1120|
00020e  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_ZAR_TIME
000212  17c3              ASRS     r3,r0,#31
000214  eb006313          ADD      r3,r0,r3,LSR #24
000218  121c              ASRS     r4,r3,#8
00021a  f88d402a          STRB     r4,[sp,#0x2a]
;;;1355   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
00021e  f88d002b          STRB     r0,[sp,#0x2b]
;;;1356   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
000222  4890              LDR      r0,|L1.1124|
000224  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
000228  17c3              ASRS     r3,r0,#31
00022a  eb006313          ADD      r3,r0,r3,LSR #24
00022e  121c              ASRS     r4,r3,#8
000230  f88d402c          STRB     r4,[sp,#0x2c]
;;;1357   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
000234  f88d002d          STRB     r0,[sp,#0x2d]
;;;1358   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
000238  488b              LDR      r0,|L1.1128|
00023a  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
00023e  17c3              ASRS     r3,r0,#31
000240  eb006313          ADD      r3,r0,r3,LSR #24
000244  121c              ASRS     r4,r3,#8
000246  f88d402e          STRB     r4,[sp,#0x2e]
;;;1359   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
00024a  f88d002f          STRB     r0,[sp,#0x2f]
;;;1360   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
00024e  4887              LDR      r0,|L1.1132|
000250  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
000254  17c3              ASRS     r3,r0,#31
000256  eb006313          ADD      r3,r0,r3,LSR #24
00025a  121c              ASRS     r4,r3,#8
00025c  f88d4030          STRB     r4,[sp,#0x30]
;;;1361   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
000260  f88d0031          STRB     r0,[sp,#0x31]
;;;1362   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
000264  4882              LDR      r0,|L1.1136|
000266  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_MAX_VOLT
00026a  17c3              ASRS     r3,r0,#31
00026c  eb006313          ADD      r3,r0,r3,LSR #24
000270  121c              ASRS     r4,r3,#8
000272  f88d4032          STRB     r4,[sp,#0x32]
;;;1363   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
000276  f88d0033          STRB     r0,[sp,#0x33]
;;;1364   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
00027a  487e              LDR      r0,|L1.1140|
00027c  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_WRK_CURR
;;;1365   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
;;;1366   
;;;1367   modbus_tx_buff[0]=adr;
000280  f88d9078          STRB     r9,[sp,#0x78]
000284  17c3              ASRS     r3,r0,#31             ;1364
000286  eb006313          ADD      r3,r0,r3,LSR #24      ;1364
00028a  121c              ASRS     r4,r3,#8              ;1364
00028c  f88d4034          STRB     r4,[sp,#0x34]         ;1364
000290  f88d0035          STRB     r0,[sp,#0x35]         ;1365
;;;1368   modbus_tx_buff[1]=func;
000294  f88d1079          STRB     r1,[sp,#0x79]
;;;1369   modbus_tx_buff[2]=(char)(reg_adr/256);
000298  0a10              LSRS     r0,r2,#8
00029a  f88d007a          STRB     r0,[sp,#0x7a]
;;;1370   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1371   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1372   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1373   
;;;1374   
;;;1375   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
00029e  4668              MOV      r0,sp
0002a0  eb000042          ADD      r0,r0,r2,LSL #1
0002a4  f88d207b          STRB     r2,[sp,#0x7b]         ;1370
0002a8  f8300c02          LDRH     r0,[r0,#-2]
0002ac  f8ad007c          STRH     r0,[sp,#0x7c]
;;;1376   
;;;1377   crc_temp=CRC16_2(modbus_tx_buff,6);
0002b0  2106              MOVS     r1,#6
0002b2  a81e              ADD      r0,sp,#0x78
0002b4  f7fffffe          BL       CRC16_2
;;;1378   
;;;1379   modbus_tx_buff[6]=crc_temp%256;
0002b8  f88d007e          STRB     r0,[sp,#0x7e]
;;;1380   modbus_tx_buff[7]=crc_temp/256;
0002bc  0a00              LSRS     r0,r0,#8
0002be  f88d007f          STRB     r0,[sp,#0x7f]
;;;1381   
;;;1382   for (i=0;i<8;i++)
0002c2  2400              MOVS     r4,#0
0002c4  ad1e              ADD      r5,sp,#0x78           ;1304
                  |L1.710|
;;;1383   	{
;;;1384   	putchar0(modbus_tx_buff[i]);
0002c6  5d28              LDRB     r0,[r5,r4]
0002c8  f7fffffe          BL       putchar0
0002cc  1c64              ADDS     r4,r4,#1              ;1382
0002ce  b2e4              UXTB     r4,r4                 ;1382
0002d0  2c08              CMP      r4,#8                 ;1382
0002d2  d3f8              BCC      |L1.710|
;;;1385   	}
;;;1386   for (i=0;i<8;i++)
0002d4  2400              MOVS     r4,#0
                  |L1.726|
;;;1387   	{
;;;1388   	putchar_sc16is700(modbus_tx_buff[i]);
0002d6  5d28              LDRB     r0,[r5,r4]
0002d8  f7fffffe          BL       putchar_sc16is700
0002dc  1c64              ADDS     r4,r4,#1              ;1386
0002de  b2e4              UXTB     r4,r4                 ;1386
0002e0  2c08              CMP      r4,#8                 ;1386
0002e2  d3f8              BCC      |L1.726|
;;;1389   	}
;;;1390   }	
0002e4  b037              ADD      sp,sp,#0xdc
0002e6  e8bd83f0          POP      {r4-r9,pc}
;;;1391   
                          ENDP

                  modbus_input_registers_transmit PROC
;;;1056   //-----------------------------------------------
;;;1057   void modbus_input_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
0002ea  e92d4ff0          PUSH     {r4-r11,lr}
;;;1058   {
0002ee  4683              MOV      r11,r0
;;;1059   //char modbus_registers[110];
;;;1060   char modbus_tx_buff[200];
;;;1061   unsigned short crc_temp;
;;;1062   char i;
;;;1063   /*
;;;1064   load_U=1234;
;;;1065   load_I=5678;
;;;1066   time_proc=361233UL;//1357;
;;;1067   time_proc_remain=722444UL;//1357;
;;;1068   
;;;1069   bVOLT_IS_NOT_DOWN=0;
;;;1070   bVOLT_IS_NOT_UP=1;	*/
;;;1071   
;;;1072   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
0002f0  4861              LDR      r0,|L1.1144|
0002f2  468e              MOV      lr,r1                 ;1058
0002f4  4692              MOV      r10,r2                ;1058
0002f6  f9b01000          LDRSH    r1,[r0,#0]  ; load_U
0002fa  b0b3              SUB      sp,sp,#0xcc           ;1058
0002fc  17c8              ASRS     r0,r1,#31
0002fe  eb016210          ADD      r2,r1,r0,LSR #24
000302  485e              LDR      r0,|L1.1148|
000304  461c              MOV      r4,r3                 ;1058
000306  1213              ASRS     r3,r2,#8
000308  f8ddc0f0          LDR      r12,[sp,#0xf0]
00030c  7003              STRB     r3,[r0,#0]
;;;1073   modbus_registers[1]=(char)(load_U%256);
00030e  7041              STRB     r1,[r0,#1]
;;;1074   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
000310  495b              LDR      r1,|L1.1152|
;;;1075   modbus_registers[3]=(char)(load_I%256);
;;;1076   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
;;;1077   modbus_registers[5]=(char)((time_proc%60)%256);
;;;1078   modbus_registers[6]=(char)(((time_proc/60)%60)/256);		//Πεγ4
;;;1079   modbus_registers[7]=(char)(((time_proc/60)%60)%256);
;;;1080   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
000312  f44f2961          MOV      r9,#0xe1000
;;;1081   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000316  f44f6861          MOV      r8,#0xe10
00031a  f9b11000          LDRSH    r1,[r1,#0]            ;1074  ; load_I
00031e  17ca              ASRS     r2,r1,#31             ;1074
000320  eb016212          ADD      r2,r1,r2,LSR #24      ;1074
000324  1213              ASRS     r3,r2,#8              ;1074
000326  7083              STRB     r3,[r0,#2]            ;1074
000328  70c1              STRB     r1,[r0,#3]            ;1075
00032a  4956              LDR      r1,|L1.1156|
00032c  223c              MOVS     r2,#0x3c              ;1076
00032e  680b              LDR      r3,[r1,#0]            ;1076  ; time_proc
000330  fb93f5f2          SDIV     r5,r3,r2              ;1076
000334  fb023115          MLS      r1,r2,r5,r3           ;1076
000338  17ce              ASRS     r6,r1,#31             ;1076
00033a  eb016716          ADD      r7,r1,r6,LSR #24      ;1076
00033e  123e              ASRS     r6,r7,#8              ;1076
000340  7106              STRB     r6,[r0,#4]            ;1076
000342  7141              STRB     r1,[r0,#5]            ;1077
000344  fb95f1f2          SDIV     r1,r5,r2              ;1078
000348  fb025111          MLS      r1,r2,r1,r5           ;1078
00034c  17cd              ASRS     r5,r1,#31             ;1078
00034e  eb016515          ADD      r5,r1,r5,LSR #24      ;1078
000352  122e              ASRS     r6,r5,#8              ;1078
000354  7186              STRB     r6,[r0,#6]            ;1078
000356  71c1              STRB     r1,[r0,#7]            ;1079
000358  fb93f1f9          SDIV     r1,r3,r9              ;1080
00035c  7201              STRB     r1,[r0,#8]            ;1080
00035e  fb93f1f8          SDIV     r1,r3,r8
000362  7241              STRB     r1,[r0,#9]
;;;1082   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
000364  4948              LDR      r1,|L1.1160|
000366  680b              LDR      r3,[r1,#0]  ; time_proc_remain
000368  fb93f7f2          SDIV     r7,r3,r2
00036c  fb023117          MLS      r1,r2,r7,r3
000370  17cd              ASRS     r5,r1,#31
000372  eb016515          ADD      r5,r1,r5,LSR #24
000376  122e              ASRS     r6,r5,#8
000378  7286              STRB     r6,[r0,#0xa]
;;;1083   modbus_registers[11]=(char)((time_proc_remain%60)%256);
00037a  72c1              STRB     r1,[r0,#0xb]
;;;1084   modbus_registers[12]=(char)(((time_proc_remain/60)%60)/256);//Πεγ7
00037c  fb97f1f2          SDIV     r1,r7,r2
000380  fb027111          MLS      r1,r2,r1,r7
000384  17ca              ASRS     r2,r1,#31
000386  eb016212          ADD      r2,r1,r2,LSR #24
00038a  1215              ASRS     r5,r2,#8
00038c  7305              STRB     r5,[r0,#0xc]
;;;1085   modbus_registers[13]=(char)(((time_proc_remain/60)%60)%256);
00038e  7341              STRB     r1,[r0,#0xd]
;;;1086   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
000390  fb93f1f9          SDIV     r1,r3,r9
000394  7381              STRB     r1,[r0,#0xe]
;;;1087   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
000396  fb93f1f8          SDIV     r1,r3,r8
00039a  73c1              STRB     r1,[r0,#0xf]
;;;1088   modbus_registers[16]=(char)((CAP_COUNTER)/256);			//Πεγ9
00039c  493b              LDR      r1,|L1.1164|
00039e  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_COUNTER
0003a2  17ca              ASRS     r2,r1,#31
0003a4  eb016212          ADD      r2,r1,r2,LSR #24
0003a8  1213              ASRS     r3,r2,#8
0003aa  7403              STRB     r3,[r0,#0x10]
;;;1089   modbus_registers[17]=(char)((CAP_COUNTER)%256);
0003ac  7441              STRB     r1,[r0,#0x11]
;;;1090   modbus_registers[18]=(char)((CAP_TIME_SEC)/256);			//Πεγ10
0003ae  4938              LDR      r1,|L1.1168|
0003b0  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_SEC
0003b4  17ca              ASRS     r2,r1,#31
0003b6  eb016212          ADD      r2,r1,r2,LSR #24
0003ba  1213              ASRS     r3,r2,#8
0003bc  7483              STRB     r3,[r0,#0x12]
;;;1091   modbus_registers[19]=(char)((CAP_TIME_SEC)%256);
0003be  74c1              STRB     r1,[r0,#0x13]
;;;1092   modbus_registers[20]=(char)((CAP_TIME_MIN)/256);			//Πεγ11
0003c0  4934              LDR      r1,|L1.1172|
0003c2  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_MIN
0003c6  17ca              ASRS     r2,r1,#31
0003c8  eb016212          ADD      r2,r1,r2,LSR #24
0003cc  1213              ASRS     r3,r2,#8
0003ce  7503              STRB     r3,[r0,#0x14]
;;;1093   modbus_registers[21]=(char)((CAP_TIME_MIN)%256);
0003d0  7541              STRB     r1,[r0,#0x15]
;;;1094   modbus_registers[22]=(char)((CAP_TIME_HOUR)/256);			//Πεγ12
0003d2  4931              LDR      r1,|L1.1176|
0003d4  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_HOUR
0003d8  17ca              ASRS     r2,r1,#31
0003da  eb016212          ADD      r2,r1,r2,LSR #24
0003de  1213              ASRS     r3,r2,#8
0003e0  7583              STRB     r3,[r0,#0x16]
;;;1095   modbus_registers[23]=(char)((CAP_TIME_HOUR)%256);
0003e2  75c1              STRB     r1,[r0,#0x17]
;;;1096   modbus_registers[24]=0;
0003e4  2100              MOVS     r1,#0
;;;1097   modbus_registers[25]=0;										//Πεγ13
;;;1098   if(bVOLT_IS_NOT_DOWN)	modbus_registers[25]=1;
0003e6  4a2d              LDR      r2,|L1.1180|
0003e8  7601              STRB     r1,[r0,#0x18]         ;1096
0003ea  7641              STRB     r1,[r0,#0x19]         ;1097
0003ec  7813              LDRB     r3,[r2,#0]  ; bVOLT_IS_NOT_DOWN
0003ee  2201              MOVS     r2,#1
0003f0  b103              CBZ      r3,|L1.1012|
0003f2  7642              STRB     r2,[r0,#0x19]
                  |L1.1012|
;;;1099   modbus_registers[26]=0;
0003f4  7681              STRB     r1,[r0,#0x1a]
;;;1100   modbus_registers[27]=0;										//Πεγ14
0003f6  76c1              STRB     r1,[r0,#0x1b]
;;;1101   if(bVOLT_IS_NOT_UP)	modbus_registers[27]=1;
0003f8  4929              LDR      r1,|L1.1184|
0003fa  7809              LDRB     r1,[r1,#0]  ; bVOLT_IS_NOT_UP
0003fc  b101              CBZ      r1,|L1.1024|
0003fe  76c2              STRB     r2,[r0,#0x1b]
                  |L1.1024|
000400  491e              LDR      r1,|L1.1148|
;;;1102   								
;;;1103   /*
;;;1104   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
;;;1105   modbus_registers[17]=(char)(I_ug%256);
;;;1106   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
;;;1107   modbus_registers[19]=(char)(U_up%256);
;;;1108   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
;;;1109   modbus_registers[21]=(char)(U_maxg%256);
;;;1110   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
;;;1111   modbus_registers[23]=(char)(I_maxp%256);
;;;1112   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
;;;1113   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
;;;1114   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
;;;1115   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
;;;1116   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
;;;1117   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
;;;1118   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
;;;1119   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
;;;1120   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
;;;1121   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
;;;1122   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
;;;1123   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
;;;1124   modbus_registers[36]=0;								//Πεγ19
;;;1125   modbus_registers[37]=0;
;;;1126   if(work_stat==wsPS)modbus_registers[37]=1;
;;;1127   modbus_registers[38]=0;								//Πεγ20
;;;1128   modbus_registers[39]=0;
;;;1129   if(work_stat==wsGS)modbus_registers[39]=1;
;;;1130   modbus_registers[40]=0;								//Πεγ21
;;;1131   modbus_registers[41]=0;
;;;1132   if(REV_STAT==rsREW)modbus_registers[41]=1;
;;;1133   modbus_registers[42]=0;								//Πεγ22
;;;1134   modbus_registers[43]=0;
;;;1135   if(AVT_REV_IS_ON)modbus_registers[42]=1;
;;;1136   */
;;;1137   if(prot==MODBUS_RTU_PROT)
000402  f1bc0f00          CMP      r12,#0
;;;1138   	{
;;;1139   	modbus_tx_buff[0]=adr;
;;;1140   	modbus_tx_buff[1]=func;
;;;1141   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1142   	
;;;1143   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-1)*2],reg_quantity*2);
000406  eb01014a          ADD      r1,r1,r10,LSL #1
00040a  d04d              BEQ      |L1.1192|
;;;1144   	
;;;1145   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1146   	
;;;1147   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1148   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1149   	
;;;1150   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1151   		{
;;;1152   		putchar0(modbus_tx_buff[i]);
;;;1153   		}
;;;1154   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1155   		{
;;;1156   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1157   		}
;;;1158   	}
;;;1159   else if(prot==MODBUS_TCP_PROT)
00040c  f1bc0f01          CMP      r12,#1
000410  d102              BNE      |L1.1048|
;;;1160   	{
;;;1161   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-1)*2];
000412  4824              LDR      r0,|L1.1188|
000414  1e89              SUBS     r1,r1,#2
000416  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1048|
;;;1162   	}
;;;1163   }
000418  b033              ADD      sp,sp,#0xcc
00041a  e8bd8ff0          POP      {r4-r11,pc}
00041e  0000              DCW      0x0000
                  |L1.1056|
                          DCD      I_ug
                  |L1.1060|
                          DCD      U_up
                  |L1.1064|
                          DCD      U_maxg
                  |L1.1068|
                          DCD      I_maxp
                  |L1.1072|
                          DCD      T_PROC_GS
                  |L1.1076|
                          DCD      T_PROC_PS
                  |L1.1080|
                          DCD      work_stat
                  |L1.1084|
                          DCD      REV_STAT
                  |L1.1088|
                          DCD      AVT_REV_IS_ON
                  |L1.1092|
                          DCD      AVT_REV_TIME_FF
                  |L1.1096|
                          DCD      AVT_REV_TIME_REW
                  |L1.1100|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.1104|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.1108|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.1112|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.1116|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.1120|
                          DCD      CAP_ZAR_TIME
                  |L1.1124|
                          DCD      CAP_PAUSE1_TIME
                  |L1.1128|
                          DCD      CAP_RAZR_TIME
                  |L1.1132|
                          DCD      CAP_PAUSE2_TIME
                  |L1.1136|
                          DCD      CAP_MAX_VOLT
                  |L1.1140|
                          DCD      CAP_WRK_CURR
                  |L1.1144|
                          DCD      load_U
                  |L1.1148|
                          DCD      ||area_number.4||+0x3c
                  |L1.1152|
                          DCD      load_I
                  |L1.1156|
                          DCD      time_proc
                  |L1.1160|
                          DCD      time_proc_remain
                  |L1.1164|
                          DCD      CAP_COUNTER
                  |L1.1168|
                          DCD      CAP_TIME_SEC
                  |L1.1172|
                          DCD      CAP_TIME_MIN
                  |L1.1176|
                          DCD      CAP_TIME_HOUR
                  |L1.1180|
                          DCD      bVOLT_IS_NOT_DOWN
                  |L1.1184|
                          DCD      bVOLT_IS_NOT_UP
                  |L1.1188|
                          DCD      modbus_tcp_out_ptr
                  |L1.1192|
0004a8  f88db000          STRB     r11,[sp,#0]           ;1139
0004ac  f88de001          STRB     lr,[sp,#1]            ;1140
0004b0  0062              LSLS     r2,r4,#1              ;1141
0004b2  466d              MOV      r5,sp                 ;1143
0004b4  f88d2002          STRB     r2,[sp,#2]            ;1141
0004b8  1e89              SUBS     r1,r1,#2              ;1143
0004ba  1ce8              ADDS     r0,r5,#3              ;1143
0004bc  f7fffffe          BL       __aeabi_memcpy
0004c0  2003              MOVS     r0,#3                 ;1145
0004c2  eb000044          ADD      r0,r0,r4,LSL #1       ;1145
0004c6  b201              SXTH     r1,r0                 ;1145
0004c8  4668              MOV      r0,sp                 ;1145
0004ca  f7fffffe          BL       CRC16_2
0004ce  eb050144          ADD      r1,r5,r4,LSL #1       ;1147
0004d2  2600              MOVS     r6,#0                 ;1150
0004d4  70c8              STRB     r0,[r1,#3]            ;1147
0004d6  0a00              LSRS     r0,r0,#8              ;1148
0004d8  7108              STRB     r0,[r1,#4]            ;1148
0004da  2005              MOVS     r0,#5                 ;1150
0004dc  eb000744          ADD      r7,r0,r4,LSL #1       ;1150
0004e0  e004              B        |L1.1260|
                  |L1.1250|
0004e2  5da8              LDRB     r0,[r5,r6]            ;1152
0004e4  f7fffffe          BL       putchar0
0004e8  1c76              ADDS     r6,r6,#1              ;1150
0004ea  b2f6              UXTB     r6,r6                 ;1150
                  |L1.1260|
0004ec  42b7              CMP      r7,r6                 ;1150
0004ee  d8f8              BHI      |L1.1250|
0004f0  2400              MOVS     r4,#0                 ;1154
0004f2  e004              B        |L1.1278|
                  |L1.1268|
0004f4  5d28              LDRB     r0,[r5,r4]            ;1156
0004f6  f7fffffe          BL       putchar_sc16is700
0004fa  1c64              ADDS     r4,r4,#1              ;1154
0004fc  b2e4              UXTB     r4,r4                 ;1154
                  |L1.1278|
0004fe  42a7              CMP      r7,r4                 ;1154
000500  d8f8              BHI      |L1.1268|
000502  e789              B        |L1.1048|
;;;1164   
                          ENDP

                  modbus_hold_registers_transmit PROC
;;;1393   //-----------------------------------------------
;;;1394   void modbus_hold_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
000504  e92d4ff0          PUSH     {r4-r11,lr}
;;;1395   {
000508  4683              MOV      r11,r0
;;;1396   //char modbus_registers[110];
;;;1397   char modbus_tx_buff[200];
;;;1398   unsigned short crc_temp;
;;;1399   char i;
;;;1400   
;;;1401   //reg_adr=45;
;;;1402   //I_ug=reg_adr;
;;;1403   //U_up=5678;
;;;1404   
;;;1405   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
00050a  48fb              LDR      r0,|L1.2296|
00050c  468e              MOV      lr,r1                 ;1395
00050e  4692              MOV      r10,r2                ;1395
000510  f9b01000          LDRSH    r1,[r0,#0]  ; I_ug
000514  b0b3              SUB      sp,sp,#0xcc           ;1395
000516  17c8              ASRS     r0,r1,#31
000518  eb016210          ADD      r2,r1,r0,LSR #24
00051c  48f7              LDR      r0,|L1.2300|
00051e  461c              MOV      r4,r3                 ;1395
000520  1213              ASRS     r3,r2,#8
000522  f8ddc0f0          LDR      r12,[sp,#0xf0]
000526  7003              STRB     r3,[r0,#0]
;;;1406   modbus_registers[1]=(char)(I_ug%256);
000528  7041              STRB     r1,[r0,#1]
;;;1407   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
00052a  49f5              LDR      r1,|L1.2304|
;;;1408   modbus_registers[3]=(char)(U_up%256);
;;;1409   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
;;;1410   modbus_registers[5]=(char)(U_maxg%256);
;;;1411   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1412   modbus_registers[7]=(char)(I_maxp%256);
;;;1413   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1414   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1415   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1416   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1417   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
00052c  f44f2961          MOV      r9,#0xe1000
;;;1418   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
000530  f44f6861          MOV      r8,#0xe10
000534  f9b11000          LDRSH    r1,[r1,#0]            ;1407  ; U_up
000538  17ca              ASRS     r2,r1,#31             ;1407
00053a  eb016212          ADD      r2,r1,r2,LSR #24      ;1407
00053e  1213              ASRS     r3,r2,#8              ;1407
000540  7083              STRB     r3,[r0,#2]            ;1407
000542  70c1              STRB     r1,[r0,#3]            ;1408
000544  49ef              LDR      r1,|L1.2308|
000546  f9b11000          LDRSH    r1,[r1,#0]            ;1409  ; U_maxg
00054a  17ca              ASRS     r2,r1,#31             ;1409
00054c  eb016212          ADD      r2,r1,r2,LSR #24      ;1409
000550  1213              ASRS     r3,r2,#8              ;1409
000552  7103              STRB     r3,[r0,#4]            ;1409
000554  7141              STRB     r1,[r0,#5]            ;1410
000556  49ec              LDR      r1,|L1.2312|
000558  f9b11000          LDRSH    r1,[r1,#0]            ;1411  ; I_maxp
00055c  17ca              ASRS     r2,r1,#31             ;1411
00055e  eb016212          ADD      r2,r1,r2,LSR #24      ;1411
000562  1213              ASRS     r3,r2,#8              ;1411
000564  7183              STRB     r3,[r0,#6]            ;1411
000566  71c1              STRB     r1,[r0,#7]            ;1412
000568  49e8              LDR      r1,|L1.2316|
00056a  223c              MOVS     r2,#0x3c              ;1413
00056c  680b              LDR      r3,[r1,#0]            ;1413  ; T_PROC_GS
00056e  fb93f7f2          SDIV     r7,r3,r2              ;1413
000572  fb023117          MLS      r1,r2,r7,r3           ;1413
000576  17cd              ASRS     r5,r1,#31             ;1413
000578  eb016515          ADD      r5,r1,r5,LSR #24      ;1413
00057c  122e              ASRS     r6,r5,#8              ;1413
00057e  7206              STRB     r6,[r0,#8]            ;1413
000580  7241              STRB     r1,[r0,#9]            ;1414
000582  fb97f1f2          SDIV     r1,r7,r2              ;1415
000586  fb027111          MLS      r1,r2,r1,r7           ;1415
00058a  17cd              ASRS     r5,r1,#31             ;1415
00058c  eb016515          ADD      r5,r1,r5,LSR #24      ;1415
000590  122e              ASRS     r6,r5,#8              ;1415
000592  7286              STRB     r6,[r0,#0xa]          ;1415
000594  72c1              STRB     r1,[r0,#0xb]          ;1416
000596  fb93f1f9          SDIV     r1,r3,r9              ;1417
00059a  7301              STRB     r1,[r0,#0xc]          ;1417
00059c  fb93f1f8          SDIV     r1,r3,r8
0005a0  7341              STRB     r1,[r0,#0xd]
;;;1419   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0005a2  49db              LDR      r1,|L1.2320|
0005a4  680b              LDR      r3,[r1,#0]  ; T_PROC_PS
0005a6  fb93f7f2          SDIV     r7,r3,r2
0005aa  fb023117          MLS      r1,r2,r7,r3
0005ae  17cd              ASRS     r5,r1,#31
0005b0  eb016515          ADD      r5,r1,r5,LSR #24
0005b4  122e              ASRS     r6,r5,#8
0005b6  7386              STRB     r6,[r0,#0xe]
;;;1420   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0005b8  73c1              STRB     r1,[r0,#0xf]
;;;1421   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0005ba  fb97f1f2          SDIV     r1,r7,r2
0005be  fb027111          MLS      r1,r2,r1,r7
0005c2  17ca              ASRS     r2,r1,#31
0005c4  eb016212          ADD      r2,r1,r2,LSR #24
0005c8  1215              ASRS     r5,r2,#8
0005ca  7405              STRB     r5,[r0,#0x10]
;;;1422   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
0005cc  7441              STRB     r1,[r0,#0x11]
;;;1423   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
0005ce  fb93f1f9          SDIV     r1,r3,r9
0005d2  7481              STRB     r1,[r0,#0x12]
;;;1424   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
0005d4  fb93f1f8          SDIV     r1,r3,r8
0005d8  74c1              STRB     r1,[r0,#0x13]
;;;1425   modbus_registers[20]=0;								//Πεγ60
0005da  2100              MOVS     r1,#0
;;;1426   modbus_registers[21]=0;
;;;1427   if(work_stat==wsPS)modbus_registers[21]=1;
0005dc  4acd              LDR      r2,|L1.2324|
0005de  7501              STRB     r1,[r0,#0x14]         ;1425
0005e0  7541              STRB     r1,[r0,#0x15]         ;1426
0005e2  7813              LDRB     r3,[r2,#0]  ; work_stat
0005e4  2201              MOVS     r2,#1
0005e6  2b02              CMP      r3,#2
0005e8  d100              BNE      |L1.1516|
0005ea  7542              STRB     r2,[r0,#0x15]
                  |L1.1516|
;;;1428   modbus_registers[22]=0;								//Πεγ61
0005ec  7581              STRB     r1,[r0,#0x16]
;;;1429   modbus_registers[23]=0;
0005ee  75c1              STRB     r1,[r0,#0x17]
;;;1430   if(work_stat==wsGS)modbus_registers[23]=1;
0005f0  2b01              CMP      r3,#1
0005f2  d100              BNE      |L1.1526|
0005f4  75c2              STRB     r2,[r0,#0x17]
                  |L1.1526|
;;;1431   modbus_registers[24]=0;								//Πεγ62
;;;1432   modbus_registers[25]=0;
;;;1433   if(REV_STAT==rsREW)modbus_registers[25]=1;
0005f6  4bc8              LDR      r3,|L1.2328|
0005f8  7601              STRB     r1,[r0,#0x18]         ;1431
0005fa  7641              STRB     r1,[r0,#0x19]         ;1432
0005fc  781b              LDRB     r3,[r3,#0]  ; REV_STAT
0005fe  b903              CBNZ     r3,|L1.1538|
000600  7642              STRB     r2,[r0,#0x19]
                  |L1.1538|
;;;1434   modbus_registers[26]=0;								//Πεγ63
000602  7681              STRB     r1,[r0,#0x1a]
;;;1435   modbus_registers[27]=0;
000604  76c1              STRB     r1,[r0,#0x1b]
;;;1436   if(AVT_REV_IS_ON)modbus_registers[27]=1;
000606  49c5              LDR      r1,|L1.2332|
000608  8809              LDRH     r1,[r1,#0]  ; AVT_REV_IS_ON
00060a  b101              CBZ      r1,|L1.1550|
00060c  76c2              STRB     r2,[r0,#0x1b]
                  |L1.1550|
;;;1437   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
00060e  49c4              LDR      r1,|L1.2336|
000610  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_TIME_FF
000614  17ca              ASRS     r2,r1,#31
000616  eb016212          ADD      r2,r1,r2,LSR #24
00061a  1213              ASRS     r3,r2,#8
00061c  f8003f1c          STRB     r3,[r0,#0x1c]!
;;;1438   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
000620  7041              STRB     r1,[r0,#1]
;;;1439   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
000622  49c0              LDR      r1,|L1.2340|
000624  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_TIME_REW
000628  17ca              ASRS     r2,r1,#31
00062a  eb016212          ADD      r2,r1,r2,LSR #24
00062e  1213              ASRS     r3,r2,#8
000630  7083              STRB     r3,[r0,#2]
;;;1440   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
000632  70c1              STRB     r1,[r0,#3]
;;;1441   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
000634  49bc              LDR      r1,|L1.2344|
000636  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_TIME_PAUSE
00063a  17ca              ASRS     r2,r1,#31
00063c  eb016212          ADD      r2,r1,r2,LSR #24
000640  1213              ASRS     r3,r2,#8
000642  7103              STRB     r3,[r0,#4]
;;;1442   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
000644  7141              STRB     r1,[r0,#5]
;;;1443   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
000646  49b9              LDR      r1,|L1.2348|
000648  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_I_NOM_FF
00064c  17ca              ASRS     r2,r1,#31
00064e  eb016212          ADD      r2,r1,r2,LSR #24
000652  1213              ASRS     r3,r2,#8
000654  7183              STRB     r3,[r0,#6]
;;;1444   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
000656  71c1              STRB     r1,[r0,#7]
;;;1445   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
000658  49b5              LDR      r1,|L1.2352|
00065a  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_I_NOM_REW
00065e  17ca              ASRS     r2,r1,#31
000660  eb016212          ADD      r2,r1,r2,LSR #24
000664  1213              ASRS     r3,r2,#8
000666  7203              STRB     r3,[r0,#8]
;;;1446   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
000668  7241              STRB     r1,[r0,#9]
;;;1447   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
00066a  49b2              LDR      r1,|L1.2356|
00066c  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_U_NOM_FF
000670  17ca              ASRS     r2,r1,#31
000672  eb016212          ADD      r2,r1,r2,LSR #24
000676  1213              ASRS     r3,r2,#8
000678  7283              STRB     r3,[r0,#0xa]
;;;1448   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
00067a  72c1              STRB     r1,[r0,#0xb]
;;;1449   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
00067c  49ae              LDR      r1,|L1.2360|
00067e  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_U_NOM_REW
000682  17ca              ASRS     r2,r1,#31
000684  eb016212          ADD      r2,r1,r2,LSR #24
000688  1213              ASRS     r3,r2,#8
00068a  7303              STRB     r3,[r0,#0xc]
;;;1450   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
00068c  7341              STRB     r1,[r0,#0xd]
;;;1451   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
00068e  49ab              LDR      r1,|L1.2364|
000690  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_ZAR_TIME
000694  17ca              ASRS     r2,r1,#31
000696  eb016212          ADD      r2,r1,r2,LSR #24
00069a  1213              ASRS     r3,r2,#8
00069c  7383              STRB     r3,[r0,#0xe]
;;;1452   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
00069e  73c1              STRB     r1,[r0,#0xf]
;;;1453   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
0006a0  49a7              LDR      r1,|L1.2368|
0006a2  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_PAUSE1_TIME
0006a6  17ca              ASRS     r2,r1,#31
0006a8  eb016212          ADD      r2,r1,r2,LSR #24
0006ac  1213              ASRS     r3,r2,#8
0006ae  7403              STRB     r3,[r0,#0x10]
;;;1454   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
0006b0  7441              STRB     r1,[r0,#0x11]
;;;1455   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
0006b2  49a4              LDR      r1,|L1.2372|
0006b4  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_RAZR_TIME
0006b8  17ca              ASRS     r2,r1,#31
0006ba  eb016212          ADD      r2,r1,r2,LSR #24
0006be  1213              ASRS     r3,r2,#8
0006c0  7483              STRB     r3,[r0,#0x12]
;;;1456   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
0006c2  74c1              STRB     r1,[r0,#0x13]
;;;1457   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
0006c4  49a0              LDR      r1,|L1.2376|
0006c6  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_PAUSE2_TIME
0006ca  17ca              ASRS     r2,r1,#31
0006cc  eb016212          ADD      r2,r1,r2,LSR #24
0006d0  1213              ASRS     r3,r2,#8
0006d2  7503              STRB     r3,[r0,#0x14]
;;;1458   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
0006d4  7541              STRB     r1,[r0,#0x15]
;;;1459   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
0006d6  499d              LDR      r1,|L1.2380|
0006d8  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_MAX_VOLT
0006dc  17ca              ASRS     r2,r1,#31
0006de  eb016212          ADD      r2,r1,r2,LSR #24
0006e2  1213              ASRS     r3,r2,#8
0006e4  7583              STRB     r3,[r0,#0x16]
;;;1460   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
0006e6  75c1              STRB     r1,[r0,#0x17]
;;;1461   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
0006e8  4999              LDR      r1,|L1.2384|
0006ea  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_WRK_CURR
0006ee  17ca              ASRS     r2,r1,#31
0006f0  eb016212          ADD      r2,r1,r2,LSR #24
0006f4  1213              ASRS     r3,r2,#8
0006f6  7603              STRB     r3,[r0,#0x18]
;;;1462   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
0006f8  7641              STRB     r1,[r0,#0x19]
0006fa  4980              LDR      r1,|L1.2300|
;;;1463   
;;;1464   if(prot==MODBUS_RTU_PROT)
;;;1465   	{
;;;1466   	modbus_tx_buff[0]=adr;
;;;1467   	modbus_tx_buff[1]=func;
;;;1468   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1469   	
;;;1470   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-50)*2],reg_quantity*2);
0006fc  eb01014a          ADD      r1,r1,r10,LSL #1
000700  3964              SUBS     r1,r1,#0x64
000702  f1bc0f00          CMP      r12,#0                ;1464
000706  d005              BEQ      |L1.1812|
;;;1471   							   
;;;1472   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1473   	
;;;1474   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1475   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1476   	
;;;1477   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1478   		{
;;;1479   		putchar0(modbus_tx_buff[i]);
;;;1480   		}
;;;1481   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1482   		{
;;;1483   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1484   		}
;;;1485   	}
;;;1486   else if(prot==MODBUS_TCP_PROT)
000708  f1bc0f01          CMP      r12,#1
00070c  d101              BNE      |L1.1810|
;;;1487   	{
;;;1488   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
00070e  4891              LDR      r0,|L1.2388|
000710  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1810|
;;;1489   	}
;;;1490   // modbus_tcp_out_ptr=(char*)(&modbus_registers[0]);
;;;1491   //modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
;;;1492   }
000712  e681              B        |L1.1048|
                  |L1.1812|
000714  f88db000          STRB     r11,[sp,#0]           ;1466
000718  f88de001          STRB     lr,[sp,#1]            ;1467
00071c  0062              LSLS     r2,r4,#1              ;1468
00071e  466d              MOV      r5,sp                 ;1470
000720  f88d2002          STRB     r2,[sp,#2]            ;1468
000724  1ce8              ADDS     r0,r5,#3              ;1470
000726  f7fffffe          BL       __aeabi_memcpy
00072a  2003              MOVS     r0,#3                 ;1472
00072c  eb000044          ADD      r0,r0,r4,LSL #1       ;1472
000730  b201              SXTH     r1,r0                 ;1472
000732  4668              MOV      r0,sp                 ;1472
000734  f7fffffe          BL       CRC16_2
000738  eb050144          ADD      r1,r5,r4,LSL #1       ;1474
00073c  2600              MOVS     r6,#0                 ;1477
00073e  70c8              STRB     r0,[r1,#3]            ;1474
000740  0a00              LSRS     r0,r0,#8              ;1475
000742  7108              STRB     r0,[r1,#4]            ;1475
000744  2005              MOVS     r0,#5                 ;1477
000746  eb000744          ADD      r7,r0,r4,LSL #1       ;1477
00074a  e004              B        |L1.1878|
                  |L1.1868|
00074c  5da8              LDRB     r0,[r5,r6]            ;1479
00074e  f7fffffe          BL       putchar0
000752  1c76              ADDS     r6,r6,#1              ;1477
000754  b2f6              UXTB     r6,r6                 ;1477
                  |L1.1878|
000756  42b7              CMP      r7,r6                 ;1477
000758  d8f8              BHI      |L1.1868|
00075a  2400              MOVS     r4,#0                 ;1481
00075c  e004              B        |L1.1896|
                  |L1.1886|
00075e  5d28              LDRB     r0,[r5,r4]            ;1483
000760  f7fffffe          BL       putchar_sc16is700
000764  1c64              ADDS     r4,r4,#1              ;1481
000766  b2e4              UXTB     r4,r4                 ;1481
                  |L1.1896|
000768  42a7              CMP      r7,r4                 ;1481
00076a  d8f8              BHI      |L1.1886|
00076c  e654              B        |L1.1048|
;;;1493   
                          ENDP

                  modbus_for_pult_registers_transmit PROC
;;;1166   //-----------------------------------------------
;;;1167   void modbus_for_pult_registers_transmit(unsigned short reg_quantity)
00076e  b570              PUSH     {r4-r6,lr}
;;;1168   {
000770  4606              MOV      r6,r0
;;;1169   char modbus_registers[20];
;;;1170   char modbus_tx_buff[30];
;;;1171   unsigned short crc_temp;
;;;1172   char i;
;;;1173   //char reg_quantity=4;
;;;1174   
;;;1175   //pult_time_set=0xffff;
;;;1176   
;;;1177   modbus_registers[0]=(char)(pult_u%256);
000772  4879              LDR      r0,|L1.2392|
000774  b090              SUB      sp,sp,#0x40           ;1168
;;;1178   modbus_registers[1]=(char)(pult_u/256);					//Πεγ1
;;;1179   modbus_registers[2]=(char)(pult_i%256);
;;;1180   modbus_registers[3]=(char)(pult_i/256);					//Πεγ2
;;;1181   modbus_registers[4]=(char)(pult_work_stat%256);
;;;1182   modbus_registers[5]=(char)(pult_work_stat/256);			//Πεγ3
;;;1183   modbus_registers[6]=(char)(pult_u_set%256);
;;;1184   modbus_registers[7]=(char)(pult_u_set/256);				//Πεγ4
;;;1185   modbus_registers[8]=(char)(pult_time%256);
;;;1186   modbus_registers[9]=(char)(pult_time/256);				//Πεγ5
;;;1187   modbus_registers[10]=(char)(pult_time_set%256);		 	
;;;1188   modbus_registers[11]=(char)(pult_time_set/256);			//Πεγ6
;;;1189   modbus_registers[12]=(char)(pult_i_set%256);
;;;1190   modbus_registers[13]=(char)(pult_i_set/256);				//Πεγ7
;;;1191   
;;;1192   
;;;1193   modbus_tx_buff[0]=201;
;;;1194   modbus_tx_buff[1]=4;
;;;1195   modbus_tx_buff[2]=(char)(reg_quantity*2);
000776  0072              LSLS     r2,r6,#1
000778  f9b00000          LDRSH    r0,[r0,#0]            ;1177  ; pult_u
00077c  f88d0024          STRB     r0,[sp,#0x24]         ;1177
000780  17c1              ASRS     r1,r0,#31             ;1177
000782  eb006111          ADD      r1,r0,r1,LSR #24      ;1177
000786  1208              ASRS     r0,r1,#8              ;1178
000788  f88d0025          STRB     r0,[sp,#0x25]         ;1178
00078c  4873              LDR      r0,|L1.2396|
;;;1196   
;;;1197   memcpy((char*)&modbus_tx_buff[3],(char*)modbus_registers,reg_quantity*2);
00078e  466c              MOV      r4,sp
000790  f9b00000          LDRSH    r0,[r0,#0]            ;1179  ; pult_i
000794  f88d0026          STRB     r0,[sp,#0x26]         ;1179
000798  17c1              ASRS     r1,r0,#31             ;1179
00079a  eb006111          ADD      r1,r0,r1,LSR #24      ;1179
00079e  1208              ASRS     r0,r1,#8              ;1180
0007a0  f88d0027          STRB     r0,[sp,#0x27]         ;1180
0007a4  486e              LDR      r0,|L1.2400|
0007a6  7800              LDRB     r0,[r0,#0]            ;1181  ; pult_work_stat
0007a8  f88d0028          STRB     r0,[sp,#0x28]         ;1181
0007ac  2000              MOVS     r0,#0                 ;1182
0007ae  f88d0029          STRB     r0,[sp,#0x29]         ;1182
0007b2  486c              LDR      r0,|L1.2404|
0007b4  f9b00000          LDRSH    r0,[r0,#0]            ;1183  ; pult_u_set
0007b8  f88d002a          STRB     r0,[sp,#0x2a]         ;1183
0007bc  17c1              ASRS     r1,r0,#31             ;1183
0007be  eb006111          ADD      r1,r0,r1,LSR #24      ;1183
0007c2  1208              ASRS     r0,r1,#8              ;1184
0007c4  f88d002b          STRB     r0,[sp,#0x2b]         ;1184
0007c8  4867              LDR      r0,|L1.2408|
0007ca  f9b00000          LDRSH    r0,[r0,#0]            ;1185  ; pult_time
0007ce  f88d002c          STRB     r0,[sp,#0x2c]         ;1185
0007d2  17c1              ASRS     r1,r0,#31             ;1185
0007d4  eb006111          ADD      r1,r0,r1,LSR #24      ;1185
0007d8  1208              ASRS     r0,r1,#8              ;1186
0007da  f88d002d          STRB     r0,[sp,#0x2d]         ;1186
0007de  4863              LDR      r0,|L1.2412|
0007e0  8800              LDRH     r0,[r0,#0]            ;1187  ; pult_time_set
0007e2  f88d002e          STRB     r0,[sp,#0x2e]         ;1187
0007e6  0a00              LSRS     r0,r0,#8              ;1188
0007e8  f88d002f          STRB     r0,[sp,#0x2f]         ;1188
0007ec  4860              LDR      r0,|L1.2416|
0007ee  f9b00000          LDRSH    r0,[r0,#0]            ;1189  ; pult_i_set
0007f2  f88d0030          STRB     r0,[sp,#0x30]         ;1189
0007f6  17c1              ASRS     r1,r0,#31             ;1189
0007f8  eb006111          ADD      r1,r0,r1,LSR #24      ;1189
0007fc  1208              ASRS     r0,r1,#8              ;1190
0007fe  f88d0031          STRB     r0,[sp,#0x31]         ;1190
000802  20c9              MOVS     r0,#0xc9              ;1193
000804  f88d0000          STRB     r0,[sp,#0]            ;1193
000808  2004              MOVS     r0,#4                 ;1194
00080a  f88d0001          STRB     r0,[sp,#1]            ;1194
00080e  f88d2002          STRB     r2,[sp,#2]            ;1195
000812  a909              ADD      r1,sp,#0x24
000814  1ce0              ADDS     r0,r4,#3
000816  f7fffffe          BL       __aeabi_memcpy
;;;1198   
;;;1199   crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
00081a  2003              MOVS     r0,#3
00081c  eb000046          ADD      r0,r0,r6,LSL #1
000820  b201              SXTH     r1,r0
000822  4668              MOV      r0,sp
000824  f7fffffe          BL       CRC16_2
;;;1200   
;;;1201   modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
000828  eb040146          ADD      r1,r4,r6,LSL #1
;;;1202   modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1203   
;;;1204   for (i=0;i<(5+(reg_quantity*2));i++)
00082c  2500              MOVS     r5,#0
00082e  70c8              STRB     r0,[r1,#3]            ;1201
000830  0a00              LSRS     r0,r0,#8              ;1202
000832  7108              STRB     r0,[r1,#4]            ;1202
000834  2005              MOVS     r0,#5
000836  eb000646          ADD      r6,r0,r6,LSL #1
00083a  e004              B        |L1.2118|
                  |L1.2108|
;;;1205   	{
;;;1206   	putchar0(modbus_tx_buff[i]);
00083c  5d60              LDRB     r0,[r4,r5]
00083e  f7fffffe          BL       putchar0
000842  1c6d              ADDS     r5,r5,#1              ;1204
000844  b2ed              UXTB     r5,r5                 ;1204
                  |L1.2118|
000846  42ae              CMP      r6,r5                 ;1204
000848  d8f8              BHI      |L1.2108|
;;;1207   	}
;;;1208   for (i=0;i<(5+(reg_quantity*2));i++)
00084a  2500              MOVS     r5,#0
00084c  e004              B        |L1.2136|
                  |L1.2126|
;;;1209   	{
;;;1210   	putchar_sc16is700(modbus_tx_buff[i]);
00084e  5d60              LDRB     r0,[r4,r5]
000850  f7fffffe          BL       putchar_sc16is700
000854  1c6d              ADDS     r5,r5,#1              ;1208
000856  b2ed              UXTB     r5,r5                 ;1208
                  |L1.2136|
000858  42ae              CMP      r6,r5                 ;1208
00085a  d8f8              BHI      |L1.2126|
;;;1211   	}
;;;1212   //modbus_plazma1++;
;;;1213   }
00085c  b010              ADD      sp,sp,#0x40
00085e  bd70              POP      {r4-r6,pc}
;;;1214   
                          ENDP

                  modbus_in PROC
;;;62     //-----------------------------------------------
;;;63     void modbus_in(void)
000860  e92d5ffc          PUSH     {r2-r12,lr}
;;;64     {
;;;65     short crc16_calculated;		//βϋχθρλεμΰ θη οπθνςϋυ δΰννϋυ CRC
;;;66     short crc16_incapsulated;	//βρςπξενννΰ β οξρϋλκσ CRC
;;;67     unsigned short modbus_rx_arg0;		//βρςπξεννϋι β οξρϋλκσ οεπβϋι ΰπγσμενς
;;;68     unsigned short modbus_rx_arg1;		//βρςπξεννϋι β οξρϋλκσ βςξπξι ΰπγσμενς
;;;69     //unsigned short modbus_rx_arg2;		//βρςπξεννϋι β οξρϋλκσ ςπεςθι ΰπγσμενς
;;;70     //unsigned short modbus_rx_arg3;		//βρςπξεννϋι β οξρϋλκσ χεςβεπςϋι ΰπγσμενς
;;;71     unsigned char modbus_func;			//βρςπξεννϋι β οξρϋλκσ κξδ τσνκφθθ
;;;72     
;;;73     //modbus_plazma++;
;;;74     
;;;75     memcpy(modbus_an_buffer,modbus_rx_buffer,modbus_rx_buffer_ptr);
000864  4d43              LDR      r5,|L1.2420|
000866  4925              LDR      r1,|L1.2300|
000868  78aa              LDRB     r2,[r5,#2]  ; modbus_rx_buffer_ptr
00086a  393c              SUBS     r1,r1,#0x3c
00086c  4614              MOV      r4,r2
00086e  f101001e          ADD      r0,r1,#0x1e
000872  f7fffffe          BL       __aeabi_memcpy
;;;76     modbus_rx_counter=modbus_rx_buffer_ptr;
000876  70ec              STRB     r4,[r5,#3]
;;;77     modbus_rx_buffer_ptr=0;
000878  2000              MOVS     r0,#0
00087a  70a8              STRB     r0,[r5,#2]
;;;78     bMODBUS_TIMEOUT=0;
00087c  7068              STRB     r0,[r5,#1]
;;;79     
;;;80     	
;;;81     crc16_calculated  = CRC16_2((char*)modbus_an_buffer, modbus_rx_counter-2);
00087e  481f              LDR      r0,|L1.2300|
000880  1ea1              SUBS     r1,r4,#2
000882  381e              SUBS     r0,r0,#0x1e
000884  f7fffffe          BL       CRC16_2
000888  b201              SXTH     r1,r0
;;;82     crc16_incapsulated = *((short*)&modbus_an_buffer[modbus_rx_counter-2]);
00088a  4e1c              LDR      r6,|L1.2300|
00088c  78e8              LDRB     r0,[r5,#3]  ; modbus_rx_counter
00088e  3e1e              SUBS     r6,r6,#0x1e
000890  4430              ADD      r0,r0,r6
000892  f9302c02          LDRSH    r2,[r0,#-2]
;;;83     
;;;84     //modbus_plazma=modbus_rx_counter;
;;;85     //modbus_plazma2=crc16_calculated;
;;;86     //modbus_plazma3=crc16_incapsulated;
;;;87     
;;;88     
;;;89     
;;;90     
;;;91     modbus_func=modbus_an_buffer[1];
000896  7870              LDRB     r0,[r6,#1]  ; modbus_an_buffer
;;;92     modbus_rx_arg0=(((unsigned short)modbus_an_buffer[2])*((unsigned short)256))+((unsigned short)modbus_an_buffer[3]);
000898  9001              STR      r0,[sp,#4]
00089a  78f0              LDRB     r0,[r6,#3]  ; modbus_an_buffer
00089c  78b3              LDRB     r3,[r6,#2]  ; modbus_an_buffer
;;;93     modbus_rx_arg1=(((unsigned short)modbus_an_buffer[4])*((unsigned short)256))+((unsigned short)modbus_an_buffer[5]);
;;;94     //modbus_rx_arg2=(((unsigned short)modbus_an_buffer[6])*((unsigned short)256))+((unsigned short)modbus_an_buffer[7]);
;;;95     //modbus_rx_arg3=(((unsigned short)modbus_an_buffer[8])*((unsigned short)256))+((unsigned short)modbus_an_buffer[9]);
;;;96     modbus_cmnd=(modbus_rx_arg1>>8)&0x7f;
;;;97     modbus_cmnd_cnt=(modbus_rx_arg1)&0x0f;
;;;98     
;;;99     modbus_plazma3=modbus_cmnd;
;;;100    modbus_plazma2=modbus_cmnd_cnt;
;;;101    modbus_plazma1=modbus_self_cmnd_cnt;
;;;102    
;;;103    if(crc16_calculated==crc16_incapsulated)
00089e  4291              CMP      r1,r2
0008a0  eb002003          ADD      r0,r0,r3,LSL #8       ;92
0008a4  b287              UXTH     r7,r0                 ;92
0008a6  7970              LDRB     r0,[r6,#5]            ;93  ; modbus_an_buffer
0008a8  7933              LDRB     r3,[r6,#4]            ;93  ; modbus_an_buffer
0008aa  eb002003          ADD      r0,r0,r3,LSL #8       ;93
0008ae  b284              UXTH     r4,r0                 ;93
0008b0  f3c42306          UBFX     r3,r4,#8,#7           ;96
0008b4  716b              STRB     r3,[r5,#5]            ;96
0008b6  f004000f          AND      r0,r4,#0xf            ;97
0008ba  7128              STRB     r0,[r5,#4]            ;97
0008bc  81ab              STRH     r3,[r5,#0xc]          ;99
0008be  8168              STRH     r0,[r5,#0xa]          ;100
0008c0  782b              LDRB     r3,[r5,#0]            ;101  ; modbus_self_cmnd_cnt
0008c2  812b              STRH     r3,[r5,#8]            ;101
0008c4  d17e              BNE      |L1.2500|
;;;104    	{
;;;105    	if(modbus_self_cmnd_cnt==33)modbus_self_cmnd_cnt=modbus_cmnd_cnt;
0008c6  2b21              CMP      r3,#0x21
0008c8  d100              BNE      |L1.2252|
0008ca  7028              STRB     r0,[r5,#0]
                  |L1.2252|
;;;106    	modbus_plazma=modbus_an_buffer[0];
0008cc  480b              LDR      r0,|L1.2300|
0008ce  46a8              MOV      r8,r5
0008d0  381e              SUBS     r0,r0,#0x1e
;;;107    	if(modbus_an_buffer[0]==200)	 //ερλθ ηΰοπξρ ξς οσλόςΰ
;;;108    		{
;;;109    		if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
;;;110    			{
;;;111    			modbus_for_pult_registers_transmit(7);
;;;112    			}
;;;113    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
;;;114    			{
;;;115    			//if(modbus_rx_arg0==1)		//
;;;116    				{
;;;117    				modbus_for_pult_registers_transmit(7);
;;;118    				tumbler_stat=(enum_tumbler_stat)(modbus_rx_arg1>>15);
;;;119    				if((tumbler_stat!=tumbler_stat_old))
;;;120    					{
;;;121    					if(tumbler_stat==tsU)
;;;122    						{
;;;123    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;124    						}
;;;125    					else lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;126    					
;;;127    					if(main_cnt>3)
;;;128    						{
;;;129    						work_stat=wsOFF;
;;;130    						restart_off();
;;;131    						}
;;;132    					}
;;;133    				tumbler_stat_old=tumbler_stat;
;;;134    				
;;;135    				}
;;;136    			 //else if(modbus_rx_arg0==0)
;;;137    			 	{
;;;138    				//modbus_plazma++;		
;;;139    				if((modbus_cmnd==61)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;140    					{
;;;141    					if(I_ug<1000)I_ug++;
;;;142    					else I_ug=((I_ug/10)+1)*10;
;;;143    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
0008d2  f8dfb0a4          LDR      r11,|L1.2424|
0008d6  7800              LDRB     r0,[r0,#0]            ;106  ; modbus_an_buffer
0008d8  80e8              STRH     r0,[r5,#6]            ;106
0008da  4d0e              LDR      r5,|L1.2324|
;;;144    					I_ug_block_cnt=10;
;;;145    					//lc640_write_int(EE_I_UG,I_ug);
;;;146    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;147    					}
;;;148    				
;;;149    				else if((modbus_cmnd==62)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;150    					{
;;;151    					if(I_ug<1000)I_ug--;
;;;152    					else I_ug=((I_ug/10)-1)*10;
;;;153    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;154    					I_ug_block_cnt=10;
;;;155    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;156    					}
;;;157    				else if((modbus_cmnd==63)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;158    					{
;;;159    					if(I_ug<1000)I_ug=((I_ug/10)+1)*10;
;;;160    					else I_ug=((I_ug/10)+5)*10;
;;;161    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;162    					I_ug_block_cnt=10;
;;;163    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;164    					}
;;;165    				
;;;166    				else if((modbus_cmnd==64)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;167    					{
;;;168    					if(I_ug<1000)I_ug=((I_ug/10)-1)*10;
;;;169    					else I_ug=((I_ug/10)-5)*10;
;;;170    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;171    					I_ug_block_cnt=10;
;;;172    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;173    					}
;;;174    				
;;;175    				else if((modbus_cmnd==71)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;176    					{
;;;177    					U_up++;
;;;178    					gran(&U_up,U_MIN,U_MAX);
;;;179    					U_up_block_cnt=10;
;;;180    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;181    					}
;;;182    				
;;;183    				else if((modbus_cmnd==72)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;184    					{
;;;185    					U_up--;
;;;186    					gran(&U_up,U_MIN,U_MAX);
;;;187    					U_up_block_cnt=10;
;;;188    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;189    				
;;;190    					}
;;;191    				else if((modbus_cmnd==73)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;192    					{
;;;193    					U_up=((U_up/10)+1)*10;
;;;194    					gran(&U_up,U_MIN,U_MAX);
;;;195    					U_up_block_cnt=10;
;;;196    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;197    					}
;;;198    				
;;;199    				else if((modbus_cmnd==74)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;200    					{
;;;201    					U_up=((U_up/10)-1)*10;
;;;202    					gran(&U_up,U_MIN,U_MAX);
;;;203    					U_up_block_cnt=10;
;;;204    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;205    					}
;;;206    				
;;;207    				
;;;208    				else if((modbus_cmnd==51)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ+
;;;209    					{
;;;210    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;211    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;212    						{
;;;213    						if(TIME_VISION_PULT)
;;;214    							{
;;;215    							T_PROC_GS=(((T_PROC_GS/60L)+1L)*60L);
0008dc  f04f093c          MOV      r9,#0x3c
0008e0  28c8              CMP      r0,#0xc8              ;107
0008e2  d104              BNE      |L1.2286|
0008e4  9801              LDR      r0,[sp,#4]            ;109
0008e6  2804              CMP      r0,#4                 ;109
0008e8  d002              BEQ      |L1.2288|
0008ea  2806              CMP      r0,#6                 ;113
0008ec  d046              BEQ      |L1.2428|
                  |L1.2286|
0008ee  e289              B        |L1.3588|
                  |L1.2288|
0008f0  2007              MOVS     r0,#7                 ;111
0008f2  f7fffffe          BL       modbus_for_pult_registers_transmit
0008f6  e285              B        |L1.3588|
                  |L1.2296|
                          DCD      I_ug
                  |L1.2300|
                          DCD      ||area_number.4||+0x3c
                  |L1.2304|
                          DCD      U_up
                  |L1.2308|
                          DCD      U_maxg
                  |L1.2312|
                          DCD      I_maxp
                  |L1.2316|
                          DCD      T_PROC_GS
                  |L1.2320|
                          DCD      T_PROC_PS
                  |L1.2324|
                          DCD      work_stat
                  |L1.2328|
                          DCD      REV_STAT
                  |L1.2332|
                          DCD      AVT_REV_IS_ON
                  |L1.2336|
                          DCD      AVT_REV_TIME_FF
                  |L1.2340|
                          DCD      AVT_REV_TIME_REW
                  |L1.2344|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.2348|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.2352|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.2356|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.2360|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.2364|
                          DCD      CAP_ZAR_TIME
                  |L1.2368|
                          DCD      CAP_PAUSE1_TIME
                  |L1.2372|
                          DCD      CAP_RAZR_TIME
                  |L1.2376|
                          DCD      CAP_PAUSE2_TIME
                  |L1.2380|
                          DCD      CAP_MAX_VOLT
                  |L1.2384|
                          DCD      CAP_WRK_CURR
                  |L1.2388|
                          DCD      modbus_tcp_out_ptr
                  |L1.2392|
                          DCD      pult_u
                  |L1.2396|
                          DCD      pult_i
                  |L1.2400|
                          DCD      pult_work_stat
                  |L1.2404|
                          DCD      pult_u_set
                  |L1.2408|
                          DCD      pult_time
                  |L1.2412|
                          DCD      pult_time_set
                  |L1.2416|
                          DCD      pult_i_set
                  |L1.2420|
                          DCD      ||.data||
                  |L1.2424|
                          DCD      I_MAX_IPS
                  |L1.2428|
00097c  2007              MOVS     r0,#7                 ;117
00097e  f7fffffe          BL       modbus_for_pult_registers_transmit
000982  f8dfa3f0          LDR      r10,|L1.3444|
000986  4efc              LDR      r6,|L1.3448|
000988  0be0              LSRS     r0,r4,#15             ;118
00098a  f88a0000          STRB     r0,[r10,#0]           ;118
00098e  7831              LDRB     r1,[r6,#0]            ;119  ; tumbler_stat_old
000990  4288              CMP      r0,r1                 ;119
000992  d00e              BEQ      |L1.2482|
000994  2801              CMP      r0,#1                 ;121
000996  d03e              BEQ      |L1.2582|
000998  2100              MOVS     r1,#0                 ;125
                  |L1.2458|
00099a  20ea              MOVS     r0,#0xea              ;125
00099c  f7fffffe          BL       lc640_write_int
0009a0  48f6              LDR      r0,|L1.3452|
0009a2  f9b00000          LDRSH    r0,[r0,#0]            ;127  ; main_cnt
0009a6  2803              CMP      r0,#3                 ;127
0009a8  dd03              BLE      |L1.2482|
0009aa  2000              MOVS     r0,#0                 ;129
0009ac  7028              STRB     r0,[r5,#0]            ;129
0009ae  f7fffffe          BL       restart_off
                  |L1.2482|
0009b2  f89ac000          LDRB     r12,[r10,#0]          ;133  ; tumbler_stat
0009b6  f886c000          STRB     r12,[r6,#0]           ;133
0009ba  46d6              MOV      lr,r10                ;133
0009bc  4640              MOV      r0,r8                 ;139
0009be  f8983005          LDRB     r3,[r8,#5]            ;139  ; modbus_cmnd
0009c2  e000              B        |L1.2502|
                  |L1.2500|
0009c4  e27f              B        |L1.3782|
                  |L1.2502|
0009c6  f8df83b8          LDR      r8,|L1.3456|
0009ca  260a              MOVS     r6,#0xa               ;142
0009cc  f44f717a          MOV      r1,#0x3e8             ;141
0009d0  2b3d              CMP      r3,#0x3d              ;139
0009d2  d022              BEQ      |L1.2586|
0009d4  2b3e              CMP      r3,#0x3e              ;149
0009d6  d038              BEQ      |L1.2634|
0009d8  2b3f              CMP      r3,#0x3f              ;157
0009da  d047              BEQ      |L1.2668|
0009dc  2b40              CMP      r3,#0x40              ;166
0009de  d053              BEQ      |L1.2696|
0009e0  f8df83a0          LDR      r8,|L1.3460|
0009e4  2b47              CMP      r3,#0x47              ;175
0009e6  d061              BEQ      |L1.2732|
0009e8  2b48              CMP      r3,#0x48              ;183
0009ea  d068              BEQ      |L1.2750|
0009ec  2b49              CMP      r3,#0x49              ;191
0009ee  d072              BEQ      |L1.2774|
0009f0  2b4a              CMP      r3,#0x4a              ;199
0009f2  d06e              BEQ      |L1.2770|
0009f4  49e4              LDR      r1,|L1.3464|
;;;216    							T_PROC_GS_block_cnt=10;
0009f6  4ae5              LDR      r2,|L1.3468|
;;;217    							}
;;;218    						else
;;;219    							{
;;;220    							T_PROC_GS++;
;;;221    							T_PROC_GS_block_cnt=10;
;;;222    							}
;;;223    				
;;;224    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;225    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;226    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;227    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;228    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;229    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;230    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;231    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;232    							}												//(T_PROC_GS_MODE=0)
;;;233    					
;;;234    						else if(T_PROC_GS<30)
;;;235    							{
;;;236    							T_PROC_GS=29;
;;;237    							if(T_PROC_GS_MODE!=1)
;;;238    								{
;;;239    								T_PROC_GS_MODE=1;
;;;240    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;241    								}
;;;242    							}
;;;243    						else 
;;;244    							{
;;;245    							if(T_PROC_GS_MODE!=0)
;;;246    								{
;;;247    								T_PROC_GS_MODE=0;
;;;248    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;249    								}
;;;250    							}			
;;;251    						}
;;;252    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;253    						{
;;;254    						if(TIME_VISION_PULT)
;;;255    							{
;;;256    							T_PROC_PS=(((T_PROC_PS/60L)+1L)*60L);
;;;257    							T_PROC_PS_block_cnt=10;
0009f8  f8dfa394          LDR      r10,|L1.3472|
0009fc  f8df8394          LDR      r8,|L1.3476|
000a00  2b33              CMP      r3,#0x33              ;208
000a02  d067              BEQ      |L1.2772|
;;;258    							}
;;;259    						else
;;;260    							{
;;;261    							T_PROC_PS++;
;;;262    							T_PROC_PS_block_cnt=10;
;;;263    							}
;;;264    				
;;;265    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;266    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;267    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;268    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;269    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;270    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;271    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;272    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;273    							}												//(T_PROC_PS_MODE=0)
;;;274    					
;;;275    						else if(T_PROC_PS<30)
;;;276    							{
;;;277    							T_PROC_PS=29;
;;;278    							if(T_PROC_PS_MODE!=1)
;;;279    								{
;;;280    								T_PROC_PS_MODE=1;
;;;281    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;282    								}
;;;283    							}
;;;284    						else 
;;;285    							{
;;;286    							if(T_PROC_PS_MODE!=0)
;;;287    								{
;;;288    								T_PROC_PS_MODE=0;
;;;289    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;290    								}
;;;291    							}			
;;;292    						}
;;;293    					}
;;;294    				else if((modbus_cmnd==53)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ++
000a04  2b35              CMP      r3,#0x35
000a06  d072              BEQ      |L1.2798|
;;;295    					{
;;;296    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;297    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;298    						{
;;;299    						if(TIME_VISION_PULT)
;;;300    							{
;;;301    							T_PROC_GS=(((T_PROC_GS/600L)+1L)*600L);
;;;302    							T_PROC_GS_block_cnt=10;
;;;303    							}
;;;304    						else
;;;305    							{
;;;306    							T_PROC_GS=(((T_PROC_GS/10L)+1L)*10L);
;;;307    							T_PROC_GS_block_cnt=10;
;;;308    							}
;;;309    				
;;;310    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;311    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;312    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;313    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;314    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;315    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;316    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;317    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;318    							}												//(T_PROC_GS_MODE=0)
;;;319    					
;;;320    						else if(T_PROC_GS<30)
;;;321    							{
;;;322    							T_PROC_GS=29;
;;;323    							if(T_PROC_GS_MODE!=1)
;;;324    								{
;;;325    								T_PROC_GS_MODE=1;
;;;326    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;327    								}
;;;328    							}
;;;329    						else 
;;;330    							{
;;;331    							if(T_PROC_GS_MODE!=0)
;;;332    								{
;;;333    								T_PROC_GS_MODE=0;
;;;334    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;335    								}
;;;336    							}			
;;;337    						}
;;;338    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;339    						{
;;;340    						if(TIME_VISION_PULT)
;;;341    							{
;;;342    							T_PROC_PS=(((T_PROC_PS/600L)+1L)*600L);
;;;343    							T_PROC_PS_block_cnt=10;
;;;344    							}
;;;345    						else
;;;346    							{
;;;347    							T_PROC_PS=(((T_PROC_PS/10L)+1L)*10L);
;;;348    							T_PROC_PS_block_cnt=10;
;;;349    							}
;;;350    				
;;;351    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;352    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;353    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;354    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;355    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;356    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;357    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;358    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;359    							}												//(T_PROC_PS_MODE=0)
;;;360    					
;;;361    						else if(T_PROC_PS<30)
;;;362    							{
;;;363    							T_PROC_PS=29;
;;;364    							if(T_PROC_PS_MODE!=1)
;;;365    								{
;;;366    								T_PROC_PS_MODE=1;
;;;367    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;368    								}
;;;369    							}
;;;370    						else 
;;;371    							{
;;;372    							if(T_PROC_PS_MODE!=0)
;;;373    								{
;;;374    								T_PROC_PS_MODE=0;
;;;375    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;376    								}
;;;377    							}				
;;;378    						}
;;;379    					}
;;;380    				
;;;381    				else if((modbus_cmnd==52)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ-
000a08  2b34              CMP      r3,#0x34
000a0a  d071              BEQ      |L1.2800|
;;;382    					{
;;;383    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;384    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;385    						{
;;;386    						if(TIME_VISION_PULT)
;;;387    							{
;;;388    							T_PROC_GS=(((T_PROC_GS/60L)-1L)*60L);
;;;389    							T_PROC_GS_block_cnt=10;
;;;390    							}
;;;391    						else
;;;392    							{
;;;393    							T_PROC_GS--;
;;;394    							T_PROC_GS_block_cnt=10;
;;;395    							}
;;;396    				
;;;397    							
;;;398    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;399    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;400    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;401    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;402    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;403    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;404    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;405    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;406    							}												//(T_PROC_GS_MODE=0)
;;;407    					
;;;408    						else if(T_PROC_GS<30)
;;;409    							{
;;;410    							T_PROC_GS=29;
;;;411    							if(T_PROC_GS_MODE!=1)
;;;412    								{
;;;413    								T_PROC_GS_MODE=1;
;;;414    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;415    								}
;;;416    							}
;;;417    						else 
;;;418    							{
;;;419    							if(T_PROC_GS_MODE!=0)
;;;420    								{
;;;421    								T_PROC_GS_MODE=0;
;;;422    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;423    								}
;;;424    							}
;;;425    							
;;;426    						}
;;;427    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;428    						{
;;;429    						if(TIME_VISION_PULT)
;;;430    							{
;;;431    							T_PROC_PS=(((T_PROC_PS/60L)-1L)*60L);
;;;432    							T_PROC_PS_block_cnt=10;
;;;433    							}
;;;434    						else
;;;435    							{
;;;436    							T_PROC_PS--;
;;;437    							T_PROC_PS_block_cnt=10;
;;;438    							}
;;;439    				
;;;440    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;441    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;442    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;443    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;444    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;445    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;446    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;447    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;448    							}												//(T_PROC_PS_MODE=0)
;;;449    					
;;;450    						else if(T_PROC_PS<30)
;;;451    							{
;;;452    							T_PROC_PS=29;
;;;453    							if(T_PROC_PS_MODE!=1)
;;;454    								{
;;;455    								T_PROC_PS_MODE=1;
;;;456    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;457    								}
;;;458    							}
;;;459    						else 
;;;460    							{
;;;461    							if(T_PROC_PS_MODE!=0)
;;;462    								{
;;;463    								T_PROC_PS_MODE=0;
;;;464    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;465    								}
;;;466    							}			
;;;467    						}
;;;468    					}
;;;469    				else if((modbus_cmnd==54)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ--
000a0c  2b36              CMP      r3,#0x36
000a0e  d070              BEQ      |L1.2802|
;;;470    					{
;;;471    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;472    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;473    						{
;;;474    						if(TIME_VISION_PULT)
;;;475    							{
;;;476    							T_PROC_GS=(((T_PROC_GS/600L)-1L)*600L);
;;;477    							T_PROC_GS_block_cnt=10;
;;;478    							}
;;;479    						else
;;;480    							{
;;;481    							T_PROC_GS=(((T_PROC_GS/10L)-1L)*10L);
;;;482    							T_PROC_GS_block_cnt=10;
;;;483    							}
;;;484    				
;;;485    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;486    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;487    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;488    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;489    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;490    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;491    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;492    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;493    							}												//(T_PROC_GS_MODE=0)
;;;494    					
;;;495    						else if(T_PROC_GS<30)
;;;496    							{
;;;497    							T_PROC_GS=29;
;;;498    							if(T_PROC_GS_MODE!=1)
;;;499    								{
;;;500    								T_PROC_GS_MODE=1;
;;;501    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;502    								}
;;;503    							}
;;;504    						else 
;;;505    							{
;;;506    							if(T_PROC_GS_MODE!=0)
;;;507    								{
;;;508    								T_PROC_GS_MODE=0;
;;;509    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;510    								}
;;;511    							}
;;;512    										
;;;513    						}
;;;514    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;515    						{
;;;516    						if(TIME_VISION_PULT)
;;;517    							{
;;;518    							T_PROC_PS=(((T_PROC_PS/600L)-1L)*600L);
;;;519    							T_PROC_PS_block_cnt=10;
;;;520    							}
;;;521    						else
;;;522    							{
;;;523    							T_PROC_PS=(((T_PROC_PS/10L)-1L)*10L);
;;;524    							T_PROC_PS_block_cnt=10;
;;;525    							}
;;;526    				
;;;527    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;528    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;529    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;530    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;531    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;532    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;533    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;534    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;535    							}												//(T_PROC_PS_MODE=0)
;;;536    					
;;;537    						else if(T_PROC_PS<30)
;;;538    							{
;;;539    							T_PROC_PS=29;
;;;540    							if(T_PROC_PS_MODE!=1)
;;;541    								{
;;;542    								T_PROC_PS_MODE=1;
;;;543    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;544    								}
;;;545    							}
;;;546    						else 
;;;547    							{
;;;548    							if(T_PROC_PS_MODE!=0)
;;;549    								{
;;;550    								T_PROC_PS_MODE=0;
;;;551    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;552    								}
;;;553    							}	
;;;554    						}
;;;555    					}
;;;556    				
;;;557    				
;;;558    			//	else if((modbus_rx_arg1>>8)==90)
;;;559    			else if((modbus_cmnd==1)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
000a10  2b01              CMP      r3,#1
000a12  d06f              BEQ      |L1.2804|
                  |L1.2580|
000a14  e1f6              B        |L1.3588|
                  |L1.2582|
000a16  2101              MOVS     r1,#1                 ;123
000a18  e7bf              B        |L1.2458|
                  |L1.2586|
000a1a  4682              MOV      r10,r0                ;139
000a1c  7902              LDRB     r2,[r0,#4]            ;139  ; modbus_cmnd_cnt
000a1e  7800              LDRB     r0,[r0,#0]            ;139  ; modbus_self_cmnd_cnt
000a20  4282              CMP      r2,r0                 ;139
000a22  d0f7              BEQ      |L1.2580|
000a24  48dc              LDR      r0,|L1.3480|
000a26  f9b02000          LDRSH    r2,[r0,#0]            ;141  ; I_ug
000a2a  428a              CMP      r2,r1                 ;141
000a2c  da01              BGE      |L1.2610|
000a2e  1c52              ADDS     r2,r2,#1              ;141
000a30  e016              B        |L1.2656|
                  |L1.2610|
000a32  fb92f1f6          SDIV     r1,r2,r6              ;142
000a36  1c49              ADDS     r1,r1,#1              ;142
000a38  e033              B        |L1.2722|
000a3a  bf00              NOP                            ;143
                  |L1.2620|
000a3c  48d7              LDR      r0,|L1.3484|
000a3e  f9bb2000          LDRSH    r2,[r11,#0]           ;143  ; I_MAX_IPS
000a42  f9b01000          LDRSH    r1,[r0,#0]            ;143  ; I_MIN_IPS
000a46  48d4              LDR      r0,|L1.3480|
000a48  e06b              B        |L1.2850|
                  |L1.2634|
000a4a  4682              MOV      r10,r0                ;149
000a4c  7902              LDRB     r2,[r0,#4]            ;149  ; modbus_cmnd_cnt
000a4e  7800              LDRB     r0,[r0,#0]            ;149  ; modbus_self_cmnd_cnt
000a50  4282              CMP      r2,r0                 ;149
000a52  d0df              BEQ      |L1.2580|
000a54  48d0              LDR      r0,|L1.3480|
000a56  f9b02000          LDRSH    r2,[r0,#0]            ;151  ; I_ug
000a5a  428a              CMP      r2,r1                 ;151
000a5c  da02              BGE      |L1.2660|
000a5e  1e52              SUBS     r2,r2,#1              ;151
                  |L1.2656|
000a60  8002              STRH     r2,[r0,#0]            ;151
000a62  e7eb              B        |L1.2620|
                  |L1.2660|
000a64  fb92f1f6          SDIV     r1,r2,r6              ;152
000a68  1e49              SUBS     r1,r1,#1              ;152
000a6a  e01a              B        |L1.2722|
                  |L1.2668|
000a6c  4682              MOV      r10,r0                ;157
000a6e  7902              LDRB     r2,[r0,#4]            ;157  ; modbus_cmnd_cnt
000a70  7800              LDRB     r0,[r0,#0]            ;157  ; modbus_self_cmnd_cnt
000a72  4282              CMP      r2,r0                 ;157
000a74  d0ce              BEQ      |L1.2580|
000a76  48c8              LDR      r0,|L1.3480|
000a78  f9b02000          LDRSH    r2,[r0,#0]            ;159  ; I_ug
000a7c  428a              CMP      r2,r1                 ;159
000a7e  dbd8              BLT      |L1.2610|
000a80  fb92f1f6          SDIV     r1,r2,r6              ;160
000a84  1d49              ADDS     r1,r1,#5              ;160
000a86  e00c              B        |L1.2722|
                  |L1.2696|
000a88  4682              MOV      r10,r0                ;166
000a8a  7902              LDRB     r2,[r0,#4]            ;166  ; modbus_cmnd_cnt
000a8c  7800              LDRB     r0,[r0,#0]            ;166  ; modbus_self_cmnd_cnt
000a8e  4282              CMP      r2,r0                 ;166
000a90  d0c0              BEQ      |L1.2580|
000a92  48c1              LDR      r0,|L1.3480|
000a94  f9b02000          LDRSH    r2,[r0,#0]            ;168  ; I_ug
000a98  428a              CMP      r2,r1                 ;168
000a9a  dbe3              BLT      |L1.2660|
000a9c  fb92f1f6          SDIV     r1,r2,r6              ;169
000aa0  1f49              SUBS     r1,r1,#5              ;169
                  |L1.2722|
000aa2  eb010181          ADD      r1,r1,r1,LSL #2       ;169
000aa6  0049              LSLS     r1,r1,#1              ;169
000aa8  8001              STRH     r1,[r0,#0]            ;169
000aaa  e7c7              B        |L1.2620|
                  |L1.2732|
000aac  4682              MOV      r10,r0                ;175
000aae  7901              LDRB     r1,[r0,#4]            ;175  ; modbus_cmnd_cnt
000ab0  7800              LDRB     r0,[r0,#0]            ;175  ; modbus_self_cmnd_cnt
000ab2  4281              CMP      r1,r0                 ;175
000ab4  d0ae              BEQ      |L1.2580|
000ab6  48ba              LDR      r0,|L1.3488|
000ab8  8801              LDRH     r1,[r0,#0]            ;177  ; U_up
000aba  1c49              ADDS     r1,r1,#1              ;177
000abc  e029              B        |L1.2834|
                  |L1.2750|
000abe  4682              MOV      r10,r0                ;183
000ac0  7901              LDRB     r1,[r0,#4]            ;183  ; modbus_cmnd_cnt
000ac2  7800              LDRB     r0,[r0,#0]            ;183  ; modbus_self_cmnd_cnt
000ac4  4281              CMP      r1,r0                 ;183
000ac6  d0a5              BEQ      |L1.2580|
000ac8  48b5              LDR      r0,|L1.3488|
000aca  8801              LDRH     r1,[r0,#0]            ;185  ; U_up
000acc  1e49              SUBS     r1,r1,#1              ;185
000ace  e020              B        |L1.2834|
000ad0  e001              B        |L1.2774|
                  |L1.2770|
000ad2  e010              B        |L1.2806|
                  |L1.2772|
000ad4  e02e              B        |L1.2868|
                  |L1.2774|
000ad6  4682              MOV      r10,r0                ;191
000ad8  7901              LDRB     r1,[r0,#4]            ;191  ; modbus_cmnd_cnt
000ada  7800              LDRB     r0,[r0,#0]            ;191  ; modbus_self_cmnd_cnt
000adc  4281              CMP      r1,r0                 ;191
000ade  d099              BEQ      |L1.2580|
000ae0  48af              LDR      r0,|L1.3488|
000ae2  f9b01000          LDRSH    r1,[r0,#0]            ;193  ; U_up
000ae6  fb91f1f6          SDIV     r1,r1,r6              ;193
000aea  1c49              ADDS     r1,r1,#1              ;193
000aec  e00e              B        |L1.2828|
                  |L1.2798|
000aee  e06c              B        |L1.3018|
                  |L1.2800|
000af0  e09c              B        |L1.3116|
                  |L1.2802|
000af2  e0c9              B        |L1.3208|
                  |L1.2804|
000af4  e122              B        |L1.3388|
                  |L1.2806|
000af6  4682              MOV      r10,r0                ;199
000af8  7901              LDRB     r1,[r0,#4]            ;199  ; modbus_cmnd_cnt
000afa  7800              LDRB     r0,[r0,#0]            ;199  ; modbus_self_cmnd_cnt
000afc  4281              CMP      r1,r0                 ;199
000afe  d089              BEQ      |L1.2580|
000b00  48a7              LDR      r0,|L1.3488|
000b02  f9b01000          LDRSH    r1,[r0,#0]            ;201  ; U_up
000b06  fb91f1f6          SDIV     r1,r1,r6              ;201
000b0a  1e49              SUBS     r1,r1,#1              ;201
                  |L1.2828|
000b0c  eb010181          ADD      r1,r1,r1,LSL #2       ;201
000b10  0049              LSLS     r1,r1,#1              ;201
                  |L1.2834|
000b12  8001              STRH     r1,[r0,#0]            ;201
000b14  48a3              LDR      r0,|L1.3492|
000b16  f9b02000          LDRSH    r2,[r0,#0]            ;202  ; U_MAX
000b1a  48a3              LDR      r0,|L1.3496|
000b1c  f9b01000          LDRSH    r1,[r0,#0]            ;202  ; U_MIN
000b20  489f              LDR      r0,|L1.3488|
                  |L1.2850|
000b22  f7fffffe          BL       gran
000b26  f8a86000          STRH     r6,[r8,#0]            ;203
000b2a  f89a1004          LDRB     r1,[r10,#4]           ;204  ; modbus_cmnd_cnt
000b2e  f88a1000          STRB     r1,[r10,#0]           ;204
                  |L1.2866|
000b32  e167              B        |L1.3588|
                  |L1.2868|
000b34  7903              LDRB     r3,[r0,#4]            ;208  ; modbus_cmnd_cnt
000b36  f890c000          LDRB     r12,[r0,#0]           ;208  ; modbus_self_cmnd_cnt
000b3a  4563              CMP      r3,r12                ;208
000b3c  d0f9              BEQ      |L1.2866|
000b3e  7003              STRB     r3,[r0,#0]            ;210
000b40  f8980000          LDRB     r0,[r8,#0]            ;211  ; main_menu_mode
000b44  782b              LDRB     r3,[r5,#0]            ;211  ; work_stat
000b46  ea500c03          ORRS     r12,r0,r3             ;211
000b4a  d002              BEQ      |L1.2898|
000b4c  2801              CMP      r0,#1                 ;252
000b4e  d01c              BEQ      |L1.2954|
000b50  e158              B        |L1.3588|
                  |L1.2898|
000b52  8808              LDRH     r0,[r1,#0]            ;213  ; TIME_VISION_PULT
000b54  2800              CMP      r0,#0                 ;213
000b56  4895              LDR      r0,|L1.3500|
000b58  d004              BEQ      |L1.2916|
000b5a  6803              LDR      r3,[r0,#0]            ;215  ; T_PROC_GS
000b5c  fb93f1f9          SDIV     r1,r3,r9              ;215
000b60  1c49              ADDS     r1,r1,#1              ;215
000b62  e07a              B        |L1.3162|
                  |L1.2916|
000b64  6801              LDR      r1,[r0,#0]            ;220  ; T_PROC_GS
000b66  1c49              ADDS     r1,r1,#1              ;220
                  |L1.2920|
000b68  6001              STR      r1,[r0,#0]            ;220  ; T_PROC_GS
000b6a  e0a9              B        |L1.3264|
                  |L1.2924|
000b6c  6001              STR      r1,[r0,#0]            ;237  ; T_PROC_GS
000b6e  4890              LDR      r0,|L1.3504|
000b70  8801              LDRH     r1,[r0,#0]            ;237  ; T_PROC_GS_MODE
000b72  2901              CMP      r1,#1                 ;237
000b74  d0dd              BEQ      |L1.2866|
000b76  2101              MOVS     r1,#1                 ;490
000b78  e004              B        |L1.2948|
                  |L1.2938|
000b7a  488d              LDR      r0,|L1.3504|
000b7c  8801              LDRH     r1,[r0,#0]            ;245  ; T_PROC_GS_MODE
000b7e  2900              CMP      r1,#0                 ;245
000b80  d0d7              BEQ      |L1.2866|
000b82  2100              MOVS     r1,#0                 ;508
                  |L1.2948|
000b84  8001              STRH     r1,[r0,#0]            ;229
000b86  20ee              MOVS     r0,#0xee              ;230
000b88  e01c              B        |L1.3012|
                  |L1.2954|
000b8a  2b00              CMP      r3,#0                 ;252
000b8c  d1d1              BNE      |L1.2866|
000b8e  8808              LDRH     r0,[r1,#0]            ;254  ; TIME_VISION_PULT
000b90  2800              CMP      r0,#0                 ;254
000b92  4888              LDR      r0,|L1.3508|
000b94  d004              BEQ      |L1.2976|
000b96  6802              LDR      r2,[r0,#0]            ;256  ; T_PROC_PS
000b98  fb92f1f9          SDIV     r1,r2,r9              ;256
000b9c  1c49              ADDS     r1,r1,#1              ;256
000b9e  e06c              B        |L1.3194|
                  |L1.2976|
000ba0  6801              LDR      r1,[r0,#0]            ;261  ; T_PROC_PS
000ba2  1c49              ADDS     r1,r1,#1              ;261
                  |L1.2980|
000ba4  6001              STR      r1,[r0,#0]            ;261  ; T_PROC_PS
000ba6  e0b1              B        |L1.3340|
                  |L1.2984|
000ba8  6001              STR      r1,[r0,#0]            ;278  ; T_PROC_PS
000baa  4883              LDR      r0,|L1.3512|
000bac  8801              LDRH     r1,[r0,#0]            ;278  ; T_PROC_PS_MODE
000bae  2901              CMP      r1,#1                 ;278
000bb0  d00a              BEQ      |L1.3016|
000bb2  2101              MOVS     r1,#1                 ;532
000bb4  e004              B        |L1.3008|
                  |L1.2998|
000bb6  4880              LDR      r0,|L1.3512|
000bb8  8801              LDRH     r1,[r0,#0]            ;286  ; T_PROC_PS_MODE
000bba  2900              CMP      r1,#0                 ;286
000bbc  d004              BEQ      |L1.3016|
000bbe  2100              MOVS     r1,#0                 ;550
                  |L1.3008|
000bc0  8001              STRH     r1,[r0,#0]            ;288
000bc2  20f0              MOVS     r0,#0xf0              ;289
                  |L1.3012|
000bc4  f7fffffe          BL       lc640_write_int
                  |L1.3016|
000bc8  e11c              B        |L1.3588|
                  |L1.3018|
000bca  7903              LDRB     r3,[r0,#4]            ;294  ; modbus_cmnd_cnt
000bcc  f890c000          LDRB     r12,[r0,#0]           ;294  ; modbus_self_cmnd_cnt
000bd0  4563              CMP      r3,r12                ;294
000bd2  d008              BEQ      |L1.3046|
000bd4  7003              STRB     r3,[r0,#0]            ;296
000bd6  f8980000          LDRB     r0,[r8,#0]            ;297  ; main_menu_mode
000bda  782b              LDRB     r3,[r5,#0]            ;297  ; work_stat
000bdc  ea500c03          ORRS     r12,r0,r3             ;297
000be0  d002              BEQ      |L1.3048|
000be2  2801              CMP      r0,#1                 ;338
000be4  d010              BEQ      |L1.3080|
                  |L1.3046|
000be6  e10d              B        |L1.3588|
                  |L1.3048|
000be8  8808              LDRH     r0,[r1,#0]            ;299  ; TIME_VISION_PULT
000bea  b138              CBZ      r0,|L1.3068|
000bec  496f              LDR      r1,|L1.3500|
000bee  f44f7016          MOV      r0,#0x258             ;301
000bf2  680b              LDR      r3,[r1,#0]            ;301  ; T_PROC_GS
000bf4  fb93f0f0          SDIV     r0,r3,r0              ;301
000bf8  1c40              ADDS     r0,r0,#1              ;301
000bfa  e05d              B        |L1.3256|
                  |L1.3068|
000bfc  486b              LDR      r0,|L1.3500|
000bfe  6801              LDR      r1,[r0,#0]            ;306  ; T_PROC_GS
000c00  fb91f1f6          SDIV     r1,r1,r6              ;306
000c04  1c49              ADDS     r1,r1,#1              ;306
000c06  e06a              B        |L1.3294|
                  |L1.3080|
000c08  2b00              CMP      r3,#0                 ;338
000c0a  d11d              BNE      |L1.3144|
000c0c  8808              LDRH     r0,[r1,#0]            ;340  ; TIME_VISION_PULT
000c0e  b138              CBZ      r0,|L1.3104|
000c10  4968              LDR      r1,|L1.3508|
000c12  f44f7016          MOV      r0,#0x258             ;342
000c16  680a              LDR      r2,[r1,#0]            ;342  ; T_PROC_PS
000c18  fb92f0f0          SDIV     r0,r2,r0              ;342
000c1c  1c40              ADDS     r0,r0,#1              ;342
000c1e  e071              B        |L1.3332|
                  |L1.3104|
000c20  4864              LDR      r0,|L1.3508|
000c22  6801              LDR      r1,[r0,#0]            ;347  ; T_PROC_PS
000c24  fb91f1f6          SDIV     r1,r1,r6              ;347
000c28  1c49              ADDS     r1,r1,#1              ;347
000c2a  e07e              B        |L1.3370|
                  |L1.3116|
000c2c  7903              LDRB     r3,[r0,#4]            ;381  ; modbus_cmnd_cnt
000c2e  f890c000          LDRB     r12,[r0,#0]           ;381  ; modbus_self_cmnd_cnt
000c32  4563              CMP      r3,r12                ;381
000c34  d008              BEQ      |L1.3144|
000c36  7003              STRB     r3,[r0,#0]            ;383
000c38  f8980000          LDRB     r0,[r8,#0]            ;384  ; main_menu_mode
000c3c  782b              LDRB     r3,[r5,#0]            ;384  ; work_stat
000c3e  ea500c03          ORRS     r12,r0,r3             ;384
000c42  d002              BEQ      |L1.3146|
000c44  2801              CMP      r0,#1                 ;427
000c46  d00f              BEQ      |L1.3176|
                  |L1.3144|
000c48  e0dc              B        |L1.3588|
                  |L1.3146|
000c4a  8808              LDRH     r0,[r1,#0]            ;386  ; TIME_VISION_PULT
000c4c  2800              CMP      r0,#0                 ;386
000c4e  4857              LDR      r0,|L1.3500|
000c50  d007              BEQ      |L1.3170|
000c52  6803              LDR      r3,[r0,#0]            ;388  ; T_PROC_GS
000c54  fb93f1f9          SDIV     r1,r3,r9              ;388
000c58  1e49              SUBS     r1,r1,#1              ;388
                  |L1.3162|
000c5a  ebc11101          RSB      r1,r1,r1,LSL #4       ;388
000c5e  0089              LSLS     r1,r1,#2              ;388
000c60  e782              B        |L1.2920|
                  |L1.3170|
000c62  6801              LDR      r1,[r0,#0]            ;393  ; T_PROC_GS
000c64  1e49              SUBS     r1,r1,#1              ;393
000c66  e77f              B        |L1.2920|
                  |L1.3176|
000c68  bb9b              CBNZ     r3,|L1.3282|
000c6a  8808              LDRH     r0,[r1,#0]            ;429  ; TIME_VISION_PULT
000c6c  2800              CMP      r0,#0                 ;429
000c6e  4851              LDR      r0,|L1.3508|
000c70  d007              BEQ      |L1.3202|
000c72  6802              LDR      r2,[r0,#0]            ;431  ; T_PROC_PS
000c74  fb92f1f9          SDIV     r1,r2,r9              ;431
000c78  1e49              SUBS     r1,r1,#1              ;431
                  |L1.3194|
000c7a  ebc11101          RSB      r1,r1,r1,LSL #4       ;431
000c7e  0089              LSLS     r1,r1,#2              ;431
000c80  e790              B        |L1.2980|
                  |L1.3202|
000c82  6801              LDR      r1,[r0,#0]            ;436  ; T_PROC_PS
000c84  1e49              SUBS     r1,r1,#1              ;436
000c86  e78d              B        |L1.2980|
                  |L1.3208|
000c88  7903              LDRB     r3,[r0,#4]            ;469  ; modbus_cmnd_cnt
000c8a  f890c000          LDRB     r12,[r0,#0]           ;469  ; modbus_self_cmnd_cnt
000c8e  4563              CMP      r3,r12                ;469
000c90  d01f              BEQ      |L1.3282|
000c92  7003              STRB     r3,[r0,#0]            ;471
000c94  f8980000          LDRB     r0,[r8,#0]            ;472  ; main_menu_mode
000c98  782b              LDRB     r3,[r5,#0]            ;472  ; work_stat
000c9a  ea500c03          ORRS     r12,r0,r3             ;472
000c9e  d002              BEQ      |L1.3238|
000ca0  2801              CMP      r0,#1                 ;514
000ca2  d025              BEQ      |L1.3312|
000ca4  e0ae              B        |L1.3588|
                  |L1.3238|
000ca6  8808              LDRH     r0,[r1,#0]            ;474  ; TIME_VISION_PULT
000ca8  b1a0              CBZ      r0,|L1.3284|
000caa  4940              LDR      r1,|L1.3500|
000cac  f44f7016          MOV      r0,#0x258             ;476
000cb0  680b              LDR      r3,[r1,#0]            ;476  ; T_PROC_GS
000cb2  fb93f0f0          SDIV     r0,r3,r0              ;476
000cb6  1e40              SUBS     r0,r0,#1              ;476
                  |L1.3256|
000cb8  f44f7316          MOV      r3,#0x258             ;301
000cbc  4358              MULS     r0,r3,r0              ;301
000cbe  6008              STR      r0,[r1,#0]            ;301  ; T_PROC_GS
                  |L1.3264|
000cc0  483a              LDR      r0,|L1.3500|
000cc2  493e              LDR      r1,|L1.3516|
000cc4  8016              STRH     r6,[r2,#0]            ;482
000cc6  6802              LDR      r2,[r0,#0]            ;224  ; T_PROC_GS
000cc8  6809              LDR      r1,[r1,#0]            ;224  ; T_PROC_MAX
000cca  428a              CMP      r2,r1                 ;224
000ccc  dd0b              BLE      |L1.3302|
000cce  1c49              ADDS     r1,r1,#1              ;487
000cd0  e74c              B        |L1.2924|
                  |L1.3282|
000cd2  e04d              B        |L1.3440|
                  |L1.3284|
000cd4  4835              LDR      r0,|L1.3500|
000cd6  6801              LDR      r1,[r0,#0]            ;481  ; T_PROC_GS
000cd8  fb91f1f6          SDIV     r1,r1,r6              ;481
000cdc  1e49              SUBS     r1,r1,#1              ;481
                  |L1.3294|
000cde  eb010181          ADD      r1,r1,r1,LSL #2       ;481
000ce2  0049              LSLS     r1,r1,#1              ;481
000ce4  e740              B        |L1.2920|
                  |L1.3302|
000ce6  2a1e              CMP      r2,#0x1e              ;495
000ce8  f6bfaf47          BGE      |L1.2938|
000cec  211d              MOVS     r1,#0x1d              ;497
000cee  e73d              B        |L1.2924|
                  |L1.3312|
000cf0  bbf3              CBNZ     r3,|L1.3440|
000cf2  8808              LDRH     r0,[r1,#0]            ;516  ; TIME_VISION_PULT
000cf4  b1a0              CBZ      r0,|L1.3360|
000cf6  492f              LDR      r1,|L1.3508|
000cf8  f44f7016          MOV      r0,#0x258             ;518
000cfc  680a              LDR      r2,[r1,#0]            ;518  ; T_PROC_PS
000cfe  fb92f0f0          SDIV     r0,r2,r0              ;518
000d02  1e40              SUBS     r0,r0,#1              ;518
                  |L1.3332|
000d04  f44f7216          MOV      r2,#0x258             ;342
000d08  4350              MULS     r0,r2,r0              ;342
000d0a  6008              STR      r0,[r1,#0]            ;342  ; T_PROC_PS
                  |L1.3340|
000d0c  4829              LDR      r0,|L1.3508|
000d0e  492b              LDR      r1,|L1.3516|
000d10  f8aa6000          STRH     r6,[r10,#0]           ;524
000d14  6802              LDR      r2,[r0,#0]            ;265  ; T_PROC_PS
000d16  6809              LDR      r1,[r1,#0]            ;265  ; T_PROC_MAX
000d18  428a              CMP      r2,r1                 ;265
000d1a  dd0a              BLE      |L1.3378|
000d1c  1c49              ADDS     r1,r1,#1              ;529
000d1e  e743              B        |L1.2984|
                  |L1.3360|
000d20  4824              LDR      r0,|L1.3508|
000d22  6801              LDR      r1,[r0,#0]            ;523  ; T_PROC_PS
000d24  fb91f1f6          SDIV     r1,r1,r6              ;523
000d28  1e49              SUBS     r1,r1,#1              ;523
                  |L1.3370|
000d2a  eb010181          ADD      r1,r1,r1,LSL #2       ;523
000d2e  0049              LSLS     r1,r1,#1              ;523
000d30  e738              B        |L1.2980|
                  |L1.3378|
000d32  2a1e              CMP      r2,#0x1e              ;537
000d34  f6bfaf3f          BGE      |L1.2998|
000d38  211d              MOVS     r1,#0x1d              ;539
000d3a  e735              B        |L1.2984|
                  |L1.3388|
000d3c  7901              LDRB     r1,[r0,#4]  ; modbus_cmnd_cnt
000d3e  7802              LDRB     r2,[r0,#0]  ; modbus_self_cmnd_cnt
000d40  4291              CMP      r1,r2
000d42  d05f              BEQ      |L1.3588|
;;;560    					{
;;;561    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;562    					if(tumbler_stat==tsI)
;;;563    						{
;;;564    						if(work_stat!=wsGS)
;;;565    							{
;;;566    							work_stat=wsGS;
;;;567    							time_proc=0;
;;;568    							time_proc_remain=T_PROC_GS;
;;;569    							index_set=0;
000d44  4e1e              LDR      r6,|L1.3520|
000d46  7001              STRB     r1,[r0,#0]            ;561
000d48  46f0              MOV      r8,lr                 ;562
000d4a  f1bc0f00          CMP      r12,#0                ;562
000d4e  d141              BNE      |L1.3540|
000d50  7828              LDRB     r0,[r5,#0]            ;564  ; work_stat
000d52  2801              CMP      r0,#1                 ;564
000d54  d03a              BEQ      |L1.3532|
000d56  2001              MOVS     r0,#1                 ;566
000d58  491a              LDR      r1,|L1.3524|
000d5a  7028              STRB     r0,[r5,#0]            ;566
000d5c  2000              MOVS     r0,#0                 ;567
000d5e  6008              STR      r0,[r1,#0]            ;568  ; time_proc
000d60  4912              LDR      r1,|L1.3500|
000d62  680a              LDR      r2,[r1,#0]            ;568  ; T_PROC_GS
000d64  4918              LDR      r1,|L1.3528|
000d66  600a              STR      r2,[r1,#0]  ; time_proc_remain
000d68  7130              STRB     r0,[r6,#4]
;;;570    							restart_on_GS();
000d6a  f7fffffe          BL       restart_on_GS
000d6e  e031              B        |L1.3540|
                  |L1.3440|
000d70  e043              B        |L1.3578|
000d72  0000              DCW      0x0000
                  |L1.3444|
                          DCD      tumbler_stat
                  |L1.3448|
                          DCD      tumbler_stat_old
                  |L1.3452|
                          DCD      main_cnt
                  |L1.3456|
                          DCD      I_ug_block_cnt
                  |L1.3460|
                          DCD      U_up_block_cnt
                  |L1.3464|
                          DCD      TIME_VISION_PULT
                  |L1.3468|
                          DCD      T_PROC_GS_block_cnt
                  |L1.3472|
                          DCD      T_PROC_PS_block_cnt
                  |L1.3476|
                          DCD      main_menu_mode
                  |L1.3480|
                          DCD      I_ug
                  |L1.3484|
                          DCD      I_MIN_IPS
                  |L1.3488|
                          DCD      U_up
                  |L1.3492|
                          DCD      U_MAX
                  |L1.3496|
                          DCD      U_MIN
                  |L1.3500|
                          DCD      T_PROC_GS
                  |L1.3504|
                          DCD      T_PROC_GS_MODE
                  |L1.3508|
                          DCD      T_PROC_PS
                  |L1.3512|
                          DCD      T_PROC_PS_MODE
                  |L1.3516|
                          DCD      T_PROC_MAX
                  |L1.3520|
                          DCD      a_ind
                  |L1.3524|
                          DCD      time_proc
                  |L1.3528|
                          DCD      time_proc_remain
                  |L1.3532|
;;;571    							}			
;;;572    						else 
;;;573    							{
;;;574    							work_stat=wsOFF;
000dcc  2000              MOVS     r0,#0
000dce  7028              STRB     r0,[r5,#0]
;;;575    							restart_off();
000dd0  f7fffffe          BL       restart_off
                  |L1.3540|
;;;576    							}
;;;577    						}
;;;578    				
;;;579    					if(tumbler_stat==tsU)
000dd4  f8980000          LDRB     r0,[r8,#0]  ; tumbler_stat
000dd8  2801              CMP      r0,#1
000dda  d113              BNE      |L1.3588|
;;;580    						{
;;;581    						if(work_stat!=wsPS)
000ddc  7828              LDRB     r0,[r5,#0]  ; work_stat
000dde  2802              CMP      r0,#2
000de0  d00c              BEQ      |L1.3580|
;;;582    							{
;;;583    							work_stat=wsPS;
000de2  2002              MOVS     r0,#2
;;;584    							time_proc=0;
000de4  49f9              LDR      r1,|L1.4556|
000de6  7028              STRB     r0,[r5,#0]            ;583
000de8  2000              MOVS     r0,#0
;;;585    							time_proc_remain=T_PROC_PS;
000dea  6008              STR      r0,[r1,#0]  ; time_proc
000dec  49f8              LDR      r1,|L1.4560|
000dee  680a              LDR      r2,[r1,#0]  ; T_PROC_PS
000df0  49f8              LDR      r1,|L1.4564|
;;;586    							index_set=0;
000df2  600a              STR      r2,[r1,#0]  ; time_proc_remain
000df4  7130              STRB     r0,[r6,#4]
;;;587    							restart_on_PS();
000df6  f7fffffe          BL       restart_on_PS
                  |L1.3578|
000dfa  e003              B        |L1.3588|
                  |L1.3580|
;;;588    							}			
;;;589    						else
;;;590    							{
;;;591    							work_stat=wsOFF;
000dfc  2000              MOVS     r0,#0
000dfe  7028              STRB     r0,[r5,#0]
;;;592    							restart_off();
000e00  f7fffffe          BL       restart_off
                  |L1.3588|
;;;593    							}
;;;594    						}
;;;595    					}
;;;596    				}
;;;597    			}
;;;598    		}
;;;599    
;;;600    	if(modbus_an_buffer[0]==MODBUS_ADRESS)
000e04  48f4              LDR      r0,|L1.4568|
000e06  7801              LDRB     r1,[r0,#0]  ; modbus_an_buffer
000e08  48f4              LDR      r0,|L1.4572|
000e0a  f9b00000          LDRSH    r0,[r0,#0]  ; MODBUS_ADRESS
000e0e  4281              CMP      r1,r0
000e10  d159              BNE      |L1.3782|
;;;601    		{
;;;602    		if(modbus_func==3)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
000e12  9901              LDR      r1,[sp,#4]
000e14  2903              CMP      r1,#3
000e16  d04a              BEQ      |L1.3758|
;;;603    			{
;;;604    			if((modbus_rx_arg0>=50)&&(modbus_rx_arg0<80)) modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func, modbus_rx_arg0,modbus_rx_arg1, MODBUS_RTU_PROT);
;;;605    			}
;;;606    		else if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ	βυξδξβ
000e18  2904              CMP      r1,#4
000e1a  d056              BEQ      |L1.3786|
;;;607    			{
;;;608    			modbus_input_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0, modbus_rx_arg1, MODBUS_RTU_PROT);
;;;609    			}
;;;610    
;;;611    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
000e1c  2906              CMP      r1,#6
000e1e  d152              BNE      |L1.3782|
;;;612    			{
;;;613    			if(modbus_rx_arg0==50)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000e20  2f32              CMP      r7,#0x32
000e22  d05b              BEQ      |L1.3804|
;;;614    				{
;;;615    				I_ug=modbus_rx_arg1;
;;;616    				lc640_write_int(EE_I_UG,I_ug);
;;;617    				}
;;;618    			if(modbus_rx_arg0==51)		//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
000e24  2f33              CMP      r7,#0x33
000e26  d05e              BEQ      |L1.3814|
;;;619    				{
;;;620    				U_up=modbus_rx_arg1;
;;;621    				lc640_write_int(EE_U_UP,U_up);
;;;622    				}
;;;623    			if(modbus_rx_arg0==52)		//μΰκρθμΰολόνξε νΰοπζενθε δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000e28  2f34              CMP      r7,#0x34
000e2a  d061              BEQ      |L1.3824|
;;;624    				{
;;;625    				U_maxg=modbus_rx_arg1;
;;;626    				lc640_write_int(EE_U_MAX_G,U_maxg);
;;;627    				}
;;;628    			if(modbus_rx_arg0==53)		//μΰκρθμΰλόνϋι ςξκ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
000e2c  2f35              CMP      r7,#0x35
000e2e  d064              BEQ      |L1.3834|
;;;629    				{
;;;630    				I_maxp=modbus_rx_arg1;
;;;631    				lc640_write_int(EE_I_MAX_P,I_maxp);
;;;632    				}								
;;;633    			if(modbus_rx_arg0==54)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.ρεκσνδϋ
;;;634    				{
;;;635    				signed long sec,min,hour;
;;;636    				sec=(signed long)modbus_rx_arg1;
;;;637    				min=(T_PROC_GS/60L)%60L;
;;;638    				hour=T_PROC_GS/3600L;
000e30  f44f6061          MOV      r0,#0xe10
000e34  2f36              CMP      r7,#0x36              ;633
000e36  d065              BEQ      |L1.3844|
;;;639    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;640    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;641    				}
;;;642    			if(modbus_rx_arg0==55)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.μθνσςϋ
000e38  2f37              CMP      r7,#0x37
000e3a  d077              BEQ      |L1.3884|
;;;643    				{
;;;644    				signed long sec,min,hour;
;;;645    				sec=T_PROC_GS%60L;
;;;646    				min=(signed long)modbus_rx_arg1;
;;;647    				hour=T_PROC_GS/3600L;
;;;648    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;649    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;650    				}
;;;651    			if(modbus_rx_arg0==56)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.χΰρϋ
000e3c  2f38              CMP      r7,#0x38
000e3e  d076              BEQ      |L1.3886|
;;;652    				{
;;;653    				signed long sec,min,hour;
;;;654    				sec=T_PROC_GS%60L;
;;;655    				min=(T_PROC_GS/60L)%60L;
;;;656    				hour=(signed long)modbus_rx_arg1;
;;;657    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;658    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;659    				}
;;;660    			if(modbus_rx_arg0==57)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.ρεκσνδϋ
000e40  2f39              CMP      r7,#0x39
000e42  d075              BEQ      |L1.3888|
;;;661    				{
;;;662    				signed long sec,min,hour;
;;;663    				sec=(signed long)modbus_rx_arg1;
;;;664    				min=(T_PROC_PS/60L)%60L;
;;;665    				hour=T_PROC_PS/3600L;
;;;666    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;667    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;668    				}
;;;669    
;;;670    			if(modbus_rx_arg0==58)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.μθνσςϋ
000e44  2f3a              CMP      r7,#0x3a
000e46  d074              BEQ      |L1.3890|
;;;671    				{
;;;672    				signed long sec,min,hour;
;;;673    				sec=T_PROC_PS%60L;
;;;674    				min=(signed long)modbus_rx_arg1;
;;;675    				hour=T_PROC_PS/3600L;
;;;676    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;677    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;678    				}
;;;679    
;;;680    			if(modbus_rx_arg0==59)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.χΰρϋ
000e48  2f3b              CMP      r7,#0x3b
000e4a  d073              BEQ      |L1.3892|
;;;681    				{
;;;682    				signed long sec,min,hour;
;;;683    				sec=T_PROC_PS%60L;
;;;684    				min=(T_PROC_PS/60L)%60L;
;;;685    				hour=(signed long)modbus_rx_arg1;
;;;686    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;687    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;688    				}
;;;689    
;;;690    			if(modbus_rx_arg0==60)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
000e4c  2f3c              CMP      r7,#0x3c
000e4e  d072              BEQ      |L1.3894|
;;;691    				{
;;;692    				if(modbus_rx_arg1==1)
;;;693    					{
;;;694    					if(work_stat!=wsPS)
;;;695    						{
;;;696    						work_stat=wsPS;
;;;697    						time_proc=0;
;;;698    						time_proc_remain=T_PROC_PS;
;;;699    						restart_on_PS();
;;;700    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;701    						}
;;;702    					}
;;;703    				if(modbus_rx_arg1==0)
;;;704    					{
;;;705    					if(work_stat==wsPS)
;;;706    						{
;;;707    						work_stat=wsOFF;
;;;708    						restart_off();
;;;709    						}
;;;710    					}
;;;711    				}
;;;712    			if(modbus_rx_arg0==61)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
000e50  2f3d              CMP      r7,#0x3d
000e52  d071              BEQ      |L1.3896|
;;;713    				{
;;;714    				if(modbus_rx_arg1==1)
;;;715    					{
;;;716    					if(work_stat!=wsGS)
;;;717    						{
;;;718    						work_stat=wsGS;
;;;719    						time_proc=0;
;;;720    						time_proc_remain=T_PROC_GS;
;;;721    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;722    						}
;;;723    					}
;;;724    				if(modbus_rx_arg1==0)
;;;725    					{
;;;726    					if(work_stat==wsGS)
;;;727    						{
;;;728    						work_stat=wsOFF;
;;;729    						restart_off();
;;;730    						}
;;;731    					}
;;;732    				}
;;;733    
;;;734    			if(modbus_rx_arg0==62)		//οεπεκλώχενθε πελε πεβεπρΰ
000e54  2f3e              CMP      r7,#0x3e
000e56  d070              BEQ      |L1.3898|
;;;735    				{
;;;736    					{
;;;737    					if(work_stat==wsOFF)
;;;738    						{
;;;739    						if(modbus_rx_arg1==0)REV_STAT=rsFF;
;;;740    						if(modbus_rx_arg1==1)REV_STAT=rsREW;
;;;741    						}
;;;742    					}
;;;743    				}
;;;744    			if(modbus_rx_arg0==63)		//βκλώχενθε-βϋκλώχενθε ΰβςξπεβεπρΰ
000e58  2f3f              CMP      r7,#0x3f
000e5a  d06f              BEQ      |L1.3900|
;;;745    				{
;;;746    					{
;;;747    					if((work_stat==wsOFF)&&(REV_IS_ON))
;;;748    						{
;;;749    						if(modbus_rx_arg1==1)AVT_REV_IS_ON=1;
;;;750    						if(modbus_rx_arg1==0)AVT_REV_IS_ON=0;
;;;751    						lc640_write_int(EE_AVT_REV_IS_ON,AVT_REV_IS_ON);
;;;752    						}
;;;753    					}
;;;754    				}
;;;755    			if(modbus_rx_arg0==64)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ οπμξε, ρεκ
000e5c  2f40              CMP      r7,#0x40
000e5e  d06e              BEQ      |L1.3902|
;;;756    				{
;;;757    				if(work_stat==wsOFF)
;;;758    					{
;;;759    					AVT_REV_TIME_FF=modbus_rx_arg1;
;;;760    					gran(&AVT_REV_TIME_FF,30,T_PROC_MAX);
;;;761    					lc640_write_int(EE_AVT_REV_TIME_FF,AVT_REV_TIME_FF);	
;;;762    					}
;;;763    				}
;;;764    			if(modbus_rx_arg0==65)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ ξαπΰςνξε, ρεκ
000e60  2f41              CMP      r7,#0x41
000e62  d06d              BEQ      |L1.3904|
;;;765    				{
;;;766    				if(work_stat==wsOFF)
;;;767    					{
;;;768    					AVT_REV_TIME_REW=modbus_rx_arg1;
;;;769    					gran(&AVT_REV_TIME_REW,30,T_PROC_MAX);
;;;770    					lc640_write_int(EE_AVT_REV_TIME_REW,AVT_REV_TIME_REW);	
;;;771    					}
;;;772    				}
;;;773    			if(modbus_rx_arg0==66)		//ΐβςξπεβεπρ, βπεμ οΰσηϋ οπθ οεπεκλώχενθθ, ρεκ
000e64  2f42              CMP      r7,#0x42
000e66  d06c              BEQ      |L1.3906|
;;;774    				{
;;;775    				if(work_stat==wsOFF)
;;;776    					{
;;;777    					AVT_REV_TIME_PAUSE=modbus_rx_arg1;
;;;778    					gran(&AVT_REV_TIME_PAUSE,2,600);
;;;779    					lc640_write_int(EE_AVT_REV_TIME_PAUSE,AVT_REV_TIME_PAUSE);	
;;;780    					}
;;;781    				}
;;;782    
;;;783    			if(modbus_rx_arg0==67)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ οπμξι, 0.1ΐ
000e68  2f43              CMP      r7,#0x43
000e6a  d06b              BEQ      |L1.3908|
;;;784    				{
;;;785    				if(work_stat==wsOFF)
;;;786    					{
;;;787    					AVT_REV_I_NOM_FF=modbus_rx_arg1;
;;;788    		    			gran(&AVT_REV_I_NOM_FF,I_MIN_IPS,I_MAX_IPS);
;;;789    					lc640_write_int(EE_AVT_REV_I_NOM_FF,AVT_REV_I_NOM_FF);	
;;;790    					}
;;;791    				}
;;;792    
;;;793    			if(modbus_rx_arg0==68)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ ξαπΰςνϋι, 0.1ΐ
000e6c  2f44              CMP      r7,#0x44
000e6e  d06a              BEQ      |L1.3910|
;;;794    				{
;;;795    				if(work_stat==wsOFF)
;;;796    					{
;;;797    					AVT_REV_I_NOM_REW=modbus_rx_arg1;
;;;798    		    			gran(&AVT_REV_I_NOM_REW,I_MIN_IPS,I_MAX_IPS);
;;;799    					lc640_write_int(EE_AVT_REV_I_NOM_REW,AVT_REV_I_NOM_REW);	
;;;800    					}
;;;801    				}
;;;802    			if(modbus_rx_arg0==69)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ οπμξε, 0.1Β 
000e70  2f45              CMP      r7,#0x45
000e72  d069              BEQ      |L1.3912|
;;;803    				{
;;;804    				if(work_stat==wsOFF)
;;;805    					{
;;;806    					AVT_REV_U_NOM_FF=modbus_rx_arg1;
;;;807    		    			gran(&AVT_REV_U_NOM_FF,U_MIN,U_MAX);
;;;808    					lc640_write_int(EE_AVT_REV_U_NOM_FF,AVT_REV_U_NOM_FF);					
;;;809    					}
;;;810    				}
;;;811    
;;;812    			if(modbus_rx_arg0==70)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ ξαπΰςνξε, 0.1Β
000e74  2f46              CMP      r7,#0x46
000e76  d068              BEQ      |L1.3914|
;;;813    				{
;;;814    				if(work_stat==wsOFF)
;;;815    					{
;;;816    					AVT_REV_U_NOM_REW=modbus_rx_arg1;
;;;817    		    			gran(&AVT_REV_U_NOM_REW,U_MIN,U_MAX);
;;;818    					lc640_write_int(EE_AVT_REV_U_NOM_REW,AVT_REV_U_NOM_REW);					
;;;819    					}
;;;820    				}
;;;821    
;;;822    			if(modbus_rx_arg0==71)		//Βπεμ ηΰπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;823    				{
;;;824    				if(work_stat==wsOFF)
;;;825    					{
;;;826    					CAP_ZAR_TIME=modbus_rx_arg1;
000e78  4ed9              LDR      r6,|L1.4576|
;;;827    		    			gran(&CAP_ZAR_TIME,10,9999);
000e7a  f242720f          MOV      r2,#0x270f
000e7e  2f47              CMP      r7,#0x47              ;822
000e80  d074              BEQ      |L1.3948|
;;;828    					lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;829    					}
;;;830    				}
;;;831    			if(modbus_rx_arg0==72)		//Βπεμ οΰσηϋ1 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;832    				{
;;;833    				if(work_stat==wsOFF)
;;;834    					{
;;;835    					CAP_PAUSE1_TIME=modbus_rx_arg1;
000e82  f8df8360          LDR      r8,|L1.4580|
000e86  2f48              CMP      r7,#0x48              ;831
000e88  d071              BEQ      |L1.3950|
;;;836    		    			gran(&CAP_PAUSE1_TIME,10,9999);
;;;837    					lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;838    					}
;;;839    				}
;;;840    			if(modbus_rx_arg0==73)		//Βπεμ πΰηπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;841    				{
;;;842    				if(work_stat==wsOFF)
;;;843    					{
;;;844    					CAP_RAZR_TIME=modbus_rx_arg1;
000e8a  f8df935c          LDR      r9,|L1.4584|
000e8e  2f49              CMP      r7,#0x49              ;840
000e90  d06e              BEQ      |L1.3952|
;;;845    		    			gran(&CAP_RAZR_TIME,10,9999);
;;;846    					lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;847    					}
;;;848    				}
;;;849    			if(modbus_rx_arg0==74)		//Βπεμ οΰσηϋ2 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;850    				{
;;;851    				if(work_stat==wsOFF)
;;;852    					{
;;;853    					CAP_PAUSE2_TIME=modbus_rx_arg1;
000e92  f8dfb358          LDR      r11,|L1.4588|
000e96  2f4a              CMP      r7,#0x4a              ;849
000e98  d06b              BEQ      |L1.3954|
;;;854    		    			gran(&CAP_PAUSE2_TIME,10,9999);
;;;855    					lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;856    					}
;;;857    				}
;;;858    
;;;859    			if(modbus_rx_arg0==75)		//Μΰκρθμΰλόνξε νΰοπζενθε θροϋςΰςελόνξγξ φθκλΰ, 1Β  
;;;860    				{
;;;861    				if(work_stat==wsOFF)
;;;862    					{
;;;863    					CAP_MAX_VOLT=modbus_rx_arg1;
000e9a  48d5              LDR      r0,|L1.4592|
000e9c  2f4b              CMP      r7,#0x4b              ;859
000e9e  d069              BEQ      |L1.3956|
;;;864    		    			gran(&CAP_MAX_VOLT,1,100);
;;;865    					lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;866    					}
;;;867    				}
;;;868    			if(modbus_rx_arg0==76)		//Πΰαξχθι ςξκ θροϋςΰςελόνξγξ φθκλΰ, 1ΐ 
;;;869    				{
;;;870    				if(work_stat==wsOFF)
;;;871    					{
;;;872    					CAP_WRK_CURR=modbus_rx_arg1;
000ea0  f8dfa350          LDR      r10,|L1.4596|
000ea4  2f4c              CMP      r7,#0x4c              ;868
000ea6  d07d              BEQ      |L1.4004|
;;;873    		    			gran(&CAP_WRK_CURR,1,150);
;;;874    					lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;875    					}
;;;876    				}
;;;877    
;;;878    			if(modbus_rx_arg0==77)		//Πεγθρςπ δλ ηΰοθρθ κξμΰνδ 
000ea8  2f4d              CMP      r7,#0x4d
000eaa  d07c              BEQ      |L1.4006|
000eac  e292              B        |L1.5076|
                  |L1.3758|
000eae  f1a70132          SUB      r1,r7,#0x32           ;604
000eb2  291e              CMP      r1,#0x1e              ;604
000eb4  d207              BCS      |L1.3782|
000eb6  2100              MOVS     r1,#0                 ;604
000eb8  9100              STR      r1,[sp,#0]            ;604
000eba  4623              MOV      r3,r4                 ;604
000ebc  463a              MOV      r2,r7                 ;604
000ebe  b2c0              UXTB     r0,r0                 ;604
000ec0  9901              LDR      r1,[sp,#4]            ;604
000ec2  f7fffffe          BL       modbus_hold_registers_transmit
                  |L1.3782|
;;;879    				{
;;;880    				if(modbus_rx_arg1==0x11)
;;;881    					{
;;;882    					start_CAP();
;;;883    					}
;;;884    				if(modbus_rx_arg1==0x12)
;;;885    					{
;;;886    					pause_CAP();
;;;887    					}
;;;888    				if(modbus_rx_arg1==0x13)
;;;889    					{
;;;890    					stop_CAP();
;;;891    					}
;;;892    				if(modbus_rx_arg1==0x14)
;;;893    					{
;;;894    					reset_CAP();
;;;895    					}
;;;896    
;;;897    				if(modbus_rx_arg1==0x21)
;;;898    					{
;;;899    					if(work_stat==wsOFF)
;;;900    						{
;;;901    						CAP_ZAR_TIME++;
;;;902    		    				gran(&CAP_ZAR_TIME,10,9999);
;;;903    						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;904    						}
;;;905    					}
;;;906    				if(modbus_rx_arg1==0x22)
;;;907    					{
;;;908    					if(work_stat==wsOFF)
;;;909    						{
;;;910    						CAP_ZAR_TIME--;
;;;911    		    				gran(&CAP_ZAR_TIME,10,9999);
;;;912    						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;913    						}
;;;914    					}
;;;915    
;;;916    				if(modbus_rx_arg1==0x31)
;;;917    					{
;;;918    					if(work_stat==wsOFF)
;;;919    						{
;;;920    						CAP_PAUSE1_TIME++;
;;;921    		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;922    						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;923    						}
;;;924    					}
;;;925    				if(modbus_rx_arg1==0x32)
;;;926    					{
;;;927    					if(work_stat==wsOFF)
;;;928    						{
;;;929    						CAP_PAUSE1_TIME--;
;;;930    		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;931    						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;932    						}
;;;933    					}
;;;934    
;;;935    				if(modbus_rx_arg1==0x41)
;;;936    					{
;;;937    					if(work_stat==wsOFF)
;;;938    						{
;;;939    						CAP_RAZR_TIME++;
;;;940    		    				gran(&CAP_RAZR_TIME,10,9999);
;;;941    						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;942    						}
;;;943    					}
;;;944    				if(modbus_rx_arg1==0x42)
;;;945    					{
;;;946    					if(work_stat==wsOFF)
;;;947    						{
;;;948    						CAP_RAZR_TIME--;
;;;949    		    				gran(&CAP_RAZR_TIME,10,9999);
;;;950    						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;951    						}
;;;952    					}
;;;953    
;;;954    				if(modbus_rx_arg1==0x51)
;;;955    					{
;;;956    					if(work_stat==wsOFF)
;;;957    						{
;;;958    						CAP_PAUSE2_TIME++;
;;;959    		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;960    						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;961    						}
;;;962    					}
;;;963    				if(modbus_rx_arg1==0x52)
;;;964    					{
;;;965    					if(work_stat==wsOFF)
;;;966    						{
;;;967    						CAP_PAUSE2_TIME--;
;;;968    		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;969    						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;970    						}
;;;971    					}
;;;972    
;;;973    				if(modbus_rx_arg1==0x61)
;;;974    					{
;;;975    					if(work_stat==wsOFF)
;;;976    						{
;;;977    						CAP_MAX_VOLT++;
;;;978    		    				gran(&CAP_MAX_VOLT,1,100);
;;;979    						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;980    						}
;;;981    					}
;;;982    				if(modbus_rx_arg1==0x62)
;;;983    					{
;;;984    					if(work_stat==wsOFF)
;;;985    						{
;;;986    						CAP_MAX_VOLT--;
;;;987    		    				gran(&CAP_MAX_VOLT,1,100);
;;;988    						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;989    						}
;;;990    					}
;;;991    
;;;992    				if(modbus_rx_arg1==0x71)
;;;993    					{
;;;994    					if(work_stat==wsOFF)
;;;995    						{
;;;996    						CAP_WRK_CURR++;
;;;997    		    				gran(&CAP_WRK_CURR,1,150);
;;;998    						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;999    						}
;;;1000   					}
;;;1001   				if(modbus_rx_arg1==0x72)
;;;1002   					{
;;;1003   					if(work_stat==wsOFF)
;;;1004   						{
;;;1005   						CAP_WRK_CURR--;
;;;1006   		    				gran(&CAP_WRK_CURR,1,150);
;;;1007   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1008   						}
;;;1009   					}
;;;1010   
;;;1011   				}
;;;1012   
;;;1013   			
;;;1014   			if((T_PROC_GS>T_PROC_MAX)||(T_PROC_GS<30))
;;;1015   				{
;;;1016   				if(T_PROC_GS>T_PROC_MAX)T_PROC_GS=T_PROC_MAX+1;
;;;1017   				else if(T_PROC_GS<30)T_PROC_GS=29;
;;;1018   				lc640_write_int(EE_T_PROC_GS,T_PROC_GS);
;;;1019   				T_PROC_GS_MODE=1;	
;;;1020   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1021   				}
;;;1022   			if((T_PROC_GS<=T_PROC_MAX)&&(T_PROC_GS>=30))
;;;1023   				{
;;;1024   				T_PROC_GS_MODE=0;	
;;;1025   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1026   				}
;;;1027   			
;;;1028   			if((T_PROC_PS>T_PROC_MAX)||(T_PROC_PS<30))
;;;1029   				{
;;;1030   				if(T_PROC_PS>T_PROC_MAX)T_PROC_PS=T_PROC_MAX+1;
;;;1031   				else if(T_PROC_PS<30)T_PROC_PS=29;
;;;1032   				lc640_write_int(EE_T_PROC_PS,T_PROC_PS);
;;;1033   				T_PROC_PS_MODE=1;	
;;;1034   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1035   				}
;;;1036   			if((T_PROC_PS<=T_PROC_MAX)&&(T_PROC_PS>=30))
;;;1037   				{
;;;1038   				T_PROC_PS_MODE=0;	
;;;1039   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1040   				}
;;;1041   
;;;1042   			modbus_hold_register_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0);
;;;1043   
;;;1044   
;;;1045   			//modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,2);
;;;1046   
;;;1047   
;;;1048   			}
;;;1049   		} 
;;;1050   	//;
;;;1051   	}
;;;1052   // modbus_plazma++;
;;;1053   
;;;1054   }
000ec6  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.3786|
000eca  2100              MOVS     r1,#0                 ;608
000ecc  9100              STR      r1,[sp,#0]            ;608
000ece  4623              MOV      r3,r4                 ;608
000ed0  463a              MOV      r2,r7                 ;608
000ed2  b2c0              UXTB     r0,r0                 ;608
000ed4  9901              LDR      r1,[sp,#4]            ;608
000ed6  f7fffffe          BL       modbus_input_registers_transmit
000eda  e7f4              B        |L1.3782|
                  |L1.3804|
000edc  48c6              LDR      r0,|L1.4600|
000ede  b221              SXTH     r1,r4                 ;615
000ee0  8001              STRH     r1,[r0,#0]            ;615
000ee2  2020              MOVS     r0,#0x20              ;616
000ee4  e271              B        |L1.5066|
                  |L1.3814|
000ee6  48c5              LDR      r0,|L1.4604|
000ee8  b221              SXTH     r1,r4                 ;620
000eea  8001              STRH     r1,[r0,#0]            ;620
000eec  2022              MOVS     r0,#0x22              ;621
000eee  e26c              B        |L1.5066|
                  |L1.3824|
000ef0  48c3              LDR      r0,|L1.4608|
000ef2  b221              SXTH     r1,r4                 ;625
000ef4  8001              STRH     r1,[r0,#0]            ;625
000ef6  2076              MOVS     r0,#0x76              ;626
000ef8  e267              B        |L1.5066|
                  |L1.3834|
000efa  48c2              LDR      r0,|L1.4612|
000efc  b221              SXTH     r1,r4                 ;630
000efe  8001              STRH     r1,[r0,#0]            ;630
000f00  2078              MOVS     r0,#0x78              ;631
000f02  e262              B        |L1.5066|
                  |L1.3844|
000f04  4ac0              LDR      r2,|L1.4616|
000f06  4649              MOV      r1,r9                 ;637
000f08  6813              LDR      r3,[r2,#0]            ;637  ; T_PROC_GS
000f0a  fb93f5f1          SDIV     r5,r3,r1              ;637
000f0e  fb95f6f9          SDIV     r6,r5,r9              ;637
000f12  fb93f0f0          SDIV     r0,r3,r0              ;638
000f16  fb095116          MLS      r1,r9,r6,r5           ;637
000f1a  f44f6361          MOV      r3,#0xe10             ;639
000f1e  4358              MULS     r0,r3,r0              ;639
000f20  ebc11101          RSB      r1,r1,r1,LSL #4       ;639
000f24  eb000081          ADD      r0,r0,r1,LSL #2       ;639
000f28  1901              ADDS     r1,r0,r4              ;639
000f2a  e024              B        |L1.3958|
                  |L1.3884|
000f2c  e00e              B        |L1.3916|
                  |L1.3886|
000f2e  e025              B        |L1.3964|
                  |L1.3888|
000f30  e03a              B        |L1.4008|
                  |L1.3890|
000f32  e04d              B        |L1.4048|
                  |L1.3892|
000f34  e05d              B        |L1.4082|
                  |L1.3894|
000f36  e074              B        |L1.4130|
                  |L1.3896|
000f38  e08b              B        |L1.4178|
                  |L1.3898|
000f3a  e0a5              B        |L1.4232|
                  |L1.3900|
000f3c  e0b1              B        |L1.4258|
                  |L1.3902|
000f3e  e0c3              B        |L1.4296|
                  |L1.3904|
000f40  e0d2              B        |L1.4328|
                  |L1.3906|
000f42  e0e2              B        |L1.4362|
                  |L1.3908|
000f44  e0f0              B        |L1.4392|
                  |L1.3910|
000f46  e100              B        |L1.4426|
                  |L1.3912|
000f48  e110              B        |L1.4460|
                  |L1.3914|
000f4a  e123              B        |L1.4500|
                  |L1.3916|
000f4c  4aae              LDR      r2,|L1.4616|
000f4e  6813              LDR      r3,[r2,#0]            ;645  ; T_PROC_GS
000f50  fb93f5f9          SDIV     r5,r3,r9              ;645
000f54  fb93f0f0          SDIV     r0,r3,r0              ;647
000f58  fb093115          MLS      r1,r9,r5,r3           ;645
000f5c  f44f6361          MOV      r3,#0xe10             ;648
000f60  4358              MULS     r0,r3,r0              ;648
000f62  ebc41304          RSB      r3,r4,r4,LSL #4       ;648
000f66  eb000083          ADD      r0,r0,r3,LSL #2       ;648
000f6a  e019              B        |L1.4000|
                  |L1.3948|
000f6c  e124              B        |L1.4536|
                  |L1.3950|
000f6e  e127              B        |L1.4544|
                  |L1.3952|
000f70  e168              B        |L1.4676|
                  |L1.3954|
000f72  e16c              B        |L1.4686|
                  |L1.3956|
000f74  e170              B        |L1.4696|
                  |L1.3958|
000f76  20d8              MOVS     r0,#0xd8              ;640
000f78  6011              STR      r1,[r2,#0]            ;640  ; T_PROC_GS
000f7a  e04f              B        |L1.4124|
                  |L1.3964|
000f7c  4aa2              LDR      r2,|L1.4616|
000f7e  4648              MOV      r0,r9                 ;654
000f80  6811              LDR      r1,[r2,#0]            ;654  ; T_PROC_GS
000f82  fb91f3f0          SDIV     r3,r1,r0              ;654
000f86  fb93f5f9          SDIV     r5,r3,r9              ;655
000f8a  fb093015          MLS      r0,r9,r5,r3           ;655
000f8e  fb091113          MLS      r1,r9,r3,r1           ;654
000f92  f44f6361          MOV      r3,#0xe10             ;657
000f96  435c              MULS     r4,r3,r4              ;657
000f98  ebc01000          RSB      r0,r0,r0,LSL #4       ;657
000f9c  eb040080          ADD      r0,r4,r0,LSL #2       ;657
                  |L1.4000|
000fa0  4401              ADD      r1,r1,r0              ;657
000fa2  e7e8              B        |L1.3958|
                  |L1.4004|
000fa4  e164              B        |L1.4720|
                  |L1.4006|
000fa6  e168              B        |L1.4730|
                  |L1.4008|
000fa8  4a89              LDR      r2,|L1.4560|
000faa  4649              MOV      r1,r9                 ;664
000fac  6813              LDR      r3,[r2,#0]            ;664  ; T_PROC_PS
000fae  fb93f5f1          SDIV     r5,r3,r1              ;664
000fb2  fb95f6f9          SDIV     r6,r5,r9              ;664
000fb6  fb93f0f0          SDIV     r0,r3,r0              ;665
000fba  fb095116          MLS      r1,r9,r6,r5           ;664
000fbe  f44f6361          MOV      r3,#0xe10             ;666
000fc2  4358              MULS     r0,r3,r0              ;666
000fc4  ebc11101          RSB      r1,r1,r1,LSL #4       ;666
000fc8  eb000081          ADD      r0,r0,r1,LSL #2       ;666
000fcc  1901              ADDS     r1,r0,r4              ;666
000fce  e023              B        |L1.4120|
                  |L1.4048|
000fd0  4a7f              LDR      r2,|L1.4560|
000fd2  6813              LDR      r3,[r2,#0]            ;673  ; T_PROC_PS
000fd4  fb93f5f9          SDIV     r5,r3,r9              ;673
000fd8  fb93f0f0          SDIV     r0,r3,r0              ;675
000fdc  fb093115          MLS      r1,r9,r5,r3           ;673
000fe0  f44f6361          MOV      r3,#0xe10             ;676
000fe4  4358              MULS     r0,r3,r0              ;676
000fe6  ebc41304          RSB      r3,r4,r4,LSL #4       ;676
000fea  eb000083          ADD      r0,r0,r3,LSL #2       ;676
000fee  4401              ADD      r1,r1,r0              ;676
000ff0  e012              B        |L1.4120|
                  |L1.4082|
000ff2  4a77              LDR      r2,|L1.4560|
000ff4  4649              MOV      r1,r9                 ;683
000ff6  6813              LDR      r3,[r2,#0]            ;683  ; T_PROC_PS
000ff8  fb93f0f1          SDIV     r0,r3,r1              ;683
000ffc  fb90f5f9          SDIV     r5,r0,r9              ;684
001000  fb093310          MLS      r3,r9,r0,r3           ;683
001004  fb090015          MLS      r0,r9,r5,r0           ;684
001008  f44f6161          MOV      r1,#0xe10             ;686
00100c  434c              MULS     r4,r1,r4              ;686
00100e  ebc01000          RSB      r0,r0,r0,LSL #4       ;686
001012  eb040080          ADD      r0,r4,r0,LSL #2       ;686
001016  18c1              ADDS     r1,r0,r3              ;686
                  |L1.4120|
001018  20dc              MOVS     r0,#0xdc              ;687
00101a  6011              STR      r1,[r2,#0]            ;687  ; T_PROC_PS
                  |L1.4124|
00101c  f7fffffe          BL       lc640_write_long
001020  e1d8              B        |L1.5076|
                  |L1.4130|
001022  2c01              CMP      r4,#1                 ;692
001024  d001              BEQ      |L1.4138|
001026  b184              CBZ      r4,|L1.4170|
001028  e1d4              B        |L1.5076|
                  |L1.4138|
00102a  7828              LDRB     r0,[r5,#0]            ;694  ; work_stat
00102c  2802              CMP      r0,#2                 ;694
00102e  d00f              BEQ      |L1.4176|
001030  2002              MOVS     r0,#2                 ;696
001032  4966              LDR      r1,|L1.4556|
001034  7028              STRB     r0,[r5,#0]            ;696
001036  2000              MOVS     r0,#0                 ;697
001038  6008              STR      r0,[r1,#0]            ;698  ; time_proc
00103a  4865              LDR      r0,|L1.4560|
00103c  6801              LDR      r1,[r0,#0]            ;698  ; T_PROC_PS
00103e  4865              LDR      r0,|L1.4564|
001040  6001              STR      r1,[r0,#0]            ;699  ; time_proc_remain
001042  f7fffffe          BL       restart_on_PS
001046  2101              MOVS     r1,#1                 ;700
001048  e014              B        |L1.4212|
                  |L1.4170|
00104a  7828              LDRB     r0,[r5,#0]            ;705  ; work_stat
00104c  2802              CMP      r0,#2                 ;705
00104e  d016              BEQ      |L1.4222|
                  |L1.4176|
001050  e1c0              B        |L1.5076|
                  |L1.4178|
001052  2c01              CMP      r4,#1                 ;714
001054  d001              BEQ      |L1.4186|
001056  b17c              CBZ      r4,|L1.4216|
001058  e1bc              B        |L1.5076|
                  |L1.4186|
00105a  7828              LDRB     r0,[r5,#0]            ;716  ; work_stat
00105c  2801              CMP      r0,#1                 ;716
00105e  d012              BEQ      |L1.4230|
001060  2001              MOVS     r0,#1                 ;718
001062  495a              LDR      r1,|L1.4556|
001064  7028              STRB     r0,[r5,#0]            ;718
001066  2000              MOVS     r0,#0                 ;719
001068  6008              STR      r0,[r1,#0]            ;720  ; time_proc
00106a  4867              LDR      r0,|L1.4616|
00106c  6801              LDR      r1,[r0,#0]            ;720  ; T_PROC_GS
00106e  4859              LDR      r0,|L1.4564|
001070  6001              STR      r1,[r0,#0]            ;721  ; time_proc_remain
001072  2100              MOVS     r1,#0                 ;721
                  |L1.4212|
001074  20ea              MOVS     r0,#0xea              ;700
001076  e1a8              B        |L1.5066|
                  |L1.4216|
001078  7828              LDRB     r0,[r5,#0]            ;726  ; work_stat
00107a  2801              CMP      r0,#1                 ;726
00107c  d103              BNE      |L1.4230|
                  |L1.4222|
00107e  2000              MOVS     r0,#0                 ;728
001080  7028              STRB     r0,[r5,#0]            ;728
001082  f7fffffe          BL       restart_off
                  |L1.4230|
001086  e1a5              B        |L1.5076|
                  |L1.4232|
001088  7828              LDRB     r0,[r5,#0]            ;737  ; work_stat
00108a  2800              CMP      r0,#0                 ;737
00108c  d103              BNE      |L1.4246|
00108e  485f              LDR      r0,|L1.4620|
001090  b114              CBZ      r4,|L1.4248|
001092  2c01              CMP      r4,#1                 ;740
001094  d002              BEQ      |L1.4252|
                  |L1.4246|
001096  e19d              B        |L1.5076|
                  |L1.4248|
001098  2101              MOVS     r1,#1                 ;739
00109a  e000              B        |L1.4254|
                  |L1.4252|
00109c  2100              MOVS     r1,#0                 ;740
                  |L1.4254|
00109e  7001              STRB     r1,[r0,#0]            ;740
0010a0  e198              B        |L1.5076|
                  |L1.4258|
0010a2  7828              LDRB     r0,[r5,#0]            ;747  ; work_stat
0010a4  bb80              CBNZ     r0,|L1.4360|
0010a6  485a              LDR      r0,|L1.4624|
0010a8  8800              LDRH     r0,[r0,#0]            ;747  ; REV_IS_ON
0010aa  b368              CBZ      r0,|L1.4360|
0010ac  4a59              LDR      r2,|L1.4628|
0010ae  f44f7084          MOV      r0,#0x108             ;751
0010b2  2c01              CMP      r4,#1                 ;749
0010b4  d003              BEQ      |L1.4286|
0010b6  b124              CBZ      r4,|L1.4290|
0010b8  f9b21000          LDRSH    r1,[r2,#0]            ;751  ; AVT_REV_IS_ON
0010bc  e185              B        |L1.5066|
                  |L1.4286|
0010be  2101              MOVS     r1,#1                 ;749
0010c0  e000              B        |L1.4292|
                  |L1.4290|
0010c2  2100              MOVS     r1,#0                 ;750
                  |L1.4292|
0010c4  8011              STRH     r1,[r2,#0]            ;749
0010c6  e180              B        |L1.5066|
                  |L1.4296|
0010c8  7828              LDRB     r0,[r5,#0]            ;757  ; work_stat
0010ca  b9e8              CBNZ     r0,|L1.4360|
0010cc  4d52              LDR      r5,|L1.4632|
0010ce  4853              LDR      r0,|L1.4636|
0010d0  211e              MOVS     r1,#0x1e              ;760
0010d2  802c              STRH     r4,[r5,#0]            ;759
0010d4  6800              LDR      r0,[r0,#0]            ;760  ; T_PROC_MAX
0010d6  b202              SXTH     r2,r0                 ;760
0010d8  4628              MOV      r0,r5                 ;760
0010da  f7fffffe          BL       gran
0010de  f9b51000          LDRSH    r1,[r5,#0]            ;761  ; AVT_REV_TIME_FF
0010e2  f44f7085          MOV      r0,#0x10a             ;761
0010e6  e170              B        |L1.5066|
                  |L1.4328|
0010e8  7828              LDRB     r0,[r5,#0]            ;766  ; work_stat
0010ea  b968              CBNZ     r0,|L1.4360|
0010ec  4d4c              LDR      r5,|L1.4640|
0010ee  484b              LDR      r0,|L1.4636|
0010f0  211e              MOVS     r1,#0x1e              ;769
0010f2  802c              STRH     r4,[r5,#0]            ;768
0010f4  6800              LDR      r0,[r0,#0]            ;769  ; T_PROC_MAX
0010f6  b202              SXTH     r2,r0                 ;769
0010f8  4628              MOV      r0,r5                 ;769
0010fa  f7fffffe          BL       gran
0010fe  f9b51000          LDRSH    r1,[r5,#0]            ;770  ; AVT_REV_TIME_REW
001102  f44f7086          MOV      r0,#0x10c             ;770
001106  e160              B        |L1.5066|
                  |L1.4360|
001108  e040              B        |L1.4492|
                  |L1.4362|
00110a  7828              LDRB     r0,[r5,#0]            ;775  ; work_stat
00110c  bbf0              CBNZ     r0,|L1.4492|
00110e  4d45              LDR      r5,|L1.4644|
001110  f44f7216          MOV      r2,#0x258             ;778
001114  2102              MOVS     r1,#2                 ;778
001116  802c              STRH     r4,[r5,#0]            ;777
001118  4628              MOV      r0,r5                 ;778
00111a  f7fffffe          BL       gran
00111e  f9b51000          LDRSH    r1,[r5,#0]            ;779  ; AVT_REV_TIME_PAUSE
001122  f44f7087          MOV      r0,#0x10e             ;779
001126  e150              B        |L1.5066|
                  |L1.4392|
001128  7828              LDRB     r0,[r5,#0]            ;785  ; work_stat
00112a  bb78              CBNZ     r0,|L1.4492|
00112c  4d3e              LDR      r5,|L1.4648|
00112e  483f              LDR      r0,|L1.4652|
001130  802c              STRH     r4,[r5,#0]            ;787
001132  f9b01000          LDRSH    r1,[r0,#0]            ;788  ; I_MIN_IPS
001136  f9bb2000          LDRSH    r2,[r11,#0]           ;788  ; I_MAX_IPS
00113a  4628              MOV      r0,r5                 ;788
00113c  f7fffffe          BL       gran
001140  f9b51000          LDRSH    r1,[r5,#0]            ;789  ; AVT_REV_I_NOM_FF
001144  f44f7088          MOV      r0,#0x110             ;789
001148  e13f              B        |L1.5066|
                  |L1.4426|
00114a  7828              LDRB     r0,[r5,#0]            ;795  ; work_stat
00114c  b9f0              CBNZ     r0,|L1.4492|
00114e  4d38              LDR      r5,|L1.4656|
001150  4836              LDR      r0,|L1.4652|
001152  802c              STRH     r4,[r5,#0]            ;797
001154  f9b01000          LDRSH    r1,[r0,#0]            ;798  ; I_MIN_IPS
001158  f9bb2000          LDRSH    r2,[r11,#0]           ;798  ; I_MAX_IPS
00115c  4628              MOV      r0,r5                 ;798
00115e  f7fffffe          BL       gran
001162  f9b51000          LDRSH    r1,[r5,#0]            ;799  ; AVT_REV_I_NOM_REW
001166  f44f7089          MOV      r0,#0x112             ;799
00116a  e12e              B        |L1.5066|
                  |L1.4460|
00116c  7828              LDRB     r0,[r5,#0]            ;804  ; work_stat
00116e  b968              CBNZ     r0,|L1.4492|
001170  4d30              LDR      r5,|L1.4660|
001172  4831              LDR      r0,|L1.4664|
001174  802c              STRH     r4,[r5,#0]            ;806
001176  f9b02000          LDRSH    r2,[r0,#0]            ;807  ; U_MAX
00117a  4830              LDR      r0,|L1.4668|
00117c  f9b01000          LDRSH    r1,[r0,#0]            ;807  ; U_MIN
001180  4628              MOV      r0,r5                 ;807
001182  f7fffffe          BL       gran
001186  f9b51000          LDRSH    r1,[r5,#0]            ;808  ; AVT_REV_U_NOM_FF
00118a  e000              B        |L1.4494|
                  |L1.4492|
00118c  e01d              B        |L1.4554|
                  |L1.4494|
00118e  f44f708a          MOV      r0,#0x114             ;808
001192  e11a              B        |L1.5066|
                  |L1.4500|
001194  7828              LDRB     r0,[r5,#0]            ;814  ; work_stat
001196  b9c0              CBNZ     r0,|L1.4554|
001198  4d29              LDR      r5,|L1.4672|
00119a  4827              LDR      r0,|L1.4664|
00119c  802c              STRH     r4,[r5,#0]            ;816
00119e  f9b02000          LDRSH    r2,[r0,#0]            ;817  ; U_MAX
0011a2  4826              LDR      r0,|L1.4668|
0011a4  f9b01000          LDRSH    r1,[r0,#0]            ;817  ; U_MIN
0011a8  4628              MOV      r0,r5                 ;817
0011aa  f7fffffe          BL       gran
0011ae  f9b51000          LDRSH    r1,[r5,#0]            ;818  ; AVT_REV_U_NOM_REW
0011b2  f44f708b          MOV      r0,#0x116             ;818
0011b6  e108              B        |L1.5066|
                  |L1.4536|
0011b8  7828              LDRB     r0,[r5,#0]            ;824  ; work_stat
0011ba  b930              CBNZ     r0,|L1.4554|
0011bc  8034              STRH     r4,[r6,#0]            ;826
0011be  e08e              B        |L1.4830|
                  |L1.4544|
0011c0  7828              LDRB     r0,[r5,#0]            ;833  ; work_stat
0011c2  b910              CBNZ     r0,|L1.4554|
0011c4  f8a84000          STRH     r4,[r8,#0]            ;835
0011c8  e09e              B        |L1.4872|
                  |L1.4554|
0011ca  e076              B        |L1.4794|
                  |L1.4556|
                          DCD      time_proc
                  |L1.4560|
                          DCD      T_PROC_PS
                  |L1.4564|
                          DCD      time_proc_remain
                  |L1.4568|
                          DCD      ||area_number.4||+0x1e
                  |L1.4572|
                          DCD      MODBUS_ADRESS
                  |L1.4576|
                          DCD      CAP_ZAR_TIME
                  |L1.4580|
                          DCD      CAP_PAUSE1_TIME
                  |L1.4584|
                          DCD      CAP_RAZR_TIME
                  |L1.4588|
                          DCD      CAP_PAUSE2_TIME
                  |L1.4592|
                          DCD      CAP_MAX_VOLT
                  |L1.4596|
                          DCD      CAP_WRK_CURR
                  |L1.4600|
                          DCD      I_ug
                  |L1.4604|
                          DCD      U_up
                  |L1.4608|
                          DCD      U_maxg
                  |L1.4612|
                          DCD      I_maxp
                  |L1.4616|
                          DCD      T_PROC_GS
                  |L1.4620|
                          DCD      REV_STAT
                  |L1.4624|
                          DCD      REV_IS_ON
                  |L1.4628|
                          DCD      AVT_REV_IS_ON
                  |L1.4632|
                          DCD      AVT_REV_TIME_FF
                  |L1.4636|
                          DCD      T_PROC_MAX
                  |L1.4640|
                          DCD      AVT_REV_TIME_REW
                  |L1.4644|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.4648|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.4652|
                          DCD      I_MIN_IPS
                  |L1.4656|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.4660|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.4664|
                          DCD      U_MAX
                  |L1.4668|
                          DCD      U_MIN
                  |L1.4672|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.4676|
001244  7828              LDRB     r0,[r5,#0]            ;842  ; work_stat
001246  bbc0              CBNZ     r0,|L1.4794|
001248  f8a94000          STRH     r4,[r9,#0]            ;844
00124c  e073              B        |L1.4918|
                  |L1.4686|
00124e  7828              LDRB     r0,[r5,#0]            ;851  ; work_stat
001250  bb98              CBNZ     r0,|L1.4794|
001252  f8ab4000          STRH     r4,[r11,#0]           ;853
001256  e086              B        |L1.4966|
                  |L1.4696|
001258  7829              LDRB     r1,[r5,#0]            ;861  ; work_stat
00125a  bb71              CBNZ     r1,|L1.4794|
00125c  4605              MOV      r5,r0                 ;863
00125e  8004              STRH     r4,[r0,#0]            ;863
001260  2264              MOVS     r2,#0x64              ;864
001262  2101              MOVS     r1,#1                 ;864
001264  488f              LDR      r0,|L1.5284|
001266  f7fffffe          BL       gran
00126a  f9b51000          LDRSH    r1,[r5,#0]            ;865  ; CAP_MAX_VOLT
00126e  e094              B        |L1.5018|
                  |L1.4720|
001270  7828              LDRB     r0,[r5,#0]            ;870  ; work_stat
001272  bb10              CBNZ     r0,|L1.4794|
001274  f8aa4000          STRH     r4,[r10,#0]           ;872
001278  e0be              B        |L1.5112|
                  |L1.4730|
00127a  2c11              CMP      r4,#0x11              ;880
00127c  d01e              BEQ      |L1.4796|
00127e  2c12              CMP      r4,#0x12              ;884
001280  d01f              BEQ      |L1.4802|
001282  2c13              CMP      r4,#0x13              ;888
001284  d020              BEQ      |L1.4808|
001286  2c14              CMP      r4,#0x14              ;892
001288  d021              BEQ      |L1.4814|
00128a  2c21              CMP      r4,#0x21              ;897
00128c  d022              BEQ      |L1.4820|
00128e  2c22              CMP      r4,#0x22              ;906
001290  d02e              BEQ      |L1.4848|
001292  2c31              CMP      r4,#0x31              ;916
001294  d032              BEQ      |L1.4860|
001296  2c32              CMP      r4,#0x32              ;925
001298  d03f              BEQ      |L1.4890|
00129a  2c41              CMP      r4,#0x41              ;935
00129c  d045              BEQ      |L1.4906|
00129e  2c42              CMP      r4,#0x42              ;944
0012a0  d053              BEQ      |L1.4938|
0012a2  2c51              CMP      r4,#0x51              ;954
0012a4  d059              BEQ      |L1.4954|
0012a6  2c52              CMP      r4,#0x52              ;963
0012a8  d066              BEQ      |L1.4984|
0012aa  2c61              CMP      r4,#0x61              ;973
0012ac  d06c              BEQ      |L1.5000|
0012ae  2c62              CMP      r4,#0x62              ;982
0012b0  d076              BEQ      |L1.5024|
0012b2  2c71              CMP      r4,#0x71              ;992
0012b4  d06f              BEQ      |L1.5014|
0012b6  2c72              CMP      r4,#0x72              ;1001
0012b8  d06e              BEQ      |L1.5016|
                  |L1.4794|
0012ba  e08b              B        |L1.5076|
                  |L1.4796|
0012bc  f7fffffe          BL       start_CAP
0012c0  e088              B        |L1.5076|
                  |L1.4802|
0012c2  f7fffffe          BL       pause_CAP
0012c6  e085              B        |L1.5076|
                  |L1.4808|
0012c8  f7fffffe          BL       stop_CAP
0012cc  e082              B        |L1.5076|
                  |L1.4814|
0012ce  f7fffffe          BL       reset_CAP
0012d2  e07f              B        |L1.5076|
                  |L1.4820|
0012d4  7828              LDRB     r0,[r5,#0]            ;899  ; work_stat
0012d6  bbb8              CBNZ     r0,|L1.4936|
0012d8  8830              LDRH     r0,[r6,#0]            ;901  ; CAP_ZAR_TIME
0012da  1c40              ADDS     r0,r0,#1              ;901
0012dc  e00c              B        |L1.4856|
                  |L1.4830|
0012de  210a              MOVS     r1,#0xa               ;827
0012e0  4871              LDR      r0,|L1.5288|
0012e2  f7fffffe          BL       gran
0012e6  f9b61000          LDRSH    r1,[r6,#0]            ;828  ; CAP_ZAR_TIME
0012ea  f44f70e9          MOV      r0,#0x1d2             ;828
0012ee  e06c              B        |L1.5066|
                  |L1.4848|
0012f0  7828              LDRB     r0,[r5,#0]            ;908  ; work_stat
0012f2  bb48              CBNZ     r0,|L1.4936|
0012f4  8830              LDRH     r0,[r6,#0]            ;910  ; CAP_ZAR_TIME
0012f6  1e40              SUBS     r0,r0,#1              ;910
                  |L1.4856|
0012f8  8030              STRH     r0,[r6,#0]            ;910
0012fa  e7f0              B        |L1.4830|
                  |L1.4860|
0012fc  7828              LDRB     r0,[r5,#0]            ;918  ; work_stat
0012fe  bb18              CBNZ     r0,|L1.4936|
001300  f8b80000          LDRH     r0,[r8,#0]            ;920  ; CAP_PAUSE1_TIME
001304  1c40              ADDS     r0,r0,#1              ;920
001306  e00d              B        |L1.4900|
                  |L1.4872|
001308  210a              MOVS     r1,#0xa               ;836
00130a  4868              LDR      r0,|L1.5292|
00130c  f7fffffe          BL       gran
001310  f9b81000          LDRSH    r1,[r8,#0]            ;837  ; CAP_PAUSE1_TIME
001314  f44f70ea          MOV      r0,#0x1d4             ;837
001318  e057              B        |L1.5066|
                  |L1.4890|
00131a  7828              LDRB     r0,[r5,#0]            ;927  ; work_stat
00131c  b9a0              CBNZ     r0,|L1.4936|
00131e  f8b80000          LDRH     r0,[r8,#0]            ;929  ; CAP_PAUSE1_TIME
001322  1e40              SUBS     r0,r0,#1              ;929
                  |L1.4900|
001324  f8a80000          STRH     r0,[r8,#0]            ;929
001328  e7ee              B        |L1.4872|
                  |L1.4906|
00132a  7828              LDRB     r0,[r5,#0]            ;937  ; work_stat
00132c  b960              CBNZ     r0,|L1.4936|
00132e  f8b90000          LDRH     r0,[r9,#0]            ;939  ; CAP_RAZR_TIME
001332  1c40              ADDS     r0,r0,#1              ;939
001334  e00e              B        |L1.4948|
                  |L1.4918|
001336  210a              MOVS     r1,#0xa               ;845
001338  485d              LDR      r0,|L1.5296|
00133a  f7fffffe          BL       gran
00133e  f9b91000          LDRSH    r1,[r9,#0]            ;846  ; CAP_RAZR_TIME
001342  f44f70eb          MOV      r0,#0x1d6             ;846
001346  e040              B        |L1.5066|
                  |L1.4936|
001348  e038              B        |L1.5052|
                  |L1.4938|
00134a  7828              LDRB     r0,[r5,#0]            ;946  ; work_stat
00134c  bbb0              CBNZ     r0,|L1.5052|
00134e  f8b90000          LDRH     r0,[r9,#0]            ;948  ; CAP_RAZR_TIME
001352  1e40              SUBS     r0,r0,#1              ;948
                  |L1.4948|
001354  f8a90000          STRH     r0,[r9,#0]            ;948
001358  e7ed              B        |L1.4918|
                  |L1.4954|
00135a  7828              LDRB     r0,[r5,#0]            ;956  ; work_stat
00135c  bb70              CBNZ     r0,|L1.5052|
00135e  f8bb0000          LDRH     r0,[r11,#0]           ;958  ; CAP_PAUSE2_TIME
001362  1c40              ADDS     r0,r0,#1              ;958
001364  e00d              B        |L1.4994|
                  |L1.4966|
001366  210a              MOVS     r1,#0xa               ;854
001368  4852              LDR      r0,|L1.5300|
00136a  f7fffffe          BL       gran
00136e  f9bb1000          LDRSH    r1,[r11,#0]           ;855  ; CAP_PAUSE2_TIME
001372  f44f70ec          MOV      r0,#0x1d8             ;855
001376  e028              B        |L1.5066|
                  |L1.4984|
001378  7828              LDRB     r0,[r5,#0]            ;965  ; work_stat
00137a  b9f8              CBNZ     r0,|L1.5052|
00137c  f8bb0000          LDRH     r0,[r11,#0]           ;967  ; CAP_PAUSE2_TIME
001380  1e40              SUBS     r0,r0,#1              ;967
                  |L1.4994|
001382  f8ab0000          STRH     r0,[r11,#0]           ;967
001386  e7ee              B        |L1.4966|
                  |L1.5000|
001388  7829              LDRB     r1,[r5,#0]            ;975  ; work_stat
00138a  b9b9              CBNZ     r1,|L1.5052|
00138c  4604              MOV      r4,r0                 ;977
00138e  8800              LDRH     r0,[r0,#0]            ;977  ; CAP_MAX_VOLT
001390  1c40              ADDS     r0,r0,#1              ;977
001392  e00a              B        |L1.5034|
001394  e004              B        |L1.5024|
                  |L1.5014|
001396  e012              B        |L1.5054|
                  |L1.5016|
001398  e01a              B        |L1.5072|
                  |L1.5018|
00139a  f44f70ed          MOV      r0,#0x1da             ;865
00139e  e014              B        |L1.5066|
                  |L1.5024|
0013a0  7829              LDRB     r1,[r5,#0]            ;984  ; work_stat
0013a2  b959              CBNZ     r1,|L1.5052|
0013a4  4604              MOV      r4,r0                 ;986
0013a6  8800              LDRH     r0,[r0,#0]            ;986  ; CAP_MAX_VOLT
0013a8  1e40              SUBS     r0,r0,#1              ;986
                  |L1.5034|
0013aa  8020              STRH     r0,[r4,#0]            ;986
0013ac  2264              MOVS     r2,#0x64              ;987
0013ae  2101              MOVS     r1,#1                 ;987
0013b0  483c              LDR      r0,|L1.5284|
0013b2  f7fffffe          BL       gran
0013b6  f9b41000          LDRSH    r1,[r4,#0]            ;988  ; CAP_MAX_VOLT
0013ba  e7ee              B        |L1.5018|
                  |L1.5052|
0013bc  e00a              B        |L1.5076|
                  |L1.5054|
0013be  7828              LDRB     r0,[r5,#0]            ;994  ; work_stat
0013c0  b940              CBNZ     r0,|L1.5076|
0013c2  f8ba0000          LDRH     r0,[r10,#0]           ;996  ; CAP_WRK_CURR
0013c6  1c40              ADDS     r0,r0,#1              ;996
0013c8  e014              B        |L1.5108|
                  |L1.5066|
0013ca  f7fffffe          BL       lc640_write_int
0013ce  e001              B        |L1.5076|
                  |L1.5072|
0013d0  7828              LDRB     r0,[r5,#0]            ;1003  ; work_stat
0013d2  b160              CBZ      r0,|L1.5102|
                  |L1.5076|
0013d4  4c38              LDR      r4,|L1.5304|
0013d6  4d39              LDR      r5,|L1.5308|
0013d8  6820              LDR      r0,[r4,#0]            ;1014  ; T_PROC_GS
0013da  6829              LDR      r1,[r5,#0]            ;1014  ; T_PROC_MAX
0013dc  4288              CMP      r0,r1                 ;1014
0013de  dc01              BGT      |L1.5092|
0013e0  281e              CMP      r0,#0x1e              ;1014
0013e2  da22              BGE      |L1.5162|
                  |L1.5092|
0013e4  4288              CMP      r0,r1                 ;1016
0013e6  dd11              BLE      |L1.5132|
0013e8  1c49              ADDS     r1,r1,#1              ;1016
0013ea  6021              STR      r1,[r4,#0]            ;1016  ; T_PROC_GS
0013ec  e012              B        |L1.5140|
                  |L1.5102|
0013ee  f8ba0000          LDRH     r0,[r10,#0]           ;1005  ; CAP_WRK_CURR
0013f2  1e40              SUBS     r0,r0,#1              ;1005
                  |L1.5108|
0013f4  f8aa0000          STRH     r0,[r10,#0]           ;996
                  |L1.5112|
0013f8  2296              MOVS     r2,#0x96              ;1006
0013fa  2101              MOVS     r1,#1                 ;1006
0013fc  4830              LDR      r0,|L1.5312|
0013fe  f7fffffe          BL       gran
001402  f9ba1000          LDRSH    r1,[r10,#0]           ;1007  ; CAP_WRK_CURR
001406  f44f70ee          MOV      r0,#0x1dc             ;1007
00140a  e7de              B        |L1.5066|
                  |L1.5132|
00140c  281e              CMP      r0,#0x1e              ;1017
00140e  da01              BGE      |L1.5140|
001410  201d              MOVS     r0,#0x1d              ;1017
001412  6020              STR      r0,[r4,#0]            ;1017  ; T_PROC_GS
                  |L1.5140|
001414  6820              LDR      r0,[r4,#0]            ;1018  ; T_PROC_GS
001416  b201              SXTH     r1,r0                 ;1018
001418  20d8              MOVS     r0,#0xd8              ;1018
00141a  f7fffffe          BL       lc640_write_int
00141e  4829              LDR      r0,|L1.5316|
001420  2101              MOVS     r1,#1                 ;1019
001422  8001              STRH     r1,[r0,#0]            ;1019
001424  20ee              MOVS     r0,#0xee              ;1020
001426  f7fffffe          BL       lc640_write_int
                  |L1.5162|
00142a  6820              LDR      r0,[r4,#0]            ;1022  ; T_PROC_GS
00142c  6829              LDR      r1,[r5,#0]            ;1022  ; T_PROC_MAX
00142e  4288              CMP      r0,r1                 ;1022
001430  dc07              BGT      |L1.5186|
001432  281e              CMP      r0,#0x1e              ;1022
001434  db05              BLT      |L1.5186|
001436  4823              LDR      r0,|L1.5316|
001438  2100              MOVS     r1,#0                 ;1024
00143a  8001              STRH     r1,[r0,#0]            ;1024
00143c  20ee              MOVS     r0,#0xee              ;1025
00143e  f7fffffe          BL       lc640_write_int
                  |L1.5186|
001442  4c21              LDR      r4,|L1.5320|
001444  6829              LDR      r1,[r5,#0]            ;1028  ; T_PROC_MAX
001446  6820              LDR      r0,[r4,#0]            ;1028  ; T_PROC_PS
001448  4288              CMP      r0,r1                 ;1028
00144a  dc01              BGT      |L1.5200|
00144c  281e              CMP      r0,#0x1e              ;1028
00144e  da13              BGE      |L1.5240|
                  |L1.5200|
001450  4288              CMP      r0,r1                 ;1030
001452  dd02              BLE      |L1.5210|
001454  1c49              ADDS     r1,r1,#1              ;1030
001456  6021              STR      r1,[r4,#0]            ;1030  ; T_PROC_PS
001458  e003              B        |L1.5218|
                  |L1.5210|
00145a  281e              CMP      r0,#0x1e              ;1031
00145c  da01              BGE      |L1.5218|
00145e  201d              MOVS     r0,#0x1d              ;1031
001460  6020              STR      r0,[r4,#0]            ;1031  ; T_PROC_PS
                  |L1.5218|
001462  6820              LDR      r0,[r4,#0]            ;1032  ; T_PROC_PS
001464  b201              SXTH     r1,r0                 ;1032
001466  20dc              MOVS     r0,#0xdc              ;1032
001468  f7fffffe          BL       lc640_write_int
00146c  4817              LDR      r0,|L1.5324|
00146e  2101              MOVS     r1,#1                 ;1033
001470  8001              STRH     r1,[r0,#0]            ;1033
001472  20f0              MOVS     r0,#0xf0              ;1034
001474  f7fffffe          BL       lc640_write_int
                  |L1.5240|
001478  6820              LDR      r0,[r4,#0]            ;1036  ; T_PROC_PS
00147a  6829              LDR      r1,[r5,#0]            ;1036  ; T_PROC_MAX
00147c  4288              CMP      r0,r1                 ;1036
00147e  dc07              BGT      |L1.5264|
001480  281e              CMP      r0,#0x1e              ;1036
001482  db05              BLT      |L1.5264|
001484  4811              LDR      r0,|L1.5324|
001486  2100              MOVS     r1,#0                 ;1038
001488  8001              STRH     r1,[r0,#0]            ;1038
00148a  20f0              MOVS     r0,#0xf0              ;1039
00148c  f7fffffe          BL       lc640_write_int
                  |L1.5264|
001490  480f              LDR      r0,|L1.5328|
001492  9901              LDR      r1,[sp,#4]            ;1042
001494  463a              MOV      r2,r7                 ;1042
001496  8800              LDRH     r0,[r0,#0]            ;1042  ; MODBUS_ADRESS
001498  b002              ADD      sp,sp,#8              ;1042
00149a  b2c0              UXTB     r0,r0                 ;1042
00149c  e8bd5ff0          POP      {r4-r12,lr}           ;1042
0014a0  f7ffbffe          B.W      modbus_hold_register_transmit
;;;1055   
                          ENDP

                  |L1.5284|
                          DCD      CAP_MAX_VOLT
                  |L1.5288|
                          DCD      CAP_ZAR_TIME
                  |L1.5292|
                          DCD      CAP_PAUSE1_TIME
                  |L1.5296|
                          DCD      CAP_RAZR_TIME
                  |L1.5300|
                          DCD      CAP_PAUSE2_TIME
                  |L1.5304|
                          DCD      T_PROC_GS
                  |L1.5308|
                          DCD      T_PROC_MAX
                  |L1.5312|
                          DCD      CAP_WRK_CURR
                  |L1.5316|
                          DCD      T_PROC_GS_MODE
                  |L1.5320|
                          DCD      T_PROC_PS
                  |L1.5324|
                          DCD      T_PROC_PS_MODE
                  |L1.5328|
                          DCD      MODBUS_ADRESS

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  modbus_buf
                          %        20

                          AREA ||area_number.4||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.4||, ||.bss||
                  modbus_rx_buffer
                          %        30
                  modbus_an_buffer
                          %        30
                  modbus_registers
                          %        200

                          AREA ||.data||, DATA, ALIGN=1

                  modbus_self_cmnd_cnt
000000  21                DCB      0x21
                  bMODBUS_TIMEOUT
000001  00                DCB      0x00
                  modbus_rx_buffer_ptr
000002  00                DCB      0x00
                  modbus_rx_counter
000003  00                DCB      0x00
                  modbus_cmnd_cnt
000004  00                DCB      0x00
                  modbus_cmnd
000005  00                DCB      0x00
                  modbus_plazma
000006  0000              DCB      0x00,0x00
                  modbus_plazma1
000008  0000              DCB      0x00,0x00
                  modbus_plazma2
00000a  0000              DCB      0x00,0x00
                  modbus_plazma3
00000c  0000              DCB      0x00,0x00

                          AREA ||area_number.7||, DATA, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.data||
                  modbus_crc16
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.8||, DATA, ALIGN=0

                          EXPORTAS ||area_number.8||, ||.data||
                  modbus_timeout_cnt
000000  00                DCB      0x00

                          AREA ||area_number.9||, DATA, ALIGN=1

                          EXPORTAS ||area_number.9||, ||.data||
                  modbusTimeoutInMills
000000  0000              DCB      0x00,0x00
