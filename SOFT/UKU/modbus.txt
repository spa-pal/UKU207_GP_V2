; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\modbus.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\modbus.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\modbus.crf modbus.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CRC16_2 PROC
;;;30     //-----------------------------------------------
;;;31     unsigned short CRC16_2(char* buf, short len)
000000  b570              PUSH     {r4-r6,lr}
;;;32     {
000002  4604              MOV      r4,r0
;;;33     unsigned short crc = 0xFFFF;
000004  f64f70ff          MOV      r0,#0xffff
;;;34     short pos;
;;;35     short i;
;;;36     
;;;37     for (pos = 0; pos < len; pos++)
000008  2200              MOVS     r2,#0
;;;38       	{
;;;39         	crc ^= (unsigned short)buf[pos];          // XOR byte into least sig. byte of crc
;;;40     
;;;41         	for ( i = 8; i != 0; i--) 
;;;42     		{    // Loop over each bit
;;;43           	if ((crc & 0x0001) != 0) 
;;;44     			{      // If the LSB is set
;;;45             		crc >>= 1;                    // Shift right and XOR 0xA001
;;;46             		crc ^= 0xA001;
00000a  f24a0501          MOV      r5,#0xa001
00000e  e00d              B        |L1.44|
                  |L1.16|
000010  5ca3              LDRB     r3,[r4,r2]            ;39
000012  4058              EORS     r0,r0,r3              ;39
000014  2308              MOVS     r3,#8                 ;41
                  |L1.22|
000016  07c6              LSLS     r6,r0,#31             ;43
;;;47           		}
;;;48           	else  crc >>= 1;                    // Just shift right
000018  ea4f0050          LSR      r0,r0,#1
00001c  d000              BEQ      |L1.32|
00001e  4068              EORS     r0,r0,r5              ;46
                  |L1.32|
000020  1e5b              SUBS     r3,r3,#1              ;41
000022  b21b              SXTH     r3,r3                 ;41
000024  2b00              CMP      r3,#0                 ;41
000026  d1f6              BNE      |L1.22|
000028  1c52              ADDS     r2,r2,#1              ;37
00002a  b212              SXTH     r2,r2                 ;37
                  |L1.44|
00002c  428a              CMP      r2,r1                 ;37
00002e  dbef              BLT      |L1.16|
;;;49         		}
;;;50       	}
;;;51       // Note, this number has low and high bytes swapped, so use it accordingly (or swap bytes)
;;;52     return crc;
;;;53     }
000030  bd70              POP      {r4-r6,pc}
;;;54     
                          ENDP

                  modbus_hold_register_transmit PROC
;;;1190   //-----------------------------------------------
;;;1191   void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
;;;1192   {
;;;1193   char modbus_registers[120];
;;;1194   char modbus_tx_buff[100];
;;;1195   unsigned short crc_temp;
;;;1196   char i;
;;;1197   
;;;1198   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
;;;1199   modbus_registers[1]=(char)(load_U%256);
;;;1200   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
000032  e92d43f0          PUSH     {r4-r9,lr}
000036  4681              MOV      r9,r0
;;;1201   modbus_registers[3]=(char)(load_I%256);
000038  48ff              LDR      r0,|L1.1080|
00003a  b0b7              SUB      sp,sp,#0xdc
;;;1202   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
00003c  f44f6861          MOV      r8,#0xe10
000040  f9b00000          LDRSH    r0,[r0,#0]  ; I_ug
000044  17c3              ASRS     r3,r0,#31
000046  eb006313          ADD      r3,r0,r3,LSR #24
00004a  121c              ASRS     r4,r3,#8
00004c  f88d4000          STRB     r4,[sp,#0]
000050  f88d0001          STRB     r0,[sp,#1]
;;;1203   modbus_registers[5]=(char)((time_proc%60)%256);
000054  48f9              LDR      r0,|L1.1084|
000056  f9b00000          LDRSH    r0,[r0,#0]  ; U_up
;;;1204   modbus_registers[6]=(char)((time_proc/60)/256);			//Πεγ4
00005a  17c3              ASRS     r3,r0,#31
00005c  eb006313          ADD      r3,r0,r3,LSR #24
000060  121c              ASRS     r4,r3,#8
;;;1205   modbus_registers[7]=(char)((time_proc/60)%256);
000062  f88d4002          STRB     r4,[sp,#2]
000066  f88d0003          STRB     r0,[sp,#3]
;;;1206   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
00006a  48f5              LDR      r0,|L1.1088|
00006c  f9b00000          LDRSH    r0,[r0,#0]  ; U_maxg
000070  17c3              ASRS     r3,r0,#31
000072  eb006313          ADD      r3,r0,r3,LSR #24
;;;1207   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000076  121c              ASRS     r4,r3,#8
000078  f88d4004          STRB     r4,[sp,#4]
;;;1208   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
00007c  f88d0005          STRB     r0,[sp,#5]
000080  48f0              LDR      r0,|L1.1092|
000082  f9b00000          LDRSH    r0,[r0,#0]  ; I_maxp
000086  17c3              ASRS     r3,r0,#31
000088  eb006313          ADD      r3,r0,r3,LSR #24
00008c  121c              ASRS     r4,r3,#8
00008e  f88d4006          STRB     r4,[sp,#6]
000092  f88d0007          STRB     r0,[sp,#7]
;;;1209   modbus_registers[11]=(char)((time_proc_remain%60)%256);
000096  48ec              LDR      r0,|L1.1096|
000098  233c              MOVS     r3,#0x3c
;;;1210   modbus_registers[12]=(char)((time_proc_remain/60)/256);	//Πεγ7
00009a  6804              LDR      r4,[r0,#0]  ; T_PROC_GS
00009c  fb94f5f3          SDIV     r5,r4,r3
0000a0  fb034015          MLS      r0,r3,r5,r4
;;;1211   modbus_registers[13]=(char)((time_proc_remain/60)%256);
0000a4  17c6              ASRS     r6,r0,#31
;;;1212   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
0000a6  eb006616          ADD      r6,r0,r6,LSR #24
;;;1213   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
0000aa  1237              ASRS     r7,r6,#8
0000ac  f88d7008          STRB     r7,[sp,#8]
0000b0  f88d0009          STRB     r0,[sp,#9]            ;1212
0000b4  fb95f0f3          SDIV     r0,r5,r3
;;;1214   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
0000b8  fb035010          MLS      r0,r3,r0,r5
0000bc  17c5              ASRS     r5,r0,#31
0000be  eb006515          ADD      r5,r0,r5,LSR #24
0000c2  122e              ASRS     r6,r5,#8
0000c4  f88d600a          STRB     r6,[sp,#0xa]
;;;1215   modbus_registers[17]=(char)(I_ug%256);
0000c8  f88d000b          STRB     r0,[sp,#0xb]
;;;1216   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
0000cc  f44f2761          MOV      r7,#0xe1000
0000d0  fb94f0f7          SDIV     r0,r4,r7
0000d4  f88d000c          STRB     r0,[sp,#0xc]
0000d8  fb94f0f8          SDIV     r0,r4,r8
0000dc  f88d000d          STRB     r0,[sp,#0xd]
;;;1217   modbus_registers[19]=(char)(U_up%256);
0000e0  48da              LDR      r0,|L1.1100|
;;;1218   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
0000e2  6804              LDR      r4,[r0,#0]  ; T_PROC_PS
0000e4  fb94f5f3          SDIV     r5,r4,r3
0000e8  fb034015          MLS      r0,r3,r5,r4
0000ec  17c6              ASRS     r6,r0,#31
0000ee  eb006616          ADD      r6,r0,r6,LSR #24
0000f2  ea4f2c26          ASR      r12,r6,#8
;;;1219   modbus_registers[21]=(char)(U_maxg%256);
0000f6  f88dc00e          STRB     r12,[sp,#0xe]
;;;1220   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
0000fa  f88d000f          STRB     r0,[sp,#0xf]
0000fe  fb95f0f3          SDIV     r0,r5,r3
000102  fb035010          MLS      r0,r3,r0,r5
000106  17c3              ASRS     r3,r0,#31
000108  eb006313          ADD      r3,r0,r3,LSR #24
;;;1221   modbus_registers[23]=(char)(I_maxp%256);
00010c  121d              ASRS     r5,r3,#8
;;;1222   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
00010e  f88d5010          STRB     r5,[sp,#0x10]
000112  f88d0011          STRB     r0,[sp,#0x11]
000116  fb94f0f7          SDIV     r0,r4,r7
00011a  f88d0012          STRB     r0,[sp,#0x12]
00011e  fb94f0f8          SDIV     r0,r4,r8
000122  f88d0013          STRB     r0,[sp,#0x13]
000126  2000              MOVS     r0,#0
;;;1223   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
000128  4bc9              LDR      r3,|L1.1104|
00012a  f88d0014          STRB     r0,[sp,#0x14]
;;;1224   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
00012e  f88d0015          STRB     r0,[sp,#0x15]
000132  781c              LDRB     r4,[r3,#0]  ; work_stat
;;;1225   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
000134  2301              MOVS     r3,#1
000136  2c02              CMP      r4,#2
;;;1226   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
000138  d101              BNE      |L1.318|
00013a  f88d3015          STRB     r3,[sp,#0x15]
                  |L1.318|
;;;1227   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
00013e  f88d0016          STRB     r0,[sp,#0x16]
000142  f88d0017          STRB     r0,[sp,#0x17]         ;1226
000146  2c01              CMP      r4,#1
;;;1228   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
000148  d101              BNE      |L1.334|
00014a  f88d3017          STRB     r3,[sp,#0x17]
                  |L1.334|
00014e  4cc1              LDR      r4,|L1.1108|
000150  f88d0018          STRB     r0,[sp,#0x18]
000154  f88d0019          STRB     r0,[sp,#0x19]
000158  7824              LDRB     r4,[r4,#0]  ; REV_STAT
00015a  b90c              CBNZ     r4,|L1.352|
00015c  f88d3019          STRB     r3,[sp,#0x19]
                  |L1.352|
;;;1229   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
000160  f88d001a          STRB     r0,[sp,#0x1a]
;;;1230   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
000164  f88d001b          STRB     r0,[sp,#0x1b]
000168  48bb              LDR      r0,|L1.1112|
00016a  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
;;;1231   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
00016c  b108              CBZ      r0,|L1.370|
00016e  f88d301b          STRB     r3,[sp,#0x1b]
                  |L1.370|
;;;1232   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
000172  48ba              LDR      r0,|L1.1116|
;;;1233   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
000174  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_FF
000178  17c3              ASRS     r3,r0,#31             ;1232
00017a  eb006313          ADD      r3,r0,r3,LSR #24      ;1232
00017e  121c              ASRS     r4,r3,#8
;;;1234   modbus_registers[36]=0;								//Πεγ19
000180  f88d401c          STRB     r4,[sp,#0x1c]
000184  f88d001d          STRB     r0,[sp,#0x1d]
;;;1235   modbus_registers[37]=0;
000188  48b5              LDR      r0,|L1.1120|
00018a  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_REW
;;;1236   if(work_stat==wsPS)modbus_registers[37]=1;
00018e  17c3              ASRS     r3,r0,#31
000190  eb006313          ADD      r3,r0,r3,LSR #24
000194  121c              ASRS     r4,r3,#8
000196  f88d401e          STRB     r4,[sp,#0x1e]
;;;1237   modbus_registers[38]=0;								//Πεγ20
00019a  f88d001f          STRB     r0,[sp,#0x1f]
;;;1238   modbus_registers[39]=0;
00019e  48b1              LDR      r0,|L1.1124|
;;;1239   if(work_stat==wsGS)modbus_registers[39]=1;
0001a0  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_PAUSE
0001a4  17c3              ASRS     r3,r0,#31
0001a6  eb006313          ADD      r3,r0,r3,LSR #24
;;;1240   modbus_registers[40]=0;								//Πεγ21
0001aa  121c              ASRS     r4,r3,#8
0001ac  f88d4020          STRB     r4,[sp,#0x20]
;;;1241   modbus_registers[41]=0;
0001b0  f88d0021          STRB     r0,[sp,#0x21]
;;;1242   if(REV_STAT==rsREW)modbus_registers[41]=1;
0001b4  48ac              LDR      r0,|L1.1128|
0001b6  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_FF
;;;1243   modbus_registers[42]=0;								//Πεγ22
0001ba  17c3              ASRS     r3,r0,#31
0001bc  eb006313          ADD      r3,r0,r3,LSR #24
;;;1244   modbus_registers[43]=0;
0001c0  121c              ASRS     r4,r3,#8
;;;1245   if(AVT_REV_IS_ON)modbus_registers[42]=1;
0001c2  f88d4022          STRB     r4,[sp,#0x22]
0001c6  f88d0023          STRB     r0,[sp,#0x23]
0001ca  48a8              LDR      r0,|L1.1132|
;;;1246   
;;;1247   modbus_tx_buff[0]=adr;
0001cc  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_REW
;;;1248   modbus_tx_buff[1]=func;
0001d0  17c3              ASRS     r3,r0,#31
0001d2  eb006313          ADD      r3,r0,r3,LSR #24
;;;1249   modbus_tx_buff[2]=(char)(reg_adr/256);
0001d6  121c              ASRS     r4,r3,#8
0001d8  f88d4024          STRB     r4,[sp,#0x24]
;;;1250   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1251   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1252   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1253   /*
;;;1254   modbus_registers[0]=0x10;
;;;1255   modbus_registers[1]=0x11;
;;;1256   modbus_registers[2]=0x12;
;;;1257   modbus_registers[3]=0x13;
;;;1258   modbus_registers[4]=0x14;
;;;1259   modbus_registers[5]=0x15;
;;;1260   */
;;;1261   
;;;1262   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
0001dc  f88d0025          STRB     r0,[sp,#0x25]
0001e0  48a3              LDR      r0,|L1.1136|
0001e2  f9b00000          LDRSH    r0,[r0,#0]            ;1250  ; AVT_REV_U_NOM_FF
0001e6  17c3              ASRS     r3,r0,#31
0001e8  eb006313          ADD      r3,r0,r3,LSR #24
;;;1263   
;;;1264   crc_temp=CRC16_2(modbus_tx_buff,6);
0001ec  121c              ASRS     r4,r3,#8
0001ee  f88d4026          STRB     r4,[sp,#0x26]
0001f2  f88d0027          STRB     r0,[sp,#0x27]
;;;1265   
;;;1266   modbus_tx_buff[6]=crc_temp%256;
0001f6  489f              LDR      r0,|L1.1140|
;;;1267   modbus_tx_buff[7]=crc_temp/256;
0001f8  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_REW
0001fc  17c3              ASRS     r3,r0,#31
;;;1268   
;;;1269   for (i=0;i<8;i++)
0001fe  eb006313          ADD      r3,r0,r3,LSR #24
;;;1270   	{
;;;1271   	putchar0(modbus_tx_buff[i]);
000202  121c              ASRS     r4,r3,#8
000204  f88d4028          STRB     r4,[sp,#0x28]
000208  f88d0029          STRB     r0,[sp,#0x29]         ;1269
00020c  489a              LDR      r0,|L1.1144|
00020e  f9b00000          LDRSH    r0,[r0,#0]            ;1269  ; CAP_ZAR_TIME
;;;1272   	}
;;;1273   for (i=0;i<8;i++)
;;;1274   	{
;;;1275   	putchar_sc16is700(modbus_tx_buff[i]);
000212  17c3              ASRS     r3,r0,#31
000214  eb006313          ADD      r3,r0,r3,LSR #24
000218  121c              ASRS     r4,r3,#8              ;1273
00021a  f88d402a          STRB     r4,[sp,#0x2a]         ;1273
00021e  f88d002b          STRB     r0,[sp,#0x2b]         ;1273
;;;1276   	}
;;;1277   }
000222  4896              LDR      r0,|L1.1148|
000224  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
000228  17c3              ASRS     r3,r0,#31
00022a  eb006313          ADD      r3,r0,r3,LSR #24
00022e  121c              ASRS     r4,r3,#8
000230  f88d402c          STRB     r4,[sp,#0x2c]
000234  f88d002d          STRB     r0,[sp,#0x2d]
000238  4891              LDR      r0,|L1.1152|
00023a  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
00023e  17c3              ASRS     r3,r0,#31
000240  eb006313          ADD      r3,r0,r3,LSR #24
000244  121c              ASRS     r4,r3,#8
000246  f88d402e          STRB     r4,[sp,#0x2e]
00024a  f88d002f          STRB     r0,[sp,#0x2f]
00024e  488d              LDR      r0,|L1.1156|
000250  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
000254  17c3              ASRS     r3,r0,#31
000256  eb006313          ADD      r3,r0,r3,LSR #24
00025a  121c              ASRS     r4,r3,#8
00025c  f88d4030          STRB     r4,[sp,#0x30]
000260  f88d0031          STRB     r0,[sp,#0x31]
000264  4888              LDR      r0,|L1.1160|
000266  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_MAX_VOLT
00026a  17c3              ASRS     r3,r0,#31
00026c  eb006313          ADD      r3,r0,r3,LSR #24
000270  121c              ASRS     r4,r3,#8
000272  f88d4032          STRB     r4,[sp,#0x32]
000276  f88d0033          STRB     r0,[sp,#0x33]
00027a  4884              LDR      r0,|L1.1164|
00027c  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_WRK_CURR
000280  f88d9078          STRB     r9,[sp,#0x78]
000284  17c3              ASRS     r3,r0,#31
000286  eb006313          ADD      r3,r0,r3,LSR #24
00028a  121c              ASRS     r4,r3,#8
00028c  f88d4034          STRB     r4,[sp,#0x34]
000290  f88d0035          STRB     r0,[sp,#0x35]
000294  f88d1079          STRB     r1,[sp,#0x79]
000298  0a10              LSRS     r0,r2,#8
00029a  f88d007a          STRB     r0,[sp,#0x7a]
00029e  4668              MOV      r0,sp
0002a0  eb000042          ADD      r0,r0,r2,LSL #1
0002a4  f88d207b          STRB     r2,[sp,#0x7b]
0002a8  f8300c02          LDRH     r0,[r0,#-2]
0002ac  f8ad007c          STRH     r0,[sp,#0x7c]
0002b0  2106              MOVS     r1,#6
0002b2  a81e              ADD      r0,sp,#0x78
0002b4  f7fffffe          BL       CRC16_2
0002b8  f88d007e          STRB     r0,[sp,#0x7e]
0002bc  0a00              LSRS     r0,r0,#8
0002be  f88d007f          STRB     r0,[sp,#0x7f]
0002c2  2400              MOVS     r4,#0
0002c4  ad1e              ADD      r5,sp,#0x78
                  |L1.710|
0002c6  5d28              LDRB     r0,[r5,r4]
0002c8  f7fffffe          BL       putchar0
0002cc  1c64              ADDS     r4,r4,#1
0002ce  b2e4              UXTB     r4,r4
0002d0  2c08              CMP      r4,#8
0002d2  d3f8              BCC      |L1.710|
0002d4  2400              MOVS     r4,#0
                  |L1.726|
0002d6  5d28              LDRB     r0,[r5,r4]
0002d8  f7fffffe          BL       putchar_sc16is700
0002dc  1c64              ADDS     r4,r4,#1
0002de  b2e4              UXTB     r4,r4
0002e0  2c08              CMP      r4,#8
0002e2  d3f8              BCC      |L1.726|
0002e4  b037              ADD      sp,sp,#0xdc
0002e6  e8bd83f0          POP      {r4-r9,pc}
;;;1278   
                          ENDP

                  modbus_input_registers_transmit PROC
;;;1049   //-----------------------------------------------
;;;1050   void modbus_input_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr,unsigned short reg_quantity)
0002ea  e92d47f0          PUSH     {r4-r10,lr}
;;;1051   {
0002ee  4682              MOV      r10,r0
;;;1052   char modbus_registers[110];
;;;1053   char modbus_tx_buff[120];
;;;1054   unsigned short crc_temp;
;;;1055   char i;
;;;1056   
;;;1057   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
0002f0  4867              LDR      r0,|L1.1168|
0002f2  4689              MOV      r9,r1                 ;1051
0002f4  b0be              SUB      sp,sp,#0xf8           ;1051
0002f6  f9b00000          LDRSH    r0,[r0,#0]  ; load_U
0002fa  461c              MOV      r4,r3                 ;1051
0002fc  17c1              ASRS     r1,r0,#31
0002fe  eb006111          ADD      r1,r0,r1,LSR #24
000302  120b              ASRS     r3,r1,#8
000304  f88d307c          STRB     r3,[sp,#0x7c]
;;;1058   modbus_registers[1]=(char)(load_U%256);
000308  f88d007d          STRB     r0,[sp,#0x7d]
;;;1059   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
00030c  4861              LDR      r0,|L1.1172|
;;;1060   modbus_registers[3]=(char)(load_I%256);
;;;1061   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
;;;1062   modbus_registers[5]=(char)((time_proc%60)%256);
;;;1063   modbus_registers[6]=(char)(((time_proc/60)%60)/256);		//Πεγ4
;;;1064   modbus_registers[7]=(char)(((time_proc/60)%60)%256);
;;;1065   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
00030e  f44f2861          MOV      r8,#0xe1000
000312  f9b00000          LDRSH    r0,[r0,#0]            ;1059  ; load_I
000316  17c1              ASRS     r1,r0,#31             ;1059
000318  eb006111          ADD      r1,r0,r1,LSR #24      ;1059
00031c  120b              ASRS     r3,r1,#8              ;1059
00031e  f88d307e          STRB     r3,[sp,#0x7e]         ;1059
000322  f88d007f          STRB     r0,[sp,#0x7f]         ;1060
000326  485c              LDR      r0,|L1.1176|
000328  213c              MOVS     r1,#0x3c              ;1061
00032a  6803              LDR      r3,[r0,#0]            ;1061  ; time_proc
00032c  fb93f5f1          SDIV     r5,r3,r1              ;1061
000330  fb013015          MLS      r0,r1,r5,r3           ;1061
000334  17c6              ASRS     r6,r0,#31             ;1061
000336  eb006616          ADD      r6,r0,r6,LSR #24      ;1061
00033a  1237              ASRS     r7,r6,#8              ;1061
00033c  f88d7080          STRB     r7,[sp,#0x80]         ;1061
000340  f88d0081          STRB     r0,[sp,#0x81]         ;1062
000344  fb95f0f1          SDIV     r0,r5,r1              ;1063
000348  fb015010          MLS      r0,r1,r0,r5           ;1063
00034c  17c5              ASRS     r5,r0,#31             ;1063
00034e  eb006515          ADD      r5,r0,r5,LSR #24      ;1063
000352  122e              ASRS     r6,r5,#8              ;1063
000354  f88d6082          STRB     r6,[sp,#0x82]         ;1063
000358  f88d0083          STRB     r0,[sp,#0x83]         ;1064
00035c  fb93f0f8          SDIV     r0,r3,r8
000360  f88d0084          STRB     r0,[sp,#0x84]
;;;1066   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000364  f44f6761          MOV      r7,#0xe10
000368  fb93f0f7          SDIV     r0,r3,r7
00036c  f88d0085          STRB     r0,[sp,#0x85]
;;;1067   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
000370  484a              LDR      r0,|L1.1180|
000372  6803              LDR      r3,[r0,#0]  ; time_proc_remain
000374  fb93f5f1          SDIV     r5,r3,r1
000378  fb013015          MLS      r0,r1,r5,r3
00037c  17c6              ASRS     r6,r0,#31
00037e  eb006616          ADD      r6,r0,r6,LSR #24
000382  ea4f2c26          ASR      r12,r6,#8
000386  f88dc086          STRB     r12,[sp,#0x86]
;;;1068   modbus_registers[11]=(char)((time_proc_remain%60)%256);
00038a  f88d0087          STRB     r0,[sp,#0x87]
;;;1069   modbus_registers[12]=(char)(((time_proc_remain/60)%60)/256);//Πεγ7
00038e  fb95f0f1          SDIV     r0,r5,r1
000392  fb015010          MLS      r0,r1,r0,r5
000396  17c1              ASRS     r1,r0,#31
000398  eb006111          ADD      r1,r0,r1,LSR #24
00039c  120d              ASRS     r5,r1,#8
00039e  f88d5088          STRB     r5,[sp,#0x88]
;;;1070   modbus_registers[13]=(char)(((time_proc_remain/60)%60)%256);
0003a2  f88d0089          STRB     r0,[sp,#0x89]
;;;1071   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
0003a6  fb93f0f8          SDIV     r0,r3,r8
0003aa  f88d008a          STRB     r0,[sp,#0x8a]
;;;1072   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
0003ae  fb93f0f7          SDIV     r0,r3,r7
0003b2  f88d008b          STRB     r0,[sp,#0x8b]
;;;1073   modbus_registers[16]=(char)((CAP_COUNTER)/256);			//Πεγ9
0003b6  483a              LDR      r0,|L1.1184|
0003b8  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_COUNTER
0003bc  17c1              ASRS     r1,r0,#31
0003be  eb006111          ADD      r1,r0,r1,LSR #24
0003c2  120b              ASRS     r3,r1,#8
0003c4  f88d308c          STRB     r3,[sp,#0x8c]
;;;1074   modbus_registers[17]=(char)((CAP_COUNTER)%256);
0003c8  f88d008d          STRB     r0,[sp,#0x8d]
;;;1075   modbus_registers[18]=(char)((CAP_TIME_SEC)/256);			//Πεγ10
0003cc  4835              LDR      r0,|L1.1188|
0003ce  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_TIME_SEC
0003d2  17c1              ASRS     r1,r0,#31
0003d4  eb006111          ADD      r1,r0,r1,LSR #24
0003d8  120b              ASRS     r3,r1,#8
0003da  f88d308e          STRB     r3,[sp,#0x8e]
;;;1076   modbus_registers[19]=(char)((CAP_TIME_SEC)%256);
0003de  f88d008f          STRB     r0,[sp,#0x8f]
;;;1077   modbus_registers[20]=(char)((CAP_TIME_MIN)/256);			//Πεγ11
0003e2  4831              LDR      r0,|L1.1192|
;;;1078   modbus_registers[21]=(char)((CAP_TIME_MIN)%256);
;;;1079   modbus_registers[22]=(char)((CAP_TIME_HOUR)/256);			//Πεγ12
;;;1080   modbus_registers[23]=(char)((CAP_TIME_HOUR)%256);
;;;1081   
;;;1082   
;;;1083   /*
;;;1084   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
;;;1085   modbus_registers[17]=(char)(I_ug%256);
;;;1086   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
;;;1087   modbus_registers[19]=(char)(U_up%256);
;;;1088   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
;;;1089   modbus_registers[21]=(char)(U_maxg%256);
;;;1090   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
;;;1091   modbus_registers[23]=(char)(I_maxp%256);
;;;1092   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
;;;1093   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
;;;1094   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
;;;1095   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
;;;1096   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
;;;1097   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
;;;1098   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
;;;1099   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
;;;1100   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
;;;1101   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
;;;1102   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
;;;1103   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
;;;1104   modbus_registers[36]=0;								//Πεγ19
;;;1105   modbus_registers[37]=0;
;;;1106   if(work_stat==wsPS)modbus_registers[37]=1;
;;;1107   modbus_registers[38]=0;								//Πεγ20
;;;1108   modbus_registers[39]=0;
;;;1109   if(work_stat==wsGS)modbus_registers[39]=1;
;;;1110   modbus_registers[40]=0;								//Πεγ21
;;;1111   modbus_registers[41]=0;
;;;1112   if(REV_STAT==rsREW)modbus_registers[41]=1;
;;;1113   modbus_registers[42]=0;								//Πεγ22
;;;1114   modbus_registers[43]=0;
;;;1115   if(AVT_REV_IS_ON)modbus_registers[42]=1;
;;;1116   */
;;;1117   modbus_tx_buff[0]=adr;
;;;1118   modbus_tx_buff[1]=func;
;;;1119   modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1120   
;;;1121   memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-1)*2],reg_quantity*2);
0003e4  466d              MOV      r5,sp
0003e6  f9b00000          LDRSH    r0,[r0,#0]            ;1077  ; CAP_TIME_MIN
0003ea  17c1              ASRS     r1,r0,#31             ;1077
0003ec  eb006111          ADD      r1,r0,r1,LSR #24      ;1077
0003f0  120b              ASRS     r3,r1,#8              ;1077
0003f2  f88d3090          STRB     r3,[sp,#0x90]         ;1077
0003f6  f88d0091          STRB     r0,[sp,#0x91]         ;1078
0003fa  482c              LDR      r0,|L1.1196|
0003fc  f9b00000          LDRSH    r0,[r0,#0]            ;1079  ; CAP_TIME_HOUR
000400  f88da000          STRB     r10,[sp,#0]           ;1117
000404  17c1              ASRS     r1,r0,#31             ;1079
000406  eb006111          ADD      r1,r0,r1,LSR #24      ;1079
00040a  120b              ASRS     r3,r1,#8              ;1079
00040c  f88d3092          STRB     r3,[sp,#0x92]         ;1079
000410  f88d0093          STRB     r0,[sp,#0x93]         ;1080
000414  a91f              ADD      r1,sp,#0x7c
000416  0060              LSLS     r0,r4,#1              ;1119
000418  eb010142          ADD      r1,r1,r2,LSL #1
00041c  f88d9001          STRB     r9,[sp,#1]            ;1118
000420  f88d0002          STRB     r0,[sp,#2]            ;1119
000424  4602              MOV      r2,r0
000426  1e89              SUBS     r1,r1,#2
000428  1ce8              ADDS     r0,r5,#3
00042a  f7fffffe          BL       __aeabi_memcpy
;;;1122   
;;;1123   crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
00042e  2003              MOVS     r0,#3
000430  eb000044          ADD      r0,r0,r4,LSL #1
000434  b201              SXTH     r1,r0
000436  e03b              B        |L1.1200|
                  |L1.1080|
                          DCD      I_ug
                  |L1.1084|
                          DCD      U_up
                  |L1.1088|
                          DCD      U_maxg
                  |L1.1092|
                          DCD      I_maxp
                  |L1.1096|
                          DCD      T_PROC_GS
                  |L1.1100|
                          DCD      T_PROC_PS
                  |L1.1104|
                          DCD      work_stat
                  |L1.1108|
                          DCD      REV_STAT
                  |L1.1112|
                          DCD      AVT_REV_IS_ON
                  |L1.1116|
                          DCD      AVT_REV_TIME_FF
                  |L1.1120|
                          DCD      AVT_REV_TIME_REW
                  |L1.1124|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.1128|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.1132|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.1136|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.1140|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.1144|
                          DCD      CAP_ZAR_TIME
                  |L1.1148|
                          DCD      CAP_PAUSE1_TIME
                  |L1.1152|
                          DCD      CAP_RAZR_TIME
                  |L1.1156|
                          DCD      CAP_PAUSE2_TIME
                  |L1.1160|
                          DCD      CAP_MAX_VOLT
                  |L1.1164|
                          DCD      CAP_WRK_CURR
                  |L1.1168|
                          DCD      load_U
                  |L1.1172|
                          DCD      load_I
                  |L1.1176|
                          DCD      time_proc
                  |L1.1180|
                          DCD      time_proc_remain
                  |L1.1184|
                          DCD      CAP_COUNTER
                  |L1.1188|
                          DCD      CAP_TIME_SEC
                  |L1.1192|
                          DCD      CAP_TIME_MIN
                  |L1.1196|
                          DCD      CAP_TIME_HOUR
                  |L1.1200|
0004b0  4668              MOV      r0,sp
0004b2  f7fffffe          BL       CRC16_2
;;;1124   
;;;1125   modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
0004b6  eb050144          ADD      r1,r5,r4,LSL #1
;;;1126   modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1127   
;;;1128   for (i=0;i<(5+(reg_quantity*2));i++)
0004ba  2600              MOVS     r6,#0
0004bc  70c8              STRB     r0,[r1,#3]            ;1125
0004be  0a00              LSRS     r0,r0,#8              ;1126
0004c0  7108              STRB     r0,[r1,#4]            ;1126
0004c2  2005              MOVS     r0,#5
0004c4  eb000744          ADD      r7,r0,r4,LSL #1
0004c8  e004              B        |L1.1236|
                  |L1.1226|
;;;1129   	{
;;;1130   	putchar0(modbus_tx_buff[i]);
0004ca  5da8              LDRB     r0,[r5,r6]
0004cc  f7fffffe          BL       putchar0
0004d0  1c76              ADDS     r6,r6,#1              ;1128
0004d2  b2f6              UXTB     r6,r6                 ;1128
                  |L1.1236|
0004d4  42b7              CMP      r7,r6                 ;1128
0004d6  d8f8              BHI      |L1.1226|
;;;1131   	}
;;;1132   for (i=0;i<(5+(reg_quantity*2));i++)
0004d8  2400              MOVS     r4,#0
0004da  e004              B        |L1.1254|
                  |L1.1244|
;;;1133   	{
;;;1134   	putchar_sc16is700(modbus_tx_buff[i]);
0004dc  5d28              LDRB     r0,[r5,r4]
0004de  f7fffffe          BL       putchar_sc16is700
0004e2  1c64              ADDS     r4,r4,#1              ;1132
0004e4  b2e4              UXTB     r4,r4                 ;1132
                  |L1.1254|
0004e6  42a7              CMP      r7,r4                 ;1132
0004e8  d8f8              BHI      |L1.1244|
                  |L1.1258|
;;;1135   	}
;;;1136   }
0004ea  b03e              ADD      sp,sp,#0xf8
0004ec  e8bd87f0          POP      {r4-r10,pc}
;;;1137   
                          ENDP

                  modbus_hold_registers_transmit PROC
;;;1373   //-----------------------------------------------
;;;1374   void modbus_hold_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr,unsigned short reg_quantity)
0004f0  e92d47f0          PUSH     {r4-r10,lr}
;;;1375   {
0004f4  b0be              SUB      sp,sp,#0xf8
0004f6  4682              MOV      r10,r0
0004f8  4689              MOV      r9,r1
0004fa  461c              MOV      r4,r3
;;;1376   char modbus_registers[110];
;;;1377   char modbus_tx_buff[120];
;;;1378   unsigned short crc_temp;
;;;1379   char i;
;;;1380   
;;;1381   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
0004fc  48ff              LDR      r0,|L1.2300|
;;;1382   modbus_registers[1]=(char)(I_ug%256);
;;;1383   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
;;;1384   modbus_registers[3]=(char)(U_up%256);
;;;1385   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
;;;1386   modbus_registers[5]=(char)(U_maxg%256);
;;;1387   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1388   modbus_registers[7]=(char)(I_maxp%256);
;;;1389   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1390   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1391   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1392   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1393   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
0004fe  f44f2861          MOV      r8,#0xe1000
000502  f9b00000          LDRSH    r0,[r0,#0]            ;1381  ; I_ug
000506  17c1              ASRS     r1,r0,#31             ;1381
000508  eb006111          ADD      r1,r0,r1,LSR #24      ;1381
00050c  120b              ASRS     r3,r1,#8              ;1381
00050e  f88d3078          STRB     r3,[sp,#0x78]         ;1381
000512  f88d0079          STRB     r0,[sp,#0x79]         ;1382
000516  48fa              LDR      r0,|L1.2304|
000518  f9b00000          LDRSH    r0,[r0,#0]            ;1383  ; U_up
00051c  17c1              ASRS     r1,r0,#31             ;1383
00051e  eb006111          ADD      r1,r0,r1,LSR #24      ;1383
000522  120b              ASRS     r3,r1,#8              ;1383
000524  f88d307a          STRB     r3,[sp,#0x7a]         ;1383
000528  f88d007b          STRB     r0,[sp,#0x7b]         ;1384
00052c  48f5              LDR      r0,|L1.2308|
00052e  f9b00000          LDRSH    r0,[r0,#0]            ;1385  ; U_maxg
000532  17c1              ASRS     r1,r0,#31             ;1385
000534  eb006111          ADD      r1,r0,r1,LSR #24      ;1385
000538  120b              ASRS     r3,r1,#8              ;1385
00053a  f88d307c          STRB     r3,[sp,#0x7c]         ;1385
00053e  f88d007d          STRB     r0,[sp,#0x7d]         ;1386
000542  48f1              LDR      r0,|L1.2312|
000544  f9b00000          LDRSH    r0,[r0,#0]            ;1387  ; I_maxp
000548  17c1              ASRS     r1,r0,#31             ;1387
00054a  eb006111          ADD      r1,r0,r1,LSR #24      ;1387
00054e  120b              ASRS     r3,r1,#8              ;1387
000550  f88d307e          STRB     r3,[sp,#0x7e]         ;1387
000554  f88d007f          STRB     r0,[sp,#0x7f]         ;1388
000558  48ec              LDR      r0,|L1.2316|
00055a  213c              MOVS     r1,#0x3c              ;1389
00055c  6800              LDR      r0,[r0,#0]            ;1389  ; T_PROC_GS
00055e  fb90f5f1          SDIV     r5,r0,r1              ;1389
000562  fb010315          MLS      r3,r1,r5,r0           ;1389
000566  17de              ASRS     r6,r3,#31             ;1389
000568  eb036616          ADD      r6,r3,r6,LSR #24      ;1389
00056c  1237              ASRS     r7,r6,#8              ;1389
00056e  f88d7080          STRB     r7,[sp,#0x80]         ;1389
000572  f88d3081          STRB     r3,[sp,#0x81]         ;1390
000576  fb95f3f1          SDIV     r3,r5,r1              ;1391
00057a  fb015313          MLS      r3,r1,r3,r5           ;1391
00057e  17dd              ASRS     r5,r3,#31             ;1391
000580  eb036515          ADD      r5,r3,r5,LSR #24      ;1391
000584  122e              ASRS     r6,r5,#8              ;1391
000586  f88d6082          STRB     r6,[sp,#0x82]         ;1391
00058a  f88d3083          STRB     r3,[sp,#0x83]         ;1392
00058e  fb90f3f8          SDIV     r3,r0,r8
;;;1394   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
000592  f44f6761          MOV      r7,#0xe10
000596  fb90f0f7          SDIV     r0,r0,r7
00059a  f88d3084          STRB     r3,[sp,#0x84]         ;1393
00059e  f88d0085          STRB     r0,[sp,#0x85]
;;;1395   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0005a2  48db              LDR      r0,|L1.2320|
0005a4  6803              LDR      r3,[r0,#0]  ; T_PROC_PS
0005a6  fb93f5f1          SDIV     r5,r3,r1
0005aa  fb013015          MLS      r0,r1,r5,r3
0005ae  17c6              ASRS     r6,r0,#31
0005b0  eb006616          ADD      r6,r0,r6,LSR #24
0005b4  ea4f2c26          ASR      r12,r6,#8
0005b8  f88dc086          STRB     r12,[sp,#0x86]
;;;1396   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0005bc  f88d0087          STRB     r0,[sp,#0x87]
;;;1397   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0005c0  fb95f0f1          SDIV     r0,r5,r1
0005c4  fb015010          MLS      r0,r1,r0,r5
0005c8  17c1              ASRS     r1,r0,#31
0005ca  eb006111          ADD      r1,r0,r1,LSR #24
0005ce  120d              ASRS     r5,r1,#8
0005d0  f88d5088          STRB     r5,[sp,#0x88]
;;;1398   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
0005d4  f88d0089          STRB     r0,[sp,#0x89]
;;;1399   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
0005d8  fb93f0f8          SDIV     r0,r3,r8
0005dc  f88d008a          STRB     r0,[sp,#0x8a]
;;;1400   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
0005e0  fb93f0f7          SDIV     r0,r3,r7
0005e4  f88d008b          STRB     r0,[sp,#0x8b]
;;;1401   modbus_registers[20]=0;								//Πεγ60
0005e8  2000              MOVS     r0,#0
;;;1402   modbus_registers[21]=0;
;;;1403   if(work_stat==wsPS)modbus_registers[21]=1;
0005ea  49ca              LDR      r1,|L1.2324|
0005ec  f88d008c          STRB     r0,[sp,#0x8c]         ;1401
0005f0  f88d008d          STRB     r0,[sp,#0x8d]         ;1402
0005f4  780b              LDRB     r3,[r1,#0]  ; work_stat
0005f6  2101              MOVS     r1,#1
0005f8  2b02              CMP      r3,#2
0005fa  d101              BNE      |L1.1536|
0005fc  f88d108d          STRB     r1,[sp,#0x8d]
                  |L1.1536|
;;;1404   modbus_registers[22]=0;								//Πεγ61
000600  f88d008e          STRB     r0,[sp,#0x8e]
;;;1405   modbus_registers[23]=0;
000604  f88d008f          STRB     r0,[sp,#0x8f]
;;;1406   if(work_stat==wsGS)modbus_registers[23]=1;
000608  2b01              CMP      r3,#1
00060a  d101              BNE      |L1.1552|
00060c  f88d108f          STRB     r1,[sp,#0x8f]
                  |L1.1552|
;;;1407   modbus_registers[24]=0;								//Πεγ62
;;;1408   modbus_registers[25]=0;
;;;1409   if(REV_STAT==rsREW)modbus_registers[25]=1;
000610  4bc1              LDR      r3,|L1.2328|
000612  f88d0090          STRB     r0,[sp,#0x90]         ;1407
000616  f88d0091          STRB     r0,[sp,#0x91]         ;1408
00061a  781b              LDRB     r3,[r3,#0]  ; REV_STAT
00061c  b90b              CBNZ     r3,|L1.1570|
00061e  f88d1091          STRB     r1,[sp,#0x91]
                  |L1.1570|
;;;1410   modbus_registers[26]=0;								//Πεγ63
000622  f88d0092          STRB     r0,[sp,#0x92]
;;;1411   modbus_registers[27]=0;
000626  f88d0093          STRB     r0,[sp,#0x93]
;;;1412   if(AVT_REV_IS_ON)modbus_registers[27]=1;
00062a  48bc              LDR      r0,|L1.2332|
00062c  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
00062e  b108              CBZ      r0,|L1.1588|
000630  f88d1093          STRB     r1,[sp,#0x93]
                  |L1.1588|
;;;1413   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000634  48ba              LDR      r0,|L1.2336|
000636  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_FF
00063a  17c1              ASRS     r1,r0,#31
00063c  eb006111          ADD      r1,r0,r1,LSR #24
000640  120b              ASRS     r3,r1,#8
000642  f88d3094          STRB     r3,[sp,#0x94]
;;;1414   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
000646  f88d0095          STRB     r0,[sp,#0x95]
;;;1415   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
00064a  48b6              LDR      r0,|L1.2340|
00064c  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_REW
000650  17c1              ASRS     r1,r0,#31
000652  eb006111          ADD      r1,r0,r1,LSR #24
000656  120b              ASRS     r3,r1,#8
000658  f88d3096          STRB     r3,[sp,#0x96]
;;;1416   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00065c  f88d0097          STRB     r0,[sp,#0x97]
;;;1417   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
000660  48b1              LDR      r0,|L1.2344|
000662  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_PAUSE
000666  17c1              ASRS     r1,r0,#31
000668  eb006111          ADD      r1,r0,r1,LSR #24
00066c  120b              ASRS     r3,r1,#8
00066e  f88d3098          STRB     r3,[sp,#0x98]
;;;1418   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
000672  f88d0099          STRB     r0,[sp,#0x99]
;;;1419   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
000676  48ad              LDR      r0,|L1.2348|
000678  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_FF
00067c  17c1              ASRS     r1,r0,#31
00067e  eb006111          ADD      r1,r0,r1,LSR #24
000682  120b              ASRS     r3,r1,#8
000684  f88d309a          STRB     r3,[sp,#0x9a]
;;;1420   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
000688  f88d009b          STRB     r0,[sp,#0x9b]
;;;1421   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
00068c  48a8              LDR      r0,|L1.2352|
00068e  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_REW
000692  17c1              ASRS     r1,r0,#31
000694  eb006111          ADD      r1,r0,r1,LSR #24
000698  120b              ASRS     r3,r1,#8
00069a  f88d309c          STRB     r3,[sp,#0x9c]
;;;1422   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
00069e  f88d009d          STRB     r0,[sp,#0x9d]
;;;1423   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
0006a2  48a4              LDR      r0,|L1.2356|
0006a4  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_FF
0006a8  17c1              ASRS     r1,r0,#31
0006aa  eb006111          ADD      r1,r0,r1,LSR #24
0006ae  120b              ASRS     r3,r1,#8
0006b0  f88d309e          STRB     r3,[sp,#0x9e]
;;;1424   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
0006b4  f88d009f          STRB     r0,[sp,#0x9f]
;;;1425   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
0006b8  489f              LDR      r0,|L1.2360|
0006ba  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_REW
0006be  17c1              ASRS     r1,r0,#31
0006c0  eb006111          ADD      r1,r0,r1,LSR #24
0006c4  120b              ASRS     r3,r1,#8
0006c6  f88d30a0          STRB     r3,[sp,#0xa0]
;;;1426   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
0006ca  f88d00a1          STRB     r0,[sp,#0xa1]
;;;1427   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
0006ce  489b              LDR      r0,|L1.2364|
0006d0  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_ZAR_TIME
0006d4  17c1              ASRS     r1,r0,#31
0006d6  eb006111          ADD      r1,r0,r1,LSR #24
0006da  120b              ASRS     r3,r1,#8
0006dc  f88d30a2          STRB     r3,[sp,#0xa2]
;;;1428   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
0006e0  f88d00a3          STRB     r0,[sp,#0xa3]
;;;1429   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
0006e4  4896              LDR      r0,|L1.2368|
0006e6  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
0006ea  17c1              ASRS     r1,r0,#31
0006ec  eb006111          ADD      r1,r0,r1,LSR #24
0006f0  120b              ASRS     r3,r1,#8
0006f2  f88d30a4          STRB     r3,[sp,#0xa4]
;;;1430   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
0006f6  f88d00a5          STRB     r0,[sp,#0xa5]
;;;1431   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
0006fa  4892              LDR      r0,|L1.2372|
0006fc  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
000700  17c1              ASRS     r1,r0,#31
000702  eb006111          ADD      r1,r0,r1,LSR #24
000706  120b              ASRS     r3,r1,#8
000708  f88d30a6          STRB     r3,[sp,#0xa6]
;;;1432   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
00070c  f88d00a7          STRB     r0,[sp,#0xa7]
;;;1433   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
000710  488d              LDR      r0,|L1.2376|
000712  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
000716  17c1              ASRS     r1,r0,#31
000718  eb006111          ADD      r1,r0,r1,LSR #24
00071c  120b              ASRS     r3,r1,#8
00071e  f88d30a8          STRB     r3,[sp,#0xa8]
;;;1434   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
000722  f88d00a9          STRB     r0,[sp,#0xa9]
;;;1435   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
000726  4889              LDR      r0,|L1.2380|
;;;1436   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
;;;1437   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
;;;1438   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
;;;1439   
;;;1440   
;;;1441   modbus_tx_buff[0]=adr;
;;;1442   modbus_tx_buff[1]=func;
;;;1443   modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1444   
;;;1445   memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-50)*2],reg_quantity*2);
000728  466d              MOV      r5,sp
00072a  f9b00000          LDRSH    r0,[r0,#0]            ;1435  ; CAP_MAX_VOLT
00072e  17c1              ASRS     r1,r0,#31             ;1435
000730  eb006111          ADD      r1,r0,r1,LSR #24      ;1435
000734  120b              ASRS     r3,r1,#8              ;1435
000736  f88d30aa          STRB     r3,[sp,#0xaa]         ;1435
00073a  f88d00ab          STRB     r0,[sp,#0xab]         ;1436
00073e  4884              LDR      r0,|L1.2384|
000740  f9b00000          LDRSH    r0,[r0,#0]            ;1437  ; CAP_WRK_CURR
000744  f88da000          STRB     r10,[sp,#0]           ;1441
000748  17c1              ASRS     r1,r0,#31             ;1437
00074a  eb006111          ADD      r1,r0,r1,LSR #24      ;1437
00074e  120b              ASRS     r3,r1,#8              ;1437
000750  f88d30ac          STRB     r3,[sp,#0xac]         ;1437
000754  f88d00ad          STRB     r0,[sp,#0xad]         ;1438
000758  a91e              ADD      r1,sp,#0x78
00075a  0060              LSLS     r0,r4,#1              ;1443
00075c  eb010142          ADD      r1,r1,r2,LSL #1
000760  f88d9001          STRB     r9,[sp,#1]            ;1442
000764  f88d0002          STRB     r0,[sp,#2]            ;1443
000768  4602              MOV      r2,r0
00076a  3964              SUBS     r1,r1,#0x64
00076c  1ce8              ADDS     r0,r5,#3
00076e  f7fffffe          BL       __aeabi_memcpy
;;;1446   						   
;;;1447   crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
000772  2003              MOVS     r0,#3
000774  eb000044          ADD      r0,r0,r4,LSL #1
000778  b201              SXTH     r1,r0
00077a  4668              MOV      r0,sp
00077c  f7fffffe          BL       CRC16_2
;;;1448   
;;;1449   modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
000780  eb050144          ADD      r1,r5,r4,LSL #1
;;;1450   modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1451   
;;;1452   for (i=0;i<(5+(reg_quantity*2));i++)
000784  2600              MOVS     r6,#0
000786  70c8              STRB     r0,[r1,#3]            ;1449
000788  0a00              LSRS     r0,r0,#8              ;1450
00078a  7108              STRB     r0,[r1,#4]            ;1450
00078c  2005              MOVS     r0,#5
00078e  eb000744          ADD      r7,r0,r4,LSL #1
000792  e004              B        |L1.1950|
                  |L1.1940|
;;;1453   	{
;;;1454   	putchar0(modbus_tx_buff[i]);
000794  5da8              LDRB     r0,[r5,r6]
000796  f7fffffe          BL       putchar0
00079a  1c76              ADDS     r6,r6,#1              ;1452
00079c  b2f6              UXTB     r6,r6                 ;1452
                  |L1.1950|
00079e  42b7              CMP      r7,r6                 ;1452
0007a0  d8f8              BHI      |L1.1940|
;;;1455   	}
;;;1456   for (i=0;i<(5+(reg_quantity*2));i++)
0007a2  2400              MOVS     r4,#0
0007a4  e004              B        |L1.1968|
                  |L1.1958|
;;;1457   	{
;;;1458   	putchar_sc16is700(modbus_tx_buff[i]);
0007a6  5d28              LDRB     r0,[r5,r4]
0007a8  f7fffffe          BL       putchar_sc16is700
0007ac  1c64              ADDS     r4,r4,#1              ;1456
0007ae  b2e4              UXTB     r4,r4                 ;1456
                  |L1.1968|
0007b0  42a7              CMP      r7,r4                 ;1456
0007b2  d8f8              BHI      |L1.1958|
;;;1459   	}
;;;1460   }
0007b4  e699              B        |L1.1258|
;;;1461   
                          ENDP

                  modbus_for_pult_registers_transmit PROC
;;;1139   //-----------------------------------------------
;;;1140   void modbus_for_pult_registers_transmit(unsigned short reg_quantity)
0007b6  b570              PUSH     {r4-r6,lr}
;;;1141   {
0007b8  4606              MOV      r6,r0
;;;1142   char modbus_registers[20];
;;;1143   char modbus_tx_buff[30];
;;;1144   unsigned short crc_temp;
;;;1145   char i;
;;;1146   //char reg_quantity=4;
;;;1147   
;;;1148   //pult_time_set=0xffff;
;;;1149   
;;;1150   modbus_registers[0]=(char)(pult_u%256);
0007ba  4866              LDR      r0,|L1.2388|
0007bc  b090              SUB      sp,sp,#0x40           ;1141
;;;1151   modbus_registers[1]=(char)(pult_u/256);					//Πεγ1
;;;1152   modbus_registers[2]=(char)(pult_i%256);
;;;1153   modbus_registers[3]=(char)(pult_i/256);					//Πεγ2
;;;1154   modbus_registers[4]=(char)(pult_work_stat%256);
;;;1155   modbus_registers[5]=(char)(pult_work_stat/256);			//Πεγ3
;;;1156   modbus_registers[6]=(char)(pult_u_set%256);
;;;1157   modbus_registers[7]=(char)(pult_u_set/256);				//Πεγ4
;;;1158   modbus_registers[8]=(char)(pult_time%256);
;;;1159   modbus_registers[9]=(char)(pult_time/256);				//Πεγ5
;;;1160   modbus_registers[10]=(char)(pult_time_set%256);		 	
;;;1161   modbus_registers[11]=(char)(pult_time_set/256);			//Πεγ6
;;;1162   modbus_registers[12]=(char)(pult_i_set%256);
;;;1163   modbus_registers[13]=(char)(pult_i_set/256);				//Πεγ7
;;;1164   
;;;1165   
;;;1166   modbus_tx_buff[0]=201;
;;;1167   modbus_tx_buff[1]=4;
;;;1168   modbus_tx_buff[2]=(char)(reg_quantity*2);
0007be  0072              LSLS     r2,r6,#1
0007c0  f9b00000          LDRSH    r0,[r0,#0]            ;1150  ; pult_u
0007c4  f88d0024          STRB     r0,[sp,#0x24]         ;1150
0007c8  17c1              ASRS     r1,r0,#31             ;1150
0007ca  eb006111          ADD      r1,r0,r1,LSR #24      ;1150
0007ce  1208              ASRS     r0,r1,#8              ;1151
0007d0  f88d0025          STRB     r0,[sp,#0x25]         ;1151
0007d4  4860              LDR      r0,|L1.2392|
;;;1169   
;;;1170   memcpy((char*)&modbus_tx_buff[3],(char*)modbus_registers,reg_quantity*2);
0007d6  466c              MOV      r4,sp
0007d8  f9b00000          LDRSH    r0,[r0,#0]            ;1152  ; pult_i
0007dc  f88d0026          STRB     r0,[sp,#0x26]         ;1152
0007e0  17c1              ASRS     r1,r0,#31             ;1152
0007e2  eb006111          ADD      r1,r0,r1,LSR #24      ;1152
0007e6  1208              ASRS     r0,r1,#8              ;1153
0007e8  f88d0027          STRB     r0,[sp,#0x27]         ;1153
0007ec  485b              LDR      r0,|L1.2396|
0007ee  7800              LDRB     r0,[r0,#0]            ;1154  ; pult_work_stat
0007f0  f88d0028          STRB     r0,[sp,#0x28]         ;1154
0007f4  2000              MOVS     r0,#0                 ;1155
0007f6  f88d0029          STRB     r0,[sp,#0x29]         ;1155
0007fa  4859              LDR      r0,|L1.2400|
0007fc  f9b00000          LDRSH    r0,[r0,#0]            ;1156  ; pult_u_set
000800  f88d002a          STRB     r0,[sp,#0x2a]         ;1156
000804  17c1              ASRS     r1,r0,#31             ;1156
000806  eb006111          ADD      r1,r0,r1,LSR #24      ;1156
00080a  1208              ASRS     r0,r1,#8              ;1157
00080c  f88d002b          STRB     r0,[sp,#0x2b]         ;1157
000810  4854              LDR      r0,|L1.2404|
000812  f9b00000          LDRSH    r0,[r0,#0]            ;1158  ; pult_time
000816  f88d002c          STRB     r0,[sp,#0x2c]         ;1158
00081a  17c1              ASRS     r1,r0,#31             ;1158
00081c  eb006111          ADD      r1,r0,r1,LSR #24      ;1158
000820  1208              ASRS     r0,r1,#8              ;1159
000822  f88d002d          STRB     r0,[sp,#0x2d]         ;1159
000826  4850              LDR      r0,|L1.2408|
000828  8800              LDRH     r0,[r0,#0]            ;1160  ; pult_time_set
00082a  f88d002e          STRB     r0,[sp,#0x2e]         ;1160
00082e  0a00              LSRS     r0,r0,#8              ;1161
000830  f88d002f          STRB     r0,[sp,#0x2f]         ;1161
000834  484d              LDR      r0,|L1.2412|
000836  f9b00000          LDRSH    r0,[r0,#0]            ;1162  ; pult_i_set
00083a  f88d0030          STRB     r0,[sp,#0x30]         ;1162
00083e  17c1              ASRS     r1,r0,#31             ;1162
000840  eb006111          ADD      r1,r0,r1,LSR #24      ;1162
000844  1208              ASRS     r0,r1,#8              ;1163
000846  f88d0031          STRB     r0,[sp,#0x31]         ;1163
00084a  20c9              MOVS     r0,#0xc9              ;1166
00084c  f88d0000          STRB     r0,[sp,#0]            ;1166
000850  2004              MOVS     r0,#4                 ;1167
000852  f88d0001          STRB     r0,[sp,#1]            ;1167
000856  f88d2002          STRB     r2,[sp,#2]            ;1168
00085a  a909              ADD      r1,sp,#0x24
00085c  1ce0              ADDS     r0,r4,#3
00085e  f7fffffe          BL       __aeabi_memcpy
;;;1171   
;;;1172   crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
000862  2003              MOVS     r0,#3
000864  eb000046          ADD      r0,r0,r6,LSL #1
000868  b201              SXTH     r1,r0
00086a  4668              MOV      r0,sp
00086c  f7fffffe          BL       CRC16_2
;;;1173   
;;;1174   modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
000870  eb040146          ADD      r1,r4,r6,LSL #1
;;;1175   modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1176   
;;;1177   for (i=0;i<(5+(reg_quantity*2));i++)
000874  2500              MOVS     r5,#0
000876  70c8              STRB     r0,[r1,#3]            ;1174
000878  0a00              LSRS     r0,r0,#8              ;1175
00087a  7108              STRB     r0,[r1,#4]            ;1175
00087c  2005              MOVS     r0,#5
00087e  eb000646          ADD      r6,r0,r6,LSL #1
000882  e004              B        |L1.2190|
                  |L1.2180|
;;;1178   	{
;;;1179   	putchar0(modbus_tx_buff[i]);
000884  5d60              LDRB     r0,[r4,r5]
000886  f7fffffe          BL       putchar0
00088a  1c6d              ADDS     r5,r5,#1              ;1177
00088c  b2ed              UXTB     r5,r5                 ;1177
                  |L1.2190|
00088e  42ae              CMP      r6,r5                 ;1177
000890  d8f8              BHI      |L1.2180|
;;;1180   	}
;;;1181   for (i=0;i<(5+(reg_quantity*2));i++)
000892  2500              MOVS     r5,#0
000894  e004              B        |L1.2208|
                  |L1.2198|
;;;1182   	{
;;;1183   	putchar_sc16is700(modbus_tx_buff[i]);
000896  5d60              LDRB     r0,[r4,r5]
000898  f7fffffe          BL       putchar_sc16is700
00089c  1c6d              ADDS     r5,r5,#1              ;1181
00089e  b2ed              UXTB     r5,r5                 ;1181
                  |L1.2208|
0008a0  42ae              CMP      r6,r5                 ;1181
0008a2  d8f8              BHI      |L1.2198|
;;;1184   	}
;;;1185   //modbus_plazma1++;
;;;1186   }
0008a4  b010              ADD      sp,sp,#0x40
0008a6  bd70              POP      {r4-r6,pc}
;;;1187   
                          ENDP

                  modbus_in PROC
;;;55     //-----------------------------------------------
;;;56     void modbus_in(void)
0008a8  e92d4ff8          PUSH     {r3-r11,lr}
;;;57     {
;;;58     short crc16_calculated;		//βϋχθρλεμΰ θη οπθνςϋυ δΰννϋυ CRC
;;;59     short crc16_incapsulated;	//βρςπξενννΰ β οξρϋλκσ CRC
;;;60     unsigned short modbus_rx_arg0;		//βρςπξεννϋι β οξρϋλκσ οεπβϋι ΰπγσμενς
;;;61     unsigned short modbus_rx_arg1;		//βρςπξεννϋι β οξρϋλκσ βςξπξι ΰπγσμενς
;;;62     //unsigned short modbus_rx_arg2;		//βρςπξεννϋι β οξρϋλκσ ςπεςθι ΰπγσμενς
;;;63     //unsigned short modbus_rx_arg3;		//βρςπξεννϋι β οξρϋλκσ χεςβεπςϋι ΰπγσμενς
;;;64     unsigned char modbus_func;			//βρςπξεννϋι β οξρϋλκσ κξδ τσνκφθθ
;;;65     
;;;66     //modbus_plazma++;
;;;67     
;;;68     memcpy(modbus_an_buffer,modbus_rx_buffer,modbus_rx_buffer_ptr);
0008ac  4d30              LDR      r5,|L1.2416|
0008ae  4931              LDR      r1,|L1.2420|
0008b0  78aa              LDRB     r2,[r5,#2]  ; modbus_rx_buffer_ptr
0008b2  f101001e          ADD      r0,r1,#0x1e
0008b6  4614              MOV      r4,r2
0008b8  f7fffffe          BL       __aeabi_memcpy
;;;69     modbus_rx_counter=modbus_rx_buffer_ptr;
0008bc  70ec              STRB     r4,[r5,#3]
;;;70     modbus_rx_buffer_ptr=0;
0008be  2000              MOVS     r0,#0
0008c0  70a8              STRB     r0,[r5,#2]
;;;71     bMODBUS_TIMEOUT=0;
0008c2  7068              STRB     r0,[r5,#1]
;;;72     
;;;73     	
;;;74     crc16_calculated  = CRC16_2((char*)modbus_an_buffer, modbus_rx_counter-2);
0008c4  482b              LDR      r0,|L1.2420|
0008c6  1ea1              SUBS     r1,r4,#2
0008c8  301e              ADDS     r0,r0,#0x1e
0008ca  f7fffffe          BL       CRC16_2
0008ce  b201              SXTH     r1,r0
;;;75     crc16_incapsulated = *((short*)&modbus_an_buffer[modbus_rx_counter-2]);
0008d0  4e28              LDR      r6,|L1.2420|
0008d2  78e8              LDRB     r0,[r5,#3]  ; modbus_rx_counter
0008d4  361e              ADDS     r6,r6,#0x1e
0008d6  4430              ADD      r0,r0,r6
0008d8  f9302c02          LDRSH    r2,[r0,#-2]
;;;76     
;;;77     //modbus_plazma=modbus_rx_counter;
;;;78     //modbus_plazma2=crc16_calculated;
;;;79     //modbus_plazma3=crc16_incapsulated;
;;;80     
;;;81     
;;;82     
;;;83     
;;;84     modbus_func=modbus_an_buffer[1];
0008dc  7870              LDRB     r0,[r6,#1]  ; modbus_an_buffer
;;;85     modbus_rx_arg0=(((unsigned short)modbus_an_buffer[2])*((unsigned short)256))+((unsigned short)modbus_an_buffer[3]);
0008de  9000              STR      r0,[sp,#0]
0008e0  78f0              LDRB     r0,[r6,#3]  ; modbus_an_buffer
0008e2  78b3              LDRB     r3,[r6,#2]  ; modbus_an_buffer
0008e4  eb002003          ADD      r0,r0,r3,LSL #8
0008e8  b287              UXTH     r7,r0
;;;86     modbus_rx_arg1=(((unsigned short)modbus_an_buffer[4])*((unsigned short)256))+((unsigned short)modbus_an_buffer[5]);
0008ea  7970              LDRB     r0,[r6,#5]  ; modbus_an_buffer
0008ec  7933              LDRB     r3,[r6,#4]  ; modbus_an_buffer
0008ee  eb002003          ADD      r0,r0,r3,LSL #8
0008f2  b284              UXTH     r4,r0
;;;87     //modbus_rx_arg2=(((unsigned short)modbus_an_buffer[6])*((unsigned short)256))+((unsigned short)modbus_an_buffer[7]);
;;;88     //modbus_rx_arg3=(((unsigned short)modbus_an_buffer[8])*((unsigned short)256))+((unsigned short)modbus_an_buffer[9]);
;;;89     modbus_cmnd=(modbus_rx_arg1>>8)&0x7f;
0008f4  f3c42306          UBFX     r3,r4,#8,#7
0008f8  716b              STRB     r3,[r5,#5]
;;;90     modbus_cmnd_cnt=(modbus_rx_arg1)&0x0f;
0008fa  e03d              B        |L1.2424|
                  |L1.2300|
                          DCD      I_ug
                  |L1.2304|
                          DCD      U_up
                  |L1.2308|
                          DCD      U_maxg
                  |L1.2312|
                          DCD      I_maxp
                  |L1.2316|
                          DCD      T_PROC_GS
                  |L1.2320|
                          DCD      T_PROC_PS
                  |L1.2324|
                          DCD      work_stat
                  |L1.2328|
                          DCD      REV_STAT
                  |L1.2332|
                          DCD      AVT_REV_IS_ON
                  |L1.2336|
                          DCD      AVT_REV_TIME_FF
                  |L1.2340|
                          DCD      AVT_REV_TIME_REW
                  |L1.2344|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.2348|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.2352|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.2356|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.2360|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.2364|
                          DCD      CAP_ZAR_TIME
                  |L1.2368|
                          DCD      CAP_PAUSE1_TIME
                  |L1.2372|
                          DCD      CAP_RAZR_TIME
                  |L1.2376|
                          DCD      CAP_PAUSE2_TIME
                  |L1.2380|
                          DCD      CAP_MAX_VOLT
                  |L1.2384|
                          DCD      CAP_WRK_CURR
                  |L1.2388|
                          DCD      pult_u
                  |L1.2392|
                          DCD      pult_i
                  |L1.2396|
                          DCD      pult_work_stat
                  |L1.2400|
                          DCD      pult_u_set
                  |L1.2404|
                          DCD      pult_time
                  |L1.2408|
                          DCD      pult_time_set
                  |L1.2412|
                          DCD      pult_i_set
                  |L1.2416|
                          DCD      ||.data||
                  |L1.2420|
                          DCD      ||area_number.5||
                  |L1.2424|
000978  f004000f          AND      r0,r4,#0xf
00097c  7128              STRB     r0,[r5,#4]
;;;91     
;;;92     modbus_plazma3=modbus_cmnd;
00097e  81ab              STRH     r3,[r5,#0xc]
;;;93     modbus_plazma2=modbus_cmnd_cnt;
000980  8168              STRH     r0,[r5,#0xa]
;;;94     modbus_plazma1=modbus_self_cmnd_cnt;
000982  782b              LDRB     r3,[r5,#0]  ; modbus_self_cmnd_cnt
000984  812b              STRH     r3,[r5,#8]
;;;95     
;;;96     if(crc16_calculated==crc16_incapsulated)
000986  4291              CMP      r1,r2
000988  d171              BNE      |L1.2670|
;;;97     	{
;;;98     	if(modbus_self_cmnd_cnt==33)modbus_self_cmnd_cnt=modbus_cmnd_cnt;
00098a  2b21              CMP      r3,#0x21
00098c  d100              BNE      |L1.2448|
00098e  7028              STRB     r0,[r5,#0]
                  |L1.2448|
;;;99     	modbus_plazma=modbus_an_buffer[0];
000990  48fb              LDR      r0,|L1.3456|
000992  46a8              MOV      r8,r5
;;;100    	if(modbus_an_buffer[0]==200)	 //ερλθ ηΰοπξρ ξς οσλόςΰ
;;;101    		{
;;;102    		if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
;;;103    			{
;;;104    			modbus_for_pult_registers_transmit(7);
;;;105    			}
;;;106    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
;;;107    			{
;;;108    			//if(modbus_rx_arg0==1)		//
;;;109    				{
;;;110    				modbus_for_pult_registers_transmit(7);
;;;111    				tumbler_stat=(enum_tumbler_stat)(modbus_rx_arg1>>15);
;;;112    				if((tumbler_stat!=tumbler_stat_old))
;;;113    					{
;;;114    					if(tumbler_stat==tsU)
;;;115    						{
;;;116    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;117    						}
;;;118    					else lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;119    					
;;;120    					if(main_cnt>3)
;;;121    						{
;;;122    						work_stat=wsOFF;
;;;123    						restart_off();
;;;124    						}
;;;125    					}
;;;126    				tumbler_stat_old=tumbler_stat;
;;;127    				
;;;128    				}
;;;129    			 //else if(modbus_rx_arg0==0)
;;;130    			 	{
;;;131    				//modbus_plazma++;		
;;;132    				if((modbus_cmnd==61)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;133    					{
;;;134    					if(I_ug<1000)I_ug++;
;;;135    					else I_ug=((I_ug/10)+1)*10;
;;;136    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
000994  f8dfb3ec          LDR      r11,|L1.3460|
000998  7800              LDRB     r0,[r0,#0]            ;99  ; modbus_an_buffer
00099a  80e8              STRH     r0,[r5,#6]            ;99
00099c  4dfa              LDR      r5,|L1.3464|
;;;137    					I_ug_block_cnt=10;
;;;138    					//lc640_write_int(EE_I_UG,I_ug);
;;;139    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;140    					}
;;;141    				
;;;142    				else if((modbus_cmnd==62)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;143    					{
;;;144    					if(I_ug<1000)I_ug--;
;;;145    					else I_ug=((I_ug/10)-1)*10;
;;;146    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;147    					I_ug_block_cnt=10;
;;;148    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;149    					}
;;;150    				else if((modbus_cmnd==63)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;151    					{
;;;152    					if(I_ug<1000)I_ug=((I_ug/10)+1)*10;
;;;153    					else I_ug=((I_ug/10)+5)*10;
;;;154    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;155    					I_ug_block_cnt=10;
;;;156    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;157    					}
;;;158    				
;;;159    				else if((modbus_cmnd==64)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;160    					{
;;;161    					if(I_ug<1000)I_ug=((I_ug/10)-1)*10;
;;;162    					else I_ug=((I_ug/10)-5)*10;
;;;163    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;164    					I_ug_block_cnt=10;
;;;165    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;166    					}
;;;167    				
;;;168    				else if((modbus_cmnd==71)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;169    					{
;;;170    					U_up++;
;;;171    					gran(&U_up,U_MIN,U_MAX);
;;;172    					U_up_block_cnt=10;
;;;173    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;174    					}
;;;175    				
;;;176    				else if((modbus_cmnd==72)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;177    					{
;;;178    					U_up--;
;;;179    					gran(&U_up,U_MIN,U_MAX);
;;;180    					U_up_block_cnt=10;
;;;181    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;182    				
;;;183    					}
;;;184    				else if((modbus_cmnd==73)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;185    					{
;;;186    					U_up=((U_up/10)+1)*10;
;;;187    					gran(&U_up,U_MIN,U_MAX);
;;;188    					U_up_block_cnt=10;
;;;189    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;190    					}
;;;191    				
;;;192    				else if((modbus_cmnd==74)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;193    					{
;;;194    					U_up=((U_up/10)-1)*10;
;;;195    					gran(&U_up,U_MIN,U_MAX);
;;;196    					U_up_block_cnt=10;
;;;197    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;198    					}
;;;199    				
;;;200    				
;;;201    				else if((modbus_cmnd==51)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ+
;;;202    					{
;;;203    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;204    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;205    						{
;;;206    						if(TIME_VISION_PULT)
;;;207    							{
;;;208    							T_PROC_GS=(((T_PROC_GS/60L)+1L)*60L);
00099e  f04f093c          MOV      r9,#0x3c
0009a2  28c8              CMP      r0,#0xc8              ;100
0009a4  d104              BNE      |L1.2480|
0009a6  9800              LDR      r0,[sp,#0]            ;102
0009a8  2804              CMP      r0,#4                 ;102
0009aa  d002              BEQ      |L1.2482|
0009ac  2806              CMP      r0,#6                 ;106
0009ae  d004              BEQ      |L1.2490|
                  |L1.2480|
0009b0  e24d              B        |L1.3662|
                  |L1.2482|
0009b2  2007              MOVS     r0,#7                 ;104
0009b4  f7fffffe          BL       modbus_for_pult_registers_transmit
0009b8  e249              B        |L1.3662|
                  |L1.2490|
0009ba  2007              MOVS     r0,#7                 ;110
0009bc  f7fffffe          BL       modbus_for_pult_registers_transmit
0009c0  f8dfa3c8          LDR      r10,|L1.3468|
0009c4  4ef2              LDR      r6,|L1.3472|
0009c6  0be0              LSRS     r0,r4,#15             ;111
0009c8  f88a0000          STRB     r0,[r10,#0]           ;111
0009cc  7831              LDRB     r1,[r6,#0]            ;112  ; tumbler_stat_old
0009ce  4288              CMP      r0,r1                 ;112
0009d0  d00e              BEQ      |L1.2544|
0009d2  2801              CMP      r0,#1                 ;114
0009d4  d03c              BEQ      |L1.2640|
0009d6  2100              MOVS     r1,#0                 ;118
                  |L1.2520|
0009d8  20ea              MOVS     r0,#0xea              ;118
0009da  f7fffffe          BL       lc640_write_int
0009de  48ed              LDR      r0,|L1.3476|
0009e0  f9b00000          LDRSH    r0,[r0,#0]            ;120  ; main_cnt
0009e4  2803              CMP      r0,#3                 ;120
0009e6  dd03              BLE      |L1.2544|
0009e8  2000              MOVS     r0,#0                 ;122
0009ea  7028              STRB     r0,[r5,#0]            ;122
0009ec  f7fffffe          BL       restart_off
                  |L1.2544|
0009f0  f89ac000          LDRB     r12,[r10,#0]          ;126  ; tumbler_stat
0009f4  f886c000          STRB     r12,[r6,#0]           ;126
0009f8  4640              MOV      r0,r8                 ;132
0009fa  f8983005          LDRB     r3,[r8,#5]            ;132  ; modbus_cmnd
0009fe  f8df8398          LDR      r8,|L1.3480|
000a02  260a              MOVS     r6,#0xa               ;135
000a04  46d6              MOV      lr,r10                ;126
000a06  f44f717a          MOV      r1,#0x3e8             ;134
000a0a  2b3d              CMP      r3,#0x3d              ;132
000a0c  d022              BEQ      |L1.2644|
000a0e  2b3e              CMP      r3,#0x3e              ;142
000a10  d039              BEQ      |L1.2694|
000a12  2b3f              CMP      r3,#0x3f              ;150
000a14  d04b              BEQ      |L1.2734|
000a16  2b40              CMP      r3,#0x40              ;159
000a18  d057              BEQ      |L1.2762|
000a1a  f8df8380          LDR      r8,|L1.3484|
000a1e  2b47              CMP      r3,#0x47              ;168
000a20  d067              BEQ      |L1.2802|
000a22  2b48              CMP      r3,#0x48              ;176
000a24  d06e              BEQ      |L1.2820|
000a26  2b49              CMP      r3,#0x49              ;184
000a28  d07c              BEQ      |L1.2852|
000a2a  2b4a              CMP      r3,#0x4a              ;192
000a2c  d074              BEQ      |L1.2840|
000a2e  49dc              LDR      r1,|L1.3488|
;;;209    							T_PROC_GS_block_cnt=10;
000a30  4adc              LDR      r2,|L1.3492|
;;;210    							}
;;;211    						else
;;;212    							{
;;;213    							T_PROC_GS++;
;;;214    							T_PROC_GS_block_cnt=10;
;;;215    							}
;;;216    				
;;;217    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;218    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;219    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;220    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;221    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;222    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;223    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;224    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;225    							}												//(T_PROC_GS_MODE=0)
;;;226    					
;;;227    						else if(T_PROC_GS<30)
;;;228    							{
;;;229    							T_PROC_GS=29;
;;;230    							if(T_PROC_GS_MODE!=1)
;;;231    								{
;;;232    								T_PROC_GS_MODE=1;
;;;233    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;234    								}
;;;235    							}
;;;236    						else 
;;;237    							{
;;;238    							if(T_PROC_GS_MODE!=0)
;;;239    								{
;;;240    								T_PROC_GS_MODE=0;
;;;241    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;242    								}
;;;243    							}			
;;;244    						}
;;;245    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;246    						{
;;;247    						if(TIME_VISION_PULT)
;;;248    							{
;;;249    							T_PROC_PS=(((T_PROC_PS/60L)+1L)*60L);
;;;250    							T_PROC_PS_block_cnt=10;
000a32  f8dfa374          LDR      r10,|L1.3496|
000a36  f8df8374          LDR      r8,|L1.3500|
000a3a  2b33              CMP      r3,#0x33              ;201
000a3c  d06d              BEQ      |L1.2842|
;;;251    							}
;;;252    						else
;;;253    							{
;;;254    							T_PROC_PS++;
;;;255    							T_PROC_PS_block_cnt=10;
;;;256    							}
;;;257    				
;;;258    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;259    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;260    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;261    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;262    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;263    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;264    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;265    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;266    							}												//(T_PROC_PS_MODE=0)
;;;267    					
;;;268    						else if(T_PROC_PS<30)
;;;269    							{
;;;270    							T_PROC_PS=29;
;;;271    							if(T_PROC_PS_MODE!=1)
;;;272    								{
;;;273    								T_PROC_PS_MODE=1;
;;;274    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;275    								}
;;;276    							}
;;;277    						else 
;;;278    							{
;;;279    							if(T_PROC_PS_MODE!=0)
;;;280    								{
;;;281    								T_PROC_PS_MODE=0;
;;;282    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;283    								}
;;;284    							}			
;;;285    						}
;;;286    					}
;;;287    				else if((modbus_cmnd==53)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ++
000a3e  2b35              CMP      r3,#0x35
000a40  d06c              BEQ      |L1.2844|
;;;288    					{
;;;289    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;290    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;291    						{
;;;292    						if(TIME_VISION_PULT)
;;;293    							{
;;;294    							T_PROC_GS=(((T_PROC_GS/600L)+1L)*600L);
;;;295    							T_PROC_GS_block_cnt=10;
;;;296    							}
;;;297    						else
;;;298    							{
;;;299    							T_PROC_GS=(((T_PROC_GS/10L)+1L)*10L);
;;;300    							T_PROC_GS_block_cnt=10;
;;;301    							}
;;;302    				
;;;303    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;304    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;305    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;306    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;307    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;308    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;309    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;310    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;311    							}												//(T_PROC_GS_MODE=0)
;;;312    					
;;;313    						else if(T_PROC_GS<30)
;;;314    							{
;;;315    							T_PROC_GS=29;
;;;316    							if(T_PROC_GS_MODE!=1)
;;;317    								{
;;;318    								T_PROC_GS_MODE=1;
;;;319    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;320    								}
;;;321    							}
;;;322    						else 
;;;323    							{
;;;324    							if(T_PROC_GS_MODE!=0)
;;;325    								{
;;;326    								T_PROC_GS_MODE=0;
;;;327    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;328    								}
;;;329    							}			
;;;330    						}
;;;331    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;332    						{
;;;333    						if(TIME_VISION_PULT)
;;;334    							{
;;;335    							T_PROC_PS=(((T_PROC_PS/600L)+1L)*600L);
;;;336    							T_PROC_PS_block_cnt=10;
;;;337    							}
;;;338    						else
;;;339    							{
;;;340    							T_PROC_PS=(((T_PROC_PS/10L)+1L)*10L);
;;;341    							T_PROC_PS_block_cnt=10;
;;;342    							}
;;;343    				
;;;344    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;345    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;346    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;347    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;348    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;349    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;350    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;351    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;352    							}												//(T_PROC_PS_MODE=0)
;;;353    					
;;;354    						else if(T_PROC_PS<30)
;;;355    							{
;;;356    							T_PROC_PS=29;
;;;357    							if(T_PROC_PS_MODE!=1)
;;;358    								{
;;;359    								T_PROC_PS_MODE=1;
;;;360    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;361    								}
;;;362    							}
;;;363    						else 
;;;364    							{
;;;365    							if(T_PROC_PS_MODE!=0)
;;;366    								{
;;;367    								T_PROC_PS_MODE=0;
;;;368    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;369    								}
;;;370    							}				
;;;371    						}
;;;372    					}
;;;373    				
;;;374    				else if((modbus_cmnd==52)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ-
000a42  2b34              CMP      r3,#0x34
000a44  d06b              BEQ      |L1.2846|
;;;375    					{
;;;376    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;377    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;378    						{
;;;379    						if(TIME_VISION_PULT)
;;;380    							{
;;;381    							T_PROC_GS=(((T_PROC_GS/60L)-1L)*60L);
;;;382    							T_PROC_GS_block_cnt=10;
;;;383    							}
;;;384    						else
;;;385    							{
;;;386    							T_PROC_GS--;
;;;387    							T_PROC_GS_block_cnt=10;
;;;388    							}
;;;389    				
;;;390    							
;;;391    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;392    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;393    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;394    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;395    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;396    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;397    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;398    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;399    							}												//(T_PROC_GS_MODE=0)
;;;400    					
;;;401    						else if(T_PROC_GS<30)
;;;402    							{
;;;403    							T_PROC_GS=29;
;;;404    							if(T_PROC_GS_MODE!=1)
;;;405    								{
;;;406    								T_PROC_GS_MODE=1;
;;;407    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;408    								}
;;;409    							}
;;;410    						else 
;;;411    							{
;;;412    							if(T_PROC_GS_MODE!=0)
;;;413    								{
;;;414    								T_PROC_GS_MODE=0;
;;;415    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;416    								}
;;;417    							}
;;;418    							
;;;419    						}
;;;420    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;421    						{
;;;422    						if(TIME_VISION_PULT)
;;;423    							{
;;;424    							T_PROC_PS=(((T_PROC_PS/60L)-1L)*60L);
;;;425    							T_PROC_PS_block_cnt=10;
;;;426    							}
;;;427    						else
;;;428    							{
;;;429    							T_PROC_PS--;
;;;430    							T_PROC_PS_block_cnt=10;
;;;431    							}
;;;432    				
;;;433    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;434    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;435    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;436    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;437    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;438    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;439    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;440    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;441    							}												//(T_PROC_PS_MODE=0)
;;;442    					
;;;443    						else if(T_PROC_PS<30)
;;;444    							{
;;;445    							T_PROC_PS=29;
;;;446    							if(T_PROC_PS_MODE!=1)
;;;447    								{
;;;448    								T_PROC_PS_MODE=1;
;;;449    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;450    								}
;;;451    							}
;;;452    						else 
;;;453    							{
;;;454    							if(T_PROC_PS_MODE!=0)
;;;455    								{
;;;456    								T_PROC_PS_MODE=0;
;;;457    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;458    								}
;;;459    							}			
;;;460    						}
;;;461    					}
;;;462    				else if((modbus_cmnd==54)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ--
000a46  2b36              CMP      r3,#0x36
000a48  d06a              BEQ      |L1.2848|
;;;463    					{
;;;464    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;465    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;466    						{
;;;467    						if(TIME_VISION_PULT)
;;;468    							{
;;;469    							T_PROC_GS=(((T_PROC_GS/600L)-1L)*600L);
;;;470    							T_PROC_GS_block_cnt=10;
;;;471    							}
;;;472    						else
;;;473    							{
;;;474    							T_PROC_GS=(((T_PROC_GS/10L)-1L)*10L);
;;;475    							T_PROC_GS_block_cnt=10;
;;;476    							}
;;;477    				
;;;478    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;479    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;480    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;481    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;482    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;483    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;484    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;485    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;486    							}												//(T_PROC_GS_MODE=0)
;;;487    					
;;;488    						else if(T_PROC_GS<30)
;;;489    							{
;;;490    							T_PROC_GS=29;
;;;491    							if(T_PROC_GS_MODE!=1)
;;;492    								{
;;;493    								T_PROC_GS_MODE=1;
;;;494    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;495    								}
;;;496    							}
;;;497    						else 
;;;498    							{
;;;499    							if(T_PROC_GS_MODE!=0)
;;;500    								{
;;;501    								T_PROC_GS_MODE=0;
;;;502    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;503    								}
;;;504    							}
;;;505    										
;;;506    						}
;;;507    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;508    						{
;;;509    						if(TIME_VISION_PULT)
;;;510    							{
;;;511    							T_PROC_PS=(((T_PROC_PS/600L)-1L)*600L);
;;;512    							T_PROC_PS_block_cnt=10;
;;;513    							}
;;;514    						else
;;;515    							{
;;;516    							T_PROC_PS=(((T_PROC_PS/10L)-1L)*10L);
;;;517    							T_PROC_PS_block_cnt=10;
;;;518    							}
;;;519    				
;;;520    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;521    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;522    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;523    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;524    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;525    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;526    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;527    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;528    							}												//(T_PROC_PS_MODE=0)
;;;529    					
;;;530    						else if(T_PROC_PS<30)
;;;531    							{
;;;532    							T_PROC_PS=29;
;;;533    							if(T_PROC_PS_MODE!=1)
;;;534    								{
;;;535    								T_PROC_PS_MODE=1;
;;;536    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;537    								}
;;;538    							}
;;;539    						else 
;;;540    							{
;;;541    							if(T_PROC_PS_MODE!=0)
;;;542    								{
;;;543    								T_PROC_PS_MODE=0;
;;;544    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;545    								}
;;;546    							}	
;;;547    						}
;;;548    					}
;;;549    				
;;;550    				
;;;551    			//	else if((modbus_rx_arg1>>8)==90)
;;;552    			else if((modbus_cmnd==1)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
000a4a  2b01              CMP      r3,#1
000a4c  d069              BEQ      |L1.2850|
                  |L1.2638|
000a4e  e1fe              B        |L1.3662|
                  |L1.2640|
000a50  2101              MOVS     r1,#1                 ;116
000a52  e7c1              B        |L1.2520|
                  |L1.2644|
000a54  4682              MOV      r10,r0                ;132
000a56  7902              LDRB     r2,[r0,#4]            ;132  ; modbus_cmnd_cnt
000a58  7800              LDRB     r0,[r0,#0]            ;132  ; modbus_self_cmnd_cnt
000a5a  4282              CMP      r2,r0                 ;132
                  |L1.2652|
000a5c  d0a8              BEQ      |L1.2480|
000a5e  48d4              LDR      r0,|L1.3504|
000a60  f9b02000          LDRSH    r2,[r0,#0]            ;134  ; I_ug
000a64  428a              CMP      r2,r1                 ;134
000a66  da03              BGE      |L1.2672|
000a68  1c52              ADDS     r2,r2,#1              ;134
000a6a  8002              STRH     r2,[r0,#0]            ;134
000a6c  e004              B        |L1.2680|
                  |L1.2670|
000a6e  e267              B        |L1.3904|
                  |L1.2672|
000a70  fb92f1f6          SDIV     r1,r2,r6              ;135
000a74  1c49              ADDS     r1,r1,#1              ;135
000a76  e037              B        |L1.2792|
                  |L1.2680|
000a78  48ce              LDR      r0,|L1.3508|
000a7a  f9bb2000          LDRSH    r2,[r11,#0]           ;136  ; I_MAX_IPS
000a7e  f9b01000          LDRSH    r1,[r0,#0]            ;136  ; I_MIN_IPS
000a82  48cb              LDR      r0,|L1.3504|
000a84  e070              B        |L1.2920|
                  |L1.2694|
000a86  4682              MOV      r10,r0                ;142
000a88  7902              LDRB     r2,[r0,#4]            ;142  ; modbus_cmnd_cnt
000a8a  7800              LDRB     r0,[r0,#0]            ;142  ; modbus_self_cmnd_cnt
000a8c  4282              CMP      r2,r0                 ;142
000a8e  d08f              BEQ      |L1.2480|
000a90  4ac7              LDR      r2,|L1.3504|
000a92  f9b20000          LDRSH    r0,[r2,#0]            ;144  ; I_ug
000a96  4288              CMP      r0,r1                 ;144
000a98  da01              BGE      |L1.2718|
000a9a  1e40              SUBS     r0,r0,#1              ;144
000a9c  e005              B        |L1.2730|
                  |L1.2718|
000a9e  fb90f0f6          SDIV     r0,r0,r6              ;145
000aa2  1e40              SUBS     r0,r0,#1              ;145
000aa4  eb000080          ADD      r0,r0,r0,LSL #2       ;145
000aa8  0040              LSLS     r0,r0,#1              ;145
                  |L1.2730|
000aaa  8010              STRH     r0,[r2,#0]            ;145
000aac  e7e4              B        |L1.2680|
                  |L1.2734|
000aae  4682              MOV      r10,r0                ;150
000ab0  7902              LDRB     r2,[r0,#4]            ;150  ; modbus_cmnd_cnt
000ab2  7800              LDRB     r0,[r0,#0]            ;150  ; modbus_self_cmnd_cnt
000ab4  4282              CMP      r2,r0                 ;150
000ab6  d0ca              BEQ      |L1.2638|
000ab8  48bd              LDR      r0,|L1.3504|
000aba  f9b02000          LDRSH    r2,[r0,#0]            ;152  ; I_ug
000abe  428a              CMP      r2,r1                 ;152
000ac0  dbd6              BLT      |L1.2672|
000ac2  fb92f1f6          SDIV     r1,r2,r6              ;153
000ac6  1d49              ADDS     r1,r1,#5              ;153
000ac8  e00e              B        |L1.2792|
                  |L1.2762|
000aca  4682              MOV      r10,r0                ;159
000acc  7902              LDRB     r2,[r0,#4]            ;159  ; modbus_cmnd_cnt
000ace  7800              LDRB     r0,[r0,#0]            ;159  ; modbus_self_cmnd_cnt
000ad0  4282              CMP      r2,r0                 ;159
000ad2  d0bc              BEQ      |L1.2638|
000ad4  48b6              LDR      r0,|L1.3504|
000ad6  f9b02000          LDRSH    r2,[r0,#0]            ;161  ; I_ug
000ada  428a              CMP      r2,r1                 ;161
000adc  fb92f1f6          SDIV     r1,r2,r6              ;162
000ae0  da01              BGE      |L1.2790|
000ae2  1e49              SUBS     r1,r1,#1              ;161
000ae4  e000              B        |L1.2792|
                  |L1.2790|
000ae6  1f49              SUBS     r1,r1,#5              ;162
                  |L1.2792|
000ae8  eb010181          ADD      r1,r1,r1,LSL #2       ;162
000aec  0049              LSLS     r1,r1,#1              ;162
000aee  8001              STRH     r1,[r0,#0]            ;162
000af0  e7c2              B        |L1.2680|
                  |L1.2802|
000af2  4682              MOV      r10,r0                ;168
000af4  7901              LDRB     r1,[r0,#4]            ;168  ; modbus_cmnd_cnt
000af6  7800              LDRB     r0,[r0,#0]            ;168  ; modbus_self_cmnd_cnt
000af8  4281              CMP      r1,r0                 ;168
000afa  d0a8              BEQ      |L1.2638|
000afc  48ae              LDR      r0,|L1.3512|
000afe  8801              LDRH     r1,[r0,#0]            ;170  ; U_up
000b00  1c49              ADDS     r1,r1,#1              ;170
000b02  e029              B        |L1.2904|
                  |L1.2820|
000b04  4682              MOV      r10,r0                ;176
000b06  7901              LDRB     r1,[r0,#4]            ;176  ; modbus_cmnd_cnt
000b08  7800              LDRB     r0,[r0,#0]            ;176  ; modbus_self_cmnd_cnt
000b0a  4281              CMP      r1,r0                 ;176
000b0c  d09f              BEQ      |L1.2638|
000b0e  48aa              LDR      r0,|L1.3512|
000b10  8801              LDRH     r1,[r0,#0]            ;178  ; U_up
000b12  1e49              SUBS     r1,r1,#1              ;178
000b14  e020              B        |L1.2904|
000b16  e005              B        |L1.2852|
                  |L1.2840|
000b18  e010              B        |L1.2876|
                  |L1.2842|
000b1a  e02e              B        |L1.2938|
                  |L1.2844|
000b1c  e078              B        |L1.3088|
                  |L1.2846|
000b1e  e0ab              B        |L1.3192|
                  |L1.2848|
000b20  e0d8              B        |L1.3284|
                  |L1.2850|
000b22  e15e              B        |L1.3554|
                  |L1.2852|
000b24  4682              MOV      r10,r0                ;184
000b26  7901              LDRB     r1,[r0,#4]            ;184  ; modbus_cmnd_cnt
000b28  7800              LDRB     r0,[r0,#0]            ;184  ; modbus_self_cmnd_cnt
000b2a  4281              CMP      r1,r0                 ;184
000b2c  d08f              BEQ      |L1.2638|
000b2e  48a2              LDR      r0,|L1.3512|
000b30  f9b01000          LDRSH    r1,[r0,#0]            ;186  ; U_up
000b34  fb91f1f6          SDIV     r1,r1,r6              ;186
000b38  1c49              ADDS     r1,r1,#1              ;186
000b3a  e00a              B        |L1.2898|
                  |L1.2876|
000b3c  4682              MOV      r10,r0                ;192
000b3e  7901              LDRB     r1,[r0,#4]            ;192  ; modbus_cmnd_cnt
000b40  7800              LDRB     r0,[r0,#0]            ;192  ; modbus_self_cmnd_cnt
000b42  4281              CMP      r1,r0                 ;192
000b44  d08a              BEQ      |L1.2652|
000b46  489c              LDR      r0,|L1.3512|
000b48  f9b01000          LDRSH    r1,[r0,#0]            ;194  ; U_up
000b4c  fb91f1f6          SDIV     r1,r1,r6              ;194
000b50  1e49              SUBS     r1,r1,#1              ;194
                  |L1.2898|
000b52  eb010181          ADD      r1,r1,r1,LSL #2       ;194
000b56  0049              LSLS     r1,r1,#1              ;194
                  |L1.2904|
000b58  8001              STRH     r1,[r0,#0]            ;194
000b5a  4898              LDR      r0,|L1.3516|
000b5c  f9b02000          LDRSH    r2,[r0,#0]            ;195  ; U_MAX
000b60  4897              LDR      r0,|L1.3520|
000b62  f9b01000          LDRSH    r1,[r0,#0]            ;195  ; U_MIN
000b66  4894              LDR      r0,|L1.3512|
                  |L1.2920|
000b68  f7fffffe          BL       gran
000b6c  f8a86000          STRH     r6,[r8,#0]            ;196
000b70  f89a1004          LDRB     r1,[r10,#4]           ;197  ; modbus_cmnd_cnt
000b74  f88a1000          STRB     r1,[r10,#0]           ;197
                  |L1.2936|
000b78  e169              B        |L1.3662|
                  |L1.2938|
000b7a  7903              LDRB     r3,[r0,#4]            ;201  ; modbus_cmnd_cnt
000b7c  f890c000          LDRB     r12,[r0,#0]           ;201  ; modbus_self_cmnd_cnt
000b80  4563              CMP      r3,r12                ;201
000b82  d0f9              BEQ      |L1.2936|
000b84  7003              STRB     r3,[r0,#0]            ;203
000b86  f8980000          LDRB     r0,[r8,#0]            ;204  ; main_menu_mode
000b8a  782b              LDRB     r3,[r5,#0]            ;204  ; work_stat
000b8c  ea500c03          ORRS     r12,r0,r3             ;204
000b90  d002              BEQ      |L1.2968|
000b92  2801              CMP      r0,#1                 ;245
000b94  d01c              BEQ      |L1.3024|
000b96  e15a              B        |L1.3662|
                  |L1.2968|
000b98  8808              LDRH     r0,[r1,#0]            ;206  ; TIME_VISION_PULT
000b9a  2800              CMP      r0,#0                 ;206
000b9c  4889              LDR      r0,|L1.3524|
000b9e  d004              BEQ      |L1.2986|
000ba0  6803              LDR      r3,[r0,#0]            ;208  ; T_PROC_GS
000ba2  fb93f1f9          SDIV     r1,r3,r9              ;208
000ba6  1c49              ADDS     r1,r1,#1              ;208
000ba8  e07d              B        |L1.3238|
                  |L1.2986|
000baa  6801              LDR      r1,[r0,#0]            ;213  ; T_PROC_GS
000bac  1c49              ADDS     r1,r1,#1              ;213
                  |L1.2990|
000bae  6001              STR      r1,[r0,#0]            ;213  ; T_PROC_GS
000bb0  e0ac              B        |L1.3340|
                  |L1.2994|
000bb2  6001              STR      r1,[r0,#0]            ;230  ; T_PROC_GS
000bb4  4884              LDR      r0,|L1.3528|
000bb6  8801              LDRH     r1,[r0,#0]            ;230  ; T_PROC_GS_MODE
000bb8  2901              CMP      r1,#1                 ;230
000bba  d0dd              BEQ      |L1.2936|
000bbc  2101              MOVS     r1,#1                 ;483
000bbe  e004              B        |L1.3018|
                  |L1.3008|
000bc0  4881              LDR      r0,|L1.3528|
000bc2  8801              LDRH     r1,[r0,#0]            ;238  ; T_PROC_GS_MODE
000bc4  2900              CMP      r1,#0                 ;238
000bc6  d0d7              BEQ      |L1.2936|
000bc8  2100              MOVS     r1,#0                 ;501
                  |L1.3018|
000bca  8001              STRH     r1,[r0,#0]            ;222
000bcc  20ee              MOVS     r0,#0xee              ;223
000bce  e01c              B        |L1.3082|
                  |L1.3024|
000bd0  2b00              CMP      r3,#0                 ;245
000bd2  d1d1              BNE      |L1.2936|
000bd4  8808              LDRH     r0,[r1,#0]            ;247  ; TIME_VISION_PULT
000bd6  2800              CMP      r0,#0                 ;247
000bd8  487c              LDR      r0,|L1.3532|
000bda  d004              BEQ      |L1.3046|
000bdc  6802              LDR      r2,[r0,#0]            ;249  ; T_PROC_PS
000bde  fb92f1f9          SDIV     r1,r2,r9              ;249
000be2  1c49              ADDS     r1,r1,#1              ;249
000be4  e06f              B        |L1.3270|
                  |L1.3046|
000be6  6801              LDR      r1,[r0,#0]            ;254  ; T_PROC_PS
000be8  1c49              ADDS     r1,r1,#1              ;254
                  |L1.3050|
000bea  6001              STR      r1,[r0,#0]            ;254  ; T_PROC_PS
000bec  e0b4              B        |L1.3416|
                  |L1.3054|
000bee  6001              STR      r1,[r0,#0]            ;271  ; T_PROC_PS
000bf0  4877              LDR      r0,|L1.3536|
000bf2  8801              LDRH     r1,[r0,#0]            ;271  ; T_PROC_PS_MODE
000bf4  2901              CMP      r1,#1                 ;271
000bf6  d00a              BEQ      |L1.3086|
000bf8  2101              MOVS     r1,#1                 ;525
000bfa  e004              B        |L1.3078|
                  |L1.3068|
000bfc  4874              LDR      r0,|L1.3536|
000bfe  8801              LDRH     r1,[r0,#0]            ;279  ; T_PROC_PS_MODE
000c00  2900              CMP      r1,#0                 ;279
000c02  d004              BEQ      |L1.3086|
000c04  2100              MOVS     r1,#0                 ;543
                  |L1.3078|
000c06  8001              STRH     r1,[r0,#0]            ;281
000c08  20f0              MOVS     r0,#0xf0              ;282
                  |L1.3082|
000c0a  f7fffffe          BL       lc640_write_int
                  |L1.3086|
000c0e  e11e              B        |L1.3662|
                  |L1.3088|
000c10  7903              LDRB     r3,[r0,#4]            ;287  ; modbus_cmnd_cnt
000c12  f890c000          LDRB     r12,[r0,#0]           ;287  ; modbus_self_cmnd_cnt
000c16  4563              CMP      r3,r12                ;287
000c18  d008              BEQ      |L1.3116|
000c1a  7003              STRB     r3,[r0,#0]            ;289
000c1c  f8980000          LDRB     r0,[r8,#0]            ;290  ; main_menu_mode
000c20  782b              LDRB     r3,[r5,#0]            ;290  ; work_stat
000c22  ea500c03          ORRS     r12,r0,r3             ;290
000c26  d002              BEQ      |L1.3118|
000c28  2801              CMP      r0,#1                 ;331
000c2a  d010              BEQ      |L1.3150|
                  |L1.3116|
000c2c  e10f              B        |L1.3662|
                  |L1.3118|
000c2e  8808              LDRH     r0,[r1,#0]            ;292  ; TIME_VISION_PULT
000c30  b138              CBZ      r0,|L1.3138|
000c32  4964              LDR      r1,|L1.3524|
000c34  f44f7016          MOV      r0,#0x258             ;294
000c38  680b              LDR      r3,[r1,#0]            ;294  ; T_PROC_GS
000c3a  fb93f0f0          SDIV     r0,r3,r0              ;294
000c3e  1c40              ADDS     r0,r0,#1              ;294
000c40  e060              B        |L1.3332|
                  |L1.3138|
000c42  4860              LDR      r0,|L1.3524|
000c44  6801              LDR      r1,[r0,#0]            ;299  ; T_PROC_GS
000c46  fb91f1f6          SDIV     r1,r1,r6              ;299
000c4a  1c49              ADDS     r1,r1,#1              ;299
000c4c  e06d              B        |L1.3370|
                  |L1.3150|
000c4e  2b00              CMP      r3,#0                 ;331
000c50  d120              BNE      |L1.3220|
000c52  8808              LDRH     r0,[r1,#0]            ;333  ; TIME_VISION_PULT
000c54  2800              CMP      r0,#0                 ;333
000c56  485d              LDR      r0,|L1.3532|
000c58  d009              BEQ      |L1.3182|
000c5a  6802              LDR      r2,[r0,#0]            ;335  ; T_PROC_PS
000c5c  f44f7116          MOV      r1,#0x258             ;335
000c60  fb92f1f1          SDIV     r1,r2,r1              ;335
000c64  1c49              ADDS     r1,r1,#1              ;335
000c66  f44f7216          MOV      r2,#0x258             ;335
000c6a  4351              MULS     r1,r2,r1              ;335
000c6c  e7bd              B        |L1.3050|
                  |L1.3182|
000c6e  6801              LDR      r1,[r0,#0]            ;340  ; T_PROC_PS
000c70  fb91f1f6          SDIV     r1,r1,r6              ;340
000c74  1c49              ADDS     r1,r1,#1              ;340
000c76  e07e              B        |L1.3446|
                  |L1.3192|
000c78  7903              LDRB     r3,[r0,#4]            ;374  ; modbus_cmnd_cnt
000c7a  f890c000          LDRB     r12,[r0,#0]           ;374  ; modbus_self_cmnd_cnt
000c7e  4563              CMP      r3,r12                ;374
000c80  d008              BEQ      |L1.3220|
000c82  7003              STRB     r3,[r0,#0]            ;376
000c84  f8980000          LDRB     r0,[r8,#0]            ;377  ; main_menu_mode
000c88  782b              LDRB     r3,[r5,#0]            ;377  ; work_stat
000c8a  ea500c03          ORRS     r12,r0,r3             ;377
000c8e  d002              BEQ      |L1.3222|
000c90  2801              CMP      r0,#1                 ;420
000c92  d00f              BEQ      |L1.3252|
                  |L1.3220|
000c94  e0db              B        |L1.3662|
                  |L1.3222|
000c96  8808              LDRH     r0,[r1,#0]            ;379  ; TIME_VISION_PULT
000c98  2800              CMP      r0,#0                 ;379
000c9a  484a              LDR      r0,|L1.3524|
000c9c  d007              BEQ      |L1.3246|
000c9e  6803              LDR      r3,[r0,#0]            ;381  ; T_PROC_GS
000ca0  fb93f1f9          SDIV     r1,r3,r9              ;381
000ca4  1e49              SUBS     r1,r1,#1              ;381
                  |L1.3238|
000ca6  ebc11101          RSB      r1,r1,r1,LSL #4       ;381
000caa  0089              LSLS     r1,r1,#2              ;381
000cac  e77f              B        |L1.2990|
                  |L1.3246|
000cae  6801              LDR      r1,[r0,#0]            ;386  ; T_PROC_GS
000cb0  1e49              SUBS     r1,r1,#1              ;386
000cb2  e77c              B        |L1.2990|
                  |L1.3252|
000cb4  bb9b              CBNZ     r3,|L1.3358|
000cb6  8808              LDRH     r0,[r1,#0]            ;422  ; TIME_VISION_PULT
000cb8  2800              CMP      r0,#0                 ;422
000cba  4844              LDR      r0,|L1.3532|
000cbc  d007              BEQ      |L1.3278|
000cbe  6802              LDR      r2,[r0,#0]            ;424  ; T_PROC_PS
000cc0  fb92f1f9          SDIV     r1,r2,r9              ;424
000cc4  1e49              SUBS     r1,r1,#1              ;424
                  |L1.3270|
000cc6  ebc11101          RSB      r1,r1,r1,LSL #4       ;424
000cca  0089              LSLS     r1,r1,#2              ;424
000ccc  e78d              B        |L1.3050|
                  |L1.3278|
000cce  6801              LDR      r1,[r0,#0]            ;429  ; T_PROC_PS
000cd0  1e49              SUBS     r1,r1,#1              ;429
000cd2  e78a              B        |L1.3050|
                  |L1.3284|
000cd4  7903              LDRB     r3,[r0,#4]            ;462  ; modbus_cmnd_cnt
000cd6  f890c000          LDRB     r12,[r0,#0]           ;462  ; modbus_self_cmnd_cnt
000cda  4563              CMP      r3,r12                ;462
000cdc  d01f              BEQ      |L1.3358|
000cde  7003              STRB     r3,[r0,#0]            ;464
000ce0  f8980000          LDRB     r0,[r8,#0]            ;465  ; main_menu_mode
000ce4  782b              LDRB     r3,[r5,#0]            ;465  ; work_stat
000ce6  ea500c03          ORRS     r12,r0,r3             ;465
000cea  d002              BEQ      |L1.3314|
000cec  2801              CMP      r0,#1                 ;507
000cee  d025              BEQ      |L1.3388|
000cf0  e0ad              B        |L1.3662|
                  |L1.3314|
000cf2  8808              LDRH     r0,[r1,#0]            ;467  ; TIME_VISION_PULT
000cf4  b1a0              CBZ      r0,|L1.3360|
000cf6  4933              LDR      r1,|L1.3524|
000cf8  f44f7016          MOV      r0,#0x258             ;469
000cfc  680b              LDR      r3,[r1,#0]            ;469  ; T_PROC_GS
000cfe  fb93f0f0          SDIV     r0,r3,r0              ;469
000d02  1e40              SUBS     r0,r0,#1              ;469
                  |L1.3332|
000d04  f44f7316          MOV      r3,#0x258             ;294
000d08  4358              MULS     r0,r3,r0              ;294
000d0a  6008              STR      r0,[r1,#0]            ;294  ; T_PROC_GS
                  |L1.3340|
000d0c  482d              LDR      r0,|L1.3524|
000d0e  4931              LDR      r1,|L1.3540|
000d10  8016              STRH     r6,[r2,#0]            ;475
000d12  6802              LDR      r2,[r0,#0]            ;217  ; T_PROC_GS
000d14  6809              LDR      r1,[r1,#0]            ;217  ; T_PROC_MAX
000d16  428a              CMP      r2,r1                 ;217
000d18  dd0b              BLE      |L1.3378|
000d1a  1c49              ADDS     r1,r1,#1              ;480
000d1c  e749              B        |L1.2994|
                  |L1.3358|
000d1e  e02e              B        |L1.3454|
                  |L1.3360|
000d20  4828              LDR      r0,|L1.3524|
000d22  6801              LDR      r1,[r0,#0]            ;474  ; T_PROC_GS
000d24  fb91f1f6          SDIV     r1,r1,r6              ;474
000d28  1e49              SUBS     r1,r1,#1              ;474
                  |L1.3370|
000d2a  eb010181          ADD      r1,r1,r1,LSL #2       ;474
000d2e  0049              LSLS     r1,r1,#1              ;474
000d30  e73d              B        |L1.2990|
                  |L1.3378|
000d32  2a1e              CMP      r2,#0x1e              ;488
000d34  f6bfaf44          BGE      |L1.3008|
000d38  211d              MOVS     r1,#0x1d              ;490
000d3a  e73a              B        |L1.2994|
                  |L1.3388|
000d3c  b9fb              CBNZ     r3,|L1.3454|
000d3e  8808              LDRH     r0,[r1,#0]            ;509  ; TIME_VISION_PULT
000d40  b1a0              CBZ      r0,|L1.3436|
000d42  4922              LDR      r1,|L1.3532|
000d44  f44f7016          MOV      r0,#0x258             ;511
000d48  680a              LDR      r2,[r1,#0]            ;511  ; T_PROC_PS
000d4a  fb92f0f0          SDIV     r0,r2,r0              ;511
000d4e  1e40              SUBS     r0,r0,#1              ;511
000d50  f44f7216          MOV      r2,#0x258             ;511
000d54  4350              MULS     r0,r2,r0              ;511
000d56  6008              STR      r0,[r1,#0]            ;511  ; T_PROC_PS
                  |L1.3416|
000d58  481c              LDR      r0,|L1.3532|
000d5a  491e              LDR      r1,|L1.3540|
000d5c  f8aa6000          STRH     r6,[r10,#0]           ;517
000d60  6802              LDR      r2,[r0,#0]            ;258  ; T_PROC_PS
000d62  6809              LDR      r1,[r1,#0]            ;258  ; T_PROC_MAX
000d64  428a              CMP      r2,r1                 ;258
000d66  dd37              BLE      |L1.3544|
000d68  1c49              ADDS     r1,r1,#1              ;522
000d6a  e740              B        |L1.3054|
                  |L1.3436|
000d6c  4817              LDR      r0,|L1.3532|
000d6e  6801              LDR      r1,[r0,#0]            ;516  ; T_PROC_PS
000d70  fb91f1f6          SDIV     r1,r1,r6              ;516
000d74  1e49              SUBS     r1,r1,#1              ;516
                  |L1.3446|
000d76  eb010181          ADD      r1,r1,r1,LSL #2       ;516
000d7a  0049              LSLS     r1,r1,#1              ;516
000d7c  e735              B        |L1.3050|
                  |L1.3454|
000d7e  e061              B        |L1.3652|
                  |L1.3456|
                          DCD      ||area_number.5||+0x1e
                  |L1.3460|
                          DCD      I_MAX_IPS
                  |L1.3464|
                          DCD      work_stat
                  |L1.3468|
                          DCD      tumbler_stat
                  |L1.3472|
                          DCD      tumbler_stat_old
                  |L1.3476|
                          DCD      main_cnt
                  |L1.3480|
                          DCD      I_ug_block_cnt
                  |L1.3484|
                          DCD      U_up_block_cnt
                  |L1.3488|
                          DCD      TIME_VISION_PULT
                  |L1.3492|
                          DCD      T_PROC_GS_block_cnt
                  |L1.3496|
                          DCD      T_PROC_PS_block_cnt
                  |L1.3500|
                          DCD      main_menu_mode
                  |L1.3504|
                          DCD      I_ug
                  |L1.3508|
                          DCD      I_MIN_IPS
                  |L1.3512|
                          DCD      U_up
                  |L1.3516|
                          DCD      U_MAX
                  |L1.3520|
                          DCD      U_MIN
                  |L1.3524|
                          DCD      T_PROC_GS
                  |L1.3528|
                          DCD      T_PROC_GS_MODE
                  |L1.3532|
                          DCD      T_PROC_PS
                  |L1.3536|
                          DCD      T_PROC_PS_MODE
                  |L1.3540|
                          DCD      T_PROC_MAX
                  |L1.3544|
000dd8  2a1e              CMP      r2,#0x1e              ;530
000dda  f6bfaf0f          BGE      |L1.3068|
000dde  211d              MOVS     r1,#0x1d              ;532
000de0  e705              B        |L1.3054|
                  |L1.3554|
000de2  7901              LDRB     r1,[r0,#4]  ; modbus_cmnd_cnt
000de4  7802              LDRB     r2,[r0,#0]  ; modbus_self_cmnd_cnt
000de6  4291              CMP      r1,r2
000de8  d031              BEQ      |L1.3662|
;;;553    					{
;;;554    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;555    					if(tumbler_stat==tsI)
;;;556    						{
;;;557    						if(work_stat!=wsGS)
;;;558    							{
;;;559    							work_stat=wsGS;
;;;560    							time_proc=0;
;;;561    							time_proc_remain=T_PROC_GS;
;;;562    							index_set=0;
000dea  4efc              LDR      r6,|L1.4572|
000dec  7001              STRB     r1,[r0,#0]            ;554
000dee  46f0              MOV      r8,lr                 ;555
000df0  f1bc0f00          CMP      r12,#0                ;555
000df4  d113              BNE      |L1.3614|
000df6  7828              LDRB     r0,[r5,#0]            ;557  ; work_stat
000df8  2801              CMP      r0,#1                 ;557
000dfa  d00c              BEQ      |L1.3606|
000dfc  2001              MOVS     r0,#1                 ;559
000dfe  49f8              LDR      r1,|L1.4576|
000e00  7028              STRB     r0,[r5,#0]            ;559
000e02  2000              MOVS     r0,#0                 ;560
000e04  6008              STR      r0,[r1,#0]            ;561  ; time_proc
000e06  49f7              LDR      r1,|L1.4580|
000e08  680a              LDR      r2,[r1,#0]            ;561  ; T_PROC_GS
000e0a  49f7              LDR      r1,|L1.4584|
000e0c  600a              STR      r2,[r1,#0]  ; time_proc_remain
000e0e  7130              STRB     r0,[r6,#4]
;;;563    							restart_on_GS();
000e10  f7fffffe          BL       restart_on_GS
000e14  e003              B        |L1.3614|
                  |L1.3606|
;;;564    							}			
;;;565    						else 
;;;566    							{
;;;567    							work_stat=wsOFF;
000e16  2000              MOVS     r0,#0
000e18  7028              STRB     r0,[r5,#0]
;;;568    							restart_off();
000e1a  f7fffffe          BL       restart_off
                  |L1.3614|
;;;569    							}
;;;570    						}
;;;571    				
;;;572    					if(tumbler_stat==tsU)
000e1e  f8980000          LDRB     r0,[r8,#0]  ; tumbler_stat
000e22  2801              CMP      r0,#1
000e24  d113              BNE      |L1.3662|
;;;573    						{
;;;574    						if(work_stat!=wsPS)
000e26  7828              LDRB     r0,[r5,#0]  ; work_stat
000e28  2802              CMP      r0,#2
000e2a  d00c              BEQ      |L1.3654|
;;;575    							{
;;;576    							work_stat=wsPS;
000e2c  2002              MOVS     r0,#2
;;;577    							time_proc=0;
000e2e  49ec              LDR      r1,|L1.4576|
000e30  7028              STRB     r0,[r5,#0]            ;576
000e32  2000              MOVS     r0,#0
;;;578    							time_proc_remain=T_PROC_PS;
000e34  6008              STR      r0,[r1,#0]  ; time_proc
000e36  49ed              LDR      r1,|L1.4588|
000e38  680a              LDR      r2,[r1,#0]  ; T_PROC_PS
000e3a  49eb              LDR      r1,|L1.4584|
;;;579    							index_set=0;
000e3c  600a              STR      r2,[r1,#0]  ; time_proc_remain
000e3e  7130              STRB     r0,[r6,#4]
;;;580    							restart_on_PS();
000e40  f7fffffe          BL       restart_on_PS
                  |L1.3652|
000e44  e003              B        |L1.3662|
                  |L1.3654|
;;;581    							}			
;;;582    						else
;;;583    							{
;;;584    							work_stat=wsOFF;
000e46  2000              MOVS     r0,#0
000e48  7028              STRB     r0,[r5,#0]
;;;585    							restart_off();
000e4a  f7fffffe          BL       restart_off
                  |L1.3662|
;;;586    							}
;;;587    						}
;;;588    					}
;;;589    				}
;;;590    			}
;;;591    		}
;;;592    
;;;593    	if(modbus_an_buffer[0]==MODBUS_ADRESS)
000e4e  48e8              LDR      r0,|L1.4592|
000e50  7801              LDRB     r1,[r0,#0]  ; modbus_an_buffer
000e52  48e8              LDR      r0,|L1.4596|
000e54  f9b00000          LDRSH    r0,[r0,#0]  ; MODBUS_ADRESS
000e58  4281              CMP      r1,r0
000e5a  d171              BNE      |L1.3904|
;;;594    		{
;;;595    		if(modbus_func==3)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
000e5c  9900              LDR      r1,[sp,#0]
000e5e  2903              CMP      r1,#3
000e60  d04a              BEQ      |L1.3832|
;;;596    			{
;;;597    			if((modbus_rx_arg0>=50)&&(modbus_rx_arg0<80)) modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,modbus_rx_arg1);
;;;598    			}
;;;599    		else if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ	βυξδξβ
000e62  2904              CMP      r1,#4
000e64  d055              BEQ      |L1.3858|
;;;600    			{
;;;601    			modbus_input_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,modbus_rx_arg1);
;;;602    			}
;;;603    
;;;604    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
000e66  2906              CMP      r1,#6
000e68  d16a              BNE      |L1.3904|
;;;605    			{
;;;606    			if(modbus_rx_arg0==50)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000e6a  2f32              CMP      r7,#0x32
000e6c  d059              BEQ      |L1.3874|
;;;607    				{
;;;608    				I_ug=modbus_rx_arg1;
;;;609    				lc640_write_int(EE_I_UG,I_ug);
;;;610    				}
;;;611    			if(modbus_rx_arg0==51)		//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
000e6e  2f33              CMP      r7,#0x33
000e70  d05c              BEQ      |L1.3884|
;;;612    				{
;;;613    				U_up=modbus_rx_arg1;
;;;614    				lc640_write_int(EE_U_UP,U_up);
;;;615    				}
;;;616    			if(modbus_rx_arg0==52)		//μΰκρθμΰολόνξε νΰοπζενθε δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000e72  2f34              CMP      r7,#0x34
000e74  d05f              BEQ      |L1.3894|
;;;617    				{
;;;618    				U_maxg=modbus_rx_arg1;
;;;619    				lc640_write_int(EE_U_MAX_G,U_maxg);
;;;620    				}
;;;621    			if(modbus_rx_arg0==53)		//μΰκρθμΰλόνϋι ςξκ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
000e76  2f35              CMP      r7,#0x35
000e78  d063              BEQ      |L1.3906|
;;;622    				{
;;;623    				I_maxp=modbus_rx_arg1;
;;;624    				lc640_write_int(EE_I_MAX_P,I_maxp);
;;;625    				}								
;;;626    			if(modbus_rx_arg0==54)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.ρεκσνδϋ
;;;627    				{
;;;628    				signed long sec,min,hour;
;;;629    				sec=(signed long)modbus_rx_arg1;
;;;630    				min=(T_PROC_GS/60L)%60L;
;;;631    				hour=T_PROC_GS/3600L;
000e7a  f44f6061          MOV      r0,#0xe10
000e7e  2f36              CMP      r7,#0x36              ;626
000e80  d064              BEQ      |L1.3916|
;;;632    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;633    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;634    				}
;;;635    			if(modbus_rx_arg0==55)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.μθνσςϋ
000e82  2f37              CMP      r7,#0x37
000e84  d076              BEQ      |L1.3956|
;;;636    				{
;;;637    				signed long sec,min,hour;
;;;638    				sec=T_PROC_GS%60L;
;;;639    				min=(signed long)modbus_rx_arg1;
;;;640    				hour=T_PROC_GS/3600L;
;;;641    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;642    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;643    				}
;;;644    			if(modbus_rx_arg0==56)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.χΰρϋ
000e86  2f38              CMP      r7,#0x38
000e88  d075              BEQ      |L1.3958|
;;;645    				{
;;;646    				signed long sec,min,hour;
;;;647    				sec=T_PROC_GS%60L;
;;;648    				min=(T_PROC_GS/60L)%60L;
;;;649    				hour=(signed long)modbus_rx_arg1;
;;;650    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;651    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;652    				}
;;;653    			if(modbus_rx_arg0==57)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.ρεκσνδϋ
000e8a  2f39              CMP      r7,#0x39
000e8c  d074              BEQ      |L1.3960|
;;;654    				{
;;;655    				signed long sec,min,hour;
;;;656    				sec=(signed long)modbus_rx_arg1;
;;;657    				min=(T_PROC_PS/60L)%60L;
;;;658    				hour=T_PROC_PS/3600L;
;;;659    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;660    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;661    				}
;;;662    
;;;663    			if(modbus_rx_arg0==58)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.μθνσςϋ
000e8e  2f3a              CMP      r7,#0x3a
000e90  d073              BEQ      |L1.3962|
;;;664    				{
;;;665    				signed long sec,min,hour;
;;;666    				sec=T_PROC_PS%60L;
;;;667    				min=(signed long)modbus_rx_arg1;
;;;668    				hour=T_PROC_PS/3600L;
;;;669    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;670    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;671    				}
;;;672    
;;;673    			if(modbus_rx_arg0==59)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.χΰρϋ
000e92  2f3b              CMP      r7,#0x3b
000e94  d072              BEQ      |L1.3964|
;;;674    				{
;;;675    				signed long sec,min,hour;
;;;676    				sec=T_PROC_PS%60L;
;;;677    				min=(T_PROC_PS/60L)%60L;
;;;678    				hour=(signed long)modbus_rx_arg1;
;;;679    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;680    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;681    				}
;;;682    
;;;683    			if(modbus_rx_arg0==60)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
000e96  2f3c              CMP      r7,#0x3c
000e98  d071              BEQ      |L1.3966|
;;;684    				{
;;;685    				if(modbus_rx_arg1==1)
;;;686    					{
;;;687    					if(work_stat!=wsPS)
;;;688    						{
;;;689    						work_stat=wsPS;
;;;690    						time_proc=0;
;;;691    						time_proc_remain=T_PROC_PS;
;;;692    						restart_on_PS();
;;;693    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;694    						}
;;;695    					}
;;;696    				if(modbus_rx_arg1==0)
;;;697    					{
;;;698    					if(work_stat==wsPS)
;;;699    						{
;;;700    						work_stat=wsOFF;
;;;701    						restart_off();
;;;702    						}
;;;703    					}
;;;704    				}
;;;705    			if(modbus_rx_arg0==61)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
000e9a  2f3d              CMP      r7,#0x3d
000e9c  d070              BEQ      |L1.3968|
;;;706    				{
;;;707    				if(modbus_rx_arg1==1)
;;;708    					{
;;;709    					if(work_stat!=wsGS)
;;;710    						{
;;;711    						work_stat=wsGS;
;;;712    						time_proc=0;
;;;713    						time_proc_remain=T_PROC_GS;
;;;714    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;715    						}
;;;716    					}
;;;717    				if(modbus_rx_arg1==0)
;;;718    					{
;;;719    					if(work_stat==wsGS)
;;;720    						{
;;;721    						work_stat=wsOFF;
;;;722    						restart_off();
;;;723    						}
;;;724    					}
;;;725    				}
;;;726    
;;;727    			if(modbus_rx_arg0==62)		//οεπεκλώχενθε πελε πεβεπρΰ
000e9e  2f3e              CMP      r7,#0x3e
000ea0  d06f              BEQ      |L1.3970|
;;;728    				{
;;;729    					{
;;;730    					if(work_stat==wsOFF)
;;;731    						{
;;;732    						if(modbus_rx_arg1==0)REV_STAT=rsFF;
;;;733    						if(modbus_rx_arg1==1)REV_STAT=rsREW;
;;;734    						}
;;;735    					}
;;;736    				}
;;;737    			if(modbus_rx_arg0==63)		//βκλώχενθε-βϋκλώχενθε ΰβςξπεβεπρΰ
000ea2  2f3f              CMP      r7,#0x3f
000ea4  d06e              BEQ      |L1.3972|
;;;738    				{
;;;739    					{
;;;740    					if((work_stat==wsOFF)&&(REV_IS_ON))
;;;741    						{
;;;742    						if(modbus_rx_arg1==1)AVT_REV_IS_ON=1;
;;;743    						if(modbus_rx_arg1==0)AVT_REV_IS_ON=0;
;;;744    						lc640_write_int(EE_AVT_REV_IS_ON,AVT_REV_IS_ON);
;;;745    						}
;;;746    					}
;;;747    				}
;;;748    			if(modbus_rx_arg0==64)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ οπμξε, ρεκ
000ea6  2f40              CMP      r7,#0x40
000ea8  d06d              BEQ      |L1.3974|
;;;749    				{
;;;750    				if(work_stat==wsOFF)
;;;751    					{
;;;752    					AVT_REV_TIME_FF=modbus_rx_arg1;
;;;753    					gran(&AVT_REV_TIME_FF,30,T_PROC_MAX);
;;;754    					lc640_write_int(EE_AVT_REV_TIME_FF,AVT_REV_TIME_FF);	
;;;755    					}
;;;756    				}
;;;757    			if(modbus_rx_arg0==65)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ ξαπΰςνξε, ρεκ
000eaa  2f41              CMP      r7,#0x41
000eac  d06c              BEQ      |L1.3976|
;;;758    				{
;;;759    				if(work_stat==wsOFF)
;;;760    					{
;;;761    					AVT_REV_TIME_REW=modbus_rx_arg1;
;;;762    					gran(&AVT_REV_TIME_REW,30,T_PROC_MAX);
;;;763    					lc640_write_int(EE_AVT_REV_TIME_REW,AVT_REV_TIME_REW);	
;;;764    					}
;;;765    				}
;;;766    			if(modbus_rx_arg0==66)		//ΐβςξπεβεπρ, βπεμ οΰσηϋ οπθ οεπεκλώχενθθ, ρεκ
000eae  2f42              CMP      r7,#0x42
000eb0  d06b              BEQ      |L1.3978|
;;;767    				{
;;;768    				if(work_stat==wsOFF)
;;;769    					{
;;;770    					AVT_REV_TIME_PAUSE=modbus_rx_arg1;
;;;771    					gran(&AVT_REV_TIME_PAUSE,2,600);
;;;772    					lc640_write_int(EE_AVT_REV_TIME_PAUSE,AVT_REV_TIME_PAUSE);	
;;;773    					}
;;;774    				}
;;;775    
;;;776    			if(modbus_rx_arg0==67)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ οπμξι, 0.1ΐ
000eb2  2f43              CMP      r7,#0x43
000eb4  d06a              BEQ      |L1.3980|
;;;777    				{
;;;778    				if(work_stat==wsOFF)
;;;779    					{
;;;780    					AVT_REV_I_NOM_FF=modbus_rx_arg1;
;;;781    		    			gran(&AVT_REV_I_NOM_FF,I_MIN_IPS,I_MAX_IPS);
;;;782    					lc640_write_int(EE_AVT_REV_I_NOM_FF,AVT_REV_I_NOM_FF);	
;;;783    					}
;;;784    				}
;;;785    
;;;786    			if(modbus_rx_arg0==68)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ ξαπΰςνϋι, 0.1ΐ
000eb6  2f44              CMP      r7,#0x44
000eb8  d069              BEQ      |L1.3982|
;;;787    				{
;;;788    				if(work_stat==wsOFF)
;;;789    					{
;;;790    					AVT_REV_I_NOM_REW=modbus_rx_arg1;
;;;791    		    			gran(&AVT_REV_I_NOM_REW,I_MIN_IPS,I_MAX_IPS);
;;;792    					lc640_write_int(EE_AVT_REV_I_NOM_REW,AVT_REV_I_NOM_REW);	
;;;793    					}
;;;794    				}
;;;795    			if(modbus_rx_arg0==69)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ οπμξε, 0.1Β 
000eba  2f45              CMP      r7,#0x45
000ebc  d068              BEQ      |L1.3984|
;;;796    				{
;;;797    				if(work_stat==wsOFF)
;;;798    					{
;;;799    					AVT_REV_U_NOM_FF=modbus_rx_arg1;
;;;800    		    			gran(&AVT_REV_U_NOM_FF,U_MIN,U_MAX);
;;;801    					lc640_write_int(EE_AVT_REV_U_NOM_FF,AVT_REV_U_NOM_FF);					
;;;802    					}
;;;803    				}
;;;804    
;;;805    			if(modbus_rx_arg0==70)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ ξαπΰςνξε, 0.1Β
000ebe  2f46              CMP      r7,#0x46
000ec0  d067              BEQ      |L1.3986|
;;;806    				{
;;;807    				if(work_stat==wsOFF)
;;;808    					{
;;;809    					AVT_REV_U_NOM_REW=modbus_rx_arg1;
;;;810    		    			gran(&AVT_REV_U_NOM_REW,U_MIN,U_MAX);
;;;811    					lc640_write_int(EE_AVT_REV_U_NOM_REW,AVT_REV_U_NOM_REW);					
;;;812    					}
;;;813    				}
;;;814    
;;;815    			if(modbus_rx_arg0==71)		//Βπεμ ηΰπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;816    				{
;;;817    				if(work_stat==wsOFF)
;;;818    					{
;;;819    					CAP_ZAR_TIME=modbus_rx_arg1;
000ec2  4ecd              LDR      r6,|L1.4600|
;;;820    		    			gran(&CAP_ZAR_TIME,10,9999);
000ec4  f242720f          MOV      r2,#0x270f
000ec8  2f47              CMP      r7,#0x47              ;815
000eca  d073              BEQ      |L1.4020|
;;;821    					lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;822    					}
;;;823    				}
;;;824    			if(modbus_rx_arg0==72)		//Βπεμ οΰσηϋ1 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;825    				{
;;;826    				if(work_stat==wsOFF)
;;;827    					{
;;;828    					CAP_PAUSE1_TIME=modbus_rx_arg1;
000ecc  f8df832c          LDR      r8,|L1.4604|
000ed0  2f48              CMP      r7,#0x48              ;824
000ed2  d070              BEQ      |L1.4022|
;;;829    		    			gran(&CAP_PAUSE1_TIME,10,9999);
;;;830    					lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;831    					}
;;;832    				}
;;;833    			if(modbus_rx_arg0==73)		//Βπεμ πΰηπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;834    				{
;;;835    				if(work_stat==wsOFF)
;;;836    					{
;;;837    					CAP_RAZR_TIME=modbus_rx_arg1;
000ed4  f8df9328          LDR      r9,|L1.4608|
000ed8  2f49              CMP      r7,#0x49              ;833
000eda  d06d              BEQ      |L1.4024|
;;;838    		    			gran(&CAP_RAZR_TIME,10,9999);
;;;839    					lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;840    					}
;;;841    				}
;;;842    			if(modbus_rx_arg0==74)		//Βπεμ οΰσηϋ2 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;843    				{
;;;844    				if(work_stat==wsOFF)
;;;845    					{
;;;846    					CAP_PAUSE2_TIME=modbus_rx_arg1;
000edc  f8dfb324          LDR      r11,|L1.4612|
000ee0  2f4a              CMP      r7,#0x4a              ;842
000ee2  d06a              BEQ      |L1.4026|
;;;847    		    			gran(&CAP_PAUSE2_TIME,10,9999);
;;;848    					lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;849    					}
;;;850    				}
;;;851    
;;;852    			if(modbus_rx_arg0==75)		//Μΰκρθμΰλόνξε νΰοπζενθε θροϋςΰςελόνξγξ φθκλΰ, 1Β  
;;;853    				{
;;;854    				if(work_stat==wsOFF)
;;;855    					{
;;;856    					CAP_MAX_VOLT=modbus_rx_arg1;
000ee4  48c8              LDR      r0,|L1.4616|
000ee6  2f4b              CMP      r7,#0x4b              ;852
000ee8  d068              BEQ      |L1.4028|
;;;857    		    			gran(&CAP_MAX_VOLT,1,100);
;;;858    					lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;859    					}
;;;860    				}
;;;861    			if(modbus_rx_arg0==76)		//Πΰαξχθι ςξκ θροϋςΰςελόνξγξ φθκλΰ, 1ΐ 
;;;862    				{
;;;863    				if(work_stat==wsOFF)
;;;864    					{
;;;865    					CAP_WRK_CURR=modbus_rx_arg1;
000eea  f8dfa320          LDR      r10,|L1.4620|
000eee  2f4c              CMP      r7,#0x4c              ;861
000ef0  d07c              BEQ      |L1.4076|
;;;866    		    			gran(&CAP_WRK_CURR,1,150);
;;;867    					lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;868    					}
;;;869    				}
;;;870    
;;;871    			if(modbus_rx_arg0==77)		//Πεγθρςπ δλ ηΰοθρθ κξμΰνδ 
000ef2  2f4d              CMP      r7,#0x4d
000ef4  d07b              BEQ      |L1.4078|
000ef6  e291              B        |L1.5148|
                  |L1.3832|
000ef8  f1a70132          SUB      r1,r7,#0x32           ;597
000efc  291e              CMP      r1,#0x1e              ;597
000efe  d21f              BCS      |L1.3904|
000f00  9900              LDR      r1,[sp,#0]            ;597
000f02  b001              ADD      sp,sp,#4              ;597
000f04  4623              MOV      r3,r4                 ;597
000f06  463a              MOV      r2,r7                 ;597
000f08  e8bd4ff0          POP      {r4-r11,lr}           ;597
000f0c  b2c0              UXTB     r0,r0                 ;597
000f0e  f7ffbffe          B.W      modbus_hold_registers_transmit
                  |L1.3858|
000f12  b001              ADD      sp,sp,#4              ;601
000f14  4623              MOV      r3,r4                 ;601
000f16  463a              MOV      r2,r7                 ;601
000f18  e8bd4ff0          POP      {r4-r11,lr}           ;601
000f1c  b2c0              UXTB     r0,r0                 ;601
000f1e  f7ffbffe          B.W      modbus_input_registers_transmit
                  |L1.3874|
000f22  48bb              LDR      r0,|L1.4624|
000f24  b221              SXTH     r1,r4                 ;608
000f26  8001              STRH     r1,[r0,#0]            ;608
000f28  2020              MOVS     r0,#0x20              ;609
000f2a  e272              B        |L1.5138|
                  |L1.3884|
000f2c  48b9              LDR      r0,|L1.4628|
000f2e  b221              SXTH     r1,r4                 ;613
000f30  8001              STRH     r1,[r0,#0]            ;613
000f32  2022              MOVS     r0,#0x22              ;614
000f34  e26d              B        |L1.5138|
                  |L1.3894|
000f36  48b8              LDR      r0,|L1.4632|
000f38  b221              SXTH     r1,r4                 ;618
000f3a  8001              STRH     r1,[r0,#0]            ;618
000f3c  2076              MOVS     r0,#0x76              ;619
000f3e  e268              B        |L1.5138|
                  |L1.3904|
000f40  e2d3              B        |L1.5354|
                  |L1.3906|
000f42  48b6              LDR      r0,|L1.4636|
000f44  b221              SXTH     r1,r4                 ;623
000f46  8001              STRH     r1,[r0,#0]            ;623
000f48  2078              MOVS     r0,#0x78              ;624
000f4a  e262              B        |L1.5138|
                  |L1.3916|
000f4c  4aa5              LDR      r2,|L1.4580|
000f4e  4649              MOV      r1,r9                 ;630
000f50  6813              LDR      r3,[r2,#0]            ;630  ; T_PROC_GS
000f52  fb93f5f1          SDIV     r5,r3,r1              ;630
000f56  fb95f6f9          SDIV     r6,r5,r9              ;630
000f5a  fb93f0f0          SDIV     r0,r3,r0              ;631
000f5e  fb095116          MLS      r1,r9,r6,r5           ;630
000f62  f44f6361          MOV      r3,#0xe10             ;632
000f66  4358              MULS     r0,r3,r0              ;632
000f68  ebc11101          RSB      r1,r1,r1,LSL #4       ;632
000f6c  eb000081          ADD      r0,r0,r1,LSL #2       ;632
000f70  1901              ADDS     r1,r0,r4              ;632
000f72  e024              B        |L1.4030|
                  |L1.3956|
000f74  e00e              B        |L1.3988|
                  |L1.3958|
000f76  e025              B        |L1.4036|
                  |L1.3960|
000f78  e03a              B        |L1.4080|
                  |L1.3962|
000f7a  e04d              B        |L1.4120|
                  |L1.3964|
000f7c  e05c              B        |L1.4152|
                  |L1.3966|
000f7e  e073              B        |L1.4200|
                  |L1.3968|
000f80  e08a              B        |L1.4248|
                  |L1.3970|
000f82  e0a4              B        |L1.4302|
                  |L1.3972|
000f84  e0b0              B        |L1.4328|
                  |L1.3974|
000f86  e0c2              B        |L1.4366|
                  |L1.3976|
000f88  e0d1              B        |L1.4398|
                  |L1.3978|
000f8a  e0e1              B        |L1.4432|
                  |L1.3980|
000f8c  e0ef              B        |L1.4462|
                  |L1.3982|
000f8e  e0ff              B        |L1.4496|
                  |L1.3984|
000f90  e10f              B        |L1.4530|
                  |L1.3986|
000f92  e15f              B        |L1.4692|
                  |L1.3988|
000f94  4a93              LDR      r2,|L1.4580|
000f96  6813              LDR      r3,[r2,#0]            ;638  ; T_PROC_GS
000f98  fb93f5f9          SDIV     r5,r3,r9              ;638
000f9c  fb93f0f0          SDIV     r0,r3,r0              ;640
000fa0  fb093115          MLS      r1,r9,r5,r3           ;638
000fa4  f44f6361          MOV      r3,#0xe10             ;641
000fa8  4358              MULS     r0,r3,r0              ;641
000faa  ebc41304          RSB      r3,r4,r4,LSL #4       ;641
000fae  eb000083          ADD      r0,r0,r3,LSL #2       ;641
000fb2  e019              B        |L1.4072|
                  |L1.4020|
000fb4  e160              B        |L1.4728|
                  |L1.4022|
000fb6  e163              B        |L1.4736|
                  |L1.4024|
000fb8  e167              B        |L1.4746|
                  |L1.4026|
000fba  e16b              B        |L1.4756|
                  |L1.4028|
000fbc  e16f              B        |L1.4766|
                  |L1.4030|
000fbe  20d8              MOVS     r0,#0xd8              ;633
000fc0  6011              STR      r1,[r2,#0]            ;633  ; T_PROC_GS
000fc2  e04e              B        |L1.4194|
                  |L1.4036|
000fc4  4a87              LDR      r2,|L1.4580|
000fc6  4648              MOV      r0,r9                 ;647
000fc8  6811              LDR      r1,[r2,#0]            ;647  ; T_PROC_GS
000fca  fb91f3f0          SDIV     r3,r1,r0              ;647
000fce  fb93f5f9          SDIV     r5,r3,r9              ;648
000fd2  fb093015          MLS      r0,r9,r5,r3           ;648
000fd6  fb091113          MLS      r1,r9,r3,r1           ;647
000fda  f44f6361          MOV      r3,#0xe10             ;650
000fde  435c              MULS     r4,r3,r4              ;650
000fe0  ebc01000          RSB      r0,r0,r0,LSL #4       ;650
000fe4  eb040080          ADD      r0,r4,r0,LSL #2       ;650
                  |L1.4072|
000fe8  4401              ADD      r1,r1,r0              ;650
000fea  e7e8              B        |L1.4030|
                  |L1.4076|
000fec  e163              B        |L1.4790|
                  |L1.4078|
000fee  e168              B        |L1.4802|
                  |L1.4080|
000ff0  4a7e              LDR      r2,|L1.4588|
000ff2  4649              MOV      r1,r9                 ;657
000ff4  6813              LDR      r3,[r2,#0]            ;657  ; T_PROC_PS
000ff6  fb93f5f1          SDIV     r5,r3,r1              ;657
000ffa  fb95f6f9          SDIV     r6,r5,r9              ;657
000ffe  fb93f0f0          SDIV     r0,r3,r0              ;658
001002  fb095116          MLS      r1,r9,r6,r5           ;657
001006  f44f6361          MOV      r3,#0xe10             ;659
00100a  4358              MULS     r0,r3,r0              ;659
00100c  ebc11101          RSB      r1,r1,r1,LSL #4       ;659
001010  eb000081          ADD      r0,r0,r1,LSL #2       ;659
001014  1901              ADDS     r1,r0,r4              ;659
001016  e022              B        |L1.4190|
                  |L1.4120|
001018  4a74              LDR      r2,|L1.4588|
00101a  6813              LDR      r3,[r2,#0]            ;666  ; T_PROC_PS
00101c  fb93f5f9          SDIV     r5,r3,r9              ;666
001020  fb93f0f0          SDIV     r0,r3,r0              ;668
001024  fb093115          MLS      r1,r9,r5,r3           ;666
001028  f44f6361          MOV      r3,#0xe10             ;669
00102c  4358              MULS     r0,r3,r0              ;669
00102e  ebc41304          RSB      r3,r4,r4,LSL #4       ;669
001032  eb000083          ADD      r0,r0,r3,LSL #2       ;669
001036  e011              B        |L1.4188|
                  |L1.4152|
001038  4a6c              LDR      r2,|L1.4588|
00103a  4648              MOV      r0,r9                 ;676
00103c  6811              LDR      r1,[r2,#0]            ;676  ; T_PROC_PS
00103e  fb91f3f0          SDIV     r3,r1,r0              ;676
001042  fb93f5f9          SDIV     r5,r3,r9              ;677
001046  fb093015          MLS      r0,r9,r5,r3           ;677
00104a  fb091113          MLS      r1,r9,r3,r1           ;676
00104e  f44f6361          MOV      r3,#0xe10             ;679
001052  435c              MULS     r4,r3,r4              ;679
001054  ebc01000          RSB      r0,r0,r0,LSL #4       ;679
001058  eb040080          ADD      r0,r4,r0,LSL #2       ;679
                  |L1.4188|
00105c  4401              ADD      r1,r1,r0              ;679
                  |L1.4190|
00105e  20dc              MOVS     r0,#0xdc              ;680
001060  6011              STR      r1,[r2,#0]            ;680  ; T_PROC_PS
                  |L1.4194|
001062  f7fffffe          BL       lc640_write_long
001066  e1d9              B        |L1.5148|
                  |L1.4200|
001068  2c01              CMP      r4,#1                 ;685
00106a  d001              BEQ      |L1.4208|
00106c  b184              CBZ      r4,|L1.4240|
00106e  e1d5              B        |L1.5148|
                  |L1.4208|
001070  7828              LDRB     r0,[r5,#0]            ;687  ; work_stat
001072  2802              CMP      r0,#2                 ;687
001074  d00f              BEQ      |L1.4246|
001076  2002              MOVS     r0,#2                 ;689
001078  4959              LDR      r1,|L1.4576|
00107a  7028              STRB     r0,[r5,#0]            ;689
00107c  2000              MOVS     r0,#0                 ;690
00107e  6008              STR      r0,[r1,#0]            ;691  ; time_proc
001080  485a              LDR      r0,|L1.4588|
001082  6801              LDR      r1,[r0,#0]            ;691  ; T_PROC_PS
001084  4858              LDR      r0,|L1.4584|
001086  6001              STR      r1,[r0,#0]            ;692  ; time_proc_remain
001088  f7fffffe          BL       restart_on_PS
00108c  2101              MOVS     r1,#1                 ;693
00108e  e014              B        |L1.4282|
                  |L1.4240|
001090  7828              LDRB     r0,[r5,#0]            ;698  ; work_stat
001092  2802              CMP      r0,#2                 ;698
001094  d016              BEQ      |L1.4292|
                  |L1.4246|
001096  e1c1              B        |L1.5148|
                  |L1.4248|
001098  2c01              CMP      r4,#1                 ;707
00109a  d001              BEQ      |L1.4256|
00109c  b17c              CBZ      r4,|L1.4286|
00109e  e1bd              B        |L1.5148|
                  |L1.4256|
0010a0  7828              LDRB     r0,[r5,#0]            ;709  ; work_stat
0010a2  2801              CMP      r0,#1                 ;709
0010a4  d012              BEQ      |L1.4300|
0010a6  2001              MOVS     r0,#1                 ;711
0010a8  494d              LDR      r1,|L1.4576|
0010aa  7028              STRB     r0,[r5,#0]            ;711
0010ac  2000              MOVS     r0,#0                 ;712
0010ae  6008              STR      r0,[r1,#0]            ;713  ; time_proc
0010b0  484c              LDR      r0,|L1.4580|
0010b2  6801              LDR      r1,[r0,#0]            ;713  ; T_PROC_GS
0010b4  484c              LDR      r0,|L1.4584|
0010b6  6001              STR      r1,[r0,#0]            ;714  ; time_proc_remain
0010b8  2100              MOVS     r1,#0                 ;714
                  |L1.4282|
0010ba  20ea              MOVS     r0,#0xea              ;693
0010bc  e1a9              B        |L1.5138|
                  |L1.4286|
0010be  7828              LDRB     r0,[r5,#0]            ;719  ; work_stat
0010c0  2801              CMP      r0,#1                 ;719
0010c2  d103              BNE      |L1.4300|
                  |L1.4292|
0010c4  2000              MOVS     r0,#0                 ;721
0010c6  7028              STRB     r0,[r5,#0]            ;721
0010c8  f7fffffe          BL       restart_off
                  |L1.4300|
0010cc  e1a6              B        |L1.5148|
                  |L1.4302|
0010ce  7828              LDRB     r0,[r5,#0]            ;730  ; work_stat
0010d0  2800              CMP      r0,#0                 ;730
0010d2  d103              BNE      |L1.4316|
0010d4  4852              LDR      r0,|L1.4640|
0010d6  b114              CBZ      r4,|L1.4318|
0010d8  2c01              CMP      r4,#1                 ;733
0010da  d002              BEQ      |L1.4322|
                  |L1.4316|
0010dc  e19e              B        |L1.5148|
                  |L1.4318|
0010de  2101              MOVS     r1,#1                 ;732
0010e0  e000              B        |L1.4324|
                  |L1.4322|
0010e2  2100              MOVS     r1,#0                 ;733
                  |L1.4324|
0010e4  7001              STRB     r1,[r0,#0]            ;733
0010e6  e199              B        |L1.5148|
                  |L1.4328|
0010e8  7828              LDRB     r0,[r5,#0]            ;740  ; work_stat
0010ea  bb80              CBNZ     r0,|L1.4430|
0010ec  484d              LDR      r0,|L1.4644|
0010ee  8800              LDRH     r0,[r0,#0]            ;740  ; REV_IS_ON
0010f0  b368              CBZ      r0,|L1.4430|
0010f2  4a4d              LDR      r2,|L1.4648|
0010f4  f44f7084          MOV      r0,#0x108             ;744
0010f8  2c01              CMP      r4,#1                 ;742
0010fa  d003              BEQ      |L1.4356|
0010fc  b124              CBZ      r4,|L1.4360|
0010fe  f9b21000          LDRSH    r1,[r2,#0]            ;744  ; AVT_REV_IS_ON
001102  e186              B        |L1.5138|
                  |L1.4356|
001104  2101              MOVS     r1,#1                 ;742
001106  e000              B        |L1.4362|
                  |L1.4360|
001108  2100              MOVS     r1,#0                 ;743
                  |L1.4362|
00110a  8011              STRH     r1,[r2,#0]            ;742
00110c  e181              B        |L1.5138|
                  |L1.4366|
00110e  7828              LDRB     r0,[r5,#0]            ;750  ; work_stat
001110  b9e8              CBNZ     r0,|L1.4430|
001112  4d46              LDR      r5,|L1.4652|
001114  4846              LDR      r0,|L1.4656|
001116  211e              MOVS     r1,#0x1e              ;753
001118  802c              STRH     r4,[r5,#0]            ;752
00111a  6800              LDR      r0,[r0,#0]            ;753  ; T_PROC_MAX
00111c  b202              SXTH     r2,r0                 ;753
00111e  4628              MOV      r0,r5                 ;753
001120  f7fffffe          BL       gran
001124  f9b51000          LDRSH    r1,[r5,#0]            ;754  ; AVT_REV_TIME_FF
001128  f44f7085          MOV      r0,#0x10a             ;754
00112c  e171              B        |L1.5138|
                  |L1.4398|
00112e  7828              LDRB     r0,[r5,#0]            ;759  ; work_stat
001130  b968              CBNZ     r0,|L1.4430|
001132  4d40              LDR      r5,|L1.4660|
001134  483e              LDR      r0,|L1.4656|
001136  211e              MOVS     r1,#0x1e              ;762
001138  802c              STRH     r4,[r5,#0]            ;761
00113a  6800              LDR      r0,[r0,#0]            ;762  ; T_PROC_MAX
00113c  b202              SXTH     r2,r0                 ;762
00113e  4628              MOV      r0,r5                 ;762
001140  f7fffffe          BL       gran
001144  f9b51000          LDRSH    r1,[r5,#0]            ;763  ; AVT_REV_TIME_REW
001148  f44f7086          MOV      r0,#0x10c             ;763
00114c  e161              B        |L1.5138|
                  |L1.4430|
00114e  e040              B        |L1.4562|
                  |L1.4432|
001150  7828              LDRB     r0,[r5,#0]            ;768  ; work_stat
001152  bbf0              CBNZ     r0,|L1.4562|
001154  4d38              LDR      r5,|L1.4664|
001156  f44f7216          MOV      r2,#0x258             ;771
00115a  2102              MOVS     r1,#2                 ;771
00115c  802c              STRH     r4,[r5,#0]            ;770
00115e  4628              MOV      r0,r5                 ;771
001160  f7fffffe          BL       gran
001164  f9b51000          LDRSH    r1,[r5,#0]            ;772  ; AVT_REV_TIME_PAUSE
001168  f44f7087          MOV      r0,#0x10e             ;772
00116c  e151              B        |L1.5138|
                  |L1.4462|
00116e  7828              LDRB     r0,[r5,#0]            ;778  ; work_stat
001170  bb78              CBNZ     r0,|L1.4562|
001172  4d32              LDR      r5,|L1.4668|
001174  4832              LDR      r0,|L1.4672|
001176  802c              STRH     r4,[r5,#0]            ;780
001178  f9b01000          LDRSH    r1,[r0,#0]            ;781  ; I_MIN_IPS
00117c  f9bb2000          LDRSH    r2,[r11,#0]           ;781  ; I_MAX_IPS
001180  4628              MOV      r0,r5                 ;781
001182  f7fffffe          BL       gran
001186  f9b51000          LDRSH    r1,[r5,#0]            ;782  ; AVT_REV_I_NOM_FF
00118a  f44f7088          MOV      r0,#0x110             ;782
00118e  e140              B        |L1.5138|
                  |L1.4496|
001190  7828              LDRB     r0,[r5,#0]            ;788  ; work_stat
001192  b9f0              CBNZ     r0,|L1.4562|
001194  4d2b              LDR      r5,|L1.4676|
001196  482a              LDR      r0,|L1.4672|
001198  802c              STRH     r4,[r5,#0]            ;790
00119a  f9b01000          LDRSH    r1,[r0,#0]            ;791  ; I_MIN_IPS
00119e  f9bb2000          LDRSH    r2,[r11,#0]           ;791  ; I_MAX_IPS
0011a2  4628              MOV      r0,r5                 ;791
0011a4  f7fffffe          BL       gran
0011a8  f9b51000          LDRSH    r1,[r5,#0]            ;792  ; AVT_REV_I_NOM_REW
0011ac  f44f7089          MOV      r0,#0x112             ;792
0011b0  e12f              B        |L1.5138|
                  |L1.4530|
0011b2  7828              LDRB     r0,[r5,#0]            ;797  ; work_stat
0011b4  b968              CBNZ     r0,|L1.4562|
0011b6  4d24              LDR      r5,|L1.4680|
0011b8  4824              LDR      r0,|L1.4684|
0011ba  802c              STRH     r4,[r5,#0]            ;799
0011bc  f9b02000          LDRSH    r2,[r0,#0]            ;800  ; U_MAX
0011c0  4823              LDR      r0,|L1.4688|
0011c2  f9b01000          LDRSH    r1,[r0,#0]            ;800  ; U_MIN
0011c6  4628              MOV      r0,r5                 ;800
0011c8  f7fffffe          BL       gran
0011cc  f9b51000          LDRSH    r1,[r5,#0]            ;801  ; AVT_REV_U_NOM_FF
0011d0  e000              B        |L1.4564|
                  |L1.4562|
0011d2  e075              B        |L1.4800|
                  |L1.4564|
0011d4  f44f708a          MOV      r0,#0x114             ;801
0011d8  e11b              B        |L1.5138|
0011da  0000              DCW      0x0000
                  |L1.4572|
                          DCD      a_ind
                  |L1.4576|
                          DCD      time_proc
                  |L1.4580|
                          DCD      T_PROC_GS
                  |L1.4584|
                          DCD      time_proc_remain
                  |L1.4588|
                          DCD      T_PROC_PS
                  |L1.4592|
                          DCD      ||area_number.5||+0x1e
                  |L1.4596|
                          DCD      MODBUS_ADRESS
                  |L1.4600|
                          DCD      CAP_ZAR_TIME
                  |L1.4604|
                          DCD      CAP_PAUSE1_TIME
                  |L1.4608|
                          DCD      CAP_RAZR_TIME
                  |L1.4612|
                          DCD      CAP_PAUSE2_TIME
                  |L1.4616|
                          DCD      CAP_MAX_VOLT
                  |L1.4620|
                          DCD      CAP_WRK_CURR
                  |L1.4624|
                          DCD      I_ug
                  |L1.4628|
                          DCD      U_up
                  |L1.4632|
                          DCD      U_maxg
                  |L1.4636|
                          DCD      I_maxp
                  |L1.4640|
                          DCD      REV_STAT
                  |L1.4644|
                          DCD      REV_IS_ON
                  |L1.4648|
                          DCD      AVT_REV_IS_ON
                  |L1.4652|
                          DCD      AVT_REV_TIME_FF
                  |L1.4656|
                          DCD      T_PROC_MAX
                  |L1.4660|
                          DCD      AVT_REV_TIME_REW
                  |L1.4664|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.4668|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.4672|
                          DCD      I_MIN_IPS
                  |L1.4676|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.4680|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.4684|
                          DCD      U_MAX
                  |L1.4688|
                          DCD      U_MIN
                  |L1.4692|
001254  7828              LDRB     r0,[r5,#0]            ;807  ; work_stat
001256  bb98              CBNZ     r0,|L1.4800|
001258  4da5              LDR      r5,|L1.5360|
00125a  48a6              LDR      r0,|L1.5364|
00125c  802c              STRH     r4,[r5,#0]            ;809
00125e  f9b02000          LDRSH    r2,[r0,#0]            ;810  ; U_MAX
001262  48a5              LDR      r0,|L1.5368|
001264  f9b01000          LDRSH    r1,[r0,#0]            ;810  ; U_MIN
001268  4628              MOV      r0,r5                 ;810
00126a  f7fffffe          BL       gran
00126e  f9b51000          LDRSH    r1,[r5,#0]            ;811  ; AVT_REV_U_NOM_REW
001272  f44f708b          MOV      r0,#0x116             ;811
001276  e0cc              B        |L1.5138|
                  |L1.4728|
001278  7828              LDRB     r0,[r5,#0]            ;817  ; work_stat
00127a  bb08              CBNZ     r0,|L1.4800|
00127c  8034              STRH     r4,[r6,#0]            ;819
00127e  e052              B        |L1.4902|
                  |L1.4736|
001280  7828              LDRB     r0,[r5,#0]            ;826  ; work_stat
001282  b9e8              CBNZ     r0,|L1.4800|
001284  f8a84000          STRH     r4,[r8,#0]            ;828
001288  e062              B        |L1.4944|
                  |L1.4746|
00128a  7828              LDRB     r0,[r5,#0]            ;835  ; work_stat
00128c  b9c0              CBNZ     r0,|L1.4800|
00128e  f8a94000          STRH     r4,[r9,#0]            ;837
001292  e074              B        |L1.4990|
                  |L1.4756|
001294  7828              LDRB     r0,[r5,#0]            ;844  ; work_stat
001296  b998              CBNZ     r0,|L1.4800|
001298  f8ab4000          STRH     r4,[r11,#0]           ;846
00129c  e087              B        |L1.5038|
                  |L1.4766|
00129e  7829              LDRB     r1,[r5,#0]            ;854  ; work_stat
0012a0  b971              CBNZ     r1,|L1.4800|
0012a2  4605              MOV      r5,r0                 ;856
0012a4  8004              STRH     r4,[r0,#0]            ;856
0012a6  2264              MOVS     r2,#0x64              ;857
0012a8  2101              MOVS     r1,#1                 ;857
0012aa  4894              LDR      r0,|L1.5372|
0012ac  f7fffffe          BL       gran
0012b0  f9b51000          LDRSH    r1,[r5,#0]            ;858  ; CAP_MAX_VOLT
0012b4  e095              B        |L1.5090|
                  |L1.4790|
0012b6  7828              LDRB     r0,[r5,#0]            ;863  ; work_stat
0012b8  b910              CBNZ     r0,|L1.4800|
0012ba  f8aa4000          STRH     r4,[r10,#0]           ;865
0012be  e0be              B        |L1.5182|
                  |L1.4800|
0012c0  e066              B        |L1.5008|
                  |L1.4802|
;;;872    				{
;;;873    				if(modbus_rx_arg1==0x11)
0012c2  2c11              CMP      r4,#0x11
0012c4  d01e              BEQ      |L1.4868|
;;;874    					{
;;;875    					start_CAP();
;;;876    					}
;;;877    				if(modbus_rx_arg1==0x12)
0012c6  2c12              CMP      r4,#0x12
0012c8  d01f              BEQ      |L1.4874|
;;;878    					{
;;;879    					pause_CAP();
;;;880    					}
;;;881    				if(modbus_rx_arg1==0x13)
0012ca  2c13              CMP      r4,#0x13
0012cc  d020              BEQ      |L1.4880|
;;;882    					{
;;;883    					stop_CAP();
;;;884    					}
;;;885    				if(modbus_rx_arg1==0x14)
0012ce  2c14              CMP      r4,#0x14
0012d0  d021              BEQ      |L1.4886|
;;;886    					{
;;;887    					reset_CAP();
;;;888    					}
;;;889    
;;;890    				if(modbus_rx_arg1==0x21)
0012d2  2c21              CMP      r4,#0x21
0012d4  d022              BEQ      |L1.4892|
;;;891    					{
;;;892    					if(work_stat==wsOFF)
;;;893    						{
;;;894    						CAP_ZAR_TIME++;
;;;895    		    				gran(&CAP_ZAR_TIME,10,9999);
;;;896    						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;897    						}
;;;898    					}
;;;899    				if(modbus_rx_arg1==0x22)
0012d6  2c22              CMP      r4,#0x22
0012d8  d02e              BEQ      |L1.4920|
;;;900    					{
;;;901    					if(work_stat==wsOFF)
;;;902    						{
;;;903    						CAP_ZAR_TIME--;
;;;904    		    				gran(&CAP_ZAR_TIME,10,9999);
;;;905    						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;906    						}
;;;907    					}
;;;908    
;;;909    				if(modbus_rx_arg1==0x31)
0012da  2c31              CMP      r4,#0x31
0012dc  d032              BEQ      |L1.4932|
;;;910    					{
;;;911    					if(work_stat==wsOFF)
;;;912    						{
;;;913    						CAP_PAUSE1_TIME++;
;;;914    		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;915    						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;916    						}
;;;917    					}
;;;918    				if(modbus_rx_arg1==0x32)
0012de  2c32              CMP      r4,#0x32
0012e0  d03f              BEQ      |L1.4962|
;;;919    					{
;;;920    					if(work_stat==wsOFF)
;;;921    						{
;;;922    						CAP_PAUSE1_TIME--;
;;;923    		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;924    						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;925    						}
;;;926    					}
;;;927    
;;;928    				if(modbus_rx_arg1==0x41)
0012e2  2c41              CMP      r4,#0x41
0012e4  d045              BEQ      |L1.4978|
;;;929    					{
;;;930    					if(work_stat==wsOFF)
;;;931    						{
;;;932    						CAP_RAZR_TIME++;
;;;933    		    				gran(&CAP_RAZR_TIME,10,9999);
;;;934    						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;935    						}
;;;936    					}
;;;937    				if(modbus_rx_arg1==0x42)
0012e6  2c42              CMP      r4,#0x42
0012e8  d053              BEQ      |L1.5010|
;;;938    					{
;;;939    					if(work_stat==wsOFF)
;;;940    						{
;;;941    						CAP_RAZR_TIME--;
;;;942    		    				gran(&CAP_RAZR_TIME,10,9999);
;;;943    						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;944    						}
;;;945    					}
;;;946    
;;;947    				if(modbus_rx_arg1==0x51)
0012ea  2c51              CMP      r4,#0x51
0012ec  d059              BEQ      |L1.5026|
;;;948    					{
;;;949    					if(work_stat==wsOFF)
;;;950    						{
;;;951    						CAP_PAUSE2_TIME++;
;;;952    		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;953    						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;954    						}
;;;955    					}
;;;956    				if(modbus_rx_arg1==0x52)
0012ee  2c52              CMP      r4,#0x52
0012f0  d066              BEQ      |L1.5056|
;;;957    					{
;;;958    					if(work_stat==wsOFF)
;;;959    						{
;;;960    						CAP_PAUSE2_TIME--;
;;;961    		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;962    						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;963    						}
;;;964    					}
;;;965    
;;;966    				if(modbus_rx_arg1==0x61)
0012f2  2c61              CMP      r4,#0x61
0012f4  d06c              BEQ      |L1.5072|
;;;967    					{
;;;968    					if(work_stat==wsOFF)
;;;969    						{
;;;970    						CAP_MAX_VOLT++;
;;;971    		    				gran(&CAP_MAX_VOLT,1,100);
;;;972    						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;973    						}
;;;974    					}
;;;975    				if(modbus_rx_arg1==0x62)
0012f6  2c62              CMP      r4,#0x62
0012f8  d076              BEQ      |L1.5096|
;;;976    					{
;;;977    					if(work_stat==wsOFF)
;;;978    						{
;;;979    						CAP_MAX_VOLT--;
;;;980    		    				gran(&CAP_MAX_VOLT,1,100);
;;;981    						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;982    						}
;;;983    					}
;;;984    
;;;985    				if(modbus_rx_arg1==0x71)
0012fa  2c71              CMP      r4,#0x71
0012fc  d06f              BEQ      |L1.5086|
;;;986    					{
;;;987    					if(work_stat==wsOFF)
;;;988    						{
;;;989    						CAP_WRK_CURR++;
;;;990    		    				gran(&CAP_WRK_CURR,1,150);
;;;991    						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;992    						}
;;;993    					}
;;;994    				if(modbus_rx_arg1==0x72)
0012fe  2c72              CMP      r4,#0x72
001300  d06e              BEQ      |L1.5088|
001302  e08b              B        |L1.5148|
                  |L1.4868|
001304  f7fffffe          BL       start_CAP
001308  e088              B        |L1.5148|
                  |L1.4874|
00130a  f7fffffe          BL       pause_CAP
00130e  e085              B        |L1.5148|
                  |L1.4880|
001310  f7fffffe          BL       stop_CAP
001314  e082              B        |L1.5148|
                  |L1.4886|
001316  f7fffffe          BL       reset_CAP
00131a  e07f              B        |L1.5148|
                  |L1.4892|
00131c  7828              LDRB     r0,[r5,#0]            ;892  ; work_stat
00131e  bbb8              CBNZ     r0,|L1.5008|
001320  8830              LDRH     r0,[r6,#0]            ;894  ; CAP_ZAR_TIME
001322  1c40              ADDS     r0,r0,#1              ;894
001324  e00c              B        |L1.4928|
                  |L1.4902|
001326  210a              MOVS     r1,#0xa               ;820
001328  4875              LDR      r0,|L1.5376|
00132a  f7fffffe          BL       gran
00132e  f9b61000          LDRSH    r1,[r6,#0]            ;821  ; CAP_ZAR_TIME
001332  f44f70e9          MOV      r0,#0x1d2             ;821
001336  e06c              B        |L1.5138|
                  |L1.4920|
001338  7828              LDRB     r0,[r5,#0]            ;901  ; work_stat
00133a  bb48              CBNZ     r0,|L1.5008|
00133c  8830              LDRH     r0,[r6,#0]            ;903  ; CAP_ZAR_TIME
00133e  1e40              SUBS     r0,r0,#1              ;903
                  |L1.4928|
001340  8030              STRH     r0,[r6,#0]            ;903
001342  e7f0              B        |L1.4902|
                  |L1.4932|
001344  7828              LDRB     r0,[r5,#0]            ;911  ; work_stat
001346  bb18              CBNZ     r0,|L1.5008|
001348  f8b80000          LDRH     r0,[r8,#0]            ;913  ; CAP_PAUSE1_TIME
00134c  1c40              ADDS     r0,r0,#1              ;913
00134e  e00d              B        |L1.4972|
                  |L1.4944|
001350  210a              MOVS     r1,#0xa               ;829
001352  486c              LDR      r0,|L1.5380|
001354  f7fffffe          BL       gran
001358  f9b81000          LDRSH    r1,[r8,#0]            ;830  ; CAP_PAUSE1_TIME
00135c  f44f70ea          MOV      r0,#0x1d4             ;830
001360  e057              B        |L1.5138|
                  |L1.4962|
001362  7828              LDRB     r0,[r5,#0]            ;920  ; work_stat
001364  b9a0              CBNZ     r0,|L1.5008|
001366  f8b80000          LDRH     r0,[r8,#0]            ;922  ; CAP_PAUSE1_TIME
00136a  1e40              SUBS     r0,r0,#1              ;922
                  |L1.4972|
00136c  f8a80000          STRH     r0,[r8,#0]            ;922
001370  e7ee              B        |L1.4944|
                  |L1.4978|
001372  7828              LDRB     r0,[r5,#0]            ;930  ; work_stat
001374  b960              CBNZ     r0,|L1.5008|
001376  f8b90000          LDRH     r0,[r9,#0]            ;932  ; CAP_RAZR_TIME
00137a  1c40              ADDS     r0,r0,#1              ;932
00137c  e00e              B        |L1.5020|
                  |L1.4990|
00137e  210a              MOVS     r1,#0xa               ;838
001380  4861              LDR      r0,|L1.5384|
001382  f7fffffe          BL       gran
001386  f9b91000          LDRSH    r1,[r9,#0]            ;839  ; CAP_RAZR_TIME
00138a  f44f70eb          MOV      r0,#0x1d6             ;839
00138e  e040              B        |L1.5138|
                  |L1.5008|
001390  e038              B        |L1.5124|
                  |L1.5010|
001392  7828              LDRB     r0,[r5,#0]            ;939  ; work_stat
001394  bbb0              CBNZ     r0,|L1.5124|
001396  f8b90000          LDRH     r0,[r9,#0]            ;941  ; CAP_RAZR_TIME
00139a  1e40              SUBS     r0,r0,#1              ;941
                  |L1.5020|
00139c  f8a90000          STRH     r0,[r9,#0]            ;941
0013a0  e7ed              B        |L1.4990|
                  |L1.5026|
0013a2  7828              LDRB     r0,[r5,#0]            ;949  ; work_stat
0013a4  bb70              CBNZ     r0,|L1.5124|
0013a6  f8bb0000          LDRH     r0,[r11,#0]           ;951  ; CAP_PAUSE2_TIME
0013aa  1c40              ADDS     r0,r0,#1              ;951
0013ac  e00d              B        |L1.5066|
                  |L1.5038|
0013ae  210a              MOVS     r1,#0xa               ;847
0013b0  4856              LDR      r0,|L1.5388|
0013b2  f7fffffe          BL       gran
0013b6  f9bb1000          LDRSH    r1,[r11,#0]           ;848  ; CAP_PAUSE2_TIME
0013ba  f44f70ec          MOV      r0,#0x1d8             ;848
0013be  e028              B        |L1.5138|
                  |L1.5056|
0013c0  7828              LDRB     r0,[r5,#0]            ;958  ; work_stat
0013c2  b9f8              CBNZ     r0,|L1.5124|
0013c4  f8bb0000          LDRH     r0,[r11,#0]           ;960  ; CAP_PAUSE2_TIME
0013c8  1e40              SUBS     r0,r0,#1              ;960
                  |L1.5066|
0013ca  f8ab0000          STRH     r0,[r11,#0]           ;960
0013ce  e7ee              B        |L1.5038|
                  |L1.5072|
0013d0  7829              LDRB     r1,[r5,#0]            ;968  ; work_stat
0013d2  b9b9              CBNZ     r1,|L1.5124|
0013d4  4604              MOV      r4,r0                 ;970
0013d6  8800              LDRH     r0,[r0,#0]            ;970  ; CAP_MAX_VOLT
0013d8  1c40              ADDS     r0,r0,#1              ;970
0013da  e00a              B        |L1.5106|
0013dc  e004              B        |L1.5096|
                  |L1.5086|
0013de  e012              B        |L1.5126|
                  |L1.5088|
0013e0  e01a              B        |L1.5144|
                  |L1.5090|
0013e2  f44f70ed          MOV      r0,#0x1da             ;858
0013e6  e014              B        |L1.5138|
                  |L1.5096|
0013e8  7829              LDRB     r1,[r5,#0]            ;977  ; work_stat
0013ea  b959              CBNZ     r1,|L1.5124|
0013ec  4604              MOV      r4,r0                 ;979
0013ee  8800              LDRH     r0,[r0,#0]            ;979  ; CAP_MAX_VOLT
0013f0  1e40              SUBS     r0,r0,#1              ;979
                  |L1.5106|
0013f2  8020              STRH     r0,[r4,#0]            ;979
0013f4  2264              MOVS     r2,#0x64              ;980
0013f6  2101              MOVS     r1,#1                 ;980
0013f8  4840              LDR      r0,|L1.5372|
0013fa  f7fffffe          BL       gran
0013fe  f9b41000          LDRSH    r1,[r4,#0]            ;981  ; CAP_MAX_VOLT
001402  e7ee              B        |L1.5090|
                  |L1.5124|
001404  e00a              B        |L1.5148|
                  |L1.5126|
001406  7828              LDRB     r0,[r5,#0]            ;987  ; work_stat
001408  b940              CBNZ     r0,|L1.5148|
00140a  f8ba0000          LDRH     r0,[r10,#0]           ;989  ; CAP_WRK_CURR
00140e  1c40              ADDS     r0,r0,#1              ;989
001410  e013              B        |L1.5178|
                  |L1.5138|
001412  f7fffffe          BL       lc640_write_int
001416  e001              B        |L1.5148|
                  |L1.5144|
;;;995    					{
;;;996    					if(work_stat==wsOFF)
001418  7828              LDRB     r0,[r5,#0]  ; work_stat
00141a  b158              CBZ      r0,|L1.5172|
                  |L1.5148|
;;;997    						{
;;;998    						CAP_WRK_CURR--;
;;;999    		    				gran(&CAP_WRK_CURR,1,150);
;;;1000   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1001   						}
;;;1002   					}
;;;1003   
;;;1004   				}
;;;1005   
;;;1006   			
;;;1007   			if((T_PROC_GS>T_PROC_MAX)||(T_PROC_GS<30))
00141c  4c3c              LDR      r4,|L1.5392|
00141e  4d3d              LDR      r5,|L1.5396|
001420  6821              LDR      r1,[r4,#0]  ; T_PROC_GS
001422  6828              LDR      r0,[r5,#0]  ; T_PROC_MAX
001424  4281              CMP      r1,r0
001426  dc01              BGT      |L1.5164|
001428  291e              CMP      r1,#0x1e
00142a  da22              BGE      |L1.5234|
                  |L1.5164|
;;;1008   				{
;;;1009   				if(T_PROC_GS>T_PROC_MAX)T_PROC_GS=T_PROC_MAX+1;
00142c  4281              CMP      r1,r0
00142e  dd10              BLE      |L1.5202|
001430  1c40              ADDS     r0,r0,#1
001432  e013              B        |L1.5212|
                  |L1.5172|
001434  f8ba0000          LDRH     r0,[r10,#0]           ;998  ; CAP_WRK_CURR
001438  1e40              SUBS     r0,r0,#1              ;998
                  |L1.5178|
00143a  f8aa0000          STRH     r0,[r10,#0]           ;989
                  |L1.5182|
00143e  2296              MOVS     r2,#0x96              ;999
001440  2101              MOVS     r1,#1                 ;999
001442  4835              LDR      r0,|L1.5400|
001444  f7fffffe          BL       gran
001448  f9ba1000          LDRSH    r1,[r10,#0]           ;1000  ; CAP_WRK_CURR
00144c  f44f70ee          MOV      r0,#0x1dc             ;1000
001450  e7df              B        |L1.5138|
                  |L1.5202|
;;;1010   				else if(T_PROC_GS<30)T_PROC_GS=29;
001452  291e              CMP      r1,#0x1e
001454  db01              BLT      |L1.5210|
001456  6820              LDR      r0,[r4,#0]  ; T_PROC_GS
001458  e001              B        |L1.5214|
                  |L1.5210|
00145a  201d              MOVS     r0,#0x1d
                  |L1.5212|
00145c  6020              STR      r0,[r4,#0]  ; T_PROC_GS
                  |L1.5214|
;;;1011   				lc640_write_int(EE_T_PROC_GS,T_PROC_GS);
00145e  b201              SXTH     r1,r0
001460  20d8              MOVS     r0,#0xd8
001462  f7fffffe          BL       lc640_write_int
;;;1012   				T_PROC_GS_MODE=1;	
001466  482d              LDR      r0,|L1.5404|
001468  2101              MOVS     r1,#1
00146a  8001              STRH     r1,[r0,#0]
;;;1013   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
00146c  20ee              MOVS     r0,#0xee
00146e  f7fffffe          BL       lc640_write_int
                  |L1.5234|
;;;1014   				}
;;;1015   			if((T_PROC_GS<=T_PROC_MAX)&&(T_PROC_GS>=30))
001472  6820              LDR      r0,[r4,#0]  ; T_PROC_GS
001474  6829              LDR      r1,[r5,#0]  ; T_PROC_MAX
001476  4288              CMP      r0,r1
001478  dc07              BGT      |L1.5258|
00147a  281e              CMP      r0,#0x1e
00147c  db05              BLT      |L1.5258|
;;;1016   				{
;;;1017   				T_PROC_GS_MODE=0;	
00147e  4827              LDR      r0,|L1.5404|
001480  2100              MOVS     r1,#0
001482  8001              STRH     r1,[r0,#0]
;;;1018   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
001484  20ee              MOVS     r0,#0xee
001486  f7fffffe          BL       lc640_write_int
                  |L1.5258|
;;;1019   				}
;;;1020   			
;;;1021   			if((T_PROC_PS>T_PROC_MAX)||(T_PROC_PS<30))
00148a  4c25              LDR      r4,|L1.5408|
00148c  6829              LDR      r1,[r5,#0]  ; T_PROC_MAX
00148e  6820              LDR      r0,[r4,#0]  ; T_PROC_PS
001490  4288              CMP      r0,r1
001492  dc01              BGT      |L1.5272|
001494  281e              CMP      r0,#0x1e
001496  da13              BGE      |L1.5312|
                  |L1.5272|
;;;1022   				{
;;;1023   				if(T_PROC_PS>T_PROC_MAX)T_PROC_PS=T_PROC_MAX+1;
001498  4288              CMP      r0,r1
00149a  dd02              BLE      |L1.5282|
00149c  1c49              ADDS     r1,r1,#1
00149e  6021              STR      r1,[r4,#0]  ; T_PROC_PS
0014a0  e003              B        |L1.5290|
                  |L1.5282|
;;;1024   				else if(T_PROC_PS<30)T_PROC_PS=29;
0014a2  281e              CMP      r0,#0x1e
0014a4  da01              BGE      |L1.5290|
0014a6  201d              MOVS     r0,#0x1d
0014a8  6020              STR      r0,[r4,#0]  ; T_PROC_PS
                  |L1.5290|
;;;1025   				lc640_write_int(EE_T_PROC_PS,T_PROC_PS);
0014aa  6820              LDR      r0,[r4,#0]  ; T_PROC_PS
0014ac  b201              SXTH     r1,r0
0014ae  20dc              MOVS     r0,#0xdc
0014b0  f7fffffe          BL       lc640_write_int
;;;1026   				T_PROC_PS_MODE=1;	
0014b4  481b              LDR      r0,|L1.5412|
0014b6  2101              MOVS     r1,#1
0014b8  8001              STRH     r1,[r0,#0]
;;;1027   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
0014ba  20f0              MOVS     r0,#0xf0
0014bc  f7fffffe          BL       lc640_write_int
                  |L1.5312|
;;;1028   				}
;;;1029   			if((T_PROC_PS<=T_PROC_MAX)&&(T_PROC_PS>=30))
0014c0  6820              LDR      r0,[r4,#0]  ; T_PROC_PS
0014c2  6829              LDR      r1,[r5,#0]  ; T_PROC_MAX
0014c4  4288              CMP      r0,r1
0014c6  dc07              BGT      |L1.5336|
0014c8  281e              CMP      r0,#0x1e
0014ca  db05              BLT      |L1.5336|
;;;1030   				{
;;;1031   				T_PROC_PS_MODE=0;	
0014cc  4815              LDR      r0,|L1.5412|
0014ce  2100              MOVS     r1,#0
0014d0  8001              STRH     r1,[r0,#0]
;;;1032   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
0014d2  20f0              MOVS     r0,#0xf0
0014d4  f7fffffe          BL       lc640_write_int
                  |L1.5336|
;;;1033   				}
;;;1034   
;;;1035   			modbus_hold_register_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0);
0014d8  4813              LDR      r0,|L1.5416|
0014da  463a              MOV      r2,r7
0014dc  9900              LDR      r1,[sp,#0]
0014de  8800              LDRH     r0,[r0,#0]  ; MODBUS_ADRESS
0014e0  e8bd4ff8          POP      {r3-r11,lr}
0014e4  b2c0              UXTB     r0,r0
0014e6  f7ffbffe          B.W      modbus_hold_register_transmit
                  |L1.5354|
;;;1036   
;;;1037   
;;;1038   			//modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,2);
;;;1039   
;;;1040   
;;;1041   			}
;;;1042   		} 
;;;1043   	//;
;;;1044   	}
;;;1045   // modbus_plazma++;
;;;1046   
;;;1047   }
0014ea  e8bd8ff8          POP      {r3-r11,pc}
;;;1048   
                          ENDP

0014ee  0000              DCW      0x0000
                  |L1.5360|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.5364|
                          DCD      U_MAX
                  |L1.5368|
                          DCD      U_MIN
                  |L1.5372|
                          DCD      CAP_MAX_VOLT
                  |L1.5376|
                          DCD      CAP_ZAR_TIME
                  |L1.5380|
                          DCD      CAP_PAUSE1_TIME
                  |L1.5384|
                          DCD      CAP_RAZR_TIME
                  |L1.5388|
                          DCD      CAP_PAUSE2_TIME
                  |L1.5392|
                          DCD      T_PROC_GS
                  |L1.5396|
                          DCD      T_PROC_MAX
                  |L1.5400|
                          DCD      CAP_WRK_CURR
                  |L1.5404|
                          DCD      T_PROC_GS_MODE
                  |L1.5408|
                          DCD      T_PROC_PS
                  |L1.5412|
                          DCD      T_PROC_PS_MODE
                  |L1.5416|
                          DCD      MODBUS_ADRESS

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  modbus_register_transmit PROC
;;;1190   //-----------------------------------------------
;;;1191   void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;1192   {
000004  4681              MOV      r9,r0
;;;1193   char modbus_registers[120];
;;;1194   char modbus_tx_buff[100];
;;;1195   unsigned short crc_temp;
;;;1196   char i;
;;;1197   
;;;1198   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
000006  4888              LDR      r0,|L2.552|
000008  468a              MOV      r10,r1                ;1192
00000a  b0b8              SUB      sp,sp,#0xe0           ;1192
00000c  f9b00000          LDRSH    r0,[r0,#0]  ; load_U
;;;1199   modbus_registers[1]=(char)(load_U%256);
;;;1200   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
;;;1201   modbus_registers[3]=(char)(load_I%256);
;;;1202   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
000010  243c              MOVS     r4,#0x3c
000012  17c1              ASRS     r1,r0,#31             ;1198
000014  eb006111          ADD      r1,r0,r1,LSR #24      ;1198
000018  120b              ASRS     r3,r1,#8              ;1198
00001a  f88d3000          STRB     r3,[sp,#0]            ;1198
00001e  f88d0001          STRB     r0,[sp,#1]            ;1199
000022  4882              LDR      r0,|L2.556|
;;;1203   modbus_registers[5]=(char)((time_proc%60)%256);
;;;1204   modbus_registers[6]=(char)((time_proc/60)/256);			//Πεγ4
;;;1205   modbus_registers[7]=(char)((time_proc/60)%256);
;;;1206   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
;;;1207   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000024  f44f6861          MOV      r8,#0xe10
000028  f9b00000          LDRSH    r0,[r0,#0]            ;1200  ; load_I
00002c  17c1              ASRS     r1,r0,#31             ;1200
00002e  eb006111          ADD      r1,r0,r1,LSR #24      ;1200
000032  120b              ASRS     r3,r1,#8              ;1200
000034  f88d3002          STRB     r3,[sp,#2]            ;1200
000038  f88d0003          STRB     r0,[sp,#3]            ;1201
00003c  487c              LDR      r0,|L2.560|
00003e  6801              LDR      r1,[r0,#0]            ;1202  ; time_proc
000040  fb91f3f4          SDIV     r3,r1,r4              ;1202
000044  fb041013          MLS      r0,r4,r3,r1           ;1202
000048  17c5              ASRS     r5,r0,#31             ;1202
00004a  eb006515          ADD      r5,r0,r5,LSR #24      ;1202
00004e  122e              ASRS     r6,r5,#8              ;1202
000050  f88d6004          STRB     r6,[sp,#4]            ;1202
000054  f88d0005          STRB     r0,[sp,#5]            ;1203
000058  0225              LSLS     r5,r4,#8              ;1204
00005a  fb91f0f5          SDIV     r0,r1,r5              ;1204
00005e  f88d0006          STRB     r0,[sp,#6]            ;1204
000062  4618              MOV      r0,r3                 ;1205
000064  f88d0007          STRB     r0,[sp,#7]            ;1205
000068  f44f2661          MOV      r6,#0xe1000           ;1206
00006c  fb91f0f6          SDIV     r0,r1,r6              ;1206
000070  f88d0008          STRB     r0,[sp,#8]            ;1206
000074  fb91f0f8          SDIV     r0,r1,r8
000078  f88d0009          STRB     r0,[sp,#9]
;;;1208   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
00007c  486d              LDR      r0,|L2.564|
00007e  6800              LDR      r0,[r0,#0]  ; time_proc_remain
000080  fb90f1f4          SDIV     r1,r0,r4
000084  fb040311          MLS      r3,r4,r1,r0
000088  17df              ASRS     r7,r3,#31
00008a  eb036717          ADD      r7,r3,r7,LSR #24
00008e  ea4f2c27          ASR      r12,r7,#8
000092  f88dc00a          STRB     r12,[sp,#0xa]
;;;1209   modbus_registers[11]=(char)((time_proc_remain%60)%256);
000096  f88d300b          STRB     r3,[sp,#0xb]
;;;1210   modbus_registers[12]=(char)((time_proc_remain/60)/256);	//Πεγ7
00009a  fb90f3f5          SDIV     r3,r0,r5
00009e  f88d300c          STRB     r3,[sp,#0xc]
;;;1211   modbus_registers[13]=(char)((time_proc_remain/60)%256);
0000a2  f88d100d          STRB     r1,[sp,#0xd]
;;;1212   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
0000a6  fb90f1f6          SDIV     r1,r0,r6
;;;1213   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
0000aa  fb90f0f8          SDIV     r0,r0,r8
0000ae  f88d100e          STRB     r1,[sp,#0xe]          ;1212
0000b2  f88d000f          STRB     r0,[sp,#0xf]
;;;1214   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
0000b6  4860              LDR      r0,|L2.568|
0000b8  f9b00000          LDRSH    r0,[r0,#0]  ; I_ug
0000bc  17c1              ASRS     r1,r0,#31
0000be  eb006111          ADD      r1,r0,r1,LSR #24
0000c2  120b              ASRS     r3,r1,#8
0000c4  f88d3010          STRB     r3,[sp,#0x10]
;;;1215   modbus_registers[17]=(char)(I_ug%256);
0000c8  f88d0011          STRB     r0,[sp,#0x11]
;;;1216   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
0000cc  485b              LDR      r0,|L2.572|
0000ce  f9b00000          LDRSH    r0,[r0,#0]  ; U_up
0000d2  17c1              ASRS     r1,r0,#31
0000d4  eb006111          ADD      r1,r0,r1,LSR #24
0000d8  120b              ASRS     r3,r1,#8
0000da  f88d3012          STRB     r3,[sp,#0x12]
;;;1217   modbus_registers[19]=(char)(U_up%256);
0000de  f88d0013          STRB     r0,[sp,#0x13]
;;;1218   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
0000e2  4857              LDR      r0,|L2.576|
0000e4  f9b00000          LDRSH    r0,[r0,#0]  ; U_maxg
0000e8  17c1              ASRS     r1,r0,#31
0000ea  eb006111          ADD      r1,r0,r1,LSR #24
0000ee  120b              ASRS     r3,r1,#8
0000f0  f88d3014          STRB     r3,[sp,#0x14]
;;;1219   modbus_registers[21]=(char)(U_maxg%256);
0000f4  f88d0015          STRB     r0,[sp,#0x15]
;;;1220   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
0000f8  4852              LDR      r0,|L2.580|
0000fa  f9b00000          LDRSH    r0,[r0,#0]  ; I_maxp
0000fe  17c1              ASRS     r1,r0,#31
000100  eb006111          ADD      r1,r0,r1,LSR #24
000104  120b              ASRS     r3,r1,#8
000106  f88d3016          STRB     r3,[sp,#0x16]
;;;1221   modbus_registers[23]=(char)(I_maxp%256);
00010a  f88d0017          STRB     r0,[sp,#0x17]
;;;1222   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
00010e  484e              LDR      r0,|L2.584|
000110  6800              LDR      r0,[r0,#0]  ; T_PROC_GS
000112  fb90f1f4          SDIV     r1,r0,r4
000116  fb040311          MLS      r3,r4,r1,r0
00011a  17df              ASRS     r7,r3,#31
00011c  eb036717          ADD      r7,r3,r7,LSR #24
000120  ea4f2c27          ASR      r12,r7,#8
000124  f88dc018          STRB     r12,[sp,#0x18]
;;;1223   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
000128  f88d3019          STRB     r3,[sp,#0x19]
;;;1224   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
00012c  fb90f3f5          SDIV     r3,r0,r5
000130  f88d301a          STRB     r3,[sp,#0x1a]
;;;1225   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
000134  f88d101b          STRB     r1,[sp,#0x1b]
;;;1226   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
000138  fb90f1f6          SDIV     r1,r0,r6
;;;1227   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
00013c  fb90f0f8          SDIV     r0,r0,r8
000140  f88d101c          STRB     r1,[sp,#0x1c]         ;1226
000144  f88d001d          STRB     r0,[sp,#0x1d]
;;;1228   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
000148  4840              LDR      r0,|L2.588|
00014a  6800              LDR      r0,[r0,#0]  ; T_PROC_PS
00014c  fb90f1f4          SDIV     r1,r0,r4
000150  fb040311          MLS      r3,r4,r1,r0
000154  17dc              ASRS     r4,r3,#31
000156  eb036414          ADD      r4,r3,r4,LSR #24
00015a  1227              ASRS     r7,r4,#8
00015c  f88d701e          STRB     r7,[sp,#0x1e]
;;;1229   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
000160  f88d301f          STRB     r3,[sp,#0x1f]
;;;1230   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
000164  fb90f3f5          SDIV     r3,r0,r5
000168  f88d3020          STRB     r3,[sp,#0x20]
;;;1231   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
00016c  f88d1021          STRB     r1,[sp,#0x21]
;;;1232   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
000170  fb90f1f6          SDIV     r1,r0,r6
;;;1233   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
000174  fb90f0f8          SDIV     r0,r0,r8
000178  f88d1022          STRB     r1,[sp,#0x22]         ;1232
00017c  f88d0023          STRB     r0,[sp,#0x23]
;;;1234   modbus_registers[36]=0;								//Πεγ19
000180  2000              MOVS     r0,#0
;;;1235   modbus_registers[37]=0;
;;;1236   if(work_stat==wsPS)modbus_registers[37]=1;
000182  4933              LDR      r1,|L2.592|
000184  f88d0024          STRB     r0,[sp,#0x24]         ;1234
000188  f88d0025          STRB     r0,[sp,#0x25]         ;1235
00018c  780b              LDRB     r3,[r1,#0]  ; work_stat
00018e  2101              MOVS     r1,#1
000190  2b02              CMP      r3,#2
000192  d101              BNE      |L2.408|
000194  f88d1025          STRB     r1,[sp,#0x25]
                  |L2.408|
;;;1237   modbus_registers[38]=0;								//Πεγ20
000198  f88d0026          STRB     r0,[sp,#0x26]
;;;1238   modbus_registers[39]=0;
00019c  f88d0027          STRB     r0,[sp,#0x27]
;;;1239   if(work_stat==wsGS)modbus_registers[39]=1;
0001a0  2b01              CMP      r3,#1
0001a2  d101              BNE      |L2.424|
0001a4  f88d1027          STRB     r1,[sp,#0x27]
                  |L2.424|
;;;1240   modbus_registers[40]=0;								//Πεγ21
;;;1241   modbus_registers[41]=0;
;;;1242   if(REV_STAT==rsREW)modbus_registers[41]=1;
0001a8  4b2a              LDR      r3,|L2.596|
0001aa  f88d0028          STRB     r0,[sp,#0x28]         ;1240
0001ae  f88d0029          STRB     r0,[sp,#0x29]         ;1241
0001b2  781b              LDRB     r3,[r3,#0]  ; REV_STAT
0001b4  b90b              CBNZ     r3,|L2.442|
0001b6  f88d1029          STRB     r1,[sp,#0x29]
                  |L2.442|
;;;1243   modbus_registers[42]=0;								//Πεγ22
0001ba  f88d002a          STRB     r0,[sp,#0x2a]
;;;1244   modbus_registers[43]=0;
0001be  f88d002b          STRB     r0,[sp,#0x2b]
;;;1245   if(AVT_REV_IS_ON)modbus_registers[42]=1;
0001c2  4825              LDR      r0,|L2.600|
0001c4  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
0001c6  b108              CBZ      r0,|L2.460|
0001c8  f88d102a          STRB     r1,[sp,#0x2a]
                  |L2.460|
;;;1246   
;;;1247   modbus_tx_buff[0]=adr;
0001cc  f88d9078          STRB     r9,[sp,#0x78]
;;;1248   modbus_tx_buff[1]=func;
0001d0  f88da079          STRB     r10,[sp,#0x79]
;;;1249   modbus_tx_buff[2]=(char)(reg_adr/256);
0001d4  0a10              LSRS     r0,r2,#8
0001d6  f88d007a          STRB     r0,[sp,#0x7a]
;;;1250   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1251   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1252   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1253   /*
;;;1254   modbus_registers[0]=0x10;
;;;1255   modbus_registers[1]=0x11;
;;;1256   modbus_registers[2]=0x12;
;;;1257   modbus_registers[3]=0x13;
;;;1258   modbus_registers[4]=0x14;
;;;1259   modbus_registers[5]=0x15;
;;;1260   */
;;;1261   
;;;1262   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
0001da  4668              MOV      r0,sp
0001dc  eb000042          ADD      r0,r0,r2,LSL #1
0001e0  f88d207b          STRB     r2,[sp,#0x7b]         ;1250
0001e4  f8300c02          LDRH     r0,[r0,#-2]
0001e8  f8ad007c          STRH     r0,[sp,#0x7c]
;;;1263   
;;;1264   crc_temp=CRC16_2(modbus_tx_buff,6);
0001ec  2106              MOVS     r1,#6
0001ee  a81e              ADD      r0,sp,#0x78
0001f0  f7fffffe          BL       CRC16_2
;;;1265   
;;;1266   modbus_tx_buff[6]=crc_temp%256;
0001f4  f88d007e          STRB     r0,[sp,#0x7e]
;;;1267   modbus_tx_buff[7]=crc_temp/256;
0001f8  0a00              LSRS     r0,r0,#8
0001fa  f88d007f          STRB     r0,[sp,#0x7f]
;;;1268   
;;;1269   for (i=0;i<8;i++)
0001fe  2400              MOVS     r4,#0
000200  ad1e              ADD      r5,sp,#0x78           ;1194
                  |L2.514|
;;;1270   	{
;;;1271   	putchar0(modbus_tx_buff[i]);
000202  5d28              LDRB     r0,[r5,r4]
000204  f7fffffe          BL       putchar0
000208  1c64              ADDS     r4,r4,#1              ;1269
00020a  b2e4              UXTB     r4,r4                 ;1269
00020c  2c08              CMP      r4,#8                 ;1269
00020e  d3f8              BCC      |L2.514|
;;;1272   	}
;;;1273   for (i=0;i<8;i++)
000210  2400              MOVS     r4,#0
                  |L2.530|
;;;1274   	{
;;;1275   	putchar_sc16is700(modbus_tx_buff[i]);
000212  5d28              LDRB     r0,[r5,r4]
000214  f7fffffe          BL       putchar_sc16is700
000218  1c64              ADDS     r4,r4,#1              ;1273
00021a  b2e4              UXTB     r4,r4                 ;1273
00021c  2c08              CMP      r4,#8                 ;1273
00021e  d3f8              BCC      |L2.530|
;;;1276   	}
;;;1277   }
000220  b038              ADD      sp,sp,#0xe0
000222  e8bd87f0          POP      {r4-r10,pc}
;;;1278   
                          ENDP

000226  0000              DCW      0x0000
                  |L2.552|
                          DCD      load_U
                  |L2.556|
                          DCD      load_I
                  |L2.560|
                          DCD      time_proc
                  |L2.564|
                          DCD      time_proc_remain
                  |L2.568|
                          DCD      I_ug
                  |L2.572|
                          DCD      U_up
                  |L2.576|
                          DCD      U_maxg
                  |L2.580|
                          DCD      I_maxp
                  |L2.584|
                          DCD      T_PROC_GS
                  |L2.588|
                          DCD      T_PROC_PS
                  |L2.592|
                          DCD      work_stat
                  |L2.596|
                          DCD      REV_STAT
                  |L2.600|
                          DCD      AVT_REV_IS_ON

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  modbus_buf
                          %        20

                          AREA ||area_number.5||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.5||, ||.bss||
                  modbus_rx_buffer
                          %        30
                  modbus_an_buffer
                          %        30

                          AREA ||.data||, DATA, ALIGN=1

                  modbus_self_cmnd_cnt
000000  21                DCB      0x21
                  bMODBUS_TIMEOUT
000001  00                DCB      0x00
                  modbus_rx_buffer_ptr
000002  00                DCB      0x00
                  modbus_rx_counter
000003  00                DCB      0x00
                  modbus_cmnd_cnt
000004  00                DCB      0x00
                  modbus_cmnd
000005  00                DCB      0x00
                  modbus_plazma
000006  0000              DCB      0x00,0x00
                  modbus_plazma1
000008  0000              DCB      0x00,0x00
                  modbus_plazma2
00000a  0000              DCB      0x00,0x00
                  modbus_plazma3
00000c  0000              DCB      0x00,0x00

                          AREA ||area_number.8||, DATA, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.data||
                  modbus_crc16
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.9||, DATA, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.data||
                  modbus_timeout_cnt
000000  00                DCB      0x00

                          AREA ||area_number.10||, DATA, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.data||
                  modbusTimeoutInMills
000000  0000              DCB      0x00,0x00
