; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\modbus.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\modbus.d --feedback=.\EXE\UKU2071x_GALV_IBv2_WG12232L3.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 -DWG12232L3 --omf_browse=.\EXE\modbus.crf modbus.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CRC16_2 PROC
;;;38     //-----------------------------------------------
;;;39     unsigned short CRC16_2(char* buf, short len)
000000  b570              PUSH     {r4-r6,lr}
;;;40     {
000002  4604              MOV      r4,r0
;;;41     unsigned short crc = 0xFFFF;
000004  f64f70ff          MOV      r0,#0xffff
;;;42     short pos;
;;;43     short i;
;;;44     
;;;45     for (pos = 0; pos < len; pos++)
000008  2200              MOVS     r2,#0
;;;46       	{
;;;47         	crc ^= (unsigned short)buf[pos];          // XOR byte into least sig. byte of crc
;;;48     
;;;49         	for ( i = 8; i != 0; i--) 
;;;50     		{    // Loop over each bit
;;;51           	if ((crc & 0x0001) != 0) 
;;;52     			{      // If the LSB is set
;;;53             		crc >>= 1;                    // Shift right and XOR 0xA001
;;;54             		crc ^= 0xA001;
00000a  f24a0501          MOV      r5,#0xa001
00000e  e00d              B        |L1.44|
                  |L1.16|
000010  5ca3              LDRB     r3,[r4,r2]            ;47
000012  4058              EORS     r0,r0,r3              ;47
000014  2308              MOVS     r3,#8                 ;49
                  |L1.22|
000016  07c6              LSLS     r6,r0,#31             ;51
;;;55           		}
;;;56           	else  crc >>= 1;                    // Just shift right
000018  ea4f0050          LSR      r0,r0,#1
00001c  d000              BEQ      |L1.32|
00001e  4068              EORS     r0,r0,r5              ;54
                  |L1.32|
000020  1e5b              SUBS     r3,r3,#1              ;49
000022  b21b              SXTH     r3,r3                 ;49
000024  2b00              CMP      r3,#0                 ;49
000026  d1f6              BNE      |L1.22|
000028  1c52              ADDS     r2,r2,#1              ;45
00002a  b212              SXTH     r2,r2                 ;45
                  |L1.44|
00002c  428a              CMP      r2,r1                 ;45
00002e  dbef              BLT      |L1.16|
;;;57         		}
;;;58       	}
;;;59       // Note, this number has low and high bytes swapped, so use it accordingly (or swap bytes)
;;;60     return crc;
;;;61     }
000030  bd70              POP      {r4-r6,pc}
;;;62     
                          ENDP

                  modbus_hold_register_answer_transmit PROC
;;;1892   //-----------------------------------------------
;;;1893   void modbus_hold_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
;;;1894   {
;;;1895   char modbus_registers[120];
;;;1896   char modbus_tx_buff[100];
;;;1897   unsigned short crc_temp;
;;;1898   char i;
;;;1899   
;;;1900   I_ug=50;
;;;1901   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
;;;1902   modbus_registers[1]=(char)(I_ug%256);
;;;1903   U_up=51;
;;;1904   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
;;;1905   modbus_registers[3]=(char)(U_up%256);
;;;1906   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
000032  b530              PUSH     {r4,r5,lr}
000034  b099              SUB      sp,sp,#0x64
000036  f88d0000          STRB     r0,[sp,#0]
00003a  f88d1001          STRB     r1,[sp,#1]
00003e  0a10              LSRS     r0,r2,#8
000040  f88d0002          STRB     r0,[sp,#2]
;;;1907   modbus_registers[5]=(char)(U_maxg%256);
000044  0a18              LSRS     r0,r3,#8
000046  f88d0004          STRB     r0,[sp,#4]
;;;1908   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
00004a  f88d2003          STRB     r2,[sp,#3]
00004e  f88d3005          STRB     r3,[sp,#5]
000052  2106              MOVS     r1,#6
000054  4668              MOV      r0,sp
000056  f7fffffe          BL       CRC16_2
;;;1909   modbus_registers[7]=(char)(I_maxp%256);
00005a  f88d0006          STRB     r0,[sp,#6]
;;;1910   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
00005e  0a00              LSRS     r0,r0,#8
000060  f88d0007          STRB     r0,[sp,#7]
000064  2400              MOVS     r4,#0
000066  466d              MOV      r5,sp
                  |L1.104|
000068  5d28              LDRB     r0,[r5,r4]
00006a  f7fffffe          BL       putchar0
00006e  1c64              ADDS     r4,r4,#1
000070  b2e4              UXTB     r4,r4
000072  2c08              CMP      r4,#8
000074  d3f8              BCC      |L1.104|
000076  2400              MOVS     r4,#0
                  |L1.120|
;;;1911   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
000078  5d28              LDRB     r0,[r5,r4]
00007a  f7fffffe          BL       putchar_sc16is700
;;;1912   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
00007e  1c64              ADDS     r4,r4,#1
000080  b2e4              UXTB     r4,r4
000082  2c08              CMP      r4,#8
000084  d3f8              BCC      |L1.120|
000086  b019              ADD      sp,sp,#0x64
000088  bd30              POP      {r4,r5,pc}
;;;1913   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1914   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
;;;1915   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
;;;1916   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
;;;1917   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
;;;1918   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
;;;1919   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
;;;1920   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
;;;1921   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
;;;1922   modbus_registers[20]=0;								//Πεγ60
;;;1923   modbus_registers[21]=0;
;;;1924   if(work_stat==wsPS)modbus_registers[21]=1;
;;;1925   
;;;1926   modbus_registers[22]=0;								//Πεγ61
;;;1927   modbus_registers[23]=0;
;;;1928   if(work_stat==wsGS)modbus_registers[23]=1;
;;;1929   
;;;1930   modbus_registers[24]=0;								//Πεγ62
;;;1931   modbus_registers[25]=0;
;;;1932   if(REV_STAT==rsREW)modbus_registers[25]=1;
;;;1933   
;;;1934   modbus_registers[26]=0;								//Πεγ63
;;;1935   modbus_registers[27]=0;
;;;1936   if(AVT_REV_IS_ON)modbus_registers[27]=1;
;;;1937   
;;;1938   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
;;;1939   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
;;;1940   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
;;;1941   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
;;;1942   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
;;;1943   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
;;;1944   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
;;;1945   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
;;;1946   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
;;;1947   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
;;;1948   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
;;;1949   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
;;;1950   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
;;;1951   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
;;;1952   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
;;;1953   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
;;;1954   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
;;;1955   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
;;;1956   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
;;;1957   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
;;;1958   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
;;;1959   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
;;;1960   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
;;;1961   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
;;;1962   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
;;;1963   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
;;;1964   modbus_registers[58]=(char)((REV_IS_ON)/256);				//Πεγ79	
;;;1965   modbus_registers[59]=(char)((REV_IS_ON)%256);
;;;1966   proc_phase=7;
;;;1967   modbus_registers[60]=(char)((proc_phase)/256);				//Πεγ80	
;;;1968   modbus_registers[61]=(char)((proc_phase)%256);
;;;1969   
;;;1970   
;;;1971   modbus_tx_buff[0]=adr;
;;;1972   modbus_tx_buff[1]=func;
;;;1973   modbus_tx_buff[2]=(char)(reg_adr/256);
;;;1974   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1975   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1976   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1977   
;;;1978   
;;;1979   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
;;;1980   
;;;1981   crc_temp=CRC16_2(modbus_tx_buff,6);
;;;1982   
;;;1983   modbus_tx_buff[6]=crc_temp%256;
;;;1984   modbus_tx_buff[7]=crc_temp/256;
;;;1985   
;;;1986   for (i=0;i<8;i++)
;;;1987   	{
;;;1988   	putchar0(modbus_tx_buff[i]);
;;;1989   	}
;;;1990   for (i=0;i<8;i++)
;;;1991   	{
;;;1992   	putchar_sc16is700(modbus_tx_buff[i]);
;;;1993   	}
;;;1994   }	
;;;1995   
                          ENDP

                  modbus_input_registers_transmit PROC
;;;1892   //-----------------------------------------------
;;;1893   void modbus_hold_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
;;;1894   {
;;;1895   char modbus_registers[120];
;;;1896   char modbus_tx_buff[100];
;;;1897   unsigned short crc_temp;
;;;1898   char i;
;;;1899   
;;;1900   I_ug=50;
;;;1901   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
;;;1902   modbus_registers[1]=(char)(I_ug%256);
;;;1903   U_up=51;
;;;1904   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
;;;1905   modbus_registers[3]=(char)(U_up%256);
;;;1906   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
;;;1907   modbus_registers[5]=(char)(U_maxg%256);
;;;1908   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1909   modbus_registers[7]=(char)(I_maxp%256);
;;;1910   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1911   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1912   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
00008a  e92d4ff0          PUSH     {r4-r11,lr}
00008e  b0b3              SUB      sp,sp,#0xcc
;;;1913   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
000090  4683              MOV      r11,r0
000092  468e              MOV      lr,r1
;;;1914   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
000094  4692              MOV      r10,r2
000096  461c              MOV      r4,r3
000098  48ff              LDR      r0,|L1.1176|
00009a  f8ddc0f0          LDR      r12,[sp,#0xf0]
;;;1915   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00009e  f44f2961          MOV      r9,#0xe1000
0000a2  f9b01000          LDRSH    r1,[r0,#0]  ; load_U
;;;1916   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0000a6  f44f6861          MOV      r8,#0xe10
;;;1917   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
;;;1918   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
;;;1919   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
;;;1920   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
;;;1921   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
;;;1922   modbus_registers[20]=0;								//Πεγ60
0000aa  17c8              ASRS     r0,r1,#31
0000ac  eb016210          ADD      r2,r1,r0,LSR #24      ;1916
0000b0  48fa              LDR      r0,|L1.1180|
0000b2  1213              ASRS     r3,r2,#8              ;1916
0000b4  7003              STRB     r3,[r0,#0]            ;1916
0000b6  7041              STRB     r1,[r0,#1]            ;1916
0000b8  49f9              LDR      r1,|L1.1184|
0000ba  f9b11000          LDRSH    r1,[r1,#0]            ;1916  ; load_I
0000be  17ca              ASRS     r2,r1,#31             ;1916
0000c0  eb016212          ADD      r2,r1,r2,LSR #24      ;1917
0000c4  1213              ASRS     r3,r2,#8              ;1918
0000c6  7083              STRB     r3,[r0,#2]            ;1918
0000c8  70c1              STRB     r1,[r0,#3]            ;1918
0000ca  49f6              LDR      r1,|L1.1188|
0000cc  223c              MOVS     r2,#0x3c              ;1918
0000ce  680b              LDR      r3,[r1,#0]            ;1918  ; time_proc
0000d0  fb93f5f2          SDIV     r5,r3,r2              ;1918
0000d4  fb023115          MLS      r1,r2,r5,r3           ;1918
0000d8  17ce              ASRS     r6,r1,#31             ;1919
0000da  eb016716          ADD      r7,r1,r6,LSR #24      ;1919
0000de  123e              ASRS     r6,r7,#8              ;1920
0000e0  7106              STRB     r6,[r0,#4]            ;1920
0000e2  7141              STRB     r1,[r0,#5]            ;1920
0000e4  fb95f1f2          SDIV     r1,r5,r2              ;1921
0000e8  fb025111          MLS      r1,r2,r1,r5           ;1921
;;;1923   modbus_registers[21]=0;
0000ec  17cd              ASRS     r5,r1,#31
0000ee  eb016515          ADD      r5,r1,r5,LSR #24
;;;1924   if(work_stat==wsPS)modbus_registers[21]=1;
0000f2  122e              ASRS     r6,r5,#8
0000f4  7186              STRB     r6,[r0,#6]
0000f6  71c1              STRB     r1,[r0,#7]
0000f8  fb93f1f9          SDIV     r1,r3,r9
0000fc  7201              STRB     r1,[r0,#8]
;;;1925   
;;;1926   modbus_registers[22]=0;								//Πεγ61
0000fe  fb93f1f8          SDIV     r1,r3,r8
;;;1927   modbus_registers[23]=0;
000102  7241              STRB     r1,[r0,#9]
000104  49e8              LDR      r1,|L1.1192|
;;;1928   if(work_stat==wsGS)modbus_registers[23]=1;
000106  680b              LDR      r3,[r1,#0]  ; time_proc_remain
000108  fb93f7f2          SDIV     r7,r3,r2
00010c  fb023117          MLS      r1,r2,r7,r3
;;;1929   
;;;1930   modbus_registers[24]=0;								//Πεγ62
000110  17cd              ASRS     r5,r1,#31
000112  eb016515          ADD      r5,r1,r5,LSR #24
;;;1931   modbus_registers[25]=0;
000116  122e              ASRS     r6,r5,#8
;;;1932   if(REV_STAT==rsREW)modbus_registers[25]=1;
000118  7286              STRB     r6,[r0,#0xa]
00011a  72c1              STRB     r1,[r0,#0xb]
00011c  fb97f1f2          SDIV     r1,r7,r2
;;;1933   
;;;1934   modbus_registers[26]=0;								//Πεγ63
;;;1935   modbus_registers[27]=0;
;;;1936   if(AVT_REV_IS_ON)modbus_registers[27]=1;
000120  fb027111          MLS      r1,r2,r1,r7
000124  17ca              ASRS     r2,r1,#31             ;1934
000126  eb016212          ADD      r2,r1,r2,LSR #24      ;1935
00012a  1215              ASRS     r5,r2,#8
00012c  7305              STRB     r5,[r0,#0xc]
00012e  7341              STRB     r1,[r0,#0xd]
000130  fb93f1f9          SDIV     r1,r3,r9
;;;1937   
;;;1938   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000134  7381              STRB     r1,[r0,#0xe]
000136  fb93f1f8          SDIV     r1,r3,r8
00013a  73c1              STRB     r1,[r0,#0xf]
;;;1939   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
00013c  49db              LDR      r1,|L1.1196|
00013e  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_COUNTER
;;;1940   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
000142  17ca              ASRS     r2,r1,#31
000144  eb016212          ADD      r2,r1,r2,LSR #24
000148  1213              ASRS     r3,r2,#8
;;;1941   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00014a  7403              STRB     r3,[r0,#0x10]
00014c  7441              STRB     r1,[r0,#0x11]
;;;1942   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00014e  49d8              LDR      r1,|L1.1200|
000150  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_SEC
000154  17ca              ASRS     r2,r1,#31
000156  eb016212          ADD      r2,r1,r2,LSR #24
00015a  1213              ASRS     r3,r2,#8
00015c  7483              STRB     r3,[r0,#0x12]
00015e  74c1              STRB     r1,[r0,#0x13]
;;;1943   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
000160  49d4              LDR      r1,|L1.1204|
000162  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_MIN
;;;1944   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
000166  17ca              ASRS     r2,r1,#31
000168  eb016212          ADD      r2,r1,r2,LSR #24
00016c  1213              ASRS     r3,r2,#8
00016e  7503              STRB     r3,[r0,#0x14]
000170  7541              STRB     r1,[r0,#0x15]
000172  49d1              LDR      r1,|L1.1208|
000174  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_HOUR
;;;1945   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
000178  17ca              ASRS     r2,r1,#31
;;;1946   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
00017a  eb016212          ADD      r2,r1,r2,LSR #24
00017e  1213              ASRS     r3,r2,#8
000180  7583              STRB     r3,[r0,#0x16]
000182  75c1              STRB     r1,[r0,#0x17]
000184  2200              MOVS     r2,#0
000186  49cd              LDR      r1,|L1.1212|
000188  7602              STRB     r2,[r0,#0x18]
00018a  7642              STRB     r2,[r0,#0x19]
;;;1947   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
00018c  780b              LDRB     r3,[r1,#0]  ; bVOLT_IS_NOT_DOWN
00018e  2101              MOVS     r1,#1
;;;1948   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
000190  b103              CBZ      r3,|L1.404|
000192  7641              STRB     r1,[r0,#0x19]
                  |L1.404|
000194  4bca              LDR      r3,|L1.1216|
000196  7682              STRB     r2,[r0,#0x1a]
000198  76c2              STRB     r2,[r0,#0x1b]
00019a  781b              LDRB     r3,[r3,#0]  ; bVOLT_IS_NOT_UP
00019c  b103              CBZ      r3,|L1.416|
00019e  76c1              STRB     r1,[r0,#0x1b]
                  |L1.416|
0001a0  49c8              LDR      r1,|L1.1220|
;;;1949   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
0001a2  698b              LDR      r3,[r1,#0x18]  ; bps
0001a4  121d              ASRS     r5,r3,#8
;;;1950   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
0001a6  f8005f2a          STRB     r5,[r0,#0x2a]!
0001aa  7043              STRB     r3,[r0,#1]
0001ac  6a0b              LDR      r3,[r1,#0x20]  ; bps
0001ae  121d              ASRS     r5,r3,#8
0001b0  7085              STRB     r5,[r0,#2]
0001b2  70c3              STRB     r3,[r0,#3]
0001b4  6a4b              LDR      r3,[r1,#0x24]  ; bps
0001b6  121d              ASRS     r5,r3,#8
;;;1951   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
0001b8  7105              STRB     r5,[r0,#4]
0001ba  7143              STRB     r3,[r0,#5]
;;;1952   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
0001bc  7182              STRB     r2,[r0,#6]
0001be  784b              LDRB     r3,[r1,#1]  ; bps
0001c0  71c3              STRB     r3,[r0,#7]
0001c2  6f8b              LDR      r3,[r1,#0x78]  ; bps
0001c4  121d              ASRS     r5,r3,#8
0001c6  7205              STRB     r5,[r0,#8]
0001c8  7243              STRB     r3,[r0,#9]
0001ca  f8d13080          LDR      r3,[r1,#0x80]  ; bps
;;;1953   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
0001ce  121d              ASRS     r5,r3,#8
0001d0  7285              STRB     r5,[r0,#0xa]
;;;1954   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
0001d2  72c3              STRB     r3,[r0,#0xb]
0001d4  f8d13084          LDR      r3,[r1,#0x84]  ; bps
0001d8  121d              ASRS     r5,r3,#8
0001da  7305              STRB     r5,[r0,#0xc]
0001dc  7343              STRB     r3,[r0,#0xd]
0001de  7382              STRB     r2,[r0,#0xe]
0001e0  f8913061          LDRB     r3,[r1,#0x61]  ; bps
;;;1955   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
0001e4  73c3              STRB     r3,[r0,#0xf]
0001e6  f8513fd8          LDR      r3,[r1,#0xd8]!  ; bps
;;;1956   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
0001ea  121d              ASRS     r5,r3,#8
0001ec  7405              STRB     r5,[r0,#0x10]
0001ee  7443              STRB     r3,[r0,#0x11]
0001f0  688b              LDR      r3,[r1,#8]  ; bps
0001f2  121d              ASRS     r5,r3,#8
0001f4  7485              STRB     r5,[r0,#0x12]
0001f6  74c3              STRB     r3,[r0,#0x13]
0001f8  68cb              LDR      r3,[r1,#0xc]  ; bps
;;;1957   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
0001fa  f1010150          ADD      r1,r1,#0x50
;;;1958   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
0001fe  121d              ASRS     r5,r3,#8
000200  7505              STRB     r5,[r0,#0x14]
000202  7543              STRB     r3,[r0,#0x15]
000204  7582              STRB     r2,[r0,#0x16]
000206  f8113c67          LDRB     r3,[r1,#-0x67]  ; bps
00020a  75c3              STRB     r3,[r0,#0x17]
00020c  690b              LDR      r3,[r1,#0x10]  ; bps
00020e  ea4f2523          ASR      r5,r3,#8
;;;1959   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
000212  7605              STRB     r5,[r0,#0x18]
;;;1960   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
000214  7643              STRB     r3,[r0,#0x19]
000216  698b              LDR      r3,[r1,#0x18]  ; bps
000218  ea4f2523          ASR      r5,r3,#8
00021c  7685              STRB     r5,[r0,#0x1a]
00021e  76c3              STRB     r3,[r0,#0x1b]
000220  69cb              LDR      r3,[r1,#0x1c]  ; bps
000222  ea4f2523          ASR      r5,r3,#8
;;;1961   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
000226  7705              STRB     r5,[r0,#0x1c]
000228  7743              STRB     r3,[r0,#0x1d]
;;;1962   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
00022a  7782              STRB     r2,[r0,#0x1e]
00022c  f8113c07          LDRB     r3,[r1,#-7]  ; bps
000230  77c3              STRB     r3,[r0,#0x1f]
000232  6f0b              LDR      r3,[r1,#0x70]  ; bps
000234  ea4f2523          ASR      r5,r3,#8
000238  f8805020          STRB     r5,[r0,#0x20]
;;;1963   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
00023c  f8803021          STRB     r3,[r0,#0x21]
;;;1964   modbus_registers[58]=(char)((REV_IS_ON)/256);				//Πεγ79	
000240  6f8b              LDR      r3,[r1,#0x78]  ; bps
000242  ea4f2523          ASR      r5,r3,#8
000246  f8805022          STRB     r5,[r0,#0x22]
00024a  f8803023          STRB     r3,[r0,#0x23]
00024e  6fcb              LDR      r3,[r1,#0x7c]  ; bps
000250  ea4f2523          ASR      r5,r3,#8
;;;1965   modbus_registers[59]=(char)((REV_IS_ON)%256);
000254  f8805024          STRB     r5,[r0,#0x24]
;;;1966   proc_phase=7;
000258  f8803025          STRB     r3,[r0,#0x25]
;;;1967   modbus_registers[60]=(char)((proc_phase)/256);				//Πεγ80	
00025c  f8802026          STRB     r2,[r0,#0x26]
;;;1968   modbus_registers[61]=(char)((proc_phase)%256);
000260  f8913059          LDRB     r3,[r1,#0x59]  ; bps
;;;1969   
;;;1970   
;;;1971   modbus_tx_buff[0]=adr;
000264  f8803027          STRB     r3,[r0,#0x27]
;;;1972   modbus_tx_buff[1]=func;
000268  f8513fd0          LDR      r3,[r1,#0xd0]!  ; bps
;;;1973   modbus_tx_buff[2]=(char)(reg_adr/256);
00026c  ea4f2523          ASR      r5,r3,#8
000270  f8805028          STRB     r5,[r0,#0x28]
;;;1974   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1975   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1976   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1977   
;;;1978   
;;;1979   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
000274  f8803029          STRB     r3,[r0,#0x29]
000278  688b              LDR      r3,[r1,#8]            ;1974  ; bps
00027a  ea4f2523          ASR      r5,r3,#8              ;1974
00027e  f880502a          STRB     r5,[r0,#0x2a]
000282  f880302b          STRB     r3,[r0,#0x2b]
;;;1980   
;;;1981   crc_temp=CRC16_2(modbus_tx_buff,6);
000286  68cb              LDR      r3,[r1,#0xc]  ; bps
000288  f101012c          ADD      r1,r1,#0x2c
;;;1982   
;;;1983   modbus_tx_buff[6]=crc_temp%256;
00028c  ea4f2523          ASR      r5,r3,#8
;;;1984   modbus_tx_buff[7]=crc_temp/256;
000290  f880502c          STRB     r5,[r0,#0x2c]
000294  f880302d          STRB     r3,[r0,#0x2d]
000298  f880202e          STRB     r2,[r0,#0x2e]         ;1896
;;;1985   
;;;1986   for (i=0;i<8;i++)
;;;1987   	{
;;;1988   	putchar0(modbus_tx_buff[i]);
00029c  f8113c43          LDRB     r3,[r1,#-0x43]  ; bps
0002a0  f880302f          STRB     r3,[r0,#0x2f]         ;1986
0002a4  6b4b              LDR      r3,[r1,#0x34]         ;1986  ; bps
0002a6  ea4f2523          ASR      r5,r3,#8              ;1986
;;;1989   	}
;;;1990   for (i=0;i<8;i++)
;;;1991   	{
;;;1992   	putchar_sc16is700(modbus_tx_buff[i]);
0002aa  f8805030          STRB     r5,[r0,#0x30]
0002ae  f8803031          STRB     r3,[r0,#0x31]
0002b2  6bcb              LDR      r3,[r1,#0x3c]         ;1990  ; bps
0002b4  ea4f2523          ASR      r5,r3,#8              ;1990
;;;1993   	}
;;;1994   }	
0002b8  f8805032          STRB     r5,[r0,#0x32]
0002bc  f8803033          STRB     r3,[r0,#0x33]
0002c0  6c0b              LDR      r3,[r1,#0x40]  ; bps
0002c2  ea4f2523          ASR      r5,r3,#8
0002c6  f8805034          STRB     r5,[r0,#0x34]
0002ca  f8803035          STRB     r3,[r0,#0x35]
0002ce  f8802036          STRB     r2,[r0,#0x36]
0002d2  7f4b              LDRB     r3,[r1,#0x1d]  ; bps
0002d4  f8803037          STRB     r3,[r0,#0x37]
0002d8  f8513f94          LDR      r3,[r1,#0x94]!  ; bps
0002dc  ea4f2523          ASR      r5,r3,#8
0002e0  f8805038          STRB     r5,[r0,#0x38]
0002e4  f8803039          STRB     r3,[r0,#0x39]
0002e8  688b              LDR      r3,[r1,#8]  ; bps
0002ea  ea4f2523          ASR      r5,r3,#8
0002ee  f880503a          STRB     r5,[r0,#0x3a]
0002f2  f880303b          STRB     r3,[r0,#0x3b]
0002f6  68cb              LDR      r3,[r1,#0xc]  ; bps
0002f8  f1a10194          SUB      r1,r1,#0x94
0002fc  ea4f2523          ASR      r5,r3,#8
000300  f880503c          STRB     r5,[r0,#0x3c]
000304  f880303d          STRB     r3,[r0,#0x3d]
000308  f880203e          STRB     r2,[r0,#0x3e]
00030c  f891307d          LDRB     r3,[r1,#0x7d]  ; bps
000310  f880303f          STRB     r3,[r0,#0x3f]
000314  f8513ff4          LDR      r3,[r1,#0xf4]!  ; bps
000318  ea4f2523          ASR      r5,r3,#8
00031c  f8805040          STRB     r5,[r0,#0x40]
000320  f8803041          STRB     r3,[r0,#0x41]
000324  688b              LDR      r3,[r1,#8]  ; bps
000326  ea4f2523          ASR      r5,r3,#8
00032a  f8805042          STRB     r5,[r0,#0x42]
00032e  f8803043          STRB     r3,[r0,#0x43]
000332  68cb              LDR      r3,[r1,#0xc]  ; bps
000334  f1a10110          SUB      r1,r1,#0x10
000338  ea4f2523          ASR      r5,r3,#8
00033c  f8805044          STRB     r5,[r0,#0x44]
000340  f8803045          STRB     r3,[r0,#0x45]
000344  f8802046          STRB     r2,[r0,#0x46]
000348  f8113c07          LDRB     r3,[r1,#-7]  ; bps
00034c  f8803047          STRB     r3,[r0,#0x47]
000350  6f0b              LDR      r3,[r1,#0x70]  ; bps
000352  ea4f2523          ASR      r5,r3,#8
000356  f8805048          STRB     r5,[r0,#0x48]
00035a  f8803049          STRB     r3,[r0,#0x49]
00035e  6f8b              LDR      r3,[r1,#0x78]  ; bps
000360  ea4f2523          ASR      r5,r3,#8
000364  f880504a          STRB     r5,[r0,#0x4a]
000368  f8003f4b          STRB     r3,[r0,#0x4b]!
00036c  6fcb              LDR      r3,[r1,#0x7c]  ; bps
00036e  ea4f2523          ASR      r5,r3,#8
000372  7045              STRB     r5,[r0,#1]
000374  7083              STRB     r3,[r0,#2]
000376  f10101c0          ADD      r1,r1,#0xc0
00037a  f8002f03          STRB     r2,[r0,#3]!
00037e  f8113c67          LDRB     r3,[r1,#-0x67]  ; bps
000382  7043              STRB     r3,[r0,#1]
000384  690b              LDR      r3,[r1,#0x10]  ; bps
000386  ea4f2523          ASR      r5,r3,#8
00038a  7085              STRB     r5,[r0,#2]
00038c  70c3              STRB     r3,[r0,#3]
00038e  698b              LDR      r3,[r1,#0x18]  ; bps
000390  ea4f2523          ASR      r5,r3,#8
000394  7105              STRB     r5,[r0,#4]
000396  7143              STRB     r3,[r0,#5]
000398  69cb              LDR      r3,[r1,#0x1c]  ; bps
00039a  ea4f2523          ASR      r5,r3,#8
00039e  7185              STRB     r5,[r0,#6]
0003a0  71c3              STRB     r3,[r0,#7]
0003a2  7202              STRB     r2,[r0,#8]
0003a4  f8113c07          LDRB     r3,[r1,#-7]  ; bps
0003a8  7243              STRB     r3,[r0,#9]
0003aa  6f0b              LDR      r3,[r1,#0x70]  ; bps
0003ac  ea4f2523          ASR      r5,r3,#8
0003b0  7285              STRB     r5,[r0,#0xa]
0003b2  72c3              STRB     r3,[r0,#0xb]
0003b4  6f8b              LDR      r3,[r1,#0x78]  ; bps
0003b6  ea4f2523          ASR      r5,r3,#8
0003ba  7305              STRB     r5,[r0,#0xc]
0003bc  7343              STRB     r3,[r0,#0xd]
0003be  6fcb              LDR      r3,[r1,#0x7c]  ; bps
0003c0  ea4f2523          ASR      r5,r3,#8
0003c4  7385              STRB     r5,[r0,#0xe]
0003c6  73c3              STRB     r3,[r0,#0xf]
0003c8  7402              STRB     r2,[r0,#0x10]
0003ca  f8913059          LDRB     r3,[r1,#0x59]  ; bps
0003ce  7443              STRB     r3,[r0,#0x11]
0003d0  f8513fd0          LDR      r3,[r1,#0xd0]!  ; bps
0003d4  ea4f2523          ASR      r5,r3,#8
0003d8  7485              STRB     r5,[r0,#0x12]
0003da  74c3              STRB     r3,[r0,#0x13]
0003dc  688b              LDR      r3,[r1,#8]  ; bps
0003de  ea4f2523          ASR      r5,r3,#8
0003e2  7505              STRB     r5,[r0,#0x14]
0003e4  7543              STRB     r3,[r0,#0x15]
0003e6  68cb              LDR      r3,[r1,#0xc]  ; bps
0003e8  f101012c          ADD      r1,r1,#0x2c
0003ec  ea4f2523          ASR      r5,r3,#8
0003f0  7585              STRB     r5,[r0,#0x16]
0003f2  75c3              STRB     r3,[r0,#0x17]
0003f4  7602              STRB     r2,[r0,#0x18]
0003f6  f8113c43          LDRB     r3,[r1,#-0x43]  ; bps
0003fa  7643              STRB     r3,[r0,#0x19]
0003fc  6b4b              LDR      r3,[r1,#0x34]  ; bps
0003fe  ea4f2523          ASR      r5,r3,#8
000402  7685              STRB     r5,[r0,#0x1a]
000404  76c3              STRB     r3,[r0,#0x1b]
000406  6bcb              LDR      r3,[r1,#0x3c]  ; bps
000408  ea4f2523          ASR      r5,r3,#8
00040c  7705              STRB     r5,[r0,#0x1c]
00040e  7743              STRB     r3,[r0,#0x1d]
000410  6c0b              LDR      r3,[r1,#0x40]  ; bps
000412  ea4f2523          ASR      r5,r3,#8
000416  7785              STRB     r5,[r0,#0x1e]
000418  77c3              STRB     r3,[r0,#0x1f]
00041a  f8802020          STRB     r2,[r0,#0x20]
00041e  7f4b              LDRB     r3,[r1,#0x1d]  ; bps
000420  f8803021          STRB     r3,[r0,#0x21]
000424  f8513f94          LDR      r3,[r1,#0x94]!  ; bps
000428  ea4f2523          ASR      r5,r3,#8
00042c  f8805022          STRB     r5,[r0,#0x22]
000430  f8803023          STRB     r3,[r0,#0x23]
000434  688b              LDR      r3,[r1,#8]  ; bps
000436  ea4f2523          ASR      r5,r3,#8
00043a  f8805024          STRB     r5,[r0,#0x24]
00043e  f8803025          STRB     r3,[r0,#0x25]
000442  68cb              LDR      r3,[r1,#0xc]  ; bps
000444  f1a10194          SUB      r1,r1,#0x94
000448  ea4f2523          ASR      r5,r3,#8
00044c  f8805026          STRB     r5,[r0,#0x26]
000450  f8803027          STRB     r3,[r0,#0x27]
000454  f8802028          STRB     r2,[r0,#0x28]
000458  f891307d          LDRB     r3,[r1,#0x7d]  ; bps
00045c  f8803029          STRB     r3,[r0,#0x29]
000460  f8513ff4          LDR      r3,[r1,#0xf4]!  ; bps
000464  ea4f2523          ASR      r5,r3,#8
000468  f880502a          STRB     r5,[r0,#0x2a]
00046c  f880302b          STRB     r3,[r0,#0x2b]
000470  688b              LDR      r3,[r1,#8]  ; bps
000472  ea4f2523          ASR      r5,r3,#8
000476  f880502c          STRB     r5,[r0,#0x2c]
00047a  f880302d          STRB     r3,[r0,#0x2d]
00047e  68cb              LDR      r3,[r1,#0xc]  ; bps
000480  f1010150          ADD      r1,r1,#0x50
000484  ea4f2523          ASR      r5,r3,#8
000488  f880502e          STRB     r5,[r0,#0x2e]
00048c  f880302f          STRB     r3,[r0,#0x2f]
000490  f8802030          STRB     r2,[r0,#0x30]
000494  e018              B        |L1.1224|
000496  0000              DCW      0x0000
                  |L1.1176|
                          DCD      load_U
                  |L1.1180|
                          DCD      ||area_number.5||+0x3c
                  |L1.1184|
                          DCD      load_I
                  |L1.1188|
                          DCD      time_proc
                  |L1.1192|
                          DCD      time_proc_remain
                  |L1.1196|
                          DCD      CAP_COUNTER
                  |L1.1200|
                          DCD      CAP_TIME_SEC
                  |L1.1204|
                          DCD      CAP_TIME_MIN
                  |L1.1208|
                          DCD      CAP_TIME_HOUR
                  |L1.1212|
                          DCD      bVOLT_IS_NOT_DOWN
                  |L1.1216|
                          DCD      bVOLT_IS_NOT_UP
                  |L1.1220|
                          DCD      bps
                  |L1.1224|
0004c8  f8113c67          LDRB     r3,[r1,#-0x67]  ; bps
0004cc  f8803031          STRB     r3,[r0,#0x31]
0004d0  690b              LDR      r3,[r1,#0x10]  ; bps
0004d2  4616              MOV      r6,r2
0004d4  ea4f2523          ASR      r5,r3,#8
0004d8  f8805032          STRB     r5,[r0,#0x32]
0004dc  f8803033          STRB     r3,[r0,#0x33]
0004e0  698b              LDR      r3,[r1,#0x18]  ; bps
0004e2  ea4f2523          ASR      r5,r3,#8
0004e6  f8805034          STRB     r5,[r0,#0x34]
0004ea  f8803035          STRB     r3,[r0,#0x35]
0004ee  69cb              LDR      r3,[r1,#0x1c]  ; bps
0004f0  ea4f2523          ASR      r5,r3,#8
0004f4  f8805036          STRB     r5,[r0,#0x36]
0004f8  f8803037          STRB     r3,[r0,#0x37]
0004fc  f8802038          STRB     r2,[r0,#0x38]
000500  f8113c07          LDRB     r3,[r1,#-7]  ; bps
000504  f8803039          STRB     r3,[r0,#0x39]
000508  6f0b              LDR      r3,[r1,#0x70]  ; bps
00050a  ea4f2523          ASR      r5,r3,#8
00050e  f880503a          STRB     r5,[r0,#0x3a]
000512  f880303b          STRB     r3,[r0,#0x3b]
000516  6f8b              LDR      r3,[r1,#0x78]  ; bps
000518  ea4f2523          ASR      r5,r3,#8
00051c  f880503c          STRB     r5,[r0,#0x3c]
000520  f880303d          STRB     r3,[r0,#0x3d]
000524  6fcb              LDR      r3,[r1,#0x7c]  ; bps
000526  ea4f2523          ASR      r5,r3,#8
00052a  f880503e          STRB     r5,[r0,#0x3e]
00052e  f880303f          STRB     r3,[r0,#0x3f]
000532  f8802040          STRB     r2,[r0,#0x40]
000536  f8913059          LDRB     r3,[r1,#0x59]  ; bps
00053a  f8803041          STRB     r3,[r0,#0x41]
00053e  f8513fd0          LDR      r3,[r1,#0xd0]!  ; bps
000542  ea4f2523          ASR      r5,r3,#8
000546  f8805042          STRB     r5,[r0,#0x42]
00054a  f8803043          STRB     r3,[r0,#0x43]
00054e  688b              LDR      r3,[r1,#8]  ; bps
000550  ea4f2523          ASR      r5,r3,#8
000554  f8805044          STRB     r5,[r0,#0x44]
000558  f8803045          STRB     r3,[r0,#0x45]
00055c  68cb              LDR      r3,[r1,#0xc]  ; bps
00055e  f1a10110          SUB      r1,r1,#0x10
000562  ea4f2523          ASR      r5,r3,#8
000566  f8805046          STRB     r5,[r0,#0x46]
00056a  f8803047          STRB     r3,[r0,#0x47]
00056e  f8802048          STRB     r2,[r0,#0x48]
000572  f8113c07          LDRB     r3,[r1,#-7]  ; bps
000576  f8803049          STRB     r3,[r0,#0x49]
00057a  6f0b              LDR      r3,[r1,#0x70]  ; bps
00057c  ea4f2523          ASR      r5,r3,#8
000580  f880504a          STRB     r5,[r0,#0x4a]
000584  f880304b          STRB     r3,[r0,#0x4b]
000588  6f8b              LDR      r3,[r1,#0x78]  ; bps
00058a  ea4f2523          ASR      r5,r3,#8
00058e  f880504c          STRB     r5,[r0,#0x4c]
000592  f880304d          STRB     r3,[r0,#0x4d]
000596  6fcb              LDR      r3,[r1,#0x7c]  ; bps
000598  f10101c0          ADD      r1,r1,#0xc0
00059c  ea4f2523          ASR      r5,r3,#8
0005a0  f880504e          STRB     r5,[r0,#0x4e]
0005a4  f8003f4f          STRB     r3,[r0,#0x4f]!
0005a8  7042              STRB     r2,[r0,#1]
0005aa  f8113c67          LDRB     r3,[r1,#-0x67]  ; bps
0005ae  7083              STRB     r3,[r0,#2]
0005b0  690b              LDR      r3,[r1,#0x10]  ; bps
0005b2  ea4f2523          ASR      r5,r3,#8
0005b6  70c5              STRB     r5,[r0,#3]
0005b8  7103              STRB     r3,[r0,#4]
0005ba  698b              LDR      r3,[r1,#0x18]  ; bps
0005bc  ea4f2523          ASR      r5,r3,#8
0005c0  7145              STRB     r5,[r0,#5]
0005c2  7183              STRB     r3,[r0,#6]
0005c4  69cb              LDR      r3,[r1,#0x1c]  ; bps
0005c6  ea4f2523          ASR      r5,r3,#8
0005ca  71c5              STRB     r5,[r0,#7]
0005cc  7203              STRB     r3,[r0,#8]
0005ce  7242              STRB     r2,[r0,#9]
0005d0  f8113c07          LDRB     r3,[r1,#-7]  ; bps
0005d4  7283              STRB     r3,[r0,#0xa]
0005d6  6f0b              LDR      r3,[r1,#0x70]  ; bps
0005d8  ea4f2523          ASR      r5,r3,#8
0005dc  72c5              STRB     r5,[r0,#0xb]
0005de  7303              STRB     r3,[r0,#0xc]
0005e0  6f8b              LDR      r3,[r1,#0x78]  ; bps
0005e2  ea4f2523          ASR      r5,r3,#8
0005e6  7345              STRB     r5,[r0,#0xd]
0005e8  7383              STRB     r3,[r0,#0xe]
0005ea  6fcb              LDR      r3,[r1,#0x7c]  ; bps
0005ec  ea4f2523          ASR      r5,r3,#8
0005f0  73c5              STRB     r5,[r0,#0xf]
0005f2  7403              STRB     r3,[r0,#0x10]
0005f4  7442              STRB     r2,[r0,#0x11]
0005f6  f8913059          LDRB     r3,[r1,#0x59]  ; bps
0005fa  7483              STRB     r3,[r0,#0x12]
0005fc  f8513fd0          LDR      r3,[r1,#0xd0]!  ; bps
000600  ea4f2523          ASR      r5,r3,#8
000604  74c5              STRB     r5,[r0,#0x13]
000606  7503              STRB     r3,[r0,#0x14]
000608  688b              LDR      r3,[r1,#8]  ; bps
00060a  ea4f2523          ASR      r5,r3,#8
00060e  7545              STRB     r5,[r0,#0x15]
000610  7583              STRB     r3,[r0,#0x16]
000612  68cb              LDR      r3,[r1,#0xc]  ; bps
000614  f101012c          ADD      r1,r1,#0x2c
000618  ea4f2523          ASR      r5,r3,#8
00061c  75c5              STRB     r5,[r0,#0x17]
00061e  7603              STRB     r3,[r0,#0x18]
000620  7642              STRB     r2,[r0,#0x19]
000622  f8113c43          LDRB     r3,[r1,#-0x43]  ; bps
000626  7683              STRB     r3,[r0,#0x1a]
000628  6b4b              LDR      r3,[r1,#0x34]  ; bps
00062a  ea4f2523          ASR      r5,r3,#8
00062e  76c5              STRB     r5,[r0,#0x1b]
000630  7703              STRB     r3,[r0,#0x1c]
000632  6bcb              LDR      r3,[r1,#0x3c]  ; bps
000634  ea4f2523          ASR      r5,r3,#8
000638  7745              STRB     r5,[r0,#0x1d]
00063a  7783              STRB     r3,[r0,#0x1e]
00063c  6c0b              LDR      r3,[r1,#0x40]  ; bps
00063e  ea4f2523          ASR      r5,r3,#8
000642  77c5              STRB     r5,[r0,#0x1f]
000644  f8803020          STRB     r3,[r0,#0x20]
000648  f8802021          STRB     r2,[r0,#0x21]
00064c  7f4b              LDRB     r3,[r1,#0x1d]  ; bps
00064e  f8803022          STRB     r3,[r0,#0x22]
000652  f8513f94          LDR      r3,[r1,#0x94]!  ; bps
000656  ea4f2523          ASR      r5,r3,#8
00065a  f8805023          STRB     r5,[r0,#0x23]
00065e  f8803024          STRB     r3,[r0,#0x24]
000662  688b              LDR      r3,[r1,#8]  ; bps
000664  ea4f2523          ASR      r5,r3,#8
000668  f8805025          STRB     r5,[r0,#0x25]
00066c  f8803026          STRB     r3,[r0,#0x26]
000670  68cb              LDR      r3,[r1,#0xc]  ; bps
000672  f1a10194          SUB      r1,r1,#0x94
000676  ea4f2523          ASR      r5,r3,#8
00067a  f8805027          STRB     r5,[r0,#0x27]
00067e  f8803028          STRB     r3,[r0,#0x28]
000682  f8802029          STRB     r2,[r0,#0x29]
000686  f891307d          LDRB     r3,[r1,#0x7d]  ; bps
00068a  f880302a          STRB     r3,[r0,#0x2a]
00068e  f8513ff4          LDR      r3,[r1,#0xf4]!  ; bps
000692  ea4f2523          ASR      r5,r3,#8
000696  f880502b          STRB     r5,[r0,#0x2b]
00069a  f880302c          STRB     r3,[r0,#0x2c]
00069e  688b              LDR      r3,[r1,#8]  ; bps
0006a0  ea4f2523          ASR      r5,r3,#8
0006a4  f880502d          STRB     r5,[r0,#0x2d]
0006a8  f880302e          STRB     r3,[r0,#0x2e]
0006ac  68cb              LDR      r3,[r1,#0xc]  ; bps
0006ae  f1010150          ADD      r1,r1,#0x50
0006b2  ea4f2523          ASR      r5,r3,#8
0006b6  f880502f          STRB     r5,[r0,#0x2f]
0006ba  f8803030          STRB     r3,[r0,#0x30]
0006be  f8802031          STRB     r2,[r0,#0x31]
0006c2  f8113c67          LDRB     r3,[r1,#-0x67]  ; bps
0006c6  f8803032          STRB     r3,[r0,#0x32]
0006ca  690b              LDR      r3,[r1,#0x10]  ; bps
0006cc  f1bc0f00          CMP      r12,#0
0006d0  ea4f2523          ASR      r5,r3,#8
0006d4  f8805033          STRB     r5,[r0,#0x33]
0006d8  f8803034          STRB     r3,[r0,#0x34]
0006dc  698b              LDR      r3,[r1,#0x18]  ; bps
0006de  ea4f2523          ASR      r5,r3,#8
0006e2  f8805035          STRB     r5,[r0,#0x35]
0006e6  f8803036          STRB     r3,[r0,#0x36]
0006ea  69cb              LDR      r3,[r1,#0x1c]  ; bps
0006ec  ea4f2523          ASR      r5,r3,#8
0006f0  f8805037          STRB     r5,[r0,#0x37]
0006f4  f8803038          STRB     r3,[r0,#0x38]
0006f8  f8802039          STRB     r2,[r0,#0x39]
0006fc  f8113c07          LDRB     r3,[r1,#-7]  ; bps
000700  f880303a          STRB     r3,[r0,#0x3a]
000704  6f0b              LDR      r3,[r1,#0x70]  ; bps
000706  ea4f2523          ASR      r5,r3,#8
00070a  f880503b          STRB     r5,[r0,#0x3b]
00070e  f880303c          STRB     r3,[r0,#0x3c]
000712  6f8b              LDR      r3,[r1,#0x78]  ; bps
000714  ea4f2523          ASR      r5,r3,#8
000718  f880503d          STRB     r5,[r0,#0x3d]
00071c  f880303e          STRB     r3,[r0,#0x3e]
000720  6fcb              LDR      r3,[r1,#0x7c]  ; bps
000722  ea4f2523          ASR      r5,r3,#8
000726  f880503f          STRB     r5,[r0,#0x3f]
00072a  f8803040          STRB     r3,[r0,#0x40]
00072e  f8802041          STRB     r2,[r0,#0x41]
000732  f8913059          LDRB     r3,[r1,#0x59]  ; bps
000736  f8803042          STRB     r3,[r0,#0x42]
00073a  f8d130d0          LDR      r3,[r1,#0xd0]  ; bps
00073e  ea4f2523          ASR      r5,r3,#8
000742  f8805043          STRB     r5,[r0,#0x43]
000746  f8803044          STRB     r3,[r0,#0x44]
00074a  f8d130d8          LDR      r3,[r1,#0xd8]  ; bps
00074e  ea4f2523          ASR      r5,r3,#8
000752  f8805045          STRB     r5,[r0,#0x45]
000756  f8803046          STRB     r3,[r0,#0x46]
00075a  f8d130dc          LDR      r3,[r1,#0xdc]  ; bps
00075e  ea4f2523          ASR      r5,r3,#8
000762  f8805047          STRB     r5,[r0,#0x47]
000766  f8803048          STRB     r3,[r0,#0x48]
00076a  f8802049          STRB     r2,[r0,#0x49]
00076e  f89120b9          LDRB     r2,[r1,#0xb9]  ; bps
000772  f880204a          STRB     r2,[r0,#0x4a]
000776  f8d12130          LDR      r2,[r1,#0x130]  ; bps
00077a  ea4f2322          ASR      r3,r2,#8
00077e  f880304b          STRB     r3,[r0,#0x4b]
000782  f8002f4c          STRB     r2,[r0,#0x4c]!
000786  f8d12138          LDR      r2,[r1,#0x138]  ; bps
00078a  f6a111c8          SUB      r1,r1,#0x9c8
00078e  ea4f2322          ASR      r3,r2,#8
000792  7043              STRB     r3,[r0,#1]
000794  7082              STRB     r2,[r0,#2]
000796  f8d12b04          LDR      r2,[r1,#0xb04]  ; bps
00079a  ea4f2322          ASR      r3,r2,#8
00079e  f8003f03          STRB     r3,[r0,#3]!
0007a2  7042              STRB     r2,[r0,#1]
0007a4  7086              STRB     r6,[r0,#2]
0007a6  f8911ae1          LDRB     r1,[r1,#0xae1]  ; bps
0007aa  70c1              STRB     r1,[r0,#3]
0007ac  49fe              LDR      r1,|L1.2984|
0007ae  eb01014a          ADD      r1,r1,r10,LSL #1
0007b2  d008              BEQ      |L1.1990|
0007b4  f1bc0f01          CMP      r12,#1
0007b8  d102              BNE      |L1.1984|
0007ba  48fc              LDR      r0,|L1.2988|
0007bc  1e89              SUBS     r1,r1,#2
0007be  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1984|
0007c0  b033              ADD      sp,sp,#0xcc
                  |L1.1986|
0007c2  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.1990|
0007c6  f88db000          STRB     r11,[sp,#0]
0007ca  f88de001          STRB     lr,[sp,#1]
0007ce  0062              LSLS     r2,r4,#1
0007d0  466d              MOV      r5,sp
0007d2  f88d2002          STRB     r2,[sp,#2]
0007d6  1e89              SUBS     r1,r1,#2
0007d8  1ce8              ADDS     r0,r5,#3
0007da  f7fffffe          BL       __aeabi_memcpy
0007de  2003              MOVS     r0,#3
0007e0  eb000044          ADD      r0,r0,r4,LSL #1
0007e4  b201              SXTH     r1,r0
0007e6  4668              MOV      r0,sp
0007e8  f7fffffe          BL       CRC16_2
0007ec  eb050144          ADD      r1,r5,r4,LSL #1
0007f0  2600              MOVS     r6,#0
0007f2  70c8              STRB     r0,[r1,#3]
0007f4  0a00              LSRS     r0,r0,#8
0007f6  7108              STRB     r0,[r1,#4]
0007f8  2005              MOVS     r0,#5
0007fa  eb000744          ADD      r7,r0,r4,LSL #1
0007fe  e004              B        |L1.2058|
                  |L1.2048|
000800  5da8              LDRB     r0,[r5,r6]
000802  f7fffffe          BL       putchar0
000806  1c76              ADDS     r6,r6,#1
000808  b2f6              UXTB     r6,r6
                  |L1.2058|
00080a  42b7              CMP      r7,r6
00080c  d8f8              BHI      |L1.2048|
00080e  2400              MOVS     r4,#0
000810  e004              B        |L1.2076|
                  |L1.2066|
000812  5d28              LDRB     r0,[r5,r4]
000814  f7fffffe          BL       putchar_sc16is700
000818  1c64              ADDS     r4,r4,#1
00081a  b2e4              UXTB     r4,r4
                  |L1.2076|
00081c  42a7              CMP      r7,r4
00081e  d8f8              BHI      |L1.2066|
000820  e7ce              B        |L1.1984|
;;;1995   
                          ENDP

                  modbus_hold_registers_transmit PROC
;;;2092   //-----------------------------------------------
;;;2093   void modbus_hold_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
000822  e92d4fff          PUSH     {r0-r11,lr}
;;;2094   {
000826  b0b3              SUB      sp,sp,#0xcc
000828  4682              MOV      r10,r0
00082a  4693              MOV      r11,r2
00082c  461d              MOV      r5,r3
;;;2095   //char modbus_registers[110];
;;;2096   char modbus_tx_buff[200];
;;;2097   unsigned short crc_temp;
;;;2098   char i;
;;;2099   
;;;2100   //reg_adr=45;
;;;2101   //I_ug=reg_adr;
;;;2102   //U_up=5678;
;;;2103   
;;;2104   modbus_registers[0]=(char)(lc640_read_int(EE_I_UG)/256);//Πεγ50
00082e  2020              MOVS     r0,#0x20
000830  f8dd9100          LDR      r9,[sp,#0x100]
000834  f7fffffe          BL       lc640_read_int
000838  17c1              ASRS     r1,r0,#31
00083a  4cdb              LDR      r4,|L1.2984|
00083c  eb006011          ADD      r0,r0,r1,LSR #24
000840  1200              ASRS     r0,r0,#8
000842  7020              STRB     r0,[r4,#0]
;;;2105   modbus_registers[1]=(char)(lc640_read_int(EE_I_UG)%256);
000844  2020              MOVS     r0,#0x20
000846  f7fffffe          BL       lc640_read_int
00084a  7060              STRB     r0,[r4,#1]
;;;2106   modbus_registers[2]=(char)(lc640_read_int(EE_U_UP)/256);//Πεγ51
00084c  2022              MOVS     r0,#0x22
00084e  f7fffffe          BL       lc640_read_int
000852  17c1              ASRS     r1,r0,#31
000854  eb006011          ADD      r0,r0,r1,LSR #24
000858  1200              ASRS     r0,r0,#8
00085a  70a0              STRB     r0,[r4,#2]
;;;2107   modbus_registers[3]=(char)(lc640_read_int(EE_U_UP)%256);
00085c  2022              MOVS     r0,#0x22
00085e  f7fffffe          BL       lc640_read_int
000862  70e0              STRB     r0,[r4,#3]
;;;2108   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
000864  48d2              LDR      r0,|L1.2992|
;;;2109   modbus_registers[5]=(char)(U_maxg%256);
;;;2110   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;2111   modbus_registers[7]=(char)(I_maxp%256);
;;;2112   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;2113   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;2114   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;2115   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;2116   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
000866  f44f2861          MOV      r8,#0xe1000
;;;2117   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00086a  f44f6c61          MOV      r12,#0xe10
00086e  f9b00000          LDRSH    r0,[r0,#0]            ;2108  ; U_maxg
000872  17c1              ASRS     r1,r0,#31             ;2108
000874  eb006111          ADD      r1,r0,r1,LSR #24      ;2108
000878  120a              ASRS     r2,r1,#8              ;2108
00087a  7122              STRB     r2,[r4,#4]            ;2108
00087c  7160              STRB     r0,[r4,#5]            ;2109
00087e  48cd              LDR      r0,|L1.2996|
000880  f9b00000          LDRSH    r0,[r0,#0]            ;2110  ; I_maxp
000884  17c1              ASRS     r1,r0,#31             ;2110
000886  eb006111          ADD      r1,r0,r1,LSR #24      ;2110
00088a  120a              ASRS     r2,r1,#8              ;2110
00088c  71a2              STRB     r2,[r4,#6]            ;2110
00088e  71e0              STRB     r0,[r4,#7]            ;2111
000890  48c9              LDR      r0,|L1.3000|
000892  213c              MOVS     r1,#0x3c              ;2112
000894  6802              LDR      r2,[r0,#0]            ;2112  ; T_PROC_GS
000896  fb92f7f1          SDIV     r7,r2,r1              ;2112
00089a  fb012017          MLS      r0,r1,r7,r2           ;2112
00089e  17c3              ASRS     r3,r0,#31             ;2112
0008a0  eb006313          ADD      r3,r0,r3,LSR #24      ;2112
0008a4  121e              ASRS     r6,r3,#8              ;2112
0008a6  7226              STRB     r6,[r4,#8]            ;2112
0008a8  7260              STRB     r0,[r4,#9]            ;2113
0008aa  fb97f0f1          SDIV     r0,r7,r1              ;2114
0008ae  fb017010          MLS      r0,r1,r0,r7           ;2114
0008b2  17c3              ASRS     r3,r0,#31             ;2114
0008b4  eb006313          ADD      r3,r0,r3,LSR #24      ;2114
0008b8  121e              ASRS     r6,r3,#8              ;2114
0008ba  72a6              STRB     r6,[r4,#0xa]          ;2114
0008bc  72e0              STRB     r0,[r4,#0xb]          ;2115
0008be  fb92f0f8          SDIV     r0,r2,r8              ;2116
0008c2  7320              STRB     r0,[r4,#0xc]          ;2116
0008c4  fb92f0fc          SDIV     r0,r2,r12
0008c8  7360              STRB     r0,[r4,#0xd]
;;;2118   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0008ca  48bc              LDR      r0,|L1.3004|
0008cc  6802              LDR      r2,[r0,#0]  ; T_PROC_PS
0008ce  fb92f7f1          SDIV     r7,r2,r1
0008d2  fb012017          MLS      r0,r1,r7,r2
0008d6  17c3              ASRS     r3,r0,#31
0008d8  eb006313          ADD      r3,r0,r3,LSR #24
0008dc  121e              ASRS     r6,r3,#8
0008de  73a6              STRB     r6,[r4,#0xe]
;;;2119   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0008e0  73e0              STRB     r0,[r4,#0xf]
;;;2120   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0008e2  fb97f0f1          SDIV     r0,r7,r1
0008e6  fb017010          MLS      r0,r1,r0,r7
0008ea  17c1              ASRS     r1,r0,#31
0008ec  eb006111          ADD      r1,r0,r1,LSR #24
0008f0  120b              ASRS     r3,r1,#8
0008f2  7423              STRB     r3,[r4,#0x10]
;;;2121   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
0008f4  7460              STRB     r0,[r4,#0x11]
;;;2122   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
0008f6  fb92f0f8          SDIV     r0,r2,r8
0008fa  74a0              STRB     r0,[r4,#0x12]
;;;2123   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
0008fc  fb92f0fc          SDIV     r0,r2,r12
000900  74e0              STRB     r0,[r4,#0x13]
;;;2124   modbus_registers[20]=0;								//Πεγ60
000902  2700              MOVS     r7,#0
;;;2125   modbus_registers[21]=0;
;;;2126   if(work_stat==wsPS)modbus_registers[21]=1;
000904  48ae              LDR      r0,|L1.3008|
000906  7527              STRB     r7,[r4,#0x14]         ;2124
000908  7567              STRB     r7,[r4,#0x15]         ;2125
00090a  7801              LDRB     r1,[r0,#0]  ; work_stat
00090c  2001              MOVS     r0,#1
00090e  2902              CMP      r1,#2
000910  d100              BNE      |L1.2324|
000912  7560              STRB     r0,[r4,#0x15]
                  |L1.2324|
;;;2127   modbus_registers[22]=0;								//Πεγ61
000914  75a7              STRB     r7,[r4,#0x16]
;;;2128   modbus_registers[23]=0;
000916  75e7              STRB     r7,[r4,#0x17]
;;;2129   if(work_stat==wsGS)modbus_registers[23]=1;
000918  2901              CMP      r1,#1
00091a  d100              BNE      |L1.2334|
00091c  75e0              STRB     r0,[r4,#0x17]
                  |L1.2334|
;;;2130   modbus_registers[24]=0;								//Πεγ62
;;;2131   modbus_registers[25]=0;
;;;2132   if(REV_STAT==rsREW)modbus_registers[25]=1;
00091e  4aa9              LDR      r2,|L1.3012|
000920  7627              STRB     r7,[r4,#0x18]         ;2130
000922  7667              STRB     r7,[r4,#0x19]         ;2131
000924  7812              LDRB     r2,[r2,#0]  ; REV_STAT
000926  b902              CBNZ     r2,|L1.2346|
000928  7660              STRB     r0,[r4,#0x19]
                  |L1.2346|
;;;2133   modbus_registers[26]=0;								//Πεγ63
;;;2134   modbus_registers[27]=0;
;;;2135   if(AVT_REV_IS_ON)modbus_registers[27]=1;
00092a  4aa7              LDR      r2,|L1.3016|
00092c  76a7              STRB     r7,[r4,#0x1a]         ;2133
00092e  76e7              STRB     r7,[r4,#0x1b]         ;2134
000930  8812              LDRH     r2,[r2,#0]  ; AVT_REV_IS_ON
000932  b102              CBZ      r2,|L1.2358|
000934  76e0              STRB     r0,[r4,#0x1b]
                  |L1.2358|
;;;2136   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000936  4aa5              LDR      r2,|L1.3020|
000938  8812              LDRH     r2,[r2,#0]  ; AVT_REV_TIME_FF
00093a  0a13              LSRS     r3,r2,#8
00093c  f8043f1c          STRB     r3,[r4,#0x1c]!
;;;2137   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
000940  7062              STRB     r2,[r4,#1]
;;;2138   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
000942  4aa3              LDR      r2,|L1.3024|
000944  8812              LDRH     r2,[r2,#0]  ; AVT_REV_TIME_REW
000946  0a13              LSRS     r3,r2,#8
000948  70a3              STRB     r3,[r4,#2]
;;;2139   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00094a  70e2              STRB     r2,[r4,#3]
;;;2140   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00094c  4aa1              LDR      r2,|L1.3028|
00094e  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_TIME_PAUSE
000952  17d3              ASRS     r3,r2,#31
000954  eb026313          ADD      r3,r2,r3,LSR #24
000958  121e              ASRS     r6,r3,#8
00095a  7126              STRB     r6,[r4,#4]
;;;2141   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
00095c  7162              STRB     r2,[r4,#5]
;;;2142   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
00095e  4a9e              LDR      r2,|L1.3032|
000960  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_I_NOM_FF
000964  17d3              ASRS     r3,r2,#31
000966  eb026313          ADD      r3,r2,r3,LSR #24
00096a  121e              ASRS     r6,r3,#8
00096c  71a6              STRB     r6,[r4,#6]
;;;2143   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
00096e  71e2              STRB     r2,[r4,#7]
;;;2144   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
000970  4a9a              LDR      r2,|L1.3036|
000972  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_I_NOM_REW
000976  17d3              ASRS     r3,r2,#31
000978  eb026313          ADD      r3,r2,r3,LSR #24
00097c  121e              ASRS     r6,r3,#8
00097e  7226              STRB     r6,[r4,#8]
;;;2145   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
000980  7262              STRB     r2,[r4,#9]
;;;2146   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
000982  4a97              LDR      r2,|L1.3040|
000984  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_U_NOM_FF
000988  17d3              ASRS     r3,r2,#31
00098a  eb026313          ADD      r3,r2,r3,LSR #24
00098e  121e              ASRS     r6,r3,#8
000990  72a6              STRB     r6,[r4,#0xa]
;;;2147   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
000992  72e2              STRB     r2,[r4,#0xb]
;;;2148   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
000994  4a93              LDR      r2,|L1.3044|
000996  f9b22000          LDRSH    r2,[r2,#0]  ; AVT_REV_U_NOM_REW
00099a  17d3              ASRS     r3,r2,#31
00099c  eb026313          ADD      r3,r2,r3,LSR #24
0009a0  121e              ASRS     r6,r3,#8
0009a2  7326              STRB     r6,[r4,#0xc]
;;;2149   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
0009a4  7362              STRB     r2,[r4,#0xd]
;;;2150   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
0009a6  4a90              LDR      r2,|L1.3048|
0009a8  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_ZAR_TIME
0009ac  17d3              ASRS     r3,r2,#31
0009ae  eb026313          ADD      r3,r2,r3,LSR #24
0009b2  121e              ASRS     r6,r3,#8
0009b4  73a6              STRB     r6,[r4,#0xe]
;;;2151   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
0009b6  73e2              STRB     r2,[r4,#0xf]
;;;2152   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
0009b8  4a8c              LDR      r2,|L1.3052|
0009ba  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_PAUSE1_TIME
0009be  17d3              ASRS     r3,r2,#31
0009c0  eb026313          ADD      r3,r2,r3,LSR #24
0009c4  121e              ASRS     r6,r3,#8
0009c6  7426              STRB     r6,[r4,#0x10]
;;;2153   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
0009c8  7462              STRB     r2,[r4,#0x11]
;;;2154   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
0009ca  4a89              LDR      r2,|L1.3056|
0009cc  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_RAZR_TIME
0009d0  17d3              ASRS     r3,r2,#31
0009d2  eb026313          ADD      r3,r2,r3,LSR #24
0009d6  121e              ASRS     r6,r3,#8
0009d8  74a6              STRB     r6,[r4,#0x12]
;;;2155   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
0009da  74e2              STRB     r2,[r4,#0x13]
;;;2156   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
0009dc  4a85              LDR      r2,|L1.3060|
0009de  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_PAUSE2_TIME
0009e2  17d3              ASRS     r3,r2,#31
0009e4  eb026313          ADD      r3,r2,r3,LSR #24
0009e8  121e              ASRS     r6,r3,#8
0009ea  7526              STRB     r6,[r4,#0x14]
;;;2157   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
0009ec  7562              STRB     r2,[r4,#0x15]
;;;2158   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
0009ee  4a82              LDR      r2,|L1.3064|
0009f0  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_MAX_VOLT
0009f4  17d3              ASRS     r3,r2,#31
0009f6  eb026313          ADD      r3,r2,r3,LSR #24
0009fa  121e              ASRS     r6,r3,#8
0009fc  75a6              STRB     r6,[r4,#0x16]
;;;2159   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
0009fe  75e2              STRB     r2,[r4,#0x17]
;;;2160   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
000a00  4a7e              LDR      r2,|L1.3068|
000a02  f9b22000          LDRSH    r2,[r2,#0]  ; CAP_WRK_CURR
000a06  17d3              ASRS     r3,r2,#31
000a08  eb026313          ADD      r3,r2,r3,LSR #24
000a0c  121e              ASRS     r6,r3,#8
000a0e  7626              STRB     r6,[r4,#0x18]
;;;2161   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
000a10  7662              STRB     r2,[r4,#0x19]
;;;2162   modbus_registers[56]=(char)((proc_phase)/256);				//Πεγ78	
;;;2163   modbus_registers[57]=(char)((proc_phase)%256);
000a12  4a7b              LDR      r2,|L1.3072|
000a14  f8047f1c          STRB     r7,[r4,#0x1c]!        ;2162
000a18  7812              LDRB     r2,[r2,#0]  ; proc_phase
000a1a  7062              STRB     r2,[r4,#1]
;;;2164   modbus_registers[58]=(char)((REV_IS_ON)/256);				//Πεγ79	
000a1c  4a79              LDR      r2,|L1.3076|
000a1e  f9b22000          LDRSH    r2,[r2,#0]  ; REV_IS_ON
000a22  17d3              ASRS     r3,r2,#31
000a24  eb026313          ADD      r3,r2,r3,LSR #24
000a28  121e              ASRS     r6,r3,#8
000a2a  70a6              STRB     r6,[r4,#2]
;;;2165   modbus_registers[59]=(char)((REV_IS_ON)%256);
000a2c  70e2              STRB     r2,[r4,#3]
;;;2166   
;;;2167   
;;;2168   
;;;2169   modbus_registers[60]=(char)((pwm_u_reg)/256);			//Πεγ80
000a2e  4a76              LDR      r2,|L1.3080|
000a30  f9b22000          LDRSH    r2,[r2,#0]  ; pwm_u_reg
000a34  17d3              ASRS     r3,r2,#31
000a36  eb026313          ADD      r3,r2,r3,LSR #24
000a3a  121e              ASRS     r6,r3,#8
000a3c  7126              STRB     r6,[r4,#4]
;;;2170   modbus_registers[61]=(char)((pwm_u_reg)%256);
000a3e  7162              STRB     r2,[r4,#5]
;;;2171   modbus_registers[62]=(char)((pwm_i_reg)/256);			//Πεγ81
000a40  4a72              LDR      r2,|L1.3084|
000a42  f9b22000          LDRSH    r2,[r2,#0]  ; pwm_i_reg
000a46  17d3              ASRS     r3,r2,#31
000a48  eb026313          ADD      r3,r2,r3,LSR #24
000a4c  121e              ASRS     r6,r3,#8
000a4e  71a6              STRB     r6,[r4,#6]
;;;2172   modbus_registers[63]=(char)((pwm_i_reg)%256);
000a50  71e2              STRB     r2,[r4,#7]
;;;2173   modbus_registers[64]=(char)((pwm_t_reg/10)/256);			//Πεγ82
000a52  4a6f              LDR      r2,|L1.3088|
000a54  f44f6320          MOV      r3,#0xa00
000a58  f9b22000          LDRSH    r2,[r2,#0]  ; pwm_t_reg
000a5c  fb92f3f3          SDIV     r3,r2,r3
000a60  7223              STRB     r3,[r4,#8]
;;;2174   modbus_registers[65]=(char)((pwm_t_reg/10)%256);
000a62  230a              MOVS     r3,#0xa
000a64  fb92f2f3          SDIV     r2,r2,r3
000a68  7262              STRB     r2,[r4,#9]
;;;2175   
;;;2176   modbus_registers[80]=(char)((I_ug_ram)/256);			//Πεγ90
000a6a  4a6a              LDR      r2,|L1.3092|
000a6c  f9b22000          LDRSH    r2,[r2,#0]  ; I_ug_ram
000a70  17d3              ASRS     r3,r2,#31
000a72  eb026313          ADD      r3,r2,r3,LSR #24
000a76  121e              ASRS     r6,r3,#8
000a78  7626              STRB     r6,[r4,#0x18]
;;;2177   modbus_registers[81]=(char)((I_ug_ram)%256);
000a7a  f8042f19          STRB     r2,[r4,#0x19]!
;;;2178   modbus_registers[82]=(char)((U_up_ram)/256);			//Πεγ91
000a7e  4a66              LDR      r2,|L1.3096|
000a80  f9b22000          LDRSH    r2,[r2,#0]  ; U_up_ram
000a84  17d3              ASRS     r3,r2,#31
000a86  eb026313          ADD      r3,r2,r3,LSR #24
000a8a  121e              ASRS     r6,r3,#8
000a8c  7066              STRB     r6,[r4,#1]
;;;2179   modbus_registers[83]=(char)((U_up_ram)%256);
000a8e  70a2              STRB     r2,[r4,#2]
;;;2180   modbus_registers[84]=0;									//Πεγ92
000a90  70e7              STRB     r7,[r4,#3]
;;;2181   modbus_registers[85]=0;
000a92  7127              STRB     r7,[r4,#4]
000a94  f1a40451          SUB      r4,r4,#0x51
;;;2182   if(work_stat==wsPS)modbus_registers[85]=1;
000a98  2902              CMP      r1,#2
000a9a  d101              BNE      |L1.2720|
000a9c  f8840055          STRB     r0,[r4,#0x55]
                  |L1.2720|
;;;2183   modbus_registers[86]=0;									//Πεγ93
000aa0  f8847056          STRB     r7,[r4,#0x56]
;;;2184   modbus_registers[87]=0;
000aa4  f8847057          STRB     r7,[r4,#0x57]
;;;2185   if(work_stat==wsGS)modbus_registers[87]=1;
000aa8  2901              CMP      r1,#1
000aaa  d101              BNE      |L1.2736|
000aac  f8840057          STRB     r0,[r4,#0x57]
                  |L1.2736|
000ab0  4a3d              LDR      r2,|L1.2984|
;;;2186   
;;;2187   if(prot==MODBUS_RTU_PROT)
;;;2188   	{
;;;2189   	modbus_tx_buff[0]=adr;
;;;2190   	modbus_tx_buff[1]=func;
;;;2191   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;2192   	
;;;2193   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-50)*2],reg_quantity*2);
000ab2  eb02014b          ADD      r1,r2,r11,LSL #1
000ab6  3964              SUBS     r1,r1,#0x64
000ab8  f1b90f00          CMP      r9,#0                 ;2187
000abc  d006              BEQ      |L1.2764|
;;;2194   							   
;;;2195   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;2196   	
;;;2197   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;2198   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;2199   	
;;;2200   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;2201   		{
;;;2202   		putchar0(modbus_tx_buff[i]);
;;;2203   		}
;;;2204   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;2205   		{
;;;2206   		putchar_sc16is700(modbus_tx_buff[i]);
;;;2207   		}
;;;2208   	}
;;;2209   else if(prot==MODBUS_TCP_PROT)
000abe  f1b90f01          CMP      r9,#1
000ac2  d101              BNE      |L1.2760|
;;;2210   	{
;;;2211   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
000ac4  4839              LDR      r0,|L1.2988|
000ac6  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.2760|
;;;2212   	}
;;;2213   // modbus_tcp_out_ptr=(char*)(&modbus_registers[0]);
;;;2214   //modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
;;;2215   }
000ac8  b037              ADD      sp,sp,#0xdc
000aca  e67a              B        |L1.1986|
                  |L1.2764|
000acc  f88da000          STRB     r10,[sp,#0]           ;2189
000ad0  9834              LDR      r0,[sp,#0xd0]         ;2190
000ad2  f88d0001          STRB     r0,[sp,#1]            ;2190
000ad6  006a              LSLS     r2,r5,#1              ;2191
000ad8  466c              MOV      r4,sp                 ;2193
000ada  f88d2002          STRB     r2,[sp,#2]            ;2191
000ade  1ce0              ADDS     r0,r4,#3              ;2193
000ae0  f7fffffe          BL       __aeabi_memcpy
000ae4  2003              MOVS     r0,#3                 ;2195
000ae6  eb000045          ADD      r0,r0,r5,LSL #1       ;2195
000aea  b201              SXTH     r1,r0                 ;2195
000aec  4668              MOV      r0,sp                 ;2195
000aee  f7fffffe          BL       CRC16_2
000af2  eb040145          ADD      r1,r4,r5,LSL #1       ;2197
000af6  2600              MOVS     r6,#0                 ;2200
000af8  70c8              STRB     r0,[r1,#3]            ;2197
000afa  0a00              LSRS     r0,r0,#8              ;2198
000afc  7108              STRB     r0,[r1,#4]            ;2198
000afe  2005              MOVS     r0,#5                 ;2200
000b00  eb000745          ADD      r7,r0,r5,LSL #1       ;2200
000b04  e004              B        |L1.2832|
                  |L1.2822|
000b06  5da0              LDRB     r0,[r4,r6]            ;2202
000b08  f7fffffe          BL       putchar0
000b0c  1c76              ADDS     r6,r6,#1              ;2200
000b0e  b2f6              UXTB     r6,r6                 ;2200
                  |L1.2832|
000b10  42b7              CMP      r7,r6                 ;2200
000b12  d8f8              BHI      |L1.2822|
000b14  2500              MOVS     r5,#0                 ;2204
000b16  e004              B        |L1.2850|
                  |L1.2840|
000b18  5d60              LDRB     r0,[r4,r5]            ;2206
000b1a  f7fffffe          BL       putchar_sc16is700
000b1e  1c6d              ADDS     r5,r5,#1              ;2204
000b20  b2ed              UXTB     r5,r5                 ;2204
                  |L1.2850|
000b22  42af              CMP      r7,r5                 ;2204
000b24  d8f8              BHI      |L1.2840|
000b26  e7cf              B        |L1.2760|
;;;2216   
                          ENDP

                  modbus_for_pult_registers_transmit PROC
;;;1758   //-----------------------------------------------
;;;1759   void modbus_for_pult_registers_transmit(unsigned short reg_quantity)
000b28  b570              PUSH     {r4-r6,lr}
;;;1760   {
000b2a  4606              MOV      r6,r0
;;;1761   char modbus_registers[20];
;;;1762   char modbus_tx_buff[30];
;;;1763   unsigned short crc_temp;
;;;1764   char i;
;;;1765   //char reg_quantity=4;
;;;1766   
;;;1767   //pult_time_set=0xffff;
;;;1768   
;;;1769   modbus_registers[0]=(char)(pult_u%256);
000b2c  483b              LDR      r0,|L1.3100|
000b2e  b090              SUB      sp,sp,#0x40           ;1760
000b30  f9b00000          LDRSH    r0,[r0,#0]  ; pult_u
000b34  f88d0024          STRB     r0,[sp,#0x24]
000b38  17c1              ASRS     r1,r0,#31
000b3a  eb006111          ADD      r1,r0,r1,LSR #24
;;;1770   modbus_registers[1]=(char)(pult_u/256);					//Πεγ1
000b3e  1208              ASRS     r0,r1,#8
000b40  f88d0025          STRB     r0,[sp,#0x25]
;;;1771   modbus_registers[2]=(char)(pult_i%256);
000b44  4836              LDR      r0,|L1.3104|
000b46  f9b00000          LDRSH    r0,[r0,#0]  ; pult_i
000b4a  f88d0026          STRB     r0,[sp,#0x26]
000b4e  17c1              ASRS     r1,r0,#31
000b50  eb006111          ADD      r1,r0,r1,LSR #24
;;;1772   modbus_registers[3]=(char)(pult_i/256);					//Πεγ2
000b54  1208              ASRS     r0,r1,#8
000b56  f88d0027          STRB     r0,[sp,#0x27]
;;;1773   modbus_registers[4]=(char)(pult_work_stat%256);
000b5a  4832              LDR      r0,|L1.3108|
000b5c  7800              LDRB     r0,[r0,#0]  ; pult_work_stat
000b5e  f88d0028          STRB     r0,[sp,#0x28]
;;;1774   modbus_registers[5]=(char)(pult_work_stat/256);			//Πεγ3
000b62  2000              MOVS     r0,#0
000b64  f88d0029          STRB     r0,[sp,#0x29]
;;;1775   modbus_registers[6]=(char)(pult_u_set%256);
000b68  482f              LDR      r0,|L1.3112|
000b6a  f9b00000          LDRSH    r0,[r0,#0]  ; pult_u_set
000b6e  f88d002a          STRB     r0,[sp,#0x2a]
000b72  17c1              ASRS     r1,r0,#31
000b74  eb006111          ADD      r1,r0,r1,LSR #24
;;;1776   modbus_registers[7]=(char)(pult_u_set/256);				//Πεγ4
000b78  1208              ASRS     r0,r1,#8
000b7a  f88d002b          STRB     r0,[sp,#0x2b]
;;;1777   modbus_registers[8]=(char)(pult_time%256);
000b7e  482b              LDR      r0,|L1.3116|
000b80  f9b00000          LDRSH    r0,[r0,#0]  ; pult_time
000b84  f88d002c          STRB     r0,[sp,#0x2c]
000b88  17c1              ASRS     r1,r0,#31
000b8a  eb006111          ADD      r1,r0,r1,LSR #24
;;;1778   modbus_registers[9]=(char)(pult_time/256);				//Πεγ5
000b8e  1208              ASRS     r0,r1,#8
000b90  f88d002d          STRB     r0,[sp,#0x2d]
;;;1779   modbus_registers[10]=(char)(pult_time_set%256);		 	
000b94  4826              LDR      r0,|L1.3120|
000b96  8800              LDRH     r0,[r0,#0]  ; pult_time_set
000b98  f88d002e          STRB     r0,[sp,#0x2e]
;;;1780   modbus_registers[11]=(char)(pult_time_set/256);			//Πεγ6
000b9c  0a00              LSRS     r0,r0,#8
000b9e  f88d002f          STRB     r0,[sp,#0x2f]
;;;1781   modbus_registers[12]=(char)(pult_i_set%256);
000ba2  4824              LDR      r0,|L1.3124|
000ba4  e048              B        |L1.3128|
000ba6  0000              DCW      0x0000
                  |L1.2984|
                          DCD      ||area_number.5||+0x3c
                  |L1.2988|
                          DCD      modbus_tcp_out_ptr
                  |L1.2992|
                          DCD      U_maxg
                  |L1.2996|
                          DCD      I_maxp
                  |L1.3000|
                          DCD      T_PROC_GS
                  |L1.3004|
                          DCD      T_PROC_PS
                  |L1.3008|
                          DCD      work_stat
                  |L1.3012|
                          DCD      REV_STAT
                  |L1.3016|
                          DCD      AVT_REV_IS_ON
                  |L1.3020|
                          DCD      AVT_REV_TIME_FF
                  |L1.3024|
                          DCD      AVT_REV_TIME_REW
                  |L1.3028|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.3032|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.3036|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.3040|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.3044|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.3048|
                          DCD      CAP_ZAR_TIME
                  |L1.3052|
                          DCD      CAP_PAUSE1_TIME
                  |L1.3056|
                          DCD      CAP_RAZR_TIME
                  |L1.3060|
                          DCD      CAP_PAUSE2_TIME
                  |L1.3064|
                          DCD      CAP_MAX_VOLT
                  |L1.3068|
                          DCD      CAP_WRK_CURR
                  |L1.3072|
                          DCD      proc_phase
                  |L1.3076|
                          DCD      REV_IS_ON
                  |L1.3080|
                          DCD      pwm_u_reg
                  |L1.3084|
                          DCD      pwm_i_reg
                  |L1.3088|
                          DCD      pwm_t_reg
                  |L1.3092|
                          DCD      I_ug_ram
                  |L1.3096|
                          DCD      U_up_ram
                  |L1.3100|
                          DCD      pult_u
                  |L1.3104|
                          DCD      pult_i
                  |L1.3108|
                          DCD      pult_work_stat
                  |L1.3112|
                          DCD      pult_u_set
                  |L1.3116|
                          DCD      pult_time
                  |L1.3120|
                          DCD      pult_time_set
                  |L1.3124|
                          DCD      pult_i_set
                  |L1.3128|
000c38  f9b00000          LDRSH    r0,[r0,#0]  ; pult_i_set
000c3c  f88d0030          STRB     r0,[sp,#0x30]
000c40  17c1              ASRS     r1,r0,#31
000c42  eb006111          ADD      r1,r0,r1,LSR #24
;;;1782   modbus_registers[13]=(char)(pult_i_set/256);				//Πεγ7
000c46  1208              ASRS     r0,r1,#8
000c48  f88d0031          STRB     r0,[sp,#0x31]
;;;1783   
;;;1784   
;;;1785   modbus_tx_buff[0]=201;
000c4c  20c9              MOVS     r0,#0xc9
000c4e  f88d0000          STRB     r0,[sp,#0]
;;;1786   modbus_tx_buff[1]=4;
000c52  2004              MOVS     r0,#4
000c54  f88d0001          STRB     r0,[sp,#1]
;;;1787   modbus_tx_buff[2]=(char)(reg_quantity*2);
000c58  0072              LSLS     r2,r6,#1
;;;1788   
;;;1789   memcpy((char*)&modbus_tx_buff[3],(char*)modbus_registers,reg_quantity*2);
000c5a  466c              MOV      r4,sp
000c5c  f88d2002          STRB     r2,[sp,#2]            ;1787
000c60  a909              ADD      r1,sp,#0x24
000c62  1ce0              ADDS     r0,r4,#3
000c64  f7fffffe          BL       __aeabi_memcpy
;;;1790   
;;;1791   crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
000c68  2003              MOVS     r0,#3
000c6a  eb000046          ADD      r0,r0,r6,LSL #1
000c6e  b201              SXTH     r1,r0
000c70  4668              MOV      r0,sp
000c72  f7fffffe          BL       CRC16_2
;;;1792   
;;;1793   modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
000c76  eb040146          ADD      r1,r4,r6,LSL #1
;;;1794   modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1795   
;;;1796   for (i=0;i<(5+(reg_quantity*2));i++)
000c7a  2500              MOVS     r5,#0
000c7c  70c8              STRB     r0,[r1,#3]            ;1793
000c7e  0a00              LSRS     r0,r0,#8              ;1794
000c80  7108              STRB     r0,[r1,#4]            ;1794
000c82  2005              MOVS     r0,#5
000c84  eb000646          ADD      r6,r0,r6,LSL #1
000c88  e004              B        |L1.3220|
                  |L1.3210|
;;;1797   	{
;;;1798   	putchar0(modbus_tx_buff[i]);
000c8a  5d60              LDRB     r0,[r4,r5]
000c8c  f7fffffe          BL       putchar0
000c90  1c6d              ADDS     r5,r5,#1              ;1796
000c92  b2ed              UXTB     r5,r5                 ;1796
                  |L1.3220|
000c94  42ae              CMP      r6,r5                 ;1796
000c96  d8f8              BHI      |L1.3210|
;;;1799   	}
;;;1800   for (i=0;i<(5+(reg_quantity*2));i++)
000c98  2500              MOVS     r5,#0
000c9a  e004              B        |L1.3238|
                  |L1.3228|
;;;1801   	{
;;;1802   	putchar_sc16is700(modbus_tx_buff[i]);
000c9c  5d60              LDRB     r0,[r4,r5]
000c9e  f7fffffe          BL       putchar_sc16is700
000ca2  1c6d              ADDS     r5,r5,#1              ;1800
000ca4  b2ed              UXTB     r5,r5                 ;1800
                  |L1.3238|
000ca6  42ae              CMP      r6,r5                 ;1800
000ca8  d8f8              BHI      |L1.3228|
;;;1803   	}
;;;1804   //modbus_plazma1++;
;;;1805   }
000caa  b010              ADD      sp,sp,#0x40
000cac  bd70              POP      {r4-r6,pc}
;;;1806   
                          ENDP

                  modbus_in PROC
;;;63     //-----------------------------------------------
;;;64     void modbus_in(void)
000cae  e92d4ff0          PUSH     {r4-r11,lr}
;;;65     {
;;;66     short crc16_calculated;		//βϋχθρλεμΰ θη οπθνςϋυ δΰννϋυ CRC
;;;67     short crc16_incapsulated;	//βρςπξενννΰ β οξρϋλκσ CRC
;;;68     unsigned short modbus_rx_arg0;		//βρςπξεννϋι β οξρϋλκσ οεπβϋι ΰπγσμενς
;;;69     unsigned short modbus_rx_arg1;		//βρςπξεννϋι β οξρϋλκσ βςξπξι ΰπγσμενς
;;;70     //unsigned short modbus_rx_arg2;		//βρςπξεννϋι β οξρϋλκσ ςπεςθι ΰπγσμενς
;;;71     //unsigned short modbus_rx_arg3;		//βρςπξεννϋι β οξρϋλκσ χεςβεπςϋι ΰπγσμενς
;;;72     unsigned char modbus_func;			//βρςπξεννϋι β οξρϋλκσ κξδ τσνκφθθ
;;;73     
;;;74     //modbus_plazma++;
;;;75     
;;;76     memcpy(modbus_an_buffer,modbus_rx_buffer,modbus_rx_buffer_ptr);
000cb2  4cfe              LDR      r4,|L1.4268|
000cb4  49fe              LDR      r1,|L1.4272|
000cb6  b08b              SUB      sp,sp,#0x2c           ;65
000cb8  78a2              LDRB     r2,[r4,#2]  ; modbus_rx_buffer_ptr
000cba  f101001e          ADD      r0,r1,#0x1e
000cbe  4615              MOV      r5,r2
000cc0  f7fffffe          BL       __aeabi_memcpy
;;;77     modbus_rx_counter=modbus_rx_buffer_ptr;
000cc4  70e5              STRB     r5,[r4,#3]
;;;78     modbus_rx_buffer_ptr=0;
000cc6  2600              MOVS     r6,#0
;;;79     bMODBUS_TIMEOUT=0;
;;;80     
;;;81     	
;;;82     crc16_calculated  = CRC16_2((char*)modbus_an_buffer, modbus_rx_counter-2);
000cc8  48f9              LDR      r0,|L1.4272|
000cca  70a6              STRB     r6,[r4,#2]            ;78
000ccc  7066              STRB     r6,[r4,#1]            ;79
000cce  1ea9              SUBS     r1,r5,#2
000cd0  301e              ADDS     r0,r0,#0x1e
000cd2  f7fffffe          BL       CRC16_2
000cd6  b200              SXTH     r0,r0
000cd8  4680              MOV      r8,r0
;;;83     crc16_incapsulated = *((short*)&modbus_an_buffer[modbus_rx_counter-2]);
000cda  4df5              LDR      r5,|L1.4272|
000cdc  78e0              LDRB     r0,[r4,#3]  ; modbus_rx_counter
000cde  351e              ADDS     r5,r5,#0x1e
000ce0  4428              ADD      r0,r0,r5
;;;84     
;;;85     //modbus_plazma=modbus_rx_counter;
;;;86     //modbus_plazma2=crc16_calculated;
;;;87     //modbus_plazma3=crc16_incapsulated;
;;;88     
;;;89     pvlk=0;
000ce2  4cf4              LDR      r4,|L1.4276|
000ce4  f9300c02          LDRSH    r0,[r0,#-2]           ;83
;;;90     
;;;91     
;;;92     if(modbus_an_buffer[0]=='r')
;;;93     	{
;;;94     	pvlk=1;
;;;95     	if(modbus_an_buffer[1]=='e')
;;;96     		{
;;;97     		pvlk=2;
;;;98     		if(modbus_an_buffer[2]=='a')
;;;99     			{
;;;100    			pvlk=3;
000ce8  f04f0b03          MOV      r11,#3
000cec  4681              MOV      r9,r0                 ;83
000cee  8026              STRH     r6,[r4,#0]            ;89
000cf0  7828              LDRB     r0,[r5,#0]            ;92  ; modbus_an_buffer
;;;101    			if(modbus_an_buffer[3]=='d')
;;;102    				{
;;;103    				pvlk=4;
;;;104    				/*if(modbus_an_buffer[6]==crc_87(modbus_an_buffer,6))
;;;105    					{
;;;106    					pvlk=5;
;;;107    					if(modbus_an_buffer[7]==crc_95(modbus_an_buffer,6))
;;;108    						{
;;;109    						pvlk=6;*/	
;;;110    
;;;111    							{
;;;112    							unsigned short ptr;
;;;113    							unsigned long data1,data2;
;;;114    							char temp_out[20];
;;;115    							pvlk++;
;;;116    							ptr=modbus_an_buffer[4]+(modbus_an_buffer[5]*256U);
;;;117    							data1=lc640_read_long(ptr);
;;;118    							data2=lc640_read_long(ptr+4);
;;;119    							temp_out[0]='r';
;;;120    							temp_out[1]='e';
;;;121    							temp_out[2]='a';
;;;122    							temp_out[3]='d';
;;;123    							temp_out[4]=*((char*)&ptr);
;;;124    							temp_out[5]=*(((char*)&ptr)+1);	
;;;125    							temp_out[6]=*((char*)&data1);
;;;126    							temp_out[7]=*(((char*)&data1)+1);		
;;;127    							temp_out[8]=*(((char*)&data1)+2);	
;;;128    							temp_out[9]=*(((char*)&data1)+3);		
;;;129    							temp_out[10]=*((char*)&data2);
;;;130    							temp_out[11]=*(((char*)&data2)+1);		
;;;131    							temp_out[12]=*(((char*)&data2)+2);	
;;;132    							temp_out[13]=*(((char*)&data2)+3);	
;;;133    							temp_out[14]=crc_87(temp_out,14);	
;;;134    							temp_out[15]=crc_95(temp_out,14);			
;;;135    							
;;;136    							temp_out[17]=0;
;;;137    							for (i=0;i<16;i++)
000cf2  4ef1              LDR      r6,|L1.4280|
000cf4  f04f0a05          MOV      r10,#5                ;115
000cf8  2872              CMP      r0,#0x72              ;92
000cfa  d17e              BNE      |L1.3578|
000cfc  2001              MOVS     r0,#1                 ;94
000cfe  8020              STRH     r0,[r4,#0]            ;94
000d00  7868              LDRB     r0,[r5,#1]            ;95  ; modbus_an_buffer
000d02  2865              CMP      r0,#0x65              ;95
                  |L1.3332|
000d04  d17a              BNE      |L1.3580|
000d06  2002              MOVS     r0,#2                 ;97
000d08  8020              STRH     r0,[r4,#0]            ;97
000d0a  78a8              LDRB     r0,[r5,#2]            ;98  ; modbus_an_buffer
000d0c  2861              CMP      r0,#0x61              ;98
000d0e  d1f9              BNE      |L1.3332|
000d10  f8a4b000          STRH     r11,[r4,#0]           ;100
000d14  78e8              LDRB     r0,[r5,#3]            ;101  ; modbus_an_buffer
000d16  2864              CMP      r0,#0x64              ;101
000d18  d1f4              BNE      |L1.3332|
000d1a  f8a4a000          STRH     r10,[r4,#0]           ;115
000d1e  7928              LDRB     r0,[r5,#4]            ;116  ; modbus_an_buffer
000d20  7969              LDRB     r1,[r5,#5]            ;116  ; modbus_an_buffer
000d22  eb002001          ADD      r0,r0,r1,LSL #8       ;116
000d26  b280              UXTH     r0,r0                 ;116
000d28  f8ad0014          STRH     r0,[sp,#0x14]         ;116
000d2c  4607              MOV      r7,r0                 ;116
000d2e  f7fffffe          BL       lc640_read_long
000d32  9009              STR      r0,[sp,#0x24]         ;118
000d34  1d38              ADDS     r0,r7,#4              ;118
000d36  f7fffffe          BL       lc640_read_long
000d3a  9008              STR      r0,[sp,#0x20]         ;119
000d3c  2072              MOVS     r0,#0x72              ;119
000d3e  f88d0000          STRB     r0,[sp,#0]            ;119
000d42  2065              MOVS     r0,#0x65              ;120
000d44  f88d0001          STRB     r0,[sp,#1]            ;120
000d48  2061              MOVS     r0,#0x61              ;121
000d4a  f88d0002          STRB     r0,[sp,#2]            ;121
000d4e  2064              MOVS     r0,#0x64              ;122
000d50  f88d0003          STRB     r0,[sp,#3]            ;122
000d54  f89d0014          LDRB     r0,[sp,#0x14]         ;123
000d58  f88d0004          STRB     r0,[sp,#4]            ;123
000d5c  f89d0015          LDRB     r0,[sp,#0x15]         ;124
000d60  f88d0005          STRB     r0,[sp,#5]            ;124
000d64  f89d0024          LDRB     r0,[sp,#0x24]         ;125
000d68  f88d0006          STRB     r0,[sp,#6]            ;125
000d6c  f89d0025          LDRB     r0,[sp,#0x25]         ;126
000d70  f88d0007          STRB     r0,[sp,#7]            ;126
000d74  f89d0026          LDRB     r0,[sp,#0x26]         ;127
000d78  f88d0008          STRB     r0,[sp,#8]            ;127
000d7c  f89d0027          LDRB     r0,[sp,#0x27]         ;128
000d80  f88d0009          STRB     r0,[sp,#9]            ;128
000d84  f89d0020          LDRB     r0,[sp,#0x20]         ;129
000d88  f88d000a          STRB     r0,[sp,#0xa]          ;129
000d8c  f89d0021          LDRB     r0,[sp,#0x21]         ;130
000d90  f88d000b          STRB     r0,[sp,#0xb]          ;130
000d94  f89d0022          LDRB     r0,[sp,#0x22]         ;131
000d98  f88d000c          STRB     r0,[sp,#0xc]          ;131
000d9c  f89d0023          LDRB     r0,[sp,#0x23]         ;132
000da0  f88d000d          STRB     r0,[sp,#0xd]          ;132
000da4  210e              MOVS     r1,#0xe               ;133
000da6  4668              MOV      r0,sp                 ;133
000da8  f7fffffe          BL       crc_87
000dac  f88d000e          STRB     r0,[sp,#0xe]          ;133
000db0  210e              MOVS     r1,#0xe               ;134
000db2  4668              MOV      r0,sp                 ;134
000db4  f7fffffe          BL       crc_95
000db8  f88d000f          STRB     r0,[sp,#0xf]          ;134
000dbc  2000              MOVS     r0,#0                 ;136
000dbe  f88d0011          STRB     r0,[sp,#0x11]         ;136
000dc2  7030              STRB     r0,[r6,#0]
000dc4  466f              MOV      r7,sp                 ;114
                  |L1.3526|
;;;138    								{
;;;139    								putchar_sc16is700(temp_out[i]);
000dc6  b2c0              UXTB     r0,r0
000dc8  5c38              LDRB     r0,[r7,r0]
000dca  f7fffffe          BL       putchar_sc16is700
;;;140    								temp_out[17]^=temp_out[i];
000dce  7830              LDRB     r0,[r6,#0]  ; i
000dd0  f89d1011          LDRB     r1,[sp,#0x11]
000dd4  5c3a              LDRB     r2,[r7,r0]
000dd6  1c40              ADDS     r0,r0,#1              ;137
000dd8  4051              EORS     r1,r1,r2
000dda  b2c0              UXTB     r0,r0                 ;137
000ddc  f88d1011          STRB     r1,[sp,#0x11]
000de0  7030              STRB     r0,[r6,#0]            ;137
000de2  2810              CMP      r0,#0x10              ;137
000de4  d3ef              BCC      |L1.3526|
;;;141    								}
;;;142    							putchar_sc16is700(16);
000de6  2010              MOVS     r0,#0x10
000de8  f7fffffe          BL       putchar_sc16is700
;;;143    							putchar_sc16is700(temp_out[17]^16);
000dec  f89d0011          LDRB     r0,[sp,#0x11]
000df0  f0800010          EOR      r0,r0,#0x10
000df4  f7fffffe          BL       putchar_sc16is700
;;;144    							putchar_sc16is700(0x0a);
000df8  e001              B        |L1.3582|
                  |L1.3578|
000dfa  e003              B        |L1.3588|
                  |L1.3580|
000dfc  e083              B        |L1.3846|
                  |L1.3582|
000dfe  200a              MOVS     r0,#0xa
000e00  f7fffffe          BL       putchar_sc16is700
                  |L1.3588|
;;;145    							}
;;;146    						}
;;;147    					}
;;;148    				}/*
;;;149    			} 
;;;150    		}*/	 
;;;151    	} 
;;;152    
;;;153    if(modbus_an_buffer[0]=='w')
000e04  7828              LDRB     r0,[r5,#0]  ; modbus_an_buffer
000e06  2877              CMP      r0,#0x77
000e08  d17d              BNE      |L1.3846|
;;;154    	{
;;;155    	pvlk=1;
000e0a  2001              MOVS     r0,#1
000e0c  8020              STRH     r0,[r4,#0]
;;;156    	if(modbus_an_buffer[1]=='r')
000e0e  7868              LDRB     r0,[r5,#1]  ; modbus_an_buffer
000e10  2872              CMP      r0,#0x72
000e12  d178              BNE      |L1.3846|
;;;157    		{
;;;158    		pvlk=2;
000e14  2002              MOVS     r0,#2
000e16  8020              STRH     r0,[r4,#0]
;;;159    		if(modbus_an_buffer[2]=='i')
000e18  78a8              LDRB     r0,[r5,#2]  ; modbus_an_buffer
000e1a  2869              CMP      r0,#0x69
000e1c  d173              BNE      |L1.3846|
;;;160    			{
;;;161    			pvlk=3;
000e1e  f8a4b000          STRH     r11,[r4,#0]
;;;162    			if(modbus_an_buffer[3]=='t')
000e22  78e8              LDRB     r0,[r5,#3]  ; modbus_an_buffer
000e24  2874              CMP      r0,#0x74
000e26  d16e              BNE      |L1.3846|
;;;163    				{
;;;164    				pvlk=4;
000e28  2004              MOVS     r0,#4
000e2a  8020              STRH     r0,[r4,#0]
;;;165    				if(modbus_an_buffer[4]=='e')
000e2c  7928              LDRB     r0,[r5,#4]  ; modbus_an_buffer
000e2e  2865              CMP      r0,#0x65
000e30  d169              BNE      |L1.3846|
;;;166    					{
;;;167    					pvlk=5;
;;;168    					if(modbus_an_buffer[15]==crc_87(modbus_an_buffer,15))
000e32  489f              LDR      r0,|L1.4272|
000e34  f8a4a000          STRH     r10,[r4,#0]           ;167
000e38  210f              MOVS     r1,#0xf
000e3a  301e              ADDS     r0,r0,#0x1e
000e3c  f7fffffe          BL       crc_87
000e40  7be9              LDRB     r1,[r5,#0xf]  ; modbus_an_buffer
000e42  4288              CMP      r0,r1
000e44  d178              BNE      |L1.3896|
;;;169    						{
;;;170    						pvlk=6;
000e46  2006              MOVS     r0,#6
000e48  8020              STRH     r0,[r4,#0]
;;;171    						if(modbus_an_buffer[16]==crc_95(modbus_an_buffer,15))
000e4a  4899              LDR      r0,|L1.4272|
000e4c  210f              MOVS     r1,#0xf
000e4e  301e              ADDS     r0,r0,#0x1e
000e50  f7fffffe          BL       crc_95
000e54  7c29              LDRB     r1,[r5,#0x10]  ; modbus_an_buffer
000e56  4288              CMP      r0,r1
000e58  d16e              BNE      |L1.3896|
;;;172    
;;;173    							{
;;;174    							unsigned short ptr;
;;;175    							unsigned long data1,data2;
;;;176    							char temp_out[20];
;;;177    							pvlk=7;
000e5a  2007              MOVS     r0,#7
000e5c  8020              STRH     r0,[r4,#0]
;;;178    							ptr=modbus_an_buffer[5]+(modbus_an_buffer[6]*256U);
000e5e  7968              LDRB     r0,[r5,#5]  ; modbus_an_buffer
000e60  79a9              LDRB     r1,[r5,#6]  ; modbus_an_buffer
000e62  eb002001          ADD      r0,r0,r1,LSL #8
000e66  b284              UXTH     r4,r0
000e68  f8ad4020          STRH     r4,[sp,#0x20]
;;;179    							*((char*)&data1)=modbus_an_buffer[7];
000e6c  79e8              LDRB     r0,[r5,#7]  ; modbus_an_buffer
000e6e  f88d0024          STRB     r0,[sp,#0x24]
;;;180    							*(((char*)&data1)+1)=modbus_an_buffer[8];
000e72  7a28              LDRB     r0,[r5,#8]  ; modbus_an_buffer
000e74  f88d0025          STRB     r0,[sp,#0x25]
;;;181    							*(((char*)&data1)+2)=modbus_an_buffer[9];
000e78  7a68              LDRB     r0,[r5,#9]  ; modbus_an_buffer
000e7a  f88d0026          STRB     r0,[sp,#0x26]
;;;182    							*(((char*)&data1)+3)=modbus_an_buffer[10];
000e7e  7aa8              LDRB     r0,[r5,#0xa]  ; modbus_an_buffer
000e80  f88d0027          STRB     r0,[sp,#0x27]
;;;183    							*((char*)&data2)=modbus_an_buffer[11];
000e84  7ae8              LDRB     r0,[r5,#0xb]  ; modbus_an_buffer
000e86  f88d0028          STRB     r0,[sp,#0x28]
;;;184    							*(((char*)&data2)+1)=modbus_an_buffer[12];
000e8a  7b28              LDRB     r0,[r5,#0xc]  ; modbus_an_buffer
000e8c  f88d0029          STRB     r0,[sp,#0x29]
;;;185    							*(((char*)&data2)+2)=modbus_an_buffer[13];
000e90  7b68              LDRB     r0,[r5,#0xd]  ; modbus_an_buffer
000e92  f88d002a          STRB     r0,[sp,#0x2a]
;;;186    							*(((char*)&data2)+3)=modbus_an_buffer[14];	
000e96  7ba8              LDRB     r0,[r5,#0xe]  ; modbus_an_buffer
000e98  f88d002b          STRB     r0,[sp,#0x2b]
;;;187    							lc640_write_long(ptr,data1);
000e9c  4620              MOV      r0,r4
000e9e  9909              LDR      r1,[sp,#0x24]
000ea0  f7fffffe          BL       lc640_write_long
;;;188    							lc640_write_long(ptr+4,data2);
000ea4  1d20              ADDS     r0,r4,#4
000ea6  990a              LDR      r1,[sp,#0x28]
000ea8  f7fffffe          BL       lc640_write_long
;;;189    							
;;;190    							//data1=lc640_read_long(ptr);
;;;191    							//data2=lc640_read_long(ptr+4);
;;;192    							temp_out[0]='w';
000eac  2077              MOVS     r0,#0x77
000eae  f88d0000          STRB     r0,[sp,#0]
;;;193    							temp_out[1]='r';
000eb2  2072              MOVS     r0,#0x72
000eb4  f88d0001          STRB     r0,[sp,#1]
;;;194    							temp_out[2]='i';
000eb8  2069              MOVS     r0,#0x69
000eba  f88d0002          STRB     r0,[sp,#2]
;;;195    							temp_out[3]='t';
000ebe  2074              MOVS     r0,#0x74
000ec0  f88d0003          STRB     r0,[sp,#3]
;;;196    							temp_out[4]='e';
000ec4  2065              MOVS     r0,#0x65
000ec6  f88d0004          STRB     r0,[sp,#4]
;;;197    							temp_out[5]=*((char*)&ptr);
000eca  f89d0020          LDRB     r0,[sp,#0x20]
000ece  f88d0005          STRB     r0,[sp,#5]
;;;198    							temp_out[6]=*(((char*)&ptr)+1);	
000ed2  f89d0021          LDRB     r0,[sp,#0x21]
000ed6  f88d0006          STRB     r0,[sp,#6]
;;;199    						
;;;200    							temp_out[7]=crc_87(temp_out,7);	
000eda  2107              MOVS     r1,#7
000edc  4668              MOV      r0,sp
000ede  f7fffffe          BL       crc_87
000ee2  f88d0007          STRB     r0,[sp,#7]
;;;201    							temp_out[8]=crc_95(temp_out,7);			
000ee6  2107              MOVS     r1,#7
000ee8  4668              MOV      r0,sp
000eea  f7fffffe          BL       crc_95
000eee  f88d0008          STRB     r0,[sp,#8]
;;;202    							
;;;203    							temp_out[10]=0;
000ef2  2000              MOVS     r0,#0
000ef4  f88d000a          STRB     r0,[sp,#0xa]
;;;204    							for (i=0;i<9;i++)
000ef8  7030              STRB     r0,[r6,#0]
000efa  466c              MOV      r4,sp                 ;176
                  |L1.3836|
;;;205    								{
;;;206    								putchar_sc16is700(temp_out[i]);
000efc  b2c0              UXTB     r0,r0
000efe  5c20              LDRB     r0,[r4,r0]
000f00  f7fffffe          BL       putchar_sc16is700
;;;207    								temp_out[10]^=temp_out[i];
000f04  e000              B        |L1.3848|
                  |L1.3846|
000f06  e017              B        |L1.3896|
                  |L1.3848|
000f08  7830              LDRB     r0,[r6,#0]  ; i
000f0a  f89d100a          LDRB     r1,[sp,#0xa]
000f0e  5c22              LDRB     r2,[r4,r0]
000f10  1c40              ADDS     r0,r0,#1              ;204
000f12  4051              EORS     r1,r1,r2
000f14  b2c0              UXTB     r0,r0                 ;204
000f16  f88d100a          STRB     r1,[sp,#0xa]
000f1a  7030              STRB     r0,[r6,#0]            ;204
000f1c  2809              CMP      r0,#9                 ;204
000f1e  d3ed              BCC      |L1.3836|
;;;208    								}
;;;209    							putchar_sc16is700(9);
000f20  2009              MOVS     r0,#9
000f22  f7fffffe          BL       putchar_sc16is700
;;;210    							putchar_sc16is700(temp_out[10]^9);
000f26  f89d000a          LDRB     r0,[sp,#0xa]
000f2a  f0800009          EOR      r0,r0,#9
000f2e  f7fffffe          BL       putchar_sc16is700
;;;211    							putchar_sc16is700(0x0a);
000f32  200a              MOVS     r0,#0xa
000f34  f7fffffe          BL       putchar_sc16is700
                  |L1.3896|
;;;212    							}
;;;213    						}
;;;214    					}
;;;215    				}
;;;216    		   	}
;;;217    		}
;;;218    	}
;;;219    
;;;220    modbus_func=modbus_an_buffer[1];
000f38  7868              LDRB     r0,[r5,#1]  ; modbus_an_buffer
;;;221    modbus_rx_arg0=(((unsigned short)modbus_an_buffer[2])*((unsigned short)256))+((unsigned short)modbus_an_buffer[3]);
000f3a  9003              STR      r0,[sp,#0xc]
000f3c  78e8              LDRB     r0,[r5,#3]  ; modbus_an_buffer
000f3e  78a9              LDRB     r1,[r5,#2]  ; modbus_an_buffer
;;;222    modbus_rx_arg1=(((unsigned short)modbus_an_buffer[4])*((unsigned short)256))+((unsigned short)modbus_an_buffer[5]);
;;;223    //modbus_rx_arg2=(((unsigned short)modbus_an_buffer[6])*((unsigned short)256))+((unsigned short)modbus_an_buffer[7]);
;;;224    //modbus_rx_arg3=(((unsigned short)modbus_an_buffer[8])*((unsigned short)256))+((unsigned short)modbus_an_buffer[9]);
;;;225    modbus_cmnd=(modbus_rx_arg1>>8)&0x7f;
;;;226    modbus_cmnd_cnt=(modbus_rx_arg1)&0x0f;
;;;227    
;;;228    modbus_plazma3=modbus_cmnd;
;;;229    modbus_plazma2=modbus_cmnd_cnt;
;;;230    modbus_plazma1=modbus_self_cmnd_cnt;
;;;231    
;;;232    if(crc16_calculated==crc16_incapsulated)
000f40  45c8              CMP      r8,r9
000f42  eb002001          ADD      r0,r0,r1,LSL #8       ;221
000f46  b286              UXTH     r6,r0                 ;221
000f48  7968              LDRB     r0,[r5,#5]            ;222  ; modbus_an_buffer
000f4a  7929              LDRB     r1,[r5,#4]            ;222  ; modbus_an_buffer
000f4c  eb002001          ADD      r0,r0,r1,LSL #8       ;222
000f50  b284              UXTH     r4,r0                 ;222
000f52  4856              LDR      r0,|L1.4268|
000f54  f3c42206          UBFX     r2,r4,#8,#7           ;225
000f58  f004010f          AND      r1,r4,#0xf            ;226
000f5c  7142              STRB     r2,[r0,#5]            ;225
000f5e  7101              STRB     r1,[r0,#4]            ;226
000f60  8182              STRH     r2,[r0,#0xc]          ;228
000f62  8141              STRH     r1,[r0,#0xa]          ;229
000f64  7802              LDRB     r2,[r0,#0]            ;230  ; modbus_self_cmnd_cnt
000f66  8102              STRH     r2,[r0,#8]            ;230
000f68  d172              BNE      |L1.4176|
;;;233    	{
;;;234    	if(modbus_self_cmnd_cnt==33)modbus_self_cmnd_cnt=modbus_cmnd_cnt;
000f6a  2a21              CMP      r2,#0x21
000f6c  d100              BNE      |L1.3952|
000f6e  7001              STRB     r1,[r0,#0]
                  |L1.3952|
;;;235    	modbus_plazma=modbus_an_buffer[0];
000f70  494f              LDR      r1,|L1.4272|
;;;236    	if(modbus_an_buffer[0]==200)	 //ερλθ ηΰοπξρ ξς οσλόςΰ
;;;237    		{
;;;238    		if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
;;;239    			{
;;;240    			modbus_for_pult_registers_transmit(7);
;;;241    			}
;;;242    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
;;;243    			{
;;;244    			//if(modbus_rx_arg0==1)		//
;;;245    				{
;;;246    				modbus_for_pult_registers_transmit(7);
;;;247    				tumbler_stat=(enum_tumbler_stat)(modbus_rx_arg1>>15);
;;;248    				if((tumbler_stat!=tumbler_stat_old))
;;;249    					{
;;;250    					if(tumbler_stat==tsU)
;;;251    						{
;;;252    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;253    						}
;;;254    					else lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;255    					
;;;256    					if(main_cnt>3)
;;;257    						{
;;;258    						work_stat=wsOFF;
;;;259    						restart_off();
;;;260    						}
;;;261    					}
;;;262    				tumbler_stat_old=tumbler_stat;
;;;263    				
;;;264    				}
;;;265    			 //else if(modbus_rx_arg0==0)
;;;266    			 	{
;;;267    				//modbus_plazma++;		
;;;268    				if((modbus_cmnd==61)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;269    					{
;;;270    					if(I_ug<1000)I_ug++;
;;;271    					else I_ug=((I_ug/10)+1)*10;
;;;272    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
000f72  f8dfb148          LDR      r11,|L1.4284|
000f76  311e              ADDS     r1,r1,#0x1e           ;235
000f78  4d51              LDR      r5,|L1.4288|
000f7a  7809              LDRB     r1,[r1,#0]            ;235  ; modbus_an_buffer
000f7c  4682              MOV      r10,r0                ;235
000f7e  80c1              STRH     r1,[r0,#6]            ;235
;;;273    					I_ug_block_cnt=10;
;;;274    					//lc640_write_int(EE_I_UG,I_ug);
;;;275    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;276    					}
;;;277    				
;;;278    				else if((modbus_cmnd==62)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;279    					{
;;;280    					if(I_ug<1000)I_ug--;
;;;281    					else I_ug=((I_ug/10)-1)*10;
;;;282    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;283    					I_ug_block_cnt=10;
;;;284    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;285    					}
;;;286    				else if((modbus_cmnd==63)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;287    					{
;;;288    					if(I_ug<1000)I_ug=((I_ug/10)+1)*10;
;;;289    					else I_ug=((I_ug/10)+5)*10;
;;;290    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;291    					I_ug_block_cnt=10;
;;;292    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;293    					}
;;;294    				
;;;295    				else if((modbus_cmnd==64)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;296    					{
;;;297    					if(I_ug<1000)I_ug=((I_ug/10)-1)*10;
;;;298    					else I_ug=((I_ug/10)-5)*10;
;;;299    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;300    					I_ug_block_cnt=10;
;;;301    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;302    					}
;;;303    				
;;;304    				else if((modbus_cmnd==71)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;305    					{
;;;306    					U_up++;
;;;307    					gran(&U_up,U_MIN,U_MAX);
;;;308    					U_up_block_cnt=10;
;;;309    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;310    					}
;;;311    				
;;;312    				else if((modbus_cmnd==72)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;313    					{
;;;314    					U_up--;
;;;315    					gran(&U_up,U_MIN,U_MAX);
;;;316    					U_up_block_cnt=10;
;;;317    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;318    				
;;;319    					}
;;;320    				else if((modbus_cmnd==73)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;321    					{
;;;322    					U_up=((U_up/10)+1)*10;
;;;323    					gran(&U_up,U_MIN,U_MAX);
;;;324    					U_up_block_cnt=10;
;;;325    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;326    					}
;;;327    				
;;;328    				else if((modbus_cmnd==74)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;329    					{
;;;330    					U_up=((U_up/10)-1)*10;
;;;331    					gran(&U_up,U_MIN,U_MAX);
;;;332    					U_up_block_cnt=10;
;;;333    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;334    					}
;;;335    				
;;;336    				
;;;337    				else if((modbus_cmnd==51)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ+
;;;338    					{
;;;339    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;340    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;341    						{
;;;342    						if(TIME_VISION_PULT)
;;;343    							{
;;;344    							T_PROC_GS=(((T_PROC_GS/60L)+1L)*60L);
000f80  f04f093c          MOV      r9,#0x3c
000f84  29c8              CMP      r1,#0xc8              ;236
000f86  d104              BNE      |L1.3986|
000f88  9803              LDR      r0,[sp,#0xc]          ;238
000f8a  2804              CMP      r0,#4                 ;238
000f8c  d002              BEQ      |L1.3988|
000f8e  2806              CMP      r0,#6                 ;242
000f90  d004              BEQ      |L1.3996|
                  |L1.3986|
000f92  e291              B        |L1.5304|
                  |L1.3988|
000f94  2007              MOVS     r0,#7                 ;240
000f96  f7fffffe          BL       modbus_for_pult_registers_transmit
000f9a  e28d              B        |L1.5304|
                  |L1.3996|
000f9c  2007              MOVS     r0,#7                 ;246
000f9e  f7fffffe          BL       modbus_for_pult_registers_transmit
000fa2  f8df8120          LDR      r8,|L1.4292|
000fa6  4f48              LDR      r7,|L1.4296|
000fa8  0be0              LSRS     r0,r4,#15             ;247
000faa  f8880000          STRB     r0,[r8,#0]            ;247
000fae  7839              LDRB     r1,[r7,#0]            ;248  ; tumbler_stat_old
000fb0  4288              CMP      r0,r1                 ;248
000fb2  d00e              BEQ      |L1.4050|
000fb4  2801              CMP      r0,#1                 ;250
000fb6  d03c              BEQ      |L1.4146|
000fb8  2100              MOVS     r1,#0                 ;254
                  |L1.4026|
000fba  20ea              MOVS     r0,#0xea              ;254
000fbc  f7fffffe          BL       lc640_write_int
000fc0  4842              LDR      r0,|L1.4300|
000fc2  f9b00000          LDRSH    r0,[r0,#0]            ;256  ; main_cnt
000fc6  2803              CMP      r0,#3                 ;256
000fc8  dd03              BLE      |L1.4050|
000fca  2000              MOVS     r0,#0                 ;258
000fcc  7028              STRB     r0,[r5,#0]            ;258
000fce  f7fffffe          BL       restart_off
                  |L1.4050|
000fd2  f898c000          LDRB     r12,[r8,#0]           ;262  ; tumbler_stat
000fd6  f887c000          STRB     r12,[r7,#0]           ;262
000fda  46c6              MOV      lr,r8                 ;262
000fdc  f89a3005          LDRB     r3,[r10,#5]           ;268  ; modbus_cmnd
000fe0  f8df80ec          LDR      r8,|L1.4304|
000fe4  270a              MOVS     r7,#0xa               ;144
000fe6  4650              MOV      r0,r10                ;268
000fe8  f44f717a          MOV      r1,#0x3e8             ;270
000fec  2b3d              CMP      r3,#0x3d              ;268
000fee  d022              BEQ      |L1.4150|
000ff0  2b3e              CMP      r3,#0x3e              ;278
000ff2  d039              BEQ      |L1.4200|
000ff4  2b3f              CMP      r3,#0x3f              ;286
000ff6  d04b              BEQ      |L1.4240|
000ff8  2b40              CMP      r3,#0x40              ;295
000ffa  d079              BEQ      |L1.4336|
000ffc  f8df80d4          LDR      r8,|L1.4308|
001000  2b47              CMP      r3,#0x47              ;304
001002  d076              BEQ      |L1.4338|
001004  2b48              CMP      r3,#0x48              ;312
001006  d075              BEQ      |L1.4340|
001008  2b49              CMP      r3,#0x49              ;320
00100a  d074              BEQ      |L1.4342|
00100c  2b4a              CMP      r3,#0x4a              ;328
00100e  d073              BEQ      |L1.4344|
001010  4931              LDR      r1,|L1.4312|
;;;345    							T_PROC_GS_block_cnt=10;
001012  4a32              LDR      r2,|L1.4316|
;;;346    							}
;;;347    						else
;;;348    							{
;;;349    							T_PROC_GS++;
;;;350    							T_PROC_GS_block_cnt=10;
;;;351    							}
;;;352    				
;;;353    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;354    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;355    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;356    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;357    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;358    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;359    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;360    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;361    							}												//(T_PROC_GS_MODE=0)
;;;362    					
;;;363    						else if(T_PROC_GS<30)
;;;364    							{
;;;365    							T_PROC_GS=29;
;;;366    							if(T_PROC_GS_MODE!=1)
;;;367    								{
;;;368    								T_PROC_GS_MODE=1;
;;;369    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;370    								}
;;;371    							}
;;;372    						else 
;;;373    							{
;;;374    							if(T_PROC_GS_MODE!=0)
;;;375    								{
;;;376    								T_PROC_GS_MODE=0;
;;;377    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;378    								}
;;;379    							}			
;;;380    						}
;;;381    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;382    						{
;;;383    						if(TIME_VISION_PULT)
;;;384    							{
;;;385    							T_PROC_PS=(((T_PROC_PS/60L)+1L)*60L);
;;;386    							T_PROC_PS_block_cnt=10;
001014  f8dfa0c8          LDR      r10,|L1.4320|
001018  f8df80c8          LDR      r8,|L1.4324|
00101c  2b33              CMP      r3,#0x33              ;337
00101e  d06c              BEQ      |L1.4346|
;;;387    							}
;;;388    						else
;;;389    							{
;;;390    							T_PROC_PS++;
;;;391    							T_PROC_PS_block_cnt=10;
;;;392    							}
;;;393    				
;;;394    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;395    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;396    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;397    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;398    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;399    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;400    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;401    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;402    							}												//(T_PROC_PS_MODE=0)
;;;403    					
;;;404    						else if(T_PROC_PS<30)
;;;405    							{
;;;406    							T_PROC_PS=29;
;;;407    							if(T_PROC_PS_MODE!=1)
;;;408    								{
;;;409    								T_PROC_PS_MODE=1;
;;;410    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;411    								}
;;;412    							}
;;;413    						else 
;;;414    							{
;;;415    							if(T_PROC_PS_MODE!=0)
;;;416    								{
;;;417    								T_PROC_PS_MODE=0;
;;;418    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;419    								}
;;;420    							}			
;;;421    						}
;;;422    					}
;;;423    				else if((modbus_cmnd==53)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ++
001020  2b35              CMP      r3,#0x35
001022  d06b              BEQ      |L1.4348|
;;;424    					{
;;;425    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;426    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;427    						{
;;;428    						if(TIME_VISION_PULT)
;;;429    							{
;;;430    							T_PROC_GS=(((T_PROC_GS/600L)+1L)*600L);
;;;431    							T_PROC_GS_block_cnt=10;
;;;432    							}
;;;433    						else
;;;434    							{
;;;435    							T_PROC_GS=(((T_PROC_GS/10L)+1L)*10L);
;;;436    							T_PROC_GS_block_cnt=10;
;;;437    							}
;;;438    				
;;;439    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;440    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;441    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;442    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;443    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;444    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;445    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;446    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;447    							}												//(T_PROC_GS_MODE=0)
;;;448    					
;;;449    						else if(T_PROC_GS<30)
;;;450    							{
;;;451    							T_PROC_GS=29;
;;;452    							if(T_PROC_GS_MODE!=1)
;;;453    								{
;;;454    								T_PROC_GS_MODE=1;
;;;455    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;456    								}
;;;457    							}
;;;458    						else 
;;;459    							{
;;;460    							if(T_PROC_GS_MODE!=0)
;;;461    								{
;;;462    								T_PROC_GS_MODE=0;
;;;463    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;464    								}
;;;465    							}			
;;;466    						}
;;;467    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;468    						{
;;;469    						if(TIME_VISION_PULT)
;;;470    							{
;;;471    							T_PROC_PS=(((T_PROC_PS/600L)+1L)*600L);
;;;472    							T_PROC_PS_block_cnt=10;
;;;473    							}
;;;474    						else
;;;475    							{
;;;476    							T_PROC_PS=(((T_PROC_PS/10L)+1L)*10L);
;;;477    							T_PROC_PS_block_cnt=10;
;;;478    							}
;;;479    				
;;;480    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;481    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;482    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;483    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;484    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;485    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;486    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;487    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;488    							}												//(T_PROC_PS_MODE=0)
;;;489    					
;;;490    						else if(T_PROC_PS<30)
;;;491    							{
;;;492    							T_PROC_PS=29;
;;;493    							if(T_PROC_PS_MODE!=1)
;;;494    								{
;;;495    								T_PROC_PS_MODE=1;
;;;496    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;497    								}
;;;498    							}
;;;499    						else 
;;;500    							{
;;;501    							if(T_PROC_PS_MODE!=0)
;;;502    								{
;;;503    								T_PROC_PS_MODE=0;
;;;504    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;505    								}
;;;506    							}				
;;;507    						}
;;;508    					}
;;;509    				
;;;510    				else if((modbus_cmnd==52)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ-
001024  2b34              CMP      r3,#0x34
001026  d06a              BEQ      |L1.4350|
;;;511    					{
;;;512    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;513    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;514    						{
;;;515    						if(TIME_VISION_PULT)
;;;516    							{
;;;517    							T_PROC_GS=(((T_PROC_GS/60L)-1L)*60L);
;;;518    							T_PROC_GS_block_cnt=10;
;;;519    							}
;;;520    						else
;;;521    							{
;;;522    							T_PROC_GS--;
;;;523    							T_PROC_GS_block_cnt=10;
;;;524    							}
;;;525    				
;;;526    							
;;;527    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;528    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;529    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;530    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;531    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;532    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;533    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;534    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;535    							}												//(T_PROC_GS_MODE=0)
;;;536    					
;;;537    						else if(T_PROC_GS<30)
;;;538    							{
;;;539    							T_PROC_GS=29;
;;;540    							if(T_PROC_GS_MODE!=1)
;;;541    								{
;;;542    								T_PROC_GS_MODE=1;
;;;543    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;544    								}
;;;545    							}
;;;546    						else 
;;;547    							{
;;;548    							if(T_PROC_GS_MODE!=0)
;;;549    								{
;;;550    								T_PROC_GS_MODE=0;
;;;551    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;552    								}
;;;553    							}
;;;554    							
;;;555    						}
;;;556    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;557    						{
;;;558    						if(TIME_VISION_PULT)
;;;559    							{
;;;560    							T_PROC_PS=(((T_PROC_PS/60L)-1L)*60L);
;;;561    							T_PROC_PS_block_cnt=10;
;;;562    							}
;;;563    						else
;;;564    							{
;;;565    							T_PROC_PS--;
;;;566    							T_PROC_PS_block_cnt=10;
;;;567    							}
;;;568    				
;;;569    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;570    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;571    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;572    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;573    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;574    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;575    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;576    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;577    							}												//(T_PROC_PS_MODE=0)
;;;578    					
;;;579    						else if(T_PROC_PS<30)
;;;580    							{
;;;581    							T_PROC_PS=29;
;;;582    							if(T_PROC_PS_MODE!=1)
;;;583    								{
;;;584    								T_PROC_PS_MODE=1;
;;;585    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;586    								}
;;;587    							}
;;;588    						else 
;;;589    							{
;;;590    							if(T_PROC_PS_MODE!=0)
;;;591    								{
;;;592    								T_PROC_PS_MODE=0;
;;;593    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;594    								}
;;;595    							}			
;;;596    						}
;;;597    					}
;;;598    				else if((modbus_cmnd==54)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ--
001028  2b36              CMP      r3,#0x36
00102a  d069              BEQ      |L1.4352|
;;;599    					{
;;;600    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;601    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;602    						{
;;;603    						if(TIME_VISION_PULT)
;;;604    							{
;;;605    							T_PROC_GS=(((T_PROC_GS/600L)-1L)*600L);
;;;606    							T_PROC_GS_block_cnt=10;
;;;607    							}
;;;608    						else
;;;609    							{
;;;610    							T_PROC_GS=(((T_PROC_GS/10L)-1L)*10L);
;;;611    							T_PROC_GS_block_cnt=10;
;;;612    							}
;;;613    				
;;;614    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;615    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;616    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;617    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;618    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;619    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;620    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;621    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;622    							}												//(T_PROC_GS_MODE=0)
;;;623    					
;;;624    						else if(T_PROC_GS<30)
;;;625    							{
;;;626    							T_PROC_GS=29;
;;;627    							if(T_PROC_GS_MODE!=1)
;;;628    								{
;;;629    								T_PROC_GS_MODE=1;
;;;630    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;631    								}
;;;632    							}
;;;633    						else 
;;;634    							{
;;;635    							if(T_PROC_GS_MODE!=0)
;;;636    								{
;;;637    								T_PROC_GS_MODE=0;
;;;638    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;639    								}
;;;640    							}
;;;641    										
;;;642    						}
;;;643    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;644    						{
;;;645    						if(TIME_VISION_PULT)
;;;646    							{
;;;647    							T_PROC_PS=(((T_PROC_PS/600L)-1L)*600L);
;;;648    							T_PROC_PS_block_cnt=10;
;;;649    							}
;;;650    						else
;;;651    							{
;;;652    							T_PROC_PS=(((T_PROC_PS/10L)-1L)*10L);
;;;653    							T_PROC_PS_block_cnt=10;
;;;654    							}
;;;655    				
;;;656    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;657    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;658    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;659    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;660    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;661    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;662    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;663    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;664    							}												//(T_PROC_PS_MODE=0)
;;;665    					
;;;666    						else if(T_PROC_PS<30)
;;;667    							{
;;;668    							T_PROC_PS=29;
;;;669    							if(T_PROC_PS_MODE!=1)
;;;670    								{
;;;671    								T_PROC_PS_MODE=1;
;;;672    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;673    								}
;;;674    							}
;;;675    						else 
;;;676    							{
;;;677    							if(T_PROC_PS_MODE!=0)
;;;678    								{
;;;679    								T_PROC_PS_MODE=0;
;;;680    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;681    								}
;;;682    							}	
;;;683    						}
;;;684    					}
;;;685    				
;;;686    				
;;;687    			//	else if((modbus_rx_arg1>>8)==90)
;;;688    			else if((modbus_cmnd==1)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
00102c  2b01              CMP      r3,#1
00102e  d068              BEQ      |L1.4354|
                  |L1.4144|
001030  e242              B        |L1.5304|
                  |L1.4146|
001032  2101              MOVS     r1,#1                 ;252
001034  e7c1              B        |L1.4026|
                  |L1.4150|
001036  7902              LDRB     r2,[r0,#4]            ;268  ; modbus_cmnd_cnt
001038  f89a0000          LDRB     r0,[r10,#0]           ;268  ; modbus_self_cmnd_cnt
00103c  4282              CMP      r2,r0                 ;268
00103e  d0a8              BEQ      |L1.3986|
001040  4829              LDR      r0,|L1.4328|
001042  f9b02000          LDRSH    r2,[r0,#0]            ;270  ; I_ug
001046  428a              CMP      r2,r1                 ;270
001048  da03              BGE      |L1.4178|
00104a  1c52              ADDS     r2,r2,#1              ;270
00104c  8002              STRH     r2,[r0,#0]            ;270
00104e  e004              B        |L1.4186|
                  |L1.4176|
001050  e25b              B        |L1.5386|
                  |L1.4178|
001052  fb92f1f7          SDIV     r1,r2,r7              ;271
001056  1c49              ADDS     r1,r1,#1              ;271
001058  e063              B        |L1.4386|
                  |L1.4186|
00105a  4824              LDR      r0,|L1.4332|
00105c  f9bb2000          LDRSH    r2,[r11,#0]           ;272  ; I_MAX_IPS
001060  f9b01000          LDRSH    r1,[r0,#0]            ;272  ; I_MIN_IPS
001064  4820              LDR      r0,|L1.4328|
001066  e095              B        |L1.4500|
                  |L1.4200|
001068  7902              LDRB     r2,[r0,#4]            ;278  ; modbus_cmnd_cnt
00106a  f89a0000          LDRB     r0,[r10,#0]           ;278  ; modbus_self_cmnd_cnt
00106e  4282              CMP      r2,r0                 ;278
                  |L1.4208|
001070  d08f              BEQ      |L1.3986|
001072  4a1d              LDR      r2,|L1.4328|
001074  f9b20000          LDRSH    r0,[r2,#0]            ;280  ; I_ug
001078  4288              CMP      r0,r1                 ;280
00107a  da01              BGE      |L1.4224|
00107c  1e40              SUBS     r0,r0,#1              ;280
00107e  e005              B        |L1.4236|
                  |L1.4224|
001080  fb90f0f7          SDIV     r0,r0,r7              ;281
001084  1e40              SUBS     r0,r0,#1              ;281
001086  eb000080          ADD      r0,r0,r0,LSL #2       ;281
00108a  0040              LSLS     r0,r0,#1              ;281
                  |L1.4236|
00108c  8010              STRH     r0,[r2,#0]            ;281
00108e  e7e4              B        |L1.4186|
                  |L1.4240|
001090  7902              LDRB     r2,[r0,#4]            ;286  ; modbus_cmnd_cnt
001092  f89a0000          LDRB     r0,[r10,#0]           ;286  ; modbus_self_cmnd_cnt
001096  4282              CMP      r2,r0                 ;286
                  |L1.4248|
001098  d0ca              BEQ      |L1.4144|
00109a  4813              LDR      r0,|L1.4328|
00109c  f9b02000          LDRSH    r2,[r0,#0]            ;288  ; I_ug
0010a0  428a              CMP      r2,r1                 ;288
0010a2  dbd6              BLT      |L1.4178|
0010a4  fb92f1f7          SDIV     r1,r2,r7              ;289
0010a8  1d49              ADDS     r1,r1,#5              ;289
0010aa  e03a              B        |L1.4386|
                  |L1.4268|
                          DCD      ||.data||
                  |L1.4272|
                          DCD      ||area_number.5||
                  |L1.4276|
                          DCD      pvlk
                  |L1.4280|
                          DCD      i
                  |L1.4284|
                          DCD      I_MAX_IPS
                  |L1.4288|
                          DCD      work_stat
                  |L1.4292|
                          DCD      tumbler_stat
                  |L1.4296|
                          DCD      tumbler_stat_old
                  |L1.4300|
                          DCD      main_cnt
                  |L1.4304|
                          DCD      I_ug_block_cnt
                  |L1.4308|
                          DCD      U_up_block_cnt
                  |L1.4312|
                          DCD      TIME_VISION_PULT
                  |L1.4316|
                          DCD      T_PROC_GS_block_cnt
                  |L1.4320|
                          DCD      T_PROC_PS_block_cnt
                  |L1.4324|
                          DCD      main_menu_mode
                  |L1.4328|
                          DCD      I_ug
                  |L1.4332|
                          DCD      I_MIN_IPS
                  |L1.4336|
0010f0  e008              B        |L1.4356|
                  |L1.4338|
0010f2  e01b              B        |L1.4396|
                  |L1.4340|
0010f4  e023              B        |L1.4414|
                  |L1.4342|
0010f6  e02b              B        |L1.4432|
                  |L1.4344|
0010f8  e036              B        |L1.4456|
                  |L1.4346|
0010fa  e054              B        |L1.4518|
                  |L1.4348|
0010fc  e0a4              B        |L1.4680|
                  |L1.4350|
0010fe  e0f8              B        |L1.4850|
                  |L1.4352|
001100  e12a              B        |L1.4952|
                  |L1.4354|
001102  e180              B        |L1.5126|
                  |L1.4356|
001104  7902              LDRB     r2,[r0,#4]            ;295  ; modbus_cmnd_cnt
001106  f89a0000          LDRB     r0,[r10,#0]           ;295  ; modbus_self_cmnd_cnt
00110a  4282              CMP      r2,r0                 ;295
00110c  d090              BEQ      |L1.4144|
00110e  48ff              LDR      r0,|L1.5388|
001110  f9b02000          LDRSH    r2,[r0,#0]            ;297  ; I_ug
001114  428a              CMP      r2,r1                 ;297
001116  fb92f1f7          SDIV     r1,r2,r7              ;298
00111a  da01              BGE      |L1.4384|
00111c  1e49              SUBS     r1,r1,#1              ;297
00111e  e000              B        |L1.4386|
                  |L1.4384|
001120  1f49              SUBS     r1,r1,#5              ;298
                  |L1.4386|
001122  eb010181          ADD      r1,r1,r1,LSL #2       ;298
001126  0049              LSLS     r1,r1,#1              ;298
001128  8001              STRH     r1,[r0,#0]            ;298
00112a  e796              B        |L1.4186|
                  |L1.4396|
00112c  7901              LDRB     r1,[r0,#4]            ;304  ; modbus_cmnd_cnt
00112e  f89a0000          LDRB     r0,[r10,#0]           ;304  ; modbus_self_cmnd_cnt
001132  4281              CMP      r1,r0                 ;304
001134  d09c              BEQ      |L1.4208|
001136  48f6              LDR      r0,|L1.5392|
001138  8801              LDRH     r1,[r0,#0]            ;306  ; U_up
00113a  1c49              ADDS     r1,r1,#1              ;306
00113c  e022              B        |L1.4484|
                  |L1.4414|
00113e  7901              LDRB     r1,[r0,#4]            ;312  ; modbus_cmnd_cnt
001140  f89a0000          LDRB     r0,[r10,#0]           ;312  ; modbus_self_cmnd_cnt
001144  4281              CMP      r1,r0                 ;312
001146  d093              BEQ      |L1.4208|
001148  48f1              LDR      r0,|L1.5392|
00114a  8801              LDRH     r1,[r0,#0]            ;314  ; U_up
00114c  1e49              SUBS     r1,r1,#1              ;314
00114e  e019              B        |L1.4484|
                  |L1.4432|
001150  7901              LDRB     r1,[r0,#4]            ;320  ; modbus_cmnd_cnt
001152  f89a0000          LDRB     r0,[r10,#0]           ;320  ; modbus_self_cmnd_cnt
001156  4281              CMP      r1,r0                 ;320
001158  d08a              BEQ      |L1.4208|
00115a  48ed              LDR      r0,|L1.5392|
00115c  f9b01000          LDRSH    r1,[r0,#0]            ;322  ; U_up
001160  fb91f1f7          SDIV     r1,r1,r7              ;322
001164  1c49              ADDS     r1,r1,#1              ;322
001166  e00a              B        |L1.4478|
                  |L1.4456|
001168  7901              LDRB     r1,[r0,#4]            ;328  ; modbus_cmnd_cnt
00116a  f89a0000          LDRB     r0,[r10,#0]           ;328  ; modbus_self_cmnd_cnt
00116e  4281              CMP      r1,r0                 ;328
001170  d092              BEQ      |L1.4248|
001172  48e7              LDR      r0,|L1.5392|
001174  f9b01000          LDRSH    r1,[r0,#0]            ;330  ; U_up
001178  fb91f1f7          SDIV     r1,r1,r7              ;330
00117c  1e49              SUBS     r1,r1,#1              ;330
                  |L1.4478|
00117e  eb010181          ADD      r1,r1,r1,LSL #2       ;330
001182  0049              LSLS     r1,r1,#1              ;330
                  |L1.4484|
001184  8001              STRH     r1,[r0,#0]            ;330
001186  48e3              LDR      r0,|L1.5396|
001188  f9b02000          LDRSH    r2,[r0,#0]            ;331  ; U_MAX
00118c  48e2              LDR      r0,|L1.5400|
00118e  f9b01000          LDRSH    r1,[r0,#0]            ;331  ; U_MIN
001192  48df              LDR      r0,|L1.5392|
                  |L1.4500|
001194  f7fffffe          BL       gran
001198  f8a87000          STRH     r7,[r8,#0]            ;332
00119c  f89a1004          LDRB     r1,[r10,#4]           ;333  ; modbus_cmnd_cnt
0011a0  f88a1000          STRB     r1,[r10,#0]           ;333
                  |L1.4516|
0011a4  e188              B        |L1.5304|
                  |L1.4518|
0011a6  7903              LDRB     r3,[r0,#4]            ;337  ; modbus_cmnd_cnt
0011a8  f890c000          LDRB     r12,[r0,#0]           ;337  ; modbus_self_cmnd_cnt
0011ac  4563              CMP      r3,r12                ;337
0011ae  d0f9              BEQ      |L1.4516|
0011b0  7003              STRB     r3,[r0,#0]            ;339
0011b2  f8980000          LDRB     r0,[r8,#0]            ;340  ; main_menu_mode
0011b6  782b              LDRB     r3,[r5,#0]            ;340  ; work_stat
0011b8  ea500c03          ORRS     r12,r0,r3             ;340
0011bc  d002              BEQ      |L1.4548|
0011be  2801              CMP      r0,#1                 ;381
0011c0  d022              BEQ      |L1.4616|
0011c2  e179              B        |L1.5304|
                  |L1.4548|
0011c4  8808              LDRH     r0,[r1,#0]            ;342  ; TIME_VISION_PULT
0011c6  2800              CMP      r0,#0                 ;342
0011c8  48d4              LDR      r0,|L1.5404|
0011ca  d007              BEQ      |L1.4572|
0011cc  6803              LDR      r3,[r0,#0]            ;344  ; T_PROC_GS
0011ce  fb93f1f9          SDIV     r1,r3,r9              ;344
0011d2  1c49              ADDS     r1,r1,#1              ;344
0011d4  ebc11101          RSB      r1,r1,r1,LSL #4       ;344
0011d8  0089              LSLS     r1,r1,#2              ;344
0011da  e001              B        |L1.4576|
                  |L1.4572|
0011dc  6801              LDR      r1,[r0,#0]            ;349  ; T_PROC_GS
0011de  1c49              ADDS     r1,r1,#1              ;349
                  |L1.4576|
0011e0  6001              STR      r1,[r0,#0]            ;349  ; T_PROC_GS
0011e2  e0d5              B        |L1.5008|
                  |L1.4580|
0011e4  1c49              ADDS     r1,r1,#1              ;355
0011e6  e000              B        |L1.4586|
                  |L1.4584|
0011e8  211d              MOVS     r1,#0x1d              ;365
                  |L1.4586|
0011ea  6001              STR      r1,[r0,#0]            ;626  ; T_PROC_GS
                  |L1.4588|
0011ec  48cc              LDR      r0,|L1.5408|
0011ee  8801              LDRH     r1,[r0,#0]            ;366  ; T_PROC_GS_MODE
0011f0  2901              CMP      r1,#1                 ;366
0011f2  d0d7              BEQ      |L1.4516|
0011f4  2101              MOVS     r1,#1                 ;619
0011f6  e004              B        |L1.4610|
                  |L1.4600|
0011f8  48c9              LDR      r0,|L1.5408|
0011fa  8801              LDRH     r1,[r0,#0]            ;374  ; T_PROC_GS_MODE
0011fc  2900              CMP      r1,#0                 ;374
0011fe  d0d1              BEQ      |L1.4516|
001200  2100              MOVS     r1,#0                 ;637
                  |L1.4610|
001202  8001              STRH     r1,[r0,#0]            ;358
001204  20ee              MOVS     r0,#0xee              ;359
001206  e01c              B        |L1.4674|
                  |L1.4616|
001208  2b00              CMP      r3,#0                 ;381
00120a  d1cb              BNE      |L1.4516|
00120c  8808              LDRH     r0,[r1,#0]            ;383  ; TIME_VISION_PULT
00120e  2800              CMP      r0,#0                 ;383
001210  48c4              LDR      r0,|L1.5412|
001212  d004              BEQ      |L1.4638|
001214  6802              LDR      r2,[r0,#0]            ;385  ; T_PROC_PS
001216  fb92f1f9          SDIV     r1,r2,r9              ;385
00121a  1c49              ADDS     r1,r1,#1              ;385
00121c  e090              B        |L1.4928|
                  |L1.4638|
00121e  6801              LDR      r1,[r0,#0]            ;390  ; T_PROC_PS
001220  1c49              ADDS     r1,r1,#1              ;390
                  |L1.4642|
001222  6001              STR      r1,[r0,#0]            ;390  ; T_PROC_PS
001224  e05b              B        |L1.4830|
                  |L1.4646|
001226  6001              STR      r1,[r0,#0]            ;406  ; T_PROC_PS
                  |L1.4648|
001228  48bf              LDR      r0,|L1.5416|
00122a  8801              LDRH     r1,[r0,#0]            ;407  ; T_PROC_PS_MODE
00122c  2901              CMP      r1,#1                 ;407
00122e  d0b9              BEQ      |L1.4516|
001230  2101              MOVS     r1,#1                 ;661
001232  e004              B        |L1.4670|
                  |L1.4660|
001234  48bc              LDR      r0,|L1.5416|
001236  8801              LDRH     r1,[r0,#0]            ;415  ; T_PROC_PS_MODE
001238  2900              CMP      r1,#0                 ;415
00123a  d0b3              BEQ      |L1.4516|
00123c  2100              MOVS     r1,#0                 ;679
                  |L1.4670|
00123e  8001              STRH     r1,[r0,#0]            ;417
001240  20f0              MOVS     r0,#0xf0              ;418
                  |L1.4674|
001242  f7fffffe          BL       lc640_write_int
001246  e137              B        |L1.5304|
                  |L1.4680|
001248  7903              LDRB     r3,[r0,#4]            ;423  ; modbus_cmnd_cnt
00124a  f890c000          LDRB     r12,[r0,#0]           ;423  ; modbus_self_cmnd_cnt
00124e  4563              CMP      r3,r12                ;423
001250  d0a8              BEQ      |L1.4516|
001252  7003              STRB     r3,[r0,#0]            ;425
001254  f8980000          LDRB     r0,[r8,#0]            ;426  ; main_menu_mode
001258  782b              LDRB     r3,[r5,#0]            ;426  ; work_stat
00125a  ea500c03          ORRS     r12,r0,r3             ;426
00125e  d002              BEQ      |L1.4710|
001260  2801              CMP      r0,#1                 ;467
001262  d025              BEQ      |L1.4784|
001264  e128              B        |L1.5304|
                  |L1.4710|
001266  8808              LDRH     r0,[r1,#0]            ;428  ; TIME_VISION_PULT
001268  b158              CBZ      r0,|L1.4738|
00126a  49ac              LDR      r1,|L1.5404|
00126c  f44f7016          MOV      r0,#0x258             ;430
001270  680b              LDR      r3,[r1,#0]            ;430  ; T_PROC_GS
001272  fb93f0f0          SDIV     r0,r3,r0              ;430
001276  1c40              ADDS     r0,r0,#1              ;430
001278  f44f7316          MOV      r3,#0x258             ;430
00127c  4358              MULS     r0,r3,r0              ;430
00127e  6008              STR      r0,[r1,#0]            ;431  ; T_PROC_GS
001280  e008              B        |L1.4756|
                  |L1.4738|
001282  48a6              LDR      r0,|L1.5404|
001284  6801              LDR      r1,[r0,#0]            ;435  ; T_PROC_GS
001286  fb91f1f7          SDIV     r1,r1,r7              ;435
00128a  1c49              ADDS     r1,r1,#1              ;435
00128c  eb010181          ADD      r1,r1,r1,LSL #2       ;435
001290  0049              LSLS     r1,r1,#1              ;435
001292  6001              STR      r1,[r0,#0]            ;435  ; T_PROC_GS
                  |L1.4756|
001294  49a1              LDR      r1,|L1.5404|
001296  48a5              LDR      r0,|L1.5420|
001298  8017              STRH     r7,[r2,#0]            ;436
00129a  680a              LDR      r2,[r1,#0]            ;439  ; T_PROC_GS
00129c  8800              LDRH     r0,[r0,#0]            ;439  ; T_PROC_MAX
00129e  4282              CMP      r2,r0                 ;439
0012a0  dd01              BLE      |L1.4774|
0012a2  1c40              ADDS     r0,r0,#1              ;441
0012a4  e002              B        |L1.4780|
                  |L1.4774|
0012a6  2a1e              CMP      r2,#0x1e              ;449
0012a8  daa6              BGE      |L1.4600|
0012aa  201d              MOVS     r0,#0x1d              ;451
                  |L1.4780|
0012ac  6008              STR      r0,[r1,#0]            ;451  ; T_PROC_GS
0012ae  e79d              B        |L1.4588|
                  |L1.4784|
0012b0  2b00              CMP      r3,#0                 ;467
0012b2  d12c              BNE      |L1.4878|
0012b4  8808              LDRH     r0,[r1,#0]            ;469  ; TIME_VISION_PULT
0012b6  499b              LDR      r1,|L1.5412|
0012b8  b148              CBZ      r0,|L1.4814|
0012ba  680a              LDR      r2,[r1,#0]            ;471  ; T_PROC_PS
0012bc  f44f7016          MOV      r0,#0x258             ;471
0012c0  fb92f0f0          SDIV     r0,r2,r0              ;471
0012c4  1c40              ADDS     r0,r0,#1              ;471
0012c6  f44f7216          MOV      r2,#0x258             ;471
0012ca  4350              MULS     r0,r2,r0              ;471
0012cc  e006              B        |L1.4828|
                  |L1.4814|
0012ce  6808              LDR      r0,[r1,#0]            ;476  ; T_PROC_PS
0012d0  fb90f0f7          SDIV     r0,r0,r7              ;476
0012d4  1c40              ADDS     r0,r0,#1              ;476
0012d6  eb000080          ADD      r0,r0,r0,LSL #2       ;476
0012da  0040              LSLS     r0,r0,#1              ;476
                  |L1.4828|
0012dc  6008              STR      r0,[r1,#0]            ;476  ; T_PROC_PS
                  |L1.4830|
0012de  4891              LDR      r0,|L1.5412|
0012e0  4992              LDR      r1,|L1.5420|
0012e2  f8aa7000          STRH     r7,[r10,#0]           ;566
0012e6  6802              LDR      r2,[r0,#0]            ;394  ; T_PROC_PS
0012e8  8809              LDRH     r1,[r1,#0]            ;394  ; T_PROC_MAX
0012ea  428a              CMP      r2,r1                 ;394
0012ec  dd2f              BLE      |L1.4942|
0012ee  1c49              ADDS     r1,r1,#1              ;571
0012f0  e799              B        |L1.4646|
                  |L1.4850|
0012f2  7903              LDRB     r3,[r0,#4]            ;510  ; modbus_cmnd_cnt
0012f4  f890c000          LDRB     r12,[r0,#0]           ;510  ; modbus_self_cmnd_cnt
0012f8  4563              CMP      r3,r12                ;510
0012fa  d008              BEQ      |L1.4878|
0012fc  7003              STRB     r3,[r0,#0]            ;512
0012fe  f8980000          LDRB     r0,[r8,#0]            ;513  ; main_menu_mode
001302  782b              LDRB     r3,[r5,#0]            ;513  ; work_stat
001304  ea500c03          ORRS     r12,r0,r3             ;513
001308  d002              BEQ      |L1.4880|
00130a  2801              CMP      r0,#1                 ;556
00130c  d00f              BEQ      |L1.4910|
                  |L1.4878|
00130e  e0d3              B        |L1.5304|
                  |L1.4880|
001310  8808              LDRH     r0,[r1,#0]            ;515  ; TIME_VISION_PULT
001312  b140              CBZ      r0,|L1.4902|
001314  4981              LDR      r1,|L1.5404|
001316  680b              LDR      r3,[r1,#0]            ;517  ; T_PROC_GS
001318  fb93f0f9          SDIV     r0,r3,r9              ;517
00131c  1e40              SUBS     r0,r0,#1              ;517
00131e  ebc01000          RSB      r0,r0,r0,LSL #4       ;517
001322  0080              LSLS     r0,r0,#2              ;517
001324  e033              B        |L1.5006|
                  |L1.4902|
001326  487d              LDR      r0,|L1.5404|
001328  6801              LDR      r1,[r0,#0]            ;522  ; T_PROC_GS
00132a  1e49              SUBS     r1,r1,#1              ;522
00132c  e758              B        |L1.4576|
                  |L1.4910|
00132e  bb0b              CBNZ     r3,|L1.4980|
001330  8808              LDRH     r0,[r1,#0]            ;558  ; TIME_VISION_PULT
001332  2800              CMP      r0,#0                 ;558
001334  487b              LDR      r0,|L1.5412|
001336  d007              BEQ      |L1.4936|
001338  6802              LDR      r2,[r0,#0]            ;560  ; T_PROC_PS
00133a  fb92f1f9          SDIV     r1,r2,r9              ;560
00133e  1e49              SUBS     r1,r1,#1              ;560
                  |L1.4928|
001340  ebc11101          RSB      r1,r1,r1,LSL #4       ;560
001344  0089              LSLS     r1,r1,#2              ;560
001346  e76c              B        |L1.4642|
                  |L1.4936|
001348  6801              LDR      r1,[r0,#0]            ;565  ; T_PROC_PS
00134a  1e49              SUBS     r1,r1,#1              ;565
00134c  e769              B        |L1.4642|
                  |L1.4942|
00134e  2a1e              CMP      r2,#0x1e              ;579
                  |L1.4944|
001350  f6bfaf70          BGE      |L1.4660|
001354  211d              MOVS     r1,#0x1d              ;581
001356  e766              B        |L1.4646|
                  |L1.4952|
001358  7903              LDRB     r3,[r0,#4]            ;598  ; modbus_cmnd_cnt
00135a  f890c000          LDRB     r12,[r0,#0]           ;598  ; modbus_self_cmnd_cnt
00135e  4563              CMP      r3,r12                ;598
001360  d008              BEQ      |L1.4980|
001362  7003              STRB     r3,[r0,#0]            ;600
001364  f8980000          LDRB     r0,[r8,#0]            ;601  ; main_menu_mode
001368  782b              LDRB     r3,[r5,#0]            ;601  ; work_stat
00136a  ea500c03          ORRS     r12,r0,r3             ;601
00136e  d002              BEQ      |L1.4982|
001370  2801              CMP      r0,#1                 ;643
001372  d022              BEQ      |L1.5050|
                  |L1.4980|
001374  e0a0              B        |L1.5304|
                  |L1.4982|
001376  8808              LDRH     r0,[r1,#0]            ;603  ; TIME_VISION_PULT
001378  b1b0              CBZ      r0,|L1.5032|
00137a  4968              LDR      r1,|L1.5404|
00137c  f44f7016          MOV      r0,#0x258             ;605
001380  680b              LDR      r3,[r1,#0]            ;605  ; T_PROC_GS
001382  fb93f0f0          SDIV     r0,r3,r0              ;605
001386  1e40              SUBS     r0,r0,#1              ;605
001388  f44f7316          MOV      r3,#0x258             ;605
00138c  4358              MULS     r0,r3,r0              ;605
                  |L1.5006|
00138e  6008              STR      r0,[r1,#0]            ;517  ; T_PROC_GS
                  |L1.5008|
001390  4862              LDR      r0,|L1.5404|
001392  4966              LDR      r1,|L1.5420|
001394  8017              STRH     r7,[r2,#0]            ;611
001396  6802              LDR      r2,[r0,#0]            ;353  ; T_PROC_GS
001398  8809              LDRH     r1,[r1,#0]            ;353  ; T_PROC_MAX
00139a  428a              CMP      r2,r1                 ;353
00139c  f73faf22          BGT      |L1.4580|
0013a0  2a1e              CMP      r2,#0x1e              ;624
0013a2  f6bfaf29          BGE      |L1.4600|
0013a6  e71f              B        |L1.4584|
                  |L1.5032|
0013a8  485c              LDR      r0,|L1.5404|
0013aa  6801              LDR      r1,[r0,#0]            ;610  ; T_PROC_GS
0013ac  fb91f1f7          SDIV     r1,r1,r7              ;610
0013b0  1e49              SUBS     r1,r1,#1              ;610
0013b2  eb010181          ADD      r1,r1,r1,LSL #2       ;610
0013b6  0049              LSLS     r1,r1,#1              ;610
0013b8  e712              B        |L1.4576|
                  |L1.5050|
0013ba  bbf3              CBNZ     r3,|L1.5178|
0013bc  8808              LDRH     r0,[r1,#0]            ;645  ; TIME_VISION_PULT
0013be  2800              CMP      r0,#0                 ;645
0013c0  4858              LDR      r0,|L1.5412|
0013c2  d009              BEQ      |L1.5080|
0013c4  6802              LDR      r2,[r0,#0]            ;647  ; T_PROC_PS
0013c6  f44f7116          MOV      r1,#0x258             ;647
0013ca  fb92f1f1          SDIV     r1,r2,r1              ;647
0013ce  1e49              SUBS     r1,r1,#1              ;647
0013d0  f44f7216          MOV      r2,#0x258             ;647
0013d4  4351              MULS     r1,r2,r1              ;647
0013d6  e006              B        |L1.5094|
                  |L1.5080|
0013d8  6801              LDR      r1,[r0,#0]            ;652  ; T_PROC_PS
0013da  fb91f1f7          SDIV     r1,r1,r7              ;652
0013de  1e49              SUBS     r1,r1,#1              ;652
0013e0  eb010181          ADD      r1,r1,r1,LSL #2       ;652
0013e4  0049              LSLS     r1,r1,#1              ;652
                  |L1.5094|
0013e6  6001              STR      r1,[r0,#0]            ;653  ; T_PROC_PS
0013e8  494e              LDR      r1,|L1.5412|
0013ea  4850              LDR      r0,|L1.5420|
0013ec  f8aa7000          STRH     r7,[r10,#0]           ;653
0013f0  680a              LDR      r2,[r1,#0]            ;656  ; T_PROC_PS
0013f2  8800              LDRH     r0,[r0,#0]            ;656  ; T_PROC_MAX
0013f4  4282              CMP      r2,r0                 ;656
0013f6  dd01              BLE      |L1.5116|
0013f8  1c40              ADDS     r0,r0,#1              ;658
0013fa  e002              B        |L1.5122|
                  |L1.5116|
0013fc  2a1e              CMP      r2,#0x1e              ;666
0013fe  daa7              BGE      |L1.4944|
001400  201d              MOVS     r0,#0x1d              ;668
                  |L1.5122|
001402  6008              STR      r0,[r1,#0]            ;658  ; T_PROC_PS
001404  e710              B        |L1.4648|
                  |L1.5126|
001406  7901              LDRB     r1,[r0,#4]  ; modbus_cmnd_cnt
001408  7802              LDRB     r2,[r0,#0]  ; modbus_self_cmnd_cnt
00140a  4291              CMP      r1,r2
00140c  d054              BEQ      |L1.5304|
;;;689    					{
;;;690    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;691    					if(tumbler_stat==tsI)
;;;692    						{
;;;693    						if(work_stat!=wsGS)
;;;694    							{
;;;695    							if(SK_START==2)
;;;696    								{
;;;697    								if(SK_START_LEV)
;;;698    									{
;;;699    									if(sk_in_drv_stat==1)
;;;700    										{
;;;701    										return;
;;;702    										}
;;;703    									}
;;;704    								if(!SK_START_LEV)
;;;705    									{
;;;706    									if(sk_in_drv_stat==-1)
;;;707    										{
;;;708    										return;
;;;709    										}
;;;710    									}
;;;711    								}
;;;712    							work_stat=wsGS;
;;;713    							time_proc=0;
;;;714    							time_proc_remain=T_PROC_GS;
;;;715    							index_set=0;
00140e  4f48              LDR      r7,|L1.5424|
001410  7001              STRB     r1,[r0,#0]            ;690
001412  46f0              MOV      r8,lr                 ;691
001414  f1bc0f00          CMP      r12,#0                ;691
001418  d125              BNE      |L1.5222|
00141a  7828              LDRB     r0,[r5,#0]            ;693  ; work_stat
00141c  2801              CMP      r0,#1                 ;693
00141e  d01e              BEQ      |L1.5214|
001420  4844              LDR      r0,|L1.5428|
001422  8800              LDRH     r0,[r0,#0]            ;695  ; SK_START
001424  2802              CMP      r0,#2                 ;695
001426  d10d              BNE      |L1.5188|
001428  4843              LDR      r0,|L1.5432|
00142a  8800              LDRH     r0,[r0,#0]            ;697  ; SK_START_LEV
00142c  2800              CMP      r0,#0                 ;697
00142e  4843              LDR      r0,|L1.5436|
001430  d004              BEQ      |L1.5180|
001432  8800              LDRH     r0,[r0,#0]            ;699  ; sk_in_drv_stat
001434  2801              CMP      r0,#1                 ;699
                  |L1.5174|
001436  d068              BEQ      |L1.5386|
001438  e004              B        |L1.5188|
                  |L1.5178|
00143a  e038              B        |L1.5294|
                  |L1.5180|
00143c  f9b00000          LDRSH    r0,[r0,#0]            ;706  ; sk_in_drv_stat
001440  1c40              ADDS     r0,r0,#1              ;706
001442  d0f8              BEQ      |L1.5174|
                  |L1.5188|
001444  2001              MOVS     r0,#1                 ;712
001446  493e              LDR      r1,|L1.5440|
001448  7028              STRB     r0,[r5,#0]            ;712
00144a  2000              MOVS     r0,#0                 ;713
00144c  6008              STR      r0,[r1,#0]            ;714  ; time_proc
00144e  4933              LDR      r1,|L1.5404|
001450  680a              LDR      r2,[r1,#0]            ;714  ; T_PROC_GS
001452  493c              LDR      r1,|L1.5444|
001454  600a              STR      r2,[r1,#0]  ; time_proc_remain
001456  7138              STRB     r0,[r7,#4]
;;;716    							restart_on_GS();
001458  f7fffffe          BL       restart_on_GS
00145c  e003              B        |L1.5222|
                  |L1.5214|
;;;717    							}			
;;;718    						else 
;;;719    							{
;;;720    							work_stat=wsOFF;
00145e  2000              MOVS     r0,#0
001460  7028              STRB     r0,[r5,#0]
;;;721    							restart_off();
001462  f7fffffe          BL       restart_off
                  |L1.5222|
;;;722    							}
;;;723    						}
;;;724    				
;;;725    					if(tumbler_stat==tsU)
001466  f8980000          LDRB     r0,[r8,#0]  ; tumbler_stat
00146a  2801              CMP      r0,#1
00146c  d124              BNE      |L1.5304|
;;;726    						{
;;;727    						if(work_stat!=wsPS)
00146e  7828              LDRB     r0,[r5,#0]  ; work_stat
001470  2802              CMP      r0,#2
001472  d01d              BEQ      |L1.5296|
;;;728    							{
;;;729    							if(SK_START==2)
001474  482f              LDR      r0,|L1.5428|
001476  8800              LDRH     r0,[r0,#0]  ; SK_START
001478  2802              CMP      r0,#2
00147a  d10c              BNE      |L1.5270|
;;;730    								{
;;;731    								if(SK_START_LEV)
00147c  482e              LDR      r0,|L1.5432|
00147e  8800              LDRH     r0,[r0,#0]  ; SK_START_LEV
001480  2800              CMP      r0,#0
;;;732    									{
;;;733    									if(sk_in_drv_stat==1)
;;;734    										{
;;;735    										return;
;;;736    										}
;;;737    									}
;;;738    								if(!SK_START_LEV)
;;;739    									{
;;;740    									if(sk_in_drv_stat==-1)
001482  482e              LDR      r0,|L1.5436|
001484  d003              BEQ      |L1.5262|
001486  8800              LDRH     r0,[r0,#0]            ;733  ; sk_in_drv_stat
001488  2801              CMP      r0,#1                 ;733
00148a  d0d4              BEQ      |L1.5174|
00148c  e003              B        |L1.5270|
                  |L1.5262|
00148e  f9b00000          LDRSH    r0,[r0,#0]  ; sk_in_drv_stat
001492  1c40              ADDS     r0,r0,#1
001494  d0cf              BEQ      |L1.5174|
                  |L1.5270|
;;;741    										{
;;;742    										return;
;;;743    										}
;;;744    									}
;;;745    								}
;;;746    							work_stat=wsPS;
001496  2002              MOVS     r0,#2
;;;747    							time_proc=0;
001498  4929              LDR      r1,|L1.5440|
00149a  7028              STRB     r0,[r5,#0]            ;746
00149c  2000              MOVS     r0,#0
;;;748    							time_proc_remain=T_PROC_PS;
00149e  6008              STR      r0,[r1,#0]  ; time_proc
0014a0  4920              LDR      r1,|L1.5412|
0014a2  680a              LDR      r2,[r1,#0]  ; T_PROC_PS
0014a4  4927              LDR      r1,|L1.5444|
;;;749    							index_set=0;
0014a6  600a              STR      r2,[r1,#0]  ; time_proc_remain
0014a8  7138              STRB     r0,[r7,#4]
;;;750    							restart_on_PS();
0014aa  f7fffffe          BL       restart_on_PS
                  |L1.5294|
0014ae  e003              B        |L1.5304|
                  |L1.5296|
;;;751    							}			
;;;752    						else
;;;753    							{
;;;754    							work_stat=wsOFF;
0014b0  2000              MOVS     r0,#0
0014b2  7028              STRB     r0,[r5,#0]
;;;755    							restart_off();
0014b4  f7fffffe          BL       restart_off
                  |L1.5304|
;;;756    							}
;;;757    						}
;;;758    					}
;;;759    				}
;;;760    			}
;;;761    		}
;;;762    
;;;763    	if(modbus_an_buffer[0]==MODBUS_ADRESS)
0014b8  4823              LDR      r0,|L1.5448|
0014ba  7801              LDRB     r1,[r0,#0]  ; modbus_an_buffer
0014bc  4823              LDR      r0,|L1.5452|
0014be  f9b00000          LDRSH    r0,[r0,#0]  ; MODBUS_ADRESS
0014c2  4281              CMP      r1,r0
                  |L1.5316|
0014c4  d121              BNE      |L1.5386|
;;;764    		{
;;;765    		if(modbus_func==3)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
0014c6  9903              LDR      r1,[sp,#0xc]
0014c8  2903              CMP      r1,#3
0014ca  d07e              BEQ      |L1.5578|
;;;766    			{
;;;767    			if((modbus_rx_arg0>=50)&&(modbus_rx_arg0<100)) modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func, modbus_rx_arg0,modbus_rx_arg1, MODBUS_RTU_PROT);
;;;768    			}
;;;769    		else if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ	βυξδξβ
0014cc  2904              CMP      r1,#4
0014ce  d07d              BEQ      |L1.5580|
;;;770    			{
;;;771    			modbus_input_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0, modbus_rx_arg1, MODBUS_RTU_PROT);
;;;772    			}
;;;773    
;;;774    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
0014d0  2906              CMP      r1,#6
0014d2  d1f7              BNE      |L1.5316|
;;;775    			{
;;;776    			if(modbus_rx_arg0==50)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
0014d4  2e32              CMP      r6,#0x32
0014d6  d07a              BEQ      |L1.5582|
;;;777    				{
;;;778    				I_ug=modbus_rx_arg1;
;;;779    				lc640_write_int(EE_I_UG,I_ug);
;;;780    				}
;;;781    			if(modbus_rx_arg0==51)		//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
0014d8  2e33              CMP      r6,#0x33
0014da  d079              BEQ      |L1.5584|
;;;782    				{
;;;783    				U_up=modbus_rx_arg1;
;;;784    				lc640_write_int(EE_U_UP,U_up);
;;;785    				}
;;;786    			if(modbus_rx_arg0==52)		//μΰκρθμΰολόνξε νΰοπζενθε δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
0014dc  2e34              CMP      r6,#0x34
0014de  d078              BEQ      |L1.5586|
;;;787    				{
;;;788    				U_maxg=modbus_rx_arg1;
;;;789    				lc640_write_int(EE_U_MAX_G,U_maxg);
;;;790    				}
;;;791    			if(modbus_rx_arg0==53)		//μΰκρθμΰλόνϋι ςξκ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
0014e0  2e35              CMP      r6,#0x35
0014e2  d077              BEQ      |L1.5588|
;;;792    				{
;;;793    				I_maxp=modbus_rx_arg1;
;;;794    				lc640_write_int(EE_I_MAX_P,I_maxp);
;;;795    				}								
;;;796    			if(modbus_rx_arg0==54)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.ρεκσνδϋ
;;;797    				{
;;;798    				signed long sec,min,hour;
;;;799    				sec=(signed long)modbus_rx_arg1;
;;;800    				min=(T_PROC_GS/60L)%60L;
;;;801    				hour=T_PROC_GS/3600L;
0014e4  f44f6061          MOV      r0,#0xe10
0014e8  2e36              CMP      r6,#0x36              ;796
0014ea  d074              BEQ      |L1.5590|
;;;802    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;803    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;804    				}
;;;805    			if(modbus_rx_arg0==55)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.μθνσςϋ
0014ec  2e37              CMP      r6,#0x37
0014ee  d073              BEQ      |L1.5592|
;;;806    				{
;;;807    				signed long sec,min,hour;
;;;808    				sec=T_PROC_GS%60L;
;;;809    				min=(signed long)modbus_rx_arg1;
;;;810    				hour=T_PROC_GS/3600L;
;;;811    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;812    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;813    				}
;;;814    			if(modbus_rx_arg0==56)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.χΰρϋ
0014f0  2e38              CMP      r6,#0x38
0014f2  d072              BEQ      |L1.5594|
;;;815    				{
;;;816    				signed long sec,min,hour;
;;;817    				sec=T_PROC_GS%60L;
;;;818    				min=(T_PROC_GS/60L)%60L;
;;;819    				hour=(signed long)modbus_rx_arg1;
;;;820    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;821    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;822    				}
;;;823    			if(modbus_rx_arg0==57)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.ρεκσνδϋ
0014f4  2e39              CMP      r6,#0x39
0014f6  d071              BEQ      |L1.5596|
;;;824    				{
;;;825    				signed long sec,min,hour;
;;;826    				sec=(signed long)modbus_rx_arg1;
;;;827    				min=(T_PROC_PS/60L)%60L;
;;;828    				hour=T_PROC_PS/3600L;
;;;829    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;830    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;831    				}
;;;832    
;;;833    			if(modbus_rx_arg0==58)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.μθνσςϋ
0014f8  2e3a              CMP      r6,#0x3a
0014fa  d070              BEQ      |L1.5598|
;;;834    				{
;;;835    				signed long sec,min,hour;
;;;836    				sec=T_PROC_PS%60L;
;;;837    				min=(signed long)modbus_rx_arg1;
;;;838    				hour=T_PROC_PS/3600L;
;;;839    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;840    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;841    				}
;;;842    
;;;843    			if(modbus_rx_arg0==59)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.χΰρϋ
0014fc  2e3b              CMP      r6,#0x3b
0014fe  d06f              BEQ      |L1.5600|
;;;844    				{
;;;845    				signed long sec,min,hour;
;;;846    				sec=T_PROC_PS%60L;
;;;847    				min=(T_PROC_PS/60L)%60L;
;;;848    				hour=(signed long)modbus_rx_arg1;
;;;849    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;850    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;851    				}
;;;852    
;;;853    			if(modbus_rx_arg0==60)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
001500  2e3c              CMP      r6,#0x3c
001502  d06e              BEQ      |L1.5602|
;;;854    				{
;;;855    				if(modbus_rx_arg1==1)
;;;856    					{
;;;857    /*					if(work_stat!=wsPS)
;;;858    						{
;;;859    							if(SK_START==2)
;;;860    								{
;;;861    								if(SK_START_LEV)
;;;862    									{
;;;863    									if(sk_in_drv_stat==1)
;;;864    										{
;;;865    										return;
;;;866    										}
;;;867    									}
;;;868    								if(!SK_START_LEV)
;;;869    									{
;;;870    									if(sk_in_drv_stat==-1)
;;;871    										{
;;;872    										return;
;;;873    										}
;;;874    									}
;;;875    								}
;;;876    						work_stat=wsPS;
;;;877    						time_proc=0;
;;;878    						time_proc_remain=T_PROC_PS;
;;;879    						restart_on_PS();
;;;880    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;881    						}*/
;;;882    					start_PS();
;;;883    					}
;;;884    				if(modbus_rx_arg1==0)
;;;885    					{
;;;886    					/*if(work_stat==wsPS)
;;;887    						{
;;;888    						work_stat=wsOFF;
;;;889    						restart_off();
;;;890    						}*/
;;;891    					stop_proc();
;;;892    					}
;;;893    				}
;;;894    			if(modbus_rx_arg0==61)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
001504  2e3d              CMP      r6,#0x3d
001506  d06d              BEQ      |L1.5604|
;;;895    				{
;;;896    				if(modbus_rx_arg1==1)
;;;897    					{
;;;898    					/*if(work_stat!=wsGS)
;;;899    						{
;;;900    							if(SK_START==2)
;;;901    								{
;;;902    								if(SK_START_LEV)
;;;903    									{
;;;904    									if(sk_in_drv_stat==1)
;;;905    										{
;;;906    										return;
;;;907    										}
;;;908    									}
;;;909    								if(!SK_START_LEV)
;;;910    									{
;;;911    									if(sk_in_drv_stat==-1)
;;;912    										{
;;;913    										return;
;;;914    										}
;;;915    									}
;;;916    								}
;;;917    						work_stat=wsGS;
;;;918    						time_proc=0;
;;;919    						time_proc_remain=T_PROC_GS;
;;;920    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;921    						}*/
;;;922    					start_GS();
;;;923    					}
;;;924    				if(modbus_rx_arg1==0)
;;;925    					{
;;;926    					/*if(work_stat==wsGS)
;;;927    						{
;;;928    						work_stat=wsOFF;
;;;929    						restart_off();
;;;930    						} */
;;;931    					stop_proc();
;;;932    					}
;;;933    				}
;;;934    
;;;935    			if(modbus_rx_arg0==62)		//οεπεκλώχενθε πελε πεβεπρΰ
001508  e022              B        |L1.5456|
                  |L1.5386|
00150a  e07c              B        |L1.5638|
                  |L1.5388|
                          DCD      I_ug
                  |L1.5392|
                          DCD      U_up
                  |L1.5396|
                          DCD      U_MAX
                  |L1.5400|
                          DCD      U_MIN
                  |L1.5404|
                          DCD      T_PROC_GS
                  |L1.5408|
                          DCD      T_PROC_GS_MODE
                  |L1.5412|
                          DCD      T_PROC_PS
                  |L1.5416|
                          DCD      T_PROC_PS_MODE
                  |L1.5420|
                          DCD      T_PROC_MAX
                  |L1.5424|
                          DCD      a_ind
                  |L1.5428|
                          DCD      SK_START
                  |L1.5432|
                          DCD      SK_START_LEV
                  |L1.5436|
                          DCD      sk_in_drv_stat
                  |L1.5440|
                          DCD      time_proc
                  |L1.5444|
                          DCD      time_proc_remain
                  |L1.5448|
                          DCD      ||area_number.5||+0x1e
                  |L1.5452|
                          DCD      MODBUS_ADRESS
                  |L1.5456|
001550  2e3e              CMP      r6,#0x3e
001552  d073              BEQ      |L1.5692|
;;;936    				{
;;;937    					{
;;;938    					if(work_stat==wsOFF)
;;;939    						{
;;;940    						if(modbus_rx_arg1==0)REV_STAT=rsFF;
;;;941    						if(modbus_rx_arg1==1)REV_STAT=rsREW;
;;;942    						}
;;;943    					}
;;;944    				}
;;;945    			if(modbus_rx_arg0==63)		//βκλώχενθε-βϋκλώχενθε ΰβςξπεβεπρΰ
001554  2e3f              CMP      r6,#0x3f
001556  d072              BEQ      |L1.5694|
;;;946    				{
;;;947    					{
;;;948    					if((work_stat==wsOFF)&&(REV_IS_ON))
;;;949    						{
;;;950    						if(modbus_rx_arg1==1)AVT_REV_IS_ON=1;
;;;951    						if(modbus_rx_arg1==0)AVT_REV_IS_ON=0;
;;;952    						lc640_write_int(EE_AVT_REV_IS_ON,AVT_REV_IS_ON);
;;;953    						}
;;;954    					}
;;;955    				}
;;;956    			if(modbus_rx_arg0==64)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ οπμξε, ρεκ
001558  2e40              CMP      r6,#0x40
00155a  d071              BEQ      |L1.5696|
;;;957    				{
;;;958    				if(work_stat==wsOFF)
;;;959    					{
;;;960    					AVT_REV_TIME_FF=modbus_rx_arg1;
;;;961    					gran_u/*long*/(&AVT_REV_TIME_FF,30,T_PROC_MAX);
;;;962    					lc640_write_int(EE_AVT_REV_TIME_FF,AVT_REV_TIME_FF);	
;;;963    					}
;;;964    				}
;;;965    			if(modbus_rx_arg0==65)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ ξαπΰςνξε, ρεκ
00155c  2e41              CMP      r6,#0x41
00155e  d070              BEQ      |L1.5698|
;;;966    				{
;;;967    				if(work_stat==wsOFF)
;;;968    					{
;;;969    					AVT_REV_TIME_REW=modbus_rx_arg1;
;;;970    					gran_u/*long*/(&AVT_REV_TIME_REW,30,T_PROC_MAX);
;;;971    					lc640_write_int(EE_AVT_REV_TIME_REW,AVT_REV_TIME_REW);	
;;;972    					}
;;;973    				}
;;;974    			if(modbus_rx_arg0==66)		//ΐβςξπεβεπρ, βπεμ οΰσηϋ οπθ οεπεκλώχενθθ, ρεκ
001560  2e42              CMP      r6,#0x42
001562  d06f              BEQ      |L1.5700|
;;;975    				{
;;;976    				if(work_stat==wsOFF)
;;;977    					{
;;;978    					AVT_REV_TIME_PAUSE=modbus_rx_arg1;
;;;979    					gran(&AVT_REV_TIME_PAUSE,2,600);
;;;980    					lc640_write_int(EE_AVT_REV_TIME_PAUSE,AVT_REV_TIME_PAUSE);	
;;;981    					}
;;;982    				}
;;;983    
;;;984    			if(modbus_rx_arg0==67)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ οπμξι, 0.1ΐ
001564  2e43              CMP      r6,#0x43
001566  d06e              BEQ      |L1.5702|
;;;985    				{
;;;986    				if(work_stat==wsOFF)
;;;987    					{
;;;988    					AVT_REV_I_NOM_FF=modbus_rx_arg1;
;;;989    		    			gran(&AVT_REV_I_NOM_FF,I_MIN_IPS,I_MAX_IPS);
;;;990    					lc640_write_int(EE_AVT_REV_I_NOM_FF,AVT_REV_I_NOM_FF);	
;;;991    					}
;;;992    				}
;;;993    
;;;994    			if(modbus_rx_arg0==68)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ ξαπΰςνϋι, 0.1ΐ
001568  2e44              CMP      r6,#0x44
00156a  d06d              BEQ      |L1.5704|
;;;995    				{
;;;996    				if(work_stat==wsOFF)
;;;997    					{
;;;998    					AVT_REV_I_NOM_REW=modbus_rx_arg1;
;;;999    		    			gran(&AVT_REV_I_NOM_REW,I_MIN_IPS,I_MAX_IPS);
;;;1000   					lc640_write_int(EE_AVT_REV_I_NOM_REW,AVT_REV_I_NOM_REW);	
;;;1001   					}
;;;1002   				}
;;;1003   			if(modbus_rx_arg0==69)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ οπμξε, 0.1Β 
00156c  2e45              CMP      r6,#0x45
00156e  d06c              BEQ      |L1.5706|
;;;1004   				{
;;;1005   				if(work_stat==wsOFF)
;;;1006   					{
;;;1007   					AVT_REV_U_NOM_FF=modbus_rx_arg1;
;;;1008   		    			gran(&AVT_REV_U_NOM_FF,U_MIN,U_MAX);
;;;1009   					lc640_write_int(EE_AVT_REV_U_NOM_FF,AVT_REV_U_NOM_FF);					
;;;1010   					}
;;;1011   				}
;;;1012   
;;;1013   			if(modbus_rx_arg0==70)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ ξαπΰςνξε, 0.1Β
001570  2e46              CMP      r6,#0x46
001572  d06b              BEQ      |L1.5708|
;;;1014   				{
;;;1015   				if(work_stat==wsOFF)
;;;1016   					{
;;;1017   					AVT_REV_U_NOM_REW=modbus_rx_arg1;
;;;1018   		    			gran(&AVT_REV_U_NOM_REW,U_MIN,U_MAX);
;;;1019   					lc640_write_int(EE_AVT_REV_U_NOM_REW,AVT_REV_U_NOM_REW);					
;;;1020   					}
;;;1021   				}
;;;1022   
;;;1023   			if(modbus_rx_arg0==71)		//Βπεμ ηΰπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;1024   				{
;;;1025   				if(work_stat==wsOFF)
;;;1026   					{
;;;1027   					CAP_ZAR_TIME=modbus_rx_arg1;
001574  4ff9              LDR      r7,|L1.6492|
;;;1028   		    			gran(&CAP_ZAR_TIME,10,9999);
001576  f242720f          MOV      r2,#0x270f
00157a  2e47              CMP      r6,#0x47              ;1023
00157c  d067              BEQ      |L1.5710|
;;;1029   					lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;1030   					}
;;;1031   				}
;;;1032   			if(modbus_rx_arg0==72)		//Βπεμ οΰσηϋ1 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;1033   				{
;;;1034   				if(work_stat==wsOFF)
;;;1035   					{
;;;1036   					CAP_PAUSE1_TIME=modbus_rx_arg1;
00157e  f8df83e0          LDR      r8,|L1.6496|
001582  2e48              CMP      r6,#0x48              ;1032
001584  d07d              BEQ      |L1.5762|
;;;1037   		    			gran(&CAP_PAUSE1_TIME,10,9999);
;;;1038   					lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;1039   					}
;;;1040   				}
;;;1041   			if(modbus_rx_arg0==73)		//Βπεμ πΰηπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;1042   				{
;;;1043   				if(work_stat==wsOFF)
;;;1044   					{
;;;1045   					CAP_RAZR_TIME=modbus_rx_arg1;
001586  f8df93dc          LDR      r9,|L1.6500|
00158a  2e49              CMP      r6,#0x49              ;1041
00158c  d07a              BEQ      |L1.5764|
;;;1046   		    			gran(&CAP_RAZR_TIME,10,9999);
;;;1047   					lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;1048   					}
;;;1049   				}
;;;1050   			if(modbus_rx_arg0==74)		//Βπεμ οΰσηϋ2 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;1051   				{
;;;1052   				if(work_stat==wsOFF)
;;;1053   					{
;;;1054   					CAP_PAUSE2_TIME=modbus_rx_arg1;
00158e  f8dfb3d8          LDR      r11,|L1.6504|
001592  2e4a              CMP      r6,#0x4a              ;1050
001594  d077              BEQ      |L1.5766|
;;;1055   		    			gran(&CAP_PAUSE2_TIME,10,9999);
;;;1056   					lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;1057   					}
;;;1058   				}
;;;1059   
;;;1060   			if(modbus_rx_arg0==75)		//Μΰκρθμΰλόνξε νΰοπζενθε θροϋςΰςελόνξγξ φθκλΰ, 1Β  
;;;1061   				{
;;;1062   				if(work_stat==wsOFF)
;;;1063   					{
;;;1064   					CAP_MAX_VOLT=modbus_rx_arg1;
001596  48f5              LDR      r0,|L1.6508|
001598  2e4b              CMP      r6,#0x4b              ;1060
00159a  d075              BEQ      |L1.5768|
;;;1065   		    			gran(&CAP_MAX_VOLT,1,100);
;;;1066   					lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;1067   					}
;;;1068   				}
;;;1069   			if(modbus_rx_arg0==76)		//Πΰαξχθι ςξκ θροϋςΰςελόνξγξ φθκλΰ, 1ΐ 
;;;1070   				{
;;;1071   				if(work_stat==wsOFF)
;;;1072   					{
;;;1073   					CAP_WRK_CURR=modbus_rx_arg1;
00159c  f8dfa3d0          LDR      r10,|L1.6512|
0015a0  2e4c              CMP      r6,#0x4c              ;1069
0015a2  d072              BEQ      |L1.5770|
;;;1074   		    			gran(&CAP_WRK_CURR,1,150);
;;;1075   					lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1076   					}
;;;1077   				}
;;;1078   
;;;1079   			if(modbus_rx_arg0==77)		//Πεγθρςπ δλ ηΰοθρθ κξμΰνδ 
0015a4  2e4d              CMP      r6,#0x4d
0015a6  d071              BEQ      |L1.5772|
;;;1080   				{
;;;1081   				if(modbus_rx_arg1==0x11)
;;;1082   					{
;;;1083   					start_CAP();
;;;1084   					}
;;;1085   				if(modbus_rx_arg1==0x12)
;;;1086   					{
;;;1087   					pause_CAP();
;;;1088   					}
;;;1089   				if(modbus_rx_arg1==0x13)
;;;1090   					{
;;;1091   					stop_CAP();
;;;1092   					}
;;;1093   				if(modbus_rx_arg1==0x14)
;;;1094   					{
;;;1095   					reset_CAP();
;;;1096   					}
;;;1097   
;;;1098   				if(modbus_rx_arg1==0x21)
;;;1099   					{
;;;1100   					if(work_stat==wsOFF)
;;;1101   						{
;;;1102   						CAP_ZAR_TIME++;
;;;1103   		    				gran(&CAP_ZAR_TIME,10,9999);
;;;1104   						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;1105   						}
;;;1106   					}
;;;1107   				if(modbus_rx_arg1==0x22)
;;;1108   					{
;;;1109   					if(work_stat==wsOFF)
;;;1110   						{
;;;1111   						CAP_ZAR_TIME--;
;;;1112   		    				gran(&CAP_ZAR_TIME,10,9999);
;;;1113   						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;1114   						}
;;;1115   					}
;;;1116   
;;;1117   				if(modbus_rx_arg1==0x31)
;;;1118   					{
;;;1119   					if(work_stat==wsOFF)
;;;1120   						{
;;;1121   						CAP_PAUSE1_TIME++;
;;;1122   		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;1123   						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;1124   						}
;;;1125   					}
;;;1126   				if(modbus_rx_arg1==0x32)
;;;1127   					{
;;;1128   					if(work_stat==wsOFF)
;;;1129   						{
;;;1130   						CAP_PAUSE1_TIME--;
;;;1131   		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;1132   						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;1133   						}
;;;1134   					}
;;;1135   
;;;1136   				if(modbus_rx_arg1==0x41)
;;;1137   					{
;;;1138   					if(work_stat==wsOFF)
;;;1139   						{
;;;1140   						CAP_RAZR_TIME++;
;;;1141   		    				gran(&CAP_RAZR_TIME,10,9999);
;;;1142   						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;1143   						}
;;;1144   					}
;;;1145   				if(modbus_rx_arg1==0x42)
;;;1146   					{
;;;1147   					if(work_stat==wsOFF)
;;;1148   						{
;;;1149   						CAP_RAZR_TIME--;
;;;1150   		    				gran(&CAP_RAZR_TIME,10,9999);
;;;1151   						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;1152   						}
;;;1153   					}
;;;1154   
;;;1155   				if(modbus_rx_arg1==0x51)
;;;1156   					{
;;;1157   					if(work_stat==wsOFF)
;;;1158   						{
;;;1159   						CAP_PAUSE2_TIME++;
;;;1160   		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;1161   						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;1162   						}
;;;1163   					}
;;;1164   				if(modbus_rx_arg1==0x52)
;;;1165   					{
;;;1166   					if(work_stat==wsOFF)
;;;1167   						{
;;;1168   						CAP_PAUSE2_TIME--;
;;;1169   		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;1170   						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;1171   						}
;;;1172   					}
;;;1173   
;;;1174   				if(modbus_rx_arg1==0x61)
;;;1175   					{
;;;1176   					if(work_stat==wsOFF)
;;;1177   						{
;;;1178   						CAP_MAX_VOLT++;
;;;1179   		    				gran(&CAP_MAX_VOLT,1,100);
;;;1180   						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;1181   						}
;;;1182   					}
;;;1183   				if(modbus_rx_arg1==0x62)
;;;1184   					{
;;;1185   					if(work_stat==wsOFF)
;;;1186   						{
;;;1187   						CAP_MAX_VOLT--;
;;;1188   		    				gran(&CAP_MAX_VOLT,1,100);
;;;1189   						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;1190   						}
;;;1191   					}
;;;1192   
;;;1193   				if(modbus_rx_arg1==0x71)
;;;1194   					{
;;;1195   					if(work_stat==wsOFF)
;;;1196   						{
;;;1197   						CAP_WRK_CURR++;
;;;1198   		    				gran(&CAP_WRK_CURR,1,150);
;;;1199   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1200   						}
;;;1201   					}
;;;1202   				if(modbus_rx_arg1==0x72)
;;;1203   					{
;;;1204   					if(work_stat==wsOFF)
;;;1205   						{
;;;1206   						CAP_WRK_CURR--;
;;;1207   		    				gran(&CAP_WRK_CURR,1,150);
;;;1208   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1209   						}
;;;1210   					}
;;;1211   
;;;1212   				if(modbus_rx_arg1==0x80)
;;;1213   					{
;;;1214   					if(RELE_FUNC[0]==6)
;;;1215   						{
;;;1216   						rele_ext_cntrl[0]=0;					
;;;1217   						}
;;;1218   					}
;;;1219   				if(modbus_rx_arg1==0x81)
;;;1220   					{
;;;1221   					if(RELE_FUNC[0]==6)
;;;1222   						{
;;;1223   						rele_ext_cntrl[0]=1;					
;;;1224   						}
;;;1225   					}
;;;1226   				if(modbus_rx_arg1==0x82)
;;;1227   					{
;;;1228   					if(RELE_FUNC[1]==6)
;;;1229   						{
;;;1230   						rele_ext_cntrl[1]=0;					
;;;1231   						}
;;;1232   					}
;;;1233   				if(modbus_rx_arg1==0x83)
;;;1234   					{
;;;1235   					if(RELE_FUNC[1]==6)
;;;1236   						{
;;;1237   						rele_ext_cntrl[1]=1;					
;;;1238   						}
;;;1239   					}
;;;1240   				}
;;;1241   
;;;1242   			if(modbus_rx_arg0==80)		//Ψθμ νΰοπζενθ β πεζθμε νεοξρπεδρςβεννξγξ σοπΰβλενθ 
0015a8  2e50              CMP      r6,#0x50
0015aa  d070              BEQ      |L1.5774|
;;;1243   				{
;;;1244   				pwm_u_reg = modbus_rx_arg1;
;;;1245   				}
;;;1246   
;;;1247   			if(modbus_rx_arg0==81)		//Ψθμ ςξκΰ β πεζθμε νεοξρπεδρςβεννξγξ σοπΰβλενθ 
0015ac  2e51              CMP      r6,#0x51
0015ae  d06f              BEQ      |L1.5776|
;;;1248   				{
;;;1249   				pwm_i_reg = modbus_rx_arg1;
;;;1250   				}
;;;1251   
;;;1252   			if(modbus_rx_arg0==82)		//Πεγθρςπ βπεμενθ β πεζθμε νεοξρπεδρςβεννξγξ σοπΰβλενθ 
0015b0  2e52              CMP      r6,#0x52
0015b2  d06e              BEQ      |L1.5778|
;;;1253   				{
;;;1254   				pwm_t_reg = modbus_rx_arg1*10;
;;;1255   				}
;;;1256   
;;;1257   			if(modbus_rx_arg0==90)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ, β ΞΗΣ
;;;1258   				{
;;;1259   				I_ug_ram=modbus_rx_arg1;
;;;1260   				eepromRamSwitch=1;
0015b4  48ef              LDR      r0,|L1.6516|
;;;1261   				ramModbusCnt=300;
0015b6  f8df83c0          LDR      r8,|L1.6520|
0015ba  f44f7796          MOV      r7,#0x12c
0015be  2e5a              CMP      r6,#0x5a              ;1257
0015c0  d068              BEQ      |L1.5780|
;;;1262   				}
;;;1263   
;;;1264   			if(modbus_rx_arg0==91)	//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ, β ΞΗΣ
0015c2  2e5b              CMP      r6,#0x5b
0015c4  d067              BEQ      |L1.5782|
;;;1265   				{
;;;1266   				U_up_ram=modbus_rx_arg1;
;;;1267   				eepromRamSwitch=1;
;;;1268   				ramModbusCnt=300;
;;;1269   				}
;;;1270   
;;;1271   			if(modbus_rx_arg0==92)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
0015c6  2e5c              CMP      r6,#0x5c
0015c8  e00d              B        |L1.5606|
                  |L1.5578|
0015ca  e010              B        |L1.5614|
                  |L1.5580|
0015cc  e01e              B        |L1.5644|
                  |L1.5582|
0015ce  e026              B        |L1.5662|
                  |L1.5584|
0015d0  e02a              B        |L1.5672|
                  |L1.5586|
0015d2  e02e              B        |L1.5682|
                  |L1.5588|
0015d4  e03c              B        |L1.5712|
                  |L1.5590|
0015d6  e040              B        |L1.5722|
                  |L1.5592|
0015d8  e05e              B        |L1.5784|
                  |L1.5594|
0015da  e070              B        |L1.5822|
                  |L1.5596|
0015dc  e085              B        |L1.5866|
                  |L1.5598|
0015de  e098              B        |L1.5906|
                  |L1.5600|
0015e0  e0a8              B        |L1.5940|
                  |L1.5602|
0015e2  e0bf              B        |L1.5988|
                  |L1.5604|
0015e4  e0c3              B        |L1.5998|
                  |L1.5606|
0015e6  d07e              BEQ      |L1.5862|
;;;1272   				{
;;;1273   				if(modbus_rx_arg1==1)
;;;1274   					{
;;;1275   					if(work_stat!=wsPS)
;;;1276   						{
;;;1277   							if(SK_START==2)
;;;1278   								{
;;;1279   								if(SK_START_LEV)
;;;1280   									{
;;;1281   									if(sk_in_drv_stat==1)
;;;1282   										{
;;;1283   										return;
;;;1284   										}
;;;1285   									}
;;;1286   								if(!SK_START_LEV)
;;;1287   									{
;;;1288   									if(sk_in_drv_stat==-1)
;;;1289   										{
;;;1290   										return;
;;;1291   										}
;;;1292   									}
;;;1293   								}
;;;1294   						work_stat=wsPS;
;;;1295   						time_proc=0;
;;;1296   						time_proc_remain=T_PROC_PS;
;;;1297   						restart_on_PS();
;;;1298   						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;1299   						}
;;;1300   					}
;;;1301   				if(modbus_rx_arg1==0)
;;;1302   					{
;;;1303   					if(work_stat==wsPS)
;;;1304   						{
;;;1305   						work_stat=wsOFF;
;;;1306   						restart_off();
;;;1307   						}
;;;1308   					}
;;;1309   				ramModbusCnt=300;
;;;1310   				}
;;;1311   			if(modbus_rx_arg0==93)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
0015e8  2e5d              CMP      r6,#0x5d
0015ea  d07d              BEQ      |L1.5864|
0015ec  e2da              B        |L1.7076|
                  |L1.5614|
0015ee  f1a60132          SUB      r1,r6,#0x32           ;767
0015f2  2932              CMP      r1,#0x32              ;767
0015f4  d207              BCS      |L1.5638|
0015f6  2100              MOVS     r1,#0                 ;767
0015f8  9100              STR      r1,[sp,#0]            ;767
0015fa  4623              MOV      r3,r4                 ;767
0015fc  4632              MOV      r2,r6                 ;767
0015fe  b2c0              UXTB     r0,r0                 ;767
001600  9903              LDR      r1,[sp,#0xc]          ;767
001602  f7fffffe          BL       modbus_hold_registers_transmit
                  |L1.5638|
;;;1312   				{
;;;1313   				if(modbus_rx_arg1==1)
;;;1314   					{
;;;1315   					if(work_stat!=wsGS)
;;;1316   						{
;;;1317   							if(SK_START==2)
;;;1318   								{
;;;1319   								if(SK_START_LEV)
;;;1320   									{
;;;1321   									if(sk_in_drv_stat==1)
;;;1322   										{
;;;1323   										return;
;;;1324   										}
;;;1325   									}
;;;1326   								if(!SK_START_LEV)
;;;1327   									{
;;;1328   									if(sk_in_drv_stat==-1)
;;;1329   										{
;;;1330   										return;
;;;1331   										}
;;;1332   									}
;;;1333   								}
;;;1334   						work_stat=wsGS;
;;;1335   						time_proc=0;
;;;1336   						time_proc_remain=T_PROC_GS;
;;;1337   						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;1338   						}
;;;1339   					}
;;;1340   				if(modbus_rx_arg1==0)
;;;1341   					{
;;;1342   					if(work_stat==wsGS)
;;;1343   						{
;;;1344   						work_stat=wsOFF;
;;;1345   						restart_off();
;;;1346   						}
;;;1347   					}
;;;1348   				ramModbusCnt=300;
;;;1349   				}
;;;1350   
;;;1351   											
;;;1352   			if((T_PROC_GS>T_PROC_MAX)||(T_PROC_GS<30))
;;;1353   				{
;;;1354   				if(T_PROC_GS>T_PROC_MAX)T_PROC_GS=T_PROC_MAX+1;
;;;1355   				else if(T_PROC_GS<30)T_PROC_GS=29;
;;;1356   				lc640_write_int(EE_T_PROC_GS,T_PROC_GS);
;;;1357   				T_PROC_GS_MODE=1;	
;;;1358   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1359   				}
;;;1360   			if((T_PROC_GS<=T_PROC_MAX)&&(T_PROC_GS>=30))
;;;1361   				{
;;;1362   				T_PROC_GS_MODE=0;	
;;;1363   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1364   				}
;;;1365   			
;;;1366   			if((T_PROC_PS>T_PROC_MAX)||(T_PROC_PS<30))
;;;1367   				{
;;;1368   				if(T_PROC_PS>T_PROC_MAX)T_PROC_PS=T_PROC_MAX+1;
;;;1369   				else if(T_PROC_PS<30)T_PROC_PS=29;
;;;1370   				lc640_write_int(EE_T_PROC_PS,T_PROC_PS);
;;;1371   				T_PROC_PS_MODE=1;	
;;;1372   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1373   				}
;;;1374   			if((T_PROC_PS<=T_PROC_MAX)&&(T_PROC_PS>=30))
;;;1375   				{
;;;1376   				T_PROC_PS_MODE=0;	
;;;1377   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1378   				}
;;;1379   
;;;1380   			modbus_hold_register_answer_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,modbus_rx_arg1);
;;;1381   
;;;1382   
;;;1383   			if((modbus_rx_arg0!=90)&&(modbus_rx_arg0!=91)&&(modbus_rx_arg0!=92)&&(modbus_rx_arg0!=93)) lc640_write_int(EE_EE_WRITE_CNT,EE_WRITE_CNT+1);
;;;1384   //modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,2);
;;;1385   
;;;1386   
;;;1387   			}
;;;1388   		} 
;;;1389   	//;
;;;1390   	}
;;;1391   // modbus_plazma++;
;;;1392   
;;;1393   }
001606  b00b              ADD      sp,sp,#0x2c
001608  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.5644|
00160c  2100              MOVS     r1,#0                 ;771
00160e  9100              STR      r1,[sp,#0]            ;771
001610  4623              MOV      r3,r4                 ;771
001612  4632              MOV      r2,r6                 ;771
001614  b2c0              UXTB     r0,r0                 ;771
001616  9903              LDR      r1,[sp,#0xc]          ;771
001618  f7fffffe          BL       modbus_input_registers_transmit
                  |L1.5660|
00161c  e7f3              B        |L1.5638|
                  |L1.5662|
00161e  48d7              LDR      r0,|L1.6524|
001620  b221              SXTH     r1,r4                 ;778
001622  8001              STRH     r1,[r0,#0]            ;778
001624  2020              MOVS     r0,#0x20              ;779
001626  e1e8              B        |L1.6650|
                  |L1.5672|
001628  48d5              LDR      r0,|L1.6528|
00162a  b221              SXTH     r1,r4                 ;783
00162c  8001              STRH     r1,[r0,#0]            ;783
00162e  2022              MOVS     r0,#0x22              ;784
001630  e1e3              B        |L1.6650|
                  |L1.5682|
001632  48d4              LDR      r0,|L1.6532|
001634  b221              SXTH     r1,r4                 ;788
001636  8001              STRH     r1,[r0,#0]            ;788
001638  2076              MOVS     r0,#0x76              ;789
00163a  e1de              B        |L1.6650|
                  |L1.5692|
00163c  e0a1              B        |L1.6018|
                  |L1.5694|
00163e  e0ad              B        |L1.6044|
                  |L1.5696|
001640  e0c1              B        |L1.6086|
                  |L1.5698|
001642  e0d0              B        |L1.6118|
                  |L1.5700|
001644  e0de              B        |L1.6148|
                  |L1.5702|
001646  e0ec              B        |L1.6178|
                  |L1.5704|
001648  e0fc              B        |L1.6212|
                  |L1.5706|
00164a  e10d              B        |L1.6248|
                  |L1.5708|
00164c  e11e              B        |L1.6284|
                  |L1.5710|
00164e  e12f              B        |L1.6320|
                  |L1.5712|
001650  48cd              LDR      r0,|L1.6536|
001652  b221              SXTH     r1,r4                 ;793
001654  8001              STRH     r1,[r0,#0]            ;793
001656  2078              MOVS     r0,#0x78              ;794
001658  e1cf              B        |L1.6650|
                  |L1.5722|
00165a  4acc              LDR      r2,|L1.6540|
00165c  4649              MOV      r1,r9                 ;800
00165e  6813              LDR      r3,[r2,#0]            ;800  ; T_PROC_GS
001660  fb93f5f1          SDIV     r5,r3,r1              ;800
001664  fb95f7f9          SDIV     r7,r5,r9              ;800
001668  fb93f0f0          SDIV     r0,r3,r0              ;801
00166c  fb095117          MLS      r1,r9,r7,r5           ;800
001670  f44f6361          MOV      r3,#0xe10             ;802
001674  4358              MULS     r0,r3,r0              ;802
001676  ebc11101          RSB      r1,r1,r1,LSL #4       ;802
00167a  eb000081          ADD      r0,r0,r1,LSL #2       ;802
00167e  1901              ADDS     r1,r0,r4              ;802
001680  e01a              B        |L1.5816|
                  |L1.5762|
001682  e119              B        |L1.6328|
                  |L1.5764|
001684  e11d              B        |L1.6338|
                  |L1.5766|
001686  e122              B        |L1.6350|
                  |L1.5768|
001688  e126              B        |L1.6360|
                  |L1.5770|
00168a  e12a              B        |L1.6370|
                  |L1.5772|
00168c  e12e              B        |L1.6380|
                  |L1.5774|
00168e  e24c              B        |L1.6954|
                  |L1.5776|
001690  e24d              B        |L1.6958|
                  |L1.5778|
001692  e24f              B        |L1.6964|
                  |L1.5780|
001694  e254              B        |L1.6976|
                  |L1.5782|
001696  e255              B        |L1.6980|
                  |L1.5784|
001698  4abc              LDR      r2,|L1.6540|
00169a  6813              LDR      r3,[r2,#0]            ;808  ; T_PROC_GS
00169c  fb93f5f9          SDIV     r5,r3,r9              ;808
0016a0  fb93f0f0          SDIV     r0,r3,r0              ;810
0016a4  fb093115          MLS      r1,r9,r5,r3           ;808
0016a8  f44f6361          MOV      r3,#0xe10             ;811
0016ac  4358              MULS     r0,r3,r0              ;811
0016ae  ebc41304          RSB      r3,r4,r4,LSL #4       ;811
0016b2  eb000083          ADD      r0,r0,r3,LSL #2       ;811
0016b6  e014              B        |L1.5858|
                  |L1.5816|
0016b8  20d8              MOVS     r0,#0xd8              ;803
0016ba  6011              STR      r1,[r2,#0]            ;803  ; T_PROC_GS
0016bc  e04f              B        |L1.5982|
                  |L1.5822|
0016be  4ab3              LDR      r2,|L1.6540|
0016c0  4648              MOV      r0,r9                 ;817
0016c2  6811              LDR      r1,[r2,#0]            ;817  ; T_PROC_GS
0016c4  fb91f3f0          SDIV     r3,r1,r0              ;817
0016c8  fb93f5f9          SDIV     r5,r3,r9              ;818
0016cc  fb093015          MLS      r0,r9,r5,r3           ;818
0016d0  fb091113          MLS      r1,r9,r3,r1           ;817
0016d4  f44f6361          MOV      r3,#0xe10             ;820
0016d8  4363              MULS     r3,r4,r3              ;820
0016da  ebc01000          RSB      r0,r0,r0,LSL #4       ;820
0016de  eb030080          ADD      r0,r3,r0,LSL #2       ;820
                  |L1.5858|
0016e2  4401              ADD      r1,r1,r0              ;820
0016e4  e7e8              B        |L1.5816|
                  |L1.5862|
0016e6  e232              B        |L1.6990|
                  |L1.5864|
0016e8  e269              B        |L1.7102|
                  |L1.5866|
0016ea  4aa9              LDR      r2,|L1.6544|
0016ec  4649              MOV      r1,r9                 ;827
0016ee  6813              LDR      r3,[r2,#0]            ;827  ; T_PROC_PS
0016f0  fb93f5f1          SDIV     r5,r3,r1              ;827
0016f4  fb95f7f9          SDIV     r7,r5,r9              ;827
0016f8  fb93f0f0          SDIV     r0,r3,r0              ;828
0016fc  fb095117          MLS      r1,r9,r7,r5           ;827
001700  f44f6361          MOV      r3,#0xe10             ;829
001704  4358              MULS     r0,r3,r0              ;829
001706  ebc11101          RSB      r1,r1,r1,LSL #4       ;829
00170a  eb000081          ADD      r0,r0,r1,LSL #2       ;829
00170e  1901              ADDS     r1,r0,r4              ;829
001710  e023              B        |L1.5978|
                  |L1.5906|
001712  4a9f              LDR      r2,|L1.6544|
001714  6811              LDR      r1,[r2,#0]            ;836  ; T_PROC_PS
001716  fb91f5f9          SDIV     r5,r1,r9              ;836
00171a  fb91f0f0          SDIV     r0,r1,r0              ;838
00171e  fb091315          MLS      r3,r9,r5,r1           ;836
001722  f44f6161          MOV      r1,#0xe10             ;839
001726  4348              MULS     r0,r1,r0              ;839
001728  ebc41104          RSB      r1,r4,r4,LSL #4       ;839
00172c  eb000081          ADD      r0,r0,r1,LSL #2       ;839
001730  18c1              ADDS     r1,r0,r3              ;839
001732  e012              B        |L1.5978|
                  |L1.5940|
001734  4a96              LDR      r2,|L1.6544|
001736  4648              MOV      r0,r9                 ;846
001738  6811              LDR      r1,[r2,#0]            ;846  ; T_PROC_PS
00173a  fb91f3f0          SDIV     r3,r1,r0              ;846
00173e  fb93f5f9          SDIV     r5,r3,r9              ;847
001742  fb093015          MLS      r0,r9,r5,r3           ;847
001746  fb091113          MLS      r1,r9,r3,r1           ;846
00174a  f44f6361          MOV      r3,#0xe10             ;849
00174e  4363              MULS     r3,r4,r3              ;849
001750  ebc01000          RSB      r0,r0,r0,LSL #4       ;849
001754  eb030080          ADD      r0,r3,r0,LSL #2       ;849
001758  4401              ADD      r1,r1,r0              ;849
                  |L1.5978|
00175a  20dc              MOVS     r0,#0xdc              ;850
00175c  6011              STR      r1,[r2,#0]            ;850  ; T_PROC_PS
                  |L1.5982|
00175e  f7fffffe          BL       lc640_write_long
001762  e21f              B        |L1.7076|
                  |L1.5988|
001764  2c01              CMP      r4,#1                 ;855
001766  d104              BNE      |L1.6002|
001768  f7fffffe          BL       start_PS
00176c  e21a              B        |L1.7076|
                  |L1.5998|
00176e  2c01              CMP      r4,#1                 ;896
001770  d001              BEQ      |L1.6006|
                  |L1.6002|
001772  b11c              CBZ      r4,|L1.6012|
001774  e216              B        |L1.7076|
                  |L1.6006|
001776  f7fffffe          BL       start_GS
00177a  e213              B        |L1.7076|
                  |L1.6012|
00177c  f7fffffe          BL       stop_proc
001780  e210              B        |L1.7076|
                  |L1.6018|
001782  7828              LDRB     r0,[r5,#0]            ;938  ; work_stat
001784  2800              CMP      r0,#0                 ;938
001786  d103              BNE      |L1.6032|
001788  4882              LDR      r0,|L1.6548|
00178a  b114              CBZ      r4,|L1.6034|
00178c  2c01              CMP      r4,#1                 ;941
00178e  d002              BEQ      |L1.6038|
                  |L1.6032|
001790  e208              B        |L1.7076|
                  |L1.6034|
001792  2101              MOVS     r1,#1                 ;940
001794  e000              B        |L1.6040|
                  |L1.6038|
001796  2100              MOVS     r1,#0                 ;941
                  |L1.6040|
001798  7001              STRB     r1,[r0,#0]            ;941
00179a  e203              B        |L1.7076|
                  |L1.6044|
00179c  7828              LDRB     r0,[r5,#0]            ;948  ; work_stat
00179e  2800              CMP      r0,#0                 ;948
0017a0  d161              BNE      |L1.6246|
0017a2  487d              LDR      r0,|L1.6552|
0017a4  8800              LDRH     r0,[r0,#0]            ;948  ; REV_IS_ON
0017a6  2800              CMP      r0,#0                 ;948
0017a8  d05d              BEQ      |L1.6246|
0017aa  4a7c              LDR      r2,|L1.6556|
0017ac  f44f7084          MOV      r0,#0x108             ;952
0017b0  2c01              CMP      r4,#1                 ;950
0017b2  d003              BEQ      |L1.6076|
0017b4  b124              CBZ      r4,|L1.6080|
0017b6  f9b21000          LDRSH    r1,[r2,#0]            ;952  ; AVT_REV_IS_ON
0017ba  e11e              B        |L1.6650|
                  |L1.6076|
0017bc  2101              MOVS     r1,#1                 ;950
0017be  e000              B        |L1.6082|
                  |L1.6080|
0017c0  2100              MOVS     r1,#0                 ;951
                  |L1.6082|
0017c2  8011              STRH     r1,[r2,#0]            ;950
0017c4  e119              B        |L1.6650|
                  |L1.6086|
0017c6  7828              LDRB     r0,[r5,#0]            ;958  ; work_stat
0017c8  2800              CMP      r0,#0                 ;958
0017ca  d14c              BNE      |L1.6246|
0017cc  4d74              LDR      r5,|L1.6560|
0017ce  4875              LDR      r0,|L1.6564|
0017d0  211e              MOVS     r1,#0x1e              ;961
0017d2  802c              STRH     r4,[r5,#0]            ;960
0017d4  8802              LDRH     r2,[r0,#0]            ;961  ; T_PROC_MAX
0017d6  4628              MOV      r0,r5                 ;961
0017d8  f7fffffe          BL       gran_u
0017dc  8828              LDRH     r0,[r5,#0]            ;962  ; AVT_REV_TIME_FF
0017de  b201              SXTH     r1,r0                 ;962
0017e0  f44f7085          MOV      r0,#0x10a             ;962
0017e4  e109              B        |L1.6650|
                  |L1.6118|
0017e6  7828              LDRB     r0,[r5,#0]            ;967  ; work_stat
0017e8  bbe8              CBNZ     r0,|L1.6246|
0017ea  4d6f              LDR      r5,|L1.6568|
0017ec  486d              LDR      r0,|L1.6564|
0017ee  211e              MOVS     r1,#0x1e              ;970
0017f0  802c              STRH     r4,[r5,#0]            ;969
0017f2  8802              LDRH     r2,[r0,#0]            ;970  ; T_PROC_MAX
0017f4  4628              MOV      r0,r5                 ;970
0017f6  f7fffffe          BL       gran_u
0017fa  8828              LDRH     r0,[r5,#0]            ;971  ; AVT_REV_TIME_REW
0017fc  b201              SXTH     r1,r0                 ;971
0017fe  f44f709f          MOV      r0,#0x13e             ;971
001802  e0fa              B        |L1.6650|
                  |L1.6148|
001804  7828              LDRB     r0,[r5,#0]            ;976  ; work_stat
001806  bb70              CBNZ     r0,|L1.6246|
001808  4d68              LDR      r5,|L1.6572|
00180a  f44f7216          MOV      r2,#0x258             ;979
00180e  2102              MOVS     r1,#2                 ;979
001810  802c              STRH     r4,[r5,#0]            ;978
001812  4628              MOV      r0,r5                 ;979
001814  f7fffffe          BL       gran
001818  f9b51000          LDRSH    r1,[r5,#0]            ;980  ; AVT_REV_TIME_PAUSE
00181c  f44f7087          MOV      r0,#0x10e             ;980
001820  e0eb              B        |L1.6650|
                  |L1.6178|
001822  7828              LDRB     r0,[r5,#0]            ;986  ; work_stat
001824  b9f8              CBNZ     r0,|L1.6246|
001826  4d62              LDR      r5,|L1.6576|
001828  4862              LDR      r0,|L1.6580|
00182a  802c              STRH     r4,[r5,#0]            ;988
00182c  f9b01000          LDRSH    r1,[r0,#0]            ;989  ; I_MIN_IPS
001830  f9bb2000          LDRSH    r2,[r11,#0]           ;989  ; I_MAX_IPS
001834  4628              MOV      r0,r5                 ;989
001836  f7fffffe          BL       gran
00183a  f9b51000          LDRSH    r1,[r5,#0]            ;990  ; AVT_REV_I_NOM_FF
00183e  f44f7088          MOV      r0,#0x110             ;990
001842  e0da              B        |L1.6650|
                  |L1.6212|
001844  7828              LDRB     r0,[r5,#0]            ;996  ; work_stat
001846  b970              CBNZ     r0,|L1.6246|
001848  4d5b              LDR      r5,|L1.6584|
00184a  485a              LDR      r0,|L1.6580|
00184c  802c              STRH     r4,[r5,#0]            ;998
00184e  f9b01000          LDRSH    r1,[r0,#0]            ;999  ; I_MIN_IPS
001852  f9bb2000          LDRSH    r2,[r11,#0]           ;999  ; I_MAX_IPS
001856  4628              MOV      r0,r5                 ;999
001858  f7fffffe          BL       gran
00185c  f9b51000          LDRSH    r1,[r5,#0]            ;1000  ; AVT_REV_I_NOM_REW
001860  f44f7089          MOV      r0,#0x112             ;1000
001864  e0c9              B        |L1.6650|
                  |L1.6246|
001866  e031              B        |L1.6348|
                  |L1.6248|
001868  7828              LDRB     r0,[r5,#0]            ;1005  ; work_stat
00186a  bb78              CBNZ     r0,|L1.6348|
00186c  4d53              LDR      r5,|L1.6588|
00186e  4854              LDR      r0,|L1.6592|
001870  802c              STRH     r4,[r5,#0]            ;1007
001872  f9b02000          LDRSH    r2,[r0,#0]            ;1008  ; U_MAX
001876  4853              LDR      r0,|L1.6596|
001878  f9b01000          LDRSH    r1,[r0,#0]            ;1008  ; U_MIN
00187c  4628              MOV      r0,r5                 ;1008
00187e  f7fffffe          BL       gran
001882  f9b51000          LDRSH    r1,[r5,#0]            ;1009  ; AVT_REV_U_NOM_FF
001886  f44f708a          MOV      r0,#0x114             ;1009
00188a  e0b6              B        |L1.6650|
                  |L1.6284|
00188c  7828              LDRB     r0,[r5,#0]            ;1015  ; work_stat
00188e  b9e8              CBNZ     r0,|L1.6348|
001890  4d4d              LDR      r5,|L1.6600|
001892  484b              LDR      r0,|L1.6592|
001894  802c              STRH     r4,[r5,#0]            ;1017
001896  f9b02000          LDRSH    r2,[r0,#0]            ;1018  ; U_MAX
00189a  484a              LDR      r0,|L1.6596|
00189c  f9b01000          LDRSH    r1,[r0,#0]            ;1018  ; U_MIN
0018a0  4628              MOV      r0,r5                 ;1018
0018a2  f7fffffe          BL       gran
0018a6  f9b51000          LDRSH    r1,[r5,#0]            ;1019  ; AVT_REV_U_NOM_REW
0018aa  f44f708b          MOV      r0,#0x116             ;1019
0018ae  e0a4              B        |L1.6650|
                  |L1.6320|
0018b0  7828              LDRB     r0,[r5,#0]            ;1025  ; work_stat
0018b2  b958              CBNZ     r0,|L1.6348|
0018b4  803c              STRH     r4,[r7,#0]            ;1027
0018b6  e098              B        |L1.6634|
                  |L1.6328|
0018b8  7828              LDRB     r0,[r5,#0]            ;1034  ; work_stat
0018ba  b938              CBNZ     r0,|L1.6348|
0018bc  f8a84000          STRH     r4,[r8,#0]            ;1036
0018c0  e0b9              B        |L1.6710|
                  |L1.6338|
0018c2  7828              LDRB     r0,[r5,#0]            ;1043  ; work_stat
0018c4  b910              CBNZ     r0,|L1.6348|
0018c6  f8a94000          STRH     r4,[r9,#0]            ;1045
0018ca  e0cb              B        |L1.6756|
                  |L1.6348|
0018cc  e038              B        |L1.6464|
                  |L1.6350|
0018ce  7828              LDRB     r0,[r5,#0]            ;1052  ; work_stat
0018d0  bbb0              CBNZ     r0,|L1.6464|
0018d2  f8ab4000          STRH     r4,[r11,#0]           ;1054
0018d6  e0db              B        |L1.6800|
                  |L1.6360|
0018d8  7829              LDRB     r1,[r5,#0]            ;1062  ; work_stat
0018da  bb89              CBNZ     r1,|L1.6464|
0018dc  4605              MOV      r5,r0                 ;1064
0018de  8004              STRH     r4,[r0,#0]            ;1064
0018e0  e0ec              B        |L1.6844|
                  |L1.6370|
0018e2  7828              LDRB     r0,[r5,#0]            ;1071  ; work_stat
0018e4  bb60              CBNZ     r0,|L1.6464|
0018e6  f8aa4000          STRH     r4,[r10,#0]           ;1073
0018ea  e0fe              B        |L1.6890|
                  |L1.6380|
0018ec  2c11              CMP      r4,#0x11              ;1081
0018ee  d028              BEQ      |L1.6466|
0018f0  2c12              CMP      r4,#0x12              ;1085
0018f2  d029              BEQ      |L1.6472|
0018f4  2c13              CMP      r4,#0x13              ;1089
0018f6  d02a              BEQ      |L1.6478|
0018f8  2c14              CMP      r4,#0x14              ;1093
0018fa  d02b              BEQ      |L1.6484|
0018fc  2c21              CMP      r4,#0x21              ;1098
0018fe  d06a              BEQ      |L1.6614|
001900  2c22              CMP      r4,#0x22              ;1107
001902  d06d              BEQ      |L1.6624|
001904  2c31              CMP      r4,#0x31              ;1117
001906  d07b              BEQ      |L1.6656|
001908  2c32              CMP      r4,#0x32              ;1126
00190a  d07a              BEQ      |L1.6658|
00190c  2c41              CMP      r4,#0x41              ;1136
00190e  d079              BEQ      |L1.6660|
001910  2c42              CMP      r4,#0x42              ;1145
001912  d078              BEQ      |L1.6662|
001914  2c51              CMP      r4,#0x51              ;1155
001916  d077              BEQ      |L1.6664|
001918  2c52              CMP      r4,#0x52              ;1164
00191a  d076              BEQ      |L1.6666|
00191c  2c61              CMP      r4,#0x61              ;1174
00191e  d075              BEQ      |L1.6668|
001920  2c62              CMP      r4,#0x62              ;1183
001922  d074              BEQ      |L1.6670|
001924  2c71              CMP      r4,#0x71              ;1193
001926  d073              BEQ      |L1.6672|
001928  2c72              CMP      r4,#0x72              ;1202
00192a  d072              BEQ      |L1.6674|
00192c  4827              LDR      r0,|L1.6604|
00192e  4928              LDR      r1,|L1.6608|
001930  2c80              CMP      r4,#0x80              ;1212
001932  d06f              BEQ      |L1.6676|
001934  2c81              CMP      r4,#0x81              ;1219
001936  d06e              BEQ      |L1.6678|
001938  2c82              CMP      r4,#0x82              ;1226
00193a  d06d              BEQ      |L1.6680|
00193c  2c83              CMP      r4,#0x83              ;1233
00193e  d06c              BEQ      |L1.6682|
                  |L1.6464|
001940  e130              B        |L1.7076|
                  |L1.6466|
001942  f7fffffe          BL       start_CAP
001946  e12d              B        |L1.7076|
                  |L1.6472|
001948  f7fffffe          BL       pause_CAP
00194c  e12a              B        |L1.7076|
                  |L1.6478|
00194e  f7fffffe          BL       stop_CAP
001952  e127              B        |L1.7076|
                  |L1.6484|
001954  f7fffffe          BL       reset_CAP
001958  e124              B        |L1.7076|
00195a  e03c              B        |L1.6614|
                  |L1.6492|
                          DCD      CAP_ZAR_TIME
                  |L1.6496|
                          DCD      CAP_PAUSE1_TIME
                  |L1.6500|
                          DCD      CAP_RAZR_TIME
                  |L1.6504|
                          DCD      CAP_PAUSE2_TIME
                  |L1.6508|
                          DCD      CAP_MAX_VOLT
                  |L1.6512|
                          DCD      CAP_WRK_CURR
                  |L1.6516|
                          DCD      eepromRamSwitch
                  |L1.6520|
                          DCD      ramModbusCnt
                  |L1.6524|
                          DCD      I_ug
                  |L1.6528|
                          DCD      U_up
                  |L1.6532|
                          DCD      U_maxg
                  |L1.6536|
                          DCD      I_maxp
                  |L1.6540|
                          DCD      T_PROC_GS
                  |L1.6544|
                          DCD      T_PROC_PS
                  |L1.6548|
                          DCD      REV_STAT
                  |L1.6552|
                          DCD      REV_IS_ON
                  |L1.6556|
                          DCD      AVT_REV_IS_ON
                  |L1.6560|
                          DCD      AVT_REV_TIME_FF
                  |L1.6564|
                          DCD      T_PROC_MAX
                  |L1.6568|
                          DCD      AVT_REV_TIME_REW
                  |L1.6572|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.6576|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.6580|
                          DCD      I_MIN_IPS
                  |L1.6584|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.6588|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.6592|
                          DCD      U_MAX
                  |L1.6596|
                          DCD      U_MIN
                  |L1.6600|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.6604|
                          DCD      RELE_FUNC
                  |L1.6608|
                          DCD      rele_ext_cntrl
0019d4  e004              B        |L1.6624|
                  |L1.6614|
0019d6  7828              LDRB     r0,[r5,#0]            ;1100  ; work_stat
0019d8  bbb0              CBNZ     r0,|L1.6728|
0019da  8838              LDRH     r0,[r7,#0]            ;1102  ; CAP_ZAR_TIME
0019dc  1c40              ADDS     r0,r0,#1              ;1102
0019de  e003              B        |L1.6632|
                  |L1.6624|
0019e0  7828              LDRB     r0,[r5,#0]            ;1109  ; work_stat
0019e2  bb88              CBNZ     r0,|L1.6728|
0019e4  8838              LDRH     r0,[r7,#0]            ;1111  ; CAP_ZAR_TIME
0019e6  1e40              SUBS     r0,r0,#1              ;1111
                  |L1.6632|
0019e8  8038              STRH     r0,[r7,#0]            ;1102
                  |L1.6634|
0019ea  210a              MOVS     r1,#0xa               ;1028
0019ec  48b9              LDR      r0,|L1.7380|
0019ee  f7fffffe          BL       gran
0019f2  f9b71000          LDRSH    r1,[r7,#0]            ;1029  ; CAP_ZAR_TIME
0019f6  f44f70e9          MOV      r0,#0x1d2             ;1029
                  |L1.6650|
0019fa  f7fffffe          BL       lc640_write_int
0019fe  e0d1              B        |L1.7076|
                  |L1.6656|
001a00  e00c              B        |L1.6684|
                  |L1.6658|
001a02  e011              B        |L1.6696|
                  |L1.6660|
001a04  e021              B        |L1.6730|
                  |L1.6662|
001a06  e026              B        |L1.6742|
                  |L1.6664|
001a08  e035              B        |L1.6774|
                  |L1.6666|
001a0a  e03a              B        |L1.6786|
                  |L1.6668|
001a0c  e049              B        |L1.6818|
                  |L1.6670|
001a0e  e04f              B        |L1.6832|
                  |L1.6672|
001a10  e05e              B        |L1.6864|
                  |L1.6674|
001a12  e063              B        |L1.6876|
                  |L1.6676|
001a14  e073              B        |L1.6910|
                  |L1.6678|
001a16  e077              B        |L1.6920|
                  |L1.6680|
001a18  e07c              B        |L1.6932|
                  |L1.6682|
001a1a  e080              B        |L1.6942|
                  |L1.6684|
001a1c  7828              LDRB     r0,[r5,#0]            ;1119  ; work_stat
001a1e  b998              CBNZ     r0,|L1.6728|
001a20  f8b80000          LDRH     r0,[r8,#0]            ;1121  ; CAP_PAUSE1_TIME
001a24  1c40              ADDS     r0,r0,#1              ;1121
001a26  e004              B        |L1.6706|
                  |L1.6696|
001a28  7828              LDRB     r0,[r5,#0]            ;1128  ; work_stat
001a2a  b968              CBNZ     r0,|L1.6728|
001a2c  f8b80000          LDRH     r0,[r8,#0]            ;1130  ; CAP_PAUSE1_TIME
001a30  1e40              SUBS     r0,r0,#1              ;1130
                  |L1.6706|
001a32  f8a80000          STRH     r0,[r8,#0]            ;1121
                  |L1.6710|
001a36  210a              MOVS     r1,#0xa               ;1037
001a38  48a7              LDR      r0,|L1.7384|
001a3a  f7fffffe          BL       gran
001a3e  f9b81000          LDRSH    r1,[r8,#0]            ;1038  ; CAP_PAUSE1_TIME
001a42  f44f70ea          MOV      r0,#0x1d4             ;1038
001a46  e7d8              B        |L1.6650|
                  |L1.6728|
001a48  e031              B        |L1.6830|
                  |L1.6730|
001a4a  7828              LDRB     r0,[r5,#0]            ;1138  ; work_stat
001a4c  bb78              CBNZ     r0,|L1.6830|
001a4e  f8b90000          LDRH     r0,[r9,#0]            ;1140  ; CAP_RAZR_TIME
001a52  1c40              ADDS     r0,r0,#1              ;1140
001a54  e004              B        |L1.6752|
                  |L1.6742|
001a56  7828              LDRB     r0,[r5,#0]            ;1147  ; work_stat
001a58  bb48              CBNZ     r0,|L1.6830|
001a5a  f8b90000          LDRH     r0,[r9,#0]            ;1149  ; CAP_RAZR_TIME
001a5e  1e40              SUBS     r0,r0,#1              ;1149
                  |L1.6752|
001a60  f8a90000          STRH     r0,[r9,#0]            ;1140
                  |L1.6756|
001a64  210a              MOVS     r1,#0xa               ;1046
001a66  489d              LDR      r0,|L1.7388|
001a68  f7fffffe          BL       gran
001a6c  f9b91000          LDRSH    r1,[r9,#0]            ;1047  ; CAP_RAZR_TIME
001a70  f44f70eb          MOV      r0,#0x1d6             ;1047
001a74  e7c1              B        |L1.6650|
                  |L1.6774|
001a76  7828              LDRB     r0,[r5,#0]            ;1157  ; work_stat
001a78  b9c8              CBNZ     r0,|L1.6830|
001a7a  f8bb0000          LDRH     r0,[r11,#0]           ;1159  ; CAP_PAUSE2_TIME
001a7e  1c40              ADDS     r0,r0,#1              ;1159
001a80  e004              B        |L1.6796|
                  |L1.6786|
001a82  7828              LDRB     r0,[r5,#0]            ;1166  ; work_stat
001a84  b998              CBNZ     r0,|L1.6830|
001a86  f8bb0000          LDRH     r0,[r11,#0]           ;1168  ; CAP_PAUSE2_TIME
001a8a  1e40              SUBS     r0,r0,#1              ;1168
                  |L1.6796|
001a8c  f8ab0000          STRH     r0,[r11,#0]           ;1159
                  |L1.6800|
001a90  210a              MOVS     r1,#0xa               ;1055
001a92  4893              LDR      r0,|L1.7392|
001a94  f7fffffe          BL       gran
001a98  f9bb1000          LDRSH    r1,[r11,#0]           ;1056  ; CAP_PAUSE2_TIME
001a9c  f44f70ec          MOV      r0,#0x1d8             ;1056
001aa0  e7ab              B        |L1.6650|
                  |L1.6818|
001aa2  7829              LDRB     r1,[r5,#0]            ;1176  ; work_stat
001aa4  b919              CBNZ     r1,|L1.6830|
001aa6  4605              MOV      r5,r0                 ;1178
001aa8  8800              LDRH     r0,[r0,#0]            ;1178  ; CAP_MAX_VOLT
001aaa  1c40              ADDS     r0,r0,#1              ;1178
001aac  e005              B        |L1.6842|
                  |L1.6830|
001aae  e030              B        |L1.6930|
                  |L1.6832|
001ab0  7829              LDRB     r1,[r5,#0]            ;1185  ; work_stat
001ab2  bb71              CBNZ     r1,|L1.6930|
001ab4  4605              MOV      r5,r0                 ;1187
001ab6  8800              LDRH     r0,[r0,#0]            ;1187  ; CAP_MAX_VOLT
001ab8  1e40              SUBS     r0,r0,#1              ;1187
                  |L1.6842|
001aba  8028              STRH     r0,[r5,#0]            ;1178
                  |L1.6844|
001abc  2264              MOVS     r2,#0x64              ;1065
001abe  2101              MOVS     r1,#1                 ;1065
001ac0  4888              LDR      r0,|L1.7396|
001ac2  f7fffffe          BL       gran
001ac6  f9b51000          LDRSH    r1,[r5,#0]            ;1066  ; CAP_MAX_VOLT
001aca  f44f70ed          MOV      r0,#0x1da             ;1066
001ace  e794              B        |L1.6650|
                  |L1.6864|
001ad0  7828              LDRB     r0,[r5,#0]            ;1195  ; work_stat
001ad2  b9f0              CBNZ     r0,|L1.6930|
001ad4  f8ba0000          LDRH     r0,[r10,#0]           ;1197  ; CAP_WRK_CURR
001ad8  1c40              ADDS     r0,r0,#1              ;1197
001ada  e004              B        |L1.6886|
                  |L1.6876|
001adc  7828              LDRB     r0,[r5,#0]            ;1204  ; work_stat
001ade  b9c0              CBNZ     r0,|L1.6930|
001ae0  f8ba0000          LDRH     r0,[r10,#0]           ;1206  ; CAP_WRK_CURR
001ae4  1e40              SUBS     r0,r0,#1              ;1206
                  |L1.6886|
001ae6  f8aa0000          STRH     r0,[r10,#0]           ;1197
                  |L1.6890|
001aea  2296              MOVS     r2,#0x96              ;1074
001aec  2101              MOVS     r1,#1                 ;1074
001aee  487e              LDR      r0,|L1.7400|
001af0  f7fffffe          BL       gran
001af4  f9ba1000          LDRSH    r1,[r10,#0]           ;1075  ; CAP_WRK_CURR
001af8  f44f70ee          MOV      r0,#0x1dc             ;1075
001afc  e77d              B        |L1.6650|
                  |L1.6910|
001afe  8800              LDRH     r0,[r0,#0]            ;1214  ; RELE_FUNC
001b00  2806              CMP      r0,#6                 ;1214
001b02  d14f              BNE      |L1.7076|
001b04  2000              MOVS     r0,#0                 ;1216
001b06  e003              B        |L1.6928|
                  |L1.6920|
001b08  8800              LDRH     r0,[r0,#0]            ;1221  ; RELE_FUNC
001b0a  2806              CMP      r0,#6                 ;1221
001b0c  d14a              BNE      |L1.7076|
001b0e  2001              MOVS     r0,#1                 ;1223
                  |L1.6928|
001b10  7008              STRB     r0,[r1,#0]            ;1216
                  |L1.6930|
001b12  e047              B        |L1.7076|
                  |L1.6932|
001b14  8840              LDRH     r0,[r0,#2]            ;1228  ; RELE_FUNC
001b16  2806              CMP      r0,#6                 ;1228
001b18  d144              BNE      |L1.7076|
001b1a  2000              MOVS     r0,#0                 ;1230
001b1c  e003              B        |L1.6950|
                  |L1.6942|
001b1e  8840              LDRH     r0,[r0,#2]            ;1235  ; RELE_FUNC
001b20  2806              CMP      r0,#6                 ;1235
001b22  d13f              BNE      |L1.7076|
001b24  2001              MOVS     r0,#1                 ;1237
                  |L1.6950|
001b26  7048              STRB     r0,[r1,#1]            ;1237
001b28  e03c              B        |L1.7076|
                  |L1.6954|
001b2a  4870              LDR      r0,|L1.7404|
001b2c  e000              B        |L1.6960|
                  |L1.6958|
001b2e  4870              LDR      r0,|L1.7408|
                  |L1.6960|
001b30  8004              STRH     r4,[r0,#0]            ;1249
001b32  e037              B        |L1.7076|
                  |L1.6964|
001b34  496f              LDR      r1,|L1.7412|
001b36  eb040084          ADD      r0,r4,r4,LSL #2       ;1254
001b3a  0040              LSLS     r0,r0,#1              ;1254
001b3c  8008              STRH     r0,[r1,#0]            ;1254
001b3e  e031              B        |L1.7076|
                  |L1.6976|
001b40  496d              LDR      r1,|L1.7416|
001b42  e000              B        |L1.6982|
                  |L1.6980|
001b44  496d              LDR      r1,|L1.7420|
                  |L1.6982|
001b46  800c              STRH     r4,[r1,#0]            ;1259
001b48  2101              MOVS     r1,#1                 ;1260
001b4a  7001              STRB     r1,[r0,#0]            ;1260
001b4c  e028              B        |L1.7072|
                  |L1.6990|
001b4e  2c01              CMP      r4,#1                 ;1273
001b50  d001              BEQ      |L1.6998|
001b52  b314              CBZ      r4,|L1.7066|
001b54  e024              B        |L1.7072|
                  |L1.6998|
001b56  7828              LDRB     r0,[r5,#0]            ;1275  ; work_stat
001b58  2802              CMP      r0,#2                 ;1275
001b5a  d021              BEQ      |L1.7072|
001b5c  4868              LDR      r0,|L1.7424|
001b5e  8800              LDRH     r0,[r0,#0]            ;1277  ; SK_START
001b60  2802              CMP      r0,#2                 ;1277
001b62  d10d              BNE      |L1.7040|
001b64  4867              LDR      r0,|L1.7428|
001b66  8800              LDRH     r0,[r0,#0]            ;1279  ; SK_START_LEV
001b68  2800              CMP      r0,#0                 ;1279
001b6a  4867              LDR      r0,|L1.7432|
001b6c  d004              BEQ      |L1.7032|
001b6e  8800              LDRH     r0,[r0,#0]            ;1281  ; sk_in_drv_stat
001b70  2801              CMP      r0,#1                 ;1281
                  |L1.7026|
001b72  f43fad53          BEQ      |L1.5660|
001b76  e003              B        |L1.7040|
                  |L1.7032|
001b78  f9b00000          LDRSH    r0,[r0,#0]            ;1288  ; sk_in_drv_stat
001b7c  1c40              ADDS     r0,r0,#1              ;1288
001b7e  d0f8              BEQ      |L1.7026|
                  |L1.7040|
001b80  2002              MOVS     r0,#2                 ;1294
001b82  4962              LDR      r1,|L1.7436|
001b84  7028              STRB     r0,[r5,#0]            ;1294
001b86  2000              MOVS     r0,#0                 ;1295
001b88  6008              STR      r0,[r1,#0]            ;1296  ; time_proc
001b8a  4861              LDR      r0,|L1.7440|
001b8c  6801              LDR      r1,[r0,#0]            ;1296  ; T_PROC_PS
001b8e  4861              LDR      r0,|L1.7444|
001b90  6001              STR      r1,[r0,#0]            ;1297  ; time_proc_remain
001b92  f7fffffe          BL       restart_on_PS
001b96  2101              MOVS     r1,#1                 ;1298
001b98  e03b              B        |L1.7186|
                  |L1.7066|
001b9a  7828              LDRB     r0,[r5,#0]            ;1303  ; work_stat
001b9c  2802              CMP      r0,#2                 ;1303
001b9e  d015              BEQ      |L1.7116|
                  |L1.7072|
001ba0  f8a87000          STRH     r7,[r8,#0]            ;1309
                  |L1.7076|
001ba4  4d5c              LDR      r5,|L1.7448|
001ba6  4f5d              LDR      r7,|L1.7452|
001ba8  6828              LDR      r0,[r5,#0]            ;1352  ; T_PROC_GS
001baa  8839              LDRH     r1,[r7,#0]            ;1352  ; T_PROC_MAX
001bac  4288              CMP      r0,r1                 ;1352
001bae  dc01              BGT      |L1.7092|
001bb0  281e              CMP      r0,#0x1e              ;1352
001bb2  da41              BGE      |L1.7224|
                  |L1.7092|
001bb4  4288              CMP      r0,r1                 ;1354
001bb6  dd30              BLE      |L1.7194|
001bb8  1c49              ADDS     r1,r1,#1              ;1354
001bba  6029              STR      r1,[r5,#0]            ;1354  ; T_PROC_GS
001bbc  e031              B        |L1.7202|
                  |L1.7102|
001bbe  2c01              CMP      r4,#1                 ;1313
001bc0  d009              BEQ      |L1.7126|
001bc2  2c00              CMP      r4,#0                 ;1340
001bc4  d1ec              BNE      |L1.7072|
001bc6  7828              LDRB     r0,[r5,#0]            ;1342  ; work_stat
001bc8  2801              CMP      r0,#1                 ;1342
001bca  d1e9              BNE      |L1.7072|
                  |L1.7116|
001bcc  2000              MOVS     r0,#0                 ;1344
001bce  7028              STRB     r0,[r5,#0]            ;1344
001bd0  f7fffffe          BL       restart_off
001bd4  e7e4              B        |L1.7072|
                  |L1.7126|
001bd6  7828              LDRB     r0,[r5,#0]            ;1315  ; work_stat
001bd8  2801              CMP      r0,#1                 ;1315
001bda  d0e1              BEQ      |L1.7072|
001bdc  4848              LDR      r0,|L1.7424|
001bde  8800              LDRH     r0,[r0,#0]            ;1317  ; SK_START
001be0  2802              CMP      r0,#2                 ;1317
001be2  d10c              BNE      |L1.7166|
001be4  4847              LDR      r0,|L1.7428|
001be6  8800              LDRH     r0,[r0,#0]            ;1319  ; SK_START_LEV
001be8  2800              CMP      r0,#0                 ;1319
001bea  4847              LDR      r0,|L1.7432|
001bec  d003              BEQ      |L1.7158|
001bee  8800              LDRH     r0,[r0,#0]            ;1321  ; sk_in_drv_stat
001bf0  2801              CMP      r0,#1                 ;1321
                  |L1.7154|
001bf2  d0be              BEQ      |L1.7026|
001bf4  e003              B        |L1.7166|
                  |L1.7158|
001bf6  f9b00000          LDRSH    r0,[r0,#0]            ;1328  ; sk_in_drv_stat
001bfa  1c40              ADDS     r0,r0,#1              ;1328
001bfc  d0b9              BEQ      |L1.7026|
                  |L1.7166|
001bfe  2001              MOVS     r0,#1                 ;1334
001c00  4942              LDR      r1,|L1.7436|
001c02  7028              STRB     r0,[r5,#0]            ;1334
001c04  2000              MOVS     r0,#0                 ;1335
001c06  6008              STR      r0,[r1,#0]            ;1336  ; time_proc
001c08  4843              LDR      r0,|L1.7448|
001c0a  6801              LDR      r1,[r0,#0]            ;1336  ; T_PROC_GS
001c0c  4841              LDR      r0,|L1.7444|
001c0e  6001              STR      r1,[r0,#0]            ;1337  ; time_proc_remain
001c10  2100              MOVS     r1,#0                 ;1337
                  |L1.7186|
001c12  20ea              MOVS     r0,#0xea              ;1337
001c14  f7fffffe          BL       lc640_write_int
001c18  e7c2              B        |L1.7072|
                  |L1.7194|
001c1a  281e              CMP      r0,#0x1e              ;1355
001c1c  da01              BGE      |L1.7202|
001c1e  201d              MOVS     r0,#0x1d              ;1355
001c20  6028              STR      r0,[r5,#0]            ;1355  ; T_PROC_GS
                  |L1.7202|
001c22  6828              LDR      r0,[r5,#0]            ;1356  ; T_PROC_GS
001c24  b201              SXTH     r1,r0                 ;1356
001c26  20d8              MOVS     r0,#0xd8              ;1356
001c28  f7fffffe          BL       lc640_write_int
001c2c  483c              LDR      r0,|L1.7456|
001c2e  2101              MOVS     r1,#1                 ;1357
001c30  8001              STRH     r1,[r0,#0]            ;1357
001c32  20ee              MOVS     r0,#0xee              ;1358
001c34  f7fffffe          BL       lc640_write_int
                  |L1.7224|
001c38  8839              LDRH     r1,[r7,#0]            ;1360  ; T_PROC_MAX
001c3a  6828              LDR      r0,[r5,#0]            ;1360  ; T_PROC_GS
001c3c  4288              CMP      r0,r1                 ;1360
001c3e  dc07              BGT      |L1.7248|
001c40  281e              CMP      r0,#0x1e              ;1360
001c42  db05              BLT      |L1.7248|
001c44  4836              LDR      r0,|L1.7456|
001c46  2100              MOVS     r1,#0                 ;1362
001c48  8001              STRH     r1,[r0,#0]            ;1362
001c4a  20ee              MOVS     r0,#0xee              ;1363
001c4c  f7fffffe          BL       lc640_write_int
                  |L1.7248|
001c50  4d2f              LDR      r5,|L1.7440|
001c52  8839              LDRH     r1,[r7,#0]            ;1366  ; T_PROC_MAX
001c54  6828              LDR      r0,[r5,#0]            ;1366  ; T_PROC_PS
001c56  4288              CMP      r0,r1                 ;1366
001c58  dc01              BGT      |L1.7262|
001c5a  281e              CMP      r0,#0x1e              ;1366
001c5c  da13              BGE      |L1.7302|
                  |L1.7262|
001c5e  4288              CMP      r0,r1                 ;1368
001c60  dd02              BLE      |L1.7272|
001c62  1c49              ADDS     r1,r1,#1              ;1368
001c64  6029              STR      r1,[r5,#0]            ;1368  ; T_PROC_PS
001c66  e003              B        |L1.7280|
                  |L1.7272|
001c68  281e              CMP      r0,#0x1e              ;1369
001c6a  da01              BGE      |L1.7280|
001c6c  201d              MOVS     r0,#0x1d              ;1369
001c6e  6028              STR      r0,[r5,#0]            ;1369  ; T_PROC_PS
                  |L1.7280|
001c70  6828              LDR      r0,[r5,#0]            ;1370  ; T_PROC_PS
001c72  b201              SXTH     r1,r0                 ;1370
001c74  20dc              MOVS     r0,#0xdc              ;1370
001c76  f7fffffe          BL       lc640_write_int
001c7a  482a              LDR      r0,|L1.7460|
001c7c  2101              MOVS     r1,#1                 ;1371
001c7e  8001              STRH     r1,[r0,#0]            ;1371
001c80  20f0              MOVS     r0,#0xf0              ;1372
001c82  f7fffffe          BL       lc640_write_int
                  |L1.7302|
001c86  8839              LDRH     r1,[r7,#0]            ;1374  ; T_PROC_MAX
001c88  6828              LDR      r0,[r5,#0]            ;1374  ; T_PROC_PS
001c8a  4288              CMP      r0,r1                 ;1374
001c8c  dc07              BGT      |L1.7326|
001c8e  281e              CMP      r0,#0x1e              ;1374
001c90  db05              BLT      |L1.7326|
001c92  4824              LDR      r0,|L1.7460|
001c94  2100              MOVS     r1,#0                 ;1376
001c96  8001              STRH     r1,[r0,#0]            ;1376
001c98  20f0              MOVS     r0,#0xf0              ;1377
001c9a  f7fffffe          BL       lc640_write_int
                  |L1.7326|
001c9e  4822              LDR      r0,|L1.7464|
001ca0  4623              MOV      r3,r4                 ;1380
001ca2  4632              MOV      r2,r6                 ;1380
001ca4  8800              LDRH     r0,[r0,#0]            ;1380  ; MODBUS_ADRESS
001ca6  9903              LDR      r1,[sp,#0xc]          ;1380
001ca8  b2c0              UXTB     r0,r0                 ;1380
001caa  f7fffffe          BL       modbus_hold_register_answer_transmit
001cae  2e5a              CMP      r6,#0x5a              ;1383
001cb0  d09f              BEQ      |L1.7154|
001cb2  2e5b              CMP      r6,#0x5b              ;1383
001cb4  d09d              BEQ      |L1.7154|
001cb6  2e5c              CMP      r6,#0x5c              ;1383
001cb8  d09b              BEQ      |L1.7154|
001cba  2e5d              CMP      r6,#0x5d              ;1383
001cbc  d099              BEQ      |L1.7154|
001cbe  481b              LDR      r0,|L1.7468|
001cc0  8800              LDRH     r0,[r0,#0]            ;1383  ; EE_WRITE_CNT
001cc2  b00b              ADD      sp,sp,#0x2c           ;1383
001cc4  1c40              ADDS     r0,r0,#1              ;1383
001cc6  e8bd4ff0          POP      {r4-r11,lr}           ;1383
001cca  b201              SXTH     r1,r0                 ;1383
001ccc  204c              MOVS     r0,#0x4c              ;1383
001cce  f7ffbffe          B.W      lc640_write_int
;;;1394   
                          ENDP

001cd2  0000              DCW      0x0000
                  |L1.7380|
                          DCD      CAP_ZAR_TIME
                  |L1.7384|
                          DCD      CAP_PAUSE1_TIME
                  |L1.7388|
                          DCD      CAP_RAZR_TIME
                  |L1.7392|
                          DCD      CAP_PAUSE2_TIME
                  |L1.7396|
                          DCD      CAP_MAX_VOLT
                  |L1.7400|
                          DCD      CAP_WRK_CURR
                  |L1.7404|
                          DCD      pwm_u_reg
                  |L1.7408|
                          DCD      pwm_i_reg
                  |L1.7412|
                          DCD      pwm_t_reg
                  |L1.7416|
                          DCD      I_ug_ram
                  |L1.7420|
                          DCD      U_up_ram
                  |L1.7424|
                          DCD      SK_START
                  |L1.7428|
                          DCD      SK_START_LEV
                  |L1.7432|
                          DCD      sk_in_drv_stat
                  |L1.7436|
                          DCD      time_proc
                  |L1.7440|
                          DCD      T_PROC_PS
                  |L1.7444|
                          DCD      time_proc_remain
                  |L1.7448|
                          DCD      T_PROC_GS
                  |L1.7452|
                          DCD      T_PROC_MAX
                  |L1.7456|
                          DCD      T_PROC_GS_MODE
                  |L1.7460|
                          DCD      T_PROC_PS_MODE
                  |L1.7464|
                          DCD      MODBUS_ADRESS
                  |L1.7468|
                          DCD      EE_WRITE_CNT

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  modbus_hold_register_transmit PROC
;;;1892   //-----------------------------------------------
;;;1893   void modbus_hold_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;1894   {
000004  4681              MOV      r9,r0
;;;1895   char modbus_registers[120];
;;;1896   char modbus_tx_buff[100];
;;;1897   unsigned short crc_temp;
;;;1898   char i;
;;;1899   
;;;1900   I_ug=50;
000006  48ae              LDR      r0,|L2.704|
000008  468a              MOV      r10,r1                ;1894
00000a  b0b8              SUB      sp,sp,#0xe0           ;1894
00000c  2132              MOVS     r1,#0x32
00000e  8001              STRH     r1,[r0,#0]
;;;1901   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
000010  2000              MOVS     r0,#0
000012  f88d0000          STRB     r0,[sp,#0]
;;;1902   modbus_registers[1]=(char)(I_ug%256);
;;;1903   U_up=51;
000016  4bab              LDR      r3,|L2.708|
000018  f88d1001          STRB     r1,[sp,#1]            ;1902
00001c  2133              MOVS     r1,#0x33
00001e  8019              STRH     r1,[r3,#0]
;;;1904   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
000020  f88d0002          STRB     r0,[sp,#2]
;;;1905   modbus_registers[3]=(char)(U_up%256);
000024  f88d1003          STRB     r1,[sp,#3]
;;;1906   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
000028  49a7              LDR      r1,|L2.712|
;;;1907   modbus_registers[5]=(char)(U_maxg%256);
;;;1908   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1909   modbus_registers[7]=(char)(I_maxp%256);
;;;1910   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1911   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1912   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1913   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1914   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
00002a  f44f2861          MOV      r8,#0xe1000
;;;1915   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00002e  f44f6c61          MOV      r12,#0xe10
000032  f9b11000          LDRSH    r1,[r1,#0]            ;1906  ; U_maxg
000036  17cb              ASRS     r3,r1,#31             ;1906
000038  eb016313          ADD      r3,r1,r3,LSR #24      ;1906
00003c  121c              ASRS     r4,r3,#8              ;1906
00003e  f88d4004          STRB     r4,[sp,#4]            ;1906
000042  1a09              SUBS     r1,r1,r0              ;1907
000044  f88d1005          STRB     r1,[sp,#5]            ;1907
000048  49a0              LDR      r1,|L2.716|
00004a  f9b11000          LDRSH    r1,[r1,#0]            ;1908  ; I_maxp
00004e  17cb              ASRS     r3,r1,#31             ;1908
000050  eb016313          ADD      r3,r1,r3,LSR #24      ;1908
000054  121c              ASRS     r4,r3,#8              ;1908
000056  f88d4006          STRB     r4,[sp,#6]            ;1908
00005a  f88d1007          STRB     r1,[sp,#7]            ;1909
00005e  499c              LDR      r1,|L2.720|
000060  233c              MOVS     r3,#0x3c              ;1910
000062  680c              LDR      r4,[r1,#0]            ;1910  ; T_PROC_GS
000064  fb94f5f3          SDIV     r5,r4,r3              ;1910
000068  fb034115          MLS      r1,r3,r5,r4           ;1910
00006c  17ce              ASRS     r6,r1,#31             ;1910
00006e  eb016616          ADD      r6,r1,r6,LSR #24      ;1910
000072  1237              ASRS     r7,r6,#8              ;1910
000074  f88d7008          STRB     r7,[sp,#8]            ;1910
000078  f88d1009          STRB     r1,[sp,#9]            ;1911
00007c  fb95f1f3          SDIV     r1,r5,r3              ;1912
000080  fb035111          MLS      r1,r3,r1,r5           ;1912
000084  17cd              ASRS     r5,r1,#31             ;1912
000086  eb016515          ADD      r5,r1,r5,LSR #24      ;1912
00008a  122e              ASRS     r6,r5,#8              ;1912
00008c  f88d600a          STRB     r6,[sp,#0xa]          ;1912
000090  f88d100b          STRB     r1,[sp,#0xb]          ;1913
000094  fb94f1f8          SDIV     r1,r4,r8              ;1914
000098  f88d100c          STRB     r1,[sp,#0xc]          ;1914
00009c  fb94f1fc          SDIV     r1,r4,r12
0000a0  f88d100d          STRB     r1,[sp,#0xd]
;;;1916   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0000a4  498b              LDR      r1,|L2.724|
0000a6  680c              LDR      r4,[r1,#0]  ; T_PROC_PS
;;;1917   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
;;;1918   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
;;;1919   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
;;;1920   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
;;;1921   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
;;;1922   modbus_registers[20]=0;								//Πεγ60
0000a8  f88d0014          STRB     r0,[sp,#0x14]
0000ac  fb94f5f3          SDIV     r5,r4,r3              ;1916
0000b0  fb034115          MLS      r1,r3,r5,r4           ;1916
0000b4  17ce              ASRS     r6,r1,#31             ;1916
0000b6  eb016616          ADD      r6,r1,r6,LSR #24      ;1916
0000ba  1237              ASRS     r7,r6,#8              ;1916
0000bc  f88d700e          STRB     r7,[sp,#0xe]          ;1916
0000c0  f88d100f          STRB     r1,[sp,#0xf]          ;1917
0000c4  fb95f1f3          SDIV     r1,r5,r3              ;1918
0000c8  fb035111          MLS      r1,r3,r1,r5           ;1918
0000cc  17cb              ASRS     r3,r1,#31             ;1918
0000ce  eb016313          ADD      r3,r1,r3,LSR #24      ;1918
0000d2  121d              ASRS     r5,r3,#8              ;1918
0000d4  f88d5010          STRB     r5,[sp,#0x10]         ;1918
0000d8  f88d1011          STRB     r1,[sp,#0x11]         ;1919
0000dc  fb94f1f8          SDIV     r1,r4,r8              ;1920
0000e0  f88d1012          STRB     r1,[sp,#0x12]         ;1920
0000e4  fb94f1fc          SDIV     r1,r4,r12             ;1921
0000e8  f88d1013          STRB     r1,[sp,#0x13]         ;1921
;;;1923   modbus_registers[21]=0;
0000ec  f88d0015          STRB     r0,[sp,#0x15]
;;;1924   if(work_stat==wsPS)modbus_registers[21]=1;
0000f0  4979              LDR      r1,|L2.728|
0000f2  780b              LDRB     r3,[r1,#0]  ; work_stat
0000f4  2101              MOVS     r1,#1
0000f6  2b02              CMP      r3,#2
0000f8  d101              BNE      |L2.254|
0000fa  f88d1015          STRB     r1,[sp,#0x15]
                  |L2.254|
;;;1925   
;;;1926   modbus_registers[22]=0;								//Πεγ61
0000fe  f88d0016          STRB     r0,[sp,#0x16]
;;;1927   modbus_registers[23]=0;
000102  f88d0017          STRB     r0,[sp,#0x17]
;;;1928   if(work_stat==wsGS)modbus_registers[23]=1;
000106  2b01              CMP      r3,#1
000108  d101              BNE      |L2.270|
00010a  f88d1017          STRB     r1,[sp,#0x17]
                  |L2.270|
;;;1929   
;;;1930   modbus_registers[24]=0;								//Πεγ62
;;;1931   modbus_registers[25]=0;
;;;1932   if(REV_STAT==rsREW)modbus_registers[25]=1;
00010e  4b73              LDR      r3,|L2.732|
000110  f88d0018          STRB     r0,[sp,#0x18]         ;1930
000114  f88d0019          STRB     r0,[sp,#0x19]         ;1931
000118  781b              LDRB     r3,[r3,#0]  ; REV_STAT
00011a  b90b              CBNZ     r3,|L2.288|
00011c  f88d1019          STRB     r1,[sp,#0x19]
                  |L2.288|
;;;1933   
;;;1934   modbus_registers[26]=0;								//Πεγ63
;;;1935   modbus_registers[27]=0;
;;;1936   if(AVT_REV_IS_ON)modbus_registers[27]=1;
000120  4b6f              LDR      r3,|L2.736|
000122  f88d001a          STRB     r0,[sp,#0x1a]         ;1934
000126  f88d001b          STRB     r0,[sp,#0x1b]         ;1935
00012a  881b              LDRH     r3,[r3,#0]  ; AVT_REV_IS_ON
00012c  b10b              CBZ      r3,|L2.306|
00012e  f88d101b          STRB     r1,[sp,#0x1b]
                  |L2.306|
;;;1937   
;;;1938   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000132  496c              LDR      r1,|L2.740|
000134  8809              LDRH     r1,[r1,#0]  ; AVT_REV_TIME_FF
000136  0a0b              LSRS     r3,r1,#8
000138  f88d301c          STRB     r3,[sp,#0x1c]
;;;1939   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
00013c  f88d101d          STRB     r1,[sp,#0x1d]
;;;1940   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
000140  4969              LDR      r1,|L2.744|
000142  8809              LDRH     r1,[r1,#0]  ; AVT_REV_TIME_REW
000144  0a0b              LSRS     r3,r1,#8
000146  f88d301e          STRB     r3,[sp,#0x1e]
;;;1941   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00014a  f88d101f          STRB     r1,[sp,#0x1f]
;;;1942   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00014e  4967              LDR      r1,|L2.748|
000150  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_TIME_PAUSE
000154  17cb              ASRS     r3,r1,#31
000156  eb016313          ADD      r3,r1,r3,LSR #24
00015a  121c              ASRS     r4,r3,#8
00015c  f88d4020          STRB     r4,[sp,#0x20]
;;;1943   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
000160  f88d1021          STRB     r1,[sp,#0x21]
;;;1944   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
000164  4962              LDR      r1,|L2.752|
000166  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_I_NOM_FF
00016a  17cb              ASRS     r3,r1,#31
00016c  eb016313          ADD      r3,r1,r3,LSR #24
000170  121c              ASRS     r4,r3,#8
000172  f88d4022          STRB     r4,[sp,#0x22]
;;;1945   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
000176  f88d1023          STRB     r1,[sp,#0x23]
;;;1946   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
00017a  495e              LDR      r1,|L2.756|
00017c  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_I_NOM_REW
000180  17cb              ASRS     r3,r1,#31
000182  eb016313          ADD      r3,r1,r3,LSR #24
000186  121c              ASRS     r4,r3,#8
000188  f88d4024          STRB     r4,[sp,#0x24]
;;;1947   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
00018c  f88d1025          STRB     r1,[sp,#0x25]
;;;1948   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
000190  4959              LDR      r1,|L2.760|
000192  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_U_NOM_FF
000196  17cb              ASRS     r3,r1,#31
000198  eb016313          ADD      r3,r1,r3,LSR #24
00019c  121c              ASRS     r4,r3,#8
00019e  f88d4026          STRB     r4,[sp,#0x26]
;;;1949   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
0001a2  f88d1027          STRB     r1,[sp,#0x27]
;;;1950   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
0001a6  4955              LDR      r1,|L2.764|
0001a8  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_U_NOM_REW
0001ac  17cb              ASRS     r3,r1,#31
0001ae  eb016313          ADD      r3,r1,r3,LSR #24
0001b2  121c              ASRS     r4,r3,#8
0001b4  f88d4028          STRB     r4,[sp,#0x28]
;;;1951   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
0001b8  f88d1029          STRB     r1,[sp,#0x29]
;;;1952   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
0001bc  4950              LDR      r1,|L2.768|
0001be  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_ZAR_TIME
0001c2  17cb              ASRS     r3,r1,#31
0001c4  eb016313          ADD      r3,r1,r3,LSR #24
0001c8  121c              ASRS     r4,r3,#8
0001ca  f88d402a          STRB     r4,[sp,#0x2a]
;;;1953   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
0001ce  f88d102b          STRB     r1,[sp,#0x2b]
;;;1954   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
0001d2  494c              LDR      r1,|L2.772|
0001d4  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_PAUSE1_TIME
0001d8  17cb              ASRS     r3,r1,#31
0001da  eb016313          ADD      r3,r1,r3,LSR #24
0001de  121c              ASRS     r4,r3,#8
0001e0  f88d402c          STRB     r4,[sp,#0x2c]
;;;1955   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
0001e4  f88d102d          STRB     r1,[sp,#0x2d]
;;;1956   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
0001e8  4947              LDR      r1,|L2.776|
0001ea  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_RAZR_TIME
0001ee  17cb              ASRS     r3,r1,#31
0001f0  eb016313          ADD      r3,r1,r3,LSR #24
0001f4  121c              ASRS     r4,r3,#8
0001f6  f88d402e          STRB     r4,[sp,#0x2e]
;;;1957   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
0001fa  f88d102f          STRB     r1,[sp,#0x2f]
;;;1958   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
0001fe  4943              LDR      r1,|L2.780|
000200  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_PAUSE2_TIME
000204  17cb              ASRS     r3,r1,#31
000206  eb016313          ADD      r3,r1,r3,LSR #24
00020a  121c              ASRS     r4,r3,#8
00020c  f88d4030          STRB     r4,[sp,#0x30]
;;;1959   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
000210  f88d1031          STRB     r1,[sp,#0x31]
;;;1960   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
000214  493e              LDR      r1,|L2.784|
000216  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_MAX_VOLT
00021a  17cb              ASRS     r3,r1,#31
00021c  eb016313          ADD      r3,r1,r3,LSR #24
000220  121c              ASRS     r4,r3,#8
000222  f88d4032          STRB     r4,[sp,#0x32]
;;;1961   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
000226  f88d1033          STRB     r1,[sp,#0x33]
;;;1962   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
00022a  493a              LDR      r1,|L2.788|
00022c  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_WRK_CURR
000230  17cb              ASRS     r3,r1,#31
000232  eb016313          ADD      r3,r1,r3,LSR #24
000236  121c              ASRS     r4,r3,#8
000238  f88d4034          STRB     r4,[sp,#0x34]
;;;1963   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
00023c  f88d1035          STRB     r1,[sp,#0x35]
;;;1964   modbus_registers[58]=(char)((REV_IS_ON)/256);				//Πεγ79	
000240  4935              LDR      r1,|L2.792|
000242  f9b11000          LDRSH    r1,[r1,#0]  ; REV_IS_ON
000246  17cb              ASRS     r3,r1,#31
000248  eb016313          ADD      r3,r1,r3,LSR #24
00024c  121c              ASRS     r4,r3,#8
00024e  f88d403a          STRB     r4,[sp,#0x3a]
;;;1965   modbus_registers[59]=(char)((REV_IS_ON)%256);
;;;1966   proc_phase=7;
000252  4b32              LDR      r3,|L2.796|
000254  f88d103b          STRB     r1,[sp,#0x3b]         ;1965
000258  2107              MOVS     r1,#7
00025a  7019              STRB     r1,[r3,#0]
;;;1967   modbus_registers[60]=(char)((proc_phase)/256);				//Πεγ80	
00025c  f88d003c          STRB     r0,[sp,#0x3c]
;;;1968   modbus_registers[61]=(char)((proc_phase)%256);
000260  f88d103d          STRB     r1,[sp,#0x3d]
;;;1969   
;;;1970   
;;;1971   modbus_tx_buff[0]=adr;
000264  f88d9078          STRB     r9,[sp,#0x78]
;;;1972   modbus_tx_buff[1]=func;
000268  f88da079          STRB     r10,[sp,#0x79]
;;;1973   modbus_tx_buff[2]=(char)(reg_adr/256);
00026c  0a10              LSRS     r0,r2,#8
00026e  f88d007a          STRB     r0,[sp,#0x7a]
;;;1974   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1975   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1976   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1977   
;;;1978   
;;;1979   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
000272  4668              MOV      r0,sp
000274  eb000042          ADD      r0,r0,r2,LSL #1
000278  f88d207b          STRB     r2,[sp,#0x7b]         ;1974
00027c  f8300c02          LDRH     r0,[r0,#-2]
000280  f8ad007c          STRH     r0,[sp,#0x7c]
;;;1980   
;;;1981   crc_temp=CRC16_2(modbus_tx_buff,6);
000284  2106              MOVS     r1,#6
000286  a81e              ADD      r0,sp,#0x78
000288  f7fffffe          BL       CRC16_2
;;;1982   
;;;1983   modbus_tx_buff[6]=crc_temp%256;
00028c  f88d007e          STRB     r0,[sp,#0x7e]
;;;1984   modbus_tx_buff[7]=crc_temp/256;
000290  0a00              LSRS     r0,r0,#8
000292  f88d007f          STRB     r0,[sp,#0x7f]
;;;1985   
;;;1986   for (i=0;i<8;i++)
000296  2400              MOVS     r4,#0
000298  ad1e              ADD      r5,sp,#0x78           ;1896
                  |L2.666|
;;;1987   	{
;;;1988   	putchar0(modbus_tx_buff[i]);
00029a  5d28              LDRB     r0,[r5,r4]
00029c  f7fffffe          BL       putchar0
0002a0  1c64              ADDS     r4,r4,#1              ;1986
0002a2  b2e4              UXTB     r4,r4                 ;1986
0002a4  2c08              CMP      r4,#8                 ;1986
0002a6  d3f8              BCC      |L2.666|
;;;1989   	}
;;;1990   for (i=0;i<8;i++)
0002a8  2400              MOVS     r4,#0
                  |L2.682|
;;;1991   	{
;;;1992   	putchar_sc16is700(modbus_tx_buff[i]);
0002aa  5d28              LDRB     r0,[r5,r4]
0002ac  f7fffffe          BL       putchar_sc16is700
0002b0  1c64              ADDS     r4,r4,#1              ;1990
0002b2  b2e4              UXTB     r4,r4                 ;1990
0002b4  2c08              CMP      r4,#8                 ;1990
0002b6  d3f8              BCC      |L2.682|
;;;1993   	}
;;;1994   }	
0002b8  b038              ADD      sp,sp,#0xe0
0002ba  e8bd87f0          POP      {r4-r10,pc}
;;;1995   
                          ENDP

0002be  0000              DCW      0x0000
                  |L2.704|
                          DCD      I_ug
                  |L2.708|
                          DCD      U_up
                  |L2.712|
                          DCD      U_maxg
                  |L2.716|
                          DCD      I_maxp
                  |L2.720|
                          DCD      T_PROC_GS
                  |L2.724|
                          DCD      T_PROC_PS
                  |L2.728|
                          DCD      work_stat
                  |L2.732|
                          DCD      REV_STAT
                  |L2.736|
                          DCD      AVT_REV_IS_ON
                  |L2.740|
                          DCD      AVT_REV_TIME_FF
                  |L2.744|
                          DCD      AVT_REV_TIME_REW
                  |L2.748|
                          DCD      AVT_REV_TIME_PAUSE
                  |L2.752|
                          DCD      AVT_REV_I_NOM_FF
                  |L2.756|
                          DCD      AVT_REV_I_NOM_REW
                  |L2.760|
                          DCD      AVT_REV_U_NOM_FF
                  |L2.764|
                          DCD      AVT_REV_U_NOM_REW
                  |L2.768|
                          DCD      CAP_ZAR_TIME
                  |L2.772|
                          DCD      CAP_PAUSE1_TIME
                  |L2.776|
                          DCD      CAP_RAZR_TIME
                  |L2.780|
                          DCD      CAP_PAUSE2_TIME
                  |L2.784|
                          DCD      CAP_MAX_VOLT
                  |L2.788|
                          DCD      CAP_WRK_CURR
                  |L2.792|
                          DCD      REV_IS_ON
                  |L2.796|
                          DCD      proc_phase

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  modbus_buf
                          %        20

                          AREA ||area_number.5||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.5||, ||.bss||
                  modbus_rx_buffer
                          %        30
                  modbus_an_buffer
                          %        30
                  modbus_registers
                          %        300

                          AREA ||.data||, DATA, ALIGN=1

                  modbus_self_cmnd_cnt
000000  21                DCB      0x21
                  bMODBUS_TIMEOUT
000001  00                DCB      0x00
                  modbus_rx_buffer_ptr
000002  00                DCB      0x00
                  modbus_rx_counter
000003  00                DCB      0x00
                  modbus_cmnd_cnt
000004  00                DCB      0x00
                  modbus_cmnd
000005  00                DCB      0x00
                  modbus_plazma
000006  0000              DCB      0x00,0x00
                  modbus_plazma1
000008  0000              DCB      0x00,0x00
                  modbus_plazma2
00000a  0000              DCB      0x00,0x00
                  modbus_plazma3
00000c  0000              DCB      0x00,0x00

                          AREA ||area_number.8||, DATA, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.data||
                  modbus_crc16
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.9||, DATA, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.data||
                  modbus_timeout_cnt
000000  00                DCB      0x00

                          AREA ||area_number.10||, DATA, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.data||
                  modbusTimeoutInMills
000000  0000              DCB      0x00,0x00
