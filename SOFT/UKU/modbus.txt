; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\modbus.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\modbus.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\modbus.crf modbus.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CRC16_2 PROC
;;;38     //-----------------------------------------------
;;;39     unsigned short CRC16_2(char* buf, short len)
000000  b570              PUSH     {r4-r6,lr}
;;;40     {
000002  4604              MOV      r4,r0
;;;41     unsigned short crc = 0xFFFF;
000004  f64f70ff          MOV      r0,#0xffff
;;;42     short pos;
;;;43     short i;
;;;44     
;;;45     for (pos = 0; pos < len; pos++)
000008  2200              MOVS     r2,#0
;;;46       	{
;;;47         	crc ^= (unsigned short)buf[pos];          // XOR byte into least sig. byte of crc
;;;48     
;;;49         	for ( i = 8; i != 0; i--) 
;;;50     		{    // Loop over each bit
;;;51           	if ((crc & 0x0001) != 0) 
;;;52     			{      // If the LSB is set
;;;53             		crc >>= 1;                    // Shift right and XOR 0xA001
;;;54             		crc ^= 0xA001;
00000a  f24a0501          MOV      r5,#0xa001
00000e  e00d              B        |L1.44|
                  |L1.16|
000010  5ca3              LDRB     r3,[r4,r2]            ;47
000012  4058              EORS     r0,r0,r3              ;47
000014  2308              MOVS     r3,#8                 ;49
                  |L1.22|
000016  07c6              LSLS     r6,r0,#31             ;51
;;;55           		}
;;;56           	else  crc >>= 1;                    // Just shift right
000018  ea4f0050          LSR      r0,r0,#1
00001c  d000              BEQ      |L1.32|
00001e  4068              EORS     r0,r0,r5              ;54
                  |L1.32|
000020  1e5b              SUBS     r3,r3,#1              ;49
000022  b21b              SXTH     r3,r3                 ;49
000024  2b00              CMP      r3,#0                 ;49
000026  d1f6              BNE      |L1.22|
000028  1c52              ADDS     r2,r2,#1              ;45
00002a  b212              SXTH     r2,r2                 ;45
                  |L1.44|
00002c  428a              CMP      r2,r1                 ;45
00002e  dbef              BLT      |L1.16|
;;;57         		}
;;;58       	}
;;;59       // Note, this number has low and high bytes swapped, so use it accordingly (or swap bytes)
;;;60     return crc;
;;;61     }
000030  bd70              POP      {r4-r6,pc}
;;;62     
                          ENDP

                  modbus_hold_register_transmit PROC
;;;1443   //-----------------------------------------------
;;;1444   void modbus_hold_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000032  e92d43f0          PUSH     {r4-r9,lr}
;;;1445   {
000036  4681              MOV      r9,r0
;;;1446   char modbus_registers[120];
;;;1447   char modbus_tx_buff[100];
;;;1448   unsigned short crc_temp;
;;;1449   char i;
;;;1450   
;;;1451   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
000038  48f9              LDR      r0,|L1.1056|
00003a  b0b7              SUB      sp,sp,#0xdc           ;1445
;;;1452   modbus_registers[1]=(char)(I_ug%256);
;;;1453   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
;;;1454   modbus_registers[3]=(char)(U_up%256);
;;;1455   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
;;;1456   modbus_registers[5]=(char)(U_maxg%256);
;;;1457   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1458   modbus_registers[7]=(char)(I_maxp%256);
;;;1459   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1460   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1461   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1462   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1463   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
;;;1464   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00003c  f44f6861          MOV      r8,#0xe10
000040  f9b00000          LDRSH    r0,[r0,#0]            ;1451  ; I_ug
000044  17c3              ASRS     r3,r0,#31             ;1451
000046  eb006313          ADD      r3,r0,r3,LSR #24      ;1451
00004a  121c              ASRS     r4,r3,#8              ;1451
00004c  f88d4000          STRB     r4,[sp,#0]            ;1451
000050  f88d0001          STRB     r0,[sp,#1]            ;1452
000054  48f3              LDR      r0,|L1.1060|
000056  f9b00000          LDRSH    r0,[r0,#0]            ;1453  ; U_up
00005a  17c3              ASRS     r3,r0,#31             ;1453
00005c  eb006313          ADD      r3,r0,r3,LSR #24      ;1453
000060  121c              ASRS     r4,r3,#8              ;1453
000062  f88d4002          STRB     r4,[sp,#2]            ;1453
000066  f88d0003          STRB     r0,[sp,#3]            ;1454
00006a  48ef              LDR      r0,|L1.1064|
00006c  f9b00000          LDRSH    r0,[r0,#0]            ;1455  ; U_maxg
000070  17c3              ASRS     r3,r0,#31             ;1455
000072  eb006313          ADD      r3,r0,r3,LSR #24      ;1455
000076  121c              ASRS     r4,r3,#8              ;1455
000078  f88d4004          STRB     r4,[sp,#4]            ;1455
00007c  f88d0005          STRB     r0,[sp,#5]            ;1456
000080  48ea              LDR      r0,|L1.1068|
000082  f9b00000          LDRSH    r0,[r0,#0]            ;1457  ; I_maxp
000086  17c3              ASRS     r3,r0,#31             ;1457
000088  eb006313          ADD      r3,r0,r3,LSR #24      ;1457
00008c  121c              ASRS     r4,r3,#8              ;1457
00008e  f88d4006          STRB     r4,[sp,#6]            ;1457
000092  f88d0007          STRB     r0,[sp,#7]            ;1458
000096  48e6              LDR      r0,|L1.1072|
000098  233c              MOVS     r3,#0x3c              ;1459
00009a  6804              LDR      r4,[r0,#0]            ;1459  ; T_PROC_GS
00009c  fb94f5f3          SDIV     r5,r4,r3              ;1459
0000a0  fb034015          MLS      r0,r3,r5,r4           ;1459
0000a4  17c6              ASRS     r6,r0,#31             ;1459
0000a6  eb006616          ADD      r6,r0,r6,LSR #24      ;1459
0000aa  1237              ASRS     r7,r6,#8              ;1459
0000ac  f88d7008          STRB     r7,[sp,#8]            ;1459
0000b0  f88d0009          STRB     r0,[sp,#9]            ;1460
0000b4  fb95f0f3          SDIV     r0,r5,r3              ;1461
0000b8  fb035010          MLS      r0,r3,r0,r5           ;1461
0000bc  17c5              ASRS     r5,r0,#31             ;1461
0000be  eb006515          ADD      r5,r0,r5,LSR #24      ;1461
0000c2  122e              ASRS     r6,r5,#8              ;1461
0000c4  f88d600a          STRB     r6,[sp,#0xa]          ;1461
0000c8  f88d000b          STRB     r0,[sp,#0xb]          ;1462
0000cc  f44f2761          MOV      r7,#0xe1000           ;1463
0000d0  fb94f0f7          SDIV     r0,r4,r7              ;1463
0000d4  f88d000c          STRB     r0,[sp,#0xc]          ;1463
0000d8  fb94f0f8          SDIV     r0,r4,r8
0000dc  f88d000d          STRB     r0,[sp,#0xd]
;;;1465   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0000e0  48d4              LDR      r0,|L1.1076|
0000e2  6804              LDR      r4,[r0,#0]  ; T_PROC_PS
0000e4  fb94f5f3          SDIV     r5,r4,r3
0000e8  fb034015          MLS      r0,r3,r5,r4
0000ec  17c6              ASRS     r6,r0,#31
0000ee  eb006616          ADD      r6,r0,r6,LSR #24
0000f2  ea4f2c26          ASR      r12,r6,#8
0000f6  f88dc00e          STRB     r12,[sp,#0xe]
;;;1466   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0000fa  f88d000f          STRB     r0,[sp,#0xf]
;;;1467   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0000fe  fb95f0f3          SDIV     r0,r5,r3
000102  fb035010          MLS      r0,r3,r0,r5
000106  17c3              ASRS     r3,r0,#31
000108  eb006313          ADD      r3,r0,r3,LSR #24
00010c  121d              ASRS     r5,r3,#8
00010e  f88d5010          STRB     r5,[sp,#0x10]
;;;1468   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
000112  f88d0011          STRB     r0,[sp,#0x11]
;;;1469   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
000116  fb94f0f7          SDIV     r0,r4,r7
00011a  f88d0012          STRB     r0,[sp,#0x12]
;;;1470   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
00011e  fb94f0f8          SDIV     r0,r4,r8
000122  f88d0013          STRB     r0,[sp,#0x13]
;;;1471   modbus_registers[20]=0;								//Πεγ60
000126  2000              MOVS     r0,#0
;;;1472   modbus_registers[21]=0;
;;;1473   if(work_stat==wsPS)modbus_registers[21]=1;
000128  4bc3              LDR      r3,|L1.1080|
00012a  f88d0014          STRB     r0,[sp,#0x14]         ;1471
00012e  f88d0015          STRB     r0,[sp,#0x15]         ;1472
000132  781c              LDRB     r4,[r3,#0]  ; work_stat
000134  2301              MOVS     r3,#1
000136  2c02              CMP      r4,#2
000138  d101              BNE      |L1.318|
00013a  f88d3015          STRB     r3,[sp,#0x15]
                  |L1.318|
;;;1474   modbus_registers[22]=0;								//Πεγ61
00013e  f88d0016          STRB     r0,[sp,#0x16]
;;;1475   modbus_registers[23]=0;
000142  f88d0017          STRB     r0,[sp,#0x17]
;;;1476   if(work_stat==wsGS)modbus_registers[23]=1;
000146  2c01              CMP      r4,#1
000148  d101              BNE      |L1.334|
00014a  f88d3017          STRB     r3,[sp,#0x17]
                  |L1.334|
;;;1477   modbus_registers[24]=0;								//Πεγ62
;;;1478   modbus_registers[25]=0;
;;;1479   if(REV_STAT==rsREW)modbus_registers[25]=1;
00014e  4cbb              LDR      r4,|L1.1084|
000150  f88d0018          STRB     r0,[sp,#0x18]         ;1477
000154  f88d0019          STRB     r0,[sp,#0x19]         ;1478
000158  7824              LDRB     r4,[r4,#0]  ; REV_STAT
00015a  b90c              CBNZ     r4,|L1.352|
00015c  f88d3019          STRB     r3,[sp,#0x19]
                  |L1.352|
;;;1480   modbus_registers[26]=0;								//Πεγ63
000160  f88d001a          STRB     r0,[sp,#0x1a]
;;;1481   modbus_registers[27]=0;
000164  f88d001b          STRB     r0,[sp,#0x1b]
;;;1482   if(AVT_REV_IS_ON)modbus_registers[27]=1;
000168  48b5              LDR      r0,|L1.1088|
00016a  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
00016c  b108              CBZ      r0,|L1.370|
00016e  f88d301b          STRB     r3,[sp,#0x1b]
                  |L1.370|
;;;1483   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000172  48b4              LDR      r0,|L1.1092|
000174  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_FF
000178  17c3              ASRS     r3,r0,#31
00017a  eb006313          ADD      r3,r0,r3,LSR #24
00017e  121c              ASRS     r4,r3,#8
000180  f88d401c          STRB     r4,[sp,#0x1c]
;;;1484   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
000184  f88d001d          STRB     r0,[sp,#0x1d]
;;;1485   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
000188  48af              LDR      r0,|L1.1096|
00018a  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_REW
00018e  17c3              ASRS     r3,r0,#31
000190  eb006313          ADD      r3,r0,r3,LSR #24
000194  121c              ASRS     r4,r3,#8
000196  f88d401e          STRB     r4,[sp,#0x1e]
;;;1486   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00019a  f88d001f          STRB     r0,[sp,#0x1f]
;;;1487   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00019e  48ab              LDR      r0,|L1.1100|
0001a0  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_PAUSE
0001a4  17c3              ASRS     r3,r0,#31
0001a6  eb006313          ADD      r3,r0,r3,LSR #24
0001aa  121c              ASRS     r4,r3,#8
0001ac  f88d4020          STRB     r4,[sp,#0x20]
;;;1488   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
0001b0  f88d0021          STRB     r0,[sp,#0x21]
;;;1489   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
0001b4  48a6              LDR      r0,|L1.1104|
0001b6  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_FF
0001ba  17c3              ASRS     r3,r0,#31
0001bc  eb006313          ADD      r3,r0,r3,LSR #24
0001c0  121c              ASRS     r4,r3,#8
0001c2  f88d4022          STRB     r4,[sp,#0x22]
;;;1490   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
0001c6  f88d0023          STRB     r0,[sp,#0x23]
;;;1491   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
0001ca  48a2              LDR      r0,|L1.1108|
0001cc  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_REW
0001d0  17c3              ASRS     r3,r0,#31
0001d2  eb006313          ADD      r3,r0,r3,LSR #24
0001d6  121c              ASRS     r4,r3,#8
0001d8  f88d4024          STRB     r4,[sp,#0x24]
;;;1492   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
0001dc  f88d0025          STRB     r0,[sp,#0x25]
;;;1493   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
0001e0  489d              LDR      r0,|L1.1112|
0001e2  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_FF
0001e6  17c3              ASRS     r3,r0,#31
0001e8  eb006313          ADD      r3,r0,r3,LSR #24
0001ec  121c              ASRS     r4,r3,#8
0001ee  f88d4026          STRB     r4,[sp,#0x26]
;;;1494   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
0001f2  f88d0027          STRB     r0,[sp,#0x27]
;;;1495   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
0001f6  4899              LDR      r0,|L1.1116|
0001f8  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_REW
0001fc  17c3              ASRS     r3,r0,#31
0001fe  eb006313          ADD      r3,r0,r3,LSR #24
000202  121c              ASRS     r4,r3,#8
000204  f88d4028          STRB     r4,[sp,#0x28]
;;;1496   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
000208  f88d0029          STRB     r0,[sp,#0x29]
;;;1497   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
00020c  4894              LDR      r0,|L1.1120|
00020e  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_ZAR_TIME
000212  17c3              ASRS     r3,r0,#31
000214  eb006313          ADD      r3,r0,r3,LSR #24
000218  121c              ASRS     r4,r3,#8
00021a  f88d402a          STRB     r4,[sp,#0x2a]
;;;1498   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
00021e  f88d002b          STRB     r0,[sp,#0x2b]
;;;1499   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
000222  4890              LDR      r0,|L1.1124|
000224  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
000228  17c3              ASRS     r3,r0,#31
00022a  eb006313          ADD      r3,r0,r3,LSR #24
00022e  121c              ASRS     r4,r3,#8
000230  f88d402c          STRB     r4,[sp,#0x2c]
;;;1500   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
000234  f88d002d          STRB     r0,[sp,#0x2d]
;;;1501   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
000238  488b              LDR      r0,|L1.1128|
00023a  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
00023e  17c3              ASRS     r3,r0,#31
000240  eb006313          ADD      r3,r0,r3,LSR #24
000244  121c              ASRS     r4,r3,#8
000246  f88d402e          STRB     r4,[sp,#0x2e]
;;;1502   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
00024a  f88d002f          STRB     r0,[sp,#0x2f]
;;;1503   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
00024e  4887              LDR      r0,|L1.1132|
000250  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
000254  17c3              ASRS     r3,r0,#31
000256  eb006313          ADD      r3,r0,r3,LSR #24
00025a  121c              ASRS     r4,r3,#8
00025c  f88d4030          STRB     r4,[sp,#0x30]
;;;1504   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
000260  f88d0031          STRB     r0,[sp,#0x31]
;;;1505   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
000264  4882              LDR      r0,|L1.1136|
000266  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_MAX_VOLT
00026a  17c3              ASRS     r3,r0,#31
00026c  eb006313          ADD      r3,r0,r3,LSR #24
000270  121c              ASRS     r4,r3,#8
000272  f88d4032          STRB     r4,[sp,#0x32]
;;;1506   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
000276  f88d0033          STRB     r0,[sp,#0x33]
;;;1507   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
00027a  487e              LDR      r0,|L1.1140|
00027c  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_WRK_CURR
;;;1508   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
;;;1509   
;;;1510   modbus_tx_buff[0]=adr;
000280  f88d9078          STRB     r9,[sp,#0x78]
000284  17c3              ASRS     r3,r0,#31             ;1507
000286  eb006313          ADD      r3,r0,r3,LSR #24      ;1507
00028a  121c              ASRS     r4,r3,#8              ;1507
00028c  f88d4034          STRB     r4,[sp,#0x34]         ;1507
000290  f88d0035          STRB     r0,[sp,#0x35]         ;1508
;;;1511   modbus_tx_buff[1]=func;
000294  f88d1079          STRB     r1,[sp,#0x79]
;;;1512   modbus_tx_buff[2]=(char)(reg_adr/256);
000298  0a10              LSRS     r0,r2,#8
00029a  f88d007a          STRB     r0,[sp,#0x7a]
;;;1513   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1514   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1515   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1516   
;;;1517   
;;;1518   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
00029e  4668              MOV      r0,sp
0002a0  eb000042          ADD      r0,r0,r2,LSL #1
0002a4  f88d207b          STRB     r2,[sp,#0x7b]         ;1513
0002a8  f8300c02          LDRH     r0,[r0,#-2]
0002ac  f8ad007c          STRH     r0,[sp,#0x7c]
;;;1519   
;;;1520   crc_temp=CRC16_2(modbus_tx_buff,6);
0002b0  2106              MOVS     r1,#6
0002b2  a81e              ADD      r0,sp,#0x78
0002b4  f7fffffe          BL       CRC16_2
;;;1521   
;;;1522   modbus_tx_buff[6]=crc_temp%256;
0002b8  f88d007e          STRB     r0,[sp,#0x7e]
;;;1523   modbus_tx_buff[7]=crc_temp/256;
0002bc  0a00              LSRS     r0,r0,#8
0002be  f88d007f          STRB     r0,[sp,#0x7f]
;;;1524   
;;;1525   for (i=0;i<8;i++)
0002c2  2400              MOVS     r4,#0
0002c4  ad1e              ADD      r5,sp,#0x78           ;1447
                  |L1.710|
;;;1526   	{
;;;1527   	putchar0(modbus_tx_buff[i]);
0002c6  5d28              LDRB     r0,[r5,r4]
0002c8  f7fffffe          BL       putchar0
0002cc  1c64              ADDS     r4,r4,#1              ;1525
0002ce  b2e4              UXTB     r4,r4                 ;1525
0002d0  2c08              CMP      r4,#8                 ;1525
0002d2  d3f8              BCC      |L1.710|
;;;1528   	}
;;;1529   for (i=0;i<8;i++)
0002d4  2400              MOVS     r4,#0
                  |L1.726|
;;;1530   	{
;;;1531   	putchar_sc16is700(modbus_tx_buff[i]);
0002d6  5d28              LDRB     r0,[r5,r4]
0002d8  f7fffffe          BL       putchar_sc16is700
0002dc  1c64              ADDS     r4,r4,#1              ;1529
0002de  b2e4              UXTB     r4,r4                 ;1529
0002e0  2c08              CMP      r4,#8                 ;1529
0002e2  d3f8              BCC      |L1.726|
;;;1532   	}
;;;1533   }	
0002e4  b037              ADD      sp,sp,#0xdc
0002e6  e8bd83f0          POP      {r4-r9,pc}
;;;1534   
                          ENDP

                  modbus_input_registers_transmit PROC
;;;1199   //-----------------------------------------------
;;;1200   void modbus_input_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
0002ea  e92d4ff0          PUSH     {r4-r11,lr}
;;;1201   {
0002ee  4683              MOV      r11,r0
;;;1202   //char modbus_registers[110];
;;;1203   char modbus_tx_buff[200];
;;;1204   unsigned short crc_temp;
;;;1205   char i;
;;;1206   /*
;;;1207   load_U=1234;
;;;1208   load_I=5678;
;;;1209   time_proc=361233UL;//1357;
;;;1210   time_proc_remain=722444UL;//1357;
;;;1211   
;;;1212   bVOLT_IS_NOT_DOWN=0;
;;;1213   bVOLT_IS_NOT_UP=1;	
;;;1214   */
;;;1215   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
0002f0  4861              LDR      r0,|L1.1144|
0002f2  468e              MOV      lr,r1                 ;1201
0002f4  4692              MOV      r10,r2                ;1201
0002f6  f9b01000          LDRSH    r1,[r0,#0]  ; load_U
0002fa  b0b3              SUB      sp,sp,#0xcc           ;1201
0002fc  17c8              ASRS     r0,r1,#31
0002fe  eb016210          ADD      r2,r1,r0,LSR #24
000302  485e              LDR      r0,|L1.1148|
000304  461c              MOV      r4,r3                 ;1201
000306  1213              ASRS     r3,r2,#8
000308  f8ddc0f0          LDR      r12,[sp,#0xf0]
00030c  7003              STRB     r3,[r0,#0]
;;;1216   modbus_registers[1]=(char)(load_U%256);
00030e  7041              STRB     r1,[r0,#1]
;;;1217   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
000310  495b              LDR      r1,|L1.1152|
;;;1218   modbus_registers[3]=(char)(load_I%256);
;;;1219   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
;;;1220   modbus_registers[5]=(char)((time_proc%60)%256);
;;;1221   modbus_registers[6]=(char)(((time_proc/60)%60)/256);		//Πεγ4
;;;1222   modbus_registers[7]=(char)(((time_proc/60)%60)%256);
;;;1223   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
000312  f44f2961          MOV      r9,#0xe1000
;;;1224   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000316  f44f6861          MOV      r8,#0xe10
00031a  f9b11000          LDRSH    r1,[r1,#0]            ;1217  ; load_I
00031e  17ca              ASRS     r2,r1,#31             ;1217
000320  eb016212          ADD      r2,r1,r2,LSR #24      ;1217
000324  1213              ASRS     r3,r2,#8              ;1217
000326  7083              STRB     r3,[r0,#2]            ;1217
000328  70c1              STRB     r1,[r0,#3]            ;1218
00032a  4956              LDR      r1,|L1.1156|
00032c  223c              MOVS     r2,#0x3c              ;1219
00032e  680b              LDR      r3,[r1,#0]            ;1219  ; time_proc
000330  fb93f5f2          SDIV     r5,r3,r2              ;1219
000334  fb023115          MLS      r1,r2,r5,r3           ;1219
000338  17ce              ASRS     r6,r1,#31             ;1219
00033a  eb016716          ADD      r7,r1,r6,LSR #24      ;1219
00033e  123e              ASRS     r6,r7,#8              ;1219
000340  7106              STRB     r6,[r0,#4]            ;1219
000342  7141              STRB     r1,[r0,#5]            ;1220
000344  fb95f1f2          SDIV     r1,r5,r2              ;1221
000348  fb025111          MLS      r1,r2,r1,r5           ;1221
00034c  17cd              ASRS     r5,r1,#31             ;1221
00034e  eb016515          ADD      r5,r1,r5,LSR #24      ;1221
000352  122e              ASRS     r6,r5,#8              ;1221
000354  7186              STRB     r6,[r0,#6]            ;1221
000356  71c1              STRB     r1,[r0,#7]            ;1222
000358  fb93f1f9          SDIV     r1,r3,r9              ;1223
00035c  7201              STRB     r1,[r0,#8]            ;1223
00035e  fb93f1f8          SDIV     r1,r3,r8
000362  7241              STRB     r1,[r0,#9]
;;;1225   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
000364  4948              LDR      r1,|L1.1160|
000366  680b              LDR      r3,[r1,#0]  ; time_proc_remain
000368  fb93f7f2          SDIV     r7,r3,r2
00036c  fb023117          MLS      r1,r2,r7,r3
000370  17cd              ASRS     r5,r1,#31
000372  eb016515          ADD      r5,r1,r5,LSR #24
000376  122e              ASRS     r6,r5,#8
000378  7286              STRB     r6,[r0,#0xa]
;;;1226   modbus_registers[11]=(char)((time_proc_remain%60)%256);
00037a  72c1              STRB     r1,[r0,#0xb]
;;;1227   modbus_registers[12]=(char)(((time_proc_remain/60)%60)/256);//Πεγ7
00037c  fb97f1f2          SDIV     r1,r7,r2
000380  fb027111          MLS      r1,r2,r1,r7
000384  17ca              ASRS     r2,r1,#31
000386  eb016212          ADD      r2,r1,r2,LSR #24
00038a  1215              ASRS     r5,r2,#8
00038c  7305              STRB     r5,[r0,#0xc]
;;;1228   modbus_registers[13]=(char)(((time_proc_remain/60)%60)%256);
00038e  7341              STRB     r1,[r0,#0xd]
;;;1229   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
000390  fb93f1f9          SDIV     r1,r3,r9
000394  7381              STRB     r1,[r0,#0xe]
;;;1230   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
000396  fb93f1f8          SDIV     r1,r3,r8
00039a  73c1              STRB     r1,[r0,#0xf]
;;;1231   modbus_registers[16]=(char)((CAP_COUNTER)/256);			//Πεγ9
00039c  493b              LDR      r1,|L1.1164|
00039e  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_COUNTER
0003a2  17ca              ASRS     r2,r1,#31
0003a4  eb016212          ADD      r2,r1,r2,LSR #24
0003a8  1213              ASRS     r3,r2,#8
0003aa  7403              STRB     r3,[r0,#0x10]
;;;1232   modbus_registers[17]=(char)((CAP_COUNTER)%256);
0003ac  7441              STRB     r1,[r0,#0x11]
;;;1233   modbus_registers[18]=(char)((CAP_TIME_SEC)/256);			//Πεγ10
0003ae  4938              LDR      r1,|L1.1168|
0003b0  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_SEC
0003b4  17ca              ASRS     r2,r1,#31
0003b6  eb016212          ADD      r2,r1,r2,LSR #24
0003ba  1213              ASRS     r3,r2,#8
0003bc  7483              STRB     r3,[r0,#0x12]
;;;1234   modbus_registers[19]=(char)((CAP_TIME_SEC)%256);
0003be  74c1              STRB     r1,[r0,#0x13]
;;;1235   modbus_registers[20]=(char)((CAP_TIME_MIN)/256);			//Πεγ11
0003c0  4934              LDR      r1,|L1.1172|
0003c2  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_MIN
0003c6  17ca              ASRS     r2,r1,#31
0003c8  eb016212          ADD      r2,r1,r2,LSR #24
0003cc  1213              ASRS     r3,r2,#8
0003ce  7503              STRB     r3,[r0,#0x14]
;;;1236   modbus_registers[21]=(char)((CAP_TIME_MIN)%256);
0003d0  7541              STRB     r1,[r0,#0x15]
;;;1237   modbus_registers[22]=(char)((CAP_TIME_HOUR)/256);			//Πεγ12
0003d2  4931              LDR      r1,|L1.1176|
0003d4  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_HOUR
0003d8  17ca              ASRS     r2,r1,#31
0003da  eb016212          ADD      r2,r1,r2,LSR #24
0003de  1213              ASRS     r3,r2,#8
0003e0  7583              STRB     r3,[r0,#0x16]
;;;1238   modbus_registers[23]=(char)((CAP_TIME_HOUR)%256);
0003e2  75c1              STRB     r1,[r0,#0x17]
;;;1239   modbus_registers[24]=0;
0003e4  2100              MOVS     r1,#0
;;;1240   modbus_registers[25]=0;										//Πεγ13
;;;1241   if(bVOLT_IS_NOT_DOWN)	modbus_registers[25]=1;
0003e6  4a2d              LDR      r2,|L1.1180|
0003e8  7601              STRB     r1,[r0,#0x18]         ;1239
0003ea  7641              STRB     r1,[r0,#0x19]         ;1240
0003ec  7813              LDRB     r3,[r2,#0]  ; bVOLT_IS_NOT_DOWN
0003ee  2201              MOVS     r2,#1
0003f0  b103              CBZ      r3,|L1.1012|
0003f2  7642              STRB     r2,[r0,#0x19]
                  |L1.1012|
;;;1242   modbus_registers[26]=0;
0003f4  7681              STRB     r1,[r0,#0x1a]
;;;1243   modbus_registers[27]=0;										//Πεγ14
0003f6  76c1              STRB     r1,[r0,#0x1b]
;;;1244   if(bVOLT_IS_NOT_UP)	modbus_registers[27]=1;
0003f8  4929              LDR      r1,|L1.1184|
0003fa  7809              LDRB     r1,[r1,#0]  ; bVOLT_IS_NOT_UP
0003fc  b101              CBZ      r1,|L1.1024|
0003fe  76c2              STRB     r2,[r0,#0x1b]
                  |L1.1024|
000400  491e              LDR      r1,|L1.1148|
;;;1245   								
;;;1246   /*
;;;1247   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
;;;1248   modbus_registers[17]=(char)(I_ug%256);
;;;1249   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
;;;1250   modbus_registers[19]=(char)(U_up%256);
;;;1251   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
;;;1252   modbus_registers[21]=(char)(U_maxg%256);
;;;1253   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
;;;1254   modbus_registers[23]=(char)(I_maxp%256);
;;;1255   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
;;;1256   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
;;;1257   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
;;;1258   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
;;;1259   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
;;;1260   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
;;;1261   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
;;;1262   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
;;;1263   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
;;;1264   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
;;;1265   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
;;;1266   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
;;;1267   modbus_registers[36]=0;								//Πεγ19
;;;1268   modbus_registers[37]=0;
;;;1269   if(work_stat==wsPS)modbus_registers[37]=1;
;;;1270   modbus_registers[38]=0;								//Πεγ20
;;;1271   modbus_registers[39]=0;
;;;1272   if(work_stat==wsGS)modbus_registers[39]=1;
;;;1273   modbus_registers[40]=0;								//Πεγ21
;;;1274   modbus_registers[41]=0;
;;;1275   if(REV_STAT==rsREW)modbus_registers[41]=1;
;;;1276   modbus_registers[42]=0;								//Πεγ22
;;;1277   modbus_registers[43]=0;
;;;1278   if(AVT_REV_IS_ON)modbus_registers[42]=1;
;;;1279   */
;;;1280   if(prot==MODBUS_RTU_PROT)
000402  f1bc0f00          CMP      r12,#0
;;;1281   	{
;;;1282   	modbus_tx_buff[0]=adr;
;;;1283   	modbus_tx_buff[1]=func;
;;;1284   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1285   	
;;;1286   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-1)*2],reg_quantity*2);
000406  eb01014a          ADD      r1,r1,r10,LSL #1
00040a  d04d              BEQ      |L1.1192|
;;;1287   	
;;;1288   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1289   	
;;;1290   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1291   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1292   	
;;;1293   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1294   		{
;;;1295   		putchar0(modbus_tx_buff[i]);
;;;1296   		}
;;;1297   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1298   		{
;;;1299   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1300   		}
;;;1301   	}
;;;1302   else if(prot==MODBUS_TCP_PROT)
00040c  f1bc0f01          CMP      r12,#1
000410  d102              BNE      |L1.1048|
;;;1303   	{
;;;1304   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-1)*2];
000412  4824              LDR      r0,|L1.1188|
000414  1e89              SUBS     r1,r1,#2
000416  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1048|
;;;1305   	}
;;;1306   }
000418  b033              ADD      sp,sp,#0xcc
                  |L1.1050|
00041a  e8bd8ff0          POP      {r4-r11,pc}
00041e  0000              DCW      0x0000
                  |L1.1056|
                          DCD      I_ug
                  |L1.1060|
                          DCD      U_up
                  |L1.1064|
                          DCD      U_maxg
                  |L1.1068|
                          DCD      I_maxp
                  |L1.1072|
                          DCD      T_PROC_GS
                  |L1.1076|
                          DCD      T_PROC_PS
                  |L1.1080|
                          DCD      work_stat
                  |L1.1084|
                          DCD      REV_STAT
                  |L1.1088|
                          DCD      AVT_REV_IS_ON
                  |L1.1092|
                          DCD      AVT_REV_TIME_FF
                  |L1.1096|
                          DCD      AVT_REV_TIME_REW
                  |L1.1100|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.1104|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.1108|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.1112|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.1116|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.1120|
                          DCD      CAP_ZAR_TIME
                  |L1.1124|
                          DCD      CAP_PAUSE1_TIME
                  |L1.1128|
                          DCD      CAP_RAZR_TIME
                  |L1.1132|
                          DCD      CAP_PAUSE2_TIME
                  |L1.1136|
                          DCD      CAP_MAX_VOLT
                  |L1.1140|
                          DCD      CAP_WRK_CURR
                  |L1.1144|
                          DCD      load_U
                  |L1.1148|
                          DCD      ||area_number.4||+0x3c
                  |L1.1152|
                          DCD      load_I
                  |L1.1156|
                          DCD      time_proc
                  |L1.1160|
                          DCD      time_proc_remain
                  |L1.1164|
                          DCD      CAP_COUNTER
                  |L1.1168|
                          DCD      CAP_TIME_SEC
                  |L1.1172|
                          DCD      CAP_TIME_MIN
                  |L1.1176|
                          DCD      CAP_TIME_HOUR
                  |L1.1180|
                          DCD      bVOLT_IS_NOT_DOWN
                  |L1.1184|
                          DCD      bVOLT_IS_NOT_UP
                  |L1.1188|
                          DCD      modbus_tcp_out_ptr
                  |L1.1192|
0004a8  f88db000          STRB     r11,[sp,#0]           ;1282
0004ac  f88de001          STRB     lr,[sp,#1]            ;1283
0004b0  0062              LSLS     r2,r4,#1              ;1284
0004b2  466d              MOV      r5,sp                 ;1286
0004b4  f88d2002          STRB     r2,[sp,#2]            ;1284
0004b8  1e89              SUBS     r1,r1,#2              ;1286
0004ba  1ce8              ADDS     r0,r5,#3              ;1286
0004bc  f7fffffe          BL       __aeabi_memcpy
0004c0  2003              MOVS     r0,#3                 ;1288
0004c2  eb000044          ADD      r0,r0,r4,LSL #1       ;1288
0004c6  b201              SXTH     r1,r0                 ;1288
0004c8  4668              MOV      r0,sp                 ;1288
0004ca  f7fffffe          BL       CRC16_2
0004ce  eb050144          ADD      r1,r5,r4,LSL #1       ;1290
0004d2  2600              MOVS     r6,#0                 ;1293
0004d4  70c8              STRB     r0,[r1,#3]            ;1290
0004d6  0a00              LSRS     r0,r0,#8              ;1291
0004d8  7108              STRB     r0,[r1,#4]            ;1291
0004da  2005              MOVS     r0,#5                 ;1293
0004dc  eb000744          ADD      r7,r0,r4,LSL #1       ;1293
0004e0  e004              B        |L1.1260|
                  |L1.1250|
0004e2  5da8              LDRB     r0,[r5,r6]            ;1295
0004e4  f7fffffe          BL       putchar0
0004e8  1c76              ADDS     r6,r6,#1              ;1293
0004ea  b2f6              UXTB     r6,r6                 ;1293
                  |L1.1260|
0004ec  42b7              CMP      r7,r6                 ;1293
0004ee  d8f8              BHI      |L1.1250|
0004f0  2400              MOVS     r4,#0                 ;1297
0004f2  e004              B        |L1.1278|
                  |L1.1268|
0004f4  5d28              LDRB     r0,[r5,r4]            ;1299
0004f6  f7fffffe          BL       putchar_sc16is700
0004fa  1c64              ADDS     r4,r4,#1              ;1297
0004fc  b2e4              UXTB     r4,r4                 ;1297
                  |L1.1278|
0004fe  42a7              CMP      r7,r4                 ;1297
000500  d8f8              BHI      |L1.1268|
000502  e789              B        |L1.1048|
;;;1307   
                          ENDP

                  modbus_hold_registers_transmit PROC
;;;1536   //-----------------------------------------------
;;;1537   void modbus_hold_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
000504  e92d4fff          PUSH     {r0-r11,lr}
;;;1538   {
000508  b0b3              SUB      sp,sp,#0xcc
00050a  4682              MOV      r10,r0
00050c  4693              MOV      r11,r2
00050e  461d              MOV      r5,r3
;;;1539   //char modbus_registers[110];
;;;1540   char modbus_tx_buff[200];
;;;1541   unsigned short crc_temp;
;;;1542   char i;
;;;1543   
;;;1544   //reg_adr=45;
;;;1545   //I_ug=reg_adr;
;;;1546   //U_up=5678;
;;;1547   
;;;1548   modbus_registers[0]=(char)(lc640_read_int(EE_I_UG)/256);//Πεγ50
000510  2020              MOVS     r0,#0x20
000512  f8dd9100          LDR      r9,[sp,#0x100]
000516  f7fffffe          BL       lc640_read_int
00051a  17c1              ASRS     r1,r0,#31
00051c  eb006011          ADD      r0,r0,r1,LSR #24
000520  1200              ASRS     r0,r0,#8
000522  4cff              LDR      r4,|L1.2336|
000524  7020              STRB     r0,[r4,#0]
;;;1549   modbus_registers[1]=(char)(lc640_read_int(EE_I_UG)%256);
000526  2020              MOVS     r0,#0x20
000528  f7fffffe          BL       lc640_read_int
00052c  7060              STRB     r0,[r4,#1]
;;;1550   modbus_registers[2]=(char)(lc640_read_int(EE_U_UP)/256);//Πεγ51
00052e  2022              MOVS     r0,#0x22
000530  f7fffffe          BL       lc640_read_int
000534  17c1              ASRS     r1,r0,#31
000536  eb006011          ADD      r0,r0,r1,LSR #24
00053a  1200              ASRS     r0,r0,#8
00053c  70a0              STRB     r0,[r4,#2]
;;;1551   modbus_registers[3]=(char)(lc640_read_int(EE_U_UP)%256);
00053e  2022              MOVS     r0,#0x22
000540  f7fffffe          BL       lc640_read_int
000544  70e0              STRB     r0,[r4,#3]
;;;1552   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
000546  48f7              LDR      r0,|L1.2340|
;;;1553   modbus_registers[5]=(char)(U_maxg%256);
;;;1554   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1555   modbus_registers[7]=(char)(I_maxp%256);
;;;1556   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1557   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1558   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1559   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1560   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
000548  f44f2861          MOV      r8,#0xe1000
;;;1561   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00054c  f44f6c61          MOV      r12,#0xe10
000550  f9b00000          LDRSH    r0,[r0,#0]            ;1552  ; U_maxg
000554  17c1              ASRS     r1,r0,#31             ;1552
000556  eb006111          ADD      r1,r0,r1,LSR #24      ;1552
00055a  120a              ASRS     r2,r1,#8              ;1552
00055c  7122              STRB     r2,[r4,#4]            ;1552
00055e  7160              STRB     r0,[r4,#5]            ;1553
000560  48f1              LDR      r0,|L1.2344|
000562  f9b00000          LDRSH    r0,[r0,#0]            ;1554  ; I_maxp
000566  17c1              ASRS     r1,r0,#31             ;1554
000568  eb006111          ADD      r1,r0,r1,LSR #24      ;1554
00056c  120a              ASRS     r2,r1,#8              ;1554
00056e  71a2              STRB     r2,[r4,#6]            ;1554
000570  71e0              STRB     r0,[r4,#7]            ;1555
000572  48ee              LDR      r0,|L1.2348|
000574  213c              MOVS     r1,#0x3c              ;1556
000576  6802              LDR      r2,[r0,#0]            ;1556  ; T_PROC_GS
000578  fb92f7f1          SDIV     r7,r2,r1              ;1556
00057c  fb012017          MLS      r0,r1,r7,r2           ;1556
000580  17c3              ASRS     r3,r0,#31             ;1556
000582  eb006313          ADD      r3,r0,r3,LSR #24      ;1556
000586  121e              ASRS     r6,r3,#8              ;1556
000588  7226              STRB     r6,[r4,#8]            ;1556
00058a  7260              STRB     r0,[r4,#9]            ;1557
00058c  fb97f0f1          SDIV     r0,r7,r1              ;1558
000590  fb017010          MLS      r0,r1,r0,r7           ;1558
000594  17c3              ASRS     r3,r0,#31             ;1558
000596  eb006313          ADD      r3,r0,r3,LSR #24      ;1558
00059a  121e              ASRS     r6,r3,#8              ;1558
00059c  72a6              STRB     r6,[r4,#0xa]          ;1558
00059e  72e0              STRB     r0,[r4,#0xb]          ;1559
0005a0  fb92f0f8          SDIV     r0,r2,r8              ;1560
0005a4  7320              STRB     r0,[r4,#0xc]          ;1560
0005a6  fb92f0fc          SDIV     r0,r2,r12
0005aa  7360              STRB     r0,[r4,#0xd]
;;;1562   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
0005ac  48e0              LDR      r0,|L1.2352|
0005ae  6802              LDR      r2,[r0,#0]  ; T_PROC_PS
0005b0  fb92f7f1          SDIV     r7,r2,r1
0005b4  fb012017          MLS      r0,r1,r7,r2
0005b8  17c3              ASRS     r3,r0,#31
0005ba  eb006313          ADD      r3,r0,r3,LSR #24
0005be  121e              ASRS     r6,r3,#8
0005c0  73a6              STRB     r6,[r4,#0xe]
;;;1563   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
0005c2  73e0              STRB     r0,[r4,#0xf]
;;;1564   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
0005c4  fb97f0f1          SDIV     r0,r7,r1
0005c8  fb017010          MLS      r0,r1,r0,r7
0005cc  17c1              ASRS     r1,r0,#31
0005ce  eb006111          ADD      r1,r0,r1,LSR #24
0005d2  120b              ASRS     r3,r1,#8
0005d4  7423              STRB     r3,[r4,#0x10]
;;;1565   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
0005d6  7460              STRB     r0,[r4,#0x11]
;;;1566   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
0005d8  fb92f0f8          SDIV     r0,r2,r8
0005dc  74a0              STRB     r0,[r4,#0x12]
;;;1567   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
0005de  fb92f0fc          SDIV     r0,r2,r12
0005e2  74e0              STRB     r0,[r4,#0x13]
;;;1568   modbus_registers[20]=0;								//Πεγ60
0005e4  2000              MOVS     r0,#0
;;;1569   modbus_registers[21]=0;
;;;1570   if(work_stat==wsPS)modbus_registers[21]=1;
0005e6  49d3              LDR      r1,|L1.2356|
0005e8  7520              STRB     r0,[r4,#0x14]         ;1568
0005ea  7560              STRB     r0,[r4,#0x15]         ;1569
0005ec  780a              LDRB     r2,[r1,#0]  ; work_stat
0005ee  2101              MOVS     r1,#1
0005f0  2a02              CMP      r2,#2
0005f2  d100              BNE      |L1.1526|
0005f4  7561              STRB     r1,[r4,#0x15]
                  |L1.1526|
;;;1571   modbus_registers[22]=0;								//Πεγ61
0005f6  75a0              STRB     r0,[r4,#0x16]
;;;1572   modbus_registers[23]=0;
0005f8  75e0              STRB     r0,[r4,#0x17]
;;;1573   if(work_stat==wsGS)modbus_registers[23]=1;
0005fa  2a01              CMP      r2,#1
0005fc  d100              BNE      |L1.1536|
0005fe  75e1              STRB     r1,[r4,#0x17]
                  |L1.1536|
;;;1574   modbus_registers[24]=0;								//Πεγ62
;;;1575   modbus_registers[25]=0;
;;;1576   if(REV_STAT==rsREW)modbus_registers[25]=1;
000600  4acd              LDR      r2,|L1.2360|
000602  7620              STRB     r0,[r4,#0x18]         ;1574
000604  7660              STRB     r0,[r4,#0x19]         ;1575
000606  7812              LDRB     r2,[r2,#0]  ; REV_STAT
000608  b902              CBNZ     r2,|L1.1548|
00060a  7661              STRB     r1,[r4,#0x19]
                  |L1.1548|
;;;1577   modbus_registers[26]=0;								//Πεγ63
00060c  76a0              STRB     r0,[r4,#0x1a]
;;;1578   modbus_registers[27]=0;
00060e  76e0              STRB     r0,[r4,#0x1b]
;;;1579   if(AVT_REV_IS_ON)modbus_registers[27]=1;
000610  48ca              LDR      r0,|L1.2364|
000612  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
000614  b100              CBZ      r0,|L1.1560|
000616  76e1              STRB     r1,[r4,#0x1b]
                  |L1.1560|
;;;1580   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
000618  48c9              LDR      r0,|L1.2368|
00061a  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_FF
00061e  17c1              ASRS     r1,r0,#31
000620  eb006111          ADD      r1,r0,r1,LSR #24
000624  120a              ASRS     r2,r1,#8
000626  f8042f1c          STRB     r2,[r4,#0x1c]!
;;;1581   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
00062a  7060              STRB     r0,[r4,#1]
;;;1582   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
00062c  48c5              LDR      r0,|L1.2372|
00062e  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_REW
000632  17c1              ASRS     r1,r0,#31
000634  eb006111          ADD      r1,r0,r1,LSR #24
000638  120a              ASRS     r2,r1,#8
00063a  70a2              STRB     r2,[r4,#2]
;;;1583   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00063c  70e0              STRB     r0,[r4,#3]
;;;1584   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
00063e  48c2              LDR      r0,|L1.2376|
000640  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_PAUSE
000644  17c1              ASRS     r1,r0,#31
000646  eb006111          ADD      r1,r0,r1,LSR #24
00064a  120a              ASRS     r2,r1,#8
00064c  7122              STRB     r2,[r4,#4]
;;;1585   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
00064e  7160              STRB     r0,[r4,#5]
;;;1586   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
000650  48be              LDR      r0,|L1.2380|
000652  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_FF
000656  17c1              ASRS     r1,r0,#31
000658  eb006111          ADD      r1,r0,r1,LSR #24
00065c  120a              ASRS     r2,r1,#8
00065e  71a2              STRB     r2,[r4,#6]
;;;1587   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
000660  71e0              STRB     r0,[r4,#7]
;;;1588   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
000662  48bb              LDR      r0,|L1.2384|
000664  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_REW
000668  17c1              ASRS     r1,r0,#31
00066a  eb006111          ADD      r1,r0,r1,LSR #24
00066e  120a              ASRS     r2,r1,#8
000670  7222              STRB     r2,[r4,#8]
;;;1589   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
000672  7260              STRB     r0,[r4,#9]
;;;1590   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
000674  48b7              LDR      r0,|L1.2388|
000676  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_FF
00067a  17c1              ASRS     r1,r0,#31
00067c  eb006111          ADD      r1,r0,r1,LSR #24
000680  120a              ASRS     r2,r1,#8
000682  72a2              STRB     r2,[r4,#0xa]
;;;1591   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
000684  72e0              STRB     r0,[r4,#0xb]
;;;1592   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
000686  48b4              LDR      r0,|L1.2392|
000688  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_REW
00068c  17c1              ASRS     r1,r0,#31
00068e  eb006111          ADD      r1,r0,r1,LSR #24
000692  120a              ASRS     r2,r1,#8
000694  7322              STRB     r2,[r4,#0xc]
;;;1593   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
000696  7360              STRB     r0,[r4,#0xd]
;;;1594   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
000698  48b0              LDR      r0,|L1.2396|
00069a  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_ZAR_TIME
00069e  17c1              ASRS     r1,r0,#31
0006a0  eb006111          ADD      r1,r0,r1,LSR #24
0006a4  120a              ASRS     r2,r1,#8
0006a6  73a2              STRB     r2,[r4,#0xe]
;;;1595   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
0006a8  73e0              STRB     r0,[r4,#0xf]
;;;1596   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
0006aa  48ad              LDR      r0,|L1.2400|
0006ac  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
0006b0  17c1              ASRS     r1,r0,#31
0006b2  eb006111          ADD      r1,r0,r1,LSR #24
0006b6  120a              ASRS     r2,r1,#8
0006b8  7422              STRB     r2,[r4,#0x10]
;;;1597   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
0006ba  7460              STRB     r0,[r4,#0x11]
;;;1598   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
0006bc  48a9              LDR      r0,|L1.2404|
0006be  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
0006c2  17c1              ASRS     r1,r0,#31
0006c4  eb006111          ADD      r1,r0,r1,LSR #24
0006c8  120a              ASRS     r2,r1,#8
0006ca  74a2              STRB     r2,[r4,#0x12]
;;;1599   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
0006cc  74e0              STRB     r0,[r4,#0x13]
;;;1600   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
0006ce  48a6              LDR      r0,|L1.2408|
0006d0  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
0006d4  17c1              ASRS     r1,r0,#31
0006d6  eb006111          ADD      r1,r0,r1,LSR #24
0006da  120a              ASRS     r2,r1,#8
0006dc  7522              STRB     r2,[r4,#0x14]
;;;1601   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
0006de  7560              STRB     r0,[r4,#0x15]
;;;1602   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
0006e0  48a2              LDR      r0,|L1.2412|
0006e2  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_MAX_VOLT
0006e6  17c1              ASRS     r1,r0,#31
0006e8  eb006111          ADD      r1,r0,r1,LSR #24
0006ec  120a              ASRS     r2,r1,#8
0006ee  75a2              STRB     r2,[r4,#0x16]
;;;1603   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
0006f0  75e0              STRB     r0,[r4,#0x17]
;;;1604   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
0006f2  489f              LDR      r0,|L1.2416|
0006f4  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_WRK_CURR
0006f8  17c1              ASRS     r1,r0,#31
0006fa  eb006111          ADD      r1,r0,r1,LSR #24
0006fe  120a              ASRS     r2,r1,#8
000700  7622              STRB     r2,[r4,#0x18]
;;;1605   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
000702  7660              STRB     r0,[r4,#0x19]
;;;1606   
;;;1607   modbus_registers[60]=(char)((pwm_u_reg)/256);			//Πεγ80
000704  489b              LDR      r0,|L1.2420|
000706  f9b00000          LDRSH    r0,[r0,#0]  ; pwm_u_reg
00070a  17c1              ASRS     r1,r0,#31
00070c  eb006111          ADD      r1,r0,r1,LSR #24
000710  120a              ASRS     r2,r1,#8
000712  f8842020          STRB     r2,[r4,#0x20]
;;;1608   modbus_registers[61]=(char)((pwm_u_reg)%256);
000716  f8840021          STRB     r0,[r4,#0x21]
;;;1609   modbus_registers[62]=(char)((pwm_i_reg)/256);			//Πεγ81
00071a  4897              LDR      r0,|L1.2424|
00071c  f9b00000          LDRSH    r0,[r0,#0]  ; pwm_i_reg
000720  17c1              ASRS     r1,r0,#31
000722  eb006111          ADD      r1,r0,r1,LSR #24
000726  120a              ASRS     r2,r1,#8
000728  f8842022          STRB     r2,[r4,#0x22]
;;;1610   modbus_registers[63]=(char)((pwm_i_reg)%256);
00072c  f8840023          STRB     r0,[r4,#0x23]
;;;1611   modbus_registers[64]=(char)((pwm_t_reg/10)/256);			//Πεγ82
000730  4892              LDR      r0,|L1.2428|
000732  f44f6120          MOV      r1,#0xa00
000736  f9b00000          LDRSH    r0,[r0,#0]  ; pwm_t_reg
00073a  fb90f1f1          SDIV     r1,r0,r1
00073e  f8841024          STRB     r1,[r4,#0x24]
;;;1612   modbus_registers[65]=(char)((pwm_t_reg/10)%256);
000742  210a              MOVS     r1,#0xa
000744  fb90f0f1          SDIV     r0,r0,r1
000748  f8840025          STRB     r0,[r4,#0x25]
;;;1613   
;;;1614   modbus_registers[80]=(char)((I_ug_ram)/256);			//Πεγ90
00074c  488c              LDR      r0,|L1.2432|
00074e  f9b00000          LDRSH    r0,[r0,#0]  ; I_ug_ram
000752  17c1              ASRS     r1,r0,#31
000754  eb006111          ADD      r1,r0,r1,LSR #24
000758  120a              ASRS     r2,r1,#8
00075a  f8842034          STRB     r2,[r4,#0x34]
;;;1615   modbus_registers[81]=(char)((I_ug_ram)%256);
00075e  f8040f35          STRB     r0,[r4,#0x35]!
;;;1616   modbus_registers[82]=(char)((U_up_ram)/256);			//Πεγ91
000762  4888              LDR      r0,|L1.2436|
000764  f9b00000          LDRSH    r0,[r0,#0]  ; U_up_ram
000768  17c1              ASRS     r1,r0,#31
00076a  eb006111          ADD      r1,r0,r1,LSR #24
00076e  120a              ASRS     r2,r1,#8
000770  7062              STRB     r2,[r4,#1]
000772  4a6b              LDR      r2,|L1.2336|
;;;1617   modbus_registers[83]=(char)((U_up_ram)%256);
000774  70a0              STRB     r0,[r4,#2]
;;;1618   
;;;1619   if(prot==MODBUS_RTU_PROT)
;;;1620   	{
;;;1621   	modbus_tx_buff[0]=adr;
;;;1622   	modbus_tx_buff[1]=func;
;;;1623   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1624   	
;;;1625   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-50)*2],reg_quantity*2);
000776  eb02014b          ADD      r1,r2,r11,LSL #1
00077a  3964              SUBS     r1,r1,#0x64
00077c  f1b90f00          CMP      r9,#0                 ;1619
000780  d006              BEQ      |L1.1936|
;;;1626   							   
;;;1627   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1628   	
;;;1629   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1630   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1631   	
;;;1632   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1633   		{
;;;1634   		putchar0(modbus_tx_buff[i]);
;;;1635   		}
;;;1636   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1637   		{
;;;1638   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1639   		}
;;;1640   	}
;;;1641   else if(prot==MODBUS_TCP_PROT)
000782  f1b90f01          CMP      r9,#1
000786  d101              BNE      |L1.1932|
;;;1642   	{
;;;1643   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
000788  487f              LDR      r0,|L1.2440|
00078a  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1932|
;;;1644   	}
;;;1645   // modbus_tcp_out_ptr=(char*)(&modbus_registers[0]);
;;;1646   //modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-50)*2];
;;;1647   }
00078c  b037              ADD      sp,sp,#0xdc
00078e  e644              B        |L1.1050|
                  |L1.1936|
000790  f88da000          STRB     r10,[sp,#0]           ;1621
000794  9834              LDR      r0,[sp,#0xd0]         ;1622
000796  f88d0001          STRB     r0,[sp,#1]            ;1622
00079a  006a              LSLS     r2,r5,#1              ;1623
00079c  466c              MOV      r4,sp                 ;1625
00079e  f88d2002          STRB     r2,[sp,#2]            ;1623
0007a2  1ce0              ADDS     r0,r4,#3              ;1625
0007a4  f7fffffe          BL       __aeabi_memcpy
0007a8  2003              MOVS     r0,#3                 ;1627
0007aa  eb000045          ADD      r0,r0,r5,LSL #1       ;1627
0007ae  b201              SXTH     r1,r0                 ;1627
0007b0  4668              MOV      r0,sp                 ;1627
0007b2  f7fffffe          BL       CRC16_2
0007b6  eb040145          ADD      r1,r4,r5,LSL #1       ;1629
0007ba  2600              MOVS     r6,#0                 ;1632
0007bc  70c8              STRB     r0,[r1,#3]            ;1629
0007be  0a00              LSRS     r0,r0,#8              ;1630
0007c0  7108              STRB     r0,[r1,#4]            ;1630
0007c2  2005              MOVS     r0,#5                 ;1632
0007c4  eb000745          ADD      r7,r0,r5,LSL #1       ;1632
0007c8  e004              B        |L1.2004|
                  |L1.1994|
0007ca  5da0              LDRB     r0,[r4,r6]            ;1634
0007cc  f7fffffe          BL       putchar0
0007d0  1c76              ADDS     r6,r6,#1              ;1632
0007d2  b2f6              UXTB     r6,r6                 ;1632
                  |L1.2004|
0007d4  42b7              CMP      r7,r6                 ;1632
0007d6  d8f8              BHI      |L1.1994|
0007d8  2500              MOVS     r5,#0                 ;1636
0007da  e004              B        |L1.2022|
                  |L1.2012|
0007dc  5d60              LDRB     r0,[r4,r5]            ;1638
0007de  f7fffffe          BL       putchar_sc16is700
0007e2  1c6d              ADDS     r5,r5,#1              ;1636
0007e4  b2ed              UXTB     r5,r5                 ;1636
                  |L1.2022|
0007e6  42af              CMP      r7,r5                 ;1636
0007e8  d8f8              BHI      |L1.2012|
0007ea  e7cf              B        |L1.1932|
;;;1648   
                          ENDP

                  modbus_for_pult_registers_transmit PROC
;;;1309   //-----------------------------------------------
;;;1310   void modbus_for_pult_registers_transmit(unsigned short reg_quantity)
0007ec  b570              PUSH     {r4-r6,lr}
;;;1311   {
0007ee  4606              MOV      r6,r0
;;;1312   char modbus_registers[20];
;;;1313   char modbus_tx_buff[30];
;;;1314   unsigned short crc_temp;
;;;1315   char i;
;;;1316   //char reg_quantity=4;
;;;1317   
;;;1318   //pult_time_set=0xffff;
;;;1319   
;;;1320   modbus_registers[0]=(char)(pult_u%256);
0007f0  4866              LDR      r0,|L1.2444|
0007f2  b090              SUB      sp,sp,#0x40           ;1311
;;;1321   modbus_registers[1]=(char)(pult_u/256);					//Πεγ1
;;;1322   modbus_registers[2]=(char)(pult_i%256);
;;;1323   modbus_registers[3]=(char)(pult_i/256);					//Πεγ2
;;;1324   modbus_registers[4]=(char)(pult_work_stat%256);
;;;1325   modbus_registers[5]=(char)(pult_work_stat/256);			//Πεγ3
;;;1326   modbus_registers[6]=(char)(pult_u_set%256);
;;;1327   modbus_registers[7]=(char)(pult_u_set/256);				//Πεγ4
;;;1328   modbus_registers[8]=(char)(pult_time%256);
;;;1329   modbus_registers[9]=(char)(pult_time/256);				//Πεγ5
;;;1330   modbus_registers[10]=(char)(pult_time_set%256);		 	
;;;1331   modbus_registers[11]=(char)(pult_time_set/256);			//Πεγ6
;;;1332   modbus_registers[12]=(char)(pult_i_set%256);
;;;1333   modbus_registers[13]=(char)(pult_i_set/256);				//Πεγ7
;;;1334   
;;;1335   
;;;1336   modbus_tx_buff[0]=201;
;;;1337   modbus_tx_buff[1]=4;
;;;1338   modbus_tx_buff[2]=(char)(reg_quantity*2);
0007f4  0072              LSLS     r2,r6,#1
0007f6  f9b00000          LDRSH    r0,[r0,#0]            ;1320  ; pult_u
0007fa  f88d0024          STRB     r0,[sp,#0x24]         ;1320
0007fe  17c1              ASRS     r1,r0,#31             ;1320
000800  eb006111          ADD      r1,r0,r1,LSR #24      ;1320
000804  1208              ASRS     r0,r1,#8              ;1321
000806  f88d0025          STRB     r0,[sp,#0x25]         ;1321
00080a  4861              LDR      r0,|L1.2448|
;;;1339   
;;;1340   memcpy((char*)&modbus_tx_buff[3],(char*)modbus_registers,reg_quantity*2);
00080c  466c              MOV      r4,sp
00080e  f9b00000          LDRSH    r0,[r0,#0]            ;1322  ; pult_i
000812  f88d0026          STRB     r0,[sp,#0x26]         ;1322
000816  17c1              ASRS     r1,r0,#31             ;1322
000818  eb006111          ADD      r1,r0,r1,LSR #24      ;1322
00081c  1208              ASRS     r0,r1,#8              ;1323
00081e  f88d0027          STRB     r0,[sp,#0x27]         ;1323
000822  485c              LDR      r0,|L1.2452|
000824  7800              LDRB     r0,[r0,#0]            ;1324  ; pult_work_stat
000826  f88d0028          STRB     r0,[sp,#0x28]         ;1324
00082a  2000              MOVS     r0,#0                 ;1325
00082c  f88d0029          STRB     r0,[sp,#0x29]         ;1325
000830  4859              LDR      r0,|L1.2456|
000832  f9b00000          LDRSH    r0,[r0,#0]            ;1326  ; pult_u_set
000836  f88d002a          STRB     r0,[sp,#0x2a]         ;1326
00083a  17c1              ASRS     r1,r0,#31             ;1326
00083c  eb006111          ADD      r1,r0,r1,LSR #24      ;1326
000840  1208              ASRS     r0,r1,#8              ;1327
000842  f88d002b          STRB     r0,[sp,#0x2b]         ;1327
000846  4855              LDR      r0,|L1.2460|
000848  f9b00000          LDRSH    r0,[r0,#0]            ;1328  ; pult_time
00084c  f88d002c          STRB     r0,[sp,#0x2c]         ;1328
000850  17c1              ASRS     r1,r0,#31             ;1328
000852  eb006111          ADD      r1,r0,r1,LSR #24      ;1328
000856  1208              ASRS     r0,r1,#8              ;1329
000858  f88d002d          STRB     r0,[sp,#0x2d]         ;1329
00085c  4850              LDR      r0,|L1.2464|
00085e  8800              LDRH     r0,[r0,#0]            ;1330  ; pult_time_set
000860  f88d002e          STRB     r0,[sp,#0x2e]         ;1330
000864  0a00              LSRS     r0,r0,#8              ;1331
000866  f88d002f          STRB     r0,[sp,#0x2f]         ;1331
00086a  484e              LDR      r0,|L1.2468|
00086c  f9b00000          LDRSH    r0,[r0,#0]            ;1332  ; pult_i_set
000870  f88d0030          STRB     r0,[sp,#0x30]         ;1332
000874  17c1              ASRS     r1,r0,#31             ;1332
000876  eb006111          ADD      r1,r0,r1,LSR #24      ;1332
00087a  1208              ASRS     r0,r1,#8              ;1333
00087c  f88d0031          STRB     r0,[sp,#0x31]         ;1333
000880  20c9              MOVS     r0,#0xc9              ;1336
000882  f88d0000          STRB     r0,[sp,#0]            ;1336
000886  2004              MOVS     r0,#4                 ;1337
000888  f88d0001          STRB     r0,[sp,#1]            ;1337
00088c  f88d2002          STRB     r2,[sp,#2]            ;1338
000890  a909              ADD      r1,sp,#0x24
000892  1ce0              ADDS     r0,r4,#3
000894  f7fffffe          BL       __aeabi_memcpy
;;;1341   
;;;1342   crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
000898  2003              MOVS     r0,#3
00089a  eb000046          ADD      r0,r0,r6,LSL #1
00089e  b201              SXTH     r1,r0
0008a0  4668              MOV      r0,sp
0008a2  f7fffffe          BL       CRC16_2
;;;1343   
;;;1344   modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
0008a6  eb040146          ADD      r1,r4,r6,LSL #1
;;;1345   modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1346   
;;;1347   for (i=0;i<(5+(reg_quantity*2));i++)
0008aa  2500              MOVS     r5,#0
0008ac  70c8              STRB     r0,[r1,#3]            ;1344
0008ae  0a00              LSRS     r0,r0,#8              ;1345
0008b0  7108              STRB     r0,[r1,#4]            ;1345
0008b2  2005              MOVS     r0,#5
0008b4  eb000646          ADD      r6,r0,r6,LSL #1
0008b8  e004              B        |L1.2244|
                  |L1.2234|
;;;1348   	{
;;;1349   	putchar0(modbus_tx_buff[i]);
0008ba  5d60              LDRB     r0,[r4,r5]
0008bc  f7fffffe          BL       putchar0
0008c0  1c6d              ADDS     r5,r5,#1              ;1347
0008c2  b2ed              UXTB     r5,r5                 ;1347
                  |L1.2244|
0008c4  42ae              CMP      r6,r5                 ;1347
0008c6  d8f8              BHI      |L1.2234|
;;;1350   	}
;;;1351   for (i=0;i<(5+(reg_quantity*2));i++)
0008c8  2500              MOVS     r5,#0
0008ca  e004              B        |L1.2262|
                  |L1.2252|
;;;1352   	{
;;;1353   	putchar_sc16is700(modbus_tx_buff[i]);
0008cc  5d60              LDRB     r0,[r4,r5]
0008ce  f7fffffe          BL       putchar_sc16is700
0008d2  1c6d              ADDS     r5,r5,#1              ;1351
0008d4  b2ed              UXTB     r5,r5                 ;1351
                  |L1.2262|
0008d6  42ae              CMP      r6,r5                 ;1351
0008d8  d8f8              BHI      |L1.2252|
;;;1354   	}
;;;1355   //modbus_plazma1++;
;;;1356   }
0008da  b010              ADD      sp,sp,#0x40
0008dc  bd70              POP      {r4-r6,pc}
;;;1357   
                          ENDP

                  modbus_in PROC
;;;63     //-----------------------------------------------
;;;64     void modbus_in(void)
0008de  e92d4ff0          PUSH     {r4-r11,lr}
;;;65     {
;;;66     short crc16_calculated;		//βϋχθρλεμΰ θη οπθνςϋυ δΰννϋυ CRC
;;;67     short crc16_incapsulated;	//βρςπξενννΰ β οξρϋλκσ CRC
;;;68     unsigned short modbus_rx_arg0;		//βρςπξεννϋι β οξρϋλκσ οεπβϋι ΰπγσμενς
;;;69     unsigned short modbus_rx_arg1;		//βρςπξεννϋι β οξρϋλκσ βςξπξι ΰπγσμενς
;;;70     //unsigned short modbus_rx_arg2;		//βρςπξεννϋι β οξρϋλκσ ςπεςθι ΰπγσμενς
;;;71     //unsigned short modbus_rx_arg3;		//βρςπξεννϋι β οξρϋλκσ χεςβεπςϋι ΰπγσμενς
;;;72     unsigned char modbus_func;			//βρςπξεννϋι β οξρϋλκσ κξδ τσνκφθθ
;;;73     
;;;74     //modbus_plazma++;
;;;75     
;;;76     memcpy(modbus_an_buffer,modbus_rx_buffer,modbus_rx_buffer_ptr);
0008e2  4c31              LDR      r4,|L1.2472|
0008e4  490e              LDR      r1,|L1.2336|
0008e6  b08b              SUB      sp,sp,#0x2c           ;65
0008e8  78a2              LDRB     r2,[r4,#2]  ; modbus_rx_buffer_ptr
0008ea  393c              SUBS     r1,r1,#0x3c
0008ec  4615              MOV      r5,r2
0008ee  f101001e          ADD      r0,r1,#0x1e
0008f2  f7fffffe          BL       __aeabi_memcpy
;;;77     modbus_rx_counter=modbus_rx_buffer_ptr;
0008f6  70e5              STRB     r5,[r4,#3]
;;;78     modbus_rx_buffer_ptr=0;
0008f8  2600              MOVS     r6,#0
;;;79     bMODBUS_TIMEOUT=0;
;;;80     
;;;81     	
;;;82     crc16_calculated  = CRC16_2((char*)modbus_an_buffer, modbus_rx_counter-2);
0008fa  4809              LDR      r0,|L1.2336|
0008fc  70a6              STRB     r6,[r4,#2]            ;78
0008fe  7066              STRB     r6,[r4,#1]            ;79
000900  1ea9              SUBS     r1,r5,#2
000902  381e              SUBS     r0,r0,#0x1e
000904  f7fffffe          BL       CRC16_2
000908  b200              SXTH     r0,r0
00090a  4680              MOV      r8,r0
;;;83     crc16_incapsulated = *((short*)&modbus_an_buffer[modbus_rx_counter-2]);
00090c  4d04              LDR      r5,|L1.2336|
00090e  78e0              LDRB     r0,[r4,#3]  ; modbus_rx_counter
000910  3d1e              SUBS     r5,r5,#0x1e
000912  4428              ADD      r0,r0,r5
;;;84     
;;;85     //modbus_plazma=modbus_rx_counter;
;;;86     //modbus_plazma2=crc16_calculated;
;;;87     //modbus_plazma3=crc16_incapsulated;
;;;88     
;;;89     pvlk=0;
000914  4c25              LDR      r4,|L1.2476|
000916  f9300c02          LDRSH    r0,[r0,#-2]           ;83
00091a  4681              MOV      r9,r0                 ;83
00091c  8026              STRH     r6,[r4,#0]
;;;90     
;;;91     
;;;92     if(modbus_an_buffer[0]=='r')
00091e  e047              B        |L1.2480|
                  |L1.2336|
                          DCD      ||area_number.4||+0x3c
                  |L1.2340|
                          DCD      U_maxg
                  |L1.2344|
                          DCD      I_maxp
                  |L1.2348|
                          DCD      T_PROC_GS
                  |L1.2352|
                          DCD      T_PROC_PS
                  |L1.2356|
                          DCD      work_stat
                  |L1.2360|
                          DCD      REV_STAT
                  |L1.2364|
                          DCD      AVT_REV_IS_ON
                  |L1.2368|
                          DCD      AVT_REV_TIME_FF
                  |L1.2372|
                          DCD      AVT_REV_TIME_REW
                  |L1.2376|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.2380|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.2384|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.2388|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.2392|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.2396|
                          DCD      CAP_ZAR_TIME
                  |L1.2400|
                          DCD      CAP_PAUSE1_TIME
                  |L1.2404|
                          DCD      CAP_RAZR_TIME
                  |L1.2408|
                          DCD      CAP_PAUSE2_TIME
                  |L1.2412|
                          DCD      CAP_MAX_VOLT
                  |L1.2416|
                          DCD      CAP_WRK_CURR
                  |L1.2420|
                          DCD      pwm_u_reg
                  |L1.2424|
                          DCD      pwm_i_reg
                  |L1.2428|
                          DCD      pwm_t_reg
                  |L1.2432|
                          DCD      I_ug_ram
                  |L1.2436|
                          DCD      U_up_ram
                  |L1.2440|
                          DCD      modbus_tcp_out_ptr
                  |L1.2444|
                          DCD      pult_u
                  |L1.2448|
                          DCD      pult_i
                  |L1.2452|
                          DCD      pult_work_stat
                  |L1.2456|
                          DCD      pult_u_set
                  |L1.2460|
                          DCD      pult_time
                  |L1.2464|
                          DCD      pult_time_set
                  |L1.2468|
                          DCD      pult_i_set
                  |L1.2472|
                          DCD      ||.data||
                  |L1.2476|
                          DCD      pvlk
                  |L1.2480|
0009b0  7828              LDRB     r0,[r5,#0]  ; modbus_an_buffer
;;;93     	{
;;;94     	pvlk=1;
;;;95     	if(modbus_an_buffer[1]=='e')
;;;96     		{
;;;97     		pvlk=2;
;;;98     		if(modbus_an_buffer[2]=='a')
;;;99     			{
;;;100    			pvlk=3;
;;;101    			if(modbus_an_buffer[3]=='d')
;;;102    				{
;;;103    				pvlk=4;
;;;104    				/*if(modbus_an_buffer[6]==crc_87(modbus_an_buffer,6))
;;;105    					{
;;;106    					pvlk=5;
;;;107    					if(modbus_an_buffer[7]==crc_95(modbus_an_buffer,6))
;;;108    						{
;;;109    						pvlk=6;*/	
;;;110    
;;;111    							{
;;;112    							unsigned short ptr;
;;;113    							unsigned long data1,data2;
;;;114    							char temp_out[20];
;;;115    							pvlk++;
;;;116    							ptr=modbus_an_buffer[4]+(modbus_an_buffer[5]*256U);
;;;117    							data1=lc640_read_long(ptr);
;;;118    							data2=lc640_read_long(ptr+4);
;;;119    							temp_out[0]='r';
;;;120    							temp_out[1]='e';
;;;121    							temp_out[2]='a';
;;;122    							temp_out[3]='d';
;;;123    							temp_out[4]=*((char*)&ptr);
;;;124    							temp_out[5]=*(((char*)&ptr)+1);	
;;;125    							temp_out[6]=*((char*)&data1);
;;;126    							temp_out[7]=*(((char*)&data1)+1);		
;;;127    							temp_out[8]=*(((char*)&data1)+2);	
;;;128    							temp_out[9]=*(((char*)&data1)+3);		
;;;129    							temp_out[10]=*((char*)&data2);
;;;130    							temp_out[11]=*(((char*)&data2)+1);		
;;;131    							temp_out[12]=*(((char*)&data2)+2);	
;;;132    							temp_out[13]=*(((char*)&data2)+3);	
;;;133    							temp_out[14]=crc_87(temp_out,14);	
;;;134    							temp_out[15]=crc_95(temp_out,14);			
;;;135    							
;;;136    							temp_out[17]=0;
;;;137    							for (i=0;i<16;i++)
0009b2  4ef9              LDR      r6,|L1.3480|
0009b4  f04f0b03          MOV      r11,#3                ;100
0009b8  f04f0a05          MOV      r10,#5                ;115
0009bc  2872              CMP      r0,#0x72              ;92
0009be  d17e              BNE      |L1.2750|
0009c0  2001              MOVS     r0,#1                 ;94
0009c2  8020              STRH     r0,[r4,#0]            ;94
0009c4  7868              LDRB     r0,[r5,#1]            ;95  ; modbus_an_buffer
0009c6  2865              CMP      r0,#0x65              ;95
                  |L1.2504|
0009c8  d17a              BNE      |L1.2752|
0009ca  2002              MOVS     r0,#2                 ;97
0009cc  8020              STRH     r0,[r4,#0]            ;97
0009ce  78a8              LDRB     r0,[r5,#2]            ;98  ; modbus_an_buffer
0009d0  2861              CMP      r0,#0x61              ;98
0009d2  d1f9              BNE      |L1.2504|
0009d4  f8a4b000          STRH     r11,[r4,#0]           ;100
0009d8  78e8              LDRB     r0,[r5,#3]            ;101  ; modbus_an_buffer
0009da  2864              CMP      r0,#0x64              ;101
0009dc  d1f4              BNE      |L1.2504|
0009de  f8a4a000          STRH     r10,[r4,#0]           ;115
0009e2  7928              LDRB     r0,[r5,#4]            ;116  ; modbus_an_buffer
0009e4  7969              LDRB     r1,[r5,#5]            ;116  ; modbus_an_buffer
0009e6  eb002001          ADD      r0,r0,r1,LSL #8       ;116
0009ea  b280              UXTH     r0,r0                 ;116
0009ec  f8ad0014          STRH     r0,[sp,#0x14]         ;116
0009f0  4607              MOV      r7,r0                 ;116
0009f2  f7fffffe          BL       lc640_read_long
0009f6  9007              STR      r0,[sp,#0x1c]         ;118
0009f8  1d38              ADDS     r0,r7,#4              ;118
0009fa  f7fffffe          BL       lc640_read_long
0009fe  9006              STR      r0,[sp,#0x18]         ;119
000a00  2072              MOVS     r0,#0x72              ;119
000a02  f88d0000          STRB     r0,[sp,#0]            ;119
000a06  2065              MOVS     r0,#0x65              ;120
000a08  f88d0001          STRB     r0,[sp,#1]            ;120
000a0c  2061              MOVS     r0,#0x61              ;121
000a0e  f88d0002          STRB     r0,[sp,#2]            ;121
000a12  2064              MOVS     r0,#0x64              ;122
000a14  f88d0003          STRB     r0,[sp,#3]            ;122
000a18  f89d0014          LDRB     r0,[sp,#0x14]         ;123
000a1c  f88d0004          STRB     r0,[sp,#4]            ;123
000a20  f89d0015          LDRB     r0,[sp,#0x15]         ;124
000a24  f88d0005          STRB     r0,[sp,#5]            ;124
000a28  f89d001c          LDRB     r0,[sp,#0x1c]         ;125
000a2c  f88d0006          STRB     r0,[sp,#6]            ;125
000a30  f89d001d          LDRB     r0,[sp,#0x1d]         ;126
000a34  f88d0007          STRB     r0,[sp,#7]            ;126
000a38  f89d001e          LDRB     r0,[sp,#0x1e]         ;127
000a3c  f88d0008          STRB     r0,[sp,#8]            ;127
000a40  f89d001f          LDRB     r0,[sp,#0x1f]         ;128
000a44  f88d0009          STRB     r0,[sp,#9]            ;128
000a48  f89d0018          LDRB     r0,[sp,#0x18]         ;129
000a4c  f88d000a          STRB     r0,[sp,#0xa]          ;129
000a50  f89d0019          LDRB     r0,[sp,#0x19]         ;130
000a54  f88d000b          STRB     r0,[sp,#0xb]          ;130
000a58  f89d001a          LDRB     r0,[sp,#0x1a]         ;131
000a5c  f88d000c          STRB     r0,[sp,#0xc]          ;131
000a60  f89d001b          LDRB     r0,[sp,#0x1b]         ;132
000a64  f88d000d          STRB     r0,[sp,#0xd]          ;132
000a68  210e              MOVS     r1,#0xe               ;133
000a6a  4668              MOV      r0,sp                 ;133
000a6c  f7fffffe          BL       crc_87
000a70  f88d000e          STRB     r0,[sp,#0xe]          ;133
000a74  210e              MOVS     r1,#0xe               ;134
000a76  4668              MOV      r0,sp                 ;134
000a78  f7fffffe          BL       crc_95
000a7c  f88d000f          STRB     r0,[sp,#0xf]          ;134
000a80  2000              MOVS     r0,#0                 ;136
000a82  f88d0011          STRB     r0,[sp,#0x11]         ;136
000a86  7030              STRB     r0,[r6,#0]
000a88  466f              MOV      r7,sp                 ;114
                  |L1.2698|
;;;138    								{
;;;139    								putchar_sc16is700(temp_out[i]);
000a8a  b2c0              UXTB     r0,r0
000a8c  5c38              LDRB     r0,[r7,r0]
000a8e  f7fffffe          BL       putchar_sc16is700
;;;140    								temp_out[17]^=temp_out[i];
000a92  7830              LDRB     r0,[r6,#0]  ; i
000a94  f89d1011          LDRB     r1,[sp,#0x11]
000a98  5c3a              LDRB     r2,[r7,r0]
000a9a  1c40              ADDS     r0,r0,#1              ;137
000a9c  4051              EORS     r1,r1,r2
000a9e  b2c0              UXTB     r0,r0                 ;137
000aa0  f88d1011          STRB     r1,[sp,#0x11]
000aa4  7030              STRB     r0,[r6,#0]            ;137
000aa6  2810              CMP      r0,#0x10              ;137
000aa8  d3ef              BCC      |L1.2698|
;;;141    								}
;;;142    							putchar_sc16is700(16);
000aaa  2010              MOVS     r0,#0x10
000aac  f7fffffe          BL       putchar_sc16is700
;;;143    							putchar_sc16is700(temp_out[17]^16);
000ab0  f89d0011          LDRB     r0,[sp,#0x11]
000ab4  f0800010          EOR      r0,r0,#0x10
000ab8  f7fffffe          BL       putchar_sc16is700
;;;144    							putchar_sc16is700(0x0a);
000abc  e001              B        |L1.2754|
                  |L1.2750|
000abe  e003              B        |L1.2760|
                  |L1.2752|
000ac0  e084              B        |L1.3020|
                  |L1.2754|
000ac2  200a              MOVS     r0,#0xa
000ac4  f7fffffe          BL       putchar_sc16is700
                  |L1.2760|
;;;145    							}
;;;146    						}
;;;147    					}
;;;148    				}/*
;;;149    			} 
;;;150    		}*/	 
;;;151    	} 
;;;152    
;;;153    if(modbus_an_buffer[0]=='w')
000ac8  7828              LDRB     r0,[r5,#0]  ; modbus_an_buffer
000aca  2877              CMP      r0,#0x77
000acc  d17e              BNE      |L1.3020|
;;;154    	{
;;;155    	pvlk=1;
000ace  2001              MOVS     r0,#1
000ad0  8020              STRH     r0,[r4,#0]
;;;156    	if(modbus_an_buffer[1]=='r')
000ad2  7868              LDRB     r0,[r5,#1]  ; modbus_an_buffer
000ad4  2872              CMP      r0,#0x72
000ad6  d179              BNE      |L1.3020|
;;;157    		{
;;;158    		pvlk=2;
000ad8  2002              MOVS     r0,#2
000ada  8020              STRH     r0,[r4,#0]
;;;159    		if(modbus_an_buffer[2]=='i')
000adc  78a8              LDRB     r0,[r5,#2]  ; modbus_an_buffer
000ade  2869              CMP      r0,#0x69
000ae0  d174              BNE      |L1.3020|
;;;160    			{
;;;161    			pvlk=3;
000ae2  f8a4b000          STRH     r11,[r4,#0]
;;;162    			if(modbus_an_buffer[3]=='t')
000ae6  78e8              LDRB     r0,[r5,#3]  ; modbus_an_buffer
000ae8  2874              CMP      r0,#0x74
000aea  d16f              BNE      |L1.3020|
;;;163    				{
;;;164    				pvlk=4;
000aec  2004              MOVS     r0,#4
000aee  8020              STRH     r0,[r4,#0]
;;;165    				if(modbus_an_buffer[4]=='e')
000af0  7928              LDRB     r0,[r5,#4]  ; modbus_an_buffer
000af2  2865              CMP      r0,#0x65
000af4  d16a              BNE      |L1.3020|
;;;166    					{
;;;167    					pvlk=5;
000af6  f8a4a000          STRH     r10,[r4,#0]
;;;168    					if(modbus_an_buffer[15]==crc_87(modbus_an_buffer,15))
000afa  210f              MOVS     r1,#0xf
000afc  48a7              LDR      r0,|L1.3484|
000afe  f7fffffe          BL       crc_87
000b02  7be9              LDRB     r1,[r5,#0xf]  ; modbus_an_buffer
000b04  4288              CMP      r0,r1
000b06  d177              BNE      |L1.3064|
;;;169    						{
;;;170    						pvlk=6;
000b08  2006              MOVS     r0,#6
000b0a  8020              STRH     r0,[r4,#0]
;;;171    						if(modbus_an_buffer[16]==crc_95(modbus_an_buffer,15))
000b0c  210f              MOVS     r1,#0xf
000b0e  48a3              LDR      r0,|L1.3484|
000b10  f7fffffe          BL       crc_95
000b14  7c29              LDRB     r1,[r5,#0x10]  ; modbus_an_buffer
000b16  4288              CMP      r0,r1
000b18  d16e              BNE      |L1.3064|
;;;172    
;;;173    							{
;;;174    							unsigned short ptr;
;;;175    							unsigned long data1,data2;
;;;176    							char temp_out[20];
;;;177    							pvlk=7;
000b1a  2007              MOVS     r0,#7
000b1c  8020              STRH     r0,[r4,#0]
;;;178    							ptr=modbus_an_buffer[5]+(modbus_an_buffer[6]*256U);
000b1e  7968              LDRB     r0,[r5,#5]  ; modbus_an_buffer
000b20  79a9              LDRB     r1,[r5,#6]  ; modbus_an_buffer
000b22  eb002001          ADD      r0,r0,r1,LSL #8
000b26  b284              UXTH     r4,r0
000b28  f8ad4008          STRH     r4,[sp,#8]
;;;179    							*((char*)&data1)=modbus_an_buffer[7];
000b2c  79e8              LDRB     r0,[r5,#7]  ; modbus_an_buffer
000b2e  f88d0004          STRB     r0,[sp,#4]
;;;180    							*(((char*)&data1)+1)=modbus_an_buffer[8];
000b32  7a28              LDRB     r0,[r5,#8]  ; modbus_an_buffer
000b34  f88d0005          STRB     r0,[sp,#5]
;;;181    							*(((char*)&data1)+2)=modbus_an_buffer[9];
000b38  7a68              LDRB     r0,[r5,#9]  ; modbus_an_buffer
000b3a  f88d0006          STRB     r0,[sp,#6]
;;;182    							*(((char*)&data1)+3)=modbus_an_buffer[10];
000b3e  7aa8              LDRB     r0,[r5,#0xa]  ; modbus_an_buffer
000b40  f88d0007          STRB     r0,[sp,#7]
;;;183    							*((char*)&data2)=modbus_an_buffer[11];
000b44  7ae8              LDRB     r0,[r5,#0xb]  ; modbus_an_buffer
000b46  f88d0028          STRB     r0,[sp,#0x28]
;;;184    							*(((char*)&data2)+1)=modbus_an_buffer[12];
000b4a  7b28              LDRB     r0,[r5,#0xc]  ; modbus_an_buffer
000b4c  f88d0029          STRB     r0,[sp,#0x29]
;;;185    							*(((char*)&data2)+2)=modbus_an_buffer[13];
000b50  7b68              LDRB     r0,[r5,#0xd]  ; modbus_an_buffer
000b52  f88d002a          STRB     r0,[sp,#0x2a]
;;;186    							*(((char*)&data2)+3)=modbus_an_buffer[14];	
000b56  7ba8              LDRB     r0,[r5,#0xe]  ; modbus_an_buffer
000b58  f88d002b          STRB     r0,[sp,#0x2b]
;;;187    							lc640_write_long(ptr,data1);
000b5c  4620              MOV      r0,r4
000b5e  9901              LDR      r1,[sp,#4]
000b60  f7fffffe          BL       lc640_write_long
;;;188    							lc640_write_long(ptr+4,data2);
000b64  1d20              ADDS     r0,r4,#4
000b66  990a              LDR      r1,[sp,#0x28]
000b68  f7fffffe          BL       lc640_write_long
;;;189    							
;;;190    							//data1=lc640_read_long(ptr);
;;;191    							//data2=lc640_read_long(ptr+4);
;;;192    							temp_out[0]='w';
000b6c  2077              MOVS     r0,#0x77
000b6e  f88d000c          STRB     r0,[sp,#0xc]
;;;193    							temp_out[1]='r';
000b72  2072              MOVS     r0,#0x72
000b74  f88d000d          STRB     r0,[sp,#0xd]
;;;194    							temp_out[2]='i';
000b78  2069              MOVS     r0,#0x69
000b7a  f88d000e          STRB     r0,[sp,#0xe]
;;;195    							temp_out[3]='t';
000b7e  2074              MOVS     r0,#0x74
000b80  f88d000f          STRB     r0,[sp,#0xf]
;;;196    							temp_out[4]='e';
000b84  2065              MOVS     r0,#0x65
000b86  f88d0010          STRB     r0,[sp,#0x10]
;;;197    							temp_out[5]=*((char*)&ptr);
000b8a  f89d0008          LDRB     r0,[sp,#8]
000b8e  f88d0011          STRB     r0,[sp,#0x11]
;;;198    							temp_out[6]=*(((char*)&ptr)+1);	
000b92  f89d0009          LDRB     r0,[sp,#9]
000b96  f88d0012          STRB     r0,[sp,#0x12]
;;;199    						
;;;200    							temp_out[7]=crc_87(temp_out,7);	
000b9a  2107              MOVS     r1,#7
000b9c  a803              ADD      r0,sp,#0xc
000b9e  f7fffffe          BL       crc_87
000ba2  f88d0013          STRB     r0,[sp,#0x13]
;;;201    							temp_out[8]=crc_95(temp_out,7);			
000ba6  2107              MOVS     r1,#7
000ba8  a803              ADD      r0,sp,#0xc
000baa  f7fffffe          BL       crc_95
000bae  f88d0014          STRB     r0,[sp,#0x14]
;;;202    							
;;;203    							temp_out[10]=0;
000bb2  2000              MOVS     r0,#0
000bb4  f88d0016          STRB     r0,[sp,#0x16]
;;;204    							for (i=0;i<9;i++)
000bb8  7030              STRB     r0,[r6,#0]
000bba  ac03              ADD      r4,sp,#0xc            ;176
                  |L1.3004|
;;;205    								{
;;;206    								putchar_sc16is700(temp_out[i]);
000bbc  b2c0              UXTB     r0,r0
000bbe  5c20              LDRB     r0,[r4,r0]
000bc0  f7fffffe          BL       putchar_sc16is700
;;;207    								temp_out[10]^=temp_out[i];
000bc4  f89d1016          LDRB     r1,[sp,#0x16]
000bc8  7830              LDRB     r0,[r6,#0]  ; i
000bca  e000              B        |L1.3022|
                  |L1.3020|
000bcc  e014              B        |L1.3064|
                  |L1.3022|
000bce  5c22              LDRB     r2,[r4,r0]
000bd0  1c40              ADDS     r0,r0,#1              ;204
000bd2  4051              EORS     r1,r1,r2
000bd4  b2c0              UXTB     r0,r0                 ;204
000bd6  f88d1016          STRB     r1,[sp,#0x16]
000bda  7030              STRB     r0,[r6,#0]            ;204
000bdc  2809              CMP      r0,#9                 ;204
000bde  d3ed              BCC      |L1.3004|
;;;208    								}
;;;209    							putchar_sc16is700(9);
000be0  2009              MOVS     r0,#9
000be2  f7fffffe          BL       putchar_sc16is700
;;;210    							putchar_sc16is700(temp_out[10]^9);
000be6  f89d0016          LDRB     r0,[sp,#0x16]
000bea  f0800009          EOR      r0,r0,#9
000bee  f7fffffe          BL       putchar_sc16is700
;;;211    							putchar_sc16is700(0x0a);
000bf2  200a              MOVS     r0,#0xa
000bf4  f7fffffe          BL       putchar_sc16is700
                  |L1.3064|
;;;212    							}
;;;213    						}
;;;214    					}
;;;215    				}
;;;216    		   	}
;;;217    		}
;;;218    	}
;;;219    
;;;220    modbus_func=modbus_an_buffer[1];
000bf8  7868              LDRB     r0,[r5,#1]  ; modbus_an_buffer
;;;221    modbus_rx_arg0=(((unsigned short)modbus_an_buffer[2])*((unsigned short)256))+((unsigned short)modbus_an_buffer[3]);
000bfa  9004              STR      r0,[sp,#0x10]
000bfc  78e9              LDRB     r1,[r5,#3]  ; modbus_an_buffer
000bfe  78a8              LDRB     r0,[r5,#2]  ; modbus_an_buffer
;;;222    modbus_rx_arg1=(((unsigned short)modbus_an_buffer[4])*((unsigned short)256))+((unsigned short)modbus_an_buffer[5]);
;;;223    //modbus_rx_arg2=(((unsigned short)modbus_an_buffer[6])*((unsigned short)256))+((unsigned short)modbus_an_buffer[7]);
;;;224    //modbus_rx_arg3=(((unsigned short)modbus_an_buffer[8])*((unsigned short)256))+((unsigned short)modbus_an_buffer[9]);
;;;225    modbus_cmnd=(modbus_rx_arg1>>8)&0x7f;
;;;226    modbus_cmnd_cnt=(modbus_rx_arg1)&0x0f;
;;;227    
;;;228    modbus_plazma3=modbus_cmnd;
;;;229    modbus_plazma2=modbus_cmnd_cnt;
;;;230    modbus_plazma1=modbus_self_cmnd_cnt;
;;;231    
;;;232    if(crc16_calculated==crc16_incapsulated)
000c00  45c8              CMP      r8,r9
000c02  eb012000          ADD      r0,r1,r0,LSL #8       ;221
000c06  b287              UXTH     r7,r0                 ;221
000c08  7968              LDRB     r0,[r5,#5]            ;222  ; modbus_an_buffer
000c0a  7929              LDRB     r1,[r5,#4]            ;222  ; modbus_an_buffer
000c0c  eb002001          ADD      r0,r0,r1,LSL #8       ;222
000c10  b284              UXTH     r4,r0                 ;222
000c12  4863              LDR      r0,|L1.3488|
000c14  f3c42206          UBFX     r2,r4,#8,#7           ;225
000c18  f004010f          AND      r1,r4,#0xf            ;226
000c1c  7142              STRB     r2,[r0,#5]            ;225
000c1e  7101              STRB     r1,[r0,#4]            ;226
000c20  8182              STRH     r2,[r0,#0xc]          ;228
000c22  8141              STRH     r1,[r0,#0xa]          ;229
000c24  7802              LDRB     r2,[r0,#0]            ;230  ; modbus_self_cmnd_cnt
000c26  8102              STRH     r2,[r0,#8]            ;230
000c28  d170              BNE      |L1.3340|
;;;233    	{
;;;234    	if(modbus_self_cmnd_cnt==33)modbus_self_cmnd_cnt=modbus_cmnd_cnt;
000c2a  2a21              CMP      r2,#0x21
000c2c  d100              BNE      |L1.3120|
000c2e  7001              STRB     r1,[r0,#0]
                  |L1.3120|
;;;235    	modbus_plazma=modbus_an_buffer[0];
000c30  495a              LDR      r1,|L1.3484|
;;;236    	if(modbus_an_buffer[0]==200)	 //ερλθ ηΰοπξρ ξς οσλόςΰ
;;;237    		{
;;;238    		if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
;;;239    			{
;;;240    			modbus_for_pult_registers_transmit(7);
;;;241    			}
;;;242    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
;;;243    			{
;;;244    			//if(modbus_rx_arg0==1)		//
;;;245    				{
;;;246    				modbus_for_pult_registers_transmit(7);
;;;247    				tumbler_stat=(enum_tumbler_stat)(modbus_rx_arg1>>15);
;;;248    				if((tumbler_stat!=tumbler_stat_old))
;;;249    					{
;;;250    					if(tumbler_stat==tsU)
;;;251    						{
;;;252    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;253    						}
;;;254    					else lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;255    					
;;;256    					if(main_cnt>3)
;;;257    						{
;;;258    						work_stat=wsOFF;
;;;259    						restart_off();
;;;260    						}
;;;261    					}
;;;262    				tumbler_stat_old=tumbler_stat;
;;;263    				
;;;264    				}
;;;265    			 //else if(modbus_rx_arg0==0)
;;;266    			 	{
;;;267    				//modbus_plazma++;		
;;;268    				if((modbus_cmnd==61)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;269    					{
;;;270    					if(I_ug<1000)I_ug++;
;;;271    					else I_ug=((I_ug/10)+1)*10;
;;;272    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
000c32  f8dfb170          LDR      r11,|L1.3492|
000c36  4d5c              LDR      r5,|L1.3496|
000c38  7809              LDRB     r1,[r1,#0]            ;235  ; modbus_an_buffer
000c3a  4682              MOV      r10,r0                ;235
000c3c  80c1              STRH     r1,[r0,#6]            ;235
;;;273    					I_ug_block_cnt=10;
;;;274    					//lc640_write_int(EE_I_UG,I_ug);
;;;275    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;276    					}
;;;277    				
;;;278    				else if((modbus_cmnd==62)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;279    					{
;;;280    					if(I_ug<1000)I_ug--;
;;;281    					else I_ug=((I_ug/10)-1)*10;
;;;282    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;283    					I_ug_block_cnt=10;
;;;284    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;285    					}
;;;286    				else if((modbus_cmnd==63)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;287    					{
;;;288    					if(I_ug<1000)I_ug=((I_ug/10)+1)*10;
;;;289    					else I_ug=((I_ug/10)+5)*10;
;;;290    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;291    					I_ug_block_cnt=10;
;;;292    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;293    					}
;;;294    				
;;;295    				else if((modbus_cmnd==64)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;296    					{
;;;297    					if(I_ug<1000)I_ug=((I_ug/10)-1)*10;
;;;298    					else I_ug=((I_ug/10)-5)*10;
;;;299    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;300    					I_ug_block_cnt=10;
;;;301    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;302    					}
;;;303    				
;;;304    				else if((modbus_cmnd==71)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;305    					{
;;;306    					U_up++;
;;;307    					gran(&U_up,U_MIN,U_MAX);
;;;308    					U_up_block_cnt=10;
;;;309    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;310    					}
;;;311    				
;;;312    				else if((modbus_cmnd==72)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;313    					{
;;;314    					U_up--;
;;;315    					gran(&U_up,U_MIN,U_MAX);
;;;316    					U_up_block_cnt=10;
;;;317    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;318    				
;;;319    					}
;;;320    				else if((modbus_cmnd==73)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;321    					{
;;;322    					U_up=((U_up/10)+1)*10;
;;;323    					gran(&U_up,U_MIN,U_MAX);
;;;324    					U_up_block_cnt=10;
;;;325    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;326    					}
;;;327    				
;;;328    				else if((modbus_cmnd==74)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;329    					{
;;;330    					U_up=((U_up/10)-1)*10;
;;;331    					gran(&U_up,U_MIN,U_MAX);
;;;332    					U_up_block_cnt=10;
;;;333    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;334    					}
;;;335    				
;;;336    				
;;;337    				else if((modbus_cmnd==51)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ+
;;;338    					{
;;;339    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;340    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;341    						{
;;;342    						if(TIME_VISION_PULT)
;;;343    							{
;;;344    							T_PROC_GS=(((T_PROC_GS/60L)+1L)*60L);
000c3e  f04f093c          MOV      r9,#0x3c
000c42  29c8              CMP      r1,#0xc8              ;236
000c44  d104              BNE      |L1.3152|
000c46  9804              LDR      r0,[sp,#0x10]         ;238
000c48  2804              CMP      r0,#4                 ;238
000c4a  d002              BEQ      |L1.3154|
000c4c  2806              CMP      r0,#6                 ;242
000c4e  d004              BEQ      |L1.3162|
                  |L1.3152|
000c50  e241              B        |L1.4310|
                  |L1.3154|
000c52  2007              MOVS     r0,#7                 ;240
000c54  f7fffffe          BL       modbus_for_pult_registers_transmit
000c58  e23d              B        |L1.4310|
                  |L1.3162|
000c5a  2007              MOVS     r0,#7                 ;246
000c5c  f7fffffe          BL       modbus_for_pult_registers_transmit
000c60  f8df8148          LDR      r8,|L1.3500|
000c64  4e52              LDR      r6,|L1.3504|
000c66  0be0              LSRS     r0,r4,#15             ;247
000c68  f8880000          STRB     r0,[r8,#0]            ;247
000c6c  7831              LDRB     r1,[r6,#0]            ;248  ; tumbler_stat_old
000c6e  4288              CMP      r0,r1                 ;248
000c70  d00e              BEQ      |L1.3216|
000c72  2801              CMP      r0,#1                 ;250
000c74  d03c              BEQ      |L1.3312|
000c76  2100              MOVS     r1,#0                 ;254
                  |L1.3192|
000c78  20ea              MOVS     r0,#0xea              ;254
000c7a  f7fffffe          BL       lc640_write_int
000c7e  484d              LDR      r0,|L1.3508|
000c80  f9b00000          LDRSH    r0,[r0,#0]            ;256  ; main_cnt
000c84  2803              CMP      r0,#3                 ;256
000c86  dd03              BLE      |L1.3216|
000c88  2000              MOVS     r0,#0                 ;258
000c8a  7028              STRB     r0,[r5,#0]            ;258
000c8c  f7fffffe          BL       restart_off
                  |L1.3216|
000c90  f898c000          LDRB     r12,[r8,#0]           ;262  ; tumbler_stat
000c94  f886c000          STRB     r12,[r6,#0]           ;262
000c98  46c6              MOV      lr,r8                 ;262
000c9a  f89a3005          LDRB     r3,[r10,#5]           ;268  ; modbus_cmnd
000c9e  f8df8118          LDR      r8,|L1.3512|
000ca2  260a              MOVS     r6,#0xa               ;144
000ca4  4650              MOV      r0,r10                ;268
000ca6  f44f717a          MOV      r1,#0x3e8             ;270
000caa  2b3d              CMP      r3,#0x3d              ;268
000cac  d022              BEQ      |L1.3316|
000cae  2b3e              CMP      r3,#0x3e              ;278
000cb0  d03b              BEQ      |L1.3370|
000cb2  2b3f              CMP      r3,#0x3f              ;286
000cb4  d04a              BEQ      |L1.3404|
000cb6  2b40              CMP      r3,#0x40              ;295
000cb8  d058              BEQ      |L1.3436|
000cba  f8df8100          LDR      r8,|L1.3516|
000cbe  2b47              CMP      r3,#0x47              ;304
000cc0  d066              BEQ      |L1.3472|
000cc2  2b48              CMP      r3,#0x48              ;312
000cc4  d065              BEQ      |L1.3474|
000cc6  2b49              CMP      r3,#0x49              ;320
000cc8  d064              BEQ      |L1.3476|
000cca  2b4a              CMP      r3,#0x4a              ;328
000ccc  d063              BEQ      |L1.3478|
000cce  493c              LDR      r1,|L1.3520|
;;;345    							T_PROC_GS_block_cnt=10;
000cd0  4a3c              LDR      r2,|L1.3524|
;;;346    							}
;;;347    						else
;;;348    							{
;;;349    							T_PROC_GS++;
;;;350    							T_PROC_GS_block_cnt=10;
;;;351    							}
;;;352    				
;;;353    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;354    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;355    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;356    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;357    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;358    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;359    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;360    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;361    							}												//(T_PROC_GS_MODE=0)
;;;362    					
;;;363    						else if(T_PROC_GS<30)
;;;364    							{
;;;365    							T_PROC_GS=29;
;;;366    							if(T_PROC_GS_MODE!=1)
;;;367    								{
;;;368    								T_PROC_GS_MODE=1;
;;;369    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;370    								}
;;;371    							}
;;;372    						else 
;;;373    							{
;;;374    							if(T_PROC_GS_MODE!=0)
;;;375    								{
;;;376    								T_PROC_GS_MODE=0;
;;;377    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;378    								}
;;;379    							}			
;;;380    						}
;;;381    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;382    						{
;;;383    						if(TIME_VISION_PULT)
;;;384    							{
;;;385    							T_PROC_PS=(((T_PROC_PS/60L)+1L)*60L);
;;;386    							T_PROC_PS_block_cnt=10;
000cd2  f8dfa0f4          LDR      r10,|L1.3528|
000cd6  f8df80f4          LDR      r8,|L1.3532|
000cda  2b33              CMP      r3,#0x33              ;337
000cdc  d07c              BEQ      |L1.3544|
;;;387    							}
;;;388    						else
;;;389    							{
;;;390    							T_PROC_PS++;
;;;391    							T_PROC_PS_block_cnt=10;
;;;392    							}
;;;393    				
;;;394    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;395    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;396    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;397    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;398    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;399    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;400    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;401    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;402    							}												//(T_PROC_PS_MODE=0)
;;;403    					
;;;404    						else if(T_PROC_PS<30)
;;;405    							{
;;;406    							T_PROC_PS=29;
;;;407    							if(T_PROC_PS_MODE!=1)
;;;408    								{
;;;409    								T_PROC_PS_MODE=1;
;;;410    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;411    								}
;;;412    							}
;;;413    						else 
;;;414    							{
;;;415    							if(T_PROC_PS_MODE!=0)
;;;416    								{
;;;417    								T_PROC_PS_MODE=0;
;;;418    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;419    								}
;;;420    							}			
;;;421    						}
;;;422    					}
;;;423    				else if((modbus_cmnd==53)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ++
000cde  2b35              CMP      r3,#0x35
000ce0  d07b              BEQ      |L1.3546|
;;;424    					{
;;;425    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;426    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;427    						{
;;;428    						if(TIME_VISION_PULT)
;;;429    							{
;;;430    							T_PROC_GS=(((T_PROC_GS/600L)+1L)*600L);
;;;431    							T_PROC_GS_block_cnt=10;
;;;432    							}
;;;433    						else
;;;434    							{
;;;435    							T_PROC_GS=(((T_PROC_GS/10L)+1L)*10L);
;;;436    							T_PROC_GS_block_cnt=10;
;;;437    							}
;;;438    				
;;;439    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;440    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;441    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;442    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;443    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;444    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;445    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;446    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;447    							}												//(T_PROC_GS_MODE=0)
;;;448    					
;;;449    						else if(T_PROC_GS<30)
;;;450    							{
;;;451    							T_PROC_GS=29;
;;;452    							if(T_PROC_GS_MODE!=1)
;;;453    								{
;;;454    								T_PROC_GS_MODE=1;
;;;455    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;456    								}
;;;457    							}
;;;458    						else 
;;;459    							{
;;;460    							if(T_PROC_GS_MODE!=0)
;;;461    								{
;;;462    								T_PROC_GS_MODE=0;
;;;463    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;464    								}
;;;465    							}			
;;;466    						}
;;;467    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;468    						{
;;;469    						if(TIME_VISION_PULT)
;;;470    							{
;;;471    							T_PROC_PS=(((T_PROC_PS/600L)+1L)*600L);
;;;472    							T_PROC_PS_block_cnt=10;
;;;473    							}
;;;474    						else
;;;475    							{
;;;476    							T_PROC_PS=(((T_PROC_PS/10L)+1L)*10L);
;;;477    							T_PROC_PS_block_cnt=10;
;;;478    							}
;;;479    				
;;;480    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;481    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;482    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;483    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;484    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;485    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;486    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;487    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;488    							}												//(T_PROC_PS_MODE=0)
;;;489    					
;;;490    						else if(T_PROC_PS<30)
;;;491    							{
;;;492    							T_PROC_PS=29;
;;;493    							if(T_PROC_PS_MODE!=1)
;;;494    								{
;;;495    								T_PROC_PS_MODE=1;
;;;496    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;497    								}
;;;498    							}
;;;499    						else 
;;;500    							{
;;;501    							if(T_PROC_PS_MODE!=0)
;;;502    								{
;;;503    								T_PROC_PS_MODE=0;
;;;504    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;505    								}
;;;506    							}				
;;;507    						}
;;;508    					}
;;;509    				
;;;510    				else if((modbus_cmnd==52)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ-
000ce2  2b34              CMP      r3,#0x34
000ce4  d07a              BEQ      |L1.3548|
;;;511    					{
;;;512    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;513    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;514    						{
;;;515    						if(TIME_VISION_PULT)
;;;516    							{
;;;517    							T_PROC_GS=(((T_PROC_GS/60L)-1L)*60L);
;;;518    							T_PROC_GS_block_cnt=10;
;;;519    							}
;;;520    						else
;;;521    							{
;;;522    							T_PROC_GS--;
;;;523    							T_PROC_GS_block_cnt=10;
;;;524    							}
;;;525    				
;;;526    							
;;;527    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;528    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;529    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;530    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;531    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;532    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;533    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;534    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;535    							}												//(T_PROC_GS_MODE=0)
;;;536    					
;;;537    						else if(T_PROC_GS<30)
;;;538    							{
;;;539    							T_PROC_GS=29;
;;;540    							if(T_PROC_GS_MODE!=1)
;;;541    								{
;;;542    								T_PROC_GS_MODE=1;
;;;543    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;544    								}
;;;545    							}
;;;546    						else 
;;;547    							{
;;;548    							if(T_PROC_GS_MODE!=0)
;;;549    								{
;;;550    								T_PROC_GS_MODE=0;
;;;551    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;552    								}
;;;553    							}
;;;554    							
;;;555    						}
;;;556    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;557    						{
;;;558    						if(TIME_VISION_PULT)
;;;559    							{
;;;560    							T_PROC_PS=(((T_PROC_PS/60L)-1L)*60L);
;;;561    							T_PROC_PS_block_cnt=10;
;;;562    							}
;;;563    						else
;;;564    							{
;;;565    							T_PROC_PS--;
;;;566    							T_PROC_PS_block_cnt=10;
;;;567    							}
;;;568    				
;;;569    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;570    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;571    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;572    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;573    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;574    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;575    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;576    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;577    							}												//(T_PROC_PS_MODE=0)
;;;578    					
;;;579    						else if(T_PROC_PS<30)
;;;580    							{
;;;581    							T_PROC_PS=29;
;;;582    							if(T_PROC_PS_MODE!=1)
;;;583    								{
;;;584    								T_PROC_PS_MODE=1;
;;;585    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;586    								}
;;;587    							}
;;;588    						else 
;;;589    							{
;;;590    							if(T_PROC_PS_MODE!=0)
;;;591    								{
;;;592    								T_PROC_PS_MODE=0;
;;;593    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;594    								}
;;;595    							}			
;;;596    						}
;;;597    					}
;;;598    				else if((modbus_cmnd==54)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ--
000ce6  2b36              CMP      r3,#0x36
000ce8  d079              BEQ      |L1.3550|
;;;599    					{
;;;600    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;601    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;602    						{
;;;603    						if(TIME_VISION_PULT)
;;;604    							{
;;;605    							T_PROC_GS=(((T_PROC_GS/600L)-1L)*600L);
;;;606    							T_PROC_GS_block_cnt=10;
;;;607    							}
;;;608    						else
;;;609    							{
;;;610    							T_PROC_GS=(((T_PROC_GS/10L)-1L)*10L);
;;;611    							T_PROC_GS_block_cnt=10;
;;;612    							}
;;;613    				
;;;614    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;615    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;616    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;617    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;618    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;619    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;620    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;621    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;622    							}												//(T_PROC_GS_MODE=0)
;;;623    					
;;;624    						else if(T_PROC_GS<30)
;;;625    							{
;;;626    							T_PROC_GS=29;
;;;627    							if(T_PROC_GS_MODE!=1)
;;;628    								{
;;;629    								T_PROC_GS_MODE=1;
;;;630    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;631    								}
;;;632    							}
;;;633    						else 
;;;634    							{
;;;635    							if(T_PROC_GS_MODE!=0)
;;;636    								{
;;;637    								T_PROC_GS_MODE=0;
;;;638    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;639    								}
;;;640    							}
;;;641    										
;;;642    						}
;;;643    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;644    						{
;;;645    						if(TIME_VISION_PULT)
;;;646    							{
;;;647    							T_PROC_PS=(((T_PROC_PS/600L)-1L)*600L);
;;;648    							T_PROC_PS_block_cnt=10;
;;;649    							}
;;;650    						else
;;;651    							{
;;;652    							T_PROC_PS=(((T_PROC_PS/10L)-1L)*10L);
;;;653    							T_PROC_PS_block_cnt=10;
;;;654    							}
;;;655    				
;;;656    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;657    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;658    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;659    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;660    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;661    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;662    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;663    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;664    							}												//(T_PROC_PS_MODE=0)
;;;665    					
;;;666    						else if(T_PROC_PS<30)
;;;667    							{
;;;668    							T_PROC_PS=29;
;;;669    							if(T_PROC_PS_MODE!=1)
;;;670    								{
;;;671    								T_PROC_PS_MODE=1;
;;;672    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;673    								}
;;;674    							}
;;;675    						else 
;;;676    							{
;;;677    							if(T_PROC_PS_MODE!=0)
;;;678    								{
;;;679    								T_PROC_PS_MODE=0;
;;;680    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;681    								}
;;;682    							}	
;;;683    						}
;;;684    					}
;;;685    				
;;;686    				
;;;687    			//	else if((modbus_rx_arg1>>8)==90)
;;;688    			else if((modbus_cmnd==1)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
000cea  2b01              CMP      r3,#1
000cec  d078              BEQ      |L1.3552|
                  |L1.3310|
000cee  e1f2              B        |L1.4310|
                  |L1.3312|
000cf0  2101              MOVS     r1,#1                 ;252
000cf2  e7c1              B        |L1.3192|
                  |L1.3316|
000cf4  7902              LDRB     r2,[r0,#4]            ;268  ; modbus_cmnd_cnt
000cf6  f89a0000          LDRB     r0,[r10,#0]           ;268  ; modbus_self_cmnd_cnt
000cfa  4282              CMP      r2,r0                 ;268
                  |L1.3324|
000cfc  d0a8              BEQ      |L1.3152|
000cfe  4a34              LDR      r2,|L1.3536|
000d00  f9b20000          LDRSH    r0,[r2,#0]            ;270  ; I_ug
000d04  4288              CMP      r0,r1                 ;270
000d06  da02              BGE      |L1.3342|
000d08  1c40              ADDS     r0,r0,#1              ;270
000d0a  e006              B        |L1.3354|
                  |L1.3340|
000d0c  e24a              B        |L1.4516|
                  |L1.3342|
000d0e  fb90f0f6          SDIV     r0,r0,r6              ;271
000d12  1c40              ADDS     r0,r0,#1              ;271
000d14  eb000080          ADD      r0,r0,r0,LSL #2       ;271
000d18  0040              LSLS     r0,r0,#1              ;271
                  |L1.3354|
000d1a  8010              STRH     r0,[r2,#0]            ;271
                  |L1.3356|
000d1c  482d              LDR      r0,|L1.3540|
000d1e  f9bb2000          LDRSH    r2,[r11,#0]           ;272  ; I_MAX_IPS
000d22  f9b01000          LDRSH    r1,[r0,#0]            ;272  ; I_MIN_IPS
000d26  482a              LDR      r0,|L1.3536|
000d28  e08f              B        |L1.3658|
                  |L1.3370|
000d2a  7902              LDRB     r2,[r0,#4]            ;278  ; modbus_cmnd_cnt
000d2c  f89a0000          LDRB     r0,[r10,#0]           ;278  ; modbus_self_cmnd_cnt
000d30  4282              CMP      r2,r0                 ;278
                  |L1.3378|
000d32  d08d              BEQ      |L1.3152|
000d34  4826              LDR      r0,|L1.3536|
000d36  f9b02000          LDRSH    r2,[r0,#0]            ;280  ; I_ug
000d3a  428a              CMP      r2,r1                 ;280
000d3c  da02              BGE      |L1.3396|
000d3e  1e52              SUBS     r2,r2,#1              ;280
000d40  8002              STRH     r2,[r0,#0]            ;280
000d42  e7eb              B        |L1.3356|
                  |L1.3396|
000d44  fb92f1f6          SDIV     r1,r2,r6              ;281
000d48  1e49              SUBS     r1,r1,#1              ;281
000d4a  e01c              B        |L1.3462|
                  |L1.3404|
000d4c  7902              LDRB     r2,[r0,#4]            ;286  ; modbus_cmnd_cnt
000d4e  f89a0000          LDRB     r0,[r10,#0]           ;286  ; modbus_self_cmnd_cnt
000d52  4282              CMP      r2,r0                 ;286
000d54  d0cb              BEQ      |L1.3310|
000d56  481e              LDR      r0,|L1.3536|
000d58  f9b02000          LDRSH    r2,[r0,#0]            ;288  ; I_ug
000d5c  428a              CMP      r2,r1                 ;288
000d5e  fb92f1f6          SDIV     r1,r2,r6              ;289
000d62  da01              BGE      |L1.3432|
000d64  1c49              ADDS     r1,r1,#1              ;288
000d66  e00e              B        |L1.3462|
                  |L1.3432|
000d68  1d49              ADDS     r1,r1,#5              ;289
000d6a  e00c              B        |L1.3462|
                  |L1.3436|
000d6c  7902              LDRB     r2,[r0,#4]            ;295  ; modbus_cmnd_cnt
000d6e  f89a0000          LDRB     r0,[r10,#0]           ;295  ; modbus_self_cmnd_cnt
000d72  4282              CMP      r2,r0                 ;295
000d74  d0bb              BEQ      |L1.3310|
000d76  4816              LDR      r0,|L1.3536|
000d78  f9b02000          LDRSH    r2,[r0,#0]            ;297  ; I_ug
000d7c  428a              CMP      r2,r1                 ;297
000d7e  dbe1              BLT      |L1.3396|
000d80  fb92f1f6          SDIV     r1,r2,r6              ;298
000d84  1f49              SUBS     r1,r1,#5              ;298
                  |L1.3462|
000d86  eb010181          ADD      r1,r1,r1,LSL #2       ;298
000d8a  0049              LSLS     r1,r1,#1              ;298
000d8c  8001              STRH     r1,[r0,#0]            ;298
000d8e  e7c5              B        |L1.3356|
                  |L1.3472|
000d90  e027              B        |L1.3554|
                  |L1.3474|
000d92  e02f              B        |L1.3572|
                  |L1.3476|
000d94  e037              B        |L1.3590|
                  |L1.3478|
000d96  e042              B        |L1.3614|
                  |L1.3480|
                          DCD      i
                  |L1.3484|
                          DCD      ||area_number.4||+0x1e
                  |L1.3488|
                          DCD      ||.data||
                  |L1.3492|
                          DCD      I_MAX_IPS
                  |L1.3496|
                          DCD      work_stat
                  |L1.3500|
                          DCD      tumbler_stat
                  |L1.3504|
                          DCD      tumbler_stat_old
                  |L1.3508|
                          DCD      main_cnt
                  |L1.3512|
                          DCD      I_ug_block_cnt
                  |L1.3516|
                          DCD      U_up_block_cnt
                  |L1.3520|
                          DCD      TIME_VISION_PULT
                  |L1.3524|
                          DCD      T_PROC_GS_block_cnt
                  |L1.3528|
                          DCD      T_PROC_PS_block_cnt
                  |L1.3532|
                          DCD      main_menu_mode
                  |L1.3536|
                          DCD      I_ug
                  |L1.3540|
                          DCD      I_MIN_IPS
                  |L1.3544|
000dd8  e040              B        |L1.3676|
                  |L1.3546|
000dda  e089              B        |L1.3824|
                  |L1.3548|
000ddc  e0c5              B        |L1.3946|
                  |L1.3550|
000dde  e0f2              B        |L1.4038|
                  |L1.3552|
000de0  e142              B        |L1.4200|
                  |L1.3554|
000de2  7901              LDRB     r1,[r0,#4]            ;304  ; modbus_cmnd_cnt
000de4  f89a0000          LDRB     r0,[r10,#0]           ;304  ; modbus_self_cmnd_cnt
000de8  4281              CMP      r1,r0                 ;304
000dea  d087              BEQ      |L1.3324|
000dec  48f0              LDR      r0,|L1.4528|
000dee  8801              LDRH     r1,[r0,#0]            ;306  ; U_up
000df0  1c49              ADDS     r1,r1,#1              ;306
000df2  e022              B        |L1.3642|
                  |L1.3572|
000df4  7901              LDRB     r1,[r0,#4]            ;312  ; modbus_cmnd_cnt
000df6  f89a0000          LDRB     r0,[r10,#0]           ;312  ; modbus_self_cmnd_cnt
000dfa  4281              CMP      r1,r0                 ;312
000dfc  d099              BEQ      |L1.3378|
000dfe  48ec              LDR      r0,|L1.4528|
000e00  8801              LDRH     r1,[r0,#0]            ;314  ; U_up
000e02  1e49              SUBS     r1,r1,#1              ;314
000e04  e019              B        |L1.3642|
                  |L1.3590|
000e06  7901              LDRB     r1,[r0,#4]            ;320  ; modbus_cmnd_cnt
000e08  f89a0000          LDRB     r0,[r10,#0]           ;320  ; modbus_self_cmnd_cnt
000e0c  4281              CMP      r1,r0                 ;320
000e0e  d090              BEQ      |L1.3378|
000e10  48e7              LDR      r0,|L1.4528|
000e12  f9b01000          LDRSH    r1,[r0,#0]            ;322  ; U_up
000e16  fb91f1f6          SDIV     r1,r1,r6              ;322
000e1a  1c49              ADDS     r1,r1,#1              ;322
000e1c  e00a              B        |L1.3636|
                  |L1.3614|
000e1e  7901              LDRB     r1,[r0,#4]            ;328  ; modbus_cmnd_cnt
000e20  f89a0000          LDRB     r0,[r10,#0]           ;328  ; modbus_self_cmnd_cnt
000e24  4281              CMP      r1,r0                 ;328
000e26  d084              BEQ      |L1.3378|
000e28  48e1              LDR      r0,|L1.4528|
000e2a  f9b01000          LDRSH    r1,[r0,#0]            ;330  ; U_up
000e2e  fb91f1f6          SDIV     r1,r1,r6              ;330
000e32  1e49              SUBS     r1,r1,#1              ;330
                  |L1.3636|
000e34  eb010181          ADD      r1,r1,r1,LSL #2       ;330
000e38  0049              LSLS     r1,r1,#1              ;330
                  |L1.3642|
000e3a  8001              STRH     r1,[r0,#0]            ;330
000e3c  48dd              LDR      r0,|L1.4532|
000e3e  f9b02000          LDRSH    r2,[r0,#0]            ;331  ; U_MAX
000e42  48dd              LDR      r0,|L1.4536|
000e44  f9b01000          LDRSH    r1,[r0,#0]            ;331  ; U_MIN
000e48  48d9              LDR      r0,|L1.4528|
                  |L1.3658|
000e4a  f7fffffe          BL       gran
000e4e  f8a86000          STRH     r6,[r8,#0]            ;332
000e52  f89a1004          LDRB     r1,[r10,#4]           ;333  ; modbus_cmnd_cnt
000e56  f88a1000          STRB     r1,[r10,#0]           ;333
                  |L1.3674|
000e5a  e13c              B        |L1.4310|
                  |L1.3676|
000e5c  7903              LDRB     r3,[r0,#4]            ;337  ; modbus_cmnd_cnt
000e5e  f890c000          LDRB     r12,[r0,#0]           ;337  ; modbus_self_cmnd_cnt
000e62  4563              CMP      r3,r12                ;337
000e64  d0f9              BEQ      |L1.3674|
000e66  7003              STRB     r3,[r0,#0]            ;339
000e68  f8980000          LDRB     r0,[r8,#0]            ;340  ; main_menu_mode
000e6c  782b              LDRB     r3,[r5,#0]            ;340  ; work_stat
000e6e  ea500c03          ORRS     r12,r0,r3             ;340
000e72  d002              BEQ      |L1.3706|
000e74  2801              CMP      r0,#1                 ;381
000e76  d01b              BEQ      |L1.3760|
000e78  e12d              B        |L1.4310|
                  |L1.3706|
000e7a  8808              LDRH     r0,[r1,#0]            ;342  ; TIME_VISION_PULT
000e7c  2800              CMP      r0,#0                 ;342
000e7e  48cf              LDR      r0,|L1.4540|
000e80  d004              BEQ      |L1.3724|
000e82  6803              LDR      r3,[r0,#0]            ;344  ; T_PROC_GS
000e84  fb93f1f9          SDIV     r1,r3,r9              ;344
000e88  1c49              ADDS     r1,r1,#1              ;344
000e8a  e085              B        |L1.3992|
                  |L1.3724|
000e8c  6801              LDR      r1,[r0,#0]            ;349  ; T_PROC_GS
000e8e  1c49              ADDS     r1,r1,#1              ;349
000e90  e0bd              B        |L1.4110|
                  |L1.3730|
000e92  6001              STR      r1,[r0,#0]            ;366  ; T_PROC_GS
000e94  48ca              LDR      r0,|L1.4544|
000e96  8801              LDRH     r1,[r0,#0]            ;366  ; T_PROC_GS_MODE
000e98  2901              CMP      r1,#1                 ;366
000e9a  d028              BEQ      |L1.3822|
000e9c  2101              MOVS     r1,#1                 ;619
000e9e  e004              B        |L1.3754|
                  |L1.3744|
000ea0  48c7              LDR      r0,|L1.4544|
000ea2  8801              LDRH     r1,[r0,#0]            ;374  ; T_PROC_GS_MODE
000ea4  2900              CMP      r1,#0                 ;374
000ea6  d022              BEQ      |L1.3822|
000ea8  2100              MOVS     r1,#0                 ;637
                  |L1.3754|
000eaa  8001              STRH     r1,[r0,#0]            ;358
000eac  20ee              MOVS     r0,#0xee              ;359
000eae  e01c              B        |L1.3818|
                  |L1.3760|
000eb0  2b00              CMP      r3,#0                 ;381
000eb2  d11c              BNE      |L1.3822|
000eb4  8808              LDRH     r0,[r1,#0]            ;383  ; TIME_VISION_PULT
000eb6  2800              CMP      r0,#0                 ;383
000eb8  48c2              LDR      r0,|L1.4548|
000eba  d004              BEQ      |L1.3782|
000ebc  6802              LDR      r2,[r0,#0]            ;385  ; T_PROC_PS
000ebe  fb92f1f9          SDIV     r1,r2,r9              ;385
000ec2  1c49              ADDS     r1,r1,#1              ;385
000ec4  e078              B        |L1.4024|
                  |L1.3782|
000ec6  6801              LDR      r1,[r0,#0]            ;390  ; T_PROC_PS
000ec8  1c49              ADDS     r1,r1,#1              ;390
                  |L1.3786|
000eca  6001              STR      r1,[r0,#0]            ;390  ; T_PROC_PS
000ecc  e03d              B        |L1.3914|
                  |L1.3790|
000ece  6001              STR      r1,[r0,#0]            ;407  ; T_PROC_PS
000ed0  48bd              LDR      r0,|L1.4552|
000ed2  8801              LDRH     r1,[r0,#0]            ;407  ; T_PROC_PS_MODE
000ed4  2901              CMP      r1,#1                 ;407
000ed6  d00a              BEQ      |L1.3822|
000ed8  2101              MOVS     r1,#1                 ;661
000eda  e004              B        |L1.3814|
                  |L1.3804|
000edc  48ba              LDR      r0,|L1.4552|
000ede  8801              LDRH     r1,[r0,#0]            ;415  ; T_PROC_PS_MODE
000ee0  2900              CMP      r1,#0                 ;415
000ee2  d004              BEQ      |L1.3822|
000ee4  2100              MOVS     r1,#0                 ;679
                  |L1.3814|
000ee6  8001              STRH     r1,[r0,#0]            ;417
000ee8  20f0              MOVS     r0,#0xf0              ;418
                  |L1.3818|
000eea  f7fffffe          BL       lc640_write_int
                  |L1.3822|
000eee  e0f2              B        |L1.4310|
                  |L1.3824|
000ef0  7903              LDRB     r3,[r0,#4]            ;423  ; modbus_cmnd_cnt
000ef2  f890c000          LDRB     r12,[r0,#0]           ;423  ; modbus_self_cmnd_cnt
000ef6  4563              CMP      r3,r12                ;423
000ef8  d008              BEQ      |L1.3852|
000efa  7003              STRB     r3,[r0,#0]            ;425
000efc  f8980000          LDRB     r0,[r8,#0]            ;426  ; main_menu_mode
000f00  782b              LDRB     r3,[r5,#0]            ;426  ; work_stat
000f02  ea500c03          ORRS     r12,r0,r3             ;426
000f06  d002              BEQ      |L1.3854|
000f08  2801              CMP      r0,#1                 ;467
000f0a  d010              BEQ      |L1.3886|
                  |L1.3852|
000f0c  e0e3              B        |L1.4310|
                  |L1.3854|
000f0e  8808              LDRH     r0,[r1,#0]            ;428  ; TIME_VISION_PULT
000f10  2800              CMP      r0,#0                 ;428
000f12  48aa              LDR      r0,|L1.4540|
000f14  d006              BEQ      |L1.3876|
000f16  6803              LDR      r3,[r0,#0]            ;430  ; T_PROC_GS
000f18  f44f7116          MOV      r1,#0x258             ;430
000f1c  fb93f1f1          SDIV     r1,r3,r1              ;430
000f20  1c49              ADDS     r1,r1,#1              ;430
000f22  e069              B        |L1.4088|
                  |L1.3876|
000f24  6801              LDR      r1,[r0,#0]            ;435  ; T_PROC_GS
000f26  fb91f1f6          SDIV     r1,r1,r6              ;435
000f2a  1c49              ADDS     r1,r1,#1              ;435
000f2c  e06c              B        |L1.4104|
                  |L1.3886|
000f2e  bb53              CBNZ     r3,|L1.3974|
000f30  8808              LDRH     r0,[r1,#0]            ;469  ; TIME_VISION_PULT
000f32  b1a0              CBZ      r0,|L1.3934|
000f34  49a3              LDR      r1,|L1.4548|
000f36  f44f7016          MOV      r0,#0x258             ;471
000f3a  680a              LDR      r2,[r1,#0]            ;471  ; T_PROC_PS
000f3c  fb92f0f0          SDIV     r0,r2,r0              ;471
000f40  1c40              ADDS     r0,r0,#1              ;471
000f42  f44f7216          MOV      r2,#0x258             ;471
000f46  4350              MULS     r0,r2,r0              ;471
000f48  6008              STR      r0,[r1,#0]            ;471  ; T_PROC_PS
                  |L1.3914|
000f4a  489e              LDR      r0,|L1.4548|
000f4c  499f              LDR      r1,|L1.4556|
000f4e  f8aa6000          STRH     r6,[r10,#0]           ;477
000f52  6802              LDR      r2,[r0,#0]            ;394  ; T_PROC_PS
000f54  6809              LDR      r1,[r1,#0]            ;394  ; T_PROC_MAX
000f56  428a              CMP      r2,r1                 ;394
000f58  dd78              BLE      |L1.4172|
000f5a  1c49              ADDS     r1,r1,#1              ;658
000f5c  e7b7              B        |L1.3790|
                  |L1.3934|
000f5e  4899              LDR      r0,|L1.4548|
000f60  6801              LDR      r1,[r0,#0]            ;476  ; T_PROC_PS
000f62  fb91f1f6          SDIV     r1,r1,r6              ;476
000f66  1c49              ADDS     r1,r1,#1              ;476
000f68  e075              B        |L1.4182|
                  |L1.3946|
000f6a  7903              LDRB     r3,[r0,#4]            ;510  ; modbus_cmnd_cnt
000f6c  f890c000          LDRB     r12,[r0,#0]           ;510  ; modbus_self_cmnd_cnt
000f70  4563              CMP      r3,r12                ;510
000f72  d008              BEQ      |L1.3974|
000f74  7003              STRB     r3,[r0,#0]            ;512
000f76  f8980000          LDRB     r0,[r8,#0]            ;513  ; main_menu_mode
000f7a  782b              LDRB     r3,[r5,#0]            ;513  ; work_stat
000f7c  ea500c03          ORRS     r12,r0,r3             ;513
000f80  d002              BEQ      |L1.3976|
000f82  2801              CMP      r0,#1                 ;556
000f84  d00f              BEQ      |L1.4006|
                  |L1.3974|
000f86  e0a6              B        |L1.4310|
                  |L1.3976|
000f88  8808              LDRH     r0,[r1,#0]            ;515  ; TIME_VISION_PULT
000f8a  2800              CMP      r0,#0                 ;515
000f8c  488b              LDR      r0,|L1.4540|
000f8e  d007              BEQ      |L1.4000|
000f90  6803              LDR      r3,[r0,#0]            ;517  ; T_PROC_GS
000f92  fb93f1f9          SDIV     r1,r3,r9              ;517
000f96  1e49              SUBS     r1,r1,#1              ;517
                  |L1.3992|
000f98  ebc11101          RSB      r1,r1,r1,LSL #4       ;344
000f9c  0089              LSLS     r1,r1,#2              ;344
000f9e  e036              B        |L1.4110|
                  |L1.4000|
000fa0  6801              LDR      r1,[r0,#0]            ;522  ; T_PROC_GS
000fa2  1e49              SUBS     r1,r1,#1              ;522
000fa4  e033              B        |L1.4110|
                  |L1.4006|
000fa6  bbe3              CBNZ     r3,|L1.4130|
000fa8  8808              LDRH     r0,[r1,#0]            ;558  ; TIME_VISION_PULT
000faa  2800              CMP      r0,#0                 ;558
000fac  4885              LDR      r0,|L1.4548|
000fae  d007              BEQ      |L1.4032|
000fb0  6802              LDR      r2,[r0,#0]            ;560  ; T_PROC_PS
000fb2  fb92f1f9          SDIV     r1,r2,r9              ;560
000fb6  1e49              SUBS     r1,r1,#1              ;560
                  |L1.4024|
000fb8  ebc11101          RSB      r1,r1,r1,LSL #4       ;560
000fbc  0089              LSLS     r1,r1,#2              ;560
000fbe  e784              B        |L1.3786|
                  |L1.4032|
000fc0  6801              LDR      r1,[r0,#0]            ;565  ; T_PROC_PS
000fc2  1e49              SUBS     r1,r1,#1              ;565
000fc4  e781              B        |L1.3786|
                  |L1.4038|
000fc6  7903              LDRB     r3,[r0,#4]            ;598  ; modbus_cmnd_cnt
000fc8  f890c000          LDRB     r12,[r0,#0]           ;598  ; modbus_self_cmnd_cnt
000fcc  4563              CMP      r3,r12                ;598
000fce  d028              BEQ      |L1.4130|
000fd0  7003              STRB     r3,[r0,#0]            ;600
000fd2  f8980000          LDRB     r0,[r8,#0]            ;601  ; main_menu_mode
000fd6  782b              LDRB     r3,[r5,#0]            ;601  ; work_stat
000fd8  ea500c03          ORRS     r12,r0,r3             ;601
000fdc  d002              BEQ      |L1.4068|
000fde  2801              CMP      r0,#1                 ;643
000fe0  d025              BEQ      |L1.4142|
000fe2  e078              B        |L1.4310|
                  |L1.4068|
000fe4  8808              LDRH     r0,[r1,#0]            ;603  ; TIME_VISION_PULT
000fe6  2800              CMP      r0,#0                 ;603
000fe8  4874              LDR      r0,|L1.4540|
000fea  d009              BEQ      |L1.4096|
000fec  6803              LDR      r3,[r0,#0]            ;605  ; T_PROC_GS
000fee  f44f7116          MOV      r1,#0x258             ;605
000ff2  fb93f1f1          SDIV     r1,r3,r1              ;605
000ff6  1e49              SUBS     r1,r1,#1              ;605
                  |L1.4088|
000ff8  f44f7316          MOV      r3,#0x258             ;430
000ffc  4359              MULS     r1,r3,r1              ;430
000ffe  e006              B        |L1.4110|
                  |L1.4096|
001000  6801              LDR      r1,[r0,#0]            ;610  ; T_PROC_GS
001002  fb91f1f6          SDIV     r1,r1,r6              ;610
001006  1e49              SUBS     r1,r1,#1              ;610
                  |L1.4104|
001008  eb010181          ADD      r1,r1,r1,LSL #2       ;435
00100c  0049              LSLS     r1,r1,#1              ;435
                  |L1.4110|
00100e  6001              STR      r1,[r0,#0]            ;611  ; T_PROC_GS
001010  486a              LDR      r0,|L1.4540|
001012  496e              LDR      r1,|L1.4556|
001014  8016              STRH     r6,[r2,#0]            ;611
001016  6802              LDR      r2,[r0,#0]            ;353  ; T_PROC_GS
001018  6809              LDR      r1,[r1,#0]            ;353  ; T_PROC_MAX
00101a  428a              CMP      r2,r1                 ;353
00101c  dd02              BLE      |L1.4132|
00101e  1c49              ADDS     r1,r1,#1              ;616
001020  e737              B        |L1.3730|
                  |L1.4130|
001022  e03b              B        |L1.4252|
                  |L1.4132|
001024  2a1e              CMP      r2,#0x1e              ;624
001026  f6bfaf3b          BGE      |L1.3744|
00102a  211d              MOVS     r1,#0x1d              ;626
00102c  e731              B        |L1.3730|
                  |L1.4142|
00102e  bbab              CBNZ     r3,|L1.4252|
001030  8808              LDRH     r0,[r1,#0]            ;645  ; TIME_VISION_PULT
001032  2800              CMP      r0,#0                 ;645
001034  4863              LDR      r0,|L1.4548|
001036  d00a              BEQ      |L1.4174|
001038  6802              LDR      r2,[r0,#0]            ;647  ; T_PROC_PS
00103a  f44f7116          MOV      r1,#0x258             ;647
00103e  fb92f1f1          SDIV     r1,r2,r1              ;647
001042  1e49              SUBS     r1,r1,#1              ;647
001044  f44f7216          MOV      r2,#0x258             ;647
001048  4351              MULS     r1,r2,r1              ;647
00104a  e73e              B        |L1.3786|
                  |L1.4172|
00104c  e007              B        |L1.4190|
                  |L1.4174|
00104e  6801              LDR      r1,[r0,#0]            ;652  ; T_PROC_PS
001050  fb91f1f6          SDIV     r1,r1,r6              ;652
001054  1e49              SUBS     r1,r1,#1              ;652
                  |L1.4182|
001056  eb010181          ADD      r1,r1,r1,LSL #2       ;476
00105a  0049              LSLS     r1,r1,#1              ;476
00105c  e735              B        |L1.3786|
                  |L1.4190|
00105e  2a1e              CMP      r2,#0x1e              ;666
001060  f6bfaf3c          BGE      |L1.3804|
001064  211d              MOVS     r1,#0x1d              ;668
001066  e732              B        |L1.3790|
                  |L1.4200|
001068  7901              LDRB     r1,[r0,#4]  ; modbus_cmnd_cnt
00106a  7802              LDRB     r2,[r0,#0]  ; modbus_self_cmnd_cnt
00106c  4291              CMP      r1,r2
00106e  d032              BEQ      |L1.4310|
;;;689    					{
;;;690    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;691    					if(tumbler_stat==tsI)
;;;692    						{
;;;693    						if(work_stat!=wsGS)
;;;694    							{
;;;695    							work_stat=wsGS;
;;;696    							time_proc=0;
;;;697    							time_proc_remain=T_PROC_GS;
;;;698    							index_set=0;
001070  4e57              LDR      r6,|L1.4560|
001072  7001              STRB     r1,[r0,#0]            ;690
001074  46f0              MOV      r8,lr                 ;691
001076  f1bc0f00          CMP      r12,#0                ;691
00107a  d114              BNE      |L1.4262|
00107c  7828              LDRB     r0,[r5,#0]            ;693  ; work_stat
00107e  2801              CMP      r0,#1                 ;693
001080  d00d              BEQ      |L1.4254|
001082  2001              MOVS     r0,#1                 ;695
001084  4953              LDR      r1,|L1.4564|
001086  7028              STRB     r0,[r5,#0]            ;695
001088  2000              MOVS     r0,#0                 ;696
00108a  6008              STR      r0,[r1,#0]            ;697  ; time_proc
00108c  494b              LDR      r1,|L1.4540|
00108e  680a              LDR      r2,[r1,#0]            ;697  ; T_PROC_GS
001090  4951              LDR      r1,|L1.4568|
001092  600a              STR      r2,[r1,#0]  ; time_proc_remain
001094  7130              STRB     r0,[r6,#4]
;;;699    							restart_on_GS();
001096  f7fffffe          BL       restart_on_GS
00109a  e004              B        |L1.4262|
                  |L1.4252|
00109c  e016              B        |L1.4300|
                  |L1.4254|
;;;700    							}			
;;;701    						else 
;;;702    							{
;;;703    							work_stat=wsOFF;
00109e  2000              MOVS     r0,#0
0010a0  7028              STRB     r0,[r5,#0]
;;;704    							restart_off();
0010a2  f7fffffe          BL       restart_off
                  |L1.4262|
;;;705    							}
;;;706    						}
;;;707    				
;;;708    					if(tumbler_stat==tsU)
0010a6  f8980000          LDRB     r0,[r8,#0]  ; tumbler_stat
0010aa  2801              CMP      r0,#1
0010ac  d113              BNE      |L1.4310|
;;;709    						{
;;;710    						if(work_stat!=wsPS)
0010ae  7828              LDRB     r0,[r5,#0]  ; work_stat
0010b0  2802              CMP      r0,#2
0010b2  d00c              BEQ      |L1.4302|
;;;711    							{
;;;712    							work_stat=wsPS;
0010b4  2002              MOVS     r0,#2
;;;713    							time_proc=0;
0010b6  4947              LDR      r1,|L1.4564|
0010b8  7028              STRB     r0,[r5,#0]            ;712
0010ba  2000              MOVS     r0,#0
;;;714    							time_proc_remain=T_PROC_PS;
0010bc  6008              STR      r0,[r1,#0]  ; time_proc
0010be  4941              LDR      r1,|L1.4548|
0010c0  680a              LDR      r2,[r1,#0]  ; T_PROC_PS
0010c2  4945              LDR      r1,|L1.4568|
;;;715    							index_set=0;
0010c4  600a              STR      r2,[r1,#0]  ; time_proc_remain
0010c6  7130              STRB     r0,[r6,#4]
;;;716    							restart_on_PS();
0010c8  f7fffffe          BL       restart_on_PS
                  |L1.4300|
0010cc  e003              B        |L1.4310|
                  |L1.4302|
;;;717    							}			
;;;718    						else
;;;719    							{
;;;720    							work_stat=wsOFF;
0010ce  2000              MOVS     r0,#0
0010d0  7028              STRB     r0,[r5,#0]
;;;721    							restart_off();
0010d2  f7fffffe          BL       restart_off
                  |L1.4310|
;;;722    							}
;;;723    						}
;;;724    					}
;;;725    				}
;;;726    			}
;;;727    		}
;;;728    
;;;729    	if(modbus_an_buffer[0]==MODBUS_ADRESS)
0010d6  4841              LDR      r0,|L1.4572|
0010d8  7801              LDRB     r1,[r0,#0]  ; modbus_an_buffer
0010da  4841              LDR      r0,|L1.4576|
0010dc  f9b00000          LDRSH    r0,[r0,#0]  ; MODBUS_ADRESS
0010e0  4281              CMP      r1,r0
0010e2  d15f              BNE      |L1.4516|
;;;730    		{
;;;731    		if(modbus_func==3)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
0010e4  9904              LDR      r1,[sp,#0x10]
0010e6  2903              CMP      r1,#3
0010e8  d050              BEQ      |L1.4492|
;;;732    			{
;;;733    			if((modbus_rx_arg0>=50)&&(modbus_rx_arg0<90)) modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func, modbus_rx_arg0,modbus_rx_arg1, MODBUS_RTU_PROT);
;;;734    			}
;;;735    		else if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ	βυξδξβ
0010ea  2904              CMP      r1,#4
0010ec  d05d              BEQ      |L1.4522|
;;;736    			{
;;;737    			modbus_input_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0, modbus_rx_arg1, MODBUS_RTU_PROT);
;;;738    			}
;;;739    
;;;740    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
0010ee  2906              CMP      r1,#6
0010f0  d158              BNE      |L1.4516|
;;;741    			{
;;;742    			if(modbus_rx_arg0==50)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
0010f2  2f32              CMP      r7,#0x32
0010f4  d05a              BEQ      |L1.4524|
;;;743    				{
;;;744    				I_ug=modbus_rx_arg1;
;;;745    				lc640_write_int(EE_I_UG,I_ug);
;;;746    				}
;;;747    			if(modbus_rx_arg0==51)		//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
0010f6  2f33              CMP      r7,#0x33
0010f8  d059              BEQ      |L1.4526|
;;;748    				{
;;;749    				U_up=modbus_rx_arg1;
;;;750    				lc640_write_int(EE_U_UP,U_up);
;;;751    				}
;;;752    			if(modbus_rx_arg0==52)		//μΰκρθμΰολόνξε νΰοπζενθε δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
0010fa  2f34              CMP      r7,#0x34
0010fc  d07e              BEQ      |L1.4604|
;;;753    				{
;;;754    				U_maxg=modbus_rx_arg1;
;;;755    				lc640_write_int(EE_U_MAX_G,U_maxg);
;;;756    				}
;;;757    			if(modbus_rx_arg0==53)		//μΰκρθμΰλόνϋι ςξκ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
0010fe  2f35              CMP      r7,#0x35
001100  d07d              BEQ      |L1.4606|
;;;758    				{
;;;759    				I_maxp=modbus_rx_arg1;
;;;760    				lc640_write_int(EE_I_MAX_P,I_maxp);
;;;761    				}								
;;;762    			if(modbus_rx_arg0==54)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.ρεκσνδϋ
;;;763    				{
;;;764    				signed long sec,min,hour;
;;;765    				sec=(signed long)modbus_rx_arg1;
;;;766    				min=(T_PROC_GS/60L)%60L;
;;;767    				hour=T_PROC_GS/3600L;
001102  f44f6061          MOV      r0,#0xe10
001106  2f36              CMP      r7,#0x36              ;762
001108  d07a              BEQ      |L1.4608|
;;;768    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;769    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;770    				}
;;;771    			if(modbus_rx_arg0==55)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.μθνσςϋ
00110a  2f37              CMP      r7,#0x37
00110c  d079              BEQ      |L1.4610|
;;;772    				{
;;;773    				signed long sec,min,hour;
;;;774    				sec=T_PROC_GS%60L;
;;;775    				min=(signed long)modbus_rx_arg1;
;;;776    				hour=T_PROC_GS/3600L;
;;;777    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;778    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;779    				}
;;;780    			if(modbus_rx_arg0==56)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.χΰρϋ
00110e  2f38              CMP      r7,#0x38
001110  d078              BEQ      |L1.4612|
;;;781    				{
;;;782    				signed long sec,min,hour;
;;;783    				sec=T_PROC_GS%60L;
;;;784    				min=(T_PROC_GS/60L)%60L;
;;;785    				hour=(signed long)modbus_rx_arg1;
;;;786    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;787    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;788    				}
;;;789    			if(modbus_rx_arg0==57)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.ρεκσνδϋ
001112  2f39              CMP      r7,#0x39
001114  d077              BEQ      |L1.4614|
;;;790    				{
;;;791    				signed long sec,min,hour;
;;;792    				sec=(signed long)modbus_rx_arg1;
;;;793    				min=(T_PROC_PS/60L)%60L;
;;;794    				hour=T_PROC_PS/3600L;
;;;795    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;796    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;797    				}
;;;798    
;;;799    			if(modbus_rx_arg0==58)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.μθνσςϋ
001116  2f3a              CMP      r7,#0x3a
001118  d076              BEQ      |L1.4616|
;;;800    				{
;;;801    				signed long sec,min,hour;
;;;802    				sec=T_PROC_PS%60L;
;;;803    				min=(signed long)modbus_rx_arg1;
;;;804    				hour=T_PROC_PS/3600L;
;;;805    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;806    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;807    				}
;;;808    
;;;809    			if(modbus_rx_arg0==59)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.χΰρϋ
00111a  2f3b              CMP      r7,#0x3b
00111c  d075              BEQ      |L1.4618|
;;;810    				{
;;;811    				signed long sec,min,hour;
;;;812    				sec=T_PROC_PS%60L;
;;;813    				min=(T_PROC_PS/60L)%60L;
;;;814    				hour=(signed long)modbus_rx_arg1;
;;;815    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;816    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;817    				}
;;;818    
;;;819    			if(modbus_rx_arg0==60)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
00111e  2f3c              CMP      r7,#0x3c
001120  d074              BEQ      |L1.4620|
;;;820    				{
;;;821    				if(modbus_rx_arg1==1)
;;;822    					{
;;;823    					if(work_stat!=wsPS)
;;;824    						{
;;;825    						work_stat=wsPS;
;;;826    						time_proc=0;
;;;827    						time_proc_remain=T_PROC_PS;
;;;828    						restart_on_PS();
;;;829    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;830    						}
;;;831    					}
;;;832    				if(modbus_rx_arg1==0)
;;;833    					{
;;;834    					if(work_stat==wsPS)
;;;835    						{
;;;836    						work_stat=wsOFF;
;;;837    						restart_off();
;;;838    						}
;;;839    					}
;;;840    				}
;;;841    			if(modbus_rx_arg0==61)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
001122  2f3d              CMP      r7,#0x3d
001124  d073              BEQ      |L1.4622|
;;;842    				{
;;;843    				if(modbus_rx_arg1==1)
;;;844    					{
;;;845    					if(work_stat!=wsGS)
;;;846    						{
;;;847    						work_stat=wsGS;
;;;848    						time_proc=0;
;;;849    						time_proc_remain=T_PROC_GS;
;;;850    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;851    						}
;;;852    					}
;;;853    				if(modbus_rx_arg1==0)
;;;854    					{
;;;855    					if(work_stat==wsGS)
;;;856    						{
;;;857    						work_stat=wsOFF;
;;;858    						restart_off();
;;;859    						}
;;;860    					}
;;;861    				}
;;;862    
;;;863    			if(modbus_rx_arg0==62)		//οεπεκλώχενθε πελε πεβεπρΰ
001126  2f3e              CMP      r7,#0x3e
001128  d072              BEQ      |L1.4624|
;;;864    				{
;;;865    					{
;;;866    					if(work_stat==wsOFF)
;;;867    						{
;;;868    						if(modbus_rx_arg1==0)REV_STAT=rsFF;
;;;869    						if(modbus_rx_arg1==1)REV_STAT=rsREW;
;;;870    						}
;;;871    					}
;;;872    				}
;;;873    			if(modbus_rx_arg0==63)		//βκλώχενθε-βϋκλώχενθε ΰβςξπεβεπρΰ
00112a  2f3f              CMP      r7,#0x3f
00112c  d071              BEQ      |L1.4626|
;;;874    				{
;;;875    					{
;;;876    					if((work_stat==wsOFF)&&(REV_IS_ON))
;;;877    						{
;;;878    						if(modbus_rx_arg1==1)AVT_REV_IS_ON=1;
;;;879    						if(modbus_rx_arg1==0)AVT_REV_IS_ON=0;
;;;880    						lc640_write_int(EE_AVT_REV_IS_ON,AVT_REV_IS_ON);
;;;881    						}
;;;882    					}
;;;883    				}
;;;884    			if(modbus_rx_arg0==64)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ οπμξε, ρεκ
00112e  2f40              CMP      r7,#0x40
001130  d070              BEQ      |L1.4628|
;;;885    				{
;;;886    				if(work_stat==wsOFF)
;;;887    					{
;;;888    					AVT_REV_TIME_FF=modbus_rx_arg1;
;;;889    					gran(&AVT_REV_TIME_FF,30,T_PROC_MAX);
;;;890    					lc640_write_int(EE_AVT_REV_TIME_FF,AVT_REV_TIME_FF);	
;;;891    					}
;;;892    				}
;;;893    			if(modbus_rx_arg0==65)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ ξαπΰςνξε, ρεκ
001132  2f41              CMP      r7,#0x41
001134  d06f              BEQ      |L1.4630|
;;;894    				{
;;;895    				if(work_stat==wsOFF)
;;;896    					{
;;;897    					AVT_REV_TIME_REW=modbus_rx_arg1;
;;;898    					gran(&AVT_REV_TIME_REW,30,T_PROC_MAX);
;;;899    					lc640_write_int(EE_AVT_REV_TIME_REW,AVT_REV_TIME_REW);	
;;;900    					}
;;;901    				}
;;;902    			if(modbus_rx_arg0==66)		//ΐβςξπεβεπρ, βπεμ οΰσηϋ οπθ οεπεκλώχενθθ, ρεκ
001136  2f42              CMP      r7,#0x42
001138  d06e              BEQ      |L1.4632|
;;;903    				{
;;;904    				if(work_stat==wsOFF)
;;;905    					{
;;;906    					AVT_REV_TIME_PAUSE=modbus_rx_arg1;
;;;907    					gran(&AVT_REV_TIME_PAUSE,2,600);
;;;908    					lc640_write_int(EE_AVT_REV_TIME_PAUSE,AVT_REV_TIME_PAUSE);	
;;;909    					}
;;;910    				}
;;;911    
;;;912    			if(modbus_rx_arg0==67)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ οπμξι, 0.1ΐ
00113a  2f43              CMP      r7,#0x43
00113c  d06d              BEQ      |L1.4634|
;;;913    				{
;;;914    				if(work_stat==wsOFF)
;;;915    					{
;;;916    					AVT_REV_I_NOM_FF=modbus_rx_arg1;
;;;917    		    			gran(&AVT_REV_I_NOM_FF,I_MIN_IPS,I_MAX_IPS);
;;;918    					lc640_write_int(EE_AVT_REV_I_NOM_FF,AVT_REV_I_NOM_FF);	
;;;919    					}
;;;920    				}
;;;921    
;;;922    			if(modbus_rx_arg0==68)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ ξαπΰςνϋι, 0.1ΐ
00113e  2f44              CMP      r7,#0x44
001140  d06c              BEQ      |L1.4636|
;;;923    				{
;;;924    				if(work_stat==wsOFF)
;;;925    					{
;;;926    					AVT_REV_I_NOM_REW=modbus_rx_arg1;
;;;927    		    			gran(&AVT_REV_I_NOM_REW,I_MIN_IPS,I_MAX_IPS);
;;;928    					lc640_write_int(EE_AVT_REV_I_NOM_REW,AVT_REV_I_NOM_REW);	
;;;929    					}
;;;930    				}
;;;931    			if(modbus_rx_arg0==69)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ οπμξε, 0.1Β 
001142  2f45              CMP      r7,#0x45
001144  d06b              BEQ      |L1.4638|
;;;932    				{
;;;933    				if(work_stat==wsOFF)
;;;934    					{
;;;935    					AVT_REV_U_NOM_FF=modbus_rx_arg1;
;;;936    		    			gran(&AVT_REV_U_NOM_FF,U_MIN,U_MAX);
;;;937    					lc640_write_int(EE_AVT_REV_U_NOM_FF,AVT_REV_U_NOM_FF);					
;;;938    					}
;;;939    				}
;;;940    
;;;941    			if(modbus_rx_arg0==70)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ ξαπΰςνξε, 0.1Β
001146  2f46              CMP      r7,#0x46
001148  d06a              BEQ      |L1.4640|
;;;942    				{
;;;943    				if(work_stat==wsOFF)
;;;944    					{
;;;945    					AVT_REV_U_NOM_REW=modbus_rx_arg1;
;;;946    		    			gran(&AVT_REV_U_NOM_REW,U_MIN,U_MAX);
;;;947    					lc640_write_int(EE_AVT_REV_U_NOM_REW,AVT_REV_U_NOM_REW);					
;;;948    					}
;;;949    				}
;;;950    
;;;951    			if(modbus_rx_arg0==71)		//Βπεμ ηΰπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;952    				{
;;;953    				if(work_stat==wsOFF)
;;;954    					{
;;;955    					CAP_ZAR_TIME=modbus_rx_arg1;
00114a  4e26              LDR      r6,|L1.4580|
;;;956    		    			gran(&CAP_ZAR_TIME,10,9999);
00114c  f242720f          MOV      r2,#0x270f
001150  2f47              CMP      r7,#0x47              ;951
001152  d06f              BEQ      |L1.4660|
;;;957    					lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;958    					}
;;;959    				}
;;;960    			if(modbus_rx_arg0==72)		//Βπεμ οΰσηϋ1 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;961    				{
;;;962    				if(work_stat==wsOFF)
;;;963    					{
;;;964    					CAP_PAUSE1_TIME=modbus_rx_arg1;
001154  f8df8090          LDR      r8,|L1.4584|
001158  2f48              CMP      r7,#0x48              ;960
00115a  d06c              BEQ      |L1.4662|
;;;965    		    			gran(&CAP_PAUSE1_TIME,10,9999);
;;;966    					lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;967    					}
;;;968    				}
;;;969    			if(modbus_rx_arg0==73)		//Βπεμ πΰηπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;970    				{
;;;971    				if(work_stat==wsOFF)
;;;972    					{
;;;973    					CAP_RAZR_TIME=modbus_rx_arg1;
00115c  f8df908c          LDR      r9,|L1.4588|
001160  2f49              CMP      r7,#0x49              ;969
001162  d069              BEQ      |L1.4664|
;;;974    		    			gran(&CAP_RAZR_TIME,10,9999);
;;;975    					lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;976    					}
;;;977    				}
;;;978    			if(modbus_rx_arg0==74)		//Βπεμ οΰσηϋ2 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;979    				{
;;;980    				if(work_stat==wsOFF)
;;;981    					{
;;;982    					CAP_PAUSE2_TIME=modbus_rx_arg1;
001164  4922              LDR      r1,|L1.4592|
001166  2f4a              CMP      r7,#0x4a              ;978
001168  d067              BEQ      |L1.4666|
;;;983    		    			gran(&CAP_PAUSE2_TIME,10,9999);
;;;984    					lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;985    					}
;;;986    				}
;;;987    
;;;988    			if(modbus_rx_arg0==75)		//Μΰκρθμΰλόνξε νΰοπζενθε θροϋςΰςελόνξγξ φθκλΰ, 1Β  
;;;989    				{
;;;990    				if(work_stat==wsOFF)
;;;991    					{
;;;992    					CAP_MAX_VOLT=modbus_rx_arg1;
00116a  f8dfa088          LDR      r10,|L1.4596|
00116e  2f4b              CMP      r7,#0x4b              ;988
001170  d073              BEQ      |L1.4698|
;;;993    		    			gran(&CAP_MAX_VOLT,1,100);
;;;994    					lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;995    					}
;;;996    				}
;;;997    			if(modbus_rx_arg0==76)		//Πΰαξχθι ςξκ θροϋςΰςελόνξγξ φθκλΰ, 1ΐ 
;;;998    				{
;;;999    				if(work_stat==wsOFF)
;;;1000   					{
;;;1001   					CAP_WRK_CURR=modbus_rx_arg1;
001172  f8dfb084          LDR      r11,|L1.4600|
001176  2f4c              CMP      r7,#0x4c              ;997
001178  d070              BEQ      |L1.4700|
;;;1002   		    			gran(&CAP_WRK_CURR,1,150);
;;;1003   					lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1004   					}
;;;1005   				}
;;;1006   
;;;1007   			if(modbus_rx_arg0==77)		//Πεγθρςπ δλ ηΰοθρθ κξμΰνδ 
00117a  2f4d              CMP      r7,#0x4d
00117c  d06f              BEQ      |L1.4702|
;;;1008   				{
;;;1009   				if(modbus_rx_arg1==0x11)
;;;1010   					{
;;;1011   					start_CAP();
;;;1012   					}
;;;1013   				if(modbus_rx_arg1==0x12)
;;;1014   					{
;;;1015   					pause_CAP();
;;;1016   					}
;;;1017   				if(modbus_rx_arg1==0x13)
;;;1018   					{
;;;1019   					stop_CAP();
;;;1020   					}
;;;1021   				if(modbus_rx_arg1==0x14)
;;;1022   					{
;;;1023   					reset_CAP();
;;;1024   					}
;;;1025   
;;;1026   				if(modbus_rx_arg1==0x21)
;;;1027   					{
;;;1028   					if(work_stat==wsOFF)
;;;1029   						{
;;;1030   						CAP_ZAR_TIME++;
;;;1031   		    				gran(&CAP_ZAR_TIME,10,9999);
;;;1032   						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;1033   						}
;;;1034   					}
;;;1035   				if(modbus_rx_arg1==0x22)
;;;1036   					{
;;;1037   					if(work_stat==wsOFF)
;;;1038   						{
;;;1039   						CAP_ZAR_TIME--;
;;;1040   		    				gran(&CAP_ZAR_TIME,10,9999);
;;;1041   						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;1042   						}
;;;1043   					}
;;;1044   
;;;1045   				if(modbus_rx_arg1==0x31)
;;;1046   					{
;;;1047   					if(work_stat==wsOFF)
;;;1048   						{
;;;1049   						CAP_PAUSE1_TIME++;
;;;1050   		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;1051   						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;1052   						}
;;;1053   					}
;;;1054   				if(modbus_rx_arg1==0x32)
;;;1055   					{
;;;1056   					if(work_stat==wsOFF)
;;;1057   						{
;;;1058   						CAP_PAUSE1_TIME--;
;;;1059   		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;1060   						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;1061   						}
;;;1062   					}
;;;1063   
;;;1064   				if(modbus_rx_arg1==0x41)
;;;1065   					{
;;;1066   					if(work_stat==wsOFF)
;;;1067   						{
;;;1068   						CAP_RAZR_TIME++;
;;;1069   		    				gran(&CAP_RAZR_TIME,10,9999);
;;;1070   						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;1071   						}
;;;1072   					}
;;;1073   				if(modbus_rx_arg1==0x42)
;;;1074   					{
;;;1075   					if(work_stat==wsOFF)
;;;1076   						{
;;;1077   						CAP_RAZR_TIME--;
;;;1078   		    				gran(&CAP_RAZR_TIME,10,9999);
;;;1079   						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;1080   						}
;;;1081   					}
;;;1082   
;;;1083   				if(modbus_rx_arg1==0x51)
;;;1084   					{
;;;1085   					if(work_stat==wsOFF)
;;;1086   						{
;;;1087   						CAP_PAUSE2_TIME++;
;;;1088   		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;1089   						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;1090   						}
;;;1091   					}
;;;1092   				if(modbus_rx_arg1==0x52)
;;;1093   					{
;;;1094   					if(work_stat==wsOFF)
;;;1095   						{
;;;1096   						CAP_PAUSE2_TIME--;
;;;1097   		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;1098   						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;1099   						}
;;;1100   					}
;;;1101   
;;;1102   				if(modbus_rx_arg1==0x61)
;;;1103   					{
;;;1104   					if(work_stat==wsOFF)
;;;1105   						{
;;;1106   						CAP_MAX_VOLT++;
;;;1107   		    				gran(&CAP_MAX_VOLT,1,100);
;;;1108   						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;1109   						}
;;;1110   					}
;;;1111   				if(modbus_rx_arg1==0x62)
;;;1112   					{
;;;1113   					if(work_stat==wsOFF)
;;;1114   						{
;;;1115   						CAP_MAX_VOLT--;
;;;1116   		    				gran(&CAP_MAX_VOLT,1,100);
;;;1117   						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;1118   						}
;;;1119   					}
;;;1120   
;;;1121   				if(modbus_rx_arg1==0x71)
;;;1122   					{
;;;1123   					if(work_stat==wsOFF)
;;;1124   						{
;;;1125   						CAP_WRK_CURR++;
;;;1126   		    				gran(&CAP_WRK_CURR,1,150);
;;;1127   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1128   						}
;;;1129   					}
;;;1130   				if(modbus_rx_arg1==0x72)
;;;1131   					{
;;;1132   					if(work_stat==wsOFF)
;;;1133   						{
;;;1134   						CAP_WRK_CURR--;
;;;1135   		    				gran(&CAP_WRK_CURR,1,150);
;;;1136   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1137   						}
;;;1138   					}
;;;1139   
;;;1140   				}
;;;1141   
;;;1142   			if(modbus_rx_arg0==80)		//Ψθμ νΰοπζενθ β πεζθμε νεοξρπεδρςβεννξγξ σοπΰβλενθ 
00117e  2f50              CMP      r7,#0x50
001180  d06e              BEQ      |L1.4704|
;;;1143   				{
;;;1144   				pwm_u_reg = modbus_rx_arg1;
;;;1145   				}
;;;1146   
;;;1147   			if(modbus_rx_arg0==81)		//Ψθμ ςξκΰ β πεζθμε νεοξρπεδρςβεννξγξ σοπΰβλενθ 
001182  2f51              CMP      r7,#0x51
001184  d06d              BEQ      |L1.4706|
;;;1148   				{
;;;1149   				pwm_i_reg = modbus_rx_arg1;
;;;1150   				}
;;;1151   
;;;1152   			if(modbus_rx_arg0==82)		//Πεγθρςπ βπεμενθ β πεζθμε νεοξρπεδρςβεννξγξ σοπΰβλενθ 
001186  2f52              CMP      r7,#0x52
001188  d06c              BEQ      |L1.4708|
00118a  e2d0              B        |L1.5934|
                  |L1.4492|
00118c  f1a70132          SUB      r1,r7,#0x32           ;733
001190  2928              CMP      r1,#0x28              ;733
001192  d207              BCS      |L1.4516|
001194  2100              MOVS     r1,#0                 ;733
001196  9100              STR      r1,[sp,#0]            ;733
001198  4623              MOV      r3,r4                 ;733
00119a  463a              MOV      r2,r7                 ;733
00119c  b2c0              UXTB     r0,r0                 ;733
00119e  9904              LDR      r1,[sp,#0x10]         ;733
0011a0  f7fffffe          BL       modbus_hold_registers_transmit
                  |L1.4516|
;;;1153   				{
;;;1154   				pwm_t_reg = modbus_rx_arg1*10;
;;;1155   				}
;;;1156   											
;;;1157   			if((T_PROC_GS>T_PROC_MAX)||(T_PROC_GS<30))
;;;1158   				{
;;;1159   				if(T_PROC_GS>T_PROC_MAX)T_PROC_GS=T_PROC_MAX+1;
;;;1160   				else if(T_PROC_GS<30)T_PROC_GS=29;
;;;1161   				lc640_write_int(EE_T_PROC_GS,T_PROC_GS);
;;;1162   				T_PROC_GS_MODE=1;	
;;;1163   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1164   				}
;;;1165   			if((T_PROC_GS<=T_PROC_MAX)&&(T_PROC_GS>=30))
;;;1166   				{
;;;1167   				T_PROC_GS_MODE=0;	
;;;1168   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1169   				}
;;;1170   			
;;;1171   			if((T_PROC_PS>T_PROC_MAX)||(T_PROC_PS<30))
;;;1172   				{
;;;1173   				if(T_PROC_PS>T_PROC_MAX)T_PROC_PS=T_PROC_MAX+1;
;;;1174   				else if(T_PROC_PS<30)T_PROC_PS=29;
;;;1175   				lc640_write_int(EE_T_PROC_PS,T_PROC_PS);
;;;1176   				T_PROC_PS_MODE=1;	
;;;1177   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1178   				}
;;;1179   			if((T_PROC_PS<=T_PROC_MAX)&&(T_PROC_PS>=30))
;;;1180   				{
;;;1181   				T_PROC_PS_MODE=0;	
;;;1182   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1183   				}
;;;1184   
;;;1185   			modbus_hold_register_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0);
;;;1186   
;;;1187   
;;;1188   			//modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,2);
;;;1189   
;;;1190   
;;;1191   			}
;;;1192   		} 
;;;1193   	//;
;;;1194   	}
;;;1195   // modbus_plazma++;
;;;1196   
;;;1197   }
0011a4  b00b              ADD      sp,sp,#0x2c
0011a6  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.4522|
0011aa  e03a              B        |L1.4642|
                  |L1.4524|
0011ac  e046              B        |L1.4668|
                  |L1.4526|
0011ae  e04a              B        |L1.4678|
                  |L1.4528|
                          DCD      U_up
                  |L1.4532|
                          DCD      U_MAX
                  |L1.4536|
                          DCD      U_MIN
                  |L1.4540|
                          DCD      T_PROC_GS
                  |L1.4544|
                          DCD      T_PROC_GS_MODE
                  |L1.4548|
                          DCD      T_PROC_PS
                  |L1.4552|
                          DCD      T_PROC_PS_MODE
                  |L1.4556|
                          DCD      T_PROC_MAX
                  |L1.4560|
                          DCD      a_ind
                  |L1.4564|
                          DCD      time_proc
                  |L1.4568|
                          DCD      time_proc_remain
                  |L1.4572|
                          DCD      ||area_number.4||+0x1e
                  |L1.4576|
                          DCD      MODBUS_ADRESS
                  |L1.4580|
                          DCD      CAP_ZAR_TIME
                  |L1.4584|
                          DCD      CAP_PAUSE1_TIME
                  |L1.4588|
                          DCD      CAP_RAZR_TIME
                  |L1.4592|
                          DCD      CAP_PAUSE2_TIME
                  |L1.4596|
                          DCD      CAP_MAX_VOLT
                  |L1.4600|
                          DCD      CAP_WRK_CURR
                  |L1.4604|
0011fc  e028              B        |L1.4688|
                  |L1.4606|
0011fe  e032              B        |L1.4710|
                  |L1.4608|
001200  e036              B        |L1.4720|
                  |L1.4610|
001202  e049              B        |L1.4760|
                  |L1.4612|
001204  e05b              B        |L1.4798|
                  |L1.4614|
001206  e06f              B        |L1.4840|
                  |L1.4616|
001208  e082              B        |L1.4880|
                  |L1.4618|
00120a  e091              B        |L1.4912|
                  |L1.4620|
00120c  e0a8              B        |L1.4960|
                  |L1.4622|
00120e  e0bf              B        |L1.5008|
                  |L1.4624|
001210  e0d9              B        |L1.5062|
                  |L1.4626|
001212  e0e5              B        |L1.5088|
                  |L1.4628|
001214  e0f7              B        |L1.5126|
                  |L1.4630|
001216  e106              B        |L1.5158|
                  |L1.4632|
001218  e116              B        |L1.5192|
                  |L1.4634|
00121a  e124              B        |L1.5222|
                  |L1.4636|
00121c  e134              B        |L1.5256|
                  |L1.4638|
00121e  e144              B        |L1.5290|
                  |L1.4640|
001220  e157              B        |L1.5330|
                  |L1.4642|
001222  2100              MOVS     r1,#0                 ;737
001224  9100              STR      r1,[sp,#0]            ;737
001226  4623              MOV      r3,r4                 ;737
001228  463a              MOV      r2,r7                 ;737
00122a  b2c0              UXTB     r0,r0                 ;737
00122c  9904              LDR      r1,[sp,#0x10]         ;737
00122e  f7fffffe          BL       modbus_input_registers_transmit
001232  e7b7              B        |L1.4516|
                  |L1.4660|
001234  e15f              B        |L1.5366|
                  |L1.4662|
001236  e162              B        |L1.5374|
                  |L1.4664|
001238  e166              B        |L1.5384|
                  |L1.4666|
00123a  e16a              B        |L1.5394|
                  |L1.4668|
00123c  48f9              LDR      r0,|L1.5668|
00123e  b221              SXTH     r1,r4                 ;744
001240  8001              STRH     r1,[r0,#0]            ;744
001242  2020              MOVS     r0,#0x20              ;745
001244  e25e              B        |L1.5892|
                  |L1.4678|
001246  48f8              LDR      r0,|L1.5672|
001248  b221              SXTH     r1,r4                 ;749
00124a  8001              STRH     r1,[r0,#0]            ;749
00124c  2022              MOVS     r0,#0x22              ;750
00124e  e259              B        |L1.5892|
                  |L1.4688|
001250  48f6              LDR      r0,|L1.5676|
001252  b221              SXTH     r1,r4                 ;754
001254  8001              STRH     r1,[r0,#0]            ;754
001256  2076              MOVS     r0,#0x76              ;755
001258  e254              B        |L1.5892|
                  |L1.4698|
00125a  e165              B        |L1.5416|
                  |L1.4700|
00125c  e169              B        |L1.5426|
                  |L1.4702|
00125e  e16e              B        |L1.5438|
                  |L1.4704|
001260  e25b              B        |L1.5914|
                  |L1.4706|
001262  e25c              B        |L1.5918|
                  |L1.4708|
001264  e25e              B        |L1.5924|
                  |L1.4710|
001266  48f2              LDR      r0,|L1.5680|
001268  b221              SXTH     r1,r4                 ;759
00126a  8001              STRH     r1,[r0,#0]            ;759
00126c  2078              MOVS     r0,#0x78              ;760
00126e  e249              B        |L1.5892|
                  |L1.4720|
001270  4af0              LDR      r2,|L1.5684|
001272  4649              MOV      r1,r9                 ;766
001274  6813              LDR      r3,[r2,#0]            ;766  ; T_PROC_GS
001276  fb93f5f1          SDIV     r5,r3,r1              ;766
00127a  fb95f6f9          SDIV     r6,r5,r9              ;766
00127e  fb93f0f0          SDIV     r0,r3,r0              ;767
001282  fb095116          MLS      r1,r9,r6,r5           ;766
001286  f44f6361          MOV      r3,#0xe10             ;768
00128a  4358              MULS     r0,r3,r0              ;768
00128c  ebc11101          RSB      r1,r1,r1,LSL #4       ;768
001290  eb000081          ADD      r0,r0,r1,LSL #2       ;768
001294  1901              ADDS     r1,r0,r4              ;768
001296  e00f              B        |L1.4792|
                  |L1.4760|
001298  4ae6              LDR      r2,|L1.5684|
00129a  6813              LDR      r3,[r2,#0]            ;774  ; T_PROC_GS
00129c  fb93f5f9          SDIV     r5,r3,r9              ;774
0012a0  fb93f0f0          SDIV     r0,r3,r0              ;776
0012a4  fb093115          MLS      r1,r9,r5,r3           ;774
0012a8  f44f6361          MOV      r3,#0xe10             ;777
0012ac  4358              MULS     r0,r3,r0              ;777
0012ae  ebc41304          RSB      r3,r4,r4,LSL #4       ;777
0012b2  eb000083          ADD      r0,r0,r3,LSL #2       ;777
0012b6  4401              ADD      r1,r1,r0              ;777
                  |L1.4792|
0012b8  6011              STR      r1,[r2,#0]            ;768  ; T_PROC_GS
                  |L1.4794|
0012ba  20d8              MOVS     r0,#0xd8              ;769
0012bc  e04d              B        |L1.4954|
                  |L1.4798|
0012be  48dd              LDR      r0,|L1.5684|
0012c0  464b              MOV      r3,r9                 ;783
0012c2  6802              LDR      r2,[r0,#0]            ;783  ; T_PROC_GS
0012c4  fb92f1f3          SDIV     r1,r2,r3              ;783
0012c8  fb91f5f9          SDIV     r5,r1,r9              ;784
0012cc  fb092211          MLS      r2,r9,r1,r2           ;783
0012d0  fb091115          MLS      r1,r9,r5,r1           ;784
0012d4  f44f6361          MOV      r3,#0xe10             ;786
0012d8  435c              MULS     r4,r3,r4              ;786
0012da  ebc11101          RSB      r1,r1,r1,LSL #4       ;786
0012de  eb040181          ADD      r1,r4,r1,LSL #2       ;786
0012e2  4411              ADD      r1,r1,r2              ;786
0012e4  6001              STR      r1,[r0,#0]            ;788  ; T_PROC_GS
0012e6  e7e8              B        |L1.4794|
                  |L1.4840|
0012e8  4ad3              LDR      r2,|L1.5688|
0012ea  4649              MOV      r1,r9                 ;793
0012ec  6813              LDR      r3,[r2,#0]            ;793  ; T_PROC_PS
0012ee  fb93f5f1          SDIV     r5,r3,r1              ;793
0012f2  fb95f6f9          SDIV     r6,r5,r9              ;793
0012f6  fb93f0f0          SDIV     r0,r3,r0              ;794
0012fa  fb095116          MLS      r1,r9,r6,r5           ;793
0012fe  f44f6361          MOV      r3,#0xe10             ;795
001302  4358              MULS     r0,r3,r0              ;795
001304  ebc11101          RSB      r1,r1,r1,LSL #4       ;795
001308  eb000081          ADD      r0,r0,r1,LSL #2       ;795
00130c  1901              ADDS     r1,r0,r4              ;795
00130e  e022              B        |L1.4950|
                  |L1.4880|
001310  4ac9              LDR      r2,|L1.5688|
001312  6813              LDR      r3,[r2,#0]            ;802  ; T_PROC_PS
001314  fb93f5f9          SDIV     r5,r3,r9              ;802
001318  fb93f0f0          SDIV     r0,r3,r0              ;804
00131c  fb093115          MLS      r1,r9,r5,r3           ;802
001320  f44f6361          MOV      r3,#0xe10             ;805
001324  4358              MULS     r0,r3,r0              ;805
001326  ebc41304          RSB      r3,r4,r4,LSL #4       ;805
00132a  eb000083          ADD      r0,r0,r3,LSL #2       ;805
00132e  e011              B        |L1.4948|
                  |L1.4912|
001330  4ac1              LDR      r2,|L1.5688|
001332  4648              MOV      r0,r9                 ;812
001334  6811              LDR      r1,[r2,#0]            ;812  ; T_PROC_PS
001336  fb91f3f0          SDIV     r3,r1,r0              ;812
00133a  fb93f5f9          SDIV     r5,r3,r9              ;813
00133e  fb093015          MLS      r0,r9,r5,r3           ;813
001342  fb091113          MLS      r1,r9,r3,r1           ;812
001346  f44f6361          MOV      r3,#0xe10             ;815
00134a  435c              MULS     r4,r3,r4              ;815
00134c  ebc01000          RSB      r0,r0,r0,LSL #4       ;815
001350  eb040080          ADD      r0,r4,r0,LSL #2       ;815
                  |L1.4948|
001354  4401              ADD      r1,r1,r0              ;815
                  |L1.4950|
001356  20dc              MOVS     r0,#0xdc              ;816
001358  6011              STR      r1,[r2,#0]            ;816  ; T_PROC_PS
                  |L1.4954|
00135a  f7fffffe          BL       lc640_write_long
00135e  e1e6              B        |L1.5934|
                  |L1.4960|
001360  2c01              CMP      r4,#1                 ;821
001362  d001              BEQ      |L1.4968|
001364  b184              CBZ      r4,|L1.5000|
001366  e1e2              B        |L1.5934|
                  |L1.4968|
001368  7828              LDRB     r0,[r5,#0]            ;823  ; work_stat
00136a  2802              CMP      r0,#2                 ;823
00136c  d00f              BEQ      |L1.5006|
00136e  2002              MOVS     r0,#2                 ;825
001370  49b2              LDR      r1,|L1.5692|
001372  7028              STRB     r0,[r5,#0]            ;825
001374  2000              MOVS     r0,#0                 ;826
001376  6008              STR      r0,[r1,#0]            ;827  ; time_proc
001378  48af              LDR      r0,|L1.5688|
00137a  6801              LDR      r1,[r0,#0]            ;827  ; T_PROC_PS
00137c  48b0              LDR      r0,|L1.5696|
00137e  6001              STR      r1,[r0,#0]            ;828  ; time_proc_remain
001380  f7fffffe          BL       restart_on_PS
001384  2101              MOVS     r1,#1                 ;829
001386  e014              B        |L1.5042|
                  |L1.5000|
001388  7828              LDRB     r0,[r5,#0]            ;834  ; work_stat
00138a  2802              CMP      r0,#2                 ;834
00138c  d016              BEQ      |L1.5052|
                  |L1.5006|
00138e  e1ce              B        |L1.5934|
                  |L1.5008|
001390  2c01              CMP      r4,#1                 ;843
001392  d001              BEQ      |L1.5016|
001394  b17c              CBZ      r4,|L1.5046|
001396  e1ca              B        |L1.5934|
                  |L1.5016|
001398  7828              LDRB     r0,[r5,#0]            ;845  ; work_stat
00139a  2801              CMP      r0,#1                 ;845
00139c  d012              BEQ      |L1.5060|
00139e  2001              MOVS     r0,#1                 ;847
0013a0  49a6              LDR      r1,|L1.5692|
0013a2  7028              STRB     r0,[r5,#0]            ;847
0013a4  2000              MOVS     r0,#0                 ;848
0013a6  6008              STR      r0,[r1,#0]            ;849  ; time_proc
0013a8  48a2              LDR      r0,|L1.5684|
0013aa  6801              LDR      r1,[r0,#0]            ;849  ; T_PROC_GS
0013ac  48a4              LDR      r0,|L1.5696|
0013ae  6001              STR      r1,[r0,#0]            ;850  ; time_proc_remain
0013b0  2100              MOVS     r1,#0                 ;850
                  |L1.5042|
0013b2  20ea              MOVS     r0,#0xea              ;829
0013b4  e1a6              B        |L1.5892|
                  |L1.5046|
0013b6  7828              LDRB     r0,[r5,#0]            ;855  ; work_stat
0013b8  2801              CMP      r0,#1                 ;855
0013ba  d103              BNE      |L1.5060|
                  |L1.5052|
0013bc  2000              MOVS     r0,#0                 ;857
0013be  7028              STRB     r0,[r5,#0]            ;857
0013c0  f7fffffe          BL       restart_off
                  |L1.5060|
0013c4  e1b3              B        |L1.5934|
                  |L1.5062|
0013c6  7828              LDRB     r0,[r5,#0]            ;866  ; work_stat
0013c8  2800              CMP      r0,#0                 ;866
0013ca  d103              BNE      |L1.5076|
0013cc  489d              LDR      r0,|L1.5700|
0013ce  b114              CBZ      r4,|L1.5078|
0013d0  2c01              CMP      r4,#1                 ;869
0013d2  d002              BEQ      |L1.5082|
                  |L1.5076|
0013d4  e1ab              B        |L1.5934|
                  |L1.5078|
0013d6  2101              MOVS     r1,#1                 ;868
0013d8  e000              B        |L1.5084|
                  |L1.5082|
0013da  2100              MOVS     r1,#0                 ;869
                  |L1.5084|
0013dc  7001              STRB     r1,[r0,#0]            ;869
0013de  e1a6              B        |L1.5934|
                  |L1.5088|
0013e0  7828              LDRB     r0,[r5,#0]            ;876  ; work_stat
0013e2  bb80              CBNZ     r0,|L1.5190|
0013e4  4898              LDR      r0,|L1.5704|
0013e6  8800              LDRH     r0,[r0,#0]            ;876  ; REV_IS_ON
0013e8  b368              CBZ      r0,|L1.5190|
0013ea  4a98              LDR      r2,|L1.5708|
0013ec  f44f7084          MOV      r0,#0x108             ;880
0013f0  2c01              CMP      r4,#1                 ;878
0013f2  d003              BEQ      |L1.5116|
0013f4  b124              CBZ      r4,|L1.5120|
0013f6  f9b21000          LDRSH    r1,[r2,#0]            ;880  ; AVT_REV_IS_ON
0013fa  e183              B        |L1.5892|
                  |L1.5116|
0013fc  2101              MOVS     r1,#1                 ;878
0013fe  e000              B        |L1.5122|
                  |L1.5120|
001400  2100              MOVS     r1,#0                 ;879
                  |L1.5122|
001402  8011              STRH     r1,[r2,#0]            ;878
001404  e17e              B        |L1.5892|
                  |L1.5126|
001406  7828              LDRB     r0,[r5,#0]            ;886  ; work_stat
001408  b9e8              CBNZ     r0,|L1.5190|
00140a  4d91              LDR      r5,|L1.5712|
00140c  4891              LDR      r0,|L1.5716|
00140e  211e              MOVS     r1,#0x1e              ;889
001410  802c              STRH     r4,[r5,#0]            ;888
001412  6800              LDR      r0,[r0,#0]            ;889  ; T_PROC_MAX
001414  b202              SXTH     r2,r0                 ;889
001416  4628              MOV      r0,r5                 ;889
001418  f7fffffe          BL       gran
00141c  f9b51000          LDRSH    r1,[r5,#0]            ;890  ; AVT_REV_TIME_FF
001420  f44f7085          MOV      r0,#0x10a             ;890
001424  e16e              B        |L1.5892|
                  |L1.5158|
001426  7828              LDRB     r0,[r5,#0]            ;895  ; work_stat
001428  b968              CBNZ     r0,|L1.5190|
00142a  4d8b              LDR      r5,|L1.5720|
00142c  4889              LDR      r0,|L1.5716|
00142e  211e              MOVS     r1,#0x1e              ;898
001430  802c              STRH     r4,[r5,#0]            ;897
001432  6800              LDR      r0,[r0,#0]            ;898  ; T_PROC_MAX
001434  b202              SXTH     r2,r0                 ;898
001436  4628              MOV      r0,r5                 ;898
001438  f7fffffe          BL       gran
00143c  f9b51000          LDRSH    r1,[r5,#0]            ;899  ; AVT_REV_TIME_REW
001440  f44f7086          MOV      r0,#0x10c             ;899
001444  e15e              B        |L1.5892|
                  |L1.5190|
001446  e040              B        |L1.5322|
                  |L1.5192|
001448  7828              LDRB     r0,[r5,#0]            ;904  ; work_stat
00144a  bbf0              CBNZ     r0,|L1.5322|
00144c  4d83              LDR      r5,|L1.5724|
00144e  f44f7216          MOV      r2,#0x258             ;907
001452  2102              MOVS     r1,#2                 ;907
001454  802c              STRH     r4,[r5,#0]            ;906
001456  4628              MOV      r0,r5                 ;907
001458  f7fffffe          BL       gran
00145c  f9b51000          LDRSH    r1,[r5,#0]            ;908  ; AVT_REV_TIME_PAUSE
001460  f44f7087          MOV      r0,#0x10e             ;908
001464  e14e              B        |L1.5892|
                  |L1.5222|
001466  7828              LDRB     r0,[r5,#0]            ;914  ; work_stat
001468  bb78              CBNZ     r0,|L1.5322|
00146a  4d7d              LDR      r5,|L1.5728|
00146c  487d              LDR      r0,|L1.5732|
00146e  802c              STRH     r4,[r5,#0]            ;916
001470  f9b01000          LDRSH    r1,[r0,#0]            ;917  ; I_MIN_IPS
001474  f9bb2000          LDRSH    r2,[r11,#0]           ;917  ; I_MAX_IPS
001478  4628              MOV      r0,r5                 ;917
00147a  f7fffffe          BL       gran
00147e  f9b51000          LDRSH    r1,[r5,#0]            ;918  ; AVT_REV_I_NOM_FF
001482  f44f7088          MOV      r0,#0x110             ;918
001486  e13d              B        |L1.5892|
                  |L1.5256|
001488  7828              LDRB     r0,[r5,#0]            ;924  ; work_stat
00148a  b9f0              CBNZ     r0,|L1.5322|
00148c  4d76              LDR      r5,|L1.5736|
00148e  4875              LDR      r0,|L1.5732|
001490  802c              STRH     r4,[r5,#0]            ;926
001492  f9b01000          LDRSH    r1,[r0,#0]            ;927  ; I_MIN_IPS
001496  f9bb2000          LDRSH    r2,[r11,#0]           ;927  ; I_MAX_IPS
00149a  4628              MOV      r0,r5                 ;927
00149c  f7fffffe          BL       gran
0014a0  f9b51000          LDRSH    r1,[r5,#0]            ;928  ; AVT_REV_I_NOM_REW
0014a4  f44f7089          MOV      r0,#0x112             ;928
0014a8  e12c              B        |L1.5892|
                  |L1.5290|
0014aa  7828              LDRB     r0,[r5,#0]            ;933  ; work_stat
0014ac  b968              CBNZ     r0,|L1.5322|
0014ae  4d6f              LDR      r5,|L1.5740|
0014b0  486f              LDR      r0,|L1.5744|
0014b2  802c              STRH     r4,[r5,#0]            ;935
0014b4  f9b02000          LDRSH    r2,[r0,#0]            ;936  ; U_MAX
0014b8  486e              LDR      r0,|L1.5748|
0014ba  f9b01000          LDRSH    r1,[r0,#0]            ;936  ; U_MIN
0014be  4628              MOV      r0,r5                 ;936
0014c0  f7fffffe          BL       gran
0014c4  f9b51000          LDRSH    r1,[r5,#0]            ;937  ; AVT_REV_U_NOM_FF
0014c8  e000              B        |L1.5324|
                  |L1.5322|
0014ca  e037              B        |L1.5436|
                  |L1.5324|
0014cc  f44f708a          MOV      r0,#0x114             ;937
0014d0  e118              B        |L1.5892|
                  |L1.5330|
0014d2  7828              LDRB     r0,[r5,#0]            ;943  ; work_stat
0014d4  bb90              CBNZ     r0,|L1.5436|
0014d6  4d68              LDR      r5,|L1.5752|
0014d8  4865              LDR      r0,|L1.5744|
0014da  802c              STRH     r4,[r5,#0]            ;945
0014dc  f9b02000          LDRSH    r2,[r0,#0]            ;946  ; U_MAX
0014e0  4864              LDR      r0,|L1.5748|
0014e2  f9b01000          LDRSH    r1,[r0,#0]            ;946  ; U_MIN
0014e6  4628              MOV      r0,r5                 ;946
0014e8  f7fffffe          BL       gran
0014ec  f9b51000          LDRSH    r1,[r5,#0]            ;947  ; AVT_REV_U_NOM_REW
0014f0  f44f708b          MOV      r0,#0x116             ;947
0014f4  e106              B        |L1.5892|
                  |L1.5366|
0014f6  7828              LDRB     r0,[r5,#0]            ;953  ; work_stat
0014f8  bb00              CBNZ     r0,|L1.5436|
0014fa  8034              STRH     r4,[r6,#0]            ;955
0014fc  e056              B        |L1.5548|
                  |L1.5374|
0014fe  7828              LDRB     r0,[r5,#0]            ;962  ; work_stat
001500  b9e0              CBNZ     r0,|L1.5436|
001502  f8a84000          STRH     r4,[r8,#0]            ;964
001506  e067              B        |L1.5592|
                  |L1.5384|
001508  7828              LDRB     r0,[r5,#0]            ;971  ; work_stat
00150a  b9b8              CBNZ     r0,|L1.5436|
00150c  f8a94000          STRH     r4,[r9,#0]            ;973
001510  e078              B        |L1.5636|
                  |L1.5394|
001512  7828              LDRB     r0,[r5,#0]            ;980  ; work_stat
001514  b990              CBNZ     r0,|L1.5436|
001516  460d              MOV      r5,r1                 ;982
001518  800c              STRH     r4,[r1,#0]            ;982
00151a  210a              MOVS     r1,#0xa               ;983
00151c  4857              LDR      r0,|L1.5756|
00151e  f7fffffe          BL       gran
001522  f9b51000          LDRSH    r1,[r5,#0]            ;984  ; CAP_PAUSE2_TIME
001526  e0c3              B        |L1.5808|
                  |L1.5416|
001528  7828              LDRB     r0,[r5,#0]            ;990  ; work_stat
00152a  b938              CBNZ     r0,|L1.5436|
00152c  f8aa4000          STRH     r4,[r10,#0]           ;992
001530  e0ce              B        |L1.5840|
                  |L1.5426|
001532  7828              LDRB     r0,[r5,#0]            ;999  ; work_stat
001534  b910              CBNZ     r0,|L1.5436|
001536  f8ab4000          STRH     r4,[r11,#0]           ;1001
00153a  e0da              B        |L1.5874|
                  |L1.5436|
00153c  e06b              B        |L1.5654|
                  |L1.5438|
00153e  2c11              CMP      r4,#0x11              ;1009
001540  d01e              BEQ      |L1.5504|
001542  2c12              CMP      r4,#0x12              ;1013
001544  d01f              BEQ      |L1.5510|
001546  2c13              CMP      r4,#0x13              ;1017
001548  d020              BEQ      |L1.5516|
00154a  2c14              CMP      r4,#0x14              ;1021
00154c  d021              BEQ      |L1.5522|
00154e  2c21              CMP      r4,#0x21              ;1026
001550  d022              BEQ      |L1.5528|
001552  2c22              CMP      r4,#0x22              ;1035
001554  d025              BEQ      |L1.5538|
001556  2c31              CMP      r4,#0x31              ;1045
001558  d031              BEQ      |L1.5566|
00155a  2c32              CMP      r4,#0x32              ;1054
00155c  d035              BEQ      |L1.5578|
00155e  2c41              CMP      r4,#0x41              ;1064
001560  d043              BEQ      |L1.5610|
001562  2c42              CMP      r4,#0x42              ;1073
001564  d047              BEQ      |L1.5622|
001566  2c51              CMP      r4,#0x51              ;1083
001568  d056              BEQ      |L1.5656|
00156a  2c52              CMP      r4,#0x52              ;1092
00156c  d055              BEQ      |L1.5658|
00156e  2c61              CMP      r4,#0x61              ;1102
001570  d054              BEQ      |L1.5660|
001572  2c62              CMP      r4,#0x62              ;1111
001574  d053              BEQ      |L1.5662|
001576  2c71              CMP      r4,#0x71              ;1121
001578  d052              BEQ      |L1.5664|
00157a  2c72              CMP      r4,#0x72              ;1130
00157c  d051              BEQ      |L1.5666|
00157e  e0d6              B        |L1.5934|
                  |L1.5504|
001580  f7fffffe          BL       start_CAP
001584  e0d3              B        |L1.5934|
                  |L1.5510|
001586  f7fffffe          BL       pause_CAP
00158a  e0d0              B        |L1.5934|
                  |L1.5516|
00158c  f7fffffe          BL       stop_CAP
001590  e0cd              B        |L1.5934|
                  |L1.5522|
001592  f7fffffe          BL       reset_CAP
001596  e0ca              B        |L1.5934|
                  |L1.5528|
001598  7828              LDRB     r0,[r5,#0]            ;1028  ; work_stat
00159a  bbe0              CBNZ     r0,|L1.5654|
00159c  8830              LDRH     r0,[r6,#0]            ;1030  ; CAP_ZAR_TIME
00159e  1c40              ADDS     r0,r0,#1              ;1030
0015a0  e003              B        |L1.5546|
                  |L1.5538|
0015a2  7828              LDRB     r0,[r5,#0]            ;1037  ; work_stat
0015a4  bbb8              CBNZ     r0,|L1.5654|
0015a6  8830              LDRH     r0,[r6,#0]            ;1039  ; CAP_ZAR_TIME
0015a8  1e40              SUBS     r0,r0,#1              ;1039
                  |L1.5546|
0015aa  8030              STRH     r0,[r6,#0]            ;1030
                  |L1.5548|
0015ac  210a              MOVS     r1,#0xa               ;956
0015ae  4834              LDR      r0,|L1.5760|
0015b0  f7fffffe          BL       gran
0015b4  f9b61000          LDRSH    r1,[r6,#0]            ;957  ; CAP_ZAR_TIME
0015b8  f44f70e9          MOV      r0,#0x1d2             ;957
0015bc  e0a2              B        |L1.5892|
                  |L1.5566|
0015be  7828              LDRB     r0,[r5,#0]            ;1047  ; work_stat
0015c0  bb48              CBNZ     r0,|L1.5654|
0015c2  f8b80000          LDRH     r0,[r8,#0]            ;1049  ; CAP_PAUSE1_TIME
0015c6  1c40              ADDS     r0,r0,#1              ;1049
0015c8  e004              B        |L1.5588|
                  |L1.5578|
0015ca  7828              LDRB     r0,[r5,#0]            ;1056  ; work_stat
0015cc  bb18              CBNZ     r0,|L1.5654|
0015ce  f8b80000          LDRH     r0,[r8,#0]            ;1058  ; CAP_PAUSE1_TIME
0015d2  1e40              SUBS     r0,r0,#1              ;1058
                  |L1.5588|
0015d4  f8a80000          STRH     r0,[r8,#0]            ;1049
                  |L1.5592|
0015d8  210a              MOVS     r1,#0xa               ;965
0015da  482a              LDR      r0,|L1.5764|
0015dc  f7fffffe          BL       gran
0015e0  f9b81000          LDRSH    r1,[r8,#0]            ;966  ; CAP_PAUSE1_TIME
0015e4  f44f70ea          MOV      r0,#0x1d4             ;966
0015e8  e08c              B        |L1.5892|
                  |L1.5610|
0015ea  7828              LDRB     r0,[r5,#0]            ;1066  ; work_stat
0015ec  b998              CBNZ     r0,|L1.5654|
0015ee  f8b90000          LDRH     r0,[r9,#0]            ;1068  ; CAP_RAZR_TIME
0015f2  1c40              ADDS     r0,r0,#1              ;1068
0015f4  e004              B        |L1.5632|
                  |L1.5622|
0015f6  7828              LDRB     r0,[r5,#0]            ;1075  ; work_stat
0015f8  b968              CBNZ     r0,|L1.5654|
0015fa  f8b90000          LDRH     r0,[r9,#0]            ;1077  ; CAP_RAZR_TIME
0015fe  1e40              SUBS     r0,r0,#1              ;1077
                  |L1.5632|
001600  f8a90000          STRH     r0,[r9,#0]            ;1068
                  |L1.5636|
001604  210a              MOVS     r1,#0xa               ;974
001606  4820              LDR      r0,|L1.5768|
001608  f7fffffe          BL       gran
00160c  f9b91000          LDRSH    r1,[r9,#0]            ;975  ; CAP_RAZR_TIME
001610  f44f70eb          MOV      r0,#0x1d6             ;975
001614  e076              B        |L1.5892|
                  |L1.5654|
001616  e06b              B        |L1.5872|
                  |L1.5656|
001618  e038              B        |L1.5772|
                  |L1.5658|
00161a  e03d              B        |L1.5784|
                  |L1.5660|
00161c  e04b              B        |L1.5814|
                  |L1.5662|
00161e  e050              B        |L1.5826|
                  |L1.5664|
001620  e060              B        |L1.5860|
                  |L1.5666|
001622  e072              B        |L1.5898|
                  |L1.5668|
                          DCD      I_ug
                  |L1.5672|
                          DCD      U_up
                  |L1.5676|
                          DCD      U_maxg
                  |L1.5680|
                          DCD      I_maxp
                  |L1.5684|
                          DCD      T_PROC_GS
                  |L1.5688|
                          DCD      T_PROC_PS
                  |L1.5692|
                          DCD      time_proc
                  |L1.5696|
                          DCD      time_proc_remain
                  |L1.5700|
                          DCD      REV_STAT
                  |L1.5704|
                          DCD      REV_IS_ON
                  |L1.5708|
                          DCD      AVT_REV_IS_ON
                  |L1.5712|
                          DCD      AVT_REV_TIME_FF
                  |L1.5716|
                          DCD      T_PROC_MAX
                  |L1.5720|
                          DCD      AVT_REV_TIME_REW
                  |L1.5724|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.5728|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.5732|
                          DCD      I_MIN_IPS
                  |L1.5736|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.5740|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.5744|
                          DCD      U_MAX
                  |L1.5748|
                          DCD      U_MIN
                  |L1.5752|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.5756|
                          DCD      CAP_PAUSE2_TIME
                  |L1.5760|
                          DCD      CAP_ZAR_TIME
                  |L1.5764|
                          DCD      CAP_PAUSE1_TIME
                  |L1.5768|
                          DCD      CAP_RAZR_TIME
                  |L1.5772|
00168c  7828              LDRB     r0,[r5,#0]            ;1085  ; work_stat
00168e  bb78              CBNZ     r0,|L1.5872|
001690  8808              LDRH     r0,[r1,#0]            ;1087  ; CAP_PAUSE2_TIME
001692  460c              MOV      r4,r1                 ;1087
001694  1c40              ADDS     r0,r0,#1              ;1087
001696  e004              B        |L1.5794|
                  |L1.5784|
001698  7828              LDRB     r0,[r5,#0]            ;1094  ; work_stat
00169a  bb48              CBNZ     r0,|L1.5872|
00169c  8808              LDRH     r0,[r1,#0]            ;1096  ; CAP_PAUSE2_TIME
00169e  460c              MOV      r4,r1                 ;1096
0016a0  1e40              SUBS     r0,r0,#1              ;1096
                  |L1.5794|
0016a2  8020              STRH     r0,[r4,#0]            ;1087
0016a4  210a              MOVS     r1,#0xa               ;1088
0016a6  484e              LDR      r0,|L1.6112|
0016a8  f7fffffe          BL       gran
0016ac  f9b41000          LDRSH    r1,[r4,#0]            ;1089  ; CAP_PAUSE2_TIME
                  |L1.5808|
0016b0  f44f70ec          MOV      r0,#0x1d8             ;984
0016b4  e026              B        |L1.5892|
                  |L1.5814|
0016b6  7828              LDRB     r0,[r5,#0]            ;1104  ; work_stat
0016b8  b9d0              CBNZ     r0,|L1.5872|
0016ba  f8ba0000          LDRH     r0,[r10,#0]           ;1106  ; CAP_MAX_VOLT
0016be  1c40              ADDS     r0,r0,#1              ;1106
0016c0  e004              B        |L1.5836|
                  |L1.5826|
0016c2  7828              LDRB     r0,[r5,#0]            ;1113  ; work_stat
0016c4  b9a0              CBNZ     r0,|L1.5872|
0016c6  f8ba0000          LDRH     r0,[r10,#0]           ;1115  ; CAP_MAX_VOLT
0016ca  1e40              SUBS     r0,r0,#1              ;1115
                  |L1.5836|
0016cc  f8aa0000          STRH     r0,[r10,#0]           ;1106
                  |L1.5840|
0016d0  2264              MOVS     r2,#0x64              ;993
0016d2  2101              MOVS     r1,#1                 ;993
0016d4  4843              LDR      r0,|L1.6116|
0016d6  f7fffffe          BL       gran
0016da  f9ba1000          LDRSH    r1,[r10,#0]           ;994  ; CAP_MAX_VOLT
0016de  f44f70ed          MOV      r0,#0x1da             ;994
0016e2  e00f              B        |L1.5892|
                  |L1.5860|
0016e4  7828              LDRB     r0,[r5,#0]            ;1123  ; work_stat
0016e6  b918              CBNZ     r0,|L1.5872|
0016e8  f8bb0000          LDRH     r0,[r11,#0]           ;1125  ; CAP_WRK_CURR
0016ec  1c40              ADDS     r0,r0,#1              ;1125
0016ee  e011              B        |L1.5908|
                  |L1.5872|
0016f0  e01d              B        |L1.5934|
                  |L1.5874|
0016f2  2296              MOVS     r2,#0x96              ;1002
0016f4  2101              MOVS     r1,#1                 ;1002
0016f6  483c              LDR      r0,|L1.6120|
0016f8  f7fffffe          BL       gran
0016fc  f9bb1000          LDRSH    r1,[r11,#0]           ;1003  ; CAP_WRK_CURR
001700  f44f70ee          MOV      r0,#0x1dc             ;1003
                  |L1.5892|
001704  f7fffffe          BL       lc640_write_int
001708  e011              B        |L1.5934|
                  |L1.5898|
00170a  7828              LDRB     r0,[r5,#0]            ;1132  ; work_stat
00170c  b978              CBNZ     r0,|L1.5934|
00170e  f8bb0000          LDRH     r0,[r11,#0]           ;1134  ; CAP_WRK_CURR
001712  1e40              SUBS     r0,r0,#1              ;1134
                  |L1.5908|
001714  f8ab0000          STRH     r0,[r11,#0]           ;1134
001718  e7eb              B        |L1.5874|
                  |L1.5914|
00171a  4834              LDR      r0,|L1.6124|
00171c  e000              B        |L1.5920|
                  |L1.5918|
00171e  4834              LDR      r0,|L1.6128|
                  |L1.5920|
001720  8004              STRH     r4,[r0,#0]            ;1149
001722  e004              B        |L1.5934|
                  |L1.5924|
001724  4933              LDR      r1,|L1.6132|
001726  eb040084          ADD      r0,r4,r4,LSL #2       ;1154
00172a  0040              LSLS     r0,r0,#1              ;1154
00172c  8008              STRH     r0,[r1,#0]            ;1154
                  |L1.5934|
00172e  4c32              LDR      r4,|L1.6136|
001730  4d32              LDR      r5,|L1.6140|
001732  6820              LDR      r0,[r4,#0]            ;1157  ; T_PROC_GS
001734  6829              LDR      r1,[r5,#0]            ;1157  ; T_PROC_MAX
001736  4288              CMP      r0,r1                 ;1157
001738  dc01              BGT      |L1.5950|
00173a  281e              CMP      r0,#0x1e              ;1157
00173c  da13              BGE      |L1.5990|
                  |L1.5950|
00173e  4288              CMP      r0,r1                 ;1159
001740  dd02              BLE      |L1.5960|
001742  1c49              ADDS     r1,r1,#1              ;1159
001744  6021              STR      r1,[r4,#0]            ;1159  ; T_PROC_GS
001746  e003              B        |L1.5968|
                  |L1.5960|
001748  281e              CMP      r0,#0x1e              ;1160
00174a  da01              BGE      |L1.5968|
00174c  201d              MOVS     r0,#0x1d              ;1160
00174e  6020              STR      r0,[r4,#0]            ;1160  ; T_PROC_GS
                  |L1.5968|
001750  6820              LDR      r0,[r4,#0]            ;1161  ; T_PROC_GS
001752  b201              SXTH     r1,r0                 ;1161
001754  20d8              MOVS     r0,#0xd8              ;1161
001756  f7fffffe          BL       lc640_write_int
00175a  4829              LDR      r0,|L1.6144|
00175c  2101              MOVS     r1,#1                 ;1162
00175e  8001              STRH     r1,[r0,#0]            ;1162
001760  20ee              MOVS     r0,#0xee              ;1163
001762  f7fffffe          BL       lc640_write_int
                  |L1.5990|
001766  6820              LDR      r0,[r4,#0]            ;1165  ; T_PROC_GS
001768  6829              LDR      r1,[r5,#0]            ;1165  ; T_PROC_MAX
00176a  4288              CMP      r0,r1                 ;1165
00176c  dc07              BGT      |L1.6014|
00176e  281e              CMP      r0,#0x1e              ;1165
001770  db05              BLT      |L1.6014|
001772  4823              LDR      r0,|L1.6144|
001774  2100              MOVS     r1,#0                 ;1167
001776  8001              STRH     r1,[r0,#0]            ;1167
001778  20ee              MOVS     r0,#0xee              ;1168
00177a  f7fffffe          BL       lc640_write_int
                  |L1.6014|
00177e  4c21              LDR      r4,|L1.6148|
001780  6828              LDR      r0,[r5,#0]            ;1171  ; T_PROC_MAX
001782  6821              LDR      r1,[r4,#0]            ;1171  ; T_PROC_PS
001784  4281              CMP      r1,r0                 ;1171
001786  dc01              BGT      |L1.6028|
001788  291e              CMP      r1,#0x1e              ;1171
00178a  da13              BGE      |L1.6068|
                  |L1.6028|
00178c  4281              CMP      r1,r0                 ;1173
00178e  dd01              BLE      |L1.6036|
001790  1c40              ADDS     r0,r0,#1              ;1173
001792  e004              B        |L1.6046|
                  |L1.6036|
001794  291e              CMP      r1,#0x1e              ;1174
001796  db01              BLT      |L1.6044|
001798  6820              LDR      r0,[r4,#0]            ;1174  ; T_PROC_PS
00179a  e001              B        |L1.6048|
                  |L1.6044|
00179c  201d              MOVS     r0,#0x1d              ;1174
                  |L1.6046|
00179e  6020              STR      r0,[r4,#0]            ;1174  ; T_PROC_PS
                  |L1.6048|
0017a0  b201              SXTH     r1,r0                 ;1175
0017a2  20dc              MOVS     r0,#0xdc              ;1175
0017a4  f7fffffe          BL       lc640_write_int
0017a8  4817              LDR      r0,|L1.6152|
0017aa  2101              MOVS     r1,#1                 ;1176
0017ac  8001              STRH     r1,[r0,#0]            ;1176
0017ae  20f0              MOVS     r0,#0xf0              ;1177
0017b0  f7fffffe          BL       lc640_write_int
                  |L1.6068|
0017b4  6820              LDR      r0,[r4,#0]            ;1179  ; T_PROC_PS
0017b6  6829              LDR      r1,[r5,#0]            ;1179  ; T_PROC_MAX
0017b8  4288              CMP      r0,r1                 ;1179
0017ba  dc07              BGT      |L1.6092|
0017bc  281e              CMP      r0,#0x1e              ;1179
0017be  db05              BLT      |L1.6092|
0017c0  4811              LDR      r0,|L1.6152|
0017c2  2100              MOVS     r1,#0                 ;1181
0017c4  8001              STRH     r1,[r0,#0]            ;1181
0017c6  20f0              MOVS     r0,#0xf0              ;1182
0017c8  f7fffffe          BL       lc640_write_int
                  |L1.6092|
0017cc  480f              LDR      r0,|L1.6156|
0017ce  9904              LDR      r1,[sp,#0x10]         ;1185
0017d0  463a              MOV      r2,r7                 ;1185
0017d2  8800              LDRH     r0,[r0,#0]            ;1185  ; MODBUS_ADRESS
0017d4  b00b              ADD      sp,sp,#0x2c           ;1185
0017d6  b2c0              UXTB     r0,r0                 ;1185
0017d8  e8bd4ff0          POP      {r4-r11,lr}           ;1185
0017dc  f7ffbffe          B.W      modbus_hold_register_transmit
;;;1198   
                          ENDP

                  |L1.6112|
                          DCD      CAP_PAUSE2_TIME
                  |L1.6116|
                          DCD      CAP_MAX_VOLT
                  |L1.6120|
                          DCD      CAP_WRK_CURR
                  |L1.6124|
                          DCD      pwm_u_reg
                  |L1.6128|
                          DCD      pwm_i_reg
                  |L1.6132|
                          DCD      pwm_t_reg
                  |L1.6136|
                          DCD      T_PROC_GS
                  |L1.6140|
                          DCD      T_PROC_MAX
                  |L1.6144|
                          DCD      T_PROC_GS_MODE
                  |L1.6148|
                          DCD      T_PROC_PS
                  |L1.6152|
                          DCD      T_PROC_PS_MODE
                  |L1.6156|
                          DCD      MODBUS_ADRESS

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  modbus_buf
                          %        20

                          AREA ||area_number.4||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.4||, ||.bss||
                  modbus_rx_buffer
                          %        30
                  modbus_an_buffer
                          %        30
                  modbus_registers
                          %        200

                          AREA ||.data||, DATA, ALIGN=1

                  modbus_self_cmnd_cnt
000000  21                DCB      0x21
                  bMODBUS_TIMEOUT
000001  00                DCB      0x00
                  modbus_rx_buffer_ptr
000002  00                DCB      0x00
                  modbus_rx_counter
000003  00                DCB      0x00
                  modbus_cmnd_cnt
000004  00                DCB      0x00
                  modbus_cmnd
000005  00                DCB      0x00
                  modbus_plazma
000006  0000              DCB      0x00,0x00
                  modbus_plazma1
000008  0000              DCB      0x00,0x00
                  modbus_plazma2
00000a  0000              DCB      0x00,0x00
                  modbus_plazma3
00000c  0000              DCB      0x00,0x00

                          AREA ||area_number.7||, DATA, ALIGN=1

                          EXPORTAS ||area_number.7||, ||.data||
                  modbus_crc16
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.8||, DATA, ALIGN=0

                          EXPORTAS ||area_number.8||, ||.data||
                  modbus_timeout_cnt
000000  00                DCB      0x00

                          AREA ||area_number.9||, DATA, ALIGN=1

                          EXPORTAS ||area_number.9||, ||.data||
                  modbusTimeoutInMills
000000  0000              DCB      0x00,0x00
