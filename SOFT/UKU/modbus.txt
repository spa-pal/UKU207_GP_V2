; generated by ARM C/C++ Compiler, 4.1 [Build 644]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\EXE\modbus.o --asm_dir=.\ --list_dir=.\ --depend=.\EXE\modbus.d --feedback=.\EXE\UKU2071x_GALV_IBv2.fed --cpu=Cortex-M3 --apcs=interwork -O3 -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\INC\NXP\LPC17xx -D__MICROLIB -DUKU2071x -DEXT_BOARD_V_2 --omf_browse=.\EXE\modbus.crf modbus.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  CRC16_2 PROC
;;;37     //-----------------------------------------------
;;;38     unsigned short CRC16_2(char* buf, short len)
000000  b570              PUSH     {r4-r6,lr}
;;;39     {
000002  4604              MOV      r4,r0
;;;40     unsigned short crc = 0xFFFF;
000004  f64f70ff          MOV      r0,#0xffff
;;;41     short pos;
;;;42     short i;
;;;43     
;;;44     for (pos = 0; pos < len; pos++)
000008  2200              MOVS     r2,#0
;;;45       	{
;;;46         	crc ^= (unsigned short)buf[pos];          // XOR byte into least sig. byte of crc
;;;47     
;;;48         	for ( i = 8; i != 0; i--) 
;;;49     		{    // Loop over each bit
;;;50           	if ((crc & 0x0001) != 0) 
;;;51     			{      // If the LSB is set
;;;52             		crc >>= 1;                    // Shift right and XOR 0xA001
;;;53             		crc ^= 0xA001;
00000a  f24a0501          MOV      r5,#0xa001
00000e  e00d              B        |L1.44|
                  |L1.16|
000010  5ca3              LDRB     r3,[r4,r2]            ;46
000012  4058              EORS     r0,r0,r3              ;46
000014  2308              MOVS     r3,#8                 ;48
                  |L1.22|
000016  07c6              LSLS     r6,r0,#31             ;50
;;;54           		}
;;;55           	else  crc >>= 1;                    // Just shift right
000018  ea4f0050          LSR      r0,r0,#1
00001c  d000              BEQ      |L1.32|
00001e  4068              EORS     r0,r0,r5              ;53
                  |L1.32|
000020  1e5b              SUBS     r3,r3,#1              ;48
000022  b21b              SXTH     r3,r3                 ;48
000024  2b00              CMP      r3,#0                 ;48
000026  d1f6              BNE      |L1.22|
000028  1c52              ADDS     r2,r2,#1              ;44
00002a  b212              SXTH     r2,r2                 ;44
                  |L1.44|
00002c  428a              CMP      r2,r1                 ;44
00002e  dbef              BLT      |L1.16|
;;;56         		}
;;;57       	}
;;;58       // Note, this number has low and high bytes swapped, so use it accordingly (or swap bytes)
;;;59     return crc;
;;;60     }
000030  bd70              POP      {r4-r6,pc}
;;;61     
                          ENDP

                  modbus_hold_register_transmit PROC
;;;1204   //-----------------------------------------------
;;;1205   void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
;;;1206   {
;;;1207   char modbus_registers[120];
;;;1208   char modbus_tx_buff[100];
;;;1209   unsigned short crc_temp;
;;;1210   char i;
;;;1211   
;;;1212   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
;;;1213   modbus_registers[1]=(char)(load_U%256);
;;;1214   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
000032  e92d43f0          PUSH     {r4-r9,lr}
000036  4681              MOV      r9,r0
;;;1215   modbus_registers[3]=(char)(load_I%256);
000038  48ff              LDR      r0,|L1.1080|
00003a  b0b7              SUB      sp,sp,#0xdc
;;;1216   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
00003c  f44f6861          MOV      r8,#0xe10
000040  f9b00000          LDRSH    r0,[r0,#0]  ; I_ug
000044  17c3              ASRS     r3,r0,#31
000046  eb006313          ADD      r3,r0,r3,LSR #24
00004a  121c              ASRS     r4,r3,#8
00004c  f88d4000          STRB     r4,[sp,#0]
000050  f88d0001          STRB     r0,[sp,#1]
;;;1217   modbus_registers[5]=(char)((time_proc%60)%256);
000054  48f9              LDR      r0,|L1.1084|
000056  f9b00000          LDRSH    r0,[r0,#0]  ; U_up
;;;1218   modbus_registers[6]=(char)((time_proc/60)/256);			//Πεγ4
00005a  17c3              ASRS     r3,r0,#31
00005c  eb006313          ADD      r3,r0,r3,LSR #24
000060  121c              ASRS     r4,r3,#8
;;;1219   modbus_registers[7]=(char)((time_proc/60)%256);
000062  f88d4002          STRB     r4,[sp,#2]
000066  f88d0003          STRB     r0,[sp,#3]
;;;1220   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
00006a  48f5              LDR      r0,|L1.1088|
00006c  f9b00000          LDRSH    r0,[r0,#0]  ; U_maxg
000070  17c3              ASRS     r3,r0,#31
000072  eb006313          ADD      r3,r0,r3,LSR #24
;;;1221   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000076  121c              ASRS     r4,r3,#8
000078  f88d4004          STRB     r4,[sp,#4]
;;;1222   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
00007c  f88d0005          STRB     r0,[sp,#5]
000080  48f0              LDR      r0,|L1.1092|
000082  f9b00000          LDRSH    r0,[r0,#0]  ; I_maxp
000086  17c3              ASRS     r3,r0,#31
000088  eb006313          ADD      r3,r0,r3,LSR #24
00008c  121c              ASRS     r4,r3,#8
00008e  f88d4006          STRB     r4,[sp,#6]
000092  f88d0007          STRB     r0,[sp,#7]
;;;1223   modbus_registers[11]=(char)((time_proc_remain%60)%256);
000096  48ec              LDR      r0,|L1.1096|
000098  233c              MOVS     r3,#0x3c
;;;1224   modbus_registers[12]=(char)((time_proc_remain/60)/256);	//Πεγ7
00009a  6804              LDR      r4,[r0,#0]  ; T_PROC_GS
00009c  fb94f5f3          SDIV     r5,r4,r3
0000a0  fb034015          MLS      r0,r3,r5,r4
;;;1225   modbus_registers[13]=(char)((time_proc_remain/60)%256);
0000a4  17c6              ASRS     r6,r0,#31
;;;1226   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
0000a6  eb006616          ADD      r6,r0,r6,LSR #24
;;;1227   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
0000aa  1237              ASRS     r7,r6,#8
0000ac  f88d7008          STRB     r7,[sp,#8]
0000b0  f88d0009          STRB     r0,[sp,#9]            ;1226
0000b4  fb95f0f3          SDIV     r0,r5,r3
;;;1228   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
0000b8  fb035010          MLS      r0,r3,r0,r5
0000bc  17c5              ASRS     r5,r0,#31
0000be  eb006515          ADD      r5,r0,r5,LSR #24
0000c2  122e              ASRS     r6,r5,#8
0000c4  f88d600a          STRB     r6,[sp,#0xa]
;;;1229   modbus_registers[17]=(char)(I_ug%256);
0000c8  f88d000b          STRB     r0,[sp,#0xb]
;;;1230   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
0000cc  f44f2761          MOV      r7,#0xe1000
0000d0  fb94f0f7          SDIV     r0,r4,r7
0000d4  f88d000c          STRB     r0,[sp,#0xc]
0000d8  fb94f0f8          SDIV     r0,r4,r8
0000dc  f88d000d          STRB     r0,[sp,#0xd]
;;;1231   modbus_registers[19]=(char)(U_up%256);
0000e0  48da              LDR      r0,|L1.1100|
;;;1232   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
0000e2  6804              LDR      r4,[r0,#0]  ; T_PROC_PS
0000e4  fb94f5f3          SDIV     r5,r4,r3
0000e8  fb034015          MLS      r0,r3,r5,r4
0000ec  17c6              ASRS     r6,r0,#31
0000ee  eb006616          ADD      r6,r0,r6,LSR #24
0000f2  ea4f2c26          ASR      r12,r6,#8
;;;1233   modbus_registers[21]=(char)(U_maxg%256);
0000f6  f88dc00e          STRB     r12,[sp,#0xe]
;;;1234   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
0000fa  f88d000f          STRB     r0,[sp,#0xf]
0000fe  fb95f0f3          SDIV     r0,r5,r3
000102  fb035010          MLS      r0,r3,r0,r5
000106  17c3              ASRS     r3,r0,#31
000108  eb006313          ADD      r3,r0,r3,LSR #24
;;;1235   modbus_registers[23]=(char)(I_maxp%256);
00010c  121d              ASRS     r5,r3,#8
;;;1236   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
00010e  f88d5010          STRB     r5,[sp,#0x10]
000112  f88d0011          STRB     r0,[sp,#0x11]
000116  fb94f0f7          SDIV     r0,r4,r7
00011a  f88d0012          STRB     r0,[sp,#0x12]
00011e  fb94f0f8          SDIV     r0,r4,r8
000122  f88d0013          STRB     r0,[sp,#0x13]
000126  2000              MOVS     r0,#0
;;;1237   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
000128  4bc9              LDR      r3,|L1.1104|
00012a  f88d0014          STRB     r0,[sp,#0x14]
;;;1238   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
00012e  f88d0015          STRB     r0,[sp,#0x15]
000132  781c              LDRB     r4,[r3,#0]  ; work_stat
;;;1239   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
000134  2301              MOVS     r3,#1
000136  2c02              CMP      r4,#2
;;;1240   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
000138  d101              BNE      |L1.318|
00013a  f88d3015          STRB     r3,[sp,#0x15]
                  |L1.318|
;;;1241   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
00013e  f88d0016          STRB     r0,[sp,#0x16]
000142  f88d0017          STRB     r0,[sp,#0x17]         ;1240
000146  2c01              CMP      r4,#1
;;;1242   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
000148  d101              BNE      |L1.334|
00014a  f88d3017          STRB     r3,[sp,#0x17]
                  |L1.334|
00014e  4cc1              LDR      r4,|L1.1108|
000150  f88d0018          STRB     r0,[sp,#0x18]
000154  f88d0019          STRB     r0,[sp,#0x19]
000158  7824              LDRB     r4,[r4,#0]  ; REV_STAT
00015a  b90c              CBNZ     r4,|L1.352|
00015c  f88d3019          STRB     r3,[sp,#0x19]
                  |L1.352|
;;;1243   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
000160  f88d001a          STRB     r0,[sp,#0x1a]
;;;1244   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
000164  f88d001b          STRB     r0,[sp,#0x1b]
000168  48bb              LDR      r0,|L1.1112|
00016a  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
;;;1245   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
00016c  b108              CBZ      r0,|L1.370|
00016e  f88d301b          STRB     r3,[sp,#0x1b]
                  |L1.370|
;;;1246   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
000172  48ba              LDR      r0,|L1.1116|
;;;1247   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
000174  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_FF
000178  17c3              ASRS     r3,r0,#31             ;1246
00017a  eb006313          ADD      r3,r0,r3,LSR #24      ;1246
00017e  121c              ASRS     r4,r3,#8
;;;1248   modbus_registers[36]=0;								//Πεγ19
000180  f88d401c          STRB     r4,[sp,#0x1c]
000184  f88d001d          STRB     r0,[sp,#0x1d]
;;;1249   modbus_registers[37]=0;
000188  48b5              LDR      r0,|L1.1120|
00018a  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_REW
;;;1250   if(work_stat==wsPS)modbus_registers[37]=1;
00018e  17c3              ASRS     r3,r0,#31
000190  eb006313          ADD      r3,r0,r3,LSR #24
000194  121c              ASRS     r4,r3,#8
000196  f88d401e          STRB     r4,[sp,#0x1e]
;;;1251   modbus_registers[38]=0;								//Πεγ20
00019a  f88d001f          STRB     r0,[sp,#0x1f]
;;;1252   modbus_registers[39]=0;
00019e  48b1              LDR      r0,|L1.1124|
;;;1253   if(work_stat==wsGS)modbus_registers[39]=1;
0001a0  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_TIME_PAUSE
0001a4  17c3              ASRS     r3,r0,#31
0001a6  eb006313          ADD      r3,r0,r3,LSR #24
;;;1254   modbus_registers[40]=0;								//Πεγ21
0001aa  121c              ASRS     r4,r3,#8
0001ac  f88d4020          STRB     r4,[sp,#0x20]
;;;1255   modbus_registers[41]=0;
0001b0  f88d0021          STRB     r0,[sp,#0x21]
;;;1256   if(REV_STAT==rsREW)modbus_registers[41]=1;
0001b4  48ac              LDR      r0,|L1.1128|
0001b6  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_FF
;;;1257   modbus_registers[42]=0;								//Πεγ22
0001ba  17c3              ASRS     r3,r0,#31
0001bc  eb006313          ADD      r3,r0,r3,LSR #24
;;;1258   modbus_registers[43]=0;
0001c0  121c              ASRS     r4,r3,#8
;;;1259   if(AVT_REV_IS_ON)modbus_registers[42]=1;
0001c2  f88d4022          STRB     r4,[sp,#0x22]
0001c6  f88d0023          STRB     r0,[sp,#0x23]
0001ca  48a8              LDR      r0,|L1.1132|
;;;1260   
;;;1261   modbus_tx_buff[0]=adr;
0001cc  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_I_NOM_REW
;;;1262   modbus_tx_buff[1]=func;
0001d0  17c3              ASRS     r3,r0,#31
0001d2  eb006313          ADD      r3,r0,r3,LSR #24
;;;1263   modbus_tx_buff[2]=(char)(reg_adr/256);
0001d6  121c              ASRS     r4,r3,#8
0001d8  f88d4024          STRB     r4,[sp,#0x24]
;;;1264   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1265   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1266   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1267   /*
;;;1268   modbus_registers[0]=0x10;
;;;1269   modbus_registers[1]=0x11;
;;;1270   modbus_registers[2]=0x12;
;;;1271   modbus_registers[3]=0x13;
;;;1272   modbus_registers[4]=0x14;
;;;1273   modbus_registers[5]=0x15;
;;;1274   */
;;;1275   
;;;1276   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
0001dc  f88d0025          STRB     r0,[sp,#0x25]
0001e0  48a3              LDR      r0,|L1.1136|
0001e2  f9b00000          LDRSH    r0,[r0,#0]            ;1264  ; AVT_REV_U_NOM_FF
0001e6  17c3              ASRS     r3,r0,#31
0001e8  eb006313          ADD      r3,r0,r3,LSR #24
;;;1277   
;;;1278   crc_temp=CRC16_2(modbus_tx_buff,6);
0001ec  121c              ASRS     r4,r3,#8
0001ee  f88d4026          STRB     r4,[sp,#0x26]
0001f2  f88d0027          STRB     r0,[sp,#0x27]
;;;1279   
;;;1280   modbus_tx_buff[6]=crc_temp%256;
0001f6  489f              LDR      r0,|L1.1140|
;;;1281   modbus_tx_buff[7]=crc_temp/256;
0001f8  f9b00000          LDRSH    r0,[r0,#0]  ; AVT_REV_U_NOM_REW
0001fc  17c3              ASRS     r3,r0,#31
;;;1282   
;;;1283   for (i=0;i<8;i++)
0001fe  eb006313          ADD      r3,r0,r3,LSR #24
;;;1284   	{
;;;1285   	putchar0(modbus_tx_buff[i]);
000202  121c              ASRS     r4,r3,#8
000204  f88d4028          STRB     r4,[sp,#0x28]
000208  f88d0029          STRB     r0,[sp,#0x29]         ;1283
00020c  489a              LDR      r0,|L1.1144|
00020e  f9b00000          LDRSH    r0,[r0,#0]            ;1283  ; CAP_ZAR_TIME
;;;1286   	}
;;;1287   for (i=0;i<8;i++)
;;;1288   	{
;;;1289   	putchar_sc16is700(modbus_tx_buff[i]);
000212  17c3              ASRS     r3,r0,#31
000214  eb006313          ADD      r3,r0,r3,LSR #24
000218  121c              ASRS     r4,r3,#8              ;1287
00021a  f88d402a          STRB     r4,[sp,#0x2a]         ;1287
00021e  f88d002b          STRB     r0,[sp,#0x2b]         ;1287
;;;1290   	}
;;;1291   }
000222  4896              LDR      r0,|L1.1148|
000224  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE1_TIME
000228  17c3              ASRS     r3,r0,#31
00022a  eb006313          ADD      r3,r0,r3,LSR #24
00022e  121c              ASRS     r4,r3,#8
000230  f88d402c          STRB     r4,[sp,#0x2c]
000234  f88d002d          STRB     r0,[sp,#0x2d]
000238  4891              LDR      r0,|L1.1152|
00023a  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_RAZR_TIME
00023e  17c3              ASRS     r3,r0,#31
000240  eb006313          ADD      r3,r0,r3,LSR #24
000244  121c              ASRS     r4,r3,#8
000246  f88d402e          STRB     r4,[sp,#0x2e]
00024a  f88d002f          STRB     r0,[sp,#0x2f]
00024e  488d              LDR      r0,|L1.1156|
000250  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_PAUSE2_TIME
000254  17c3              ASRS     r3,r0,#31
000256  eb006313          ADD      r3,r0,r3,LSR #24
00025a  121c              ASRS     r4,r3,#8
00025c  f88d4030          STRB     r4,[sp,#0x30]
000260  f88d0031          STRB     r0,[sp,#0x31]
000264  4888              LDR      r0,|L1.1160|
000266  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_MAX_VOLT
00026a  17c3              ASRS     r3,r0,#31
00026c  eb006313          ADD      r3,r0,r3,LSR #24
000270  121c              ASRS     r4,r3,#8
000272  f88d4032          STRB     r4,[sp,#0x32]
000276  f88d0033          STRB     r0,[sp,#0x33]
00027a  4884              LDR      r0,|L1.1164|
00027c  f9b00000          LDRSH    r0,[r0,#0]  ; CAP_WRK_CURR
000280  f88d9078          STRB     r9,[sp,#0x78]
000284  17c3              ASRS     r3,r0,#31
000286  eb006313          ADD      r3,r0,r3,LSR #24
00028a  121c              ASRS     r4,r3,#8
00028c  f88d4034          STRB     r4,[sp,#0x34]
000290  f88d0035          STRB     r0,[sp,#0x35]
000294  f88d1079          STRB     r1,[sp,#0x79]
000298  0a10              LSRS     r0,r2,#8
00029a  f88d007a          STRB     r0,[sp,#0x7a]
00029e  4668              MOV      r0,sp
0002a0  eb000042          ADD      r0,r0,r2,LSL #1
0002a4  f88d207b          STRB     r2,[sp,#0x7b]
0002a8  f8300c02          LDRH     r0,[r0,#-2]
0002ac  f8ad007c          STRH     r0,[sp,#0x7c]
0002b0  2106              MOVS     r1,#6
0002b2  a81e              ADD      r0,sp,#0x78
0002b4  f7fffffe          BL       CRC16_2
0002b8  f88d007e          STRB     r0,[sp,#0x7e]
0002bc  0a00              LSRS     r0,r0,#8
0002be  f88d007f          STRB     r0,[sp,#0x7f]
0002c2  2400              MOVS     r4,#0
0002c4  ad1e              ADD      r5,sp,#0x78
                  |L1.710|
0002c6  5d28              LDRB     r0,[r5,r4]
0002c8  f7fffffe          BL       putchar0
0002cc  1c64              ADDS     r4,r4,#1
0002ce  b2e4              UXTB     r4,r4
0002d0  2c08              CMP      r4,#8
0002d2  d3f8              BCC      |L1.710|
0002d4  2400              MOVS     r4,#0
                  |L1.726|
0002d6  5d28              LDRB     r0,[r5,r4]
0002d8  f7fffffe          BL       putchar_sc16is700
0002dc  1c64              ADDS     r4,r4,#1
0002de  b2e4              UXTB     r4,r4
0002e0  2c08              CMP      r4,#8
0002e2  d3f8              BCC      |L1.726|
0002e4  b037              ADD      sp,sp,#0xdc
0002e6  e8bd83f0          POP      {r4-r9,pc}
;;;1292   
                          ENDP

                  modbus_input_registers_transmit PROC
;;;1056   //-----------------------------------------------
;;;1057   void modbus_input_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
0002ea  e92d4ff0          PUSH     {r4-r11,lr}
;;;1058   {
0002ee  4683              MOV      r11,r0
;;;1059   //char modbus_registers[110];
;;;1060   char modbus_tx_buff[200];
;;;1061   unsigned short crc_temp;
;;;1062   char i;
;;;1063   
;;;1064   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
0002f0  4867              LDR      r0,|L1.1168|
0002f2  468e              MOV      lr,r1                 ;1058
0002f4  4692              MOV      r10,r2                ;1058
0002f6  f9b01000          LDRSH    r1,[r0,#0]  ; load_U
0002fa  b0b3              SUB      sp,sp,#0xcc           ;1058
0002fc  17c8              ASRS     r0,r1,#31
0002fe  eb016210          ADD      r2,r1,r0,LSR #24
000302  4864              LDR      r0,|L1.1172|
000304  461c              MOV      r4,r3                 ;1058
000306  1213              ASRS     r3,r2,#8
000308  f8ddc0f0          LDR      r12,[sp,#0xf0]
00030c  7003              STRB     r3,[r0,#0]
;;;1065   modbus_registers[1]=(char)(load_U%256);
00030e  7041              STRB     r1,[r0,#1]
;;;1066   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
000310  4961              LDR      r1,|L1.1176|
;;;1067   modbus_registers[3]=(char)(load_I%256);
;;;1068   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
;;;1069   modbus_registers[5]=(char)((time_proc%60)%256);
;;;1070   modbus_registers[6]=(char)(((time_proc/60)%60)/256);		//Πεγ4
;;;1071   modbus_registers[7]=(char)(((time_proc/60)%60)%256);
;;;1072   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
000312  f44f2961          MOV      r9,#0xe1000
;;;1073   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000316  f44f6861          MOV      r8,#0xe10
00031a  f9b11000          LDRSH    r1,[r1,#0]            ;1066  ; load_I
00031e  17ca              ASRS     r2,r1,#31             ;1066
000320  eb016212          ADD      r2,r1,r2,LSR #24      ;1066
000324  1213              ASRS     r3,r2,#8              ;1066
000326  7083              STRB     r3,[r0,#2]            ;1066
000328  70c1              STRB     r1,[r0,#3]            ;1067
00032a  495c              LDR      r1,|L1.1180|
00032c  680b              LDR      r3,[r1,#0]            ;1068  ; time_proc
00032e  213c              MOVS     r1,#0x3c              ;1068
000330  fb93f5f1          SDIV     r5,r3,r1              ;1068
000334  fb013215          MLS      r2,r1,r5,r3           ;1068
000338  17d6              ASRS     r6,r2,#31             ;1068
00033a  eb026616          ADD      r6,r2,r6,LSR #24      ;1068
00033e  1237              ASRS     r7,r6,#8              ;1068
000340  7107              STRB     r7,[r0,#4]            ;1068
000342  7142              STRB     r2,[r0,#5]            ;1069
000344  fb95f2f1          SDIV     r2,r5,r1              ;1070
000348  fb015212          MLS      r2,r1,r2,r5           ;1070
00034c  17d5              ASRS     r5,r2,#31             ;1070
00034e  eb026515          ADD      r5,r2,r5,LSR #24      ;1070
000352  122e              ASRS     r6,r5,#8              ;1070
000354  7186              STRB     r6,[r0,#6]            ;1070
000356  71c2              STRB     r2,[r0,#7]            ;1071
000358  fb93f2f9          SDIV     r2,r3,r9              ;1072
00035c  7202              STRB     r2,[r0,#8]            ;1072
00035e  fb93f2f8          SDIV     r2,r3,r8
000362  7242              STRB     r2,[r0,#9]
;;;1074   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
000364  4a4e              LDR      r2,|L1.1184|
000366  6813              LDR      r3,[r2,#0]  ; time_proc_remain
000368  fb93f5f1          SDIV     r5,r3,r1
00036c  fb013215          MLS      r2,r1,r5,r3
000370  17d6              ASRS     r6,r2,#31
000372  eb026616          ADD      r6,r2,r6,LSR #24
000376  1237              ASRS     r7,r6,#8
000378  7287              STRB     r7,[r0,#0xa]
;;;1075   modbus_registers[11]=(char)((time_proc_remain%60)%256);
00037a  72c2              STRB     r2,[r0,#0xb]
;;;1076   modbus_registers[12]=(char)(((time_proc_remain/60)%60)/256);//Πεγ7
00037c  fb95f2f1          SDIV     r2,r5,r1
000380  fb015112          MLS      r1,r1,r2,r5
000384  17ca              ASRS     r2,r1,#31
000386  eb016212          ADD      r2,r1,r2,LSR #24
00038a  1215              ASRS     r5,r2,#8
00038c  7305              STRB     r5,[r0,#0xc]
;;;1077   modbus_registers[13]=(char)(((time_proc_remain/60)%60)%256);
00038e  7341              STRB     r1,[r0,#0xd]
;;;1078   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
000390  fb93f1f9          SDIV     r1,r3,r9
000394  7381              STRB     r1,[r0,#0xe]
;;;1079   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
000396  fb93f1f8          SDIV     r1,r3,r8
00039a  73c1              STRB     r1,[r0,#0xf]
;;;1080   modbus_registers[16]=(char)((CAP_COUNTER)/256);			//Πεγ9
00039c  4941              LDR      r1,|L1.1188|
00039e  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_COUNTER
0003a2  17ca              ASRS     r2,r1,#31
0003a4  eb016212          ADD      r2,r1,r2,LSR #24
0003a8  1213              ASRS     r3,r2,#8
0003aa  7403              STRB     r3,[r0,#0x10]
;;;1081   modbus_registers[17]=(char)((CAP_COUNTER)%256);
0003ac  7441              STRB     r1,[r0,#0x11]
;;;1082   modbus_registers[18]=(char)((CAP_TIME_SEC)/256);			//Πεγ10
0003ae  493e              LDR      r1,|L1.1192|
0003b0  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_SEC
0003b4  17ca              ASRS     r2,r1,#31
0003b6  eb016212          ADD      r2,r1,r2,LSR #24
0003ba  1213              ASRS     r3,r2,#8
0003bc  7483              STRB     r3,[r0,#0x12]
;;;1083   modbus_registers[19]=(char)((CAP_TIME_SEC)%256);
0003be  74c1              STRB     r1,[r0,#0x13]
;;;1084   modbus_registers[20]=(char)((CAP_TIME_MIN)/256);			//Πεγ11
0003c0  493a              LDR      r1,|L1.1196|
0003c2  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_MIN
0003c6  17ca              ASRS     r2,r1,#31
0003c8  eb016212          ADD      r2,r1,r2,LSR #24
0003cc  1213              ASRS     r3,r2,#8
0003ce  7503              STRB     r3,[r0,#0x14]
;;;1085   modbus_registers[21]=(char)((CAP_TIME_MIN)%256);
0003d0  7541              STRB     r1,[r0,#0x15]
;;;1086   modbus_registers[22]=(char)((CAP_TIME_HOUR)/256);			//Πεγ12
0003d2  4937              LDR      r1,|L1.1200|
0003d4  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_TIME_HOUR
0003d8  17ca              ASRS     r2,r1,#31
0003da  eb016212          ADD      r2,r1,r2,LSR #24
0003de  1213              ASRS     r3,r2,#8
0003e0  7583              STRB     r3,[r0,#0x16]
;;;1087   modbus_registers[23]=(char)((CAP_TIME_HOUR)%256);
0003e2  75c1              STRB     r1,[r0,#0x17]
0003e4  4601              MOV      r1,r0                 ;1064
;;;1088   
;;;1089   
;;;1090   /*
;;;1091   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
;;;1092   modbus_registers[17]=(char)(I_ug%256);
;;;1093   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
;;;1094   modbus_registers[19]=(char)(U_up%256);
;;;1095   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
;;;1096   modbus_registers[21]=(char)(U_maxg%256);
;;;1097   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
;;;1098   modbus_registers[23]=(char)(I_maxp%256);
;;;1099   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
;;;1100   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
;;;1101   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
;;;1102   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
;;;1103   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
;;;1104   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
;;;1105   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
;;;1106   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
;;;1107   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
;;;1108   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
;;;1109   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
;;;1110   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
;;;1111   modbus_registers[36]=0;								//Πεγ19
;;;1112   modbus_registers[37]=0;
;;;1113   if(work_stat==wsPS)modbus_registers[37]=1;
;;;1114   modbus_registers[38]=0;								//Πεγ20
;;;1115   modbus_registers[39]=0;
;;;1116   if(work_stat==wsGS)modbus_registers[39]=1;
;;;1117   modbus_registers[40]=0;								//Πεγ21
;;;1118   modbus_registers[41]=0;
;;;1119   if(REV_STAT==rsREW)modbus_registers[41]=1;
;;;1120   modbus_registers[42]=0;								//Πεγ22
;;;1121   modbus_registers[43]=0;
;;;1122   if(AVT_REV_IS_ON)modbus_registers[42]=1;
;;;1123   */
;;;1124   if(prot==MODBUS_RTU_PROT)
;;;1125   	{
;;;1126   	modbus_tx_buff[0]=adr;
;;;1127   	modbus_tx_buff[1]=func;
;;;1128   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1129   	
;;;1130   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-1)*2],reg_quantity*2);
0003e6  eb01014a          ADD      r1,r1,r10,LSL #1
0003ea  f1bc0f00          CMP      r12,#0                ;1124
0003ee  d008              BEQ      |L1.1026|
;;;1131   	
;;;1132   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1133   	
;;;1134   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1135   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1136   	
;;;1137   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1138   		{
;;;1139   		putchar0(modbus_tx_buff[i]);
;;;1140   		}
;;;1141   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1142   		{
;;;1143   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1144   		}
;;;1145   	}
;;;1146   else if(prot==MODBUS_TCP_PROT)
0003f0  f1bc0f01          CMP      r12,#1
0003f4  d102              BNE      |L1.1020|
;;;1147   	{
;;;1148   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-1)*2];
0003f6  482f              LDR      r0,|L1.1204|
0003f8  1e89              SUBS     r1,r1,#2
0003fa  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1020|
;;;1149   	}
;;;1150   }
0003fc  b033              ADD      sp,sp,#0xcc
0003fe  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.1026|
000402  f88db000          STRB     r11,[sp,#0]           ;1126
000406  f88de001          STRB     lr,[sp,#1]            ;1127
00040a  0062              LSLS     r2,r4,#1              ;1128
00040c  466d              MOV      r5,sp                 ;1130
00040e  f88d2002          STRB     r2,[sp,#2]            ;1128
000412  1e89              SUBS     r1,r1,#2              ;1130
000414  1ce8              ADDS     r0,r5,#3              ;1130
000416  f7fffffe          BL       __aeabi_memcpy
00041a  2003              MOVS     r0,#3                 ;1132
00041c  eb000044          ADD      r0,r0,r4,LSL #1       ;1132
000420  b201              SXTH     r1,r0                 ;1132
000422  4668              MOV      r0,sp                 ;1132
000424  f7fffffe          BL       CRC16_2
000428  eb050144          ADD      r1,r5,r4,LSL #1       ;1134
00042c  2600              MOVS     r6,#0                 ;1137
00042e  70c8              STRB     r0,[r1,#3]            ;1134
000430  0a00              LSRS     r0,r0,#8              ;1135
000432  7108              STRB     r0,[r1,#4]            ;1135
000434  2005              MOVS     r0,#5                 ;1137
000436  e03f              B        |L1.1208|
                  |L1.1080|
                          DCD      I_ug
                  |L1.1084|
                          DCD      U_up
                  |L1.1088|
                          DCD      U_maxg
                  |L1.1092|
                          DCD      I_maxp
                  |L1.1096|
                          DCD      T_PROC_GS
                  |L1.1100|
                          DCD      T_PROC_PS
                  |L1.1104|
                          DCD      work_stat
                  |L1.1108|
                          DCD      REV_STAT
                  |L1.1112|
                          DCD      AVT_REV_IS_ON
                  |L1.1116|
                          DCD      AVT_REV_TIME_FF
                  |L1.1120|
                          DCD      AVT_REV_TIME_REW
                  |L1.1124|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.1128|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.1132|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.1136|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.1140|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.1144|
                          DCD      CAP_ZAR_TIME
                  |L1.1148|
                          DCD      CAP_PAUSE1_TIME
                  |L1.1152|
                          DCD      CAP_RAZR_TIME
                  |L1.1156|
                          DCD      CAP_PAUSE2_TIME
                  |L1.1160|
                          DCD      CAP_MAX_VOLT
                  |L1.1164|
                          DCD      CAP_WRK_CURR
                  |L1.1168|
                          DCD      load_U
                  |L1.1172|
                          DCD      ||area_number.5||+0x3c
                  |L1.1176|
                          DCD      load_I
                  |L1.1180|
                          DCD      time_proc
                  |L1.1184|
                          DCD      time_proc_remain
                  |L1.1188|
                          DCD      CAP_COUNTER
                  |L1.1192|
                          DCD      CAP_TIME_SEC
                  |L1.1196|
                          DCD      CAP_TIME_MIN
                  |L1.1200|
                          DCD      CAP_TIME_HOUR
                  |L1.1204|
                          DCD      modbus_tcp_out_ptr
                  |L1.1208|
0004b8  eb000744          ADD      r7,r0,r4,LSL #1       ;1137
0004bc  e004              B        |L1.1224|
                  |L1.1214|
0004be  5da8              LDRB     r0,[r5,r6]            ;1139
0004c0  f7fffffe          BL       putchar0
0004c4  1c76              ADDS     r6,r6,#1              ;1137
0004c6  b2f6              UXTB     r6,r6                 ;1137
                  |L1.1224|
0004c8  42b7              CMP      r7,r6                 ;1137
0004ca  d8f8              BHI      |L1.1214|
0004cc  2400              MOVS     r4,#0                 ;1141
0004ce  e004              B        |L1.1242|
                  |L1.1232|
0004d0  5d28              LDRB     r0,[r5,r4]            ;1143
0004d2  f7fffffe          BL       putchar_sc16is700
0004d6  1c64              ADDS     r4,r4,#1              ;1141
0004d8  b2e4              UXTB     r4,r4                 ;1141
                  |L1.1242|
0004da  42a7              CMP      r7,r4                 ;1141
0004dc  d8f8              BHI      |L1.1232|
0004de  e78d              B        |L1.1020|
;;;1151   
                          ENDP

                  modbus_hold_registers_transmit PROC
;;;1387   //-----------------------------------------------
;;;1388   void modbus_hold_registers_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr, unsigned short reg_quantity, char prot)
0004e0  e92d4ff0          PUSH     {r4-r11,lr}
;;;1389   {
0004e4  4683              MOV      r11,r0
;;;1390   //char modbus_registers[110];
;;;1391   char modbus_tx_buff[200];
;;;1392   unsigned short crc_temp;
;;;1393   char i;
;;;1394   
;;;1395   modbus_registers[0]=(char)(I_ug/256);					//Πεγ50
0004e6  48fa              LDR      r0,|L1.2256|
0004e8  468e              MOV      lr,r1                 ;1389
0004ea  4692              MOV      r10,r2                ;1389
0004ec  f9b01000          LDRSH    r1,[r0,#0]  ; I_ug
0004f0  b0b3              SUB      sp,sp,#0xcc           ;1389
0004f2  17c8              ASRS     r0,r1,#31
0004f4  eb016210          ADD      r2,r1,r0,LSR #24
0004f8  48f6              LDR      r0,|L1.2260|
0004fa  461c              MOV      r4,r3                 ;1389
0004fc  1213              ASRS     r3,r2,#8
0004fe  f8ddc0f0          LDR      r12,[sp,#0xf0]
000502  7003              STRB     r3,[r0,#0]
;;;1396   modbus_registers[1]=(char)(I_ug%256);
000504  7041              STRB     r1,[r0,#1]
;;;1397   modbus_registers[2]=(char)(U_up/256);					//Πεγ51
000506  49f4              LDR      r1,|L1.2264|
;;;1398   modbus_registers[3]=(char)(U_up%256);
;;;1399   modbus_registers[4]=(char)(U_maxg/256);					//Πεγ52
;;;1400   modbus_registers[5]=(char)(U_maxg%256);
;;;1401   modbus_registers[6]=(char)(I_maxp/256);					//Πεγ53
;;;1402   modbus_registers[7]=(char)(I_maxp%256);
;;;1403   modbus_registers[8]=(char)((T_PROC_GS%60)/256);			//Πεγ54
;;;1404   modbus_registers[9]=(char)((T_PROC_GS%60)%256);
;;;1405   modbus_registers[10]=(char)(((T_PROC_GS/60)%60)/256);		//Πεγ55
;;;1406   modbus_registers[11]=(char)(((T_PROC_GS/60)%60)%256);
;;;1407   modbus_registers[12]=(char)((T_PROC_GS/3600)/256);		//Πεγ56
000508  f44f2961          MOV      r9,#0xe1000
;;;1408   modbus_registers[13]=(char)((T_PROC_GS/3600)%256);
00050c  f44f6861          MOV      r8,#0xe10
000510  f9b11000          LDRSH    r1,[r1,#0]            ;1397  ; U_up
000514  17ca              ASRS     r2,r1,#31             ;1397
000516  eb016212          ADD      r2,r1,r2,LSR #24      ;1397
00051a  1213              ASRS     r3,r2,#8              ;1397
00051c  7083              STRB     r3,[r0,#2]            ;1397
00051e  70c1              STRB     r1,[r0,#3]            ;1398
000520  49ee              LDR      r1,|L1.2268|
000522  f9b11000          LDRSH    r1,[r1,#0]            ;1399  ; U_maxg
000526  17ca              ASRS     r2,r1,#31             ;1399
000528  eb016212          ADD      r2,r1,r2,LSR #24      ;1399
00052c  1213              ASRS     r3,r2,#8              ;1399
00052e  7103              STRB     r3,[r0,#4]            ;1399
000530  7141              STRB     r1,[r0,#5]            ;1400
000532  49eb              LDR      r1,|L1.2272|
000534  f9b11000          LDRSH    r1,[r1,#0]            ;1401  ; I_maxp
000538  17ca              ASRS     r2,r1,#31             ;1401
00053a  eb016212          ADD      r2,r1,r2,LSR #24      ;1401
00053e  1213              ASRS     r3,r2,#8              ;1401
000540  7183              STRB     r3,[r0,#6]            ;1401
000542  71c1              STRB     r1,[r0,#7]            ;1402
000544  49e7              LDR      r1,|L1.2276|
000546  223c              MOVS     r2,#0x3c              ;1403
000548  680b              LDR      r3,[r1,#0]            ;1403  ; T_PROC_GS
00054a  fb93f7f2          SDIV     r7,r3,r2              ;1403
00054e  fb023117          MLS      r1,r2,r7,r3           ;1403
000552  17cd              ASRS     r5,r1,#31             ;1403
000554  eb016515          ADD      r5,r1,r5,LSR #24      ;1403
000558  122e              ASRS     r6,r5,#8              ;1403
00055a  7206              STRB     r6,[r0,#8]            ;1403
00055c  7241              STRB     r1,[r0,#9]            ;1404
00055e  fb97f1f2          SDIV     r1,r7,r2              ;1405
000562  fb027111          MLS      r1,r2,r1,r7           ;1405
000566  17cd              ASRS     r5,r1,#31             ;1405
000568  eb016515          ADD      r5,r1,r5,LSR #24      ;1405
00056c  122e              ASRS     r6,r5,#8              ;1405
00056e  7286              STRB     r6,[r0,#0xa]          ;1405
000570  72c1              STRB     r1,[r0,#0xb]          ;1406
000572  fb93f1f9          SDIV     r1,r3,r9              ;1407
000576  7301              STRB     r1,[r0,#0xc]          ;1407
000578  fb93f1f8          SDIV     r1,r3,r8
00057c  7341              STRB     r1,[r0,#0xd]
;;;1409   modbus_registers[14]=(char)((T_PROC_PS%60)/256);			//Πεγ57
00057e  49da              LDR      r1,|L1.2280|
000580  680b              LDR      r3,[r1,#0]  ; T_PROC_PS
000582  fb93f7f2          SDIV     r7,r3,r2
000586  fb023117          MLS      r1,r2,r7,r3
00058a  17cd              ASRS     r5,r1,#31
00058c  eb016515          ADD      r5,r1,r5,LSR #24
000590  122e              ASRS     r6,r5,#8
000592  7386              STRB     r6,[r0,#0xe]
;;;1410   modbus_registers[15]=(char)((T_PROC_PS%60)%256);
000594  73c1              STRB     r1,[r0,#0xf]
;;;1411   modbus_registers[16]=(char)(((T_PROC_PS/60)%60)/256);		//Πεγ58
000596  fb97f1f2          SDIV     r1,r7,r2
00059a  fb027111          MLS      r1,r2,r1,r7
00059e  17ca              ASRS     r2,r1,#31
0005a0  eb016212          ADD      r2,r1,r2,LSR #24
0005a4  1215              ASRS     r5,r2,#8
0005a6  7405              STRB     r5,[r0,#0x10]
;;;1412   modbus_registers[17]=(char)(((T_PROC_PS/60)%60)%256);
0005a8  7441              STRB     r1,[r0,#0x11]
;;;1413   modbus_registers[18]=(char)((T_PROC_PS/3600)/256);		//Πεγ59
0005aa  fb93f1f9          SDIV     r1,r3,r9
0005ae  7481              STRB     r1,[r0,#0x12]
;;;1414   modbus_registers[19]=(char)((T_PROC_PS/3600)%256);
0005b0  fb93f1f8          SDIV     r1,r3,r8
0005b4  74c1              STRB     r1,[r0,#0x13]
;;;1415   modbus_registers[20]=0;								//Πεγ60
0005b6  2100              MOVS     r1,#0
;;;1416   modbus_registers[21]=0;
;;;1417   if(work_stat==wsPS)modbus_registers[21]=1;
0005b8  4acc              LDR      r2,|L1.2284|
0005ba  7501              STRB     r1,[r0,#0x14]         ;1415
0005bc  7541              STRB     r1,[r0,#0x15]         ;1416
0005be  7813              LDRB     r3,[r2,#0]  ; work_stat
0005c0  2201              MOVS     r2,#1
0005c2  2b02              CMP      r3,#2
0005c4  d100              BNE      |L1.1480|
0005c6  7542              STRB     r2,[r0,#0x15]
                  |L1.1480|
;;;1418   modbus_registers[22]=0;								//Πεγ61
0005c8  7581              STRB     r1,[r0,#0x16]
;;;1419   modbus_registers[23]=0;
0005ca  75c1              STRB     r1,[r0,#0x17]
;;;1420   if(work_stat==wsGS)modbus_registers[23]=1;
0005cc  2b01              CMP      r3,#1
0005ce  d100              BNE      |L1.1490|
0005d0  75c2              STRB     r2,[r0,#0x17]
                  |L1.1490|
;;;1421   modbus_registers[24]=0;								//Πεγ62
;;;1422   modbus_registers[25]=0;
;;;1423   if(REV_STAT==rsREW)modbus_registers[25]=1;
0005d2  4bc7              LDR      r3,|L1.2288|
0005d4  7601              STRB     r1,[r0,#0x18]         ;1421
0005d6  7641              STRB     r1,[r0,#0x19]         ;1422
0005d8  781b              LDRB     r3,[r3,#0]  ; REV_STAT
0005da  b903              CBNZ     r3,|L1.1502|
0005dc  7642              STRB     r2,[r0,#0x19]
                  |L1.1502|
;;;1424   modbus_registers[26]=0;								//Πεγ63
0005de  7681              STRB     r1,[r0,#0x1a]
;;;1425   modbus_registers[27]=0;
0005e0  76c1              STRB     r1,[r0,#0x1b]
;;;1426   if(AVT_REV_IS_ON)modbus_registers[27]=1;
0005e2  49c4              LDR      r1,|L1.2292|
0005e4  8809              LDRH     r1,[r1,#0]  ; AVT_REV_IS_ON
0005e6  b101              CBZ      r1,|L1.1514|
0005e8  76c2              STRB     r2,[r0,#0x1b]
                  |L1.1514|
;;;1427   modbus_registers[28]=(char)((AVT_REV_TIME_FF)/256);		//Πεγ64
0005ea  49c3              LDR      r1,|L1.2296|
0005ec  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_TIME_FF
0005f0  17ca              ASRS     r2,r1,#31
0005f2  eb016212          ADD      r2,r1,r2,LSR #24
0005f6  1213              ASRS     r3,r2,#8
0005f8  f8003f1c          STRB     r3,[r0,#0x1c]!
;;;1428   modbus_registers[29]=(char)((AVT_REV_TIME_FF)%256);
0005fc  7041              STRB     r1,[r0,#1]
;;;1429   modbus_registers[30]=(char)((AVT_REV_TIME_REW)/256);		//Πεγ65
0005fe  49bf              LDR      r1,|L1.2300|
000600  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_TIME_REW
000604  17ca              ASRS     r2,r1,#31
000606  eb016212          ADD      r2,r1,r2,LSR #24
00060a  1213              ASRS     r3,r2,#8
00060c  7083              STRB     r3,[r0,#2]
;;;1430   modbus_registers[31]=(char)((AVT_REV_TIME_REW)%256);
00060e  70c1              STRB     r1,[r0,#3]
;;;1431   modbus_registers[32]=(char)((AVT_REV_TIME_PAUSE)/256);		//Πεγ66
000610  49bb              LDR      r1,|L1.2304|
000612  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_TIME_PAUSE
000616  17ca              ASRS     r2,r1,#31
000618  eb016212          ADD      r2,r1,r2,LSR #24
00061c  1213              ASRS     r3,r2,#8
00061e  7103              STRB     r3,[r0,#4]
;;;1432   modbus_registers[33]=(char)((AVT_REV_TIME_PAUSE)%256);
000620  7141              STRB     r1,[r0,#5]
;;;1433   modbus_registers[34]=(char)((AVT_REV_I_NOM_FF)/256);		//Πεγ67
000622  49b8              LDR      r1,|L1.2308|
000624  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_I_NOM_FF
000628  17ca              ASRS     r2,r1,#31
00062a  eb016212          ADD      r2,r1,r2,LSR #24
00062e  1213              ASRS     r3,r2,#8
000630  7183              STRB     r3,[r0,#6]
;;;1434   modbus_registers[35]=(char)((AVT_REV_I_NOM_FF)%256);
000632  71c1              STRB     r1,[r0,#7]
;;;1435   modbus_registers[36]=(char)((AVT_REV_I_NOM_REW)/256);		//Πεγ68
000634  49b4              LDR      r1,|L1.2312|
000636  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_I_NOM_REW
00063a  17ca              ASRS     r2,r1,#31
00063c  eb016212          ADD      r2,r1,r2,LSR #24
000640  1213              ASRS     r3,r2,#8
000642  7203              STRB     r3,[r0,#8]
;;;1436   modbus_registers[37]=(char)((AVT_REV_I_NOM_REW)%256);
000644  7241              STRB     r1,[r0,#9]
;;;1437   modbus_registers[38]=(char)((AVT_REV_U_NOM_FF)/256);		//Πεγ69
000646  49b1              LDR      r1,|L1.2316|
000648  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_U_NOM_FF
00064c  17ca              ASRS     r2,r1,#31
00064e  eb016212          ADD      r2,r1,r2,LSR #24
000652  1213              ASRS     r3,r2,#8
000654  7283              STRB     r3,[r0,#0xa]
;;;1438   modbus_registers[39]=(char)((AVT_REV_U_NOM_FF)%256);
000656  72c1              STRB     r1,[r0,#0xb]
;;;1439   modbus_registers[40]=(char)((AVT_REV_U_NOM_REW)/256);		//Πεγ70
000658  49ad              LDR      r1,|L1.2320|
00065a  f9b11000          LDRSH    r1,[r1,#0]  ; AVT_REV_U_NOM_REW
00065e  17ca              ASRS     r2,r1,#31
000660  eb016212          ADD      r2,r1,r2,LSR #24
000664  1213              ASRS     r3,r2,#8
000666  7303              STRB     r3,[r0,#0xc]
;;;1440   modbus_registers[41]=(char)((AVT_REV_U_NOM_REW)%256);
000668  7341              STRB     r1,[r0,#0xd]
;;;1441   modbus_registers[42]=(char)((CAP_ZAR_TIME)/256);			//Πεγ71
00066a  49aa              LDR      r1,|L1.2324|
00066c  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_ZAR_TIME
000670  17ca              ASRS     r2,r1,#31
000672  eb016212          ADD      r2,r1,r2,LSR #24
000676  1213              ASRS     r3,r2,#8
000678  7383              STRB     r3,[r0,#0xe]
;;;1442   modbus_registers[43]=(char)((CAP_ZAR_TIME)%256);
00067a  73c1              STRB     r1,[r0,#0xf]
;;;1443   modbus_registers[44]=(char)((CAP_PAUSE1_TIME)/256);		//Πεγ72
00067c  49a6              LDR      r1,|L1.2328|
00067e  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_PAUSE1_TIME
000682  17ca              ASRS     r2,r1,#31
000684  eb016212          ADD      r2,r1,r2,LSR #24
000688  1213              ASRS     r3,r2,#8
00068a  7403              STRB     r3,[r0,#0x10]
;;;1444   modbus_registers[45]=(char)((CAP_PAUSE1_TIME)%256);
00068c  7441              STRB     r1,[r0,#0x11]
;;;1445   modbus_registers[46]=(char)((CAP_RAZR_TIME)/256);			//Πεγ73
00068e  49a3              LDR      r1,|L1.2332|
000690  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_RAZR_TIME
000694  17ca              ASRS     r2,r1,#31
000696  eb016212          ADD      r2,r1,r2,LSR #24
00069a  1213              ASRS     r3,r2,#8
00069c  7483              STRB     r3,[r0,#0x12]
;;;1446   modbus_registers[47]=(char)((CAP_RAZR_TIME)%256);
00069e  74c1              STRB     r1,[r0,#0x13]
;;;1447   modbus_registers[48]=(char)((CAP_PAUSE2_TIME)/256);		//Πεγ74
0006a0  499f              LDR      r1,|L1.2336|
0006a2  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_PAUSE2_TIME
0006a6  17ca              ASRS     r2,r1,#31
0006a8  eb016212          ADD      r2,r1,r2,LSR #24
0006ac  1213              ASRS     r3,r2,#8
0006ae  7503              STRB     r3,[r0,#0x14]
;;;1448   modbus_registers[49]=(char)((CAP_PAUSE2_TIME)%256);
0006b0  7541              STRB     r1,[r0,#0x15]
;;;1449   modbus_registers[50]=(char)((CAP_MAX_VOLT)/256);			//Πεγ75
0006b2  499c              LDR      r1,|L1.2340|
0006b4  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_MAX_VOLT
0006b8  17ca              ASRS     r2,r1,#31
0006ba  eb016212          ADD      r2,r1,r2,LSR #24
0006be  1213              ASRS     r3,r2,#8
0006c0  7583              STRB     r3,[r0,#0x16]
;;;1450   modbus_registers[51]=(char)((CAP_MAX_VOLT)%256);
0006c2  75c1              STRB     r1,[r0,#0x17]
;;;1451   modbus_registers[52]=(char)((CAP_WRK_CURR)/256);			//Πεγ76
0006c4  4998              LDR      r1,|L1.2344|
0006c6  f9b11000          LDRSH    r1,[r1,#0]  ; CAP_WRK_CURR
0006ca  17ca              ASRS     r2,r1,#31
0006cc  eb016212          ADD      r2,r1,r2,LSR #24
0006d0  1213              ASRS     r3,r2,#8
0006d2  7603              STRB     r3,[r0,#0x18]
;;;1452   modbus_registers[53]=(char)((CAP_WRK_CURR)%256);
0006d4  7641              STRB     r1,[r0,#0x19]
0006d6  497f              LDR      r1,|L1.2260|
;;;1453   
;;;1454   if(prot==MODBUS_RTU_PROT)
0006d8  f1bc0f00          CMP      r12,#0
;;;1455   	{
;;;1456   	modbus_tx_buff[0]=adr;
;;;1457   	modbus_tx_buff[1]=func;
;;;1458   	modbus_tx_buff[2]=(char)(reg_quantity*2);
;;;1459   	
;;;1460   	memcpy((char*)&modbus_tx_buff[3],(char*)&modbus_registers[(reg_adr-50)*2],reg_quantity*2);
0006dc  eb01014a          ADD      r1,r1,r10,LSL #1
0006e0  d006              BEQ      |L1.1776|
;;;1461   							   
;;;1462   	crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
;;;1463   	
;;;1464   	modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
;;;1465   	modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1466   	
;;;1467   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1468   		{
;;;1469   		putchar0(modbus_tx_buff[i]);
;;;1470   		}
;;;1471   	for (i=0;i<(5+(reg_quantity*2));i++)
;;;1472   		{
;;;1473   		putchar_sc16is700(modbus_tx_buff[i]);
;;;1474   		}
;;;1475   	}
;;;1476   else if(prot==MODBUS_TCP_PROT)
0006e2  f1bc0f01          CMP      r12,#1
0006e6  d102              BNE      |L1.1774|
;;;1477   	{
;;;1478   	modbus_tcp_out_ptr=(char*)&modbus_registers[(reg_adr-1)*2];
0006e8  4890              LDR      r0,|L1.2348|
0006ea  1e89              SUBS     r1,r1,#2
0006ec  6001              STR      r1,[r0,#0]  ; modbus_tcp_out_ptr
                  |L1.1774|
;;;1479   	}
;;;1480   }
0006ee  e685              B        |L1.1020|
                  |L1.1776|
0006f0  f88db000          STRB     r11,[sp,#0]           ;1456
0006f4  f88de001          STRB     lr,[sp,#1]            ;1457
0006f8  0062              LSLS     r2,r4,#1              ;1458
0006fa  466d              MOV      r5,sp                 ;1460
0006fc  f88d2002          STRB     r2,[sp,#2]            ;1458
000700  3964              SUBS     r1,r1,#0x64           ;1460
000702  1ce8              ADDS     r0,r5,#3              ;1460
000704  f7fffffe          BL       __aeabi_memcpy
000708  2003              MOVS     r0,#3                 ;1462
00070a  eb000044          ADD      r0,r0,r4,LSL #1       ;1462
00070e  b201              SXTH     r1,r0                 ;1462
000710  4668              MOV      r0,sp                 ;1462
000712  f7fffffe          BL       CRC16_2
000716  eb050144          ADD      r1,r5,r4,LSL #1       ;1464
00071a  2600              MOVS     r6,#0                 ;1467
00071c  70c8              STRB     r0,[r1,#3]            ;1464
00071e  0a00              LSRS     r0,r0,#8              ;1465
000720  7108              STRB     r0,[r1,#4]            ;1465
000722  2005              MOVS     r0,#5                 ;1467
000724  eb000744          ADD      r7,r0,r4,LSL #1       ;1467
000728  e004              B        |L1.1844|
                  |L1.1834|
00072a  5da8              LDRB     r0,[r5,r6]            ;1469
00072c  f7fffffe          BL       putchar0
000730  1c76              ADDS     r6,r6,#1              ;1467
000732  b2f6              UXTB     r6,r6                 ;1467
                  |L1.1844|
000734  42b7              CMP      r7,r6                 ;1467
000736  d8f8              BHI      |L1.1834|
000738  2400              MOVS     r4,#0                 ;1471
00073a  e004              B        |L1.1862|
                  |L1.1852|
00073c  5d28              LDRB     r0,[r5,r4]            ;1473
00073e  f7fffffe          BL       putchar_sc16is700
000742  1c64              ADDS     r4,r4,#1              ;1471
000744  b2e4              UXTB     r4,r4                 ;1471
                  |L1.1862|
000746  42a7              CMP      r7,r4                 ;1471
000748  d8f8              BHI      |L1.1852|
00074a  e657              B        |L1.1020|
;;;1481   
                          ENDP

                  modbus_for_pult_registers_transmit PROC
;;;1153   //-----------------------------------------------
;;;1154   void modbus_for_pult_registers_transmit(unsigned short reg_quantity)
00074c  b570              PUSH     {r4-r6,lr}
;;;1155   {
00074e  4606              MOV      r6,r0
;;;1156   char modbus_registers[20];
;;;1157   char modbus_tx_buff[30];
;;;1158   unsigned short crc_temp;
;;;1159   char i;
;;;1160   //char reg_quantity=4;
;;;1161   
;;;1162   //pult_time_set=0xffff;
;;;1163   
;;;1164   modbus_registers[0]=(char)(pult_u%256);
000750  4877              LDR      r0,|L1.2352|
000752  b090              SUB      sp,sp,#0x40           ;1155
;;;1165   modbus_registers[1]=(char)(pult_u/256);					//Πεγ1
;;;1166   modbus_registers[2]=(char)(pult_i%256);
;;;1167   modbus_registers[3]=(char)(pult_i/256);					//Πεγ2
;;;1168   modbus_registers[4]=(char)(pult_work_stat%256);
;;;1169   modbus_registers[5]=(char)(pult_work_stat/256);			//Πεγ3
;;;1170   modbus_registers[6]=(char)(pult_u_set%256);
;;;1171   modbus_registers[7]=(char)(pult_u_set/256);				//Πεγ4
;;;1172   modbus_registers[8]=(char)(pult_time%256);
;;;1173   modbus_registers[9]=(char)(pult_time/256);				//Πεγ5
;;;1174   modbus_registers[10]=(char)(pult_time_set%256);		 	
;;;1175   modbus_registers[11]=(char)(pult_time_set/256);			//Πεγ6
;;;1176   modbus_registers[12]=(char)(pult_i_set%256);
;;;1177   modbus_registers[13]=(char)(pult_i_set/256);				//Πεγ7
;;;1178   
;;;1179   
;;;1180   modbus_tx_buff[0]=201;
;;;1181   modbus_tx_buff[1]=4;
;;;1182   modbus_tx_buff[2]=(char)(reg_quantity*2);
000754  0072              LSLS     r2,r6,#1
000756  f9b00000          LDRSH    r0,[r0,#0]            ;1164  ; pult_u
00075a  f88d0024          STRB     r0,[sp,#0x24]         ;1164
00075e  17c1              ASRS     r1,r0,#31             ;1164
000760  eb006111          ADD      r1,r0,r1,LSR #24      ;1164
000764  1208              ASRS     r0,r1,#8              ;1165
000766  f88d0025          STRB     r0,[sp,#0x25]         ;1165
00076a  4872              LDR      r0,|L1.2356|
;;;1183   
;;;1184   memcpy((char*)&modbus_tx_buff[3],(char*)modbus_registers,reg_quantity*2);
00076c  466c              MOV      r4,sp
00076e  f9b00000          LDRSH    r0,[r0,#0]            ;1166  ; pult_i
000772  f88d0026          STRB     r0,[sp,#0x26]         ;1166
000776  17c1              ASRS     r1,r0,#31             ;1166
000778  eb006111          ADD      r1,r0,r1,LSR #24      ;1166
00077c  1208              ASRS     r0,r1,#8              ;1167
00077e  f88d0027          STRB     r0,[sp,#0x27]         ;1167
000782  486d              LDR      r0,|L1.2360|
000784  7800              LDRB     r0,[r0,#0]            ;1168  ; pult_work_stat
000786  f88d0028          STRB     r0,[sp,#0x28]         ;1168
00078a  2000              MOVS     r0,#0                 ;1169
00078c  f88d0029          STRB     r0,[sp,#0x29]         ;1169
000790  486a              LDR      r0,|L1.2364|
000792  f9b00000          LDRSH    r0,[r0,#0]            ;1170  ; pult_u_set
000796  f88d002a          STRB     r0,[sp,#0x2a]         ;1170
00079a  17c1              ASRS     r1,r0,#31             ;1170
00079c  eb006111          ADD      r1,r0,r1,LSR #24      ;1170
0007a0  1208              ASRS     r0,r1,#8              ;1171
0007a2  f88d002b          STRB     r0,[sp,#0x2b]         ;1171
0007a6  4866              LDR      r0,|L1.2368|
0007a8  f9b00000          LDRSH    r0,[r0,#0]            ;1172  ; pult_time
0007ac  f88d002c          STRB     r0,[sp,#0x2c]         ;1172
0007b0  17c1              ASRS     r1,r0,#31             ;1172
0007b2  eb006111          ADD      r1,r0,r1,LSR #24      ;1172
0007b6  1208              ASRS     r0,r1,#8              ;1173
0007b8  f88d002d          STRB     r0,[sp,#0x2d]         ;1173
0007bc  4861              LDR      r0,|L1.2372|
0007be  8800              LDRH     r0,[r0,#0]            ;1174  ; pult_time_set
0007c0  f88d002e          STRB     r0,[sp,#0x2e]         ;1174
0007c4  0a00              LSRS     r0,r0,#8              ;1175
0007c6  f88d002f          STRB     r0,[sp,#0x2f]         ;1175
0007ca  485f              LDR      r0,|L1.2376|
0007cc  f9b00000          LDRSH    r0,[r0,#0]            ;1176  ; pult_i_set
0007d0  f88d0030          STRB     r0,[sp,#0x30]         ;1176
0007d4  17c1              ASRS     r1,r0,#31             ;1176
0007d6  eb006111          ADD      r1,r0,r1,LSR #24      ;1176
0007da  1208              ASRS     r0,r1,#8              ;1177
0007dc  f88d0031          STRB     r0,[sp,#0x31]         ;1177
0007e0  20c9              MOVS     r0,#0xc9              ;1180
0007e2  f88d0000          STRB     r0,[sp,#0]            ;1180
0007e6  2004              MOVS     r0,#4                 ;1181
0007e8  f88d0001          STRB     r0,[sp,#1]            ;1181
0007ec  f88d2002          STRB     r2,[sp,#2]            ;1182
0007f0  a909              ADD      r1,sp,#0x24
0007f2  1ce0              ADDS     r0,r4,#3
0007f4  f7fffffe          BL       __aeabi_memcpy
;;;1185   
;;;1186   crc_temp=CRC16_2(modbus_tx_buff,(reg_quantity*2)+3);
0007f8  2003              MOVS     r0,#3
0007fa  eb000046          ADD      r0,r0,r6,LSL #1
0007fe  b201              SXTH     r1,r0
000800  4668              MOV      r0,sp
000802  f7fffffe          BL       CRC16_2
;;;1187   
;;;1188   modbus_tx_buff[3+(reg_quantity*2)]=crc_temp%256;
000806  eb040146          ADD      r1,r4,r6,LSL #1
;;;1189   modbus_tx_buff[4+(reg_quantity*2)]=crc_temp/256;
;;;1190   
;;;1191   for (i=0;i<(5+(reg_quantity*2));i++)
00080a  2500              MOVS     r5,#0
00080c  70c8              STRB     r0,[r1,#3]            ;1188
00080e  0a00              LSRS     r0,r0,#8              ;1189
000810  7108              STRB     r0,[r1,#4]            ;1189
000812  2005              MOVS     r0,#5
000814  eb000646          ADD      r6,r0,r6,LSL #1
000818  e004              B        |L1.2084|
                  |L1.2074|
;;;1192   	{
;;;1193   	putchar0(modbus_tx_buff[i]);
00081a  5d60              LDRB     r0,[r4,r5]
00081c  f7fffffe          BL       putchar0
000820  1c6d              ADDS     r5,r5,#1              ;1191
000822  b2ed              UXTB     r5,r5                 ;1191
                  |L1.2084|
000824  42ae              CMP      r6,r5                 ;1191
000826  d8f8              BHI      |L1.2074|
;;;1194   	}
;;;1195   for (i=0;i<(5+(reg_quantity*2));i++)
000828  2500              MOVS     r5,#0
00082a  e004              B        |L1.2102|
                  |L1.2092|
;;;1196   	{
;;;1197   	putchar_sc16is700(modbus_tx_buff[i]);
00082c  5d60              LDRB     r0,[r4,r5]
00082e  f7fffffe          BL       putchar_sc16is700
000832  1c6d              ADDS     r5,r5,#1              ;1195
000834  b2ed              UXTB     r5,r5                 ;1195
                  |L1.2102|
000836  42ae              CMP      r6,r5                 ;1195
000838  d8f8              BHI      |L1.2092|
;;;1198   	}
;;;1199   //modbus_plazma1++;
;;;1200   }
00083a  b010              ADD      sp,sp,#0x40
00083c  bd70              POP      {r4-r6,pc}
;;;1201   
                          ENDP

                  modbus_in PROC
;;;62     //-----------------------------------------------
;;;63     void modbus_in(void)
00083e  e92d5ffc          PUSH     {r2-r12,lr}
;;;64     {
;;;65     short crc16_calculated;		//βϋχθρλεμΰ θη οπθνςϋυ δΰννϋυ CRC
;;;66     short crc16_incapsulated;	//βρςπξενννΰ β οξρϋλκσ CRC
;;;67     unsigned short modbus_rx_arg0;		//βρςπξεννϋι β οξρϋλκσ οεπβϋι ΰπγσμενς
;;;68     unsigned short modbus_rx_arg1;		//βρςπξεννϋι β οξρϋλκσ βςξπξι ΰπγσμενς
;;;69     //unsigned short modbus_rx_arg2;		//βρςπξεννϋι β οξρϋλκσ ςπεςθι ΰπγσμενς
;;;70     //unsigned short modbus_rx_arg3;		//βρςπξεννϋι β οξρϋλκσ χεςβεπςϋι ΰπγσμενς
;;;71     unsigned char modbus_func;			//βρςπξεννϋι β οξρϋλκσ κξδ τσνκφθθ
;;;72     
;;;73     //modbus_plazma++;
;;;74     
;;;75     memcpy(modbus_an_buffer,modbus_rx_buffer,modbus_rx_buffer_ptr);
000842  4d42              LDR      r5,|L1.2380|
000844  4923              LDR      r1,|L1.2260|
000846  78aa              LDRB     r2,[r5,#2]  ; modbus_rx_buffer_ptr
000848  393c              SUBS     r1,r1,#0x3c
00084a  4614              MOV      r4,r2
00084c  f101001e          ADD      r0,r1,#0x1e
000850  f7fffffe          BL       __aeabi_memcpy
;;;76     modbus_rx_counter=modbus_rx_buffer_ptr;
000854  70ec              STRB     r4,[r5,#3]
;;;77     modbus_rx_buffer_ptr=0;
000856  2000              MOVS     r0,#0
000858  70a8              STRB     r0,[r5,#2]
;;;78     bMODBUS_TIMEOUT=0;
00085a  7068              STRB     r0,[r5,#1]
;;;79     
;;;80     	
;;;81     crc16_calculated  = CRC16_2((char*)modbus_an_buffer, modbus_rx_counter-2);
00085c  481d              LDR      r0,|L1.2260|
00085e  1ea1              SUBS     r1,r4,#2
000860  381e              SUBS     r0,r0,#0x1e
000862  f7fffffe          BL       CRC16_2
000866  b201              SXTH     r1,r0
;;;82     crc16_incapsulated = *((short*)&modbus_an_buffer[modbus_rx_counter-2]);
000868  4e1a              LDR      r6,|L1.2260|
00086a  78e8              LDRB     r0,[r5,#3]  ; modbus_rx_counter
00086c  3e1e              SUBS     r6,r6,#0x1e
00086e  4430              ADD      r0,r0,r6
000870  f9302c02          LDRSH    r2,[r0,#-2]
;;;83     
;;;84     //modbus_plazma=modbus_rx_counter;
;;;85     //modbus_plazma2=crc16_calculated;
;;;86     //modbus_plazma3=crc16_incapsulated;
;;;87     
;;;88     
;;;89     
;;;90     
;;;91     modbus_func=modbus_an_buffer[1];
000874  7870              LDRB     r0,[r6,#1]  ; modbus_an_buffer
;;;92     modbus_rx_arg0=(((unsigned short)modbus_an_buffer[2])*((unsigned short)256))+((unsigned short)modbus_an_buffer[3]);
000876  9001              STR      r0,[sp,#4]
000878  78f0              LDRB     r0,[r6,#3]  ; modbus_an_buffer
00087a  78b3              LDRB     r3,[r6,#2]  ; modbus_an_buffer
;;;93     modbus_rx_arg1=(((unsigned short)modbus_an_buffer[4])*((unsigned short)256))+((unsigned short)modbus_an_buffer[5]);
;;;94     //modbus_rx_arg2=(((unsigned short)modbus_an_buffer[6])*((unsigned short)256))+((unsigned short)modbus_an_buffer[7]);
;;;95     //modbus_rx_arg3=(((unsigned short)modbus_an_buffer[8])*((unsigned short)256))+((unsigned short)modbus_an_buffer[9]);
;;;96     modbus_cmnd=(modbus_rx_arg1>>8)&0x7f;
;;;97     modbus_cmnd_cnt=(modbus_rx_arg1)&0x0f;
;;;98     
;;;99     modbus_plazma3=modbus_cmnd;
;;;100    modbus_plazma2=modbus_cmnd_cnt;
;;;101    modbus_plazma1=modbus_self_cmnd_cnt;
;;;102    
;;;103    if(crc16_calculated==crc16_incapsulated)
00087c  4291              CMP      r1,r2
00087e  eb002003          ADD      r0,r0,r3,LSL #8       ;92
000882  b287              UXTH     r7,r0                 ;92
000884  7970              LDRB     r0,[r6,#5]            ;93  ; modbus_an_buffer
000886  7933              LDRB     r3,[r6,#4]            ;93  ; modbus_an_buffer
000888  eb002003          ADD      r0,r0,r3,LSL #8       ;93
00088c  b284              UXTH     r4,r0                 ;93
00088e  f3c42306          UBFX     r3,r4,#8,#7           ;96
000892  716b              STRB     r3,[r5,#5]            ;96
000894  f004000f          AND      r0,r4,#0xf            ;97
000898  7128              STRB     r0,[r5,#4]            ;97
00089a  81ab              STRH     r3,[r5,#0xc]          ;99
00089c  8168              STRH     r0,[r5,#0xa]          ;100
00089e  782b              LDRB     r3,[r5,#0]            ;101  ; modbus_self_cmnd_cnt
0008a0  812b              STRH     r3,[r5,#8]            ;101
0008a2  d17d              BNE      |L1.2464|
;;;104    	{
;;;105    	if(modbus_self_cmnd_cnt==33)modbus_self_cmnd_cnt=modbus_cmnd_cnt;
0008a4  2b21              CMP      r3,#0x21
0008a6  d100              BNE      |L1.2218|
0008a8  7028              STRB     r0,[r5,#0]
                  |L1.2218|
;;;106    	modbus_plazma=modbus_an_buffer[0];
0008aa  480a              LDR      r0,|L1.2260|
0008ac  46a8              MOV      r8,r5
0008ae  381e              SUBS     r0,r0,#0x1e
;;;107    	if(modbus_an_buffer[0]==200)	 //ερλθ ηΰοπξρ ξς οσλόςΰ
;;;108    		{
;;;109    		if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
;;;110    			{
;;;111    			modbus_for_pult_registers_transmit(7);
;;;112    			}
;;;113    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
;;;114    			{
;;;115    			//if(modbus_rx_arg0==1)		//
;;;116    				{
;;;117    				modbus_for_pult_registers_transmit(7);
;;;118    				tumbler_stat=(enum_tumbler_stat)(modbus_rx_arg1>>15);
;;;119    				if((tumbler_stat!=tumbler_stat_old))
;;;120    					{
;;;121    					if(tumbler_stat==tsU)
;;;122    						{
;;;123    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;124    						}
;;;125    					else lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;126    					
;;;127    					if(main_cnt>3)
;;;128    						{
;;;129    						work_stat=wsOFF;
;;;130    						restart_off();
;;;131    						}
;;;132    					}
;;;133    				tumbler_stat_old=tumbler_stat;
;;;134    				
;;;135    				}
;;;136    			 //else if(modbus_rx_arg0==0)
;;;137    			 	{
;;;138    				//modbus_plazma++;		
;;;139    				if((modbus_cmnd==61)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;140    					{
;;;141    					if(I_ug<1000)I_ug++;
;;;142    					else I_ug=((I_ug/10)+1)*10;
;;;143    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
0008b0  f8dfb09c          LDR      r11,|L1.2384|
0008b4  7800              LDRB     r0,[r0,#0]            ;106  ; modbus_an_buffer
0008b6  80e8              STRH     r0,[r5,#6]            ;106
0008b8  4d0c              LDR      r5,|L1.2284|
;;;144    					I_ug_block_cnt=10;
;;;145    					//lc640_write_int(EE_I_UG,I_ug);
;;;146    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;147    					}
;;;148    				
;;;149    				else if((modbus_cmnd==62)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;150    					{
;;;151    					if(I_ug<1000)I_ug--;
;;;152    					else I_ug=((I_ug/10)-1)*10;
;;;153    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;154    					I_ug_block_cnt=10;
;;;155    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;156    					}
;;;157    				else if((modbus_cmnd==63)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;158    					{
;;;159    					if(I_ug<1000)I_ug=((I_ug/10)+1)*10;
;;;160    					else I_ug=((I_ug/10)+5)*10;
;;;161    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;162    					I_ug_block_cnt=10;
;;;163    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;164    					}
;;;165    				
;;;166    				else if((modbus_cmnd==64)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;167    					{
;;;168    					if(I_ug<1000)I_ug=((I_ug/10)-1)*10;
;;;169    					else I_ug=((I_ug/10)-5)*10;
;;;170    					gran(&I_ug,I_MIN_IPS,I_MAX_IPS);
;;;171    					I_ug_block_cnt=10;
;;;172    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;173    					}
;;;174    				
;;;175    				else if((modbus_cmnd==71)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;176    					{
;;;177    					U_up++;
;;;178    					gran(&U_up,U_MIN,U_MAX);
;;;179    					U_up_block_cnt=10;
;;;180    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;181    					}
;;;182    				
;;;183    				else if((modbus_cmnd==72)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;184    					{
;;;185    					U_up--;
;;;186    					gran(&U_up,U_MIN,U_MAX);
;;;187    					U_up_block_cnt=10;
;;;188    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;189    				
;;;190    					}
;;;191    				else if((modbus_cmnd==73)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;192    					{
;;;193    					U_up=((U_up/10)+1)*10;
;;;194    					gran(&U_up,U_MIN,U_MAX);
;;;195    					U_up_block_cnt=10;
;;;196    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;197    					}
;;;198    				
;;;199    				else if((modbus_cmnd==74)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
;;;200    					{
;;;201    					U_up=((U_up/10)-1)*10;
;;;202    					gran(&U_up,U_MIN,U_MAX);
;;;203    					U_up_block_cnt=10;
;;;204    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;205    					}
;;;206    				
;;;207    				
;;;208    				else if((modbus_cmnd==51)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ+
;;;209    					{
;;;210    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;211    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;212    						{
;;;213    						if(TIME_VISION_PULT)
;;;214    							{
;;;215    							T_PROC_GS=(((T_PROC_GS/60L)+1L)*60L);
0008ba  f04f093c          MOV      r9,#0x3c
0008be  28c8              CMP      r0,#0xc8              ;107
0008c0  d104              BNE      |L1.2252|
0008c2  9801              LDR      r0,[sp,#4]            ;109
0008c4  2804              CMP      r0,#4                 ;109
0008c6  d045              BEQ      |L1.2388|
0008c8  2806              CMP      r0,#6                 ;113
0008ca  d047              BEQ      |L1.2396|
                  |L1.2252|
0008cc  e28a              B        |L1.3556|
0008ce  0000              DCW      0x0000
                  |L1.2256|
                          DCD      I_ug
                  |L1.2260|
                          DCD      ||area_number.5||+0x3c
                  |L1.2264|
                          DCD      U_up
                  |L1.2268|
                          DCD      U_maxg
                  |L1.2272|
                          DCD      I_maxp
                  |L1.2276|
                          DCD      T_PROC_GS
                  |L1.2280|
                          DCD      T_PROC_PS
                  |L1.2284|
                          DCD      work_stat
                  |L1.2288|
                          DCD      REV_STAT
                  |L1.2292|
                          DCD      AVT_REV_IS_ON
                  |L1.2296|
                          DCD      AVT_REV_TIME_FF
                  |L1.2300|
                          DCD      AVT_REV_TIME_REW
                  |L1.2304|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.2308|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.2312|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.2316|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.2320|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.2324|
                          DCD      CAP_ZAR_TIME
                  |L1.2328|
                          DCD      CAP_PAUSE1_TIME
                  |L1.2332|
                          DCD      CAP_RAZR_TIME
                  |L1.2336|
                          DCD      CAP_PAUSE2_TIME
                  |L1.2340|
                          DCD      CAP_MAX_VOLT
                  |L1.2344|
                          DCD      CAP_WRK_CURR
                  |L1.2348|
                          DCD      modbus_tcp_out_ptr
                  |L1.2352|
                          DCD      pult_u
                  |L1.2356|
                          DCD      pult_i
                  |L1.2360|
                          DCD      pult_work_stat
                  |L1.2364|
                          DCD      pult_u_set
                  |L1.2368|
                          DCD      pult_time
                  |L1.2372|
                          DCD      pult_time_set
                  |L1.2376|
                          DCD      pult_i_set
                  |L1.2380|
                          DCD      ||.data||
                  |L1.2384|
                          DCD      I_MAX_IPS
                  |L1.2388|
000954  2007              MOVS     r0,#7                 ;111
000956  f7fffffe          BL       modbus_for_pult_registers_transmit
                  |L1.2394|
00095a  e243              B        |L1.3556|
                  |L1.2396|
00095c  2007              MOVS     r0,#7                 ;117
00095e  f7fffffe          BL       modbus_for_pult_registers_transmit
000962  f8dfa3f0          LDR      r10,|L1.3412|
000966  4efc              LDR      r6,|L1.3416|
000968  0be0              LSRS     r0,r4,#15             ;118
00096a  f88a0000          STRB     r0,[r10,#0]           ;118
00096e  7831              LDRB     r1,[r6,#0]            ;119  ; tumbler_stat_old
000970  4288              CMP      r0,r1                 ;119
000972  d00e              BEQ      |L1.2450|
000974  2801              CMP      r0,#1                 ;121
000976  d03e              BEQ      |L1.2550|
000978  2100              MOVS     r1,#0                 ;125
                  |L1.2426|
00097a  20ea              MOVS     r0,#0xea              ;125
00097c  f7fffffe          BL       lc640_write_int
000980  48f6              LDR      r0,|L1.3420|
000982  f9b00000          LDRSH    r0,[r0,#0]            ;127  ; main_cnt
000986  2803              CMP      r0,#3                 ;127
000988  dd03              BLE      |L1.2450|
00098a  2000              MOVS     r0,#0                 ;129
00098c  7028              STRB     r0,[r5,#0]            ;129
00098e  f7fffffe          BL       restart_off
                  |L1.2450|
000992  f89ac000          LDRB     r12,[r10,#0]          ;133  ; tumbler_stat
000996  46d6              MOV      lr,r10                ;133
000998  f886c000          STRB     r12,[r6,#0]           ;133
00099c  4640              MOV      r0,r8                 ;139
00099e  e000              B        |L1.2466|
                  |L1.2464|
0009a0  e281              B        |L1.3750|
                  |L1.2466|
0009a2  f8983005          LDRB     r3,[r8,#5]            ;139  ; modbus_cmnd
0009a6  f8df83b8          LDR      r8,|L1.3424|
0009aa  260a              MOVS     r6,#0xa               ;142
0009ac  f44f717a          MOV      r1,#0x3e8             ;141
0009b0  2b3d              CMP      r3,#0x3d              ;139
0009b2  d022              BEQ      |L1.2554|
0009b4  2b3e              CMP      r3,#0x3e              ;149
0009b6  d038              BEQ      |L1.2602|
0009b8  2b3f              CMP      r3,#0x3f              ;157
0009ba  d047              BEQ      |L1.2636|
0009bc  2b40              CMP      r3,#0x40              ;166
0009be  d053              BEQ      |L1.2664|
0009c0  f8df83a0          LDR      r8,|L1.3428|
0009c4  2b47              CMP      r3,#0x47              ;175
0009c6  d061              BEQ      |L1.2700|
0009c8  2b48              CMP      r3,#0x48              ;183
0009ca  d068              BEQ      |L1.2718|
0009cc  2b49              CMP      r3,#0x49              ;191
0009ce  d072              BEQ      |L1.2742|
0009d0  2b4a              CMP      r3,#0x4a              ;199
0009d2  d06e              BEQ      |L1.2738|
0009d4  49e4              LDR      r1,|L1.3432|
;;;216    							T_PROC_GS_block_cnt=10;
0009d6  4ae5              LDR      r2,|L1.3436|
;;;217    							}
;;;218    						else
;;;219    							{
;;;220    							T_PROC_GS++;
;;;221    							T_PROC_GS_block_cnt=10;
;;;222    							}
;;;223    				
;;;224    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;225    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;226    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;227    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;228    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;229    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;230    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;231    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;232    							}												//(T_PROC_GS_MODE=0)
;;;233    					
;;;234    						else if(T_PROC_GS<30)
;;;235    							{
;;;236    							T_PROC_GS=29;
;;;237    							if(T_PROC_GS_MODE!=1)
;;;238    								{
;;;239    								T_PROC_GS_MODE=1;
;;;240    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;241    								}
;;;242    							}
;;;243    						else 
;;;244    							{
;;;245    							if(T_PROC_GS_MODE!=0)
;;;246    								{
;;;247    								T_PROC_GS_MODE=0;
;;;248    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;249    								}
;;;250    							}			
;;;251    						}
;;;252    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;253    						{
;;;254    						if(TIME_VISION_PULT)
;;;255    							{
;;;256    							T_PROC_PS=(((T_PROC_PS/60L)+1L)*60L);
;;;257    							T_PROC_PS_block_cnt=10;
0009d8  f8dfa394          LDR      r10,|L1.3440|
0009dc  f8df8394          LDR      r8,|L1.3444|
0009e0  2b33              CMP      r3,#0x33              ;208
0009e2  d067              BEQ      |L1.2740|
;;;258    							}
;;;259    						else
;;;260    							{
;;;261    							T_PROC_PS++;
;;;262    							T_PROC_PS_block_cnt=10;
;;;263    							}
;;;264    				
;;;265    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;266    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;267    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;268    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;269    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;270    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;271    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;272    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;273    							}												//(T_PROC_PS_MODE=0)
;;;274    					
;;;275    						else if(T_PROC_PS<30)
;;;276    							{
;;;277    							T_PROC_PS=29;
;;;278    							if(T_PROC_PS_MODE!=1)
;;;279    								{
;;;280    								T_PROC_PS_MODE=1;
;;;281    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;282    								}
;;;283    							}
;;;284    						else 
;;;285    							{
;;;286    							if(T_PROC_PS_MODE!=0)
;;;287    								{
;;;288    								T_PROC_PS_MODE=0;
;;;289    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;290    								}
;;;291    							}			
;;;292    						}
;;;293    					}
;;;294    				else if((modbus_cmnd==53)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ++
0009e4  2b35              CMP      r3,#0x35
0009e6  d072              BEQ      |L1.2766|
;;;295    					{
;;;296    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;297    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;298    						{
;;;299    						if(TIME_VISION_PULT)
;;;300    							{
;;;301    							T_PROC_GS=(((T_PROC_GS/600L)+1L)*600L);
;;;302    							T_PROC_GS_block_cnt=10;
;;;303    							}
;;;304    						else
;;;305    							{
;;;306    							T_PROC_GS=(((T_PROC_GS/10L)+1L)*10L);
;;;307    							T_PROC_GS_block_cnt=10;
;;;308    							}
;;;309    				
;;;310    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;311    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;312    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;313    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;314    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;315    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;316    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;317    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;318    							}												//(T_PROC_GS_MODE=0)
;;;319    					
;;;320    						else if(T_PROC_GS<30)
;;;321    							{
;;;322    							T_PROC_GS=29;
;;;323    							if(T_PROC_GS_MODE!=1)
;;;324    								{
;;;325    								T_PROC_GS_MODE=1;
;;;326    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;327    								}
;;;328    							}
;;;329    						else 
;;;330    							{
;;;331    							if(T_PROC_GS_MODE!=0)
;;;332    								{
;;;333    								T_PROC_GS_MODE=0;
;;;334    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;335    								}
;;;336    							}			
;;;337    						}
;;;338    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;339    						{
;;;340    						if(TIME_VISION_PULT)
;;;341    							{
;;;342    							T_PROC_PS=(((T_PROC_PS/600L)+1L)*600L);
;;;343    							T_PROC_PS_block_cnt=10;
;;;344    							}
;;;345    						else
;;;346    							{
;;;347    							T_PROC_PS=(((T_PROC_PS/10L)+1L)*10L);
;;;348    							T_PROC_PS_block_cnt=10;
;;;349    							}
;;;350    				
;;;351    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;352    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;353    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;354    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;355    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;356    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;357    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;358    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;359    							}												//(T_PROC_PS_MODE=0)
;;;360    					
;;;361    						else if(T_PROC_PS<30)
;;;362    							{
;;;363    							T_PROC_PS=29;
;;;364    							if(T_PROC_PS_MODE!=1)
;;;365    								{
;;;366    								T_PROC_PS_MODE=1;
;;;367    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;368    								}
;;;369    							}
;;;370    						else 
;;;371    							{
;;;372    							if(T_PROC_PS_MODE!=0)
;;;373    								{
;;;374    								T_PROC_PS_MODE=0;
;;;375    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;376    								}
;;;377    							}				
;;;378    						}
;;;379    					}
;;;380    				
;;;381    				else if((modbus_cmnd==52)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ-
0009e8  2b34              CMP      r3,#0x34
0009ea  d071              BEQ      |L1.2768|
;;;382    					{
;;;383    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;384    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;385    						{
;;;386    						if(TIME_VISION_PULT)
;;;387    							{
;;;388    							T_PROC_GS=(((T_PROC_GS/60L)-1L)*60L);
;;;389    							T_PROC_GS_block_cnt=10;
;;;390    							}
;;;391    						else
;;;392    							{
;;;393    							T_PROC_GS--;
;;;394    							T_PROC_GS_block_cnt=10;
;;;395    							}
;;;396    				
;;;397    							
;;;398    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;399    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;400    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;401    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;402    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;403    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;404    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;405    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;406    							}												//(T_PROC_GS_MODE=0)
;;;407    					
;;;408    						else if(T_PROC_GS<30)
;;;409    							{
;;;410    							T_PROC_GS=29;
;;;411    							if(T_PROC_GS_MODE!=1)
;;;412    								{
;;;413    								T_PROC_GS_MODE=1;
;;;414    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;415    								}
;;;416    							}
;;;417    						else 
;;;418    							{
;;;419    							if(T_PROC_GS_MODE!=0)
;;;420    								{
;;;421    								T_PROC_GS_MODE=0;
;;;422    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;423    								}
;;;424    							}
;;;425    							
;;;426    						}
;;;427    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;428    						{
;;;429    						if(TIME_VISION_PULT)
;;;430    							{
;;;431    							T_PROC_PS=(((T_PROC_PS/60L)-1L)*60L);
;;;432    							T_PROC_PS_block_cnt=10;
;;;433    							}
;;;434    						else
;;;435    							{
;;;436    							T_PROC_PS--;
;;;437    							T_PROC_PS_block_cnt=10;
;;;438    							}
;;;439    				
;;;440    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;441    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;442    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;443    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;444    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;445    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;446    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;447    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;448    							}												//(T_PROC_PS_MODE=0)
;;;449    					
;;;450    						else if(T_PROC_PS<30)
;;;451    							{
;;;452    							T_PROC_PS=29;
;;;453    							if(T_PROC_PS_MODE!=1)
;;;454    								{
;;;455    								T_PROC_PS_MODE=1;
;;;456    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;457    								}
;;;458    							}
;;;459    						else 
;;;460    							{
;;;461    							if(T_PROC_PS_MODE!=0)
;;;462    								{
;;;463    								T_PROC_PS_MODE=0;
;;;464    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;465    								}
;;;466    							}			
;;;467    						}
;;;468    					}
;;;469    				else if((modbus_cmnd==54)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))	//βπεμ--
0009ec  2b36              CMP      r3,#0x36
0009ee  d070              BEQ      |L1.2770|
;;;470    					{
;;;471    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;472    					if((main_menu_mode==mmmIT)&&(work_stat==wsOFF))
;;;473    						{
;;;474    						if(TIME_VISION_PULT)
;;;475    							{
;;;476    							T_PROC_GS=(((T_PROC_GS/600L)-1L)*600L);
;;;477    							T_PROC_GS_block_cnt=10;
;;;478    							}
;;;479    						else
;;;480    							{
;;;481    							T_PROC_GS=(((T_PROC_GS/10L)-1L)*10L);
;;;482    							T_PROC_GS_block_cnt=10;
;;;483    							}
;;;484    				
;;;485    						if(T_PROC_GS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;486    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;487    							T_PROC_GS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;488    							if(T_PROC_GS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;489    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;490    								T_PROC_GS_MODE=1;								//πΰαξςϋ(T_PROC_GS_MODE=1), οπθ οξοϋςκε
;;;491    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;492    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;493    							}												//(T_PROC_GS_MODE=0)
;;;494    					
;;;495    						else if(T_PROC_GS<30)
;;;496    							{
;;;497    							T_PROC_GS=29;
;;;498    							if(T_PROC_GS_MODE!=1)
;;;499    								{
;;;500    								T_PROC_GS_MODE=1;
;;;501    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;502    								}
;;;503    							}
;;;504    						else 
;;;505    							{
;;;506    							if(T_PROC_GS_MODE!=0)
;;;507    								{
;;;508    								T_PROC_GS_MODE=0;
;;;509    								lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;510    								}
;;;511    							}
;;;512    										
;;;513    						}
;;;514    					else if((main_menu_mode==mmmIN)&&(work_stat==wsOFF))
;;;515    						{
;;;516    						if(TIME_VISION_PULT)
;;;517    							{
;;;518    							T_PROC_PS=(((T_PROC_PS/600L)-1L)*600L);
;;;519    							T_PROC_PS_block_cnt=10;
;;;520    							}
;;;521    						else
;;;522    							{
;;;523    							T_PROC_PS=(((T_PROC_PS/10L)-1L)*10L);
;;;524    							T_PROC_PS_block_cnt=10;
;;;525    							}
;;;526    				
;;;527    						if(T_PROC_PS>T_PROC_MAX)								 	//Ερλθ σρςΰνΰβλθβΰεμ βπμ οπξφερρΰ
;;;528    							{												//δλ θρςξχνθκΰ ςξκΰ αξλόψε χεμ 
;;;529    							T_PROC_PS=T_PROC_MAX+1;								//μΰκρθμΰλόνξε βπεμ οπξφερρξβ
;;;530    							if(T_PROC_PS_MODE!=1)								//(θη γλΰβνϋυ σρςΰνξβξκ) ςξ 
;;;531    								{											//σρςΰνΰβλθβΰεςρ πεζθμ νεοπεπϋβνξι 
;;;532    								T_PROC_PS_MODE=1;								//πΰαξςϋ(T_PROC_PS_MODE=1), οπθ οξοϋςκε
;;;533    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);	//βεπνσςό βπεμ β πΰηπεψεννϋι θνςεπΰβΰλ - 
;;;534    								}											//πεζθμ νεοπεπϋβνξι πΰαξςϋ ρνθμΰεςρ 
;;;535    							}												//(T_PROC_PS_MODE=0)
;;;536    					
;;;537    						else if(T_PROC_PS<30)
;;;538    							{
;;;539    							T_PROC_PS=29;
;;;540    							if(T_PROC_PS_MODE!=1)
;;;541    								{
;;;542    								T_PROC_PS_MODE=1;
;;;543    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;544    								}
;;;545    							}
;;;546    						else 
;;;547    							{
;;;548    							if(T_PROC_PS_MODE!=0)
;;;549    								{
;;;550    								T_PROC_PS_MODE=0;
;;;551    								lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;552    								}
;;;553    							}	
;;;554    						}
;;;555    					}
;;;556    				
;;;557    				
;;;558    			//	else if((modbus_rx_arg1>>8)==90)
;;;559    			else if((modbus_cmnd==1)&&(modbus_cmnd_cnt!=modbus_self_cmnd_cnt))
0009f0  2b01              CMP      r3,#1
0009f2  d06f              BEQ      |L1.2772|
                  |L1.2548|
0009f4  e1f6              B        |L1.3556|
                  |L1.2550|
0009f6  2101              MOVS     r1,#1                 ;123
0009f8  e7bf              B        |L1.2426|
                  |L1.2554|
0009fa  4682              MOV      r10,r0                ;139
0009fc  7902              LDRB     r2,[r0,#4]            ;139  ; modbus_cmnd_cnt
0009fe  7800              LDRB     r0,[r0,#0]            ;139  ; modbus_self_cmnd_cnt
000a00  4282              CMP      r2,r0                 ;139
000a02  d0aa              BEQ      |L1.2394|
000a04  48dc              LDR      r0,|L1.3448|
000a06  f9b02000          LDRSH    r2,[r0,#0]            ;141  ; I_ug
000a0a  428a              CMP      r2,r1                 ;141
000a0c  da01              BGE      |L1.2578|
000a0e  1c52              ADDS     r2,r2,#1              ;141
000a10  e016              B        |L1.2624|
                  |L1.2578|
000a12  fb92f1f6          SDIV     r1,r2,r6              ;142
000a16  1c49              ADDS     r1,r1,#1              ;142
000a18  e033              B        |L1.2690|
000a1a  bf00              NOP                            ;143
                  |L1.2588|
000a1c  48d7              LDR      r0,|L1.3452|
000a1e  f9bb2000          LDRSH    r2,[r11,#0]           ;143  ; I_MAX_IPS
000a22  f9b01000          LDRSH    r1,[r0,#0]            ;143  ; I_MIN_IPS
000a26  48d4              LDR      r0,|L1.3448|
000a28  e06b              B        |L1.2818|
                  |L1.2602|
000a2a  4682              MOV      r10,r0                ;149
000a2c  7902              LDRB     r2,[r0,#4]            ;149  ; modbus_cmnd_cnt
000a2e  7800              LDRB     r0,[r0,#0]            ;149  ; modbus_self_cmnd_cnt
000a30  4282              CMP      r2,r0                 ;149
000a32  d092              BEQ      |L1.2394|
000a34  48d0              LDR      r0,|L1.3448|
000a36  f9b02000          LDRSH    r2,[r0,#0]            ;151  ; I_ug
000a3a  428a              CMP      r2,r1                 ;151
000a3c  da02              BGE      |L1.2628|
000a3e  1e52              SUBS     r2,r2,#1              ;151
                  |L1.2624|
000a40  8002              STRH     r2,[r0,#0]            ;151
000a42  e7eb              B        |L1.2588|
                  |L1.2628|
000a44  fb92f1f6          SDIV     r1,r2,r6              ;152
000a48  1e49              SUBS     r1,r1,#1              ;152
000a4a  e01a              B        |L1.2690|
                  |L1.2636|
000a4c  4682              MOV      r10,r0                ;157
000a4e  7902              LDRB     r2,[r0,#4]            ;157  ; modbus_cmnd_cnt
000a50  7800              LDRB     r0,[r0,#0]            ;157  ; modbus_self_cmnd_cnt
000a52  4282              CMP      r2,r0                 ;157
000a54  d0ce              BEQ      |L1.2548|
000a56  48c8              LDR      r0,|L1.3448|
000a58  f9b02000          LDRSH    r2,[r0,#0]            ;159  ; I_ug
000a5c  428a              CMP      r2,r1                 ;159
000a5e  dbd8              BLT      |L1.2578|
000a60  fb92f1f6          SDIV     r1,r2,r6              ;160
000a64  1d49              ADDS     r1,r1,#5              ;160
000a66  e00c              B        |L1.2690|
                  |L1.2664|
000a68  4682              MOV      r10,r0                ;166
000a6a  7902              LDRB     r2,[r0,#4]            ;166  ; modbus_cmnd_cnt
000a6c  7800              LDRB     r0,[r0,#0]            ;166  ; modbus_self_cmnd_cnt
000a6e  4282              CMP      r2,r0                 ;166
000a70  d0c0              BEQ      |L1.2548|
000a72  48c1              LDR      r0,|L1.3448|
000a74  f9b02000          LDRSH    r2,[r0,#0]            ;168  ; I_ug
000a78  428a              CMP      r2,r1                 ;168
000a7a  dbe3              BLT      |L1.2628|
000a7c  fb92f1f6          SDIV     r1,r2,r6              ;169
000a80  1f49              SUBS     r1,r1,#5              ;169
                  |L1.2690|
000a82  eb010181          ADD      r1,r1,r1,LSL #2       ;169
000a86  0049              LSLS     r1,r1,#1              ;169
000a88  8001              STRH     r1,[r0,#0]            ;169
000a8a  e7c7              B        |L1.2588|
                  |L1.2700|
000a8c  4682              MOV      r10,r0                ;175
000a8e  7901              LDRB     r1,[r0,#4]            ;175  ; modbus_cmnd_cnt
000a90  7800              LDRB     r0,[r0,#0]            ;175  ; modbus_self_cmnd_cnt
000a92  4281              CMP      r1,r0                 ;175
000a94  d0ae              BEQ      |L1.2548|
000a96  48ba              LDR      r0,|L1.3456|
000a98  8801              LDRH     r1,[r0,#0]            ;177  ; U_up
000a9a  1c49              ADDS     r1,r1,#1              ;177
000a9c  e029              B        |L1.2802|
                  |L1.2718|
000a9e  4682              MOV      r10,r0                ;183
000aa0  7901              LDRB     r1,[r0,#4]            ;183  ; modbus_cmnd_cnt
000aa2  7800              LDRB     r0,[r0,#0]            ;183  ; modbus_self_cmnd_cnt
000aa4  4281              CMP      r1,r0                 ;183
000aa6  d0a5              BEQ      |L1.2548|
000aa8  48b5              LDR      r0,|L1.3456|
000aaa  8801              LDRH     r1,[r0,#0]            ;185  ; U_up
000aac  1e49              SUBS     r1,r1,#1              ;185
000aae  e020              B        |L1.2802|
000ab0  e001              B        |L1.2742|
                  |L1.2738|
000ab2  e010              B        |L1.2774|
                  |L1.2740|
000ab4  e02e              B        |L1.2836|
                  |L1.2742|
000ab6  4682              MOV      r10,r0                ;191
000ab8  7901              LDRB     r1,[r0,#4]            ;191  ; modbus_cmnd_cnt
000aba  7800              LDRB     r0,[r0,#0]            ;191  ; modbus_self_cmnd_cnt
000abc  4281              CMP      r1,r0                 ;191
000abe  d099              BEQ      |L1.2548|
000ac0  48af              LDR      r0,|L1.3456|
000ac2  f9b01000          LDRSH    r1,[r0,#0]            ;193  ; U_up
000ac6  fb91f1f6          SDIV     r1,r1,r6              ;193
000aca  1c49              ADDS     r1,r1,#1              ;193
000acc  e00e              B        |L1.2796|
                  |L1.2766|
000ace  e06c              B        |L1.2986|
                  |L1.2768|
000ad0  e09c              B        |L1.3084|
                  |L1.2770|
000ad2  e0c9              B        |L1.3176|
                  |L1.2772|
000ad4  e122              B        |L1.3356|
                  |L1.2774|
000ad6  4682              MOV      r10,r0                ;199
000ad8  7901              LDRB     r1,[r0,#4]            ;199  ; modbus_cmnd_cnt
000ada  7800              LDRB     r0,[r0,#0]            ;199  ; modbus_self_cmnd_cnt
000adc  4281              CMP      r1,r0                 ;199
000ade  d089              BEQ      |L1.2548|
000ae0  48a7              LDR      r0,|L1.3456|
000ae2  f9b01000          LDRSH    r1,[r0,#0]            ;201  ; U_up
000ae6  fb91f1f6          SDIV     r1,r1,r6              ;201
000aea  1e49              SUBS     r1,r1,#1              ;201
                  |L1.2796|
000aec  eb010181          ADD      r1,r1,r1,LSL #2       ;201
000af0  0049              LSLS     r1,r1,#1              ;201
                  |L1.2802|
000af2  8001              STRH     r1,[r0,#0]            ;201
000af4  48a3              LDR      r0,|L1.3460|
000af6  f9b02000          LDRSH    r2,[r0,#0]            ;202  ; U_MAX
000afa  48a3              LDR      r0,|L1.3464|
000afc  f9b01000          LDRSH    r1,[r0,#0]            ;202  ; U_MIN
000b00  489f              LDR      r0,|L1.3456|
                  |L1.2818|
000b02  f7fffffe          BL       gran
000b06  f8a86000          STRH     r6,[r8,#0]            ;203
000b0a  f89a1004          LDRB     r1,[r10,#4]           ;204  ; modbus_cmnd_cnt
000b0e  f88a1000          STRB     r1,[r10,#0]           ;204
                  |L1.2834|
000b12  e167              B        |L1.3556|
                  |L1.2836|
000b14  7903              LDRB     r3,[r0,#4]            ;208  ; modbus_cmnd_cnt
000b16  f890c000          LDRB     r12,[r0,#0]           ;208  ; modbus_self_cmnd_cnt
000b1a  4563              CMP      r3,r12                ;208
000b1c  d0f9              BEQ      |L1.2834|
000b1e  7003              STRB     r3,[r0,#0]            ;210
000b20  f8980000          LDRB     r0,[r8,#0]            ;211  ; main_menu_mode
000b24  782b              LDRB     r3,[r5,#0]            ;211  ; work_stat
000b26  ea500c03          ORRS     r12,r0,r3             ;211
000b2a  d002              BEQ      |L1.2866|
000b2c  2801              CMP      r0,#1                 ;252
000b2e  d01c              BEQ      |L1.2922|
000b30  e158              B        |L1.3556|
                  |L1.2866|
000b32  8808              LDRH     r0,[r1,#0]            ;213  ; TIME_VISION_PULT
000b34  2800              CMP      r0,#0                 ;213
000b36  4895              LDR      r0,|L1.3468|
000b38  d004              BEQ      |L1.2884|
000b3a  6803              LDR      r3,[r0,#0]            ;215  ; T_PROC_GS
000b3c  fb93f1f9          SDIV     r1,r3,r9              ;215
000b40  1c49              ADDS     r1,r1,#1              ;215
000b42  e07a              B        |L1.3130|
                  |L1.2884|
000b44  6801              LDR      r1,[r0,#0]            ;220  ; T_PROC_GS
000b46  1c49              ADDS     r1,r1,#1              ;220
                  |L1.2888|
000b48  6001              STR      r1,[r0,#0]            ;220  ; T_PROC_GS
000b4a  e0a9              B        |L1.3232|
                  |L1.2892|
000b4c  6001              STR      r1,[r0,#0]            ;237  ; T_PROC_GS
000b4e  4890              LDR      r0,|L1.3472|
000b50  8801              LDRH     r1,[r0,#0]            ;237  ; T_PROC_GS_MODE
000b52  2901              CMP      r1,#1                 ;237
000b54  d0dd              BEQ      |L1.2834|
000b56  2101              MOVS     r1,#1                 ;490
000b58  e004              B        |L1.2916|
                  |L1.2906|
000b5a  488d              LDR      r0,|L1.3472|
000b5c  8801              LDRH     r1,[r0,#0]            ;245  ; T_PROC_GS_MODE
000b5e  2900              CMP      r1,#0                 ;245
000b60  d0d7              BEQ      |L1.2834|
000b62  2100              MOVS     r1,#0                 ;508
                  |L1.2916|
000b64  8001              STRH     r1,[r0,#0]            ;229
000b66  20ee              MOVS     r0,#0xee              ;230
000b68  e01c              B        |L1.2980|
                  |L1.2922|
000b6a  2b00              CMP      r3,#0                 ;252
000b6c  d1d1              BNE      |L1.2834|
000b6e  8808              LDRH     r0,[r1,#0]            ;254  ; TIME_VISION_PULT
000b70  2800              CMP      r0,#0                 ;254
000b72  4888              LDR      r0,|L1.3476|
000b74  d004              BEQ      |L1.2944|
000b76  6802              LDR      r2,[r0,#0]            ;256  ; T_PROC_PS
000b78  fb92f1f9          SDIV     r1,r2,r9              ;256
000b7c  1c49              ADDS     r1,r1,#1              ;256
000b7e  e06c              B        |L1.3162|
                  |L1.2944|
000b80  6801              LDR      r1,[r0,#0]            ;261  ; T_PROC_PS
000b82  1c49              ADDS     r1,r1,#1              ;261
                  |L1.2948|
000b84  6001              STR      r1,[r0,#0]            ;261  ; T_PROC_PS
000b86  e0b1              B        |L1.3308|
                  |L1.2952|
000b88  6001              STR      r1,[r0,#0]            ;278  ; T_PROC_PS
000b8a  4883              LDR      r0,|L1.3480|
000b8c  8801              LDRH     r1,[r0,#0]            ;278  ; T_PROC_PS_MODE
000b8e  2901              CMP      r1,#1                 ;278
000b90  d00a              BEQ      |L1.2984|
000b92  2101              MOVS     r1,#1                 ;532
000b94  e004              B        |L1.2976|
                  |L1.2966|
000b96  4880              LDR      r0,|L1.3480|
000b98  8801              LDRH     r1,[r0,#0]            ;286  ; T_PROC_PS_MODE
000b9a  2900              CMP      r1,#0                 ;286
000b9c  d004              BEQ      |L1.2984|
000b9e  2100              MOVS     r1,#0                 ;550
                  |L1.2976|
000ba0  8001              STRH     r1,[r0,#0]            ;288
000ba2  20f0              MOVS     r0,#0xf0              ;289
                  |L1.2980|
000ba4  f7fffffe          BL       lc640_write_int
                  |L1.2984|
000ba8  e11c              B        |L1.3556|
                  |L1.2986|
000baa  7903              LDRB     r3,[r0,#4]            ;294  ; modbus_cmnd_cnt
000bac  f890c000          LDRB     r12,[r0,#0]           ;294  ; modbus_self_cmnd_cnt
000bb0  4563              CMP      r3,r12                ;294
000bb2  d008              BEQ      |L1.3014|
000bb4  7003              STRB     r3,[r0,#0]            ;296
000bb6  f8980000          LDRB     r0,[r8,#0]            ;297  ; main_menu_mode
000bba  782b              LDRB     r3,[r5,#0]            ;297  ; work_stat
000bbc  ea500c03          ORRS     r12,r0,r3             ;297
000bc0  d002              BEQ      |L1.3016|
000bc2  2801              CMP      r0,#1                 ;338
000bc4  d010              BEQ      |L1.3048|
                  |L1.3014|
000bc6  e10d              B        |L1.3556|
                  |L1.3016|
000bc8  8808              LDRH     r0,[r1,#0]            ;299  ; TIME_VISION_PULT
000bca  b138              CBZ      r0,|L1.3036|
000bcc  496f              LDR      r1,|L1.3468|
000bce  f44f7016          MOV      r0,#0x258             ;301
000bd2  680b              LDR      r3,[r1,#0]            ;301  ; T_PROC_GS
000bd4  fb93f0f0          SDIV     r0,r3,r0              ;301
000bd8  1c40              ADDS     r0,r0,#1              ;301
000bda  e05d              B        |L1.3224|
                  |L1.3036|
000bdc  486b              LDR      r0,|L1.3468|
000bde  6801              LDR      r1,[r0,#0]            ;306  ; T_PROC_GS
000be0  fb91f1f6          SDIV     r1,r1,r6              ;306
000be4  1c49              ADDS     r1,r1,#1              ;306
000be6  e06a              B        |L1.3262|
                  |L1.3048|
000be8  2b00              CMP      r3,#0                 ;338
000bea  d11d              BNE      |L1.3112|
000bec  8808              LDRH     r0,[r1,#0]            ;340  ; TIME_VISION_PULT
000bee  b138              CBZ      r0,|L1.3072|
000bf0  4968              LDR      r1,|L1.3476|
000bf2  f44f7016          MOV      r0,#0x258             ;342
000bf6  680a              LDR      r2,[r1,#0]            ;342  ; T_PROC_PS
000bf8  fb92f0f0          SDIV     r0,r2,r0              ;342
000bfc  1c40              ADDS     r0,r0,#1              ;342
000bfe  e071              B        |L1.3300|
                  |L1.3072|
000c00  4864              LDR      r0,|L1.3476|
000c02  6801              LDR      r1,[r0,#0]            ;347  ; T_PROC_PS
000c04  fb91f1f6          SDIV     r1,r1,r6              ;347
000c08  1c49              ADDS     r1,r1,#1              ;347
000c0a  e07e              B        |L1.3338|
                  |L1.3084|
000c0c  7903              LDRB     r3,[r0,#4]            ;381  ; modbus_cmnd_cnt
000c0e  f890c000          LDRB     r12,[r0,#0]           ;381  ; modbus_self_cmnd_cnt
000c12  4563              CMP      r3,r12                ;381
000c14  d008              BEQ      |L1.3112|
000c16  7003              STRB     r3,[r0,#0]            ;383
000c18  f8980000          LDRB     r0,[r8,#0]            ;384  ; main_menu_mode
000c1c  782b              LDRB     r3,[r5,#0]            ;384  ; work_stat
000c1e  ea500c03          ORRS     r12,r0,r3             ;384
000c22  d002              BEQ      |L1.3114|
000c24  2801              CMP      r0,#1                 ;427
000c26  d00f              BEQ      |L1.3144|
                  |L1.3112|
000c28  e0dc              B        |L1.3556|
                  |L1.3114|
000c2a  8808              LDRH     r0,[r1,#0]            ;386  ; TIME_VISION_PULT
000c2c  2800              CMP      r0,#0                 ;386
000c2e  4857              LDR      r0,|L1.3468|
000c30  d007              BEQ      |L1.3138|
000c32  6803              LDR      r3,[r0,#0]            ;388  ; T_PROC_GS
000c34  fb93f1f9          SDIV     r1,r3,r9              ;388
000c38  1e49              SUBS     r1,r1,#1              ;388
                  |L1.3130|
000c3a  ebc11101          RSB      r1,r1,r1,LSL #4       ;388
000c3e  0089              LSLS     r1,r1,#2              ;388
000c40  e782              B        |L1.2888|
                  |L1.3138|
000c42  6801              LDR      r1,[r0,#0]            ;393  ; T_PROC_GS
000c44  1e49              SUBS     r1,r1,#1              ;393
000c46  e77f              B        |L1.2888|
                  |L1.3144|
000c48  bb9b              CBNZ     r3,|L1.3250|
000c4a  8808              LDRH     r0,[r1,#0]            ;429  ; TIME_VISION_PULT
000c4c  2800              CMP      r0,#0                 ;429
000c4e  4851              LDR      r0,|L1.3476|
000c50  d007              BEQ      |L1.3170|
000c52  6802              LDR      r2,[r0,#0]            ;431  ; T_PROC_PS
000c54  fb92f1f9          SDIV     r1,r2,r9              ;431
000c58  1e49              SUBS     r1,r1,#1              ;431
                  |L1.3162|
000c5a  ebc11101          RSB      r1,r1,r1,LSL #4       ;431
000c5e  0089              LSLS     r1,r1,#2              ;431
000c60  e790              B        |L1.2948|
                  |L1.3170|
000c62  6801              LDR      r1,[r0,#0]            ;436  ; T_PROC_PS
000c64  1e49              SUBS     r1,r1,#1              ;436
000c66  e78d              B        |L1.2948|
                  |L1.3176|
000c68  7903              LDRB     r3,[r0,#4]            ;469  ; modbus_cmnd_cnt
000c6a  f890c000          LDRB     r12,[r0,#0]           ;469  ; modbus_self_cmnd_cnt
000c6e  4563              CMP      r3,r12                ;469
000c70  d01f              BEQ      |L1.3250|
000c72  7003              STRB     r3,[r0,#0]            ;471
000c74  f8980000          LDRB     r0,[r8,#0]            ;472  ; main_menu_mode
000c78  782b              LDRB     r3,[r5,#0]            ;472  ; work_stat
000c7a  ea500c03          ORRS     r12,r0,r3             ;472
000c7e  d002              BEQ      |L1.3206|
000c80  2801              CMP      r0,#1                 ;514
000c82  d025              BEQ      |L1.3280|
000c84  e0ae              B        |L1.3556|
                  |L1.3206|
000c86  8808              LDRH     r0,[r1,#0]            ;474  ; TIME_VISION_PULT
000c88  b1a0              CBZ      r0,|L1.3252|
000c8a  4940              LDR      r1,|L1.3468|
000c8c  f44f7016          MOV      r0,#0x258             ;476
000c90  680b              LDR      r3,[r1,#0]            ;476  ; T_PROC_GS
000c92  fb93f0f0          SDIV     r0,r3,r0              ;476
000c96  1e40              SUBS     r0,r0,#1              ;476
                  |L1.3224|
000c98  f44f7316          MOV      r3,#0x258             ;301
000c9c  4358              MULS     r0,r3,r0              ;301
000c9e  6008              STR      r0,[r1,#0]            ;301  ; T_PROC_GS
                  |L1.3232|
000ca0  483a              LDR      r0,|L1.3468|
000ca2  493e              LDR      r1,|L1.3484|
000ca4  8016              STRH     r6,[r2,#0]            ;482
000ca6  6802              LDR      r2,[r0,#0]            ;224  ; T_PROC_GS
000ca8  6809              LDR      r1,[r1,#0]            ;224  ; T_PROC_MAX
000caa  428a              CMP      r2,r1                 ;224
000cac  dd0b              BLE      |L1.3270|
000cae  1c49              ADDS     r1,r1,#1              ;487
000cb0  e74c              B        |L1.2892|
                  |L1.3250|
000cb2  e04d              B        |L1.3408|
                  |L1.3252|
000cb4  4835              LDR      r0,|L1.3468|
000cb6  6801              LDR      r1,[r0,#0]            ;481  ; T_PROC_GS
000cb8  fb91f1f6          SDIV     r1,r1,r6              ;481
000cbc  1e49              SUBS     r1,r1,#1              ;481
                  |L1.3262|
000cbe  eb010181          ADD      r1,r1,r1,LSL #2       ;481
000cc2  0049              LSLS     r1,r1,#1              ;481
000cc4  e740              B        |L1.2888|
                  |L1.3270|
000cc6  2a1e              CMP      r2,#0x1e              ;495
000cc8  f6bfaf47          BGE      |L1.2906|
000ccc  211d              MOVS     r1,#0x1d              ;497
000cce  e73d              B        |L1.2892|
                  |L1.3280|
000cd0  bbf3              CBNZ     r3,|L1.3408|
000cd2  8808              LDRH     r0,[r1,#0]            ;516  ; TIME_VISION_PULT
000cd4  b1a0              CBZ      r0,|L1.3328|
000cd6  492f              LDR      r1,|L1.3476|
000cd8  f44f7016          MOV      r0,#0x258             ;518
000cdc  680a              LDR      r2,[r1,#0]            ;518  ; T_PROC_PS
000cde  fb92f0f0          SDIV     r0,r2,r0              ;518
000ce2  1e40              SUBS     r0,r0,#1              ;518
                  |L1.3300|
000ce4  f44f7216          MOV      r2,#0x258             ;342
000ce8  4350              MULS     r0,r2,r0              ;342
000cea  6008              STR      r0,[r1,#0]            ;342  ; T_PROC_PS
                  |L1.3308|
000cec  4829              LDR      r0,|L1.3476|
000cee  492b              LDR      r1,|L1.3484|
000cf0  f8aa6000          STRH     r6,[r10,#0]           ;524
000cf4  6802              LDR      r2,[r0,#0]            ;265  ; T_PROC_PS
000cf6  6809              LDR      r1,[r1,#0]            ;265  ; T_PROC_MAX
000cf8  428a              CMP      r2,r1                 ;265
000cfa  dd0a              BLE      |L1.3346|
000cfc  1c49              ADDS     r1,r1,#1              ;529
000cfe  e743              B        |L1.2952|
                  |L1.3328|
000d00  4824              LDR      r0,|L1.3476|
000d02  6801              LDR      r1,[r0,#0]            ;523  ; T_PROC_PS
000d04  fb91f1f6          SDIV     r1,r1,r6              ;523
000d08  1e49              SUBS     r1,r1,#1              ;523
                  |L1.3338|
000d0a  eb010181          ADD      r1,r1,r1,LSL #2       ;523
000d0e  0049              LSLS     r1,r1,#1              ;523
000d10  e738              B        |L1.2948|
                  |L1.3346|
000d12  2a1e              CMP      r2,#0x1e              ;537
000d14  f6bfaf3f          BGE      |L1.2966|
000d18  211d              MOVS     r1,#0x1d              ;539
000d1a  e735              B        |L1.2952|
                  |L1.3356|
000d1c  7901              LDRB     r1,[r0,#4]  ; modbus_cmnd_cnt
000d1e  7802              LDRB     r2,[r0,#0]  ; modbus_self_cmnd_cnt
000d20  4291              CMP      r1,r2
000d22  d05f              BEQ      |L1.3556|
;;;560    					{
;;;561    					modbus_self_cmnd_cnt=modbus_cmnd_cnt;
;;;562    					if(tumbler_stat==tsI)
;;;563    						{
;;;564    						if(work_stat!=wsGS)
;;;565    							{
;;;566    							work_stat=wsGS;
;;;567    							time_proc=0;
;;;568    							time_proc_remain=T_PROC_GS;
;;;569    							index_set=0;
000d24  4e1e              LDR      r6,|L1.3488|
000d26  7001              STRB     r1,[r0,#0]            ;561
000d28  46f0              MOV      r8,lr                 ;562
000d2a  f1bc0f00          CMP      r12,#0                ;562
000d2e  d141              BNE      |L1.3508|
000d30  7828              LDRB     r0,[r5,#0]            ;564  ; work_stat
000d32  2801              CMP      r0,#1                 ;564
000d34  d03a              BEQ      |L1.3500|
000d36  2001              MOVS     r0,#1                 ;566
000d38  491a              LDR      r1,|L1.3492|
000d3a  7028              STRB     r0,[r5,#0]            ;566
000d3c  2000              MOVS     r0,#0                 ;567
000d3e  6008              STR      r0,[r1,#0]            ;568  ; time_proc
000d40  4912              LDR      r1,|L1.3468|
000d42  680a              LDR      r2,[r1,#0]            ;568  ; T_PROC_GS
000d44  4918              LDR      r1,|L1.3496|
000d46  600a              STR      r2,[r1,#0]  ; time_proc_remain
000d48  7130              STRB     r0,[r6,#4]
;;;570    							restart_on_GS();
000d4a  f7fffffe          BL       restart_on_GS
000d4e  e031              B        |L1.3508|
                  |L1.3408|
000d50  e043              B        |L1.3546|
000d52  0000              DCW      0x0000
                  |L1.3412|
                          DCD      tumbler_stat
                  |L1.3416|
                          DCD      tumbler_stat_old
                  |L1.3420|
                          DCD      main_cnt
                  |L1.3424|
                          DCD      I_ug_block_cnt
                  |L1.3428|
                          DCD      U_up_block_cnt
                  |L1.3432|
                          DCD      TIME_VISION_PULT
                  |L1.3436|
                          DCD      T_PROC_GS_block_cnt
                  |L1.3440|
                          DCD      T_PROC_PS_block_cnt
                  |L1.3444|
                          DCD      main_menu_mode
                  |L1.3448|
                          DCD      I_ug
                  |L1.3452|
                          DCD      I_MIN_IPS
                  |L1.3456|
                          DCD      U_up
                  |L1.3460|
                          DCD      U_MAX
                  |L1.3464|
                          DCD      U_MIN
                  |L1.3468|
                          DCD      T_PROC_GS
                  |L1.3472|
                          DCD      T_PROC_GS_MODE
                  |L1.3476|
                          DCD      T_PROC_PS
                  |L1.3480|
                          DCD      T_PROC_PS_MODE
                  |L1.3484|
                          DCD      T_PROC_MAX
                  |L1.3488|
                          DCD      a_ind
                  |L1.3492|
                          DCD      time_proc
                  |L1.3496|
                          DCD      time_proc_remain
                  |L1.3500|
;;;571    							}			
;;;572    						else 
;;;573    							{
;;;574    							work_stat=wsOFF;
000dac  2000              MOVS     r0,#0
000dae  7028              STRB     r0,[r5,#0]
;;;575    							restart_off();
000db0  f7fffffe          BL       restart_off
                  |L1.3508|
;;;576    							}
;;;577    						}
;;;578    				
;;;579    					if(tumbler_stat==tsU)
000db4  f8980000          LDRB     r0,[r8,#0]  ; tumbler_stat
000db8  2801              CMP      r0,#1
000dba  d113              BNE      |L1.3556|
;;;580    						{
;;;581    						if(work_stat!=wsPS)
000dbc  7828              LDRB     r0,[r5,#0]  ; work_stat
000dbe  2802              CMP      r0,#2
000dc0  d00c              BEQ      |L1.3548|
;;;582    							{
;;;583    							work_stat=wsPS;
000dc2  2002              MOVS     r0,#2
;;;584    							time_proc=0;
000dc4  49f9              LDR      r1,|L1.4524|
000dc6  7028              STRB     r0,[r5,#0]            ;583
000dc8  2000              MOVS     r0,#0
;;;585    							time_proc_remain=T_PROC_PS;
000dca  6008              STR      r0,[r1,#0]  ; time_proc
000dcc  49f8              LDR      r1,|L1.4528|
000dce  680a              LDR      r2,[r1,#0]  ; T_PROC_PS
000dd0  49f8              LDR      r1,|L1.4532|
;;;586    							index_set=0;
000dd2  600a              STR      r2,[r1,#0]  ; time_proc_remain
000dd4  7130              STRB     r0,[r6,#4]
;;;587    							restart_on_PS();
000dd6  f7fffffe          BL       restart_on_PS
                  |L1.3546|
000dda  e003              B        |L1.3556|
                  |L1.3548|
;;;588    							}			
;;;589    						else
;;;590    							{
;;;591    							work_stat=wsOFF;
000ddc  2000              MOVS     r0,#0
000dde  7028              STRB     r0,[r5,#0]
;;;592    							restart_off();
000de0  f7fffffe          BL       restart_off
                  |L1.3556|
;;;593    							}
;;;594    						}
;;;595    					}
;;;596    				}
;;;597    			}
;;;598    		}
;;;599    
;;;600    	if(modbus_an_buffer[0]==MODBUS_ADRESS)
000de4  48f4              LDR      r0,|L1.4536|
000de6  7801              LDRB     r1,[r0,#0]  ; modbus_an_buffer
000de8  48f4              LDR      r0,|L1.4540|
000dea  f9b00000          LDRSH    r0,[r0,#0]  ; MODBUS_ADRESS
000dee  4281              CMP      r1,r0
000df0  d159              BNE      |L1.3750|
;;;601    		{
;;;602    		if(modbus_func==3)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ
000df2  9901              LDR      r1,[sp,#4]
000df4  2903              CMP      r1,#3
000df6  d04a              BEQ      |L1.3726|
;;;603    			{
;;;604    			if((modbus_rx_arg0>=50)&&(modbus_rx_arg0<80)) modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func, modbus_rx_arg0,modbus_rx_arg1, MODBUS_RTU_PROT);
;;;605    			}
;;;606    		else if(modbus_func==4)		//χςενθε οπξθηβξλόνξγξ κξλ-βΰ πεγθρςπξβ	βυξδξβ
000df8  2904              CMP      r1,#4
000dfa  d056              BEQ      |L1.3754|
;;;607    			{
;;;608    			modbus_input_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0, modbus_rx_arg1, MODBUS_RTU_PROT);
;;;609    			}
;;;610    
;;;611    		else if(modbus_func==6) 	//ηΰοθρό πεγθρςπΰ
000dfc  2906              CMP      r1,#6
000dfe  d152              BNE      |L1.3750|
;;;612    			{
;;;613    			if(modbus_rx_arg0==50)		//ςξκ ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000e00  2f32              CMP      r7,#0x32
000e02  d05b              BEQ      |L1.3772|
;;;614    				{
;;;615    				I_ug=modbus_rx_arg1;
;;;616    				lc640_write_int(EE_I_UG,I_ug);
;;;617    				}
;;;618    			if(modbus_rx_arg0==51)		//νΰοπζενθε ρςΰαθλθηΰφθθ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
000e04  2f33              CMP      r7,#0x33
000e06  d05e              BEQ      |L1.3782|
;;;619    				{
;;;620    				U_up=modbus_rx_arg1;
;;;621    				lc640_write_int(EE_U_UP,U_up);
;;;622    				}
;;;623    			if(modbus_rx_arg0==52)		//μΰκρθμΰολόνξε νΰοπζενθε δλ πεζθμΰ ρςΰαθλθηΰφθθ ςξκΰ
000e08  2f34              CMP      r7,#0x34
000e0a  d061              BEQ      |L1.3792|
;;;624    				{
;;;625    				U_maxg=modbus_rx_arg1;
;;;626    				lc640_write_int(EE_U_MAX_G,U_maxg);
;;;627    				}
;;;628    			if(modbus_rx_arg0==53)		//μΰκρθμΰλόνϋι ςξκ δλ πεζθμΰ ρςΰαθλθηΰφθθ νΰοπζενθ
000e0c  2f35              CMP      r7,#0x35
000e0e  d064              BEQ      |L1.3802|
;;;629    				{
;;;630    				I_maxp=modbus_rx_arg1;
;;;631    				lc640_write_int(EE_I_MAX_P,I_maxp);
;;;632    				}								
;;;633    			if(modbus_rx_arg0==54)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.ρεκσνδϋ
;;;634    				{
;;;635    				signed long sec,min,hour;
;;;636    				sec=(signed long)modbus_rx_arg1;
;;;637    				min=(T_PROC_GS/60L)%60L;
;;;638    				hour=T_PROC_GS/3600L;
000e10  f44f6061          MOV      r0,#0xe10
000e14  2f36              CMP      r7,#0x36              ;633
000e16  d065              BEQ      |L1.3812|
;;;639    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;640    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;641    				}
;;;642    			if(modbus_rx_arg0==55)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.μθνσςϋ
000e18  2f37              CMP      r7,#0x37
000e1a  d077              BEQ      |L1.3852|
;;;643    				{
;;;644    				signed long sec,min,hour;
;;;645    				sec=T_PROC_GS%60L;
;;;646    				min=(signed long)modbus_rx_arg1;
;;;647    				hour=T_PROC_GS/3600L;
;;;648    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;649    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;650    				}
;;;651    			if(modbus_rx_arg0==56)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.ςξκΰ.χΰρϋ
000e1c  2f38              CMP      r7,#0x38
000e1e  d076              BEQ      |L1.3854|
;;;652    				{
;;;653    				signed long sec,min,hour;
;;;654    				sec=T_PROC_GS%60L;
;;;655    				min=(T_PROC_GS/60L)%60L;
;;;656    				hour=(signed long)modbus_rx_arg1;
;;;657    				T_PROC_GS=(hour*3600L)+(min*60L)+sec;
;;;658    				lc640_write_long(EE_T_PROC_GS,T_PROC_GS);
;;;659    				}
;;;660    			if(modbus_rx_arg0==57)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.ρεκσνδϋ
000e20  2f39              CMP      r7,#0x39
000e22  d075              BEQ      |L1.3856|
;;;661    				{
;;;662    				signed long sec,min,hour;
;;;663    				sec=(signed long)modbus_rx_arg1;
;;;664    				min=(T_PROC_PS/60L)%60L;
;;;665    				hour=T_PROC_PS/3600L;
;;;666    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;667    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;668    				}
;;;669    
;;;670    			if(modbus_rx_arg0==58)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.μθνσςϋ
000e24  2f3a              CMP      r7,#0x3a
000e26  d074              BEQ      |L1.3858|
;;;671    				{
;;;672    				signed long sec,min,hour;
;;;673    				sec=T_PROC_PS%60L;
;;;674    				min=(signed long)modbus_rx_arg1;
;;;675    				hour=T_PROC_PS/3600L;
;;;676    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;677    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;678    				}
;;;679    
;;;680    			if(modbus_rx_arg0==59)		//Σρςΰνξβκΰ βπεμενθ δλ θρς.νΰοπ.χΰρϋ
000e28  2f3b              CMP      r7,#0x3b
000e2a  d073              BEQ      |L1.3860|
;;;681    				{
;;;682    				signed long sec,min,hour;
;;;683    				sec=T_PROC_PS%60L;
;;;684    				min=(T_PROC_PS/60L)%60L;
;;;685    				hour=(signed long)modbus_rx_arg1;
;;;686    				T_PROC_PS=(hour*3600L)+(min*60L)+sec;
;;;687    				lc640_write_long(EE_T_PROC_PS,T_PROC_PS);
;;;688    				}
;;;689    
;;;690    			if(modbus_rx_arg0==60)		//βκλ/βϋκλ θρςξχνθκΰ νΰοπ.
000e2c  2f3c              CMP      r7,#0x3c
000e2e  d072              BEQ      |L1.3862|
;;;691    				{
;;;692    				if(modbus_rx_arg1==1)
;;;693    					{
;;;694    					if(work_stat!=wsPS)
;;;695    						{
;;;696    						work_stat=wsPS;
;;;697    						time_proc=0;
;;;698    						time_proc_remain=T_PROC_PS;
;;;699    						restart_on_PS();
;;;700    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIN);
;;;701    						}
;;;702    					}
;;;703    				if(modbus_rx_arg1==0)
;;;704    					{
;;;705    					if(work_stat==wsPS)
;;;706    						{
;;;707    						work_stat=wsOFF;
;;;708    						restart_off();
;;;709    						}
;;;710    					}
;;;711    				}
;;;712    			if(modbus_rx_arg0==61)		//βκλ/βϋκλ θρςξχνθκΰ ςξκΰ
000e30  2f3d              CMP      r7,#0x3d
000e32  d071              BEQ      |L1.3864|
;;;713    				{
;;;714    				if(modbus_rx_arg1==1)
;;;715    					{
;;;716    					if(work_stat!=wsGS)
;;;717    						{
;;;718    						work_stat=wsGS;
;;;719    						time_proc=0;
;;;720    						time_proc_remain=T_PROC_GS;
;;;721    						lc640_write_int(EE_MAIN_MENU_MODE,mmmIT);
;;;722    						}
;;;723    					}
;;;724    				if(modbus_rx_arg1==0)
;;;725    					{
;;;726    					if(work_stat==wsGS)
;;;727    						{
;;;728    						work_stat=wsOFF;
;;;729    						restart_off();
;;;730    						}
;;;731    					}
;;;732    				}
;;;733    
;;;734    			if(modbus_rx_arg0==62)		//οεπεκλώχενθε πελε πεβεπρΰ
000e34  2f3e              CMP      r7,#0x3e
000e36  d070              BEQ      |L1.3866|
;;;735    				{
;;;736    					{
;;;737    					if(work_stat==wsOFF)
;;;738    						{
;;;739    						if(modbus_rx_arg1==0)REV_STAT=rsFF;
;;;740    						if(modbus_rx_arg1==1)REV_STAT=rsREW;
;;;741    						}
;;;742    					}
;;;743    				}
;;;744    			if(modbus_rx_arg0==63)		//βκλώχενθε-βϋκλώχενθε ΰβςξπεβεπρΰ
000e38  2f3f              CMP      r7,#0x3f
000e3a  d06f              BEQ      |L1.3868|
;;;745    				{
;;;746    					{
;;;747    					if((work_stat==wsOFF)&&(REV_IS_ON))
;;;748    						{
;;;749    						if(modbus_rx_arg1==1)AVT_REV_IS_ON=1;
;;;750    						if(modbus_rx_arg1==0)AVT_REV_IS_ON=0;
;;;751    						lc640_write_int(EE_AVT_REV_IS_ON,AVT_REV_IS_ON);
;;;752    						}
;;;753    					}
;;;754    				}
;;;755    			if(modbus_rx_arg0==64)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ οπμξε, ρεκ
000e3c  2f40              CMP      r7,#0x40
000e3e  d06e              BEQ      |L1.3870|
;;;756    				{
;;;757    				if(work_stat==wsOFF)
;;;758    					{
;;;759    					AVT_REV_TIME_FF=modbus_rx_arg1;
;;;760    					gran(&AVT_REV_TIME_FF,30,T_PROC_MAX);
;;;761    					lc640_write_int(EE_AVT_REV_TIME_FF,AVT_REV_TIME_FF);	
;;;762    					}
;;;763    				}
;;;764    			if(modbus_rx_arg0==65)		//ΐβςξπεβεπρ, βπεμ πΰαξςϋ ξαπΰςνξε, ρεκ
000e40  2f41              CMP      r7,#0x41
000e42  d06d              BEQ      |L1.3872|
;;;765    				{
;;;766    				if(work_stat==wsOFF)
;;;767    					{
;;;768    					AVT_REV_TIME_REW=modbus_rx_arg1;
;;;769    					gran(&AVT_REV_TIME_REW,30,T_PROC_MAX);
;;;770    					lc640_write_int(EE_AVT_REV_TIME_REW,AVT_REV_TIME_REW);	
;;;771    					}
;;;772    				}
;;;773    			if(modbus_rx_arg0==66)		//ΐβςξπεβεπρ, βπεμ οΰσηϋ οπθ οεπεκλώχενθθ, ρεκ
000e44  2f42              CMP      r7,#0x42
000e46  d06c              BEQ      |L1.3874|
;;;774    				{
;;;775    				if(work_stat==wsOFF)
;;;776    					{
;;;777    					AVT_REV_TIME_PAUSE=modbus_rx_arg1;
;;;778    					gran(&AVT_REV_TIME_PAUSE,2,600);
;;;779    					lc640_write_int(EE_AVT_REV_TIME_PAUSE,AVT_REV_TIME_PAUSE);	
;;;780    					}
;;;781    				}
;;;782    
;;;783    			if(modbus_rx_arg0==67)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ οπμξι, 0.1ΐ
000e48  2f43              CMP      r7,#0x43
000e4a  d06b              BEQ      |L1.3876|
;;;784    				{
;;;785    				if(work_stat==wsOFF)
;;;786    					{
;;;787    					AVT_REV_I_NOM_FF=modbus_rx_arg1;
;;;788    		    			gran(&AVT_REV_I_NOM_FF,I_MIN_IPS,I_MAX_IPS);
;;;789    					lc640_write_int(EE_AVT_REV_I_NOM_FF,AVT_REV_I_NOM_FF);	
;;;790    					}
;;;791    				}
;;;792    
;;;793    			if(modbus_rx_arg0==68)		//ΐβςξπεβεπρ, ςξκ ρςΰαθλθηΰφθθ ξαπΰςνϋι, 0.1ΐ
000e4c  2f44              CMP      r7,#0x44
000e4e  d06a              BEQ      |L1.3878|
;;;794    				{
;;;795    				if(work_stat==wsOFF)
;;;796    					{
;;;797    					AVT_REV_I_NOM_REW=modbus_rx_arg1;
;;;798    		    			gran(&AVT_REV_I_NOM_REW,I_MIN_IPS,I_MAX_IPS);
;;;799    					lc640_write_int(EE_AVT_REV_I_NOM_REW,AVT_REV_I_NOM_REW);	
;;;800    					}
;;;801    				}
;;;802    			if(modbus_rx_arg0==69)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ οπμξε, 0.1Β 
000e50  2f45              CMP      r7,#0x45
000e52  d069              BEQ      |L1.3880|
;;;803    				{
;;;804    				if(work_stat==wsOFF)
;;;805    					{
;;;806    					AVT_REV_U_NOM_FF=modbus_rx_arg1;
;;;807    		    			gran(&AVT_REV_U_NOM_FF,U_MIN,U_MAX);
;;;808    					lc640_write_int(EE_AVT_REV_U_NOM_FF,AVT_REV_U_NOM_FF);					
;;;809    					}
;;;810    				}
;;;811    
;;;812    			if(modbus_rx_arg0==70)		//ΐβςξπεβεπρ, νΰοπζενθε ρςΰαθλθηΰφθθ ξαπΰςνξε, 0.1Β
000e54  2f46              CMP      r7,#0x46
000e56  d068              BEQ      |L1.3882|
;;;813    				{
;;;814    				if(work_stat==wsOFF)
;;;815    					{
;;;816    					AVT_REV_U_NOM_REW=modbus_rx_arg1;
;;;817    		    			gran(&AVT_REV_U_NOM_REW,U_MIN,U_MAX);
;;;818    					lc640_write_int(EE_AVT_REV_U_NOM_REW,AVT_REV_U_NOM_REW);					
;;;819    					}
;;;820    				}
;;;821    
;;;822    			if(modbus_rx_arg0==71)		//Βπεμ ηΰπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;823    				{
;;;824    				if(work_stat==wsOFF)
;;;825    					{
;;;826    					CAP_ZAR_TIME=modbus_rx_arg1;
000e58  4ed9              LDR      r6,|L1.4544|
;;;827    		    			gran(&CAP_ZAR_TIME,10,9999);
000e5a  f242720f          MOV      r2,#0x270f
000e5e  2f47              CMP      r7,#0x47              ;822
000e60  d074              BEQ      |L1.3916|
;;;828    					lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;829    					}
;;;830    				}
;;;831    			if(modbus_rx_arg0==72)		//Βπεμ οΰσηϋ1 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;832    				{
;;;833    				if(work_stat==wsOFF)
;;;834    					{
;;;835    					CAP_PAUSE1_TIME=modbus_rx_arg1;
000e62  f8df8360          LDR      r8,|L1.4548|
000e66  2f48              CMP      r7,#0x48              ;831
000e68  d071              BEQ      |L1.3918|
;;;836    		    			gran(&CAP_PAUSE1_TIME,10,9999);
;;;837    					lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;838    					}
;;;839    				}
;;;840    			if(modbus_rx_arg0==73)		//Βπεμ πΰηπδΰ θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;841    				{
;;;842    				if(work_stat==wsOFF)
;;;843    					{
;;;844    					CAP_RAZR_TIME=modbus_rx_arg1;
000e6a  f8df935c          LDR      r9,|L1.4552|
000e6e  2f49              CMP      r7,#0x49              ;840
000e70  d06e              BEQ      |L1.3920|
;;;845    		    			gran(&CAP_RAZR_TIME,10,9999);
;;;846    					lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;847    					}
;;;848    				}
;;;849    			if(modbus_rx_arg0==74)		//Βπεμ οΰσηϋ2 θροϋςΰςελόνξγξ φθκλΰ, 0.1Ρ 
;;;850    				{
;;;851    				if(work_stat==wsOFF)
;;;852    					{
;;;853    					CAP_PAUSE2_TIME=modbus_rx_arg1;
000e72  f8dfb358          LDR      r11,|L1.4556|
000e76  2f4a              CMP      r7,#0x4a              ;849
000e78  d06b              BEQ      |L1.3922|
;;;854    		    			gran(&CAP_PAUSE2_TIME,10,9999);
;;;855    					lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;856    					}
;;;857    				}
;;;858    
;;;859    			if(modbus_rx_arg0==75)		//Μΰκρθμΰλόνξε νΰοπζενθε θροϋςΰςελόνξγξ φθκλΰ, 1Β  
;;;860    				{
;;;861    				if(work_stat==wsOFF)
;;;862    					{
;;;863    					CAP_MAX_VOLT=modbus_rx_arg1;
000e7a  48d5              LDR      r0,|L1.4560|
000e7c  2f4b              CMP      r7,#0x4b              ;859
000e7e  d069              BEQ      |L1.3924|
;;;864    		    			gran(&CAP_MAX_VOLT,1,100);
;;;865    					lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;866    					}
;;;867    				}
;;;868    			if(modbus_rx_arg0==76)		//Πΰαξχθι ςξκ θροϋςΰςελόνξγξ φθκλΰ, 1ΐ 
;;;869    				{
;;;870    				if(work_stat==wsOFF)
;;;871    					{
;;;872    					CAP_WRK_CURR=modbus_rx_arg1;
000e80  f8dfa350          LDR      r10,|L1.4564|
000e84  2f4c              CMP      r7,#0x4c              ;868
000e86  d07d              BEQ      |L1.3972|
;;;873    		    			gran(&CAP_WRK_CURR,1,150);
;;;874    					lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;875    					}
;;;876    				}
;;;877    
;;;878    			if(modbus_rx_arg0==77)		//Πεγθρςπ δλ ηΰοθρθ κξμΰνδ 
000e88  2f4d              CMP      r7,#0x4d
000e8a  d07c              BEQ      |L1.3974|
000e8c  e292              B        |L1.5044|
                  |L1.3726|
000e8e  f1a70132          SUB      r1,r7,#0x32           ;604
000e92  291e              CMP      r1,#0x1e              ;604
000e94  d207              BCS      |L1.3750|
000e96  2100              MOVS     r1,#0                 ;604
000e98  9100              STR      r1,[sp,#0]            ;604
000e9a  4623              MOV      r3,r4                 ;604
000e9c  463a              MOV      r2,r7                 ;604
000e9e  b2c0              UXTB     r0,r0                 ;604
000ea0  9901              LDR      r1,[sp,#4]            ;604
000ea2  f7fffffe          BL       modbus_hold_registers_transmit
                  |L1.3750|
;;;879    				{
;;;880    				if(modbus_rx_arg1==0x11)
;;;881    					{
;;;882    					start_CAP();
;;;883    					}
;;;884    				if(modbus_rx_arg1==0x12)
;;;885    					{
;;;886    					pause_CAP();
;;;887    					}
;;;888    				if(modbus_rx_arg1==0x13)
;;;889    					{
;;;890    					stop_CAP();
;;;891    					}
;;;892    				if(modbus_rx_arg1==0x14)
;;;893    					{
;;;894    					reset_CAP();
;;;895    					}
;;;896    
;;;897    				if(modbus_rx_arg1==0x21)
;;;898    					{
;;;899    					if(work_stat==wsOFF)
;;;900    						{
;;;901    						CAP_ZAR_TIME++;
;;;902    		    				gran(&CAP_ZAR_TIME,10,9999);
;;;903    						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;904    						}
;;;905    					}
;;;906    				if(modbus_rx_arg1==0x22)
;;;907    					{
;;;908    					if(work_stat==wsOFF)
;;;909    						{
;;;910    						CAP_ZAR_TIME--;
;;;911    		    				gran(&CAP_ZAR_TIME,10,9999);
;;;912    						lc640_write_int(EE_CAP_ZAR_TIME,CAP_ZAR_TIME);					
;;;913    						}
;;;914    					}
;;;915    
;;;916    				if(modbus_rx_arg1==0x31)
;;;917    					{
;;;918    					if(work_stat==wsOFF)
;;;919    						{
;;;920    						CAP_PAUSE1_TIME++;
;;;921    		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;922    						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;923    						}
;;;924    					}
;;;925    				if(modbus_rx_arg1==0x32)
;;;926    					{
;;;927    					if(work_stat==wsOFF)
;;;928    						{
;;;929    						CAP_PAUSE1_TIME--;
;;;930    		    				gran(&CAP_PAUSE1_TIME,10,9999);
;;;931    						lc640_write_int(EE_CAP_PAUSE1_TIME,CAP_PAUSE1_TIME);					
;;;932    						}
;;;933    					}
;;;934    
;;;935    				if(modbus_rx_arg1==0x41)
;;;936    					{
;;;937    					if(work_stat==wsOFF)
;;;938    						{
;;;939    						CAP_RAZR_TIME++;
;;;940    		    				gran(&CAP_RAZR_TIME,10,9999);
;;;941    						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;942    						}
;;;943    					}
;;;944    				if(modbus_rx_arg1==0x42)
;;;945    					{
;;;946    					if(work_stat==wsOFF)
;;;947    						{
;;;948    						CAP_RAZR_TIME--;
;;;949    		    				gran(&CAP_RAZR_TIME,10,9999);
;;;950    						lc640_write_int(EE_CAP_RAZR_TIME,CAP_RAZR_TIME);					
;;;951    						}
;;;952    					}
;;;953    
;;;954    				if(modbus_rx_arg1==0x51)
;;;955    					{
;;;956    					if(work_stat==wsOFF)
;;;957    						{
;;;958    						CAP_PAUSE2_TIME++;
;;;959    		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;960    						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;961    						}
;;;962    					}
;;;963    				if(modbus_rx_arg1==0x52)
;;;964    					{
;;;965    					if(work_stat==wsOFF)
;;;966    						{
;;;967    						CAP_PAUSE2_TIME--;
;;;968    		    				gran(&CAP_PAUSE2_TIME,10,9999);
;;;969    						lc640_write_int(EE_CAP_PAUSE2_TIME,CAP_PAUSE2_TIME);					
;;;970    						}
;;;971    					}
;;;972    
;;;973    				if(modbus_rx_arg1==0x61)
;;;974    					{
;;;975    					if(work_stat==wsOFF)
;;;976    						{
;;;977    						CAP_MAX_VOLT++;
;;;978    		    				gran(&CAP_MAX_VOLT,1,100);
;;;979    						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;980    						}
;;;981    					}
;;;982    				if(modbus_rx_arg1==0x62)
;;;983    					{
;;;984    					if(work_stat==wsOFF)
;;;985    						{
;;;986    						CAP_MAX_VOLT--;
;;;987    		    				gran(&CAP_MAX_VOLT,1,100);
;;;988    						lc640_write_int(EE_CAP_MAX_VOLT,CAP_MAX_VOLT);					
;;;989    						}
;;;990    					}
;;;991    
;;;992    				if(modbus_rx_arg1==0x71)
;;;993    					{
;;;994    					if(work_stat==wsOFF)
;;;995    						{
;;;996    						CAP_WRK_CURR++;
;;;997    		    				gran(&CAP_WRK_CURR,1,150);
;;;998    						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;999    						}
;;;1000   					}
;;;1001   				if(modbus_rx_arg1==0x72)
;;;1002   					{
;;;1003   					if(work_stat==wsOFF)
;;;1004   						{
;;;1005   						CAP_WRK_CURR--;
;;;1006   		    				gran(&CAP_WRK_CURR,1,150);
;;;1007   						lc640_write_int(EE_CAP_WRK_CURR,CAP_WRK_CURR);					
;;;1008   						}
;;;1009   					}
;;;1010   
;;;1011   				}
;;;1012   
;;;1013   			
;;;1014   			if((T_PROC_GS>T_PROC_MAX)||(T_PROC_GS<30))
;;;1015   				{
;;;1016   				if(T_PROC_GS>T_PROC_MAX)T_PROC_GS=T_PROC_MAX+1;
;;;1017   				else if(T_PROC_GS<30)T_PROC_GS=29;
;;;1018   				lc640_write_int(EE_T_PROC_GS,T_PROC_GS);
;;;1019   				T_PROC_GS_MODE=1;	
;;;1020   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1021   				}
;;;1022   			if((T_PROC_GS<=T_PROC_MAX)&&(T_PROC_GS>=30))
;;;1023   				{
;;;1024   				T_PROC_GS_MODE=0;	
;;;1025   				lc640_write_int(EE_T_PROC_GS_MODE,T_PROC_GS_MODE);
;;;1026   				}
;;;1027   			
;;;1028   			if((T_PROC_PS>T_PROC_MAX)||(T_PROC_PS<30))
;;;1029   				{
;;;1030   				if(T_PROC_PS>T_PROC_MAX)T_PROC_PS=T_PROC_MAX+1;
;;;1031   				else if(T_PROC_PS<30)T_PROC_PS=29;
;;;1032   				lc640_write_int(EE_T_PROC_PS,T_PROC_PS);
;;;1033   				T_PROC_PS_MODE=1;	
;;;1034   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1035   				}
;;;1036   			if((T_PROC_PS<=T_PROC_MAX)&&(T_PROC_PS>=30))
;;;1037   				{
;;;1038   				T_PROC_PS_MODE=0;	
;;;1039   				lc640_write_int(EE_T_PROC_PS_MODE,T_PROC_PS_MODE);
;;;1040   				}
;;;1041   
;;;1042   			modbus_hold_register_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0);
;;;1043   
;;;1044   
;;;1045   			//modbus_hold_registers_transmit(MODBUS_ADRESS,modbus_func,modbus_rx_arg0,2);
;;;1046   
;;;1047   
;;;1048   			}
;;;1049   		} 
;;;1050   	//;
;;;1051   	}
;;;1052   // modbus_plazma++;
;;;1053   
;;;1054   }
000ea6  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.3754|
000eaa  2100              MOVS     r1,#0                 ;608
000eac  9100              STR      r1,[sp,#0]            ;608
000eae  4623              MOV      r3,r4                 ;608
000eb0  463a              MOV      r2,r7                 ;608
000eb2  b2c0              UXTB     r0,r0                 ;608
000eb4  9901              LDR      r1,[sp,#4]            ;608
000eb6  f7fffffe          BL       modbus_input_registers_transmit
000eba  e7f4              B        |L1.3750|
                  |L1.3772|
000ebc  48c6              LDR      r0,|L1.4568|
000ebe  b221              SXTH     r1,r4                 ;615
000ec0  8001              STRH     r1,[r0,#0]            ;615
000ec2  2020              MOVS     r0,#0x20              ;616
000ec4  e271              B        |L1.5034|
                  |L1.3782|
000ec6  48c5              LDR      r0,|L1.4572|
000ec8  b221              SXTH     r1,r4                 ;620
000eca  8001              STRH     r1,[r0,#0]            ;620
000ecc  2022              MOVS     r0,#0x22              ;621
000ece  e26c              B        |L1.5034|
                  |L1.3792|
000ed0  48c3              LDR      r0,|L1.4576|
000ed2  b221              SXTH     r1,r4                 ;625
000ed4  8001              STRH     r1,[r0,#0]            ;625
000ed6  2076              MOVS     r0,#0x76              ;626
000ed8  e267              B        |L1.5034|
                  |L1.3802|
000eda  48c2              LDR      r0,|L1.4580|
000edc  b221              SXTH     r1,r4                 ;630
000ede  8001              STRH     r1,[r0,#0]            ;630
000ee0  2078              MOVS     r0,#0x78              ;631
000ee2  e262              B        |L1.5034|
                  |L1.3812|
000ee4  4ac0              LDR      r2,|L1.4584|
000ee6  4649              MOV      r1,r9                 ;637
000ee8  6813              LDR      r3,[r2,#0]            ;637  ; T_PROC_GS
000eea  fb93f5f1          SDIV     r5,r3,r1              ;637
000eee  fb95f6f9          SDIV     r6,r5,r9              ;637
000ef2  fb93f0f0          SDIV     r0,r3,r0              ;638
000ef6  fb095116          MLS      r1,r9,r6,r5           ;637
000efa  f44f6361          MOV      r3,#0xe10             ;639
000efe  4358              MULS     r0,r3,r0              ;639
000f00  ebc11101          RSB      r1,r1,r1,LSL #4       ;639
000f04  eb000081          ADD      r0,r0,r1,LSL #2       ;639
000f08  1901              ADDS     r1,r0,r4              ;639
000f0a  e024              B        |L1.3926|
                  |L1.3852|
000f0c  e00e              B        |L1.3884|
                  |L1.3854|
000f0e  e025              B        |L1.3932|
                  |L1.3856|
000f10  e03a              B        |L1.3976|
                  |L1.3858|
000f12  e04d              B        |L1.4016|
                  |L1.3860|
000f14  e05d              B        |L1.4050|
                  |L1.3862|
000f16  e074              B        |L1.4098|
                  |L1.3864|
000f18  e08b              B        |L1.4146|
                  |L1.3866|
000f1a  e0a5              B        |L1.4200|
                  |L1.3868|
000f1c  e0b1              B        |L1.4226|
                  |L1.3870|
000f1e  e0c3              B        |L1.4264|
                  |L1.3872|
000f20  e0d2              B        |L1.4296|
                  |L1.3874|
000f22  e0e2              B        |L1.4330|
                  |L1.3876|
000f24  e0f0              B        |L1.4360|
                  |L1.3878|
000f26  e100              B        |L1.4394|
                  |L1.3880|
000f28  e110              B        |L1.4428|
                  |L1.3882|
000f2a  e123              B        |L1.4468|
                  |L1.3884|
000f2c  4aae              LDR      r2,|L1.4584|
000f2e  6813              LDR      r3,[r2,#0]            ;645  ; T_PROC_GS
000f30  fb93f5f9          SDIV     r5,r3,r9              ;645
000f34  fb93f0f0          SDIV     r0,r3,r0              ;647
000f38  fb093115          MLS      r1,r9,r5,r3           ;645
000f3c  f44f6361          MOV      r3,#0xe10             ;648
000f40  4358              MULS     r0,r3,r0              ;648
000f42  ebc41304          RSB      r3,r4,r4,LSL #4       ;648
000f46  eb000083          ADD      r0,r0,r3,LSL #2       ;648
000f4a  e019              B        |L1.3968|
                  |L1.3916|
000f4c  e124              B        |L1.4504|
                  |L1.3918|
000f4e  e127              B        |L1.4512|
                  |L1.3920|
000f50  e168              B        |L1.4644|
                  |L1.3922|
000f52  e16c              B        |L1.4654|
                  |L1.3924|
000f54  e170              B        |L1.4664|
                  |L1.3926|
000f56  20d8              MOVS     r0,#0xd8              ;640
000f58  6011              STR      r1,[r2,#0]            ;640  ; T_PROC_GS
000f5a  e04f              B        |L1.4092|
                  |L1.3932|
000f5c  4aa2              LDR      r2,|L1.4584|
000f5e  4648              MOV      r0,r9                 ;654
000f60  6811              LDR      r1,[r2,#0]            ;654  ; T_PROC_GS
000f62  fb91f3f0          SDIV     r3,r1,r0              ;654
000f66  fb93f5f9          SDIV     r5,r3,r9              ;655
000f6a  fb093015          MLS      r0,r9,r5,r3           ;655
000f6e  fb091113          MLS      r1,r9,r3,r1           ;654
000f72  f44f6361          MOV      r3,#0xe10             ;657
000f76  435c              MULS     r4,r3,r4              ;657
000f78  ebc01000          RSB      r0,r0,r0,LSL #4       ;657
000f7c  eb040080          ADD      r0,r4,r0,LSL #2       ;657
                  |L1.3968|
000f80  4401              ADD      r1,r1,r0              ;657
000f82  e7e8              B        |L1.3926|
                  |L1.3972|
000f84  e164              B        |L1.4688|
                  |L1.3974|
000f86  e168              B        |L1.4698|
                  |L1.3976|
000f88  4a89              LDR      r2,|L1.4528|
000f8a  4649              MOV      r1,r9                 ;664
000f8c  6813              LDR      r3,[r2,#0]            ;664  ; T_PROC_PS
000f8e  fb93f5f1          SDIV     r5,r3,r1              ;664
000f92  fb95f6f9          SDIV     r6,r5,r9              ;664
000f96  fb93f0f0          SDIV     r0,r3,r0              ;665
000f9a  fb095116          MLS      r1,r9,r6,r5           ;664
000f9e  f44f6361          MOV      r3,#0xe10             ;666
000fa2  4358              MULS     r0,r3,r0              ;666
000fa4  ebc11101          RSB      r1,r1,r1,LSL #4       ;666
000fa8  eb000081          ADD      r0,r0,r1,LSL #2       ;666
000fac  1901              ADDS     r1,r0,r4              ;666
000fae  e023              B        |L1.4088|
                  |L1.4016|
000fb0  4a7f              LDR      r2,|L1.4528|
000fb2  6813              LDR      r3,[r2,#0]            ;673  ; T_PROC_PS
000fb4  fb93f5f9          SDIV     r5,r3,r9              ;673
000fb8  fb93f0f0          SDIV     r0,r3,r0              ;675
000fbc  fb093115          MLS      r1,r9,r5,r3           ;673
000fc0  f44f6361          MOV      r3,#0xe10             ;676
000fc4  4358              MULS     r0,r3,r0              ;676
000fc6  ebc41304          RSB      r3,r4,r4,LSL #4       ;676
000fca  eb000083          ADD      r0,r0,r3,LSL #2       ;676
000fce  4401              ADD      r1,r1,r0              ;676
000fd0  e012              B        |L1.4088|
                  |L1.4050|
000fd2  4a77              LDR      r2,|L1.4528|
000fd4  4649              MOV      r1,r9                 ;683
000fd6  6813              LDR      r3,[r2,#0]            ;683  ; T_PROC_PS
000fd8  fb93f0f1          SDIV     r0,r3,r1              ;683
000fdc  fb90f5f9          SDIV     r5,r0,r9              ;684
000fe0  fb093310          MLS      r3,r9,r0,r3           ;683
000fe4  fb090015          MLS      r0,r9,r5,r0           ;684
000fe8  f44f6161          MOV      r1,#0xe10             ;686
000fec  434c              MULS     r4,r1,r4              ;686
000fee  ebc01000          RSB      r0,r0,r0,LSL #4       ;686
000ff2  eb040080          ADD      r0,r4,r0,LSL #2       ;686
000ff6  18c1              ADDS     r1,r0,r3              ;686
                  |L1.4088|
000ff8  20dc              MOVS     r0,#0xdc              ;687
000ffa  6011              STR      r1,[r2,#0]            ;687  ; T_PROC_PS
                  |L1.4092|
000ffc  f7fffffe          BL       lc640_write_long
001000  e1d8              B        |L1.5044|
                  |L1.4098|
001002  2c01              CMP      r4,#1                 ;692
001004  d001              BEQ      |L1.4106|
001006  b184              CBZ      r4,|L1.4138|
001008  e1d4              B        |L1.5044|
                  |L1.4106|
00100a  7828              LDRB     r0,[r5,#0]            ;694  ; work_stat
00100c  2802              CMP      r0,#2                 ;694
00100e  d00f              BEQ      |L1.4144|
001010  2002              MOVS     r0,#2                 ;696
001012  4966              LDR      r1,|L1.4524|
001014  7028              STRB     r0,[r5,#0]            ;696
001016  2000              MOVS     r0,#0                 ;697
001018  6008              STR      r0,[r1,#0]            ;698  ; time_proc
00101a  4865              LDR      r0,|L1.4528|
00101c  6801              LDR      r1,[r0,#0]            ;698  ; T_PROC_PS
00101e  4865              LDR      r0,|L1.4532|
001020  6001              STR      r1,[r0,#0]            ;699  ; time_proc_remain
001022  f7fffffe          BL       restart_on_PS
001026  2101              MOVS     r1,#1                 ;700
001028  e014              B        |L1.4180|
                  |L1.4138|
00102a  7828              LDRB     r0,[r5,#0]            ;705  ; work_stat
00102c  2802              CMP      r0,#2                 ;705
00102e  d016              BEQ      |L1.4190|
                  |L1.4144|
001030  e1c0              B        |L1.5044|
                  |L1.4146|
001032  2c01              CMP      r4,#1                 ;714
001034  d001              BEQ      |L1.4154|
001036  b17c              CBZ      r4,|L1.4184|
001038  e1bc              B        |L1.5044|
                  |L1.4154|
00103a  7828              LDRB     r0,[r5,#0]            ;716  ; work_stat
00103c  2801              CMP      r0,#1                 ;716
00103e  d012              BEQ      |L1.4198|
001040  2001              MOVS     r0,#1                 ;718
001042  495a              LDR      r1,|L1.4524|
001044  7028              STRB     r0,[r5,#0]            ;718
001046  2000              MOVS     r0,#0                 ;719
001048  6008              STR      r0,[r1,#0]            ;720  ; time_proc
00104a  4867              LDR      r0,|L1.4584|
00104c  6801              LDR      r1,[r0,#0]            ;720  ; T_PROC_GS
00104e  4859              LDR      r0,|L1.4532|
001050  6001              STR      r1,[r0,#0]            ;721  ; time_proc_remain
001052  2100              MOVS     r1,#0                 ;721
                  |L1.4180|
001054  20ea              MOVS     r0,#0xea              ;700
001056  e1a8              B        |L1.5034|
                  |L1.4184|
001058  7828              LDRB     r0,[r5,#0]            ;726  ; work_stat
00105a  2801              CMP      r0,#1                 ;726
00105c  d103              BNE      |L1.4198|
                  |L1.4190|
00105e  2000              MOVS     r0,#0                 ;728
001060  7028              STRB     r0,[r5,#0]            ;728
001062  f7fffffe          BL       restart_off
                  |L1.4198|
001066  e1a5              B        |L1.5044|
                  |L1.4200|
001068  7828              LDRB     r0,[r5,#0]            ;737  ; work_stat
00106a  2800              CMP      r0,#0                 ;737
00106c  d103              BNE      |L1.4214|
00106e  485f              LDR      r0,|L1.4588|
001070  b114              CBZ      r4,|L1.4216|
001072  2c01              CMP      r4,#1                 ;740
001074  d002              BEQ      |L1.4220|
                  |L1.4214|
001076  e19d              B        |L1.5044|
                  |L1.4216|
001078  2101              MOVS     r1,#1                 ;739
00107a  e000              B        |L1.4222|
                  |L1.4220|
00107c  2100              MOVS     r1,#0                 ;740
                  |L1.4222|
00107e  7001              STRB     r1,[r0,#0]            ;740
001080  e198              B        |L1.5044|
                  |L1.4226|
001082  7828              LDRB     r0,[r5,#0]            ;747  ; work_stat
001084  bb80              CBNZ     r0,|L1.4328|
001086  485a              LDR      r0,|L1.4592|
001088  8800              LDRH     r0,[r0,#0]            ;747  ; REV_IS_ON
00108a  b368              CBZ      r0,|L1.4328|
00108c  4a59              LDR      r2,|L1.4596|
00108e  f44f7084          MOV      r0,#0x108             ;751
001092  2c01              CMP      r4,#1                 ;749
001094  d003              BEQ      |L1.4254|
001096  b124              CBZ      r4,|L1.4258|
001098  f9b21000          LDRSH    r1,[r2,#0]            ;751  ; AVT_REV_IS_ON
00109c  e185              B        |L1.5034|
                  |L1.4254|
00109e  2101              MOVS     r1,#1                 ;749
0010a0  e000              B        |L1.4260|
                  |L1.4258|
0010a2  2100              MOVS     r1,#0                 ;750
                  |L1.4260|
0010a4  8011              STRH     r1,[r2,#0]            ;749
0010a6  e180              B        |L1.5034|
                  |L1.4264|
0010a8  7828              LDRB     r0,[r5,#0]            ;757  ; work_stat
0010aa  b9e8              CBNZ     r0,|L1.4328|
0010ac  4d52              LDR      r5,|L1.4600|
0010ae  4853              LDR      r0,|L1.4604|
0010b0  211e              MOVS     r1,#0x1e              ;760
0010b2  802c              STRH     r4,[r5,#0]            ;759
0010b4  6800              LDR      r0,[r0,#0]            ;760  ; T_PROC_MAX
0010b6  b202              SXTH     r2,r0                 ;760
0010b8  4628              MOV      r0,r5                 ;760
0010ba  f7fffffe          BL       gran
0010be  f9b51000          LDRSH    r1,[r5,#0]            ;761  ; AVT_REV_TIME_FF
0010c2  f44f7085          MOV      r0,#0x10a             ;761
0010c6  e170              B        |L1.5034|
                  |L1.4296|
0010c8  7828              LDRB     r0,[r5,#0]            ;766  ; work_stat
0010ca  b968              CBNZ     r0,|L1.4328|
0010cc  4d4c              LDR      r5,|L1.4608|
0010ce  484b              LDR      r0,|L1.4604|
0010d0  211e              MOVS     r1,#0x1e              ;769
0010d2  802c              STRH     r4,[r5,#0]            ;768
0010d4  6800              LDR      r0,[r0,#0]            ;769  ; T_PROC_MAX
0010d6  b202              SXTH     r2,r0                 ;769
0010d8  4628              MOV      r0,r5                 ;769
0010da  f7fffffe          BL       gran
0010de  f9b51000          LDRSH    r1,[r5,#0]            ;770  ; AVT_REV_TIME_REW
0010e2  f44f7086          MOV      r0,#0x10c             ;770
0010e6  e160              B        |L1.5034|
                  |L1.4328|
0010e8  e040              B        |L1.4460|
                  |L1.4330|
0010ea  7828              LDRB     r0,[r5,#0]            ;775  ; work_stat
0010ec  bbf0              CBNZ     r0,|L1.4460|
0010ee  4d45              LDR      r5,|L1.4612|
0010f0  f44f7216          MOV      r2,#0x258             ;778
0010f4  2102              MOVS     r1,#2                 ;778
0010f6  802c              STRH     r4,[r5,#0]            ;777
0010f8  4628              MOV      r0,r5                 ;778
0010fa  f7fffffe          BL       gran
0010fe  f9b51000          LDRSH    r1,[r5,#0]            ;779  ; AVT_REV_TIME_PAUSE
001102  f44f7087          MOV      r0,#0x10e             ;779
001106  e150              B        |L1.5034|
                  |L1.4360|
001108  7828              LDRB     r0,[r5,#0]            ;785  ; work_stat
00110a  bb78              CBNZ     r0,|L1.4460|
00110c  4d3e              LDR      r5,|L1.4616|
00110e  483f              LDR      r0,|L1.4620|
001110  802c              STRH     r4,[r5,#0]            ;787
001112  f9b01000          LDRSH    r1,[r0,#0]            ;788  ; I_MIN_IPS
001116  f9bb2000          LDRSH    r2,[r11,#0]           ;788  ; I_MAX_IPS
00111a  4628              MOV      r0,r5                 ;788
00111c  f7fffffe          BL       gran
001120  f9b51000          LDRSH    r1,[r5,#0]            ;789  ; AVT_REV_I_NOM_FF
001124  f44f7088          MOV      r0,#0x110             ;789
001128  e13f              B        |L1.5034|
                  |L1.4394|
00112a  7828              LDRB     r0,[r5,#0]            ;795  ; work_stat
00112c  b9f0              CBNZ     r0,|L1.4460|
00112e  4d38              LDR      r5,|L1.4624|
001130  4836              LDR      r0,|L1.4620|
001132  802c              STRH     r4,[r5,#0]            ;797
001134  f9b01000          LDRSH    r1,[r0,#0]            ;798  ; I_MIN_IPS
001138  f9bb2000          LDRSH    r2,[r11,#0]           ;798  ; I_MAX_IPS
00113c  4628              MOV      r0,r5                 ;798
00113e  f7fffffe          BL       gran
001142  f9b51000          LDRSH    r1,[r5,#0]            ;799  ; AVT_REV_I_NOM_REW
001146  f44f7089          MOV      r0,#0x112             ;799
00114a  e12e              B        |L1.5034|
                  |L1.4428|
00114c  7828              LDRB     r0,[r5,#0]            ;804  ; work_stat
00114e  b968              CBNZ     r0,|L1.4460|
001150  4d30              LDR      r5,|L1.4628|
001152  4831              LDR      r0,|L1.4632|
001154  802c              STRH     r4,[r5,#0]            ;806
001156  f9b02000          LDRSH    r2,[r0,#0]            ;807  ; U_MAX
00115a  4830              LDR      r0,|L1.4636|
00115c  f9b01000          LDRSH    r1,[r0,#0]            ;807  ; U_MIN
001160  4628              MOV      r0,r5                 ;807
001162  f7fffffe          BL       gran
001166  f9b51000          LDRSH    r1,[r5,#0]            ;808  ; AVT_REV_U_NOM_FF
00116a  e000              B        |L1.4462|
                  |L1.4460|
00116c  e01d              B        |L1.4522|
                  |L1.4462|
00116e  f44f708a          MOV      r0,#0x114             ;808
001172  e11a              B        |L1.5034|
                  |L1.4468|
001174  7828              LDRB     r0,[r5,#0]            ;814  ; work_stat
001176  b9c0              CBNZ     r0,|L1.4522|
001178  4d29              LDR      r5,|L1.4640|
00117a  4827              LDR      r0,|L1.4632|
00117c  802c              STRH     r4,[r5,#0]            ;816
00117e  f9b02000          LDRSH    r2,[r0,#0]            ;817  ; U_MAX
001182  4826              LDR      r0,|L1.4636|
001184  f9b01000          LDRSH    r1,[r0,#0]            ;817  ; U_MIN
001188  4628              MOV      r0,r5                 ;817
00118a  f7fffffe          BL       gran
00118e  f9b51000          LDRSH    r1,[r5,#0]            ;818  ; AVT_REV_U_NOM_REW
001192  f44f708b          MOV      r0,#0x116             ;818
001196  e108              B        |L1.5034|
                  |L1.4504|
001198  7828              LDRB     r0,[r5,#0]            ;824  ; work_stat
00119a  b930              CBNZ     r0,|L1.4522|
00119c  8034              STRH     r4,[r6,#0]            ;826
00119e  e08e              B        |L1.4798|
                  |L1.4512|
0011a0  7828              LDRB     r0,[r5,#0]            ;833  ; work_stat
0011a2  b910              CBNZ     r0,|L1.4522|
0011a4  f8a84000          STRH     r4,[r8,#0]            ;835
0011a8  e09e              B        |L1.4840|
                  |L1.4522|
0011aa  e076              B        |L1.4762|
                  |L1.4524|
                          DCD      time_proc
                  |L1.4528|
                          DCD      T_PROC_PS
                  |L1.4532|
                          DCD      time_proc_remain
                  |L1.4536|
                          DCD      ||area_number.5||+0x1e
                  |L1.4540|
                          DCD      MODBUS_ADRESS
                  |L1.4544|
                          DCD      CAP_ZAR_TIME
                  |L1.4548|
                          DCD      CAP_PAUSE1_TIME
                  |L1.4552|
                          DCD      CAP_RAZR_TIME
                  |L1.4556|
                          DCD      CAP_PAUSE2_TIME
                  |L1.4560|
                          DCD      CAP_MAX_VOLT
                  |L1.4564|
                          DCD      CAP_WRK_CURR
                  |L1.4568|
                          DCD      I_ug
                  |L1.4572|
                          DCD      U_up
                  |L1.4576|
                          DCD      U_maxg
                  |L1.4580|
                          DCD      I_maxp
                  |L1.4584|
                          DCD      T_PROC_GS
                  |L1.4588|
                          DCD      REV_STAT
                  |L1.4592|
                          DCD      REV_IS_ON
                  |L1.4596|
                          DCD      AVT_REV_IS_ON
                  |L1.4600|
                          DCD      AVT_REV_TIME_FF
                  |L1.4604|
                          DCD      T_PROC_MAX
                  |L1.4608|
                          DCD      AVT_REV_TIME_REW
                  |L1.4612|
                          DCD      AVT_REV_TIME_PAUSE
                  |L1.4616|
                          DCD      AVT_REV_I_NOM_FF
                  |L1.4620|
                          DCD      I_MIN_IPS
                  |L1.4624|
                          DCD      AVT_REV_I_NOM_REW
                  |L1.4628|
                          DCD      AVT_REV_U_NOM_FF
                  |L1.4632|
                          DCD      U_MAX
                  |L1.4636|
                          DCD      U_MIN
                  |L1.4640|
                          DCD      AVT_REV_U_NOM_REW
                  |L1.4644|
001224  7828              LDRB     r0,[r5,#0]            ;842  ; work_stat
001226  bbc0              CBNZ     r0,|L1.4762|
001228  f8a94000          STRH     r4,[r9,#0]            ;844
00122c  e073              B        |L1.4886|
                  |L1.4654|
00122e  7828              LDRB     r0,[r5,#0]            ;851  ; work_stat
001230  bb98              CBNZ     r0,|L1.4762|
001232  f8ab4000          STRH     r4,[r11,#0]           ;853
001236  e086              B        |L1.4934|
                  |L1.4664|
001238  7829              LDRB     r1,[r5,#0]            ;861  ; work_stat
00123a  bb71              CBNZ     r1,|L1.4762|
00123c  4605              MOV      r5,r0                 ;863
00123e  8004              STRH     r4,[r0,#0]            ;863
001240  2264              MOVS     r2,#0x64              ;864
001242  2101              MOVS     r1,#1                 ;864
001244  488f              LDR      r0,|L1.5252|
001246  f7fffffe          BL       gran
00124a  f9b51000          LDRSH    r1,[r5,#0]            ;865  ; CAP_MAX_VOLT
00124e  e094              B        |L1.4986|
                  |L1.4688|
001250  7828              LDRB     r0,[r5,#0]            ;870  ; work_stat
001252  bb10              CBNZ     r0,|L1.4762|
001254  f8aa4000          STRH     r4,[r10,#0]           ;872
001258  e0be              B        |L1.5080|
                  |L1.4698|
00125a  2c11              CMP      r4,#0x11              ;880
00125c  d01e              BEQ      |L1.4764|
00125e  2c12              CMP      r4,#0x12              ;884
001260  d01f              BEQ      |L1.4770|
001262  2c13              CMP      r4,#0x13              ;888
001264  d020              BEQ      |L1.4776|
001266  2c14              CMP      r4,#0x14              ;892
001268  d021              BEQ      |L1.4782|
00126a  2c21              CMP      r4,#0x21              ;897
00126c  d022              BEQ      |L1.4788|
00126e  2c22              CMP      r4,#0x22              ;906
001270  d02e              BEQ      |L1.4816|
001272  2c31              CMP      r4,#0x31              ;916
001274  d032              BEQ      |L1.4828|
001276  2c32              CMP      r4,#0x32              ;925
001278  d03f              BEQ      |L1.4858|
00127a  2c41              CMP      r4,#0x41              ;935
00127c  d045              BEQ      |L1.4874|
00127e  2c42              CMP      r4,#0x42              ;944
001280  d053              BEQ      |L1.4906|
001282  2c51              CMP      r4,#0x51              ;954
001284  d059              BEQ      |L1.4922|
001286  2c52              CMP      r4,#0x52              ;963
001288  d066              BEQ      |L1.4952|
00128a  2c61              CMP      r4,#0x61              ;973
00128c  d06c              BEQ      |L1.4968|
00128e  2c62              CMP      r4,#0x62              ;982
001290  d076              BEQ      |L1.4992|
001292  2c71              CMP      r4,#0x71              ;992
001294  d06f              BEQ      |L1.4982|
001296  2c72              CMP      r4,#0x72              ;1001
001298  d06e              BEQ      |L1.4984|
                  |L1.4762|
00129a  e08b              B        |L1.5044|
                  |L1.4764|
00129c  f7fffffe          BL       start_CAP
0012a0  e088              B        |L1.5044|
                  |L1.4770|
0012a2  f7fffffe          BL       pause_CAP
0012a6  e085              B        |L1.5044|
                  |L1.4776|
0012a8  f7fffffe          BL       stop_CAP
0012ac  e082              B        |L1.5044|
                  |L1.4782|
0012ae  f7fffffe          BL       reset_CAP
0012b2  e07f              B        |L1.5044|
                  |L1.4788|
0012b4  7828              LDRB     r0,[r5,#0]            ;899  ; work_stat
0012b6  bbb8              CBNZ     r0,|L1.4904|
0012b8  8830              LDRH     r0,[r6,#0]            ;901  ; CAP_ZAR_TIME
0012ba  1c40              ADDS     r0,r0,#1              ;901
0012bc  e00c              B        |L1.4824|
                  |L1.4798|
0012be  210a              MOVS     r1,#0xa               ;827
0012c0  4871              LDR      r0,|L1.5256|
0012c2  f7fffffe          BL       gran
0012c6  f9b61000          LDRSH    r1,[r6,#0]            ;828  ; CAP_ZAR_TIME
0012ca  f44f70e9          MOV      r0,#0x1d2             ;828
0012ce  e06c              B        |L1.5034|
                  |L1.4816|
0012d0  7828              LDRB     r0,[r5,#0]            ;908  ; work_stat
0012d2  bb48              CBNZ     r0,|L1.4904|
0012d4  8830              LDRH     r0,[r6,#0]            ;910  ; CAP_ZAR_TIME
0012d6  1e40              SUBS     r0,r0,#1              ;910
                  |L1.4824|
0012d8  8030              STRH     r0,[r6,#0]            ;910
0012da  e7f0              B        |L1.4798|
                  |L1.4828|
0012dc  7828              LDRB     r0,[r5,#0]            ;918  ; work_stat
0012de  bb18              CBNZ     r0,|L1.4904|
0012e0  f8b80000          LDRH     r0,[r8,#0]            ;920  ; CAP_PAUSE1_TIME
0012e4  1c40              ADDS     r0,r0,#1              ;920
0012e6  e00d              B        |L1.4868|
                  |L1.4840|
0012e8  210a              MOVS     r1,#0xa               ;836
0012ea  4868              LDR      r0,|L1.5260|
0012ec  f7fffffe          BL       gran
0012f0  f9b81000          LDRSH    r1,[r8,#0]            ;837  ; CAP_PAUSE1_TIME
0012f4  f44f70ea          MOV      r0,#0x1d4             ;837
0012f8  e057              B        |L1.5034|
                  |L1.4858|
0012fa  7828              LDRB     r0,[r5,#0]            ;927  ; work_stat
0012fc  b9a0              CBNZ     r0,|L1.4904|
0012fe  f8b80000          LDRH     r0,[r8,#0]            ;929  ; CAP_PAUSE1_TIME
001302  1e40              SUBS     r0,r0,#1              ;929
                  |L1.4868|
001304  f8a80000          STRH     r0,[r8,#0]            ;929
001308  e7ee              B        |L1.4840|
                  |L1.4874|
00130a  7828              LDRB     r0,[r5,#0]            ;937  ; work_stat
00130c  b960              CBNZ     r0,|L1.4904|
00130e  f8b90000          LDRH     r0,[r9,#0]            ;939  ; CAP_RAZR_TIME
001312  1c40              ADDS     r0,r0,#1              ;939
001314  e00e              B        |L1.4916|
                  |L1.4886|
001316  210a              MOVS     r1,#0xa               ;845
001318  485d              LDR      r0,|L1.5264|
00131a  f7fffffe          BL       gran
00131e  f9b91000          LDRSH    r1,[r9,#0]            ;846  ; CAP_RAZR_TIME
001322  f44f70eb          MOV      r0,#0x1d6             ;846
001326  e040              B        |L1.5034|
                  |L1.4904|
001328  e038              B        |L1.5020|
                  |L1.4906|
00132a  7828              LDRB     r0,[r5,#0]            ;946  ; work_stat
00132c  bbb0              CBNZ     r0,|L1.5020|
00132e  f8b90000          LDRH     r0,[r9,#0]            ;948  ; CAP_RAZR_TIME
001332  1e40              SUBS     r0,r0,#1              ;948
                  |L1.4916|
001334  f8a90000          STRH     r0,[r9,#0]            ;948
001338  e7ed              B        |L1.4886|
                  |L1.4922|
00133a  7828              LDRB     r0,[r5,#0]            ;956  ; work_stat
00133c  bb70              CBNZ     r0,|L1.5020|
00133e  f8bb0000          LDRH     r0,[r11,#0]           ;958  ; CAP_PAUSE2_TIME
001342  1c40              ADDS     r0,r0,#1              ;958
001344  e00d              B        |L1.4962|
                  |L1.4934|
001346  210a              MOVS     r1,#0xa               ;854
001348  4852              LDR      r0,|L1.5268|
00134a  f7fffffe          BL       gran
00134e  f9bb1000          LDRSH    r1,[r11,#0]           ;855  ; CAP_PAUSE2_TIME
001352  f44f70ec          MOV      r0,#0x1d8             ;855
001356  e028              B        |L1.5034|
                  |L1.4952|
001358  7828              LDRB     r0,[r5,#0]            ;965  ; work_stat
00135a  b9f8              CBNZ     r0,|L1.5020|
00135c  f8bb0000          LDRH     r0,[r11,#0]           ;967  ; CAP_PAUSE2_TIME
001360  1e40              SUBS     r0,r0,#1              ;967
                  |L1.4962|
001362  f8ab0000          STRH     r0,[r11,#0]           ;967
001366  e7ee              B        |L1.4934|
                  |L1.4968|
001368  7829              LDRB     r1,[r5,#0]            ;975  ; work_stat
00136a  b9b9              CBNZ     r1,|L1.5020|
00136c  4604              MOV      r4,r0                 ;977
00136e  8800              LDRH     r0,[r0,#0]            ;977  ; CAP_MAX_VOLT
001370  1c40              ADDS     r0,r0,#1              ;977
001372  e00a              B        |L1.5002|
001374  e004              B        |L1.4992|
                  |L1.4982|
001376  e012              B        |L1.5022|
                  |L1.4984|
001378  e01a              B        |L1.5040|
                  |L1.4986|
00137a  f44f70ed          MOV      r0,#0x1da             ;865
00137e  e014              B        |L1.5034|
                  |L1.4992|
001380  7829              LDRB     r1,[r5,#0]            ;984  ; work_stat
001382  b959              CBNZ     r1,|L1.5020|
001384  4604              MOV      r4,r0                 ;986
001386  8800              LDRH     r0,[r0,#0]            ;986  ; CAP_MAX_VOLT
001388  1e40              SUBS     r0,r0,#1              ;986
                  |L1.5002|
00138a  8020              STRH     r0,[r4,#0]            ;986
00138c  2264              MOVS     r2,#0x64              ;987
00138e  2101              MOVS     r1,#1                 ;987
001390  483c              LDR      r0,|L1.5252|
001392  f7fffffe          BL       gran
001396  f9b41000          LDRSH    r1,[r4,#0]            ;988  ; CAP_MAX_VOLT
00139a  e7ee              B        |L1.4986|
                  |L1.5020|
00139c  e00a              B        |L1.5044|
                  |L1.5022|
00139e  7828              LDRB     r0,[r5,#0]            ;994  ; work_stat
0013a0  b940              CBNZ     r0,|L1.5044|
0013a2  f8ba0000          LDRH     r0,[r10,#0]           ;996  ; CAP_WRK_CURR
0013a6  1c40              ADDS     r0,r0,#1              ;996
0013a8  e014              B        |L1.5076|
                  |L1.5034|
0013aa  f7fffffe          BL       lc640_write_int
0013ae  e001              B        |L1.5044|
                  |L1.5040|
0013b0  7828              LDRB     r0,[r5,#0]            ;1003  ; work_stat
0013b2  b160              CBZ      r0,|L1.5070|
                  |L1.5044|
0013b4  4c38              LDR      r4,|L1.5272|
0013b6  4d39              LDR      r5,|L1.5276|
0013b8  6820              LDR      r0,[r4,#0]            ;1014  ; T_PROC_GS
0013ba  6829              LDR      r1,[r5,#0]            ;1014  ; T_PROC_MAX
0013bc  4288              CMP      r0,r1                 ;1014
0013be  dc01              BGT      |L1.5060|
0013c0  281e              CMP      r0,#0x1e              ;1014
0013c2  da22              BGE      |L1.5130|
                  |L1.5060|
0013c4  4288              CMP      r0,r1                 ;1016
0013c6  dd11              BLE      |L1.5100|
0013c8  1c49              ADDS     r1,r1,#1              ;1016
0013ca  6021              STR      r1,[r4,#0]            ;1016  ; T_PROC_GS
0013cc  e012              B        |L1.5108|
                  |L1.5070|
0013ce  f8ba0000          LDRH     r0,[r10,#0]           ;1005  ; CAP_WRK_CURR
0013d2  1e40              SUBS     r0,r0,#1              ;1005
                  |L1.5076|
0013d4  f8aa0000          STRH     r0,[r10,#0]           ;996
                  |L1.5080|
0013d8  2296              MOVS     r2,#0x96              ;1006
0013da  2101              MOVS     r1,#1                 ;1006
0013dc  4830              LDR      r0,|L1.5280|
0013de  f7fffffe          BL       gran
0013e2  f9ba1000          LDRSH    r1,[r10,#0]           ;1007  ; CAP_WRK_CURR
0013e6  f44f70ee          MOV      r0,#0x1dc             ;1007
0013ea  e7de              B        |L1.5034|
                  |L1.5100|
0013ec  281e              CMP      r0,#0x1e              ;1017
0013ee  da01              BGE      |L1.5108|
0013f0  201d              MOVS     r0,#0x1d              ;1017
0013f2  6020              STR      r0,[r4,#0]            ;1017  ; T_PROC_GS
                  |L1.5108|
0013f4  6820              LDR      r0,[r4,#0]            ;1018  ; T_PROC_GS
0013f6  b201              SXTH     r1,r0                 ;1018
0013f8  20d8              MOVS     r0,#0xd8              ;1018
0013fa  f7fffffe          BL       lc640_write_int
0013fe  4829              LDR      r0,|L1.5284|
001400  2101              MOVS     r1,#1                 ;1019
001402  8001              STRH     r1,[r0,#0]            ;1019
001404  20ee              MOVS     r0,#0xee              ;1020
001406  f7fffffe          BL       lc640_write_int
                  |L1.5130|
00140a  6820              LDR      r0,[r4,#0]            ;1022  ; T_PROC_GS
00140c  6829              LDR      r1,[r5,#0]            ;1022  ; T_PROC_MAX
00140e  4288              CMP      r0,r1                 ;1022
001410  dc07              BGT      |L1.5154|
001412  281e              CMP      r0,#0x1e              ;1022
001414  db05              BLT      |L1.5154|
001416  4823              LDR      r0,|L1.5284|
001418  2100              MOVS     r1,#0                 ;1024
00141a  8001              STRH     r1,[r0,#0]            ;1024
00141c  20ee              MOVS     r0,#0xee              ;1025
00141e  f7fffffe          BL       lc640_write_int
                  |L1.5154|
001422  4c21              LDR      r4,|L1.5288|
001424  6829              LDR      r1,[r5,#0]            ;1028  ; T_PROC_MAX
001426  6820              LDR      r0,[r4,#0]            ;1028  ; T_PROC_PS
001428  4288              CMP      r0,r1                 ;1028
00142a  dc01              BGT      |L1.5168|
00142c  281e              CMP      r0,#0x1e              ;1028
00142e  da13              BGE      |L1.5208|
                  |L1.5168|
001430  4288              CMP      r0,r1                 ;1030
001432  dd02              BLE      |L1.5178|
001434  1c49              ADDS     r1,r1,#1              ;1030
001436  6021              STR      r1,[r4,#0]            ;1030  ; T_PROC_PS
001438  e003              B        |L1.5186|
                  |L1.5178|
00143a  281e              CMP      r0,#0x1e              ;1031
00143c  da01              BGE      |L1.5186|
00143e  201d              MOVS     r0,#0x1d              ;1031
001440  6020              STR      r0,[r4,#0]            ;1031  ; T_PROC_PS
                  |L1.5186|
001442  6820              LDR      r0,[r4,#0]            ;1032  ; T_PROC_PS
001444  b201              SXTH     r1,r0                 ;1032
001446  20dc              MOVS     r0,#0xdc              ;1032
001448  f7fffffe          BL       lc640_write_int
00144c  4817              LDR      r0,|L1.5292|
00144e  2101              MOVS     r1,#1                 ;1033
001450  8001              STRH     r1,[r0,#0]            ;1033
001452  20f0              MOVS     r0,#0xf0              ;1034
001454  f7fffffe          BL       lc640_write_int
                  |L1.5208|
001458  6820              LDR      r0,[r4,#0]            ;1036  ; T_PROC_PS
00145a  6829              LDR      r1,[r5,#0]            ;1036  ; T_PROC_MAX
00145c  4288              CMP      r0,r1                 ;1036
00145e  dc07              BGT      |L1.5232|
001460  281e              CMP      r0,#0x1e              ;1036
001462  db05              BLT      |L1.5232|
001464  4811              LDR      r0,|L1.5292|
001466  2100              MOVS     r1,#0                 ;1038
001468  8001              STRH     r1,[r0,#0]            ;1038
00146a  20f0              MOVS     r0,#0xf0              ;1039
00146c  f7fffffe          BL       lc640_write_int
                  |L1.5232|
001470  480f              LDR      r0,|L1.5296|
001472  9901              LDR      r1,[sp,#4]            ;1042
001474  463a              MOV      r2,r7                 ;1042
001476  8800              LDRH     r0,[r0,#0]            ;1042  ; MODBUS_ADRESS
001478  b002              ADD      sp,sp,#8              ;1042
00147a  b2c0              UXTB     r0,r0                 ;1042
00147c  e8bd5ff0          POP      {r4-r12,lr}           ;1042
001480  f7ffbffe          B.W      modbus_hold_register_transmit
;;;1055   
                          ENDP

                  |L1.5252|
                          DCD      CAP_MAX_VOLT
                  |L1.5256|
                          DCD      CAP_ZAR_TIME
                  |L1.5260|
                          DCD      CAP_PAUSE1_TIME
                  |L1.5264|
                          DCD      CAP_RAZR_TIME
                  |L1.5268|
                          DCD      CAP_PAUSE2_TIME
                  |L1.5272|
                          DCD      T_PROC_GS
                  |L1.5276|
                          DCD      T_PROC_MAX
                  |L1.5280|
                          DCD      CAP_WRK_CURR
                  |L1.5284|
                          DCD      T_PROC_GS_MODE
                  |L1.5288|
                          DCD      T_PROC_PS
                  |L1.5292|
                          DCD      T_PROC_PS_MODE
                  |L1.5296|
                          DCD      MODBUS_ADRESS

                          AREA ||area_number.2||, CODE, READONLY, ALIGN=2

                          EXPORTAS ||area_number.2||, ||.text||
                  modbus_register_transmit PROC
;;;1204   //-----------------------------------------------
;;;1205   void modbus_register_transmit(unsigned char adr,unsigned char func,unsigned short reg_adr)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;1206   {
000004  4681              MOV      r9,r0
;;;1207   char modbus_registers[120];
;;;1208   char modbus_tx_buff[100];
;;;1209   unsigned short crc_temp;
;;;1210   char i;
;;;1211   
;;;1212   modbus_registers[0]=(char)(load_U/256);					//Πεγ1
000006  4888              LDR      r0,|L2.552|
000008  468a              MOV      r10,r1                ;1206
00000a  b0b8              SUB      sp,sp,#0xe0           ;1206
00000c  f9b00000          LDRSH    r0,[r0,#0]  ; load_U
;;;1213   modbus_registers[1]=(char)(load_U%256);
;;;1214   modbus_registers[2]=(char)(load_I/256);					//Πεγ2
;;;1215   modbus_registers[3]=(char)(load_I%256);
;;;1216   modbus_registers[4]=(char)((time_proc%60)/256);			//Πεγ3
000010  243c              MOVS     r4,#0x3c
000012  17c1              ASRS     r1,r0,#31             ;1212
000014  eb006111          ADD      r1,r0,r1,LSR #24      ;1212
000018  120b              ASRS     r3,r1,#8              ;1212
00001a  f88d3000          STRB     r3,[sp,#0]            ;1212
00001e  f88d0001          STRB     r0,[sp,#1]            ;1213
000022  4882              LDR      r0,|L2.556|
;;;1217   modbus_registers[5]=(char)((time_proc%60)%256);
;;;1218   modbus_registers[6]=(char)((time_proc/60)/256);			//Πεγ4
;;;1219   modbus_registers[7]=(char)((time_proc/60)%256);
;;;1220   modbus_registers[8]=(char)((time_proc/3600)/256);			//Πεγ5
;;;1221   modbus_registers[9]=(char)((time_proc/3600)%256);		 	
000024  f44f6861          MOV      r8,#0xe10
000028  f9b00000          LDRSH    r0,[r0,#0]            ;1214  ; load_I
00002c  17c1              ASRS     r1,r0,#31             ;1214
00002e  eb006111          ADD      r1,r0,r1,LSR #24      ;1214
000032  120b              ASRS     r3,r1,#8              ;1214
000034  f88d3002          STRB     r3,[sp,#2]            ;1214
000038  f88d0003          STRB     r0,[sp,#3]            ;1215
00003c  487c              LDR      r0,|L2.560|
00003e  6801              LDR      r1,[r0,#0]            ;1216  ; time_proc
000040  fb91f3f4          SDIV     r3,r1,r4              ;1216
000044  fb041013          MLS      r0,r4,r3,r1           ;1216
000048  17c5              ASRS     r5,r0,#31             ;1216
00004a  eb006515          ADD      r5,r0,r5,LSR #24      ;1216
00004e  122e              ASRS     r6,r5,#8              ;1216
000050  f88d6004          STRB     r6,[sp,#4]            ;1216
000054  f88d0005          STRB     r0,[sp,#5]            ;1217
000058  0225              LSLS     r5,r4,#8              ;1218
00005a  fb91f0f5          SDIV     r0,r1,r5              ;1218
00005e  f88d0006          STRB     r0,[sp,#6]            ;1218
000062  4618              MOV      r0,r3                 ;1219
000064  f88d0007          STRB     r0,[sp,#7]            ;1219
000068  f44f2661          MOV      r6,#0xe1000           ;1220
00006c  fb91f0f6          SDIV     r0,r1,r6              ;1220
000070  f88d0008          STRB     r0,[sp,#8]            ;1220
000074  fb91f0f8          SDIV     r0,r1,r8
000078  f88d0009          STRB     r0,[sp,#9]
;;;1222   modbus_registers[10]=(char)((time_proc_remain%60)/256);	//Πεγ6
00007c  486d              LDR      r0,|L2.564|
00007e  6800              LDR      r0,[r0,#0]  ; time_proc_remain
000080  fb90f1f4          SDIV     r1,r0,r4
000084  fb040311          MLS      r3,r4,r1,r0
000088  17df              ASRS     r7,r3,#31
00008a  eb036717          ADD      r7,r3,r7,LSR #24
00008e  ea4f2c27          ASR      r12,r7,#8
000092  f88dc00a          STRB     r12,[sp,#0xa]
;;;1223   modbus_registers[11]=(char)((time_proc_remain%60)%256);
000096  f88d300b          STRB     r3,[sp,#0xb]
;;;1224   modbus_registers[12]=(char)((time_proc_remain/60)/256);	//Πεγ7
00009a  fb90f3f5          SDIV     r3,r0,r5
00009e  f88d300c          STRB     r3,[sp,#0xc]
;;;1225   modbus_registers[13]=(char)((time_proc_remain/60)%256);
0000a2  f88d100d          STRB     r1,[sp,#0xd]
;;;1226   modbus_registers[14]=(char)((time_proc_remain/3600)/256);	//Πεγ8
0000a6  fb90f1f6          SDIV     r1,r0,r6
;;;1227   modbus_registers[15]=(char)((time_proc_remain/3600)%256);
0000aa  fb90f0f8          SDIV     r0,r0,r8
0000ae  f88d100e          STRB     r1,[sp,#0xe]          ;1226
0000b2  f88d000f          STRB     r0,[sp,#0xf]
;;;1228   modbus_registers[16]=(char)(I_ug/256);					//Πεγ9
0000b6  4860              LDR      r0,|L2.568|
0000b8  f9b00000          LDRSH    r0,[r0,#0]  ; I_ug
0000bc  17c1              ASRS     r1,r0,#31
0000be  eb006111          ADD      r1,r0,r1,LSR #24
0000c2  120b              ASRS     r3,r1,#8
0000c4  f88d3010          STRB     r3,[sp,#0x10]
;;;1229   modbus_registers[17]=(char)(I_ug%256);
0000c8  f88d0011          STRB     r0,[sp,#0x11]
;;;1230   modbus_registers[18]=(char)(U_up/256);					//Πεγ10
0000cc  485b              LDR      r0,|L2.572|
0000ce  f9b00000          LDRSH    r0,[r0,#0]  ; U_up
0000d2  17c1              ASRS     r1,r0,#31
0000d4  eb006111          ADD      r1,r0,r1,LSR #24
0000d8  120b              ASRS     r3,r1,#8
0000da  f88d3012          STRB     r3,[sp,#0x12]
;;;1231   modbus_registers[19]=(char)(U_up%256);
0000de  f88d0013          STRB     r0,[sp,#0x13]
;;;1232   modbus_registers[20]=(char)(U_maxg/256);				//Πεγ11
0000e2  4857              LDR      r0,|L2.576|
0000e4  f9b00000          LDRSH    r0,[r0,#0]  ; U_maxg
0000e8  17c1              ASRS     r1,r0,#31
0000ea  eb006111          ADD      r1,r0,r1,LSR #24
0000ee  120b              ASRS     r3,r1,#8
0000f0  f88d3014          STRB     r3,[sp,#0x14]
;;;1233   modbus_registers[21]=(char)(U_maxg%256);
0000f4  f88d0015          STRB     r0,[sp,#0x15]
;;;1234   modbus_registers[22]=(char)(I_maxp/256);				//Πεγ12
0000f8  4852              LDR      r0,|L2.580|
0000fa  f9b00000          LDRSH    r0,[r0,#0]  ; I_maxp
0000fe  17c1              ASRS     r1,r0,#31
000100  eb006111          ADD      r1,r0,r1,LSR #24
000104  120b              ASRS     r3,r1,#8
000106  f88d3016          STRB     r3,[sp,#0x16]
;;;1235   modbus_registers[23]=(char)(I_maxp%256);
00010a  f88d0017          STRB     r0,[sp,#0x17]
;;;1236   modbus_registers[24]=(char)((T_PROC_GS%60)/256);			//Πεγ13
00010e  484e              LDR      r0,|L2.584|
000110  6800              LDR      r0,[r0,#0]  ; T_PROC_GS
000112  fb90f1f4          SDIV     r1,r0,r4
000116  fb040311          MLS      r3,r4,r1,r0
00011a  17df              ASRS     r7,r3,#31
00011c  eb036717          ADD      r7,r3,r7,LSR #24
000120  ea4f2c27          ASR      r12,r7,#8
000124  f88dc018          STRB     r12,[sp,#0x18]
;;;1237   modbus_registers[25]=(char)((T_PROC_GS%60)%256);
000128  f88d3019          STRB     r3,[sp,#0x19]
;;;1238   modbus_registers[26]=(char)((T_PROC_GS/60)/256);			//Πεγ14
00012c  fb90f3f5          SDIV     r3,r0,r5
000130  f88d301a          STRB     r3,[sp,#0x1a]
;;;1239   modbus_registers[27]=(char)((T_PROC_GS/60)%256);
000134  f88d101b          STRB     r1,[sp,#0x1b]
;;;1240   modbus_registers[28]=(char)((T_PROC_GS/3600)/256);		//Πεγ15
000138  fb90f1f6          SDIV     r1,r0,r6
;;;1241   modbus_registers[29]=(char)((T_PROC_GS/3600)%256);
00013c  fb90f0f8          SDIV     r0,r0,r8
000140  f88d101c          STRB     r1,[sp,#0x1c]         ;1240
000144  f88d001d          STRB     r0,[sp,#0x1d]
;;;1242   modbus_registers[30]=(char)((T_PROC_PS%60)/256);			//Πεγ16
000148  4840              LDR      r0,|L2.588|
00014a  6800              LDR      r0,[r0,#0]  ; T_PROC_PS
00014c  fb90f1f4          SDIV     r1,r0,r4
000150  fb040311          MLS      r3,r4,r1,r0
000154  17dc              ASRS     r4,r3,#31
000156  eb036414          ADD      r4,r3,r4,LSR #24
00015a  1227              ASRS     r7,r4,#8
00015c  f88d701e          STRB     r7,[sp,#0x1e]
;;;1243   modbus_registers[31]=(char)((T_PROC_PS%60)%256);
000160  f88d301f          STRB     r3,[sp,#0x1f]
;;;1244   modbus_registers[32]=(char)((T_PROC_PS/60)/256);			//Πεγ17
000164  fb90f3f5          SDIV     r3,r0,r5
000168  f88d3020          STRB     r3,[sp,#0x20]
;;;1245   modbus_registers[33]=(char)((T_PROC_PS/60)%256);
00016c  f88d1021          STRB     r1,[sp,#0x21]
;;;1246   modbus_registers[34]=(char)((T_PROC_PS/3600)/256);		//Πεγ18
000170  fb90f1f6          SDIV     r1,r0,r6
;;;1247   modbus_registers[35]=(char)((T_PROC_PS/3600)%256);
000174  fb90f0f8          SDIV     r0,r0,r8
000178  f88d1022          STRB     r1,[sp,#0x22]         ;1246
00017c  f88d0023          STRB     r0,[sp,#0x23]
;;;1248   modbus_registers[36]=0;								//Πεγ19
000180  2000              MOVS     r0,#0
;;;1249   modbus_registers[37]=0;
;;;1250   if(work_stat==wsPS)modbus_registers[37]=1;
000182  4933              LDR      r1,|L2.592|
000184  f88d0024          STRB     r0,[sp,#0x24]         ;1248
000188  f88d0025          STRB     r0,[sp,#0x25]         ;1249
00018c  780b              LDRB     r3,[r1,#0]  ; work_stat
00018e  2101              MOVS     r1,#1
000190  2b02              CMP      r3,#2
000192  d101              BNE      |L2.408|
000194  f88d1025          STRB     r1,[sp,#0x25]
                  |L2.408|
;;;1251   modbus_registers[38]=0;								//Πεγ20
000198  f88d0026          STRB     r0,[sp,#0x26]
;;;1252   modbus_registers[39]=0;
00019c  f88d0027          STRB     r0,[sp,#0x27]
;;;1253   if(work_stat==wsGS)modbus_registers[39]=1;
0001a0  2b01              CMP      r3,#1
0001a2  d101              BNE      |L2.424|
0001a4  f88d1027          STRB     r1,[sp,#0x27]
                  |L2.424|
;;;1254   modbus_registers[40]=0;								//Πεγ21
;;;1255   modbus_registers[41]=0;
;;;1256   if(REV_STAT==rsREW)modbus_registers[41]=1;
0001a8  4b2a              LDR      r3,|L2.596|
0001aa  f88d0028          STRB     r0,[sp,#0x28]         ;1254
0001ae  f88d0029          STRB     r0,[sp,#0x29]         ;1255
0001b2  781b              LDRB     r3,[r3,#0]  ; REV_STAT
0001b4  b90b              CBNZ     r3,|L2.442|
0001b6  f88d1029          STRB     r1,[sp,#0x29]
                  |L2.442|
;;;1257   modbus_registers[42]=0;								//Πεγ22
0001ba  f88d002a          STRB     r0,[sp,#0x2a]
;;;1258   modbus_registers[43]=0;
0001be  f88d002b          STRB     r0,[sp,#0x2b]
;;;1259   if(AVT_REV_IS_ON)modbus_registers[42]=1;
0001c2  4825              LDR      r0,|L2.600|
0001c4  8800              LDRH     r0,[r0,#0]  ; AVT_REV_IS_ON
0001c6  b108              CBZ      r0,|L2.460|
0001c8  f88d102a          STRB     r1,[sp,#0x2a]
                  |L2.460|
;;;1260   
;;;1261   modbus_tx_buff[0]=adr;
0001cc  f88d9078          STRB     r9,[sp,#0x78]
;;;1262   modbus_tx_buff[1]=func;
0001d0  f88da079          STRB     r10,[sp,#0x79]
;;;1263   modbus_tx_buff[2]=(char)(reg_adr/256);
0001d4  0a10              LSRS     r0,r2,#8
0001d6  f88d007a          STRB     r0,[sp,#0x7a]
;;;1264   modbus_tx_buff[3]=(char)(reg_adr%256);
;;;1265   //modbus_tx_buff[4]=(char)(reg_quantity/256);
;;;1266   //modbus_tx_buff[5]=(char)(reg_quantity%256);
;;;1267   /*
;;;1268   modbus_registers[0]=0x10;
;;;1269   modbus_registers[1]=0x11;
;;;1270   modbus_registers[2]=0x12;
;;;1271   modbus_registers[3]=0x13;
;;;1272   modbus_registers[4]=0x14;
;;;1273   modbus_registers[5]=0x15;
;;;1274   */
;;;1275   
;;;1276   memcpy((char*)&modbus_tx_buff[4],(char*)&modbus_registers[(reg_adr-1)*2],2);
0001da  4668              MOV      r0,sp
0001dc  eb000042          ADD      r0,r0,r2,LSL #1
0001e0  f88d207b          STRB     r2,[sp,#0x7b]         ;1264
0001e4  f8300c02          LDRH     r0,[r0,#-2]
0001e8  f8ad007c          STRH     r0,[sp,#0x7c]
;;;1277   
;;;1278   crc_temp=CRC16_2(modbus_tx_buff,6);
0001ec  2106              MOVS     r1,#6
0001ee  a81e              ADD      r0,sp,#0x78
0001f0  f7fffffe          BL       CRC16_2
;;;1279   
;;;1280   modbus_tx_buff[6]=crc_temp%256;
0001f4  f88d007e          STRB     r0,[sp,#0x7e]
;;;1281   modbus_tx_buff[7]=crc_temp/256;
0001f8  0a00              LSRS     r0,r0,#8
0001fa  f88d007f          STRB     r0,[sp,#0x7f]
;;;1282   
;;;1283   for (i=0;i<8;i++)
0001fe  2400              MOVS     r4,#0
000200  ad1e              ADD      r5,sp,#0x78           ;1208
                  |L2.514|
;;;1284   	{
;;;1285   	putchar0(modbus_tx_buff[i]);
000202  5d28              LDRB     r0,[r5,r4]
000204  f7fffffe          BL       putchar0
000208  1c64              ADDS     r4,r4,#1              ;1283
00020a  b2e4              UXTB     r4,r4                 ;1283
00020c  2c08              CMP      r4,#8                 ;1283
00020e  d3f8              BCC      |L2.514|
;;;1286   	}
;;;1287   for (i=0;i<8;i++)
000210  2400              MOVS     r4,#0
                  |L2.530|
;;;1288   	{
;;;1289   	putchar_sc16is700(modbus_tx_buff[i]);
000212  5d28              LDRB     r0,[r5,r4]
000214  f7fffffe          BL       putchar_sc16is700
000218  1c64              ADDS     r4,r4,#1              ;1287
00021a  b2e4              UXTB     r4,r4                 ;1287
00021c  2c08              CMP      r4,#8                 ;1287
00021e  d3f8              BCC      |L2.530|
;;;1290   	}
;;;1291   }
000220  b038              ADD      sp,sp,#0xe0
000222  e8bd87f0          POP      {r4-r10,pc}
;;;1292   
                          ENDP

000226  0000              DCW      0x0000
                  |L2.552|
                          DCD      load_U
                  |L2.556|
                          DCD      load_I
                  |L2.560|
                          DCD      time_proc
                  |L2.564|
                          DCD      time_proc_remain
                  |L2.568|
                          DCD      I_ug
                  |L2.572|
                          DCD      U_up
                  |L2.576|
                          DCD      U_maxg
                  |L2.580|
                          DCD      I_maxp
                  |L2.584|
                          DCD      T_PROC_GS
                  |L2.588|
                          DCD      T_PROC_PS
                  |L2.592|
                          DCD      work_stat
                  |L2.596|
                          DCD      REV_STAT
                  |L2.600|
                          DCD      AVT_REV_IS_ON

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  modbus_buf
                          %        20

                          AREA ||area_number.5||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.5||, ||.bss||
                  modbus_rx_buffer
                          %        30
                  modbus_an_buffer
                          %        30
                  modbus_registers
                          %        200

                          AREA ||.data||, DATA, ALIGN=1

                  modbus_self_cmnd_cnt
000000  21                DCB      0x21
                  bMODBUS_TIMEOUT
000001  00                DCB      0x00
                  modbus_rx_buffer_ptr
000002  00                DCB      0x00
                  modbus_rx_counter
000003  00                DCB      0x00
                  modbus_cmnd_cnt
000004  00                DCB      0x00
                  modbus_cmnd
000005  00                DCB      0x00
                  modbus_plazma
000006  0000              DCB      0x00,0x00
                  modbus_plazma1
000008  0000              DCB      0x00,0x00
                  modbus_plazma2
00000a  0000              DCB      0x00,0x00
                  modbus_plazma3
00000c  0000              DCB      0x00,0x00

                          AREA ||area_number.8||, DATA, ALIGN=1

                          EXPORTAS ||area_number.8||, ||.data||
                  modbus_crc16
000000  0000              DCB      0x00,0x00

                          AREA ||area_number.9||, DATA, ALIGN=0

                          EXPORTAS ||area_number.9||, ||.data||
                  modbus_timeout_cnt
000000  00                DCB      0x00

                          AREA ||area_number.10||, DATA, ALIGN=1

                          EXPORTAS ||area_number.10||, ||.data||
                  modbusTimeoutInMills
000000  0000              DCB      0x00,0x00
